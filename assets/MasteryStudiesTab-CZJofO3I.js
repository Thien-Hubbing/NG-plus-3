import{n as e}from"./vue.runtime.esm-D16ICdaY.js";import{n as t,t as n}from"./DescriptionDisplay-AFGai49t.js";import{t as r}from"./_plugin-vue2_normalizer-Djvn235C.js";import"./word-shift-DMYEwIjN.js";import{t as i}from"./PrimaryButton-OjOj1qlr.js";import{a,c as o,i as s,l as c,n as l,r as u,s as d,t as f,u as p}from"./SecretTimeStudy-h7jwE3bB.js";import"./CostDisplay-DmPAKV-J.js";import{t as m}from"./HintText-BA7KbrSY.js";var h=e({name:`QuantumTimeStudy`,components:{DescriptionDisplay:n,EffectDisplay:t,HintText:m,TimeStudyButton:d},props:{setup:{type:Object,required:!0}},data:()=>({showCost:!0}),computed:{study(){return this.setup.study},hintText(){return this.study.id}},methods:{update(){this.showCost=!0}}}),g=r(h,function(){var e=this,t=e._self._c;return e._self._setupProxy,t(`TimeStudyButton`,{attrs:{setup:e.setup,"show-cost":e.showCost,"show-st-cost":e.showSTCost}},[t(`HintText`,{staticClass:`l-hint-text--time-study`,attrs:{type:`studies`}},[e._v(` `+e._s(e.hintText)+` `)]),t(`span`,{class:{"o-pelle-disabled":e.isUseless}},[t(`DescriptionDisplay`,{attrs:{config:e.study.config}}),t(`EffectDisplay`,{attrs:{br:``,config:e.study.config}})],1)],1)},[],!1,null,`640ce2d6`,null,null).exports,_=class{constructor(e,t,n){this.layout=e,this.items=t,this.isWide=n}get width(){let e=this.items.length,t=this.layout;return e*t.itemWidth+(e-1)*t.spacing}itemPosition(e,t){let n=this.layout;return(t.width-this.width)/2+e*n.itemWidth+e*n.spacing}},v=class{constructor(e){this.itemWidth=e.itemWidth,this.itemHeight=e.itemHeight,this.spacing=e.spacing}},y=class e{constructor(e,t=1){this.spacing=4*t,this.rows=[];let n=new v({itemWidth:18*t,itemHeight:10*t,spacing:3*t}),r=new v({itemWidth:12*t,itemHeight:10*t,spacing:.6*t}),i=(...e)=>new _(n,e),a=(...e)=>new _(r,e,!0),s=e=>MasteryStudy(e).isUnlocked?MasteryStudy(e):null,l=e=>TimeStudy.eternityChallenge(e);this.rows.push(i(s(11)),i(s(21),s(22),s(23)),a(s(31),s(32),s(33),s(34),s(35),s(36)),i(l(13),l(14)),i(TimeStudy.pairProduction),i(s(41),s(42),s(43)),i(s(51),TimeStudy.quantumChallenges,s(52)),i(TimeStudy.pairedChallenges),i(s(61),s(62)),i(s(71),s(72),s(73)),i(s(81),TimeStudy.duplicants,s(82)),i(s(91),null,null,s(92))),this.studies=[];for(let e=0;e<this.rows.length;e++){let t=this.rows[e];for(let n=0;n<t.items.length;n++){let r=t.items[n];if(r===null)continue;let i=new o({study:r,row:e,column:n});t.isWide&&(i.isSmall=!0),this.studies.push(i)}}this.connections=MasteryStudy.allConnections.map(e=>new c(e)),this.width=this.rows.map(e=>e.width).nMax(),this.height=this.rows.map(e=>e.layout.itemHeight).nSum()+(this.rows.length-1)*this.spacing;for(let e of this.studies)e.setPosition(this);for(let e of this.connections)e.setPosition(this.studies,this.width,this.height)}itemPosition(e){let t=this.rows.slice(0,e);return t.map(e=>e.layout.itemHeight).nSum()+t.length*this.spacing}static create(t,n=1){this._instances===void 0&&(this._instances=[]);let r=new e(t,n);return this._instances[`${t}__${n}`]=r,r}},b=e({name:`MasteryStudiesTab`,components:{PrimaryButton:i,NormalTimeStudy:l,ECTimeStudy:u,DilationTimeStudy:s,SecretTimeStudy:f,TimeStudyConnection:p,QuantumTimeStudy:g},data(){return{respec:player.respec,layoutType:a.NORMAL,vLevel:0,renderedStudyCount:0,renderedConnectionCount:0,isEnslaved:!1,delayTimer:0}},computed:{layout(){return y.create(this.layoutType)},allStudies(){return this.layout.studies},studies(){return this.allStudies.slice(0,this.renderedStudyCount)},allConnections(){return this.layout.connections},connections(){return this.allConnections.slice(0,this.renderedConnectionCount)},treeStyleObject(){return{width:`${this.layout.width}rem`,height:`${this.layout.height}rem`}},respecClassObject(){return{"o-primary-btn--subtab-option":!0,"o-primary-btn--respec-active":this.respec}}},watch:{respec(e){player.respec=e},vLevel(){this.$recompute(`layout`)}},created(){let e=()=>{let t=!1;this.renderedStudyCount<this.allStudies.length&&(this.renderedStudyCount+=2,t=!0),this.renderedConnectionCount<this.allConnections.length&&(this.renderedConnectionCount+=2,t=!0),t&&(this.renderAnimationId=requestAnimationFrame(e))};e(),document.body.scrollTop=0},beforeDestroy(){cancelAnimationFrame(this.renderAnimationId)},methods:{update(){this.respec=player.respec,this.layoutType=a.current,this.vLevel=Ra.pets.v.level,this.isEnslaved=Enslaved.isRunning||Date.now()-this.delayTimer<1e3},studyComponent(e){switch(e.type){case TIME_STUDY_TYPE.NORMAL:return l;case TIME_STUDY_TYPE.ETERNITY_CHALLENGE:return u;case TIME_STUDY_TYPE.DILATION:return s;case TIME_STUDY_TYPE.QUANTUM:return g}throw TypeError(`Unknown Time Study type`)}}}),x=r(b,function(){var e=this,t=e._self._c;return e._self._setupProxy,t(`div`,{staticClass:`l-time-studies-tab`},[t(`div`,{staticClass:`l-time-study-tree l-time-studies-tab__tree`,style:e.treeStyleObject},[e._l(e.studies,function(n){return t(e.studyComponent(n.study),{key:n.study.type.toString()+n.study.id.toString(),tag:`component`,attrs:{setup:n}})}),t(`svg`,{staticClass:`l-time-study-connection`,style:e.treeStyleObject},e._l(e.connections,function(e,n){return t(`TimeStudyConnection`,{key:`connection`+n,attrs:{setup:e}})}),1)],2)])},[],!1,null,`f96bf139`,null,null).exports;export{x as default};