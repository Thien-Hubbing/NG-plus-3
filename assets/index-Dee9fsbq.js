const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MetaDimensionsTab-Bdn5LLJO.js","assets/_plugin-vue2_normalizer-Djvn235C.js","assets/vue.runtime.esm-DWHiGzmS.js","assets/GenericDimensionRowText-CHeTeywV.js","assets/GenericDimensionRowText-wz2W4BZc.css","assets/PrimaryButton-3rbxDx5g.js","assets/MetaDimensionsTab-Dr4-3k2E.css","assets/MasteryStudiesTab-bH7teV44.js","assets/CostDisplay-C4KvUMll.js","assets/DescriptionDisplay-DpXGle8H.js","assets/word-shift-DMYEwIjN.js","assets/HintText-iCrFHyiC.js","assets/SecretTimeStudy-Bnp_Hone.js","assets/MasteryStudiesTab-x1XGuNl0.css","assets/QuarksTab-CW-eSJD1.js","assets/PrimaryToggleButton-BtD8a5bs.js","assets/AutobuyerInput-B_E1YNmi.js","assets/AutobuyerInput-CGE4fDiS.css","assets/QuarksTab-CpzTczzH.css","assets/PairProductionTab-CdkaRf9R.js","assets/PairProductionTab-CKUpSskX.css","assets/QuantumChallengesTab-x1CI5KYl.js","assets/ChallengeBox-DZGqben0.js","assets/ChallengeBox-D-4Qymsj.css","assets/QuantumChallengesTab-C2DN4WFt.css","assets/GluonUpgradesTab-Db6mFflI.js","assets/GluonUpgradesTab-B0plr0TC.css","assets/QuantumMilestonesTab-CXlif0HL.js","assets/QuantumMilestonesTab-DeJuEDmf.css","assets/AutomatorBlockEditor-CXbq4W50.js","assets/AutomatorBlockEditor-Bkgm0KMW.js","assets/constants-hHFhCqyo.js","assets/chunk-CoEicJgV.js","assets/vuedraggable.umd-BCzFf3Wt.js","assets/AutomatorBlockEditor-DFwGaD5h.css","assets/AutomatorBlocks-DyAknDPW.js","assets/AutomatorBlocks-unAjhSxK.js","assets/AutomatorBlocks-Bt5ZX2aH.css","assets/AutomatorTextEditor-DckWc4FP.js","assets/AutomatorTextEditor-CD0NdTtt.js","assets/PerksTab-CccpyeJB.js","assets/PerksTab-BexHx3I5.js","assets/PerksTab-CVJ9Lgtf.css"])))=>i.map(i=>d[i]);
import{a as e,r as t,t as n}from"./chunk-CoEicJgV.js";import{n as r,r as i,t as a}from"./vue.runtime.esm-DWHiGzmS.js";import{t as o}from"./constants-hHFhCqyo.js";import{a as s,n as c,r as l,t as u}from"./DescriptionDisplay-DpXGle8H.js";import"./vuedraggable.umd-BCzFf3Wt.js";import{_ as d,a as f,c as p,d as m,f as h,g,h as _,i as v,l as y,m as b,o as x,p as S,r as C,s as w,t as T,u as E}from"./AutomatorBlockEditor-Bkgm0KMW.js";import{t as D}from"./_plugin-vue2_normalizer-Djvn235C.js";import{t as O}from"./AutomatorBlocks-unAjhSxK.js";import{t as k}from"./AutomatorTextEditor-CD0NdTtt.js";import{a as A,c as ee,d as te,f as j,i as ne,l as re,o as ie,r as M,s as N,u as P}from"./PerksTab-BexHx3I5.js";import{n as F}from"./AutobuyerInput-B_E1YNmi.js";import{t as I}from"./word-shift-DMYEwIjN.js";import{t as L}from"./PrimaryButton-3rbxDx5g.js";import{t as R}from"./PrimaryToggleButton-BtD8a5bs.js";import{a as ae,i as oe,n as se,o as ce,r as le,s as ue,t as de,u as fe}from"./SecretTimeStudy-Bnp_Hone.js";import{t as pe}from"./CostDisplay-C4KvUMll.js";import{t as me}from"./HintText-iCrFHyiC.js";import{t as he}from"./GenericDimensionRowText-CHeTeywV.js";import{n as ge,r as _e,t as ve}from"./ChallengeBox-DZGqben0.js";(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e){if(t.type!==`childList`)continue;for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var ye;(function(e){var t=function(){function e(){this._dropEffect=`move`,this._effectAllowed=`all`,this._data={}}return Object.defineProperty(e.prototype,`dropEffect`,{get:function(){return this._dropEffect},set:function(e){this._dropEffect=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,`effectAllowed`,{get:function(){return this._effectAllowed},set:function(e){this._effectAllowed=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,`types`,{get:function(){return Object.keys(this._data)},enumerable:!0,configurable:!0}),e.prototype.clearData=function(e){e==null?this._data=null:delete this._data[e]},e.prototype.getData=function(e){return this._data[e]||``},e.prototype.setData=function(e,t){this._data[e]=t},e.prototype.setDragImage=function(e,t,r){var i=n._instance;i._imgCustom=e,i._imgOffset={x:t,y:r}},e}();e.DataTransfer=t;var n=function(){function e(){if(this._lastClick=0,e._instance)throw`DragDropTouch instance already created.`;var t=!1;if(document.addEventListener(`test`,function(){},{get passive(){return t=!0,!0}}),`ontouchstart`in document){var n=document,r=this._touchstart.bind(this),i=this._touchmove.bind(this),a=this._touchend.bind(this),o=t?{passive:!1,capture:!1}:!1;n.addEventListener(`touchstart`,r,o),n.addEventListener(`touchmove`,i,o),n.addEventListener(`touchend`,a),n.addEventListener(`touchcancel`,a)}}return e.getInstance=function(){return e._instance},e.prototype._touchstart=function(t){var n=this;if(this._shouldHandle(t)){if(Date.now()-this._lastClick<e._DBLCLICK&&this._dispatchEvent(t,`dblclick`,t.target)){t.cancelable&&t.preventDefault(),this._reset();return}this._reset();var r=this._closestDraggable(t.target);r&&!this._dispatchEvent(t,`mousemove`,t.target)&&!this._dispatchEvent(t,`mousedown`,t.target)&&(this._dragSource=r,this._ptDown=this._getPoint(t),this._lastTouch=t,t.cancelable&&t.preventDefault(),setTimeout(function(){n._dragSource==r&&n._img==null&&n._dispatchEvent(t,`contextmenu`,r)&&n._reset()},e._CTXMENU),e._ISPRESSHOLDMODE&&(this._pressHoldInterval=setTimeout(function(){n._isDragEnabled=!0,n._touchmove(t)},e._PRESSHOLDAWAIT)))}},e.prototype._touchmove=function(e){if(this._shouldCancelPressHoldMove(e)){this._reset();return}if(this._shouldHandleMove(e)||this._shouldHandlePressHoldMove(e)){var t=this._getTarget(e);if(this._dispatchEvent(e,`mousemove`,t)){this._lastTouch=e,e.cancelable&&e.preventDefault();return}this._dragSource&&!this._img&&this._shouldStartDragging(e)&&(this._dispatchEvent(e,`dragstart`,this._dragSource),this._createImage(e),this._dispatchEvent(e,`dragenter`,t)),this._img&&(this._lastTouch=e,e.cancelable&&e.preventDefault(),t!=this._lastTarget&&(this._dispatchEvent(this._lastTouch,`dragleave`,this._lastTarget),this._dispatchEvent(e,`dragenter`,t),this._lastTarget=t),this._moveImage(e),this._isDropZone=this._dispatchEvent(e,`dragover`,t))}},e.prototype._touchend=function(e){if(this._shouldHandle(e)){if(this._dispatchEvent(this._lastTouch,`mouseup`,e.target)){e.cancelable&&e.preventDefault();return}this._img||(this._dragSource=null,this._dispatchEvent(this._lastTouch,`click`,e.target),this._lastClick=Date.now()),this._destroyImage(),this._dragSource&&(e.type.indexOf(`cancel`)<0&&this._isDropZone&&this._dispatchEvent(this._lastTouch,`drop`,this._lastTarget),this._dispatchEvent(this._lastTouch,`dragend`,this._dragSource),this._reset())}},e.prototype._shouldHandle=function(e){return e&&!e.defaultPrevented&&e.touches&&e.touches.length<2},e.prototype._shouldHandleMove=function(t){return!e._ISPRESSHOLDMODE&&this._shouldHandle(t)},e.prototype._shouldHandlePressHoldMove=function(t){return e._ISPRESSHOLDMODE&&this._isDragEnabled&&t&&t.touches&&t.touches.length},e.prototype._shouldCancelPressHoldMove=function(t){return e._ISPRESSHOLDMODE&&!this._isDragEnabled&&this._getDelta(t)>e._PRESSHOLDMARGIN},e.prototype._shouldStartDragging=function(t){var n=this._getDelta(t);return n>e._THRESHOLD||e._ISPRESSHOLDMODE&&n>=e._PRESSHOLDTHRESHOLD},e.prototype._reset=function(){this._destroyImage(),this._dragSource=null,this._lastTouch=null,this._lastTarget=null,this._ptDown=null,this._isDragEnabled=!1,this._isDropZone=!1,this._dataTransfer=new t,clearInterval(this._pressHoldInterval)},e.prototype._getPoint=function(e,t){return e&&e.touches&&(e=e.touches[0]),{x:t?e.pageX:e.clientX,y:t?e.pageY:e.clientY}},e.prototype._getDelta=function(t){if(e._ISPRESSHOLDMODE&&!this._ptDown)return 0;var n=this._getPoint(t);return Math.abs(n.x-this._ptDown.x)+Math.abs(n.y-this._ptDown.y)},e.prototype._getTarget=function(e){for(var t=this._getPoint(e),n=document.elementFromPoint(t.x,t.y);n&&getComputedStyle(n).pointerEvents==`none`;)n=n.parentElement;return n},e.prototype._createImage=function(t){this._img&&this._destroyImage();var n=this._imgCustom||this._dragSource;if(this._img=n.cloneNode(!0),this._copyStyle(n,this._img),this._img.style.top=this._img.style.left=`-9999px`,!this._imgCustom){var r=n.getBoundingClientRect(),i=this._getPoint(t);this._imgOffset={x:i.x-r.left,y:i.y-r.top},this._img.style.opacity=e._OPACITY.toString()}this._moveImage(t),document.body.appendChild(this._img)},e.prototype._destroyImage=function(){this._img&&this._img.parentElement&&this._img.parentElement.removeChild(this._img),this._img=null,this._imgCustom=null},e.prototype._moveImage=function(e){var t=this;requestAnimationFrame(function(){if(t._img){var n=t._getPoint(e,!0),r=t._img.style;r.position=`absolute`,r.pointerEvents=`none`,r.zIndex=`999999`,r.left=Math.round(n.x-t._imgOffset.x)+`px`,r.top=Math.round(n.y-t._imgOffset.y)+`px`}})},e.prototype._copyProps=function(e,t,n){for(var r=0;r<n.length;r++){var i=n[r];e[i]=t[i]}},e.prototype._copyStyle=function(t,n){if(e._rmvAtts.forEach(function(e){n.removeAttribute(e)}),t instanceof HTMLCanvasElement){var r=t,i=n;i.width=r.width,i.height=r.height,i.getContext(`2d`).drawImage(r,0,0)}for(var a=getComputedStyle(t),o=0;o<a.length;o++){var s=a[o];s.indexOf(`transition`)<0&&(n.style[s]=a[s])}n.style.pointerEvents=`none`;for(var o=0;o<t.children.length;o++)this._copyStyle(t.children[o],n.children[o])},e.prototype._dispatchEvent=function(t,n,r){if(t&&r){var i=document.createEvent(`Event`),a=t.touches?t.touches[0]:t;return i.initEvent(n,!0,!0),i.button=0,i.which=i.buttons=1,this._copyProps(i,t,e._kbdProps),this._copyProps(i,a,e._ptProps),i.dataTransfer=this._dataTransfer,r.dispatchEvent(i),i.defaultPrevented}return!1},e.prototype._closestDraggable=function(e){for(;e;e=e.parentElement)if(e.hasAttribute(`draggable`)&&e.draggable)return e;return null},e}();n._instance=new n,n._THRESHOLD=5,n._OPACITY=.5,n._DBLCLICK=500,n._CTXMENU=900,n._ISPRESSHOLDMODE=!1,n._PRESSHOLDAWAIT=400,n._PRESSHOLDMARGIN=25,n._PRESSHOLDTHRESHOLD=0,n._rmvAtts=`id,class,style,draggable`.split(`,`),n._kbdProps=`altKey,ctrlKey,metaKey,shiftKey`.split(`,`),n._ptProps=`pageX,pageY,clientX,clientY,screenX,screenY`.split(`,`),e.DragDropTouch=n})(ye||={});var be=n(((exports,t)=>{(function(n,r){typeof exports==`object`&&t!==void 0?t.exports=r():typeof define==`function`&&define.amd?define(r):(n||=self,n.CodeMirror=r())})(exports,(function(){var e=navigator.userAgent,t=navigator.platform,n=/gecko\/\d/i.test(e),r=/MSIE \d/.test(e),i=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(e),a=/Edge\/(\d+)/.exec(e),o=r||i||a,s=o&&(r?document.documentMode||6:+(a||i)[1]),c=!a&&/WebKit\//.test(e),l=c&&/Qt\/\d+\.\d+/.test(e),u=!a&&/Chrome\/(\d+)/.exec(e),d=u&&+u[1],f=/Opera\//.test(e),p=/Apple Computer/.test(navigator.vendor),m=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(e),h=/PhantomJS/.test(e),g=p&&(/Mobile\/\w+/.test(e)||navigator.maxTouchPoints>2),_=/Android/.test(e),v=g||_||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e),y=g||/Mac/.test(t),b=/\bCrOS\b/.test(e),x=/win/i.test(t),S=f&&e.match(/Version\/(\d*\.\d*)/);S&&=Number(S[1]),S&&S>=15&&(f=!1,c=!0);var C=y&&(l||f&&(S==null||S<12.11)),w=n||o&&s>=9;function T(e){return RegExp(`(^|\\s)`+e+`(?:$|\\s)\\s*`)}var E=function(e,t){var n=e.className,r=T(t).exec(n);if(r){var i=n.slice(r.index+r[0].length);e.className=n.slice(0,r.index)+(i?r[1]+i:``)}};function D(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function O(e,t){return D(e).appendChild(t)}function k(e,t,n,r){var i=document.createElement(e);if(n&&(i.className=n),r&&(i.style.cssText=r),typeof t==`string`)i.appendChild(document.createTextNode(t));else if(t)for(var a=0;a<t.length;++a)i.appendChild(t[a]);return i}function A(e,t,n,r){var i=k(e,t,n,r);return i.setAttribute(`role`,`presentation`),i}var ee=document.createRange?function(e,t,n,r){var i=document.createRange();return i.setEnd(r||e,n),i.setStart(e,t),i}:function(e,t,n){var r=document.body.createTextRange();try{r.moveToElementText(e.parentNode)}catch{return r}return r.collapse(!0),r.moveEnd(`character`,n),r.moveStart(`character`,t),r};function te(e,t){if(t.nodeType==3&&(t=t.parentNode),e.contains)return e.contains(t);do if(t.nodeType==11&&(t=t.host),t==e)return!0;while(t=t.parentNode)}function j(e){var t=e.ownerDocument||e,n;try{n=e.activeElement}catch{n=t.body||null}for(;n&&n.shadowRoot&&n.shadowRoot.activeElement;)n=n.shadowRoot.activeElement;return n}function ne(e,t){var n=e.className;T(t).test(n)||(e.className+=(n?` `:``)+t)}function re(e,t){for(var n=e.split(` `),r=0;r<n.length;r++)n[r]&&!T(n[r]).test(t)&&(t+=` `+n[r]);return t}var ie=function(e){e.select()};g?ie=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:o&&(ie=function(e){try{e.select()}catch{}});function M(e){return e.display.wrapper.ownerDocument}function N(e){return P(e.display.wrapper)}function P(e){return e.getRootNode?e.getRootNode():e.ownerDocument}function F(e){return M(e).defaultView}function I(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function L(e,t,n){for(var r in t||={},e)e.hasOwnProperty(r)&&(n!==!1||!t.hasOwnProperty(r))&&(t[r]=e[r]);return t}function R(e,t,n,r,i){t??(t=e.search(/[^\s\u00a0]/),t==-1&&(t=e.length));for(var a=r||0,o=i||0;;){var s=e.indexOf(`	`,a);if(s<0||s>=t)return o+(t-a);o+=s-a,o+=n-o%n,a=s+1}}var ae=function(){this.id=null,this.f=null,this.time=0,this.handler=I(this.onTimeout,this)};ae.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)},ae.prototype.set=function(e,t){this.f=t;var n=+new Date+e;(!this.id||n<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=n)};function oe(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}var se=50,ce={toString:function(){return`CodeMirror.Pass`}},le={scroll:!1},ue={origin:`*mouse`},de={origin:`+move`};function fe(e,t,n){for(var r=0,i=0;;){var a=e.indexOf(`	`,r);a==-1&&(a=e.length);var o=a-r;if(a==e.length||i+o>=t)return r+Math.min(o,t-i);if(i+=a-r,i+=n-i%n,r=a+1,i>=t)return r}}var pe=[``];function me(e){for(;pe.length<=e;)pe.push(he(pe)+` `);return pe[e]}function he(e){return e[e.length-1]}function ge(e,t){for(var n=[],r=0;r<e.length;r++)n[r]=t(e[r],r);return n}function _e(e,t,n){for(var r=0,i=n(t);r<e.length&&n(e[r])<=i;)r++;e.splice(r,0,t)}function ve(){}function ye(e,t){var n;return Object.create?n=Object.create(e):(ve.prototype=e,n=new ve),t&&L(t,n),n}var be=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function xe(e){return/\w/.test(e)||e>``&&(e.toUpperCase()!=e.toLowerCase()||be.test(e))}function Se(e,t){return t?t.source.indexOf(`\\w`)>-1&&xe(e)?!0:t.test(e):xe(e)}function Ce(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var we=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function Te(e){return e.charCodeAt(0)>=768&&we.test(e)}function Ee(e,t,n){for(;(n<0?t>0:t<e.length)&&Te(e.charAt(t));)t+=n;return t}function De(e,t,n){for(var r=t>n?-1:1;;){if(t==n)return t;var i=(t+n)/2,a=r<0?Math.ceil(i):Math.floor(i);if(a==t)return e(a)?t:n;e(a)?n=a:t=a+r}}function Oe(e,t,n,r){if(!e)return r(t,n,`ltr`,0);for(var i=!1,a=0;a<e.length;++a){var o=e[a];(o.from<n&&o.to>t||t==n&&o.to==t)&&(r(Math.max(o.from,t),Math.min(o.to,n),o.level==1?`rtl`:`ltr`,a),i=!0)}i||r(t,n,`ltr`)}var ke=null;function Ae(e,t,n){var r;ke=null;for(var i=0;i<e.length;++i){var a=e[i];if(a.from<t&&a.to>t)return i;a.to==t&&(a.from!=a.to&&n==`before`?r=i:ke=i),a.from==t&&(a.from!=a.to&&n!=`before`?r=i:ke=i)}return r??ke}var je=(function(){var e=`bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN`,t=`nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111`;function n(n){return n<=247?e.charAt(n):1424<=n&&n<=1524?`R`:1536<=n&&n<=1785?t.charAt(n-1536):1774<=n&&n<=2220?`r`:8192<=n&&n<=8203?`w`:n==8204?`b`:`L`}var r=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,i=/[stwN]/,a=/[LRr]/,o=/[Lb1n]/,s=/[1n]/;function c(e,t,n){this.level=e,this.from=t,this.to=n}return function(e,t){var l=t==`ltr`?`L`:`R`;if(e.length==0||t==`ltr`&&!r.test(e))return!1;for(var u=e.length,d=[],f=0;f<u;++f)d.push(n(e.charCodeAt(f)));for(var p=0,m=l;p<u;++p){var h=d[p];h==`m`?d[p]=m:m=h}for(var g=0,_=l;g<u;++g){var v=d[g];v==`1`&&_==`r`?d[g]=`n`:a.test(v)&&(_=v,v==`r`&&(d[g]=`R`))}for(var y=1,b=d[0];y<u-1;++y){var x=d[y];x==`+`&&b==`1`&&d[y+1]==`1`?d[y]=`1`:x==`,`&&b==d[y+1]&&(b==`1`||b==`n`)&&(d[y]=b),b=x}for(var S=0;S<u;++S){var C=d[S];if(C==`,`)d[S]=`N`;else if(C==`%`){var w=void 0;for(w=S+1;w<u&&d[w]==`%`;++w);for(var T=S&&d[S-1]==`!`||w<u&&d[w]==`1`?`1`:`N`,E=S;E<w;++E)d[E]=T;S=w-1}}for(var D=0,O=l;D<u;++D){var k=d[D];O==`L`&&k==`1`?d[D]=`L`:a.test(k)&&(O=k)}for(var A=0;A<u;++A)if(i.test(d[A])){var ee=void 0;for(ee=A+1;ee<u&&i.test(d[ee]);++ee);for(var te=(A?d[A-1]:l)==`L`,j=(ee<u?d[ee]:l)==`L`,ne=te==j?te?`L`:`R`:l,re=A;re<ee;++re)d[re]=ne;A=ee-1}for(var ie=[],M,N=0;N<u;)if(o.test(d[N])){var P=N;for(++N;N<u&&o.test(d[N]);++N);ie.push(new c(0,P,N))}else{var F=N,I=ie.length,L=t==`rtl`?1:0;for(++N;N<u&&d[N]!=`L`;++N);for(var R=F;R<N;)if(s.test(d[R])){F<R&&(ie.splice(I,0,new c(1,F,R)),I+=L);var ae=R;for(++R;R<N&&s.test(d[R]);++R);ie.splice(I,0,new c(2,ae,R)),I+=L,F=R}else ++R;F<N&&ie.splice(I,0,new c(1,F,N))}return t==`ltr`&&(ie[0].level==1&&(M=e.match(/^\s+/))&&(ie[0].from=M[0].length,ie.unshift(new c(0,0,M[0].length))),he(ie).level==1&&(M=e.match(/\s+$/))&&(he(ie).to-=M[0].length,ie.push(new c(0,u-M[0].length,u)))),t==`rtl`?ie.reverse():ie}})();function Me(e,t){var n=e.order;return n??=e.order=je(e.text,t),n}var Ne=[],z=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent(`on`+t,n);else{var r=e._handlers||={};r[t]=(r[t]||Ne).concat(n)}};function Pe(e,t){return e._handlers&&e._handlers[t]||Ne}function B(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent(`on`+t,n);else{var r=e._handlers,i=r&&r[t];if(i){var a=oe(i,n);a>-1&&(r[t]=i.slice(0,a).concat(i.slice(a+1)))}}}function H(e,t){var n=Pe(e,t);if(n.length)for(var r=Array.prototype.slice.call(arguments,2),i=0;i<n.length;++i)n[i].apply(null,r)}function U(e,t,n){return typeof t==`string`&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),H(e,n||t.type,e,t),Be(t)||t.codemirrorIgnore}function Fe(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),r=0;r<t.length;++r)oe(n,t[r])==-1&&n.push(t[r])}function Ie(e,t){return Pe(e,t).length>0}function Le(e){e.prototype.on=function(e,t){z(this,e,t)},e.prototype.off=function(e,t){B(this,e,t)}}function Re(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function ze(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function Be(e){return e.defaultPrevented==null?e.returnValue==0:e.defaultPrevented}function W(e){Re(e),ze(e)}function Ve(e){return e.target||e.srcElement}function He(e){var t=e.which;return t??(e.button&1?t=1:e.button&2?t=3:e.button&4&&(t=2)),y&&e.ctrlKey&&t==1&&(t=3),t}var Ue=function(){if(o&&s<9)return!1;var e=k(`div`);return`draggable`in e||`dragDrop`in e}(),We;function Ge(e){if(We==null){var t=k(`span`,`​`);O(e,k(`span`,[t,document.createTextNode(`x`)])),e.firstChild.offsetHeight!=0&&(We=t.offsetWidth<=1&&t.offsetHeight>2&&!(o&&s<8))}var n=We?k(`span`,`​`):k(`span`,`\xA0`,null,`display: inline-block; width: 1px; margin-right: -1px`);return n.setAttribute(`cm-text`,``),n}var Ke;function qe(e){if(Ke!=null)return Ke;var t=O(e,document.createTextNode(`AخA`)),n=ee(t,0,1).getBoundingClientRect(),r=ee(t,1,2).getBoundingClientRect();return D(e),!n||n.left==n.right?!1:Ke=r.right-n.right<3}var Je=`

b`.split(/\n/).length==3?function(e){return e.split(/\r\n?|\n/)}:function(e){for(var t=0,n=[],r=e.length;t<=r;){var i=e.indexOf(`
`,t);i==-1&&(i=e.length);var a=e.slice(t,e.charAt(i-1)==`\r`?i-1:i),o=a.indexOf(`\r`);o==-1?(n.push(a),t=i+1):(n.push(a.slice(0,o)),t+=o+1)}return n},Ye=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch{return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch{}return!t||t.parentElement()!=e?!1:t.compareEndPoints(`StartToEnd`,t)!=0},Xe=(function(){var e=k(`div`);return`oncopy`in e?!0:(e.setAttribute(`oncopy`,`return;`),typeof e.oncopy==`function`)})(),Ze=null;function Qe(e){if(Ze!=null)return Ze;var t=O(e,k(`span`,`x`)),n=t.getBoundingClientRect(),r=ee(t,0,1).getBoundingClientRect();return Ze=Math.abs(n.left-r.left)>1}var $e={},et={};function tt(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),$e[e]=t}function nt(e,t){et[e]=t}function rt(e){if(typeof e==`string`&&et.hasOwnProperty(e))e=et[e];else if(e&&typeof e.name==`string`&&et.hasOwnProperty(e.name)){var t=et[e.name];typeof t==`string`&&(t={name:t}),e=ye(t,e),e.name=t.name}else if(typeof e==`string`&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return rt(`application/xml`);else if(typeof e==`string`&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return rt(`application/json`);return typeof e==`string`?{name:e}:e||{name:`null`}}function it(e,t){t=rt(t);var n=$e[t.name];if(!n)return it(e,`text/plain`);var r=n(e,t);if(at.hasOwnProperty(t.name)){var i=at[t.name];for(var a in i){if(!i.hasOwnProperty(a))continue;r.hasOwnProperty(a)&&(r[`_`+a]=r[a]),r[a]=i[a]}}if(r.name=t.name,t.helperType&&(r.helperType=t.helperType),t.modeProps)for(var o in t.modeProps)r[o]=t.modeProps[o];return r}var at={};function ot(e,t){var n=at.hasOwnProperty(e)?at[e]:at[e]={};L(t,n)}function st(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n}function ct(e,t){for(var n;e.innerMode&&(n=e.innerMode(t),!(!n||n.mode==e));)t=n.state,e=n.mode;return n||{mode:e,state:t}}function lt(e,t,n){return e.startState?e.startState(t,n):!0}var ut=function(e,t,n){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};ut.prototype.eol=function(){return this.pos>=this.string.length},ut.prototype.sol=function(){return this.pos==this.lineStart},ut.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},ut.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},ut.prototype.eat=function(e){var t=this.string.charAt(this.pos);if(typeof e==`string`?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},ut.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},ut.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},ut.prototype.skipToEnd=function(){this.pos=this.string.length},ut.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},ut.prototype.backUp=function(e){this.pos-=e},ut.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=R(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?R(this.string,this.lineStart,this.tabSize):0)},ut.prototype.indentation=function(){return R(this.string,null,this.tabSize)-(this.lineStart?R(this.string,this.lineStart,this.tabSize):0)},ut.prototype.match=function(e,t,n){if(typeof e==`string`){var r=function(e){return n?e.toLowerCase():e},i=this.string.substr(this.pos,e.length);if(r(i)==r(e))return t!==!1&&(this.pos+=e.length),!0}else{var a=this.string.slice(this.pos).match(e);return a&&a.index>0?null:(a&&t!==!1&&(this.pos+=a[0].length),a)}},ut.prototype.current=function(){return this.string.slice(this.start,this.pos)},ut.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},ut.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},ut.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};function G(e,t){if(t-=e.first,t<0||t>=e.size)throw Error(`There is no line `+(t+e.first)+` in the document.`);for(var n=e;!n.lines;)for(var r=0;;++r){var i=n.children[r],a=i.chunkSize();if(t<a){n=i;break}t-=a}return n.lines[t]}function dt(e,t,n){var r=[],i=t.line;return e.iter(t.line,n.line+1,function(e){var a=e.text;i==n.line&&(a=a.slice(0,n.ch)),i==t.line&&(a=a.slice(t.ch)),r.push(a),++i}),r}function ft(e,t,n){var r=[];return e.iter(t,n,function(e){r.push(e.text)}),r}function pt(e,t){var n=t-e.height;if(n)for(var r=e;r;r=r.parent)r.height+=n}function mt(e){if(e.parent==null)return null;for(var t=e.parent,n=oe(t.lines,e),r=t.parent;r;t=r,r=r.parent)for(var i=0;r.children[i]!=t;++i)n+=r.children[i].chunkSize();return n+t.first}function ht(e,t){var n=e.first;outer:do{for(var r=0;r<e.children.length;++r){var i=e.children[r],a=i.height;if(t<a){e=i;continue outer}t-=a,n+=i.chunkSize()}return n}while(!e.lines);for(var o=0;o<e.lines.length;++o){var s=e.lines[o],c=s.height;if(t<c)break;t-=c}return n+o}function gt(e,t){return t>=e.first&&t<e.first+e.size}function _t(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function K(e,t,n){if(n===void 0&&(n=null),!(this instanceof K))return new K(e,t,n);this.line=e,this.ch=t,this.sticky=n}function vt(e,t){return e.line-t.line||e.ch-t.ch}function yt(e,t){return e.sticky==t.sticky&&vt(e,t)==0}function bt(e){return K(e.line,e.ch)}function xt(e,t){return vt(e,t)<0?t:e}function St(e,t){return vt(e,t)<0?e:t}function Ct(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function wt(e,t){if(t.line<e.first)return K(e.first,0);var n=e.first+e.size-1;return t.line>n?K(n,G(e,n).text.length):Tt(t,G(e,t.line).text.length)}function Tt(e,t){var n=e.ch;return n==null||n>t?K(e.line,t):n<0?K(e.line,0):e}function Et(e,t){for(var n=[],r=0;r<t.length;r++)n[r]=wt(e,t[r]);return n}var Dt=function(e,t){this.state=e,this.lookAhead=t},Ot=function(e,t,n,r){this.state=t,this.doc=e,this.line=n,this.maxLookAhead=r||0,this.baseTokens=null,this.baseTokenPos=1};Ot.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return t!=null&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},Ot.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,``),size:this.baseTokens[this.baseTokenPos]-e}},Ot.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Ot.fromSaved=function(e,t,n){return t instanceof Dt?new Ot(e,st(e.mode,t.state),n,t.lookAhead):new Ot(e,st(e.mode,t),n)},Ot.prototype.save=function(e){var t=e===!1?this.state:st(this.doc.mode,this.state);return this.maxLookAhead>0?new Dt(t,this.maxLookAhead):t};function kt(e,t,n,r){var i=[e.state.modeGen],a={};Rt(e,t.text,e.doc.mode,n,function(e,t){return i.push(e,t)},a,r);for(var o=n.state,s=function(r){n.baseTokens=i;var s=e.state.overlays[r],c=1,l=0;n.state=!0,Rt(e,t.text,s.mode,n,function(e,t){for(var n=c;l<e;){var r=i[c];r>e&&i.splice(c,1,e,i[c+1],r),c+=2,l=Math.min(e,r)}if(t)if(s.opaque)i.splice(n,c-n,e,`overlay `+t),c=n+2;else for(;n<c;n+=2){var a=i[n+1];i[n+1]=(a?a+` `:``)+`overlay `+t}},a),n.state=o,n.baseTokens=null,n.baseTokenPos=1},c=0;c<e.state.overlays.length;++c)s(c);return{styles:i,classes:a.bgClass||a.textClass?a:null}}function At(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var r=jt(e,mt(t)),i=t.text.length>e.options.maxHighlightLength&&st(e.doc.mode,r.state),a=kt(e,t,r);i&&(r.state=i),t.stateAfter=r.save(!i),t.styles=a.styles,a.classes?t.styleClasses=a.classes:t.styleClasses&&=null,n===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function jt(e,t,n){var r=e.doc,i=e.display;if(!r.mode.startState)return new Ot(r,!0,t);var a=zt(e,t,n),o=a>r.first&&G(r,a-1).stateAfter,s=o?Ot.fromSaved(r,o,a):new Ot(r,lt(r.mode),a);return r.iter(a,t,function(n){Mt(e,n.text,s);var r=s.line;n.stateAfter=r==t-1||r%5==0||r>=i.viewFrom&&r<i.viewTo?s.save():null,s.nextLine()}),n&&(r.modeFrontier=s.line),s}function Mt(e,t,n,r){var i=e.doc.mode,a=new ut(t,e.options.tabSize,n);for(a.start=a.pos=r||0,t==``&&Nt(i,n.state);!a.eol();)Pt(i,a,n.state),a.start=a.pos}function Nt(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var n=ct(e,t);if(n.mode.blankLine)return n.mode.blankLine(n.state)}}function Pt(e,t,n,r){for(var i=0;i<10;i++){r&&(r[0]=ct(e,n).mode);var a=e.token(t,n);if(t.pos>t.start)return a}throw Error(`Mode `+e.name+` failed to advance stream.`)}var Ft=function(e,t,n){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=n};function It(e,t,n,r){var i=e.doc,a=i.mode,o;t=wt(i,t);var s=G(i,t.line),c=jt(e,t.line,n),l=new ut(s.text,e.options.tabSize,c),u;for(r&&(u=[]);(r||l.pos<t.ch)&&!l.eol();)l.start=l.pos,o=Pt(a,l,c.state),r&&u.push(new Ft(l,o,st(i.mode,c.state)));return r?u:new Ft(l,o,c.state)}function Lt(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var r=n[1]?`bgClass`:`textClass`;t[r]==null?t[r]=n[2]:RegExp(`(?:^|\\s)`+n[2]+`(?:$|\\s)`).test(t[r])||(t[r]+=` `+n[2])}return e}function Rt(e,t,n,r,i,a,o){var s=n.flattenSpans;s??=e.options.flattenSpans;var c=0,l=null,u=new ut(t,e.options.tabSize,r),d,f=e.options.addModeClass&&[null];for(t==``&&Lt(Nt(n,r.state),a);!u.eol();){if(u.pos>e.options.maxHighlightLength?(s=!1,o&&Mt(e,t,r,u.pos),u.pos=t.length,d=null):d=Lt(Pt(n,u,r.state,f),a),f){var p=f[0].name;p&&(d=`m-`+(d?p+` `+d:p))}if(!s||l!=d){for(;c<u.start;)c=Math.min(u.start,c+5e3),i(c,l);l=d}u.start=u.pos}for(;c<u.pos;){var m=Math.min(u.pos,c+5e3);i(m,l),c=m}}function zt(e,t,n){for(var r,i,a=e.doc,o=n?-1:t-(e.doc.mode.innerMode?1e3:100),s=t;s>o;--s){if(s<=a.first)return a.first;var c=G(a,s-1),l=c.stateAfter;if(l&&(!n||s+(l instanceof Dt?l.lookAhead:0)<=a.modeFrontier))return s;var u=R(c.text,null,e.options.tabSize);(i==null||r>u)&&(i=s-1,r=u)}return i}function Bt(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var n=e.first,r=t-1;r>n;r--){var i=G(e,r).stateAfter;if(i&&(!(i instanceof Dt)||r+i.lookAhead<t)){n=r+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,n)}}var Vt=!1,Ht=!1;function Ut(){Vt=!0}function Wt(){Ht=!0}function Gt(e,t,n){this.marker=e,this.from=t,this.to=n}function Kt(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r}}function qt(e,t){for(var n,r=0;r<e.length;++r)e[r]!=t&&(n||=[]).push(e[r]);return n}function Jt(e,t,n){var r=n&&window.WeakSet&&(n.markedSpans||=new WeakSet);r&&e.markedSpans&&r.has(e.markedSpans)?e.markedSpans.push(t):(e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],r&&r.add(e.markedSpans)),t.marker.attachLine(e)}function Yt(e,t,n){var r;if(e)for(var i=0;i<e.length;++i){var a=e[i],o=a.marker;if(a.from==null||(o.inclusiveLeft?a.from<=t:a.from<t)||a.from==t&&o.type==`bookmark`&&(!n||!a.marker.insertLeft)){var s=a.to==null||(o.inclusiveRight?a.to>=t:a.to>t);(r||=[]).push(new Gt(o,a.from,s?null:a.to))}}return r}function Xt(e,t,n){var r;if(e)for(var i=0;i<e.length;++i){var a=e[i],o=a.marker;if(a.to==null||(o.inclusiveRight?a.to>=t:a.to>t)||a.from==t&&o.type==`bookmark`&&(!n||a.marker.insertLeft)){var s=a.from==null||(o.inclusiveLeft?a.from<=t:a.from<t);(r||=[]).push(new Gt(o,s?null:a.from-t,a.to==null?null:a.to-t))}}return r}function Zt(e,t){if(t.full)return null;var n=gt(e,t.from.line)&&G(e,t.from.line).markedSpans,r=gt(e,t.to.line)&&G(e,t.to.line).markedSpans;if(!n&&!r)return null;var i=t.from.ch,a=t.to.ch,o=vt(t.from,t.to)==0,s=Yt(n,i,o),c=Xt(r,a,o),l=t.text.length==1,u=he(t.text).length+(l?i:0);if(s)for(var d=0;d<s.length;++d){var f=s[d];if(f.to==null){var p=Kt(c,f.marker);p?l&&(f.to=p.to==null?null:p.to+u):f.to=i}}if(c)for(var m=0;m<c.length;++m){var h=c[m];h.to!=null&&(h.to+=u),h.from==null?Kt(s,h.marker)||(h.from=u,l&&(s||=[]).push(h)):(h.from+=u,l&&(s||=[]).push(h))}s&&=Qt(s),c&&c!=s&&(c=Qt(c));var g=[s];if(!l){var _=t.text.length-2,v;if(_>0&&s)for(var y=0;y<s.length;++y)s[y].to??(v||=[]).push(new Gt(s[y].marker,null,null));for(var b=0;b<_;++b)g.push(v);g.push(c)}return g}function Qt(e){for(var t=0;t<e.length;++t){var n=e[t];n.from!=null&&n.from==n.to&&n.marker.clearWhenEmpty!==!1&&e.splice(t--,1)}return e.length?e:null}function $t(e,t,n){var r=null;if(e.iter(t.line,n.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;n.readOnly&&(!r||oe(r,n)==-1)&&(r||=[]).push(n)}}),!r)return null;for(var i=[{from:t,to:n}],a=0;a<r.length;++a)for(var o=r[a],s=o.find(0),c=0;c<i.length;++c){var l=i[c];if(!(vt(l.to,s.from)<0||vt(l.from,s.to)>0)){var u=[c,1],d=vt(l.from,s.from),f=vt(l.to,s.to);(d<0||!o.inclusiveLeft&&!d)&&u.push({from:l.from,to:s.from}),(f>0||!o.inclusiveRight&&!f)&&u.push({from:s.to,to:l.to}),i.splice.apply(i,u),c+=u.length-3}}return i}function en(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function tn(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function nn(e){return e.inclusiveLeft?-1:0}function rn(e){return e.inclusiveRight?1:0}function an(e,t){var n=e.lines.length-t.lines.length;if(n!=0)return n;var r=e.find(),i=t.find(),a=vt(r.from,i.from)||nn(e)-nn(t);return a?-a:vt(r.to,i.to)||rn(e)-rn(t)||t.id-e.id}function on(e,t){var n=Ht&&e.markedSpans,r;if(n)for(var i=void 0,a=0;a<n.length;++a)i=n[a],i.marker.collapsed&&(t?i.from:i.to)==null&&(!r||an(r,i.marker)<0)&&(r=i.marker);return r}function sn(e){return on(e,!0)}function cn(e){return on(e,!1)}function ln(e,t){var n=Ht&&e.markedSpans,r;if(n)for(var i=0;i<n.length;++i){var a=n[i];a.marker.collapsed&&(a.from==null||a.from<t)&&(a.to==null||a.to>t)&&(!r||an(r,a.marker)<0)&&(r=a.marker)}return r}function un(e,t,n,r,i){var a=G(e,t),o=Ht&&a.markedSpans;if(o)for(var s=0;s<o.length;++s){var c=o[s];if(c.marker.collapsed){var l=c.marker.find(0),u=vt(l.from,n)||nn(c.marker)-nn(i),d=vt(l.to,r)||rn(c.marker)-rn(i);if(!(u>=0&&d<=0||u<=0&&d>=0)&&(u<=0&&(c.marker.inclusiveRight&&i.inclusiveLeft?vt(l.to,n)>=0:vt(l.to,n)>0)||u>=0&&(c.marker.inclusiveRight&&i.inclusiveLeft?vt(l.from,r)<=0:vt(l.from,r)<0)))return!0}}}function dn(e){for(var t;t=sn(e);)e=t.find(-1,!0).line;return e}function fn(e){for(var t;t=cn(e);)e=t.find(1,!0).line;return e}function pn(e){for(var t,n;t=cn(e);)e=t.find(1,!0).line,(n||=[]).push(e);return n}function mn(e,t){var n=G(e,t),r=dn(n);return n==r?t:mt(r)}function hn(e,t){if(t>e.lastLine())return t;var n=G(e,t),r;if(!gn(e,n))return t;for(;r=cn(n);)n=r.find(1,!0).line;return mt(n)+1}function gn(e,t){var n=Ht&&t.markedSpans;if(n){for(var r=void 0,i=0;i<n.length;++i)if(r=n[i],r.marker.collapsed&&(r.from==null||!r.marker.widgetNode&&r.from==0&&r.marker.inclusiveLeft&&_n(e,t,r)))return!0}}function _n(e,t,n){if(n.to==null){var r=n.marker.find(1,!0);return _n(e,r.line,Kt(r.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var i=void 0,a=0;a<t.markedSpans.length;++a)if(i=t.markedSpans[a],i.marker.collapsed&&!i.marker.widgetNode&&i.from==n.to&&(i.to==null||i.to!=n.from)&&(i.marker.inclusiveLeft||n.marker.inclusiveRight)&&_n(e,t,i))return!0}function vn(e){e=dn(e);for(var t=0,n=e.parent,r=0;r<n.lines.length;++r){var i=n.lines[r];if(i==e)break;t+=i.height}for(var a=n.parent;a;n=a,a=n.parent)for(var o=0;o<a.children.length;++o){var s=a.children[o];if(s==n)break;t+=s.height}return t}function yn(e){if(e.height==0)return 0;for(var t=e.text.length,n,r=e;n=sn(r);){var i=n.find(0,!0);r=i.from.line,t+=i.from.ch-i.to.ch}for(r=e;n=cn(r);){var a=n.find(0,!0);t-=r.text.length-a.from.ch,r=a.to.line,t+=r.text.length-a.to.ch}return t}function bn(e){var t=e.display,n=e.doc;t.maxLine=G(n,n.first),t.maxLineLength=yn(t.maxLine),t.maxLineChanged=!0,n.iter(function(e){var n=yn(e);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=e)})}var xn=function(e,t,n){this.text=e,tn(this,t),this.height=n?n(this):1};xn.prototype.lineNo=function(){return mt(this)},Le(xn);function Sn(e,t,n,r){e.text=t,e.stateAfter&&=null,e.styles&&=null,e.order!=null&&(e.order=null),en(e),tn(e,n);var i=r?r(e):1;i!=e.height&&pt(e,i)}function Cn(e){e.parent=null,en(e)}var wn={},Tn={};function q(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?Tn:wn;return n[e]||(n[e]=e.replace(/\S+/g,`cm-$&`))}function En(e,t){var n=A(`span`,null,null,c?`padding-right: .1px`:null),r={pre:A(`pre`,[n],`CodeMirror-line`),content:n,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption(`lineWrapping`)};t.measure={};for(var i=0;i<=(t.rest?t.rest.length:0);i++){var a=i?t.rest[i-1]:t.line,o=void 0;r.pos=0,r.addToken=On,qe(e.display.measure)&&(o=Me(a,e.doc.direction))&&(r.addToken=An(r.addToken,o)),r.map=[];var s=t!=e.display.externalMeasured&&mt(a);Mn(a,r,At(e,a,s)),a.styleClasses&&(a.styleClasses.bgClass&&(r.bgClass=re(a.styleClasses.bgClass,r.bgClass||``)),a.styleClasses.textClass&&(r.textClass=re(a.styleClasses.textClass,r.textClass||``))),r.map.length==0&&r.map.push(0,0,r.content.appendChild(Ge(e.display.measure))),i==0?(t.measure.map=r.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(r.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(c){var l=r.content.lastChild;(/\bcm-tab\b/.test(l.className)||l.querySelector&&l.querySelector(`.cm-tab`))&&(r.content.className=`cm-tab-wrap-hack`)}return H(e,`renderLine`,e,t.line,r.pre),r.pre.className&&(r.textClass=re(r.pre.className,r.textClass||``)),r}function Dn(e){var t=k(`span`,`•`,`cm-invalidchar`);return t.title=`\\u`+e.charCodeAt(0).toString(16),t.setAttribute(`aria-label`,t.title),t}function On(e,t,n,r,i,a,c){if(t){var l=e.splitSpaces?kn(t,e.trailingSpace):t,u=e.cm.state.specialChars,d=!1,f;if(!u.test(t))e.col+=t.length,f=document.createTextNode(l),e.map.push(e.pos,e.pos+t.length,f),o&&s<9&&(d=!0),e.pos+=t.length;else{f=document.createDocumentFragment();for(var p=0;;){u.lastIndex=p;var m=u.exec(t),h=m?m.index-p:t.length-p;if(h){var g=document.createTextNode(l.slice(p,p+h));o&&s<9?f.appendChild(k(`span`,[g])):f.appendChild(g),e.map.push(e.pos,e.pos+h,g),e.col+=h,e.pos+=h}if(!m)break;p+=h+1;var _=void 0;if(m[0]==`	`){var v=e.cm.options.tabSize,y=v-e.col%v;_=f.appendChild(k(`span`,me(y),`cm-tab`)),_.setAttribute(`role`,`presentation`),_.setAttribute(`cm-text`,`	`),e.col+=y}else m[0]==`\r`||m[0]==`
`?(_=f.appendChild(k(`span`,m[0]==`\r`?`␍`:`␤`,`cm-invalidchar`)),_.setAttribute(`cm-text`,m[0]),e.col+=1):(_=e.cm.options.specialCharPlaceholder(m[0]),_.setAttribute(`cm-text`,m[0]),o&&s<9?f.appendChild(k(`span`,[_])):f.appendChild(_),e.col+=1);e.map.push(e.pos,e.pos+1,_),e.pos++}}if(e.trailingSpace=l.charCodeAt(t.length-1)==32,n||r||i||d||a||c){var b=n||``;r&&(b+=r),i&&(b+=i);var x=k(`span`,[f],b,a);if(c)for(var S in c)c.hasOwnProperty(S)&&S!=`style`&&S!=`class`&&x.setAttribute(S,c[S]);return e.content.appendChild(x)}e.content.appendChild(f)}}function kn(e,t){if(e.length>1&&!/  /.test(e))return e;for(var n=t,r=``,i=0;i<e.length;i++){var a=e.charAt(i);a==` `&&n&&(i==e.length-1||e.charCodeAt(i+1)==32)&&(a=`\xA0`),r+=a,n=a==` `}return r}function An(e,t){return function(n,r,i,a,o,s,c){i=i?i+` cm-force-border`:`cm-force-border`;for(var l=n.pos,u=l+r.length;;){for(var d=void 0,f=0;f<t.length&&(d=t[f],!(d.to>l&&d.from<=l));f++);if(d.to>=u)return e(n,r,i,a,o,s,c);e(n,r.slice(0,d.to-l),i,a,null,s,c),a=null,r=r.slice(d.to-l),l=d.to}}}function jn(e,t,n,r){var i=!r&&n.widgetNode;i&&e.map.push(e.pos,e.pos+t,i),!r&&e.cm.display.input.needsContentAttribute&&(i||=e.content.appendChild(document.createElement(`span`)),i.setAttribute(`cm-marker`,n.id)),i&&(e.cm.display.input.setUneditable(i),e.content.appendChild(i)),e.pos+=t,e.trailingSpace=!1}function Mn(e,t,n){var r=e.markedSpans,i=e.text,a=0;if(!r){for(var o=1;o<n.length;o+=2)t.addToken(t,i.slice(a,a=n[o]),q(n[o+1],t.cm.options));return}for(var s=i.length,c=0,l=1,u=``,d,f,p=0,m,h,g,_,v;;){if(p==c){m=h=g=f=``,v=null,_=null,p=1/0;for(var y=[],b=void 0,x=0;x<r.length;++x){var S=r[x],C=S.marker;if(C.type==`bookmark`&&S.from==c&&C.widgetNode)y.push(C);else if(S.from<=c&&(S.to==null||S.to>c||C.collapsed&&S.to==c&&S.from==c)){if(S.to!=null&&S.to!=c&&p>S.to&&(p=S.to,h=``),C.className&&(m+=` `+C.className),C.css&&(f=(f?f+`;`:``)+C.css),C.startStyle&&S.from==c&&(g+=` `+C.startStyle),C.endStyle&&S.to==p&&(b||=[]).push(C.endStyle,S.to),C.title&&((v||={}).title=C.title),C.attributes)for(var w in C.attributes)(v||={})[w]=C.attributes[w];C.collapsed&&(!_||an(_.marker,C)<0)&&(_=S)}else S.from>c&&p>S.from&&(p=S.from)}if(b)for(var T=0;T<b.length;T+=2)b[T+1]==p&&(h+=` `+b[T]);if(!_||_.from==c)for(var E=0;E<y.length;++E)jn(t,0,y[E]);if(_&&(_.from||0)==c){if(jn(t,(_.to==null?s+1:_.to)-c,_.marker,_.from==null),_.to==null)return;_.to==c&&(_=!1)}}if(c>=s)break;for(var D=Math.min(s,p);;){if(u){var O=c+u.length;if(!_){var k=O>D?u.slice(0,D-c):u;t.addToken(t,k,d?d+m:m,g,c+k.length==p?h:``,f,v)}if(O>=D){u=u.slice(D-c),c=D;break}c=O,g=``}u=i.slice(a,a=n[l++]),d=q(n[l++],t.cm.options)}}}function Nn(e,t,n){this.line=t,this.rest=pn(t),this.size=this.rest?mt(he(this.rest))-n+1:1,this.node=this.text=null,this.hidden=gn(e,t)}function Pn(e,t,n){for(var r=[],i,a=t;a<n;a=i){var o=new Nn(e.doc,G(e.doc,a),a);i=a+o.size,r.push(o)}return r}var Fn=null;function In(e){Fn?Fn.ops.push(e):e.ownsGroup=Fn={ops:[e],delayedCallbacks:[]}}function Ln(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n].call(null);for(var r=0;r<e.ops.length;r++){var i=e.ops[r];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null,i.cm)}}while(n<t.length)}function Rn(e,t){var n=e.ownsGroup;if(n)try{Ln(n)}finally{Fn=null,t(n)}}var zn=null;function Bn(e,t){var n=Pe(e,t);if(n.length){var r=Array.prototype.slice.call(arguments,2),i;Fn?i=Fn.delayedCallbacks:zn?i=zn:(i=zn=[],setTimeout(Vn,0));for(var a=function(e){i.push(function(){return n[e].apply(null,r)})},o=0;o<n.length;++o)a(o)}}function Vn(){var e=zn;zn=null;for(var t=0;t<e.length;++t)e[t]()}function Hn(e,t,n,r){for(var i=0;i<t.changes.length;i++){var a=t.changes[i];a==`text`?Kn(e,t):a==`gutter`?Jn(e,t,n,r):a==`class`?qn(e,t):a==`widget`&&Yn(e,t,r)}t.changes=null}function Un(e){return e.node==e.text&&(e.node=k(`div`,null,null,`position: relative`),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),o&&s<8&&(e.node.style.zIndex=2)),e.node}function Wn(e,t){var n=t.bgClass?t.bgClass+` `+(t.line.bgClass||``):t.line.bgClass;if(n&&(n+=` CodeMirror-linebackground`),t.background)n?t.background.className=n:(t.background.parentNode.removeChild(t.background),t.background=null);else if(n){var r=Un(t);t.background=r.insertBefore(k(`div`,null,n),r.firstChild),e.display.input.setUneditable(t.background)}}function Gn(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):En(e,t)}function Kn(e,t){var n=t.text.className,r=Gn(e,t);t.text==t.node&&(t.node=r.pre),t.text.parentNode.replaceChild(r.pre,t.text),t.text=r.pre,r.bgClass!=t.bgClass||r.textClass!=t.textClass?(t.bgClass=r.bgClass,t.textClass=r.textClass,qn(e,t)):n&&(t.text.className=n)}function qn(e,t){Wn(e,t),t.line.wrapClass?Un(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className=``);var n=t.textClass?t.textClass+` `+(t.line.textClass||``):t.line.textClass;t.text.className=n||``}function Jn(e,t,n,r){if(t.gutter&&=(t.node.removeChild(t.gutter),null),t.gutterBackground&&=(t.node.removeChild(t.gutterBackground),null),t.line.gutterClass){var i=Un(t);t.gutterBackground=k(`div`,null,`CodeMirror-gutter-background `+t.line.gutterClass,`left: `+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+`px; width: `+r.gutterTotalWidth+`px`),e.display.input.setUneditable(t.gutterBackground),i.insertBefore(t.gutterBackground,t.text)}var a=t.line.gutterMarkers;if(e.options.lineNumbers||a){var o=Un(t),s=t.gutter=k(`div`,null,`CodeMirror-gutter-wrapper`,`left: `+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+`px`);if(s.setAttribute(`aria-hidden`,`true`),e.display.input.setUneditable(s),o.insertBefore(s,t.text),t.line.gutterClass&&(s.className+=` `+t.line.gutterClass),e.options.lineNumbers&&(!a||!a[`CodeMirror-linenumbers`])&&(t.lineNumber=s.appendChild(k(`div`,_t(e.options,n),`CodeMirror-linenumber CodeMirror-gutter-elt`,`left: `+r.gutterLeft[`CodeMirror-linenumbers`]+`px; width: `+e.display.lineNumInnerWidth+`px`))),a)for(var c=0;c<e.display.gutterSpecs.length;++c){var l=e.display.gutterSpecs[c].className,u=a.hasOwnProperty(l)&&a[l];u&&s.appendChild(k(`div`,[u],`CodeMirror-gutter-elt`,`left: `+r.gutterLeft[l]+`px; width: `+r.gutterWidth[l]+`px`))}}}function Yn(e,t,n){t.alignable&&=null;for(var r=T(`CodeMirror-linewidget`),i=t.node.firstChild,a=void 0;i;i=a)a=i.nextSibling,r.test(i.className)&&t.node.removeChild(i);Zn(e,t,n)}function Xn(e,t,n,r){var i=Gn(e,t);return t.text=t.node=i.pre,i.bgClass&&(t.bgClass=i.bgClass),i.textClass&&(t.textClass=i.textClass),qn(e,t),Jn(e,t,n,r),Zn(e,t,r),t.node}function Zn(e,t,n){if(Qn(e,t.line,t,n,!0),t.rest)for(var r=0;r<t.rest.length;r++)Qn(e,t.rest[r],t,n,!1)}function Qn(e,t,n,r,i){if(t.widgets)for(var a=Un(n),o=0,s=t.widgets;o<s.length;++o){var c=s[o],l=k(`div`,[c.node],`CodeMirror-linewidget`+(c.className?` `+c.className:``));c.handleMouseEvents||l.setAttribute(`cm-ignore-events`,`true`),$n(c,l,n,r),e.display.input.setUneditable(l),i&&c.above?a.insertBefore(l,n.gutter||n.text):a.appendChild(l),Bn(c,`redraw`)}}function $n(e,t,n,r){if(e.noHScroll){(n.alignable||=[]).push(t);var i=r.wrapperWidth;t.style.left=r.fixedPos+`px`,e.coverGutter||(i-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+`px`),t.style.width=i+`px`}e.coverGutter&&(t.style.zIndex=5,t.style.position=`relative`,e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+`px`))}function er(e){if(e.height!=null)return e.height;var t=e.doc.cm;if(!t)return 0;if(!te(document.body,e.node)){var n=`position: relative;`;e.coverGutter&&(n+=`margin-left: -`+t.display.gutters.offsetWidth+`px;`),e.noHScroll&&(n+=`width: `+t.display.wrapper.clientWidth+`px;`),O(t.display.measure,k(`div`,[e.node],null,n))}return e.height=e.node.parentNode.offsetHeight}function tr(e,t){for(var n=Ve(t);n!=e.wrapper;n=n.parentNode)if(!n||n.nodeType==1&&n.getAttribute(`cm-ignore-events`)==`true`||n.parentNode==e.sizer&&n!=e.mover)return!0}function nr(e){return e.lineSpace.offsetTop}function rr(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function ir(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=O(e.measure,k(`pre`,`x`,`CodeMirror-line-like`)),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,r={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return!isNaN(r.left)&&!isNaN(r.right)&&(e.cachedPaddingH=r),r}function ar(e){return se-e.display.nativeBarWidth}function or(e){return e.display.scroller.clientWidth-ar(e)-e.display.barWidth}function sr(e){return e.display.scroller.clientHeight-ar(e)-e.display.barHeight}function cr(e,t,n){var r=e.options.lineWrapping,i=r&&or(e);if(!t.measure.heights||r&&t.measure.width!=i){var a=t.measure.heights=[];if(r){t.measure.width=i;for(var o=t.text.firstChild.getClientRects(),s=0;s<o.length-1;s++){var c=o[s],l=o[s+1];Math.abs(c.bottom-l.bottom)>2&&a.push((c.bottom+l.top)/2-n.top)}}a.push(n.bottom-n.top)}}function lr(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};if(e.rest){for(var r=0;r<e.rest.length;r++)if(e.rest[r]==t)return{map:e.measure.maps[r],cache:e.measure.caches[r]};for(var i=0;i<e.rest.length;i++)if(mt(e.rest[i])>n)return{map:e.measure.maps[i],cache:e.measure.caches[i],before:!0}}}function ur(e,t){t=dn(t);var n=mt(t),r=e.display.externalMeasured=new Nn(e.doc,t,n);r.lineN=n;var i=r.built=En(e,r);return r.text=i.pre,O(e.display.lineMeasure,i.pre),r}function dr(e,t,n,r){return mr(e,pr(e,t),n,r)}function fr(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[qr(e,t)];var n=e.display.externalMeasured;if(n&&t>=n.lineN&&t<n.lineN+n.size)return n}function pr(e,t){var n=mt(t),r=fr(e,n);r&&!r.text?r=null:r&&r.changes&&(Hn(e,r,n,Hr(e)),e.curOp.forceUpdate=!0),r||=ur(e,t);var i=lr(r,t,n);return{line:t,view:r,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function mr(e,t,n,r,i){t.before&&(n=-1);var a=n+(r||``),o;return t.cache.hasOwnProperty(a)?o=t.cache[a]:(t.rect||=t.view.text.getBoundingClientRect(),t.hasHeights||=(cr(e,t.view,t.rect),!0),o=vr(e,t,n,r),o.bogus||(t.cache[a]=o)),{left:o.left,right:o.right,top:i?o.rtop:o.top,bottom:i?o.rbottom:o.bottom}}var hr={left:0,right:0,top:0,bottom:0};function gr(e,t,n){for(var r,i,a,o,s,c,l=0;l<e.length;l+=3)if(s=e[l],c=e[l+1],t<s?(i=0,a=1,o=`left`):t<c?(i=t-s,a=i+1):(l==e.length-3||t==c&&e[l+3]>t)&&(a=c-s,i=a-1,t>=c&&(o=`right`)),i!=null){if(r=e[l+2],s==c&&n==(r.insertLeft?`left`:`right`)&&(o=n),n==`left`&&i==0)for(;l&&e[l-2]==e[l-3]&&e[l-1].insertLeft;)r=e[(l-=3)+2],o=`left`;if(n==`right`&&i==c-s)for(;l<e.length-3&&e[l+3]==e[l+4]&&!e[l+5].insertLeft;)r=e[(l+=3)+2],o=`right`;break}return{node:r,start:i,end:a,collapse:o,coverStart:s,coverEnd:c}}function _r(e,t){var n=hr;if(t==`left`)for(var r=0;r<e.length&&(n=e[r]).left==n.right;r++);else for(var i=e.length-1;i>=0&&(n=e[i]).left==n.right;i--);return n}function vr(e,t,n,r){var i=gr(t.map,n,r),a=i.node,c=i.start,l=i.end,u=i.collapse,d;if(a.nodeType==3){for(var f=0;f<4;f++){for(;c&&Te(t.line.text.charAt(i.coverStart+c));)--c;for(;i.coverStart+l<i.coverEnd&&Te(t.line.text.charAt(i.coverStart+l));)++l;if(d=o&&s<9&&c==0&&l==i.coverEnd-i.coverStart?a.parentNode.getBoundingClientRect():_r(ee(a,c,l).getClientRects(),r),d.left||d.right||c==0)break;l=c,--c,u=`right`}o&&s<11&&(d=yr(e.display.measure,d))}else{c>0&&(u=r=`right`);var p;d=e.options.lineWrapping&&(p=a.getClientRects()).length>1?p[r==`right`?p.length-1:0]:a.getBoundingClientRect()}if(o&&s<9&&!c&&(!d||!d.left&&!d.right)){var m=a.parentNode.getClientRects()[0];d=m?{left:m.left,right:m.left+Vr(e.display),top:m.top,bottom:m.bottom}:hr}for(var h=d.top-t.rect.top,g=d.bottom-t.rect.top,_=(h+g)/2,v=t.view.measure.heights,y=0;y<v.length-1&&!(_<v[y]);y++);var b=y?v[y-1]:0,x=v[y],S={left:(u==`right`?d.right:d.left)-t.rect.left,right:(u==`left`?d.left:d.right)-t.rect.left,top:b,bottom:x};return!d.left&&!d.right&&(S.bogus=!0),e.options.singleCursorHeightPerLine||(S.rtop=h,S.rbottom=g),S}function yr(e,t){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!Qe(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI,r=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*r,bottom:t.bottom*r}}function br(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function xr(e){e.display.externalMeasure=null,D(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)br(e.display.view[t])}function Sr(e){xr(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Cr(e){return u&&_?-(e.body.getBoundingClientRect().left-parseInt(getComputedStyle(e.body).marginLeft)):e.defaultView.pageXOffset||(e.documentElement||e.body).scrollLeft}function wr(e){return u&&_?-(e.body.getBoundingClientRect().top-parseInt(getComputedStyle(e.body).marginTop)):e.defaultView.pageYOffset||(e.documentElement||e.body).scrollTop}function Tr(e){var t=dn(e).widgets,n=0;if(t)for(var r=0;r<t.length;++r)t[r].above&&(n+=er(t[r]));return n}function Er(e,t,n,r,i){if(!i){var a=Tr(t);n.top+=a,n.bottom+=a}if(r==`line`)return n;r||=`local`;var o=vn(t);if(r==`local`?o+=nr(e.display):o-=e.display.viewOffset,r==`page`||r==`window`){var s=e.display.lineSpace.getBoundingClientRect();o+=s.top+(r==`window`?0:wr(M(e)));var c=s.left+(r==`window`?0:Cr(M(e)));n.left+=c,n.right+=c}return n.top+=o,n.bottom+=o,n}function Dr(e,t,n){if(n==`div`)return t;var r=t.left,i=t.top;if(n==`page`)r-=Cr(M(e)),i-=wr(M(e));else if(n==`local`||!n){var a=e.display.sizer.getBoundingClientRect();r+=a.left,i+=a.top}var o=e.display.lineSpace.getBoundingClientRect();return{left:r-o.left,top:i-o.top}}function Or(e,t,n,r,i){return r||=G(e.doc,t.line),Er(e,r,dr(e,r,t.ch,i),n)}function kr(e,t,n,r,i,a){r||=G(e.doc,t.line),i||=pr(e,r);function o(t,o){var s=mr(e,i,t,o?`right`:`left`,a);return o?s.left=s.right:s.right=s.left,Er(e,r,s,n)}var s=Me(r,e.doc.direction),c=t.ch,l=t.sticky;if(c>=r.text.length?(c=r.text.length,l=`before`):c<=0&&(c=0,l=`after`),!s)return o(l==`before`?c-1:c,l==`before`);function u(e,t,n){var r=s[t],i=r.level==1;return o(n?e-1:e,i!=n)}var d=Ae(s,c,l),f=ke,p=u(c,d,l==`before`);return f!=null&&(p.other=u(c,f,l!=`before`)),p}function Ar(e,t){var n=0;t=wt(e.doc,t),e.options.lineWrapping||(n=Vr(e.display)*t.ch);var r=G(e.doc,t.line),i=vn(r)+nr(e.display);return{left:n,right:n,top:i,bottom:i+r.height}}function jr(e,t,n,r,i){var a=K(e,t,n);return a.xRel=i,r&&(a.outside=r),a}function Mr(e,t,n){var r=e.doc;if(n+=e.display.viewOffset,n<0)return jr(r.first,0,null,-1,-1);var i=ht(r,n),a=r.first+r.size-1;if(i>a)return jr(r.first+r.size-1,G(r,a).text.length,null,1,1);t<0&&(t=0);for(var o=G(r,i);;){var s=Ir(e,o,i,t,n),c=ln(o,s.ch+(s.xRel>0||s.outside>0?1:0));if(!c)return s;var l=c.find(1);if(l.line==i)return l;o=G(r,i=l.line)}}function Nr(e,t,n,r){r-=Tr(t);var i=t.text.length,a=De(function(t){return mr(e,n,t-1).bottom<=r},i,0);return i=De(function(t){return mr(e,n,t).top>r},a,i),{begin:a,end:i}}function Pr(e,t,n,r){n||=pr(e,t);var i=Er(e,t,mr(e,n,r),`line`).top;return Nr(e,t,n,i)}function Fr(e,t,n,r){return e.bottom<=n?!1:e.top>n?!0:(r?e.left:e.right)>t}function Ir(e,t,n,r,i){i-=vn(t);var a=pr(e,t),o=Tr(t),s=0,c=t.text.length,l=!0,u=Me(t,e.doc.direction);if(u){var d=(e.options.lineWrapping?Rr:Lr)(e,t,n,a,u,r,i);l=d.level!=1,s=l?d.from:d.to-1,c=l?d.to:d.from-1}var f=null,p=null,m=De(function(t){var n=mr(e,a,t);return n.top+=o,n.bottom+=o,Fr(n,r,i,!1)?(n.top<=i&&n.left<=r&&(f=t,p=n),!0):!1},s,c),h,g,_=!1;if(p){var v=r-p.left<p.right-r,y=v==l;m=f+(y?0:1),g=y?`after`:`before`,h=v?p.left:p.right}else{!l&&(m==c||m==s)&&m++,g=m==0?`after`:m==t.text.length?`before`:mr(e,a,m-(l?1:0)).bottom+o<=i==l?`after`:`before`;var b=kr(e,K(n,m,g),`line`,t,a);h=b.left,_=i<b.top?-1:i>=b.bottom?1:0}return m=Ee(t.text,m,1),jr(n,m,g,_,r-h)}function Lr(e,t,n,r,i,a,o){var s=De(function(s){var c=i[s],l=c.level!=1;return Fr(kr(e,K(n,l?c.to:c.from,l?`before`:`after`),`line`,t,r),a,o,!0)},0,i.length-1),c=i[s];if(s>0){var l=c.level!=1,u=kr(e,K(n,l?c.from:c.to,l?`after`:`before`),`line`,t,r);Fr(u,a,o,!0)&&u.top>o&&(c=i[s-1])}return c}function Rr(e,t,n,r,i,a,o){var s=Nr(e,t,r,o),c=s.begin,l=s.end;/\s/.test(t.text.charAt(l-1))&&l--;for(var u=null,d=null,f=0;f<i.length;f++){var p=i[f];if(!(p.from>=l||p.to<=c)){var m=p.level!=1,h=mr(e,r,m?Math.min(l,p.to)-1:Math.max(c,p.from)).right,g=h<a?a-h+1e9:h-a;(!u||d>g)&&(u=p,d=g)}}return u||=i[i.length-1],u.from<c&&(u={from:c,to:u.to,level:u.level}),u.to>l&&(u={from:u.from,to:l,level:u.level}),u}var zr;function Br(e){if(e.cachedTextHeight!=null)return e.cachedTextHeight;if(zr==null){zr=k(`pre`,null,`CodeMirror-line-like`);for(var t=0;t<49;++t)zr.appendChild(document.createTextNode(`x`)),zr.appendChild(k(`br`));zr.appendChild(document.createTextNode(`x`))}O(e.measure,zr);var n=zr.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),D(e.measure),n||1}function Vr(e){if(e.cachedCharWidth!=null)return e.cachedCharWidth;var t=k(`span`,`xxxxxxxxxx`),n=k(`pre`,[t],`CodeMirror-line-like`);O(e.measure,n);var r=t.getBoundingClientRect(),i=(r.right-r.left)/10;return i>2&&(e.cachedCharWidth=i),i||10}function Hr(e){for(var t=e.display,n={},r={},i=t.gutters.clientLeft,a=t.gutters.firstChild,o=0;a;a=a.nextSibling,++o){var s=e.display.gutterSpecs[o].className;n[s]=a.offsetLeft+a.clientLeft+i,r[s]=a.clientWidth}return{fixedPos:Ur(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function Ur(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function Wr(e){var t=Br(e.display),n=e.options.lineWrapping,r=n&&Math.max(5,e.display.scroller.clientWidth/Vr(e.display)-3);return function(i){if(gn(e.doc,i))return 0;var a=0;if(i.widgets)for(var o=0;o<i.widgets.length;o++)i.widgets[o].height&&(a+=i.widgets[o].height);return n?a+(Math.ceil(i.text.length/r)||1)*t:a+t}}function Gr(e){var t=e.doc,n=Wr(e);t.iter(function(e){var t=n(e);t!=e.height&&pt(e,t)})}function Kr(e,t,n,r){var i=e.display;if(!n&&Ve(t).getAttribute(`cm-not-content`)==`true`)return null;var a,o,s=i.lineSpace.getBoundingClientRect();try{a=t.clientX-s.left,o=t.clientY-s.top}catch{return null}var c=Mr(e,a,o),l;if(r&&c.xRel>0&&(l=G(e.doc,c.line).text).length==c.ch){var u=R(l,l.length,e.options.tabSize)-l.length;c=K(c.line,Math.max(0,Math.round((a-ir(e.display).left)/Vr(e.display))-u))}return c}function qr(e,t){if(t>=e.display.viewTo||(t-=e.display.viewFrom,t<0))return null;for(var n=e.display.view,r=0;r<n.length;r++)if(t-=n[r].size,t<0)return r}function Jr(e,t,n,r){t??=e.doc.first,n??=e.doc.first+e.doc.size,r||=0;var i=e.display;if(r&&n<i.viewTo&&(i.updateLineNumbers==null||i.updateLineNumbers>t)&&(i.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=i.viewTo)Ht&&mn(e.doc,t)<i.viewTo&&Xr(e);else if(n<=i.viewFrom)Ht&&hn(e.doc,n+r)>i.viewFrom?Xr(e):(i.viewFrom+=r,i.viewTo+=r);else if(t<=i.viewFrom&&n>=i.viewTo)Xr(e);else if(t<=i.viewFrom){var a=Zr(e,n,n+r,1);a?(i.view=i.view.slice(a.index),i.viewFrom=a.lineN,i.viewTo+=r):Xr(e)}else if(n>=i.viewTo){var o=Zr(e,t,t,-1);o?(i.view=i.view.slice(0,o.index),i.viewTo=o.lineN):Xr(e)}else{var s=Zr(e,t,t,-1),c=Zr(e,n,n+r,1);s&&c?(i.view=i.view.slice(0,s.index).concat(Pn(e,s.lineN,c.lineN)).concat(i.view.slice(c.index)),i.viewTo+=r):Xr(e)}var l=i.externalMeasured;l&&(n<l.lineN?l.lineN+=r:t<l.lineN+l.size&&(i.externalMeasured=null))}function Yr(e,t,n){e.curOp.viewChanged=!0;var r=e.display,i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size&&(r.externalMeasured=null),!(t<r.viewFrom||t>=r.viewTo)){var a=r.view[qr(e,t)];if(a.node!=null){var o=a.changes||=[];oe(o,n)==-1&&o.push(n)}}}function Xr(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function Zr(e,t,n,r){var i=qr(e,t),a,o=e.display.view;if(!Ht||n==e.doc.first+e.doc.size)return{index:i,lineN:n};for(var s=e.display.viewFrom,c=0;c<i;c++)s+=o[c].size;if(s!=t){if(r>0){if(i==o.length-1)return null;a=s+o[i].size-t,i++}else a=s-t;t+=a,n+=a}for(;mn(e.doc,n)!=n;){if(i==(r<0?0:o.length-1))return null;n+=r*o[i-(r<0?1:0)].size,i+=r}return{index:i,lineN:n}}function Qr(e,t,n){var r=e.display;r.view.length==0||t>=r.viewTo||n<=r.viewFrom?(r.view=Pn(e,t,n),r.viewFrom=t):(r.viewFrom>t?r.view=Pn(e,t,r.viewFrom).concat(r.view):r.viewFrom<t&&(r.view=r.view.slice(qr(e,t))),r.viewFrom=t,r.viewTo<n?r.view=r.view.concat(Pn(e,r.viewTo,n)):r.viewTo>n&&(r.view=r.view.slice(0,qr(e,n)))),r.viewTo=n}function $r(e){for(var t=e.display.view,n=0,r=0;r<t.length;r++){var i=t[r];!i.hidden&&(!i.node||i.changes)&&++n}return n}function ei(e){e.display.input.showSelection(e.display.input.prepareSelection())}function ti(e,t){t===void 0&&(t=!0);var n=e.doc,r={},i=r.cursors=document.createDocumentFragment(),a=r.selection=document.createDocumentFragment(),o=e.options.$customCursor;o&&(t=!0);for(var s=0;s<n.sel.ranges.length;s++)if(!(!t&&s==n.sel.primIndex)){var c=n.sel.ranges[s];if(!(c.from().line>=e.display.viewTo||c.to().line<e.display.viewFrom)){var l=c.empty();if(o){var u=o(e,c);u&&ni(e,u,i)}else (l||e.options.showCursorWhenSelecting)&&ni(e,c.head,i);l||ii(e,c,a)}}return r}function ni(e,t,n){var r=kr(e,t,`div`,null,null,!e.options.singleCursorHeightPerLine),i=n.appendChild(k(`div`,`\xA0`,`CodeMirror-cursor`));if(i.style.left=r.left+`px`,i.style.top=r.top+`px`,i.style.height=Math.max(0,r.bottom-r.top)*e.options.cursorHeight+`px`,/\bcm-fat-cursor\b/.test(e.getWrapperElement().className)){var a=Or(e,t,`div`,null,null),o=a.right-a.left;i.style.width=(o>0?o:e.defaultCharWidth())+`px`}if(r.other){var s=n.appendChild(k(`div`,`\xA0`,`CodeMirror-cursor CodeMirror-secondarycursor`));s.style.display=``,s.style.left=r.other.left+`px`,s.style.top=r.other.top+`px`,s.style.height=(r.other.bottom-r.other.top)*.85+`px`}}function ri(e,t){return e.top-t.top||e.left-t.left}function ii(e,t,n){var r=e.display,i=e.doc,a=document.createDocumentFragment(),o=ir(e.display),s=o.left,c=Math.max(r.sizerWidth,or(e)-r.sizer.offsetLeft)-o.right,l=i.direction==`ltr`;function u(e,t,n,r){t<0&&(t=0),t=Math.round(t),r=Math.round(r),a.appendChild(k(`div`,null,`CodeMirror-selected`,`position: absolute; left: `+e+`px;
                             top: `+t+`px; width: `+(n??c-e)+`px;
                             height: `+(r-t)+`px`))}function d(t,n,r){var a=G(i,t),o=a.text.length,d,f;function p(n,r){return Or(e,K(t,n),`div`,a,r)}function m(t,n,r){var i=Pr(e,a,null,t),o=n==`ltr`==(r==`after`)?`left`:`right`,s=r==`after`?i.begin:i.end-(/\s/.test(a.text.charAt(i.end-1))?2:1);return p(s,o)[o]}var h=Me(a,i.direction);return Oe(h,n||0,r??o,function(e,t,i,a){var g=i==`ltr`,_=p(e,g?`left`:`right`),v=p(t-1,g?`right`:`left`),y=n==null&&e==0,b=r==null&&t==o,x=a==0,S=!h||a==h.length-1;if(v.top-_.top<=3){var C=(l?y:b)&&x,w=(l?b:y)&&S,T=C?s:(g?_:v).left,E=w?c:(g?v:_).right;u(T,_.top,E-T,_.bottom)}else{var D,O,k,A;g?(D=l&&y&&x?s:_.left,O=l?c:m(e,i,`before`),k=l?s:m(t,i,`after`),A=l&&b&&S?c:v.right):(D=l?m(e,i,`before`):s,O=!l&&y&&x?c:_.right,k=!l&&b&&S?s:v.left,A=l?m(t,i,`after`):c),u(D,_.top,O-D,_.bottom),_.bottom<v.top&&u(s,_.bottom,null,v.top),u(k,v.top,A-k,v.bottom)}(!d||ri(_,d)<0)&&(d=_),ri(v,d)<0&&(d=v),(!f||ri(_,f)<0)&&(f=_),ri(v,f)<0&&(f=v)}),{start:d,end:f}}var f=t.from(),p=t.to();if(f.line==p.line)d(f.line,f.ch,p.ch);else{var m=G(i,f.line),h=G(i,p.line),g=dn(m)==dn(h),_=d(f.line,f.ch,g?m.text.length+1:null).end,v=d(p.line,g?0:null,p.ch).start;g&&(_.top<v.top-2?(u(_.right,_.top,null,_.bottom),u(s,v.top,v.left,v.bottom)):u(_.right,_.top,v.left-_.right,_.bottom)),_.bottom<v.top&&u(s,_.bottom,null,v.top)}n.appendChild(a)}function ai(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility=``,e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){e.hasFocus()||li(e),t.cursorDiv.style.visibility=(n=!n)?``:`hidden`},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility=`hidden`)}}function oi(e){e.hasFocus()||(e.display.input.focus(),e.state.focused||ci(e))}function si(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,e.state.focused&&li(e))},100)}function ci(e,t){e.state.delayingBlurEvent&&!e.state.draggingText&&(e.state.delayingBlurEvent=!1),e.options.readOnly!=`nocursor`&&(e.state.focused||(H(e,`focus`,e,t),e.state.focused=!0,ne(e.display.wrapper,`CodeMirror-focused`),!e.curOp&&e.display.selForContextMenu!=e.doc.sel&&(e.display.input.reset(),c&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),ai(e))}function li(e,t){e.state.delayingBlurEvent||(e.state.focused&&(H(e,`blur`,e,t),e.state.focused=!1,E(e.display.wrapper,`CodeMirror-focused`)),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function di(e){for(var t=e.display,n=t.lineDiv.offsetTop,r=Math.max(0,t.scroller.getBoundingClientRect().top),i=t.lineDiv.getBoundingClientRect().top,a=0,c=0;c<t.view.length;c++){var l=t.view[c],u=e.options.lineWrapping,d=void 0,f=0;if(!l.hidden){if(i+=l.line.height,o&&s<8){var p=l.node.offsetTop+l.node.offsetHeight;d=p-n,n=p}else{var m=l.node.getBoundingClientRect();d=m.bottom-m.top,!u&&l.text.firstChild&&(f=l.text.firstChild.getBoundingClientRect().right-m.left-1)}var h=l.line.height-d;if((h>.005||h<-.005)&&(i<r&&(a-=h),pt(l.line,d),fi(l.line),l.rest))for(var g=0;g<l.rest.length;g++)fi(l.rest[g]);if(f>e.display.sizerWidth){var _=Math.ceil(f/Vr(e.display));_>e.display.maxLineLength&&(e.display.maxLineLength=_,e.display.maxLine=l.line,e.display.maxLineChanged=!0)}}}Math.abs(a)>2&&(t.scroller.scrollTop+=a)}function fi(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var n=e.widgets[t],r=n.node.parentNode;r&&(n.height=r.offsetHeight)}}function pi(e,t,n){var r=n&&n.top!=null?Math.max(0,n.top):e.scroller.scrollTop;r=Math.floor(r-nr(e));var i=n&&n.bottom!=null?n.bottom:r+e.wrapper.clientHeight,a=ht(t,r),o=ht(t,i);if(n&&n.ensure){var s=n.ensure.from.line,c=n.ensure.to.line;s<a?(a=s,o=ht(t,vn(G(t,s))+e.wrapper.clientHeight)):Math.min(c,t.lastLine())>=o&&(a=ht(t,vn(G(t,c))-e.wrapper.clientHeight),o=c)}return{from:a,to:Math.max(o,a+1)}}function mi(e,t){if(!U(e,`scrollCursorIntoView`)){var n=e.display,r=n.sizer.getBoundingClientRect(),i=null,a=n.wrapper.ownerDocument;if(t.top+r.top<0?i=!0:t.bottom+r.top>(a.defaultView.innerHeight||a.documentElement.clientHeight)&&(i=!1),i!=null&&!h){var o=k(`div`,`​`,null,`position: absolute;
                         top: `+(t.top-n.viewOffset-nr(e.display))+`px;
                         height: `+(t.bottom-t.top+ar(e)+n.barHeight)+`px;
                         left: `+t.left+`px; width: `+Math.max(2,t.right-t.left)+`px;`);e.display.lineSpace.appendChild(o),o.scrollIntoView(i),e.display.lineSpace.removeChild(o)}}}function hi(e,t,n,r){r??=0;var i;!e.options.lineWrapping&&t==n&&(n=t.sticky==`before`?K(t.line,t.ch+1,`before`):t,t=t.ch?K(t.line,t.sticky==`before`?t.ch-1:t.ch,`after`):t);for(var a=0;a<5;a++){var o=!1,s=kr(e,t),c=!n||n==t?s:kr(e,n);i={left:Math.min(s.left,c.left),top:Math.min(s.top,c.top)-r,right:Math.max(s.left,c.left),bottom:Math.max(s.bottom,c.bottom)+r};var l=_i(e,i),u=e.doc.scrollTop,d=e.doc.scrollLeft;if(l.scrollTop!=null&&(wi(e,l.scrollTop),Math.abs(e.doc.scrollTop-u)>1&&(o=!0)),l.scrollLeft!=null&&(Ei(e,l.scrollLeft),Math.abs(e.doc.scrollLeft-d)>1&&(o=!0)),!o)break}return i}function gi(e,t){var n=_i(e,t);n.scrollTop!=null&&wi(e,n.scrollTop),n.scrollLeft!=null&&Ei(e,n.scrollLeft)}function _i(e,t){var n=e.display,r=Br(e.display);t.top<0&&(t.top=0);var i=e.curOp&&e.curOp.scrollTop!=null?e.curOp.scrollTop:n.scroller.scrollTop,a=sr(e),o={};t.bottom-t.top>a&&(t.bottom=t.top+a);var s=e.doc.height+rr(n),c=t.top<r,l=t.bottom>s-r;if(t.top<i)o.scrollTop=c?0:t.top;else if(t.bottom>i+a){var u=Math.min(t.top,(l?s:t.bottom)-a);u!=i&&(o.scrollTop=u)}var d=e.options.fixedGutter?0:n.gutters.offsetWidth,f=e.curOp&&e.curOp.scrollLeft!=null?e.curOp.scrollLeft:n.scroller.scrollLeft-d,p=or(e)-n.gutters.offsetWidth,m=t.right-t.left>p;return m&&(t.right=t.left+p),t.left<10?o.scrollLeft=0:t.left<f?o.scrollLeft=Math.max(0,t.left+d-(m?0:10)):t.right>p+f-3&&(o.scrollLeft=t.right+(m?0:10)-p),o}function vi(e,t){t!=null&&(Si(e),e.curOp.scrollTop=(e.curOp.scrollTop==null?e.doc.scrollTop:e.curOp.scrollTop)+t)}function yi(e){Si(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function bi(e,t,n){(t!=null||n!=null)&&Si(e),t!=null&&(e.curOp.scrollLeft=t),n!=null&&(e.curOp.scrollTop=n)}function xi(e,t){Si(e),e.curOp.scrollToPos=t}function Si(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var n=Ar(e,t.from),r=Ar(e,t.to);Ci(e,n,r,t.margin)}}function Ci(e,t,n,r){var i=_i(e,{left:Math.min(t.left,n.left),top:Math.min(t.top,n.top)-r,right:Math.max(t.right,n.right),bottom:Math.max(t.bottom,n.bottom)+r});bi(e,i.scrollLeft,i.scrollTop)}function wi(e,t){Math.abs(e.doc.scrollTop-t)<2||(n||ta(e,{top:t}),Ti(e,t,!0),n&&ta(e),qi(e,100))}function Ti(e,t,n){t=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t)),!(e.display.scroller.scrollTop==t&&!n)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function Ei(e,t,n,r){t=Math.max(0,Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),!((n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!r)&&(e.doc.scrollLeft=t,aa(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function Di(e){var t=e.display,n=t.gutters.offsetWidth,r=Math.round(e.doc.height+rr(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:r,scrollHeight:r+ar(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}var Oi=function(e,t,n){this.cm=n;var r=this.vert=k(`div`,[k(`div`,null,null,`min-width: 1px`)],`CodeMirror-vscrollbar`),i=this.horiz=k(`div`,[k(`div`,null,null,`height: 100%; min-height: 1px`)],`CodeMirror-hscrollbar`);r.tabIndex=i.tabIndex=-1,e(r),e(i),z(r,`scroll`,function(){r.clientHeight&&t(r.scrollTop,`vertical`)}),z(i,`scroll`,function(){i.clientWidth&&t(i.scrollLeft,`horizontal`)}),this.checkedZeroWidth=!1,o&&s<8&&(this.horiz.style.minHeight=this.vert.style.minWidth=`18px`)};Oi.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,r=e.nativeBarWidth;if(n){this.vert.style.display=`block`,this.vert.style.bottom=t?r+`px`:`0`;var i=e.viewHeight-(t?r:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+i)+`px`}else this.vert.scrollTop=0,this.vert.style.display=``,this.vert.firstChild.style.height=`0`;if(t){this.horiz.style.display=`block`,this.horiz.style.right=n?r+`px`:`0`,this.horiz.style.left=e.barLeft+`px`;var a=e.viewWidth-e.barLeft-(n?r:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+a)+`px`}else this.horiz.style.display=``,this.horiz.firstChild.style.width=`0`;return!this.checkedZeroWidth&&e.clientHeight>0&&(r==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?r:0,bottom:t?r:0}},Oi.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,`horiz`)},Oi.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,`vert`)},Oi.prototype.zeroWidthHack=function(){var e=y&&!m?`12px`:`18px`;this.horiz.style.height=this.vert.style.width=e,this.horiz.style.visibility=this.vert.style.visibility=`hidden`,this.disableHoriz=new ae,this.disableVert=new ae},Oi.prototype.enableZeroWidthBar=function(e,t,n){e.style.visibility=``;function r(){var i=e.getBoundingClientRect();(n==`vert`?document.elementFromPoint(i.right-1,(i.top+i.bottom)/2):document.elementFromPoint((i.right+i.left)/2,i.bottom-1))==e?t.set(1e3,r):e.style.visibility=`hidden`}t.set(1e3,r)},Oi.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var ki=function(){};ki.prototype.update=function(){return{bottom:0,right:0}},ki.prototype.setScrollLeft=function(){},ki.prototype.setScrollTop=function(){},ki.prototype.clear=function(){};function Ai(e,t){t||=Di(e);var n=e.display.barWidth,r=e.display.barHeight;ji(e,t);for(var i=0;i<4&&n!=e.display.barWidth||r!=e.display.barHeight;i++)n!=e.display.barWidth&&e.options.lineWrapping&&di(e),ji(e,Di(e)),n=e.display.barWidth,r=e.display.barHeight}function ji(e,t){var n=e.display,r=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=r.right)+`px`,n.sizer.style.paddingBottom=(n.barHeight=r.bottom)+`px`,n.heightForcer.style.borderBottom=r.bottom+`px solid transparent`,r.right&&r.bottom?(n.scrollbarFiller.style.display=`block`,n.scrollbarFiller.style.height=r.bottom+`px`,n.scrollbarFiller.style.width=r.right+`px`):n.scrollbarFiller.style.display=``,r.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display=`block`,n.gutterFiller.style.height=r.bottom+`px`,n.gutterFiller.style.width=t.gutterWidth+`px`):n.gutterFiller.style.display=``}var Mi={native:Oi,null:ki};function Ni(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&E(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new Mi[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),z(t,`mousedown`,function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),t.setAttribute(`cm-not-content`,`true`)},function(t,n){n==`horizontal`?Ei(e,t):wi(e,t)},e),e.display.scrollbars.addClass&&ne(e.display.wrapper,e.display.scrollbars.addClass)}var Pi=0;function Fi(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Pi,markArrays:null},In(e.curOp)}function Ii(e){var t=e.curOp;t&&Rn(t,function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;Li(e)})}function Li(e){for(var t=e.ops,n=0;n<t.length;n++)Ri(t[n]);for(var r=0;r<t.length;r++)zi(t[r]);for(var i=0;i<t.length;i++)Bi(t[i]);for(var a=0;a<t.length;a++)Vi(t[a]);for(var o=0;o<t.length;o++)Hi(t[o])}function Ri(e){var t=e.cm,n=t.display;Xi(t),e.updateMaxLine&&bn(t),e.mustUpdate=e.viewChanged||e.forceUpdate||e.scrollTop!=null||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new Yi(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function zi(e){e.updatedDisplay=e.mustUpdate&&$i(e.cm,e.update)}function Bi(e){var t=e.cm,n=t.display;e.updatedDisplay&&di(t),e.barMeasure=Di(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=dr(t,n.maxLine,n.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+ar(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-or(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=n.input.prepareSelection())}function Vi(e){var t=e.cm;e.adjustWidthTo!=null&&(t.display.sizer.style.minWidth=e.adjustWidthTo+`px`,e.maxScrollLeft<t.doc.scrollLeft&&Ei(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var n=e.focus&&e.focus==j(N(t));e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,n),(e.updatedDisplay||e.startHeight!=t.doc.height)&&Ai(t,e.barMeasure),e.updatedDisplay&&ia(t,e.barMeasure),e.selectionChanged&&ai(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),n&&oi(e.cm)}function Hi(e){var t=e.cm,n=t.display,r=t.doc;if(e.updatedDisplay&&ea(t,e.update),n.wheelStartX!=null&&(e.scrollTop!=null||e.scrollLeft!=null||e.scrollToPos)&&(n.wheelStartX=n.wheelStartY=null),e.scrollTop!=null&&Ti(t,e.scrollTop,e.forceScroll),e.scrollLeft!=null&&Ei(t,e.scrollLeft,!0,!0),e.scrollToPos){var i=hi(t,wt(r,e.scrollToPos.from),wt(r,e.scrollToPos.to),e.scrollToPos.margin);mi(t,i)}var a=e.maybeHiddenMarkers,o=e.maybeUnhiddenMarkers;if(a)for(var s=0;s<a.length;++s)a[s].lines.length||H(a[s],`hide`);if(o)for(var c=0;c<o.length;++c)o[c].lines.length&&H(o[c],`unhide`);n.wrapper.offsetHeight&&(r.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&H(t,`changes`,t,e.changeObjs),e.update&&e.update.finish()}function Ui(e,t){if(e.curOp)return t();Fi(e);try{return t()}finally{Ii(e)}}function Wi(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Fi(e);try{return t.apply(e,arguments)}finally{Ii(e)}}}function Gi(e){return function(){if(this.curOp)return e.apply(this,arguments);Fi(this);try{return e.apply(this,arguments)}finally{Ii(this)}}}function Ki(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Fi(t);try{return e.apply(this,arguments)}finally{Ii(t)}}}function qi(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,I(Ji,e))}function Ji(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var n=+new Date+e.options.workTime,r=jt(e,t.highlightFrontier),i=[];t.iter(r.line,Math.min(t.first+t.size,e.display.viewTo+500),function(a){if(r.line>=e.display.viewFrom){var o=a.styles,s=a.text.length>e.options.maxHighlightLength?st(t.mode,r.state):null,c=kt(e,a,r,!0);s&&(r.state=s),a.styles=c.styles;var l=a.styleClasses,u=c.classes;u?a.styleClasses=u:l&&(a.styleClasses=null);for(var d=!o||o.length!=a.styles.length||l!=u&&(!l||!u||l.bgClass!=u.bgClass||l.textClass!=u.textClass),f=0;!d&&f<o.length;++f)d=o[f]!=a.styles[f];d&&i.push(r.line),a.stateAfter=r.save(),r.nextLine()}else a.text.length<=e.options.maxHighlightLength&&Mt(e,a.text,r),a.stateAfter=r.line%5==0?r.save():null,r.nextLine();if(+new Date>n)return qi(e,e.options.workDelay),!0}),t.highlightFrontier=r.line,t.modeFrontier=Math.max(t.modeFrontier,r.line),i.length&&Ui(e,function(){for(var t=0;t<i.length;t++)Yr(e,i[t],`text`)})}}var Yi=function(e,t,n){var r=e.display;this.viewport=t,this.visible=pi(r,e.doc,t),this.editorIsHidden=!r.wrapper.offsetWidth,this.wrapperHeight=r.wrapper.clientHeight,this.wrapperWidth=r.wrapper.clientWidth,this.oldDisplayWidth=or(e),this.force=n,this.dims=Hr(e),this.events=[]};Yi.prototype.signal=function(e,t){Ie(e,t)&&this.events.push(arguments)},Yi.prototype.finish=function(){for(var e=0;e<this.events.length;e++)H.apply(null,this.events[e])};function Xi(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=ar(e)+`px`,t.sizer.style.marginBottom=-t.nativeBarWidth+`px`,t.sizer.style.borderRightWidth=ar(e)+`px`,t.scrollbarsClipped=!0)}function Zi(e){if(e.hasFocus())return null;var t=j(N(e));if(!t||!te(e.display.lineDiv,t))return null;var n={activeElt:t};if(window.getSelection){var r=F(e).getSelection();r.anchorNode&&r.extend&&te(e.display.lineDiv,r.anchorNode)&&(n.anchorNode=r.anchorNode,n.anchorOffset=r.anchorOffset,n.focusNode=r.focusNode,n.focusOffset=r.focusOffset)}return n}function Qi(e){if(!(!e||!e.activeElt||e.activeElt==j(P(e.activeElt)))&&(e.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(e.activeElt.nodeName)&&e.anchorNode&&te(document.body,e.anchorNode)&&te(document.body,e.focusNode))){var t=e.activeElt.ownerDocument,n=t.defaultView.getSelection(),r=t.createRange();r.setEnd(e.anchorNode,e.anchorOffset),r.collapse(!1),n.removeAllRanges(),n.addRange(r),n.extend(e.focusNode,e.focusOffset)}}function $i(e,t){var n=e.display,r=e.doc;if(t.editorIsHidden)return Xr(e),!1;if(!t.force&&t.visible.from>=n.viewFrom&&t.visible.to<=n.viewTo&&(n.updateLineNumbers==null||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&$r(e)==0)return!1;oa(e)&&(Xr(e),t.dims=Hr(e));var i=r.first+r.size,a=Math.max(t.visible.from-e.options.viewportMargin,r.first),o=Math.min(i,t.visible.to+e.options.viewportMargin);n.viewFrom<a&&a-n.viewFrom<20&&(a=Math.max(r.first,n.viewFrom)),n.viewTo>o&&n.viewTo-o<20&&(o=Math.min(i,n.viewTo)),Ht&&(a=mn(e.doc,a),o=hn(e.doc,o));var s=a!=n.viewFrom||o!=n.viewTo||n.lastWrapHeight!=t.wrapperHeight||n.lastWrapWidth!=t.wrapperWidth;Qr(e,a,o),n.viewOffset=vn(G(e.doc,n.viewFrom)),e.display.mover.style.top=n.viewOffset+`px`;var c=$r(e);if(!s&&c==0&&!t.force&&n.renderedView==n.view&&(n.updateLineNumbers==null||n.updateLineNumbers>=n.viewTo))return!1;var l=Zi(e);return c>4&&(n.lineDiv.style.display=`none`),na(e,n.updateLineNumbers,t.dims),c>4&&(n.lineDiv.style.display=``),n.renderedView=n.view,Qi(l),D(n.cursorDiv),D(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,s&&(n.lastWrapHeight=t.wrapperHeight,n.lastWrapWidth=t.wrapperWidth,qi(e,400)),n.updateLineNumbers=null,!0}function ea(e,t){for(var n=t.viewport,r=!0;;r=!1){if(!r||!e.options.lineWrapping||t.oldDisplayWidth==or(e)){if(n&&n.top!=null&&(n={top:Math.min(e.doc.height+rr(e.display)-sr(e),n.top)}),t.visible=pi(e.display,e.doc,n),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break}else r&&(t.visible=pi(e.display,e.doc,n));if(!$i(e,t))break;di(e);var i=Di(e);ei(e),Ai(e,i),ia(e,i),t.force=!1}t.signal(e,`update`,e),(e.display.viewFrom!=e.display.reportedViewFrom||e.display.viewTo!=e.display.reportedViewTo)&&(t.signal(e,`viewportChange`,e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function ta(e,t){var n=new Yi(e,t);if($i(e,n)){di(e),ea(e,n);var r=Di(e);ei(e),Ai(e,r),ia(e,r),n.finish()}}function na(e,t,n){var r=e.display,i=e.options.lineNumbers,a=r.lineDiv,o=a.firstChild;function s(t){var n=t.nextSibling;return c&&y&&e.display.currentWheelTarget==t?t.style.display=`none`:t.parentNode.removeChild(t),n}for(var l=r.view,u=r.viewFrom,d=0;d<l.length;d++){var f=l[d];if(!f.hidden)if(!f.node||f.node.parentNode!=a){var p=Xn(e,f,u,n);a.insertBefore(p,o)}else{for(;o!=f.node;)o=s(o);var m=i&&t!=null&&t<=u&&f.lineNumber;f.changes&&(oe(f.changes,`gutter`)>-1&&(m=!1),Hn(e,f,u,n)),m&&(D(f.lineNumber),f.lineNumber.appendChild(document.createTextNode(_t(e.options,u)))),o=f.node.nextSibling}u+=f.size}for(;o;)o=s(o)}function ra(e){var t=e.gutters.offsetWidth;e.sizer.style.marginLeft=t+`px`,Bn(e,`gutterChanged`,e)}function ia(e,t){e.display.sizer.style.minHeight=t.docHeight+`px`,e.display.heightForcer.style.top=t.docHeight+`px`,e.display.gutters.style.height=t.docHeight+e.display.barHeight+ar(e)+`px`}function aa(e){var t=e.display,n=t.view;if(!(!t.alignWidgets&&(!t.gutters.firstChild||!e.options.fixedGutter))){for(var r=Ur(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,a=r+`px`,o=0;o<n.length;o++)if(!n[o].hidden){e.options.fixedGutter&&(n[o].gutter&&(n[o].gutter.style.left=a),n[o].gutterBackground&&(n[o].gutterBackground.style.left=a));var s=n[o].alignable;if(s)for(var c=0;c<s.length;c++)s[c].style.left=a}e.options.fixedGutter&&(t.gutters.style.left=r+i+`px`)}}function oa(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=_t(e.options,t.first+t.size-1),r=e.display;if(n.length!=r.lineNumChars){var i=r.measure.appendChild(k(`div`,[k(`div`,n)],`CodeMirror-linenumber CodeMirror-gutter-elt`)),a=i.firstChild.offsetWidth,o=i.offsetWidth-a;return r.lineGutter.style.width=``,r.lineNumInnerWidth=Math.max(a,r.lineGutter.offsetWidth-o)+1,r.lineNumWidth=r.lineNumInnerWidth+o,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+`px`,ra(e.display),!0}return!1}function sa(e,t){for(var n=[],r=!1,i=0;i<e.length;i++){var a=e[i],o=null;if(typeof a!=`string`&&(o=a.style,a=a.className),a==`CodeMirror-linenumbers`)if(t)r=!0;else continue;n.push({className:a,style:o})}return t&&!r&&n.push({className:`CodeMirror-linenumbers`,style:null}),n}function ca(e){var t=e.gutters,n=e.gutterSpecs;D(t),e.lineGutter=null;for(var r=0;r<n.length;++r){var i=n[r],a=i.className,o=i.style,s=t.appendChild(k(`div`,null,`CodeMirror-gutter `+a));o&&(s.style.cssText=o),a==`CodeMirror-linenumbers`&&(e.lineGutter=s,s.style.width=(e.lineNumWidth||1)+`px`)}t.style.display=n.length?``:`none`,ra(e)}function la(e){ca(e.display),Jr(e),aa(e)}function ua(e,t,r,i){var a=this;this.input=r,a.scrollbarFiller=k(`div`,null,`CodeMirror-scrollbar-filler`),a.scrollbarFiller.setAttribute(`cm-not-content`,`true`),a.gutterFiller=k(`div`,null,`CodeMirror-gutter-filler`),a.gutterFiller.setAttribute(`cm-not-content`,`true`),a.lineDiv=A(`div`,null,`CodeMirror-code`),a.selectionDiv=k(`div`,null,null,`position: relative; z-index: 1`),a.cursorDiv=k(`div`,null,`CodeMirror-cursors`),a.measure=k(`div`,null,`CodeMirror-measure`),a.lineMeasure=k(`div`,null,`CodeMirror-measure`),a.lineSpace=A(`div`,[a.measure,a.lineMeasure,a.selectionDiv,a.cursorDiv,a.lineDiv],null,`position: relative; outline: none`);var l=A(`div`,[a.lineSpace],`CodeMirror-lines`);a.mover=k(`div`,[l],null,`position: relative`),a.sizer=k(`div`,[a.mover],`CodeMirror-sizer`),a.sizerWidth=null,a.heightForcer=k(`div`,null,null,`position: absolute; height: `+se+`px; width: 1px;`),a.gutters=k(`div`,null,`CodeMirror-gutters`),a.lineGutter=null,a.scroller=k(`div`,[a.sizer,a.heightForcer,a.gutters],`CodeMirror-scroll`),a.scroller.setAttribute(`tabIndex`,`-1`),a.wrapper=k(`div`,[a.scrollbarFiller,a.gutterFiller,a.scroller],`CodeMirror`),u&&d===105&&(a.wrapper.style.clipPath=`inset(0px)`),a.wrapper.setAttribute(`translate`,`no`),o&&s<8&&(a.gutters.style.zIndex=-1,a.scroller.style.paddingRight=0),!c&&!(n&&v)&&(a.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(a.wrapper):e(a.wrapper)),a.viewFrom=a.viewTo=t.first,a.reportedViewFrom=a.reportedViewTo=t.first,a.view=[],a.renderedView=null,a.externalMeasured=null,a.viewOffset=0,a.lastWrapHeight=a.lastWrapWidth=0,a.updateLineNumbers=null,a.nativeBarWidth=a.barHeight=a.barWidth=0,a.scrollbarsClipped=!1,a.lineNumWidth=a.lineNumInnerWidth=a.lineNumChars=null,a.alignWidgets=!1,a.cachedCharWidth=a.cachedTextHeight=a.cachedPaddingH=null,a.maxLine=null,a.maxLineLength=0,a.maxLineChanged=!1,a.wheelDX=a.wheelDY=a.wheelStartX=a.wheelStartY=null,a.shift=!1,a.selForContextMenu=null,a.activeTouch=null,a.gutterSpecs=sa(i.gutters,i.lineNumbers),ca(a),r.init(a)}var da=0,fa=null;o?fa=-.53:n?fa=15:u?fa=-.7:p&&(fa=-1/3);function pa(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;return t==null&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),n==null&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:n??=e.wheelDelta,{x:t,y:n}}function ma(e){var t=pa(e);return t.x*=fa,t.y*=fa,t}function ha(e,t){u&&d==102&&(e.display.chromeScrollHack==null?e.display.sizer.style.pointerEvents=`none`:clearTimeout(e.display.chromeScrollHack),e.display.chromeScrollHack=setTimeout(function(){e.display.chromeScrollHack=null,e.display.sizer.style.pointerEvents=``},100));var r=pa(t),i=r.x,a=r.y,o=fa;t.deltaMode===0&&(i=t.deltaX,a=t.deltaY,o=1);var s=e.display,l=s.scroller,p=l.scrollWidth>l.clientWidth,m=l.scrollHeight>l.clientHeight;if(i&&p||a&&m){if(a&&y&&c){outer:for(var h=t.target,g=s.view;h!=l;h=h.parentNode)for(var _=0;_<g.length;_++)if(g[_].node==h){e.display.currentWheelTarget=h;break outer}}if(i&&!n&&!f&&o!=null){a&&m&&wi(e,Math.max(0,l.scrollTop+a*o)),Ei(e,Math.max(0,l.scrollLeft+i*o)),(!a||a&&m)&&Re(t),s.wheelStartX=null;return}if(a&&o!=null){var v=a*o,b=e.doc.scrollTop,x=b+s.wrapper.clientHeight;v<0?b=Math.max(0,b+v-50):x=Math.min(e.doc.height,x+v+50),ta(e,{top:b,bottom:x})}da<20&&t.deltaMode!==0&&(s.wheelStartX==null?(s.wheelStartX=l.scrollLeft,s.wheelStartY=l.scrollTop,s.wheelDX=i,s.wheelDY=a,setTimeout(function(){if(s.wheelStartX!=null){var e=l.scrollLeft-s.wheelStartX,t=l.scrollTop-s.wheelStartY,n=t&&s.wheelDY&&t/s.wheelDY||e&&s.wheelDX&&e/s.wheelDX;s.wheelStartX=s.wheelStartY=null,n&&(fa=(fa*da+n)/(da+1),++da)}},200)):(s.wheelDX+=i,s.wheelDY+=a))}}var ga=function(e,t){this.ranges=e,this.primIndex=t};ga.prototype.primary=function(){return this.ranges[this.primIndex]},ga.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],r=e.ranges[t];if(!yt(n.anchor,r.anchor)||!yt(n.head,r.head))return!1}return!0},ga.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new _a(bt(this.ranges[t].anchor),bt(this.ranges[t].head));return new ga(e,this.primIndex)},ga.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},ga.prototype.contains=function(e,t){t||=e;for(var n=0;n<this.ranges.length;n++){var r=this.ranges[n];if(vt(t,r.from())>=0&&vt(e,r.to())<=0)return n}return-1};var _a=function(e,t){this.anchor=e,this.head=t};_a.prototype.from=function(){return St(this.anchor,this.head)},_a.prototype.to=function(){return xt(this.anchor,this.head)},_a.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function va(e,t,n){var r=e&&e.options.selectionsMayTouch,i=t[n];t.sort(function(e,t){return vt(e.from(),t.from())}),n=oe(t,i);for(var a=1;a<t.length;a++){var o=t[a],s=t[a-1],c=vt(s.to(),o.from());if(r&&!o.empty()?c>0:c>=0){var l=St(s.from(),o.from()),u=xt(s.to(),o.to()),d=s.empty()?o.from()==o.head:s.from()==s.head;a<=n&&--n,t.splice(--a,2,new _a(d?u:l,d?l:u))}}return new ga(t,n)}function ya(e,t){return new ga([new _a(e,t||e)],0)}function ba(e){return e.text?K(e.from.line+e.text.length-1,he(e.text).length+(e.text.length==1?e.from.ch:0)):e.to}function xa(e,t){if(vt(e,t.from)<0)return e;if(vt(e,t.to)<=0)return ba(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,r=e.ch;return e.line==t.to.line&&(r+=ba(t).ch-t.to.ch),K(n,r)}function Sa(e,t){for(var n=[],r=0;r<e.sel.ranges.length;r++){var i=e.sel.ranges[r];n.push(new _a(xa(i.anchor,t),xa(i.head,t)))}return va(e.cm,n,e.sel.primIndex)}function Ca(e,t,n){return e.line==t.line?K(n.line,e.ch-t.ch+n.ch):K(n.line+(e.line-t.line),e.ch)}function wa(e,t,n){for(var r=[],i=K(e.first,0),a=i,o=0;o<t.length;o++){var s=t[o],c=Ca(s.from,i,a),l=Ca(ba(s),i,a);if(i=s.to,a=l,n==`around`){var u=e.sel.ranges[o],d=vt(u.head,u.anchor)<0;r[o]=new _a(d?l:c,d?c:l)}else r[o]=new _a(c,c)}return new ga(r,e.sel.primIndex)}function Ta(e){e.doc.mode=it(e.options,e.doc.modeOption),Ea(e)}function Ea(e){e.doc.iter(function(e){e.stateAfter&&=null,e.styles&&=null}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,qi(e,100),e.state.modeGen++,e.curOp&&Jr(e)}function Da(e,t){return t.from.ch==0&&t.to.ch==0&&he(t.text)==``&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Oa(e,t,n,r){function i(e){return n?n[e]:null}function a(e,n,i){Sn(e,n,i,r),Bn(e,`change`,e,t)}function o(e,t){for(var n=[],a=e;a<t;++a)n.push(new xn(l[a],i(a),r));return n}var s=t.from,c=t.to,l=t.text,u=G(e,s.line),d=G(e,c.line),f=he(l),p=i(l.length-1),m=c.line-s.line;if(t.full)e.insert(0,o(0,l.length)),e.remove(l.length,e.size-l.length);else if(Da(e,t)){var h=o(0,l.length-1);a(d,d.text,p),m&&e.remove(s.line,m),h.length&&e.insert(s.line,h)}else if(u==d)if(l.length==1)a(u,u.text.slice(0,s.ch)+f+u.text.slice(c.ch),p);else{var g=o(1,l.length-1);g.push(new xn(f+u.text.slice(c.ch),p,r)),a(u,u.text.slice(0,s.ch)+l[0],i(0)),e.insert(s.line+1,g)}else if(l.length==1)a(u,u.text.slice(0,s.ch)+l[0]+d.text.slice(c.ch),i(0)),e.remove(s.line+1,m);else{a(u,u.text.slice(0,s.ch)+l[0],i(0)),a(d,f+d.text.slice(c.ch),p);var _=o(1,l.length-1);m>1&&e.remove(s.line+1,m-1),e.insert(s.line+1,_)}Bn(e,`change`,e,t)}function ka(e,t,n){function r(e,i,a){if(e.linked)for(var o=0;o<e.linked.length;++o){var s=e.linked[o];if(s.doc!=i){var c=a&&s.sharedHist;n&&!c||(t(s.doc,c),r(s.doc,e,c))}}}r(e,null,!0)}function Aa(e,t){if(t.cm)throw Error(`This document is already in use.`);e.doc=t,t.cm=e,Gr(e),Ta(e),ja(e),e.options.direction=t.direction,e.options.lineWrapping||bn(e),e.options.mode=t.modeOption,Jr(e)}function ja(e){(e.doc.direction==`rtl`?ne:E)(e.display.lineDiv,`CodeMirror-rtl`)}function Ma(e){Ui(e,function(){ja(e),Jr(e)})}function Na(e){this.done=[],this.undone=[],this.undoDepth=e?e.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e?e.maxGeneration:1}function Pa(e,t){var n={from:bt(t.from),to:ba(t),text:dt(e,t.from,t.to)};return Ha(e,n,t.from.line,t.to.line+1),ka(e,function(e){return Ha(e,n,t.from.line,t.to.line+1)},!0),n}function Fa(e){for(;e.length&&he(e).ranges;)e.pop()}function Ia(e,t){if(t)return Fa(e.done),he(e.done);if(e.done.length&&!he(e.done).ranges)return he(e.done);if(e.done.length>1&&!e.done[e.done.length-2].ranges)return e.done.pop(),he(e.done)}function La(e,t,n,r){var i=e.history;i.undone.length=0;var a=+new Date,o,s;if((i.lastOp==r||i.lastOrigin==t.origin&&t.origin&&(t.origin.charAt(0)==`+`&&i.lastModTime>a-(e.cm?e.cm.options.historyEventDelay:500)||t.origin.charAt(0)==`*`))&&(o=Ia(i,i.lastOp==r)))s=he(o.changes),vt(t.from,t.to)==0&&vt(t.from,s.to)==0?s.to=ba(t):o.changes.push(Pa(e,t));else{var c=he(i.done);for((!c||!c.ranges)&&Va(e.sel,i.done),o={changes:[Pa(e,t)],generation:i.generation},i.done.push(o);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(n),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=a,i.lastOp=i.lastSelOp=r,i.lastOrigin=i.lastSelOrigin=t.origin,s||H(e,`historyAdded`)}function za(e,t,n,r){var i=t.charAt(0);return i==`*`||i==`+`&&n.ranges.length==r.ranges.length&&n.somethingSelected()==r.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function Ba(e,t,n,r){var i=e.history,a=r&&r.origin;n==i.lastSelOp||a&&i.lastSelOrigin==a&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==a||za(e,a,he(i.done),t))?i.done[i.done.length-1]=t:Va(t,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=a,i.lastSelOp=n,r&&r.clearRedo!==!1&&Fa(i.undone)}function Va(e,t){var n=he(t);n&&n.ranges&&n.equals(e)||t.push(e)}function Ha(e,t,n,r){var i=t[`spans_`+e.id],a=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,r),function(n){n.markedSpans&&((i||=t[`spans_`+e.id]={})[a]=n.markedSpans),++a})}function Ua(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||=e.slice(0,n):t&&t.push(e[n]);return t?t.length?t:null:e}function Wa(e,t){var n=t[`spans_`+e.id];if(!n)return null;for(var r=[],i=0;i<t.text.length;++i)r.push(Ua(n[i]));return r}function Ga(e,t){var n=Wa(e,t),r=Zt(e,t);if(!n)return r;if(!r)return n;for(var i=0;i<n.length;++i){var a=n[i],o=r[i];if(a&&o)spans:for(var s=0;s<o.length;++s){for(var c=o[s],l=0;l<a.length;++l)if(a[l].marker==c.marker)continue spans;a.push(c)}else o&&(n[i]=o)}return n}function Ka(e,t,n){for(var r=[],i=0;i<e.length;++i){var a=e[i];if(a.ranges){r.push(n?ga.prototype.deepCopy.call(a):a);continue}var o=a.changes,s=[];r.push({changes:s});for(var c=0;c<o.length;++c){var l=o[c],u=void 0;if(s.push({from:l.from,to:l.to,text:l.text}),t)for(var d in l)(u=d.match(/^spans_(\d+)$/))&&oe(t,Number(u[1]))>-1&&(he(s)[d]=l[d],delete l[d])}}return r}function qa(e,t,n,r){if(r){var i=e.anchor;if(n){var a=vt(t,i)<0;a==vt(n,i)<0?a!=vt(t,n)<0&&(t=n):(i=t,t=n)}return new _a(i,t)}else return new _a(n||t,t)}function Ja(e,t,n,r,i){i??=e.cm&&(e.cm.display.shift||e.extend),eo(e,new ga([qa(e.sel.primary(),t,n,i)],0),r)}function Ya(e,t,n){for(var r=[],i=e.cm&&(e.cm.display.shift||e.extend),a=0;a<e.sel.ranges.length;a++)r[a]=qa(e.sel.ranges[a],t[a],null,i);var o=va(e.cm,r,e.sel.primIndex);eo(e,o,n)}function Xa(e,t,n,r){var i=e.sel.ranges.slice(0);i[t]=n,eo(e,va(e.cm,i,e.sel.primIndex),r)}function Za(e,t,n,r){eo(e,ya(t,n),r)}function Qa(e,t,n){var r={ranges:t.ranges,update:function(t){this.ranges=[];for(var n=0;n<t.length;n++)this.ranges[n]=new _a(wt(e,t[n].anchor),wt(e,t[n].head))},origin:n&&n.origin};return H(e,`beforeSelectionChange`,e,r),e.cm&&H(e.cm,`beforeSelectionChange`,e.cm,r),r.ranges==t.ranges?t:va(e.cm,r.ranges,r.ranges.length-1)}function $a(e,t,n){var r=e.history.done,i=he(r);i&&i.ranges?(r[r.length-1]=t,to(e,t,n)):eo(e,t,n)}function eo(e,t,n){to(e,t,n),Ba(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function to(e,t,n){(Ie(e,`beforeSelectionChange`)||e.cm&&Ie(e.cm,`beforeSelectionChange`))&&(t=Qa(e,t,n));var r=n&&n.bias||(vt(t.primary().head,e.sel.primary().head)<0?-1:1);no(e,io(e,t,r,!0)),!(n&&n.scroll===!1)&&e.cm&&e.cm.getOption(`readOnly`)!=`nocursor`&&yi(e.cm)}function no(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,Fe(e.cm)),Bn(e,`cursorActivity`,e))}function ro(e){no(e,io(e,e.sel,null,!1))}function io(e,t,n,r){for(var i,a=0;a<t.ranges.length;a++){var o=t.ranges[a],s=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[a],c=oo(e,o.anchor,s&&s.anchor,n,r),l=o.head==o.anchor?c:oo(e,o.head,s&&s.head,n,r);(i||c!=o.anchor||l!=o.head)&&(i||=t.ranges.slice(0,a),i[a]=new _a(c,l))}return i?va(e.cm,i,t.primIndex):t}function ao(e,t,n,r,i){var a=G(e,t.line);if(a.markedSpans)for(var o=0;o<a.markedSpans.length;++o){var s=a.markedSpans[o],c=s.marker,l=`selectLeft`in c?!c.selectLeft:c.inclusiveLeft,u=`selectRight`in c?!c.selectRight:c.inclusiveRight;if((s.from==null||(l?s.from<=t.ch:s.from<t.ch))&&(s.to==null||(u?s.to>=t.ch:s.to>t.ch))){if(i&&(H(c,`beforeCursorEnter`),c.explicitlyCleared))if(a.markedSpans){--o;continue}else break;if(!c.atomic)continue;if(n){var d=c.find(r<0?1:-1),f=void 0;if((r<0?u:l)&&(d=so(e,d,-r,d&&d.line==t.line?a:null)),d&&d.line==t.line&&(f=vt(d,n))&&(r<0?f<0:f>0))return ao(e,d,t,r,i)}var p=c.find(r<0?-1:1);return(r<0?l:u)&&(p=so(e,p,r,p.line==t.line?a:null)),p?ao(e,p,t,r,i):null}}return t}function oo(e,t,n,r,i){var a=r||1;return ao(e,t,n,a,i)||!i&&ao(e,t,n,a,!0)||ao(e,t,n,-a,i)||!i&&ao(e,t,n,-a,!0)||(e.cantEdit=!0,K(e.first,0))}function so(e,t,n,r){return n<0&&t.ch==0?t.line>e.first?wt(e,K(t.line-1)):null:n>0&&t.ch==(r||G(e,t.line)).text.length?t.line<e.first+e.size-1?K(t.line+1,0):null:new K(t.line,t.ch+n)}function co(e){e.setSelection(K(e.firstLine(),0),K(e.lastLine()),le)}function lo(e,t,n){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return r.canceled=!0}};return n&&(r.update=function(t,n,i,a){t&&(r.from=wt(e,t)),n&&(r.to=wt(e,n)),i&&(r.text=i),a!==void 0&&(r.origin=a)}),H(e,`beforeChange`,e,r),e.cm&&H(e.cm,`beforeChange`,e.cm,r),r.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:r.from,to:r.to,text:r.text,origin:r.origin}}function uo(e,t,n){if(e.cm){if(!e.cm.curOp)return Wi(e.cm,uo)(e,t,n);if(e.cm.state.suppressEdits)return}if(!((Ie(e,`beforeChange`)||e.cm&&Ie(e.cm,`beforeChange`))&&(t=lo(e,t,!0),!t))){var r=Vt&&!n&&$t(e,t.from,t.to);if(r)for(var i=r.length-1;i>=0;--i)fo(e,{from:r[i].from,to:r[i].to,text:i?[``]:t.text,origin:t.origin});else fo(e,t)}}function fo(e,t){if(!(t.text.length==1&&t.text[0]==``&&vt(t.from,t.to)==0)){var n=Sa(e,t);La(e,t,n,e.cm?e.cm.curOp.id:NaN),ho(e,t,n,Zt(e,t));var r=[];ka(e,function(e,n){!n&&oe(r,e.history)==-1&&(bo(e.history,t),r.push(e.history)),ho(e,t,null,Zt(e,t))})}}function po(e,t,n){var r=e.cm&&e.cm.state.suppressEdits;if(!(r&&!n)){for(var i=e.history,a,o=e.sel,s=t==`undo`?i.done:i.undone,c=t==`undo`?i.undone:i.done,l=0;l<s.length&&(a=s[l],!(n?a.ranges&&!a.equals(e.sel):!a.ranges));l++);if(l!=s.length){for(i.lastOrigin=i.lastSelOrigin=null;;)if(a=s.pop(),a.ranges){if(Va(a,c),n&&!a.equals(e.sel)){eo(e,a,{clearRedo:!1});return}o=a}else if(r){s.push(a);return}else break;var u=[];Va(o,c),c.push({changes:u,generation:i.generation}),i.generation=a.generation||++i.maxGeneration;for(var d=Ie(e,`beforeChange`)||e.cm&&Ie(e.cm,`beforeChange`),f=function(n){var r=a.changes[n];if(r.origin=t,d&&!lo(e,r,!1))return s.length=0,{};u.push(Pa(e,r));var i=n?Sa(e,r):he(s);ho(e,r,i,Ga(e,r)),!n&&e.cm&&e.cm.scrollIntoView({from:r.from,to:ba(r)});var o=[];ka(e,function(e,t){!t&&oe(o,e.history)==-1&&(bo(e.history,r),o.push(e.history)),ho(e,r,null,Ga(e,r))})},p=a.changes.length-1;p>=0;--p){var m=f(p);if(m)return m.v}}}}function mo(e,t){if(t!=0&&(e.first+=t,e.sel=new ga(ge(e.sel.ranges,function(e){return new _a(K(e.anchor.line+t,e.anchor.ch),K(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){Jr(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,r=n.viewFrom;r<n.viewTo;r++)Yr(e.cm,r,`gutter`)}}function ho(e,t,n,r){if(e.cm&&!e.cm.curOp)return Wi(e.cm,ho)(e,t,n,r);if(t.to.line<e.first){mo(e,t.text.length-1-(t.to.line-t.from.line));return}if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);mo(e,i),t={from:K(e.first,0),to:K(t.to.line+i,t.to.ch),text:[he(t.text)],origin:t.origin}}var a=e.lastLine();t.to.line>a&&(t={from:t.from,to:K(a,G(e,a).text.length),text:[t.text[0]],origin:t.origin}),t.removed=dt(e,t.from,t.to),n||=Sa(e,t),e.cm?go(e.cm,t,r):Oa(e,t,r),to(e,n,le),e.cantEdit&&oo(e,K(e.firstLine(),0))&&(e.cantEdit=!1)}}function go(e,t,n){var r=e.doc,i=e.display,a=t.from,o=t.to,s=!1,c=a.line;e.options.lineWrapping||(c=mt(dn(G(r,a.line))),r.iter(c,o.line+1,function(e){if(e==i.maxLine)return s=!0,!0})),r.sel.contains(t.from,t.to)>-1&&Fe(e),Oa(r,t,n,Wr(e)),e.options.lineWrapping||(r.iter(c,a.line+t.text.length,function(e){var t=yn(e);t>i.maxLineLength&&(i.maxLine=e,i.maxLineLength=t,i.maxLineChanged=!0,s=!1)}),s&&(e.curOp.updateMaxLine=!0)),Bt(r,a.line),qi(e,400);var l=t.text.length-(o.line-a.line)-1;t.full?Jr(e):a.line==o.line&&t.text.length==1&&!Da(e.doc,t)?Yr(e,a.line,`text`):Jr(e,a.line,o.line+1,l);var u=Ie(e,`changes`),d=Ie(e,`change`);if(d||u){var f={from:a,to:o,text:t.text,removed:t.removed,origin:t.origin};d&&Bn(e,`change`,e,f),u&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(f)}e.display.selForContextMenu=null}function _o(e,t,n,r,i){var a;r||=n,vt(r,n)<0&&(a=[r,n],n=a[0],r=a[1]),typeof t==`string`&&(t=e.splitLines(t)),uo(e,{from:n,to:r,text:t,origin:i})}function vo(e,t,n,r){n<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function yo(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i],o=!0;if(a.ranges){a.copied||=(a=e[i]=a.deepCopy(),!0);for(var s=0;s<a.ranges.length;s++)vo(a.ranges[s].anchor,t,n,r),vo(a.ranges[s].head,t,n,r);continue}for(var c=0;c<a.changes.length;++c){var l=a.changes[c];if(n<l.from.line)l.from=K(l.from.line+r,l.from.ch),l.to=K(l.to.line+r,l.to.ch);else if(t<=l.to.line){o=!1;break}}o||(e.splice(0,i+1),i=0)}}function bo(e,t){var n=t.from.line,r=t.to.line,i=t.text.length-(r-n)-1;yo(e.done,n,r,i),yo(e.undone,n,r,i)}function xo(e,t,n,r){var i=t,a=t;return typeof t==`number`?a=G(e,Ct(e,t)):i=mt(t),i==null?null:(r(a,i)&&e.cm&&Yr(e.cm,i,n),a)}function So(e){this.lines=e,this.parent=null;for(var t=0,n=0;n<e.length;++n)e[n].parent=this,t+=e[n].height;this.height=t}So.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,r=e+t;n<r;++n){var i=this.lines[n];this.height-=i.height,Cn(i),Bn(i,`delete`)}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0;r<t.length;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;e<r;++e)if(n(this.lines[e]))return!0}};function Co(e){this.children=e;for(var t=0,n=0,r=0;r<e.length;++r){var i=e[r];t+=i.chunkSize(),n+=i.height,i.parent=this}this.size=t,this.height=n,this.parent=null}Co.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var r=this.children[n],i=r.chunkSize();if(e<i){var a=Math.min(t,i-e),o=r.height;if(r.removeInner(e,a),this.height-=o-r.height,i==a&&(this.children.splice(n--,1),r.parent=null),(t-=a)==0)break;e=0}else e-=i}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof So))){var s=[];this.collapse(s),this.children=[new So(s)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var r=0;r<this.children.length;++r){var i=this.children[r],a=i.chunkSize();if(e<=a){if(i.insertInner(e,t,n),i.lines&&i.lines.length>50){for(var o=i.lines.length%25+25,s=o;s<i.lines.length;){var c=new So(i.lines.slice(s,s+=25));i.height-=c.height,this.children.splice(++r,0,c),c.parent=this}i.lines=i.lines.slice(0,o),this.maybeSpill()}break}e-=a}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),n=new Co(t);if(e.parent){e.size-=n.size,e.height-=n.height;var r=oe(e.parent.children,e);e.parent.children.splice(r+1,0,n)}else{var i=new Co(e.children);i.parent=e,e.children=[i,n],e=i}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var r=0;r<this.children.length;++r){var i=this.children[r],a=i.chunkSize();if(e<a){var o=Math.min(t,a-e);if(i.iterN(e,o,n))return!0;if((t-=o)==0)break;e=0}else e-=a}}};var wo=function(e,t,n){if(n)for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r]);this.doc=e,this.node=t};wo.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,n=this.line,r=mt(n);if(!(r==null||!t)){for(var i=0;i<t.length;++i)t[i]==this&&t.splice(i--,1);t.length||(n.widgets=null);var a=er(this);pt(n,Math.max(0,n.height-a)),e&&(Ui(e,function(){To(e,n,-a),Yr(e,r,`widget`)}),Bn(e,`lineWidgetCleared`,e,this,r))}},wo.prototype.changed=function(){var e=this,t=this.height,n=this.doc.cm,r=this.line;this.height=null;var i=er(this)-t;i&&(gn(this.doc,r)||pt(r,r.height+i),n&&Ui(n,function(){n.curOp.forceUpdate=!0,To(n,r,i),Bn(n,`lineWidgetChanged`,n,e,mt(r))}))},Le(wo);function To(e,t,n){vn(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&vi(e,n)}function Eo(e,t,n,r){var i=new wo(e,n,r),a=e.cm;return a&&i.noHScroll&&(a.display.alignWidgets=!0),xo(e,t,`widget`,function(t){var n=t.widgets||=[];if(i.insertAt==null?n.push(i):n.splice(Math.min(n.length,Math.max(0,i.insertAt)),0,i),i.line=t,a&&!gn(e,t)){var r=vn(t)<e.scrollTop;pt(t,t.height+er(i)),r&&vi(a,i.height),a.curOp.forceUpdate=!0}return!0}),a&&Bn(a,`lineWidgetAdded`,a,i,typeof t==`number`?t:mt(t)),i}var Do=0,Oo=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++Do};Oo.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&Fi(e),Ie(this,`clear`)){var n=this.find();n&&Bn(this,`clear`,n.from,n.to)}for(var r=null,i=null,a=0;a<this.lines.length;++a){var o=this.lines[a],s=Kt(o.markedSpans,this);e&&!this.collapsed?Yr(e,mt(o),`text`):e&&(s.to!=null&&(i=mt(o)),s.from!=null&&(r=mt(o))),o.markedSpans=qt(o.markedSpans,s),s.from==null&&this.collapsed&&!gn(this.doc,o)&&e&&pt(o,Br(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var c=0;c<this.lines.length;++c){var l=dn(this.lines[c]),u=yn(l);u>e.display.maxLineLength&&(e.display.maxLine=l,e.display.maxLineLength=u,e.display.maxLineChanged=!0)}r!=null&&e&&this.collapsed&&Jr(e,r,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&ro(e.doc)),e&&Bn(e,`markerCleared`,e,this,r,i),t&&Ii(e),this.parent&&this.parent.clear()}},Oo.prototype.find=function(e,t){e==null&&this.type==`bookmark`&&(e=1);for(var n,r,i=0;i<this.lines.length;++i){var a=this.lines[i],o=Kt(a.markedSpans,this);if(o.from!=null&&(n=K(t?a:mt(a),o.from),e==-1))return n;if(o.to!=null&&(r=K(t?a:mt(a),o.to),e==1))return r}return n&&{from:n,to:r}},Oo.prototype.changed=function(){var e=this,t=this.find(-1,!0),n=this,r=this.doc.cm;!t||!r||Ui(r,function(){var i=t.line,a=mt(t.line),o=fr(r,a);if(o&&(br(o),r.curOp.selectionChanged=r.curOp.forceUpdate=!0),r.curOp.updateMaxLine=!0,!gn(n.doc,i)&&n.height!=null){var s=n.height;n.height=null;var c=er(n)-s;c&&pt(i,i.height+c)}Bn(r,`markerChanged`,r,e)})},Oo.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(!t.maybeHiddenMarkers||oe(t.maybeHiddenMarkers,this)==-1)&&(t.maybeUnhiddenMarkers||=[]).push(this)}this.lines.push(e)},Oo.prototype.detachLine=function(e){if(this.lines.splice(oe(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||=[]).push(this)}},Le(Oo);function ko(e,t,n,r,i){if(r&&r.shared)return jo(e,t,n,r,i);if(e.cm&&!e.cm.curOp)return Wi(e.cm,ko)(e,t,n,r,i);var a=new Oo(e,i),o=vt(t,n);if(r&&L(r,a,!1),o>0||o==0&&a.clearWhenEmpty!==!1)return a;if(a.replacedWith&&(a.collapsed=!0,a.widgetNode=A(`span`,[a.replacedWith],`CodeMirror-widget`),r.handleMouseEvents||a.widgetNode.setAttribute(`cm-ignore-events`,`true`),r.insertLeft&&(a.widgetNode.insertLeft=!0)),a.collapsed){if(un(e,t.line,t,n,a)||t.line!=n.line&&un(e,n.line,t,n,a))throw Error(`Inserting collapsed marker partially overlapping an existing one`);Wt()}a.addToHistory&&La(e,{from:t,to:n,origin:`markText`},e.sel,NaN);var s=t.line,c=e.cm,l;if(e.iter(s,n.line+1,function(r){c&&a.collapsed&&!c.options.lineWrapping&&dn(r)==c.display.maxLine&&(l=!0),a.collapsed&&s!=t.line&&pt(r,0),Jt(r,new Gt(a,s==t.line?t.ch:null,s==n.line?n.ch:null),e.cm&&e.cm.curOp),++s}),a.collapsed&&e.iter(t.line,n.line+1,function(t){gn(e,t)&&pt(t,0)}),a.clearOnEnter&&z(a,`beforeCursorEnter`,function(){return a.clear()}),a.readOnly&&(Ut(),(e.history.done.length||e.history.undone.length)&&e.clearHistory()),a.collapsed&&(a.id=++Do,a.atomic=!0),c){if(l&&(c.curOp.updateMaxLine=!0),a.collapsed)Jr(c,t.line,n.line+1);else if(a.className||a.startStyle||a.endStyle||a.css||a.attributes||a.title)for(var u=t.line;u<=n.line;u++)Yr(c,u,`text`);a.atomic&&ro(c.doc),Bn(c,`markerAdded`,c,a)}return a}var Ao=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};Ao.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();Bn(this,`clear`)}},Ao.prototype.find=function(e,t){return this.primary.find(e,t)},Le(Ao);function jo(e,t,n,r,i){r=L(r),r.shared=!1;var a=[ko(e,t,n,r,i)],o=a[0],s=r.widgetNode;return ka(e,function(e){s&&(r.widgetNode=s.cloneNode(!0)),a.push(ko(e,wt(e,t),wt(e,n),r,i));for(var c=0;c<e.linked.length;++c)if(e.linked[c].isParent)return;o=he(a)}),new Ao(a,o)}function Mo(e){return e.findMarks(K(e.first,0),e.clipPos(K(e.lastLine())),function(e){return e.parent})}function No(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=r.find(),a=e.clipPos(i.from),o=e.clipPos(i.to);if(vt(a,o)){var s=ko(e,a,o,r.primary,r.primary.type);r.markers.push(s),s.parent=r}}}function Po(e){for(var t=function(t){var n=e[t],r=[n.primary.doc];ka(n.primary.doc,function(e){return r.push(e)});for(var i=0;i<n.markers.length;i++){var a=n.markers[i];oe(r,a.doc)==-1&&(a.parent=null,n.markers.splice(i--,1))}},n=0;n<e.length;n++)t(n)}var Fo=0,Io=function(e,t,n,r,i){if(!(this instanceof Io))return new Io(e,t,n,r,i);n??=0,Co.call(this,[new So([new xn(``,null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n;var a=K(n,0);this.sel=ya(a),this.history=new Na(null),this.id=++Fo,this.modeOption=t,this.lineSep=r,this.direction=i==`rtl`?`rtl`:`ltr`,this.extend=!1,typeof e==`string`&&(e=this.splitLines(e)),Oa(this,{from:a,to:a,text:e}),eo(this,ya(a),le)};Io.prototype=ye(Co.prototype,{constructor:Io,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,r=0;r<t.length;++r)n+=t[r].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=ft(this,this.first,this.first+this.size);return e===!1?t:t.join(e||this.lineSeparator())},setValue:Ki(function(e){var t=K(this.first,0),n=this.first+this.size-1;uo(this,{from:t,to:K(n,G(this,n).text.length),text:this.splitLines(e),origin:`setValue`,full:!0},!0),this.cm&&bi(this.cm,0,0),eo(this,ya(t),le)}),replaceRange:function(e,t,n,r){t=wt(this,t),n=n?wt(this,n):t,_o(this,e,t,n,r)},getRange:function(e,t,n){var r=dt(this,wt(this,e),wt(this,t));return n===!1?r:n===``?r.join(``):r.join(n||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(gt(this,e))return G(this,e)},getLineNumber:function(e){return mt(e)},getLineHandleVisualStart:function(e){return typeof e==`number`&&(e=G(this,e)),dn(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return wt(this,e)},getCursor:function(e){var t=this.sel.primary();return e==null||e==`head`?t.head:e==`anchor`?t.anchor:e==`end`||e==`to`||e===!1?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Ki(function(e,t,n){Za(this,wt(this,typeof e==`number`?K(e,t||0):e),null,n)}),setSelection:Ki(function(e,t,n){Za(this,wt(this,e),wt(this,t||e),n)}),extendSelection:Ki(function(e,t,n){Ja(this,wt(this,e),t&&wt(this,t),n)}),extendSelections:Ki(function(e,t){Ya(this,Et(this,e),t)}),extendSelectionsBy:Ki(function(e,t){var n=ge(this.sel.ranges,e);Ya(this,Et(this,n),t)}),setSelections:Ki(function(e,t,n){if(e.length){for(var r=[],i=0;i<e.length;i++)r[i]=new _a(wt(this,e[i].anchor),wt(this,e[i].head||e[i].anchor));t??=Math.min(e.length-1,this.sel.primIndex),eo(this,va(this.cm,r,t),n)}}),addSelection:Ki(function(e,t,n){var r=this.sel.ranges.slice(0);r.push(new _a(wt(this,e),wt(this,t||e))),eo(this,va(this.cm,r,r.length-1),n)}),getSelection:function(e){for(var t=this.sel.ranges,n,r=0;r<t.length;r++){var i=dt(this,t[r].from(),t[r].to());n=n?n.concat(i):i}return e===!1?n:n.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],n=this.sel.ranges,r=0;r<n.length;r++){var i=dt(this,n[r].from(),n[r].to());e!==!1&&(i=i.join(e||this.lineSeparator())),t[r]=i}return t},replaceSelection:function(e,t,n){for(var r=[],i=0;i<this.sel.ranges.length;i++)r[i]=e;this.replaceSelections(r,t,n||`+input`)},replaceSelections:Ki(function(e,t,n){for(var r=[],i=this.sel,a=0;a<i.ranges.length;a++){var o=i.ranges[a];r[a]={from:o.from(),to:o.to(),text:this.splitLines(e[a]),origin:n}}for(var s=t&&t!=`end`&&wa(this,r,t),c=r.length-1;c>=0;c--)uo(this,r[c]);s?$a(this,s):this.cm&&yi(this.cm)}),undo:Ki(function(){po(this,`undo`)}),redo:Ki(function(){po(this,`redo`)}),undoSelection:Ki(function(){po(this,`undo`,!0)}),redoSelection:Ki(function(){po(this,`redo`,!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,r=0;r<e.done.length;r++)e.done[r].ranges||++t;for(var i=0;i<e.undone.length;i++)e.undone[i].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){var e=this;this.history=new Na(this.history),ka(this,function(t){return t.history=e.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Ka(this.history.done),undone:Ka(this.history.undone)}},setHistory:function(e){var t=this.history=new Na(this.history);t.done=Ka(e.done.slice(0),null,!0),t.undone=Ka(e.undone.slice(0),null,!0)},setGutterMarker:Ki(function(e,t,n){return xo(this,e,`gutter`,function(e){var r=e.gutterMarkers||={};return r[t]=n,!n&&Ce(r)&&(e.gutterMarkers=null),!0})}),clearGutter:Ki(function(e){var t=this;this.iter(function(n){n.gutterMarkers&&n.gutterMarkers[e]&&xo(t,n,`gutter`,function(){return n.gutterMarkers[e]=null,Ce(n.gutterMarkers)&&(n.gutterMarkers=null),!0})})}),lineInfo:function(e){var t;if(typeof e==`number`){if(!gt(this,e)||(t=e,e=G(this,e),!e))return null}else if(t=mt(e),t==null)return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:Ki(function(e,t,n){return xo(this,e,t==`gutter`?`gutter`:`class`,function(e){var r=t==`text`?`textClass`:t==`background`?`bgClass`:t==`gutter`?`gutterClass`:`wrapClass`;if(!e[r])e[r]=n;else if(T(n).test(e[r]))return!1;else e[r]+=` `+n;return!0})}),removeLineClass:Ki(function(e,t,n){return xo(this,e,t==`gutter`?`gutter`:`class`,function(e){var r=t==`text`?`textClass`:t==`background`?`bgClass`:t==`gutter`?`gutterClass`:`wrapClass`,i=e[r];if(i)if(n==null)e[r]=null;else{var a=i.match(T(n));if(!a)return!1;var o=a.index+a[0].length;e[r]=i.slice(0,a.index)+(!a.index||o==i.length?``:` `)+i.slice(o)||null}else return!1;return!0})}),addLineWidget:Ki(function(e,t,n){return Eo(this,e,t,n)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return ko(this,wt(this,e),wt(this,t),n,n&&n.type||`range`)},setBookmark:function(e,t){var n={replacedWith:t&&(t.nodeType==null?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return e=wt(this,e),ko(this,e,e,n,`bookmark`)},findMarksAt:function(e){e=wt(this,e);var t=[],n=G(this,e.line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(i.from==null||i.from<=e.ch)&&(i.to==null||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},findMarks:function(e,t,n){e=wt(this,e),t=wt(this,t);var r=[],i=e.line;return this.iter(e.line,t.line+1,function(a){var o=a.markedSpans;if(o)for(var s=0;s<o.length;s++){var c=o[s];!(c.to!=null&&i==e.line&&e.ch>=c.to||c.from==null&&i!=e.line||c.from!=null&&i==t.line&&c.from>=t.ch)&&(!n||n(c.marker))&&r.push(c.marker.parent||c.marker)}++i}),r},getAllMarks:function(){var e=[];return this.iter(function(t){var n=t.markedSpans;if(n)for(var r=0;r<n.length;++r)n[r].from!=null&&e.push(n[r].marker)}),e},posFromIndex:function(e){var t,n=this.first,r=this.lineSeparator().length;return this.iter(function(i){var a=i.text.length+r;if(a>e)return t=e,!0;e-=a,++n}),wt(this,K(n,t))},indexFromPos:function(e){e=wt(this,e);var t=e.ch;if(e.line<this.first||e.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,e.line,function(e){t+=e.text.length+n}),t},copy:function(e){var t=new Io(ft(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||={};var t=this.first,n=this.first+this.size;e.from!=null&&e.from>t&&(t=e.from),e.to!=null&&e.to<n&&(n=e.to);var r=new Io(ft(this,t,n),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(r.history=this.history),(this.linked||=[]).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],No(r,Mo(this)),r},unlinkDoc:function(e){if(e instanceof Ys&&(e=e.doc),this.linked){for(var t=0;t<this.linked.length;++t)if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),Po(Mo(this));break}}if(e.history==this.history){var n=[e.id];ka(e,function(e){return n.push(e.id)},!0),e.history=new Na(null),e.history.done=Ka(this.history.done,n),e.history.undone=Ka(this.history.undone,n)}},iterLinkedDocs:function(e){ka(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):Je(e)},lineSeparator:function(){return this.lineSep||`
`},setDirection:Ki(function(e){e!=`rtl`&&(e=`ltr`),e!=this.direction&&(this.direction=e,this.iter(function(e){return e.order=null}),this.cm&&Ma(this.cm))})}),Io.prototype.eachLine=Io.prototype.iter;var Lo=0;function Ro(e){var t=this;if(Vo(t),!(U(t,e)||tr(t.display,e))){Re(e),o&&(Lo=+new Date);var n=Kr(t,e,!0),r=e.dataTransfer.files;if(!(!n||t.isReadOnly()))if(r&&r.length&&window.FileReader&&window.File)for(var i=r.length,a=Array(i),s=0,c=function(){++s==i&&Wi(t,function(){n=wt(t.doc,n);var e={from:n,to:n,text:t.doc.splitLines(a.filter(function(e){return e!=null}).join(t.doc.lineSeparator())),origin:`paste`};uo(t.doc,e),$a(t.doc,ya(wt(t.doc,n),wt(t.doc,ba(e))))})()},l=function(e,n){if(t.options.allowDropFileTypes&&oe(t.options.allowDropFileTypes,e.type)==-1){c();return}var r=new FileReader;r.onerror=function(){return c()},r.onload=function(){var e=r.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(e)){c();return}a[n]=e,c()},r.readAsText(e)},u=0;u<r.length;u++)l(r[u],u);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1){t.state.draggingText(e),setTimeout(function(){return t.display.input.focus()},20);return}try{var d=e.dataTransfer.getData(`Text`);if(d){var f;if(t.state.draggingText&&!t.state.draggingText.copy&&(f=t.listSelections()),to(t.doc,ya(n,n)),f)for(var p=0;p<f.length;++p)_o(t.doc,``,f[p].anchor,f[p].head,`drag`);t.replaceSelection(d,`around`,`paste`),t.display.input.focus()}}catch{}}}}function zo(e,t){if(o&&(!e.state.draggingText||+new Date-Lo<100)){W(t);return}if(!(U(e,t)||tr(e.display,t))&&(t.dataTransfer.setData(`Text`,e.getSelection()),t.dataTransfer.effectAllowed=`copyMove`,t.dataTransfer.setDragImage&&!p)){var n=k(`img`,null,null,`position: fixed; left: 0; top: 0;`);n.src=`data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==`,f&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),f&&n.parentNode.removeChild(n)}}function Bo(e,t){var n=Kr(e,t);if(n){var r=document.createDocumentFragment();ni(e,n,r),e.display.dragCursor||(e.display.dragCursor=k(`div`,null,`CodeMirror-cursors CodeMirror-dragcursors`),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),O(e.display.dragCursor,r)}}function Vo(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function Ho(e){if(document.getElementsByClassName){for(var t=document.getElementsByClassName(`CodeMirror`),n=[],r=0;r<t.length;r++){var i=t[r].CodeMirror;i&&n.push(i)}n.length&&n[0].operation(function(){for(var t=0;t<n.length;t++)e(n[t])})}}var Uo=!1;function Wo(){Uo||=(Go(),!0)}function Go(){z(window,`resize`,function(){setTimeout(function(){Ho(Ko)},100)}),z(window,`blur`,function(){return Ho(li)})}function Ko(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var qo={3:`Pause`,8:`Backspace`,9:`Tab`,13:`Enter`,16:`Shift`,17:`Ctrl`,18:`Alt`,19:`Pause`,20:`CapsLock`,27:`Esc`,32:`Space`,33:`PageUp`,34:`PageDown`,35:`End`,36:`Home`,37:`Left`,38:`Up`,39:`Right`,40:`Down`,44:`PrintScrn`,45:`Insert`,46:`Delete`,59:`;`,61:`=`,91:`Mod`,92:`Mod`,93:`Mod`,106:`*`,107:`=`,109:`-`,110:`.`,111:`/`,145:`ScrollLock`,173:`-`,186:`;`,187:`=`,188:`,`,189:`-`,190:`.`,191:`/`,192:"`",219:`[`,220:`\\`,221:`]`,222:`'`,224:`Mod`,63232:`Up`,63233:`Down`,63234:`Left`,63235:`Right`,63272:`Delete`,63273:`Home`,63275:`End`,63276:`PageUp`,63277:`PageDown`,63302:`Insert`},Jo=0;Jo<10;Jo++)qo[Jo+48]=qo[Jo+96]=String(Jo);for(var Yo=65;Yo<=90;Yo++)qo[Yo]=String.fromCharCode(Yo);for(var Xo=1;Xo<=12;Xo++)qo[Xo+111]=qo[Xo+63235]=`F`+Xo;var Zo={};Zo.basic={Left:`goCharLeft`,Right:`goCharRight`,Up:`goLineUp`,Down:`goLineDown`,End:`goLineEnd`,Home:`goLineStartSmart`,PageUp:`goPageUp`,PageDown:`goPageDown`,Delete:`delCharAfter`,Backspace:`delCharBefore`,"Shift-Backspace":`delCharBefore`,Tab:`defaultTab`,"Shift-Tab":`indentAuto`,Enter:`newlineAndIndent`,Insert:`toggleOverwrite`,Esc:`singleSelection`},Zo.pcDefault={"Ctrl-A":`selectAll`,"Ctrl-D":`deleteLine`,"Ctrl-Z":`undo`,"Shift-Ctrl-Z":`redo`,"Ctrl-Y":`redo`,"Ctrl-Home":`goDocStart`,"Ctrl-End":`goDocEnd`,"Ctrl-Up":`goLineUp`,"Ctrl-Down":`goLineDown`,"Ctrl-Left":`goGroupLeft`,"Ctrl-Right":`goGroupRight`,"Alt-Left":`goLineStart`,"Alt-Right":`goLineEnd`,"Ctrl-Backspace":`delGroupBefore`,"Ctrl-Delete":`delGroupAfter`,"Ctrl-S":`save`,"Ctrl-F":`find`,"Ctrl-G":`findNext`,"Shift-Ctrl-G":`findPrev`,"Shift-Ctrl-F":`replace`,"Shift-Ctrl-R":`replaceAll`,"Ctrl-[":`indentLess`,"Ctrl-]":`indentMore`,"Ctrl-U":`undoSelection`,"Shift-Ctrl-U":`redoSelection`,"Alt-U":`redoSelection`,fallthrough:`basic`},Zo.emacsy={"Ctrl-F":`goCharRight`,"Ctrl-B":`goCharLeft`,"Ctrl-P":`goLineUp`,"Ctrl-N":`goLineDown`,"Ctrl-A":`goLineStart`,"Ctrl-E":`goLineEnd`,"Ctrl-V":`goPageDown`,"Shift-Ctrl-V":`goPageUp`,"Ctrl-D":`delCharAfter`,"Ctrl-H":`delCharBefore`,"Alt-Backspace":`delWordBefore`,"Ctrl-K":`killLine`,"Ctrl-T":`transposeChars`,"Ctrl-O":`openLine`},Zo.macDefault={"Cmd-A":`selectAll`,"Cmd-D":`deleteLine`,"Cmd-Z":`undo`,"Shift-Cmd-Z":`redo`,"Cmd-Y":`redo`,"Cmd-Home":`goDocStart`,"Cmd-Up":`goDocStart`,"Cmd-End":`goDocEnd`,"Cmd-Down":`goDocEnd`,"Alt-Left":`goGroupLeft`,"Alt-Right":`goGroupRight`,"Cmd-Left":`goLineLeft`,"Cmd-Right":`goLineRight`,"Alt-Backspace":`delGroupBefore`,"Ctrl-Alt-Backspace":`delGroupAfter`,"Alt-Delete":`delGroupAfter`,"Cmd-S":`save`,"Cmd-F":`find`,"Cmd-G":`findNext`,"Shift-Cmd-G":`findPrev`,"Cmd-Alt-F":`replace`,"Shift-Cmd-Alt-F":`replaceAll`,"Cmd-[":`indentLess`,"Cmd-]":`indentMore`,"Cmd-Backspace":`delWrappedLineLeft`,"Cmd-Delete":`delWrappedLineRight`,"Cmd-U":`undoSelection`,"Shift-Cmd-U":`redoSelection`,"Ctrl-Up":`goDocStart`,"Ctrl-Down":`goDocEnd`,fallthrough:[`basic`,`emacsy`]},Zo.default=y?Zo.macDefault:Zo.pcDefault;function Qo(e){var t=e.split(/-(?!$)/);e=t[t.length-1];for(var n,r,i,a,o=0;o<t.length-1;o++){var s=t[o];if(/^(cmd|meta|m)$/i.test(s))a=!0;else if(/^a(lt)?$/i.test(s))n=!0;else if(/^(c|ctrl|control)$/i.test(s))r=!0;else if(/^s(hift)?$/i.test(s))i=!0;else throw Error(`Unrecognized modifier name: `+s)}return n&&(e=`Alt-`+e),r&&(e=`Ctrl-`+e),a&&(e=`Cmd-`+e),i&&(e=`Shift-`+e),e}function $o(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if(r==`...`){delete e[n];continue}for(var i=ge(n.split(` `),Qo),a=0;a<i.length;a++){var o=void 0,s=void 0;a==i.length-1?(s=i.join(` `),o=r):(s=i.slice(0,a+1).join(` `),o=`...`);var c=t[s];if(!c)t[s]=o;else if(c!=o)throw Error(`Inconsistent bindings for `+s)}delete e[n]}for(var l in t)e[l]=t[l];return e}function es(e,t,n,r){t=J(t);var i=t.call?t.call(e,r):t[e];if(i===!1)return`nothing`;if(i===`...`)return`multi`;if(i!=null&&n(i))return`handled`;if(t.fallthrough){if(Object.prototype.toString.call(t.fallthrough)!=`[object Array]`)return es(e,t.fallthrough,n,r);for(var a=0;a<t.fallthrough.length;a++){var o=es(e,t.fallthrough[a],n,r);if(o)return o}}}function ts(e){var t=typeof e==`string`?e:qo[e.keyCode];return t==`Ctrl`||t==`Alt`||t==`Shift`||t==`Mod`}function ns(e,t,n){var r=e;return t.altKey&&r!=`Alt`&&(e=`Alt-`+e),(C?t.metaKey:t.ctrlKey)&&r!=`Ctrl`&&(e=`Ctrl-`+e),(C?t.ctrlKey:t.metaKey)&&r!=`Mod`&&(e=`Cmd-`+e),!n&&t.shiftKey&&r!=`Shift`&&(e=`Shift-`+e),e}function rs(e,t){if(f&&e.keyCode==34&&e.char)return!1;var n=qo[e.keyCode];return n==null||e.altGraphKey?!1:(e.keyCode==3&&e.code&&(n=e.code),ns(n,e,t))}function J(e){return typeof e==`string`?Zo[e]:e}function os(e,t){for(var n=e.doc.sel.ranges,r=[],i=0;i<n.length;i++){for(var a=t(n[i]);r.length&&vt(a.from,he(r).to)<=0;){var o=r.pop();if(vt(o.from,a.from)<0){a.from=o.from;break}}r.push(a)}Ui(e,function(){for(var t=r.length-1;t>=0;t--)_o(e.doc,``,r[t].from,r[t].to,`+delete`);yi(e)})}function ss(e,t,n){var r=Ee(e.text,t+n,n);return r<0||r>e.text.length?null:r}function cs(e,t,n){var r=ss(e,t.ch,n);return r==null?null:new K(t.line,r,n<0?`after`:`before`)}function ls(e,t,n,r,i){if(e){t.doc.direction==`rtl`&&(i=-i);var a=Me(n,t.doc.direction);if(a){var o=i<0?he(a):a[0],s=i<0==(o.level==1)?`after`:`before`,c;if(o.level>0||t.doc.direction==`rtl`){var l=pr(t,n);c=i<0?n.text.length-1:0;var u=mr(t,l,c).top;c=De(function(e){return mr(t,l,e).top==u},i<0==(o.level==1)?o.from:o.to-1,c),s==`before`&&(c=ss(n,c,1))}else c=i<0?o.to:o.from;return new K(r,c,s)}}return new K(r,i<0?n.text.length:0,i<0?`before`:`after`)}function Y(e,t,n,r){var i=Me(t,e.doc.direction);if(!i)return cs(t,n,r);n.ch>=t.text.length?(n.ch=t.text.length,n.sticky=`before`):n.ch<=0&&(n.ch=0,n.sticky=`after`);var a=Ae(i,n.ch,n.sticky),o=i[a];if(e.doc.direction==`ltr`&&o.level%2==0&&(r>0?o.to>n.ch:o.from<n.ch))return cs(t,n,r);var s=function(e,n){return ss(t,e instanceof K?e.ch:e,n)},c,l=function(n){return e.options.lineWrapping?(c||=pr(e,t),Pr(e,t,c,n)):{begin:0,end:t.text.length}},u=l(n.sticky==`before`?s(n,-1):n.ch);if(e.doc.direction==`rtl`||o.level==1){var d=o.level==1==r<0,f=s(n,d?1:-1);if(f!=null&&(d?f<=o.to&&f<=u.end:f>=o.from&&f>=u.begin)){var p=d?`before`:`after`;return new K(n.line,f,p)}}var m=function(e,t,r){for(var a=function(e,t){return t?new K(n.line,s(e,1),`before`):new K(n.line,e,`after`)};e>=0&&e<i.length;e+=t){var o=i[e],c=t>0==(o.level!=1),l=c?r.begin:s(r.end,-1);if(o.from<=l&&l<o.to||(l=c?o.from:s(o.to,-1),r.begin<=l&&l<r.end))return a(l,c)}},h=m(a+r,r,u);if(h)return h;var g=r>0?u.end:s(u.begin,-1);return g!=null&&!(r>0&&g==t.text.length)&&(h=m(r>0?0:i.length-1,r,l(g)),h)?h:null}var us={selectAll:co,singleSelection:function(e){return e.setSelection(e.getCursor(`anchor`),e.getCursor(`head`),le)},killLine:function(e){return os(e,function(t){if(t.empty()){var n=G(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:K(t.head.line+1,0)}:{from:t.head,to:K(t.head.line,n)}}else return{from:t.from(),to:t.to()}})},deleteLine:function(e){return os(e,function(t){return{from:K(t.from().line,0),to:wt(e.doc,K(t.to().line+1,0))}})},delLineLeft:function(e){return os(e,function(e){return{from:K(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(e){return os(e,function(t){var n=e.charCoords(t.head,`div`).top+5;return{from:e.coordsChar({left:0,top:n},`div`),to:t.from()}})},delWrappedLineRight:function(e){return os(e,function(t){var n=e.charCoords(t.head,`div`).top+5,r=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},`div`);return{from:t.from(),to:r}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(K(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(K(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(t){return ds(e,t.head.line)},{origin:`+move`,bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(t){return ps(e,t.head)},{origin:`+move`,bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(t){return fs(e,t.head.line)},{origin:`+move`,bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,`div`).top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},`div`)},de)},goLineLeft:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,`div`).top+5;return e.coordsChar({left:0,top:n},`div`)},de)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,`div`).top+5,r=e.coordsChar({left:0,top:n},`div`);return r.ch<e.getLine(r.line).search(/\S/)?ps(e,t.head):r},de)},goLineUp:function(e){return e.moveV(-1,`line`)},goLineDown:function(e){return e.moveV(1,`line`)},goPageUp:function(e){return e.moveV(-1,`page`)},goPageDown:function(e){return e.moveV(1,`page`)},goCharLeft:function(e){return e.moveH(-1,`char`)},goCharRight:function(e){return e.moveH(1,`char`)},goColumnLeft:function(e){return e.moveH(-1,`column`)},goColumnRight:function(e){return e.moveH(1,`column`)},goWordLeft:function(e){return e.moveH(-1,`word`)},goGroupRight:function(e){return e.moveH(1,`group`)},goGroupLeft:function(e){return e.moveH(-1,`group`)},goWordRight:function(e){return e.moveH(1,`word`)},delCharBefore:function(e){return e.deleteH(-1,`codepoint`)},delCharAfter:function(e){return e.deleteH(1,`char`)},delWordBefore:function(e){return e.deleteH(-1,`word`)},delWordAfter:function(e){return e.deleteH(1,`word`)},delGroupBefore:function(e){return e.deleteH(-1,`group`)},delGroupAfter:function(e){return e.deleteH(1,`group`)},indentAuto:function(e){return e.indentSelection(`smart`)},indentMore:function(e){return e.indentSelection(`add`)},indentLess:function(e){return e.indentSelection(`subtract`)},insertTab:function(e){return e.replaceSelection(`	`)},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),r=e.options.tabSize,i=0;i<n.length;i++){var a=n[i].from(),o=R(e.getLine(a.line),a.ch,r);t.push(me(r-o%r))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection(`add`):e.execCommand(`insertTab`)},transposeChars:function(e){return Ui(e,function(){for(var t=e.listSelections(),n=[],r=0;r<t.length;r++)if(t[r].empty()){var i=t[r].head,a=G(e.doc,i.line).text;if(a){if(i.ch==a.length&&(i=new K(i.line,i.ch-1)),i.ch>0)i=new K(i.line,i.ch+1),e.replaceRange(a.charAt(i.ch-1)+a.charAt(i.ch-2),K(i.line,i.ch-2),i,`+transpose`);else if(i.line>e.doc.first){var o=G(e.doc,i.line-1).text;o&&(i=new K(i.line,1),e.replaceRange(a.charAt(0)+e.doc.lineSeparator()+o.charAt(o.length-1),K(i.line-1,o.length-1),i,`+transpose`))}}n.push(new _a(i,i))}e.setSelections(n)})},newlineAndIndent:function(e){return Ui(e,function(){for(var t=e.listSelections(),n=t.length-1;n>=0;n--)e.replaceRange(e.doc.lineSeparator(),t[n].anchor,t[n].head,`+input`);t=e.listSelections();for(var r=0;r<t.length;r++)e.indentLine(t[r].from().line,null,!0);yi(e)})},openLine:function(e){return e.replaceSelection(`
`,`start`)},toggleOverwrite:function(e){return e.toggleOverwrite()}};function ds(e,t){var n=G(e.doc,t),r=dn(n);return r!=n&&(t=mt(r)),ls(!0,e,r,t,1)}function fs(e,t){var n=G(e.doc,t),r=fn(n);return r!=n&&(t=mt(r)),ls(!0,e,n,t,-1)}function ps(e,t){var n=ds(e,t.line),r=G(e.doc,n.line),i=Me(r,e.doc.direction);if(!i||i[0].level==0){var a=Math.max(n.ch,r.text.search(/\S/)),o=t.line==n.line&&t.ch<=a&&t.ch;return K(n.line,o?0:a,n.sticky)}return n}function ms(e,t,n){if(typeof t==`string`&&(t=us[t],!t))return!1;e.display.input.ensurePolled();var r=e.display.shift,i=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),i=t(e)!=ce}finally{e.display.shift=r,e.state.suppressEdits=!1}return i}function X(e,t,n){for(var r=0;r<e.state.keyMaps.length;r++){var i=es(t,e.state.keyMaps[r],n,e);if(i)return i}return e.options.extraKeys&&es(t,e.options.extraKeys,n,e)||es(t,e.options.keyMap,n,e)}var hs=new ae;function gs(e,t,n,r){var i=e.state.keySeq;if(i){if(ts(t))return`handled`;if(/\'$/.test(t)?e.state.keySeq=null:hs.set(50,function(){e.state.keySeq==i&&(e.state.keySeq=null,e.display.input.reset())}),_s(e,i+` `+t,n,r))return!0}return _s(e,t,n,r)}function _s(e,t,n,r){var i=X(e,t,r);return i==`multi`&&(e.state.keySeq=t),i==`handled`&&Bn(e,`keyHandled`,e,t,n),(i==`handled`||i==`multi`)&&(Re(n),ai(e)),!!i}function vs(e,t){var n=rs(t,!0);return n?t.shiftKey&&!e.state.keySeq?gs(e,`Shift-`+n,t,function(t){return ms(e,t,!0)})||gs(e,n,t,function(t){if(typeof t==`string`?/^go[A-Z]/.test(t):t.motion)return ms(e,t)}):gs(e,n,t,function(t){return ms(e,t)}):!1}function ys(e,t,n){return gs(e,`'`+n+`'`,t,function(t){return ms(e,t,!0)})}var bs=null;function xs(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField())&&(t.curOp.focus=j(N(t)),!U(t,e))){o&&s<11&&e.keyCode==27&&(e.returnValue=!1);var r=e.keyCode;t.display.shift=r==16||e.shiftKey;var i=vs(t,e);f&&(bs=i?r:null,!i&&r==88&&!Xe&&(y?e.metaKey:e.ctrlKey)&&t.replaceSelection(``,null,`cut`)),n&&!y&&!i&&r==46&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand(`cut`),r==18&&!/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)&&Ss(t)}}function Ss(e){var t=e.display.lineDiv;ne(t,`CodeMirror-crosshair`);function n(e){(e.keyCode==18||!e.altKey)&&(E(t,`CodeMirror-crosshair`),B(document,`keyup`,n),B(document,`mouseover`,n))}z(document,`keyup`,n),z(document,`mouseover`,n)}function Cs(e){e.keyCode==16&&(this.doc.sel.shift=!1),U(this,e)}function ws(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField())&&!(tr(t.display,e)||U(t,e)||e.ctrlKey&&!e.altKey||y&&e.metaKey)){var n=e.keyCode,r=e.charCode;if(f&&n==bs){bs=null,Re(e);return}if(!(f&&(!e.which||e.which<10)&&vs(t,e))){var i=String.fromCharCode(r??n);i!=`\b`&&(ys(t,e,i)||t.display.input.onKeyPress(e))}}}var Ts=400,Es=function(e,t,n){this.time=e,this.pos=t,this.button=n};Es.prototype.compare=function(e,t,n){return this.time+Ts>e&&vt(t,this.pos)==0&&n==this.button};var Ds,Os;function ks(e,t){var n=+new Date;return Os&&Os.compare(n,e,t)?(Ds=Os=null,`triple`):Ds&&Ds.compare(n,e,t)?(Os=new Es(n,e,t),Ds=null,`double`):(Ds=new Es(n,e,t),Os=null,`single`)}function As(e){var t=this,n=t.display;if(!(U(t,e)||n.activeTouch&&n.input.supportsTouch())){if(n.input.ensurePolled(),n.shift=e.shiftKey,tr(n,e)){c||(n.scroller.draggable=!1,setTimeout(function(){return n.scroller.draggable=!0},100));return}if(!zs(t,e)){var r=Kr(t,e),i=He(e),a=r?ks(r,i):`single`;F(t).focus(),i==1&&t.state.selectingText&&t.state.selectingText(e),!(r&&js(t,i,r,a,e))&&(i==1?r?Ns(t,r,a,e):Ve(e)==n.scroller&&Re(e):i==2?(r&&Ja(t.doc,r),setTimeout(function(){return n.input.focus()},20)):i==3&&(w?t.display.input.onContextMenu(e):si(t)))}}}function js(e,t,n,r,i){var a=`Click`;return r==`double`?a=`Double`+a:r==`triple`&&(a=`Triple`+a),a=(t==1?`Left`:t==2?`Middle`:`Right`)+a,gs(e,ns(a,i),i,function(t){if(typeof t==`string`&&(t=us[t]),!t)return!1;var r=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),r=t(e,n)!=ce}finally{e.state.suppressEdits=!1}return r})}function Ms(e,t,n){var r=e.getOption(`configureMouse`),i=r?r(e,t,n):{};return i.unit??=(b?n.shiftKey&&n.metaKey:n.altKey)?`rectangle`:t==`single`?`char`:t==`double`?`word`:`line`,(i.extend==null||e.doc.extend)&&(i.extend=e.doc.extend||n.shiftKey),i.addNew??=y?n.metaKey:n.ctrlKey,i.moveOnDrag??=!(y?n.altKey:n.ctrlKey),i}function Ns(e,t,n,r){o?setTimeout(I(oi,e),0):e.curOp.focus=j(N(e));var i=Ms(e,n,r),a=e.doc.sel,s;e.options.dragDrop&&Ue&&!e.isReadOnly()&&n==`single`&&(s=a.contains(t))>-1&&(vt((s=a.ranges[s]).from(),t)<0||t.xRel>0)&&(vt(s.to(),t)>0||t.xRel<0)?Ps(e,r,t,i):Is(e,r,t,i)}function Ps(e,t,n,r){var i=e.display,a=!1,l=Wi(e,function(t){c&&(i.scroller.draggable=!1),e.state.draggingText=!1,e.state.delayingBlurEvent&&(e.hasFocus()?e.state.delayingBlurEvent=!1:si(e)),B(i.wrapper.ownerDocument,`mouseup`,l),B(i.wrapper.ownerDocument,`mousemove`,u),B(i.scroller,`dragstart`,d),B(i.scroller,`drop`,l),a||(Re(t),r.addNew||Ja(e.doc,n,null,null,r.extend),c&&!p||o&&s==9?setTimeout(function(){i.wrapper.ownerDocument.body.focus({preventScroll:!0}),i.input.focus()},20):i.input.focus())}),u=function(e){a||=Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)>=10},d=function(){return a=!0};c&&(i.scroller.draggable=!0),e.state.draggingText=l,l.copy=!r.moveOnDrag,z(i.wrapper.ownerDocument,`mouseup`,l),z(i.wrapper.ownerDocument,`mousemove`,u),z(i.scroller,`dragstart`,d),z(i.scroller,`drop`,l),e.state.delayingBlurEvent=!0,setTimeout(function(){return i.input.focus()},20),i.scroller.dragDrop&&i.scroller.dragDrop()}function Fs(e,t,n){if(n==`char`)return new _a(t,t);if(n==`word`)return e.findWordAt(t);if(n==`line`)return new _a(K(t.line,0),wt(e.doc,K(t.line+1,0)));var r=n(e,t);return new _a(r.from,r.to)}function Is(e,t,n,r){o&&si(e);var i=e.display,a=e.doc;Re(t);var s,c,l=a.sel,u=l.ranges;if(r.addNew&&!r.extend?(c=a.sel.contains(n),s=c>-1?u[c]:new _a(n,n)):(s=a.sel.primary(),c=a.sel.primIndex),r.unit==`rectangle`)r.addNew||(s=new _a(n,n)),n=Kr(e,t,!0,!0),c=-1;else{var d=Fs(e,n,r.unit);s=r.extend?qa(s,d.anchor,d.head,r.extend):d}r.addNew?c==-1?(c=u.length,eo(a,va(e,u.concat([s]),c),{scroll:!1,origin:`*mouse`})):u.length>1&&u[c].empty()&&r.unit==`char`&&!r.extend?(eo(a,va(e,u.slice(0,c).concat(u.slice(c+1)),0),{scroll:!1,origin:`*mouse`}),l=a.sel):Xa(a,c,s,ue):(c=0,eo(a,new ga([s],0),ue),l=a.sel);var f=n;function p(t){if(vt(f,t)!=0)if(f=t,r.unit==`rectangle`){for(var i=[],o=e.options.tabSize,u=R(G(a,n.line).text,n.ch,o),d=R(G(a,t.line).text,t.ch,o),p=Math.min(u,d),m=Math.max(u,d),h=Math.min(n.line,t.line),g=Math.min(e.lastLine(),Math.max(n.line,t.line));h<=g;h++){var _=G(a,h).text,v=fe(_,p,o);p==m?i.push(new _a(K(h,v),K(h,v))):_.length>v&&i.push(new _a(K(h,v),K(h,fe(_,m,o))))}i.length||i.push(new _a(n,n)),eo(a,va(e,l.ranges.slice(0,c).concat(i),c),{origin:`*mouse`,scroll:!1}),e.scrollIntoView(t)}else{var y=s,b=Fs(e,t,r.unit),x=y.anchor,S;vt(b.anchor,x)>0?(S=b.head,x=St(y.from(),b.anchor)):(S=b.anchor,x=xt(y.to(),b.head));var C=l.ranges.slice(0);C[c]=Ls(e,new _a(wt(a,x),S)),eo(a,va(e,C,c),ue)}}var m=i.wrapper.getBoundingClientRect(),h=0;function g(t){var n=++h,o=Kr(e,t,!0,r.unit==`rectangle`);if(o)if(vt(o,f)!=0){e.curOp.focus=j(N(e)),p(o);var s=pi(i,a);(o.line>=s.to||o.line<s.from)&&setTimeout(Wi(e,function(){h==n&&g(t)}),150)}else{var c=t.clientY<m.top?-20:t.clientY>m.bottom?20:0;c&&setTimeout(Wi(e,function(){h==n&&(i.scroller.scrollTop+=c,g(t))}),50)}}function _(t){e.state.selectingText=!1,h=1/0,t&&(Re(t),i.input.focus()),B(i.wrapper.ownerDocument,`mousemove`,v),B(i.wrapper.ownerDocument,`mouseup`,y),a.history.lastSelOrigin=null}var v=Wi(e,function(e){e.buttons===0||!He(e)?_(e):g(e)}),y=Wi(e,_);e.state.selectingText=y,z(i.wrapper.ownerDocument,`mousemove`,v),z(i.wrapper.ownerDocument,`mouseup`,y)}function Ls(e,t){var n=t.anchor,r=t.head,i=G(e.doc,n.line);if(vt(n,r)==0&&n.sticky==r.sticky)return t;var a=Me(i);if(!a)return t;var o=Ae(a,n.ch,n.sticky),s=a[o];if(s.from!=n.ch&&s.to!=n.ch)return t;var c=o+(s.from==n.ch==(s.level!=1)?0:1);if(c==0||c==a.length)return t;var l;if(r.line!=n.line)l=(r.line-n.line)*(e.doc.direction==`ltr`?1:-1)>0;else{var u=Ae(a,r.ch,r.sticky),d=u-o||(r.ch-n.ch)*(s.level==1?-1:1);l=u==c-1||u==c?d<0:d>0}var f=a[c+(l?-1:0)],p=l==(f.level==1),m=p?f.from:f.to,h=p?`after`:`before`;return n.ch==m&&n.sticky==h?t:new _a(new K(n.line,m,h),r)}function Rs(e,t,n,r){var i,a;if(t.touches)i=t.touches[0].clientX,a=t.touches[0].clientY;else try{i=t.clientX,a=t.clientY}catch{return!1}if(i>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;r&&Re(t);var o=e.display,s=o.lineDiv.getBoundingClientRect();if(a>s.bottom||!Ie(e,n))return Be(t);a-=s.top-o.viewOffset;for(var c=0;c<e.display.gutterSpecs.length;++c){var l=o.gutters.childNodes[c];if(l&&l.getBoundingClientRect().right>=i){var u=ht(e.doc,a),d=e.display.gutterSpecs[c];return H(e,n,e,u,d.className,t),Be(t)}}}function zs(e,t){return Rs(e,t,`gutterClick`,!0)}function Bs(e,t){tr(e.display,t)||Vs(e,t)||U(e,t,`contextmenu`)||w||e.display.input.onContextMenu(t)}function Vs(e,t){return Ie(e,`gutterContextMenu`)?Rs(e,t,`gutterContextMenu`,!1):!1}function Hs(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,``)+e.options.theme.replace(/(^|\s)\s*/g,` cm-s-`),Sr(e)}var Us={toString:function(){return`CodeMirror.Init`}},Ws={},Gs={};function Ks(e){var t=e.optionHandlers;function n(n,r,i,a){e.defaults[n]=r,i&&(t[n]=a?function(e,t,n){n!=Us&&i(e,t,n)}:i)}e.defineOption=n,e.Init=Us,n(`value`,``,function(e,t){return e.setValue(t)},!0),n(`mode`,null,function(e,t){e.doc.modeOption=t,Ta(e)},!0),n(`indentUnit`,2,Ta,!0),n(`indentWithTabs`,!1),n(`smartIndent`,!0),n(`tabSize`,4,function(e){Ea(e),Sr(e),Jr(e)},!0),n(`lineSeparator`,null,function(e,t){if(e.doc.lineSep=t,t){var n=[],r=e.doc.first;e.doc.iter(function(e){for(var i=0;;){var a=e.text.indexOf(t,i);if(a==-1)break;i=a+t.length,n.push(K(r,a))}r++});for(var i=n.length-1;i>=0;i--)_o(e.doc,t,n[i],K(n[i].line,n[i].ch+t.length))}}),n(`specialChars`,/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(e,t,n){e.state.specialChars=RegExp(t.source+(t.test(`	`)?``:`|	`),`g`),n!=Us&&e.refresh()}),n(`specialCharPlaceholder`,Dn,function(e){return e.refresh()},!0),n(`electricChars`,!0),n(`inputStyle`,v?`contenteditable`:`textarea`,function(){throw Error(`inputStyle can not (yet) be changed in a running editor`)},!0),n(`spellcheck`,!1,function(e,t){return e.getInputField().spellcheck=t},!0),n(`autocorrect`,!1,function(e,t){return e.getInputField().autocorrect=t},!0),n(`autocapitalize`,!1,function(e,t){return e.getInputField().autocapitalize=t},!0),n(`rtlMoveVisually`,!x),n(`wholeLineUpdateBefore`,!0),n(`theme`,`default`,function(e){Hs(e),la(e)},!0),n(`keyMap`,`default`,function(e,t,n){var r=J(t),i=n!=Us&&J(n);i&&i.detach&&i.detach(e,r),r.attach&&r.attach(e,i||null)}),n(`extraKeys`,null),n(`configureMouse`,null),n(`lineWrapping`,!1,Js,!0),n(`gutters`,[],function(e,t){e.display.gutterSpecs=sa(t,e.options.lineNumbers),la(e)},!0),n(`fixedGutter`,!0,function(e,t){e.display.gutters.style.left=t?Ur(e.display)+`px`:`0`,e.refresh()},!0),n(`coverGutterNextToScrollbar`,!1,function(e){return Ai(e)},!0),n(`scrollbarStyle`,`native`,function(e){Ni(e),Ai(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)},!0),n(`lineNumbers`,!1,function(e,t){e.display.gutterSpecs=sa(e.options.gutters,t),la(e)},!0),n(`firstLineNumber`,1,la,!0),n(`lineNumberFormatter`,function(e){return e},la,!0),n(`showCursorWhenSelecting`,!1,ei,!0),n(`resetSelectionOnContextMenu`,!0),n(`lineWiseCopyCut`,!0),n(`pasteLinesPerSelection`,!0),n(`selectionsMayTouch`,!1),n(`readOnly`,!1,function(e,t){t==`nocursor`&&(li(e),e.display.input.blur()),e.display.input.readOnlyChanged(t)}),n(`screenReaderLabel`,null,function(e,t){t=t===``?null:t,e.display.input.screenReaderLabelChanged(t)}),n(`disableInput`,!1,function(e,t){t||e.display.input.reset()},!0),n(`dragDrop`,!0,qs),n(`allowDropFileTypes`,null),n(`cursorBlinkRate`,530),n(`cursorScrollMargin`,0),n(`cursorHeight`,1,ei,!0),n(`singleCursorHeightPerLine`,!0,ei,!0),n(`workTime`,100),n(`workDelay`,100),n(`flattenSpans`,!0,Ea,!0),n(`addModeClass`,!1,Ea,!0),n(`pollInterval`,100),n(`undoDepth`,200,function(e,t){return e.doc.history.undoDepth=t}),n(`historyEventDelay`,1250),n(`viewportMargin`,10,function(e){return e.refresh()},!0),n(`maxHighlightLength`,1e4,Ea,!0),n(`moveInputWithCursor`,!0,function(e,t){t||e.display.input.resetPosition()}),n(`tabindex`,null,function(e,t){return e.display.input.getField().tabIndex=t||``}),n(`autofocus`,null),n(`direction`,`ltr`,function(e,t){return e.doc.setDirection(t)},!0),n(`phrases`,null)}function qs(e,t,n){if(!t!=!(n&&n!=Us)){var r=e.display.dragFunctions,i=t?z:B;i(e.display.scroller,`dragstart`,r.start),i(e.display.scroller,`dragenter`,r.enter),i(e.display.scroller,`dragover`,r.over),i(e.display.scroller,`dragleave`,r.leave),i(e.display.scroller,`drop`,r.drop)}}function Js(e){e.options.lineWrapping?(ne(e.display.wrapper,`CodeMirror-wrap`),e.display.sizer.style.minWidth=``,e.display.sizerWidth=null):(E(e.display.wrapper,`CodeMirror-wrap`),bn(e)),Gr(e),Jr(e),Sr(e),setTimeout(function(){return Ai(e)},100)}function Ys(e,t){var n=this;if(!(this instanceof Ys))return new Ys(e,t);this.options=t=t?L(t):{},L(Ws,t,!1);var r=t.value;typeof r==`string`?r=new Io(r,t.mode,null,t.lineSeparator,t.direction):t.mode&&(r.modeOption=t.mode),this.doc=r;var i=new Ys.inputStyles[t.inputStyle](this),a=this.display=new ua(e,r,i,t);for(var l in a.wrapper.CodeMirror=this,Hs(this),t.lineWrapping&&(this.display.wrapper.className+=` CodeMirror-wrap`),Ni(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new ae,keySeq:null,specialChars:null},t.autofocus&&!v&&a.input.focus(),o&&s<11&&setTimeout(function(){return n.display.input.reset(!0)},20),Xs(this),Wo(),Fi(this),this.curOp.forceUpdate=!0,Aa(this,r),t.autofocus&&!v||this.hasFocus()?setTimeout(function(){n.hasFocus()&&!n.state.focused&&ci(n)},20):li(this),Gs)Gs.hasOwnProperty(l)&&Gs[l](this,t[l],Us);oa(this),t.finishInit&&t.finishInit(this);for(var u=0;u<Zs.length;++u)Zs[u](this);Ii(this),c&&t.lineWrapping&&getComputedStyle(a.lineDiv).textRendering==`optimizelegibility`&&(a.lineDiv.style.textRendering=`auto`)}Ys.defaults=Ws,Ys.optionHandlers=Gs;function Xs(e){var t=e.display;z(t.scroller,`mousedown`,Wi(e,As)),o&&s<11?z(t.scroller,`dblclick`,Wi(e,function(t){if(!U(e,t)){var n=Kr(e,t);if(!(!n||zs(e,t)||tr(e.display,t))){Re(t);var r=e.findWordAt(n);Ja(e.doc,r.anchor,r.head)}}})):z(t.scroller,`dblclick`,function(t){return U(e,t)||Re(t)}),z(t.scroller,`contextmenu`,function(t){return Bs(e,t)}),z(t.input.getField(),`contextmenu`,function(n){t.scroller.contains(n.target)||Bs(e,n)});var n,r={end:0};function i(){t.activeTouch&&(n=setTimeout(function(){return t.activeTouch=null},1e3),r=t.activeTouch,r.end=+new Date)}function a(e){if(e.touches.length!=1)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}function c(e,t){if(t.left==null)return!0;var n=t.left-e.left,r=t.top-e.top;return n*n+r*r>400}z(t.scroller,`touchstart`,function(i){if(!U(e,i)&&!a(i)&&!zs(e,i)){t.input.ensurePolled(),clearTimeout(n);var o=+new Date;t.activeTouch={start:o,moved:!1,prev:o-r.end<=300?r:null},i.touches.length==1&&(t.activeTouch.left=i.touches[0].pageX,t.activeTouch.top=i.touches[0].pageY)}}),z(t.scroller,`touchmove`,function(){t.activeTouch&&(t.activeTouch.moved=!0)}),z(t.scroller,`touchend`,function(n){var r=t.activeTouch;if(r&&!tr(t,n)&&r.left!=null&&!r.moved&&new Date-r.start<300){var a=e.coordsChar(t.activeTouch,`page`),o=!r.prev||c(r,r.prev)?new _a(a,a):!r.prev.prev||c(r,r.prev.prev)?e.findWordAt(a):new _a(K(a.line,0),wt(e.doc,K(a.line+1,0)));e.setSelection(o.anchor,o.head),e.focus(),Re(n)}i()}),z(t.scroller,`touchcancel`,i),z(t.scroller,`scroll`,function(){t.scroller.clientHeight&&(wi(e,t.scroller.scrollTop),Ei(e,t.scroller.scrollLeft,!0),H(e,`scroll`,e))}),z(t.scroller,`mousewheel`,function(t){return ha(e,t)}),z(t.scroller,`DOMMouseScroll`,function(t){return ha(e,t)}),z(t.wrapper,`scroll`,function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0}),t.dragFunctions={enter:function(t){U(e,t)||W(t)},over:function(t){U(e,t)||(Bo(e,t),W(t))},start:function(t){return zo(e,t)},drop:Wi(e,Ro),leave:function(t){U(e,t)||Vo(e)}};var l=t.input.getField();z(l,`keyup`,function(t){return Cs.call(e,t)}),z(l,`keydown`,Wi(e,xs)),z(l,`keypress`,Wi(e,ws)),z(l,`focus`,function(t){return ci(e,t)}),z(l,`blur`,function(t){return li(e,t)})}var Zs=[];Ys.defineInitHook=function(e){return Zs.push(e)};function Qs(e,t,n,r){var i=e.doc,a;n??=`add`,n==`smart`&&(i.mode.indent?a=jt(e,t).state:n=`prev`);var o=e.options.tabSize,s=G(i,t),c=R(s.text,null,o);s.stateAfter&&=null;var l=s.text.match(/^\s*/)[0],u;if(!r&&!/\S/.test(s.text))u=0,n=`not`;else if(n==`smart`&&(u=i.mode.indent(a,s.text.slice(l.length),s.text),u==ce||u>150)){if(!r)return;n=`prev`}n==`prev`?u=t>i.first?R(G(i,t-1).text,null,o):0:n==`add`?u=c+e.options.indentUnit:n==`subtract`?u=c-e.options.indentUnit:typeof n==`number`&&(u=c+n),u=Math.max(0,u);var d=``,f=0;if(e.options.indentWithTabs)for(var p=Math.floor(u/o);p;--p)f+=o,d+=`	`;if(f<u&&(d+=me(u-f)),d!=l)return _o(i,d,K(t,0),K(t,l.length),`+input`),s.stateAfter=null,!0;for(var m=0;m<i.sel.ranges.length;m++){var h=i.sel.ranges[m];if(h.head.line==t&&h.head.ch<l.length){var g=K(t,l.length);Xa(i,m,new _a(g,g));break}}}var $s=null;function ec(e){$s=e}function tc(e,t,n,r,i){var a=e.doc;e.display.shift=!1,r||=a.sel;var o=new Date-200,s=i==`paste`||e.state.pasteIncoming>o,c=Je(t),l=null;if(s&&r.ranges.length>1)if($s&&$s.text.join(`
`)==t){if(r.ranges.length%$s.text.length==0){l=[];for(var u=0;u<$s.text.length;u++)l.push(a.splitLines($s.text[u]))}}else c.length==r.ranges.length&&e.options.pasteLinesPerSelection&&(l=ge(c,function(e){return[e]}));for(var d=e.curOp.updateInput,f=r.ranges.length-1;f>=0;f--){var p=r.ranges[f],m=p.from(),h=p.to();p.empty()&&(n&&n>0?m=K(m.line,m.ch-n):e.state.overwrite&&!s?h=K(h.line,Math.min(G(a,h.line).text.length,h.ch+he(c).length)):s&&$s&&$s.lineWise&&$s.text.join(`
`)==c.join(`
`)&&(m=h=K(m.line,0)));var g={from:m,to:h,text:l?l[f%l.length]:c,origin:i||(s?`paste`:e.state.cutIncoming>o?`cut`:`+input`)};uo(e.doc,g),Bn(e,`inputRead`,e,g)}t&&!s&&rc(e,t),yi(e),e.curOp.updateInput<2&&(e.curOp.updateInput=d),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function nc(e,t){var n=e.clipboardData&&e.clipboardData.getData(`Text`);if(n)return e.preventDefault(),!t.isReadOnly()&&!t.options.disableInput&&t.hasFocus()&&Ui(t,function(){return tc(t,n,0,null,`paste`)}),!0}function rc(e,t){if(!(!e.options.electricChars||!e.options.smartIndent))for(var n=e.doc.sel,r=n.ranges.length-1;r>=0;r--){var i=n.ranges[r];if(!(i.head.ch>100||r&&n.ranges[r-1].head.line==i.head.line)){var a=e.getModeAt(i.head),o=!1;if(a.electricChars){for(var s=0;s<a.electricChars.length;s++)if(t.indexOf(a.electricChars.charAt(s))>-1){o=Qs(e,i.head.line,`smart`);break}}else a.electricInput&&a.electricInput.test(G(e.doc,i.head.line).text.slice(0,i.head.ch))&&(o=Qs(e,i.head.line,`smart`));o&&Bn(e,`electricInput`,e,i.head.line)}}}function ic(e){for(var t=[],n=[],r=0;r<e.doc.sel.ranges.length;r++){var i=e.doc.sel.ranges[r].head.line,a={anchor:K(i,0),head:K(i+1,0)};n.push(a),t.push(e.getRange(a.anchor,a.head))}return{text:t,ranges:n}}function ac(e,t,n,r){e.setAttribute(`autocorrect`,n?`on`:`off`),e.setAttribute(`autocapitalize`,r?`on`:`off`),e.setAttribute(`spellcheck`,!!t)}function oc(){var e=k(`textarea`,null,null,`position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none`),t=k(`div`,[e],null,`overflow: hidden; position: relative; width: 3px; height: 0px;`);return c?e.style.width=`1000px`:e.setAttribute(`wrap`,`off`),g&&(e.style.border=`1px solid black`),t}function sc(e){var t=e.optionHandlers,n=e.helpers={};e.prototype={constructor:e,focus:function(){F(this).focus(),this.display.input.focus()},setOption:function(e,n){var r=this.options,i=r[e];r[e]==n&&e!=`mode`||(r[e]=n,t.hasOwnProperty(e)&&Wi(this,t[e])(this,n,i),H(this,`optionChange`,this,e))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?`push`:`unshift`](J(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,n=0;n<t.length;++n)if(t[n]==e||t[n].name==e)return t.splice(n,1),!0},addOverlay:Gi(function(t,n){var r=t.token?t:e.getMode(this.options,t);if(r.startState)throw Error(`Overlays may not be stateful.`);_e(this.state.overlays,{mode:r,modeSpec:t,opaque:n&&n.opaque,priority:n&&n.priority||0},function(e){return e.priority}),this.state.modeGen++,Jr(this)}),removeOverlay:Gi(function(e){for(var t=this.state.overlays,n=0;n<t.length;++n){var r=t[n].modeSpec;if(r==e||typeof e==`string`&&r.name==e){t.splice(n,1),this.state.modeGen++,Jr(this);return}}}),indentLine:Gi(function(e,t,n){typeof t!=`string`&&typeof t!=`number`&&(t=t==null?this.options.smartIndent?`smart`:`prev`:t?`add`:`subtract`),gt(this.doc,e)&&Qs(this,e,t,n)}),indentSelection:Gi(function(e){for(var t=this.doc.sel.ranges,n=-1,r=0;r<t.length;r++){var i=t[r];if(i.empty())i.head.line>n&&(Qs(this,i.head.line,e,!0),n=i.head.line,r==this.doc.sel.primIndex&&yi(this));else{var a=i.from(),o=i.to(),s=Math.max(n,a.line);n=Math.min(this.lastLine(),o.line-(o.ch?0:1))+1;for(var c=s;c<n;++c)Qs(this,c,e);var l=this.doc.sel.ranges;a.ch==0&&t.length==l.length&&l[r].from().ch>0&&Xa(this.doc,r,new _a(a,l[r].to()),le)}}}),getTokenAt:function(e,t){return It(this,e,t)},getLineTokens:function(e,t){return It(this,K(e),t,!0)},getTokenTypeAt:function(e){e=wt(this.doc,e);var t=At(this,G(this.doc,e.line)),n=0,r=(t.length-1)/2,i=e.ch,a;if(i==0)a=t[2];else for(;;){var o=n+r>>1;if((o?t[o*2-1]:0)>=i)r=o;else if(t[o*2+1]<i)n=o+1;else{a=t[o*2+2];break}}var s=a?a.indexOf(`overlay `):-1;return s<0?a:s==0?null:a.slice(0,s-1)},getModeAt:function(t){var n=this.doc.mode;return n.innerMode?e.innerMode(n,this.getTokenAt(t).state).mode:n},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var r=[];if(!n.hasOwnProperty(t))return r;var i=n[t],a=this.getModeAt(e);if(typeof a[t]==`string`)i[a[t]]&&r.push(i[a[t]]);else if(a[t])for(var o=0;o<a[t].length;o++){var s=i[a[t][o]];s&&r.push(s)}else a.helperType&&i[a.helperType]?r.push(i[a.helperType]):i[a.name]&&r.push(i[a.name]);for(var c=0;c<i._global.length;c++){var l=i._global[c];l.pred(a,this)&&oe(r,l.val)==-1&&r.push(l.val)}return r},getStateAfter:function(e,t){var n=this.doc;return e=Ct(n,e??n.first+n.size-1),jt(this,e+1,t).state},cursorCoords:function(e,t){var n,r=this.doc.sel.primary();return n=e==null?r.head:typeof e==`object`?wt(this.doc,e):e?r.from():r.to(),kr(this,n,t||`page`)},charCoords:function(e,t){return Or(this,wt(this.doc,e),t||`page`)},coordsChar:function(e,t){return e=Dr(this,e,t||`page`),Mr(this,e.left,e.top)},lineAtHeight:function(e,t){return e=Dr(this,{top:e,left:0},t||`page`).top,ht(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,n){var r=!1,i;if(typeof e==`number`){var a=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>a&&(e=a,r=!0),i=G(this.doc,e)}else i=e;return Er(this,i,{top:0,left:0},t||`page`,n||r).top+(r?this.doc.height-vn(i):0)},defaultTextHeight:function(){return Br(this.display)},defaultCharWidth:function(){return Vr(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,n,r,i){var a=this.display;e=kr(this,wt(this.doc,e));var o=e.bottom,s=e.left;if(t.style.position=`absolute`,t.setAttribute(`cm-ignore-events`,`true`),this.display.input.setUneditable(t),a.sizer.appendChild(t),r==`over`)o=e.top;else if(r==`above`||r==`near`){var c=Math.max(a.wrapper.clientHeight,this.doc.height),l=Math.max(a.sizer.clientWidth,a.lineSpace.clientWidth);(r==`above`||e.bottom+t.offsetHeight>c)&&e.top>t.offsetHeight?o=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=c&&(o=e.bottom),s+t.offsetWidth>l&&(s=l-t.offsetWidth)}t.style.top=o+`px`,t.style.left=t.style.right=``,i==`right`?(s=a.sizer.clientWidth-t.offsetWidth,t.style.right=`0px`):(i==`left`?s=0:i==`middle`&&(s=(a.sizer.clientWidth-t.offsetWidth)/2),t.style.left=s+`px`),n&&gi(this,{left:s,top:o,right:s+t.offsetWidth,bottom:o+t.offsetHeight})},triggerOnKeyDown:Gi(xs),triggerOnKeyPress:Gi(ws),triggerOnKeyUp:Cs,triggerOnMouseDown:Gi(As),execCommand:function(e){if(us.hasOwnProperty(e))return us[e].call(null,this)},triggerElectric:Gi(function(e){rc(this,e)}),findPosH:function(e,t,n,r){var i=1;t<0&&(i=-1,t=-t);for(var a=wt(this.doc,e),o=0;o<t&&(a=cc(this.doc,a,i,n,r),!a.hitSide);++o);return a},moveH:Gi(function(e,t){var n=this;this.extendSelectionsBy(function(r){return n.display.shift||n.doc.extend||r.empty()?cc(n.doc,r.head,e,t,n.options.rtlMoveVisually):e<0?r.from():r.to()},de)}),deleteH:Gi(function(e,t){var n=this.doc.sel,r=this.doc;n.somethingSelected()?r.replaceSelection(``,null,`+delete`):os(this,function(n){var i=cc(r,n.head,e,t,!1);return e<0?{from:i,to:n.head}:{from:n.head,to:i}})}),findPosV:function(e,t,n,r){var i=1,a=r;t<0&&(i=-1,t=-t);for(var o=wt(this.doc,e),s=0;s<t;++s){var c=kr(this,o,`div`);if(a==null?a=c.left:c.left=a,o=lc(this,c,i,n),o.hitSide)break}return o},moveV:Gi(function(e,t){var n=this,r=this.doc,i=[],a=!this.display.shift&&!r.extend&&r.sel.somethingSelected();if(r.extendSelectionsBy(function(o){if(a)return e<0?o.from():o.to();var s=kr(n,o.head,`div`);o.goalColumn!=null&&(s.left=o.goalColumn),i.push(s.left);var c=lc(n,s,e,t);return t==`page`&&o==r.sel.primary()&&vi(n,Or(n,c,`div`).top-s.top),c},de),i.length)for(var o=0;o<r.sel.ranges.length;o++)r.sel.ranges[o].goalColumn=i[o]}),findWordAt:function(e){var t=this.doc,n=G(t,e.line).text,r=e.ch,i=e.ch;if(n){var a=this.getHelper(e,`wordChars`);(e.sticky==`before`||i==n.length)&&r?--r:++i;for(var o=n.charAt(r),s=Se(o,a)?function(e){return Se(e,a)}:/\s/.test(o)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!Se(e)};r>0&&s(n.charAt(r-1));)--r;for(;i<n.length&&s(n.charAt(i));)++i}return new _a(K(e.line,r),K(e.line,i))},toggleOverwrite:function(e){e!=null&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?ne(this.display.cursorDiv,`CodeMirror-overwrite`):E(this.display.cursorDiv,`CodeMirror-overwrite`),H(this,`overwriteToggle`,this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==j(N(this))},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:Gi(function(e,t){bi(this,e,t)}),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-ar(this)-this.display.barHeight,width:e.scrollWidth-ar(this)-this.display.barWidth,clientHeight:sr(this),clientWidth:or(this)}},scrollIntoView:Gi(function(e,t){e==null?(e={from:this.doc.sel.primary().head,to:null},t??=this.options.cursorScrollMargin):typeof e==`number`?e={from:K(e,0),to:null}:e.from??(e={from:e,to:null}),e.to||=e.from,e.margin=t||0,e.from.line==null?Ci(this,e.from,e.to,e.margin):xi(this,e)}),setSize:Gi(function(e,t){var n=this,r=function(e){return typeof e==`number`||/^\d+$/.test(String(e))?e+`px`:e};e!=null&&(this.display.wrapper.style.width=r(e)),t!=null&&(this.display.wrapper.style.height=r(t)),this.options.lineWrapping&&xr(this);var i=this.display.viewFrom;this.doc.iter(i,this.display.viewTo,function(e){if(e.widgets){for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){Yr(n,i,`widget`);break}}++i}),this.curOp.forceUpdate=!0,H(this,`refresh`,this)}),operation:function(e){return Ui(this,e)},startOperation:function(){return Fi(this)},endOperation:function(){return Ii(this)},refresh:Gi(function(){var e=this.display.cachedTextHeight;Jr(this),this.curOp.forceUpdate=!0,Sr(this),bi(this,this.doc.scrollLeft,this.doc.scrollTop),ra(this.display),(e==null||Math.abs(e-Br(this.display))>.5||this.options.lineWrapping)&&Gr(this),H(this,`refresh`,this)}),swapDoc:Gi(function(e){var t=this.doc;return t.cm=null,this.state.selectingText&&this.state.selectingText(),Aa(this,e),Sr(this),this.display.input.reset(),bi(this,e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,Bn(this,`swapDoc`,this,t),t}),phrase:function(e){var t=this.options.phrases;return t&&Object.prototype.hasOwnProperty.call(t,e)?t[e]:e},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Le(e),e.registerHelper=function(t,r,i){n.hasOwnProperty(t)||(n[t]=e[t]={_global:[]}),n[t][r]=i},e.registerGlobalHelper=function(t,r,i,a){e.registerHelper(t,r,a),n[t]._global.push({pred:i,val:a})}}function cc(e,t,n,r,i){var a=t,o=n,s=G(e,t.line),c=i&&e.direction==`rtl`?-n:n;function l(){var n=t.line+c;return n<e.first||n>=e.first+e.size?!1:(t=new K(n,t.ch,t.sticky),s=G(e,n))}function u(a){var o;if(r==`codepoint`){var u=s.text.charCodeAt(t.ch+(n>0?0:-1));if(isNaN(u))o=null;else{var d=n>0?u>=55296&&u<56320:u>=56320&&u<57343;o=new K(t.line,Math.max(0,Math.min(s.text.length,t.ch+n*(d?2:1))),-n)}}else o=i?Y(e.cm,s,t,n):cs(s,t,n);if(o==null)if(!a&&l())t=ls(i,e.cm,s,t.line,c);else return!1;else t=o;return!0}if(r==`char`||r==`codepoint`)u();else if(r==`column`)u(!0);else if(r==`word`||r==`group`)for(var d=null,f=r==`group`,p=e.cm&&e.cm.getHelper(t,`wordChars`),m=!0;!(n<0&&!u(!m));m=!1){var h=s.text.charAt(t.ch)||`
`,g=Se(h,p)?`w`:f&&h==`
`?`n`:!f||/\s/.test(h)?null:`p`;if(f&&!m&&!g&&(g=`s`),d&&d!=g){n<0&&(n=1,u(),t.sticky=`after`);break}if(g&&(d=g),n>0&&!u(!m))break}var _=oo(e,t,a,o,!0);return yt(a,_)&&(_.hitSide=!0),_}function lc(e,t,n,r){var i=e.doc,a=t.left,o;if(r==`page`){var s=Math.min(e.display.wrapper.clientHeight,F(e).innerHeight||i(e).documentElement.clientHeight),c=Math.max(s-.5*Br(e.display),3);o=(n>0?t.bottom:t.top)+n*c}else r==`line`&&(o=n>0?t.bottom+3:t.top-3);for(var l;l=Mr(e,a,o),l.outside;){if(n<0?o<=0:o>=i.height){l.hitSide=!0;break}o+=n*5}return l}var uc=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new ae,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};uc.prototype.init=function(e){var t=this,n=this,r=n.cm,i=n.div=e.lineDiv;i.contentEditable=!0,ac(i,r.options.spellcheck,r.options.autocorrect,r.options.autocapitalize);function a(e){for(var t=e.target;t;t=t.parentNode){if(t==i)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(t.className))break}return!1}z(i,`paste`,function(e){!a(e)||U(r,e)||nc(e,r)||s<=11&&setTimeout(Wi(r,function(){return t.updateFromDOM()}),20)}),z(i,`compositionstart`,function(e){t.composing={data:e.data,done:!1}}),z(i,`compositionupdate`,function(e){t.composing||={data:e.data,done:!1}}),z(i,`compositionend`,function(e){t.composing&&(e.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)}),z(i,`touchstart`,function(){return n.forceCompositionEnd()}),z(i,`input`,function(){t.composing||t.readFromDOMSoon()});function o(e){if(!(!a(e)||U(r,e))){if(r.somethingSelected())ec({lineWise:!1,text:r.getSelections()}),e.type==`cut`&&r.replaceSelection(``,null,`cut`);else if(r.options.lineWiseCopyCut){var t=ic(r);ec({lineWise:!0,text:t.text}),e.type==`cut`&&r.operation(function(){r.setSelections(t.ranges,0,le),r.replaceSelection(``,null,`cut`)})}else return;if(e.clipboardData){e.clipboardData.clearData();var o=$s.text.join(`
`);if(e.clipboardData.setData(`Text`,o),e.clipboardData.getData(`Text`)==o){e.preventDefault();return}}var s=oc(),c=s.firstChild;ac(c),r.display.lineSpace.insertBefore(s,r.display.lineSpace.firstChild),c.value=$s.text.join(`
`);var l=j(P(i));ie(c),setTimeout(function(){r.display.lineSpace.removeChild(s),l.focus(),l==i&&n.showPrimarySelection()},50)}}z(i,`copy`,o),z(i,`cut`,o)},uc.prototype.screenReaderLabelChanged=function(e){e?this.div.setAttribute(`aria-label`,e):this.div.removeAttribute(`aria-label`)},uc.prototype.prepareSelection=function(){var e=ti(this.cm,!1);return e.focus=j(P(this.div))==this.div,e},uc.prototype.showSelection=function(e,t){!e||!this.cm.display.view.length||((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},uc.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},uc.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,r=t.doc.sel.primary(),i=r.from(),a=r.to();if(t.display.viewTo==t.display.viewFrom||i.line>=t.display.viewTo||a.line<t.display.viewFrom){e.removeAllRanges();return}var o=hc(t,e.anchorNode,e.anchorOffset),s=hc(t,e.focusNode,e.focusOffset);if(!(o&&!o.bad&&s&&!s.bad&&vt(St(o,s),i)==0&&vt(xt(o,s),a)==0)){var c=t.display.view,l=i.line>=t.display.viewFrom&&dc(t,i)||{node:c[0].measure.map[2],offset:0},u=a.line<t.display.viewTo&&dc(t,a);if(!u){var d=c[c.length-1].measure,f=d.maps?d.maps[d.maps.length-1]:d.map;u={node:f[f.length-1],offset:f[f.length-2]-f[f.length-3]}}if(!l||!u){e.removeAllRanges();return}var p=e.rangeCount&&e.getRangeAt(0),m;try{m=ee(l.node,l.offset,u.offset,u.node)}catch{}m&&(!n&&t.state.focused?(e.collapse(l.node,l.offset),m.collapsed||(e.removeAllRanges(),e.addRange(m))):(e.removeAllRanges(),e.addRange(m)),p&&e.anchorNode==null?e.addRange(p):n&&this.startGracePeriod()),this.rememberSelection()}},uc.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},uc.prototype.showMultipleSelections=function(e){O(this.cm.display.cursorDiv,e.cursors),O(this.cm.display.selectionDiv,e.selection)},uc.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},uc.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return te(this.div,t)},uc.prototype.focus=function(){this.cm.options.readOnly!=`nocursor`&&((!this.selectionInEditor()||j(P(this.div))!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},uc.prototype.blur=function(){this.div.blur()},uc.prototype.getField=function(){return this.div},uc.prototype.supportsTouch=function(){return!0},uc.prototype.receivedFocus=function(){var e=this,t=this;this.selectionInEditor()?setTimeout(function(){return e.pollSelection()},20):Ui(this.cm,function(){return t.cm.curOp.selectionChanged=!0});function n(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,n))}this.polling.set(this.cm.options.pollInterval,n)},uc.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},uc.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var e=this.getSelection(),t=this.cm;if(_&&u&&this.cm.display.gutterSpecs.length&&fc(e.anchorNode)){this.cm.triggerOnKeyDown({type:`keydown`,keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var n=hc(t,e.anchorNode,e.anchorOffset),r=hc(t,e.focusNode,e.focusOffset);n&&r&&Ui(t,function(){eo(t.doc,ya(n,r),le),(n.bad||r.bad)&&(t.curOp.selectionChanged=!0)})}}},uc.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e=this.cm,t=e.display,n=e.doc.sel.primary(),r=n.from(),i=n.to();if(r.ch==0&&r.line>e.firstLine()&&(r=K(r.line-1,G(e.doc,r.line-1).length)),i.ch==G(e.doc,i.line).text.length&&i.line<e.lastLine()&&(i=K(i.line+1,0)),r.line<t.viewFrom||i.line>t.viewTo-1)return!1;var a,o,s;r.line==t.viewFrom||(a=qr(e,r.line))==0?(o=mt(t.view[0].line),s=t.view[0].node):(o=mt(t.view[a].line),s=t.view[a-1].node.nextSibling);var c=qr(e,i.line),l,u;if(c==t.view.length-1?(l=t.viewTo-1,u=t.lineDiv.lastChild):(l=mt(t.view[c+1].line)-1,u=t.view[c+1].node.previousSibling),!s)return!1;for(var d=e.doc.splitLines(mc(e,s,u,o,l)),f=dt(e.doc,K(o,0),K(l,G(e.doc,l).text.length));d.length>1&&f.length>1;)if(he(d)==he(f))d.pop(),f.pop(),l--;else if(d[0]==f[0])d.shift(),f.shift(),o++;else break;for(var p=0,m=0,h=d[0],g=f[0],_=Math.min(h.length,g.length);p<_&&h.charCodeAt(p)==g.charCodeAt(p);)++p;for(var v=he(d),y=he(f),b=Math.min(v.length-(d.length==1?p:0),y.length-(f.length==1?p:0));m<b&&v.charCodeAt(v.length-m-1)==y.charCodeAt(y.length-m-1);)++m;if(d.length==1&&f.length==1&&o==r.line)for(;p&&p>r.ch&&v.charCodeAt(v.length-m-1)==y.charCodeAt(y.length-m-1);)p--,m++;d[d.length-1]=v.slice(0,v.length-m).replace(/^\u200b+/,``),d[0]=d[0].slice(p).replace(/\u200b+$/,``);var x=K(o,p),S=K(l,f.length?he(f).length-m:0);if(d.length>1||d[0]||vt(x,S))return _o(e.doc,d,x,S,`+input`),!0},uc.prototype.ensurePolled=function(){this.forceCompositionEnd()},uc.prototype.reset=function(){this.forceCompositionEnd()},uc.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},uc.prototype.readFromDOMSoon=function(){var e=this;this.readDOMTimeout??=setTimeout(function(){if(e.readDOMTimeout=null,e.composing)if(e.composing.done)e.composing=null;else return;e.updateFromDOM()},80)},uc.prototype.updateFromDOM=function(){var e=this;(this.cm.isReadOnly()||!this.pollContent())&&Ui(this.cm,function(){return Jr(e.cm)})},uc.prototype.setUneditable=function(e){e.contentEditable=`false`},uc.prototype.onKeyPress=function(e){e.charCode==0||this.composing||(e.preventDefault(),this.cm.isReadOnly()||Wi(this.cm,tc)(this.cm,String.fromCharCode(e.charCode==null?e.keyCode:e.charCode),0))},uc.prototype.readOnlyChanged=function(e){this.div.contentEditable=String(e!=`nocursor`)},uc.prototype.onContextMenu=function(){},uc.prototype.resetPosition=function(){},uc.prototype.needsContentAttribute=!0;function dc(e,t){var n=fr(e,t.line);if(!n||n.hidden)return null;var r=G(e.doc,t.line),i=lr(n,r,t.line),a=Me(r,e.doc.direction),o=`left`;a&&(o=Ae(a,t.ch)%2?`right`:`left`);var s=gr(i.map,t.ch,o);return s.offset=s.collapse==`right`?s.end:s.start,s}function fc(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}function pc(e,t){return t&&(e.bad=!0),e}function mc(e,t,n,r,i){var a=``,o=!1,s=e.doc.lineSeparator(),c=!1;function l(e){return function(t){return t.id==e}}function u(){o&&=(a+=s,c&&(a+=s),c=!1)}function d(e){e&&(u(),a+=e)}function f(t){if(t.nodeType==1){var n=t.getAttribute(`cm-text`);if(n){d(n);return}var a=t.getAttribute(`cm-marker`),p;if(a){var m=e.findMarks(K(r,0),K(i+1,0),l(+a));m.length&&(p=m[0].find(0))&&d(dt(e.doc,p.from,p.to).join(s));return}if(t.getAttribute(`contenteditable`)==`false`)return;var h=/^(pre|div|p|li|table|br)$/i.test(t.nodeName);if(!/^br$/i.test(t.nodeName)&&t.textContent.length==0)return;h&&u();for(var g=0;g<t.childNodes.length;g++)f(t.childNodes[g]);/^(pre|p)$/i.test(t.nodeName)&&(c=!0),h&&(o=!0)}else t.nodeType==3&&d(t.nodeValue.replace(/\u200b/g,``).replace(/\u00a0/g,` `))}for(;f(t),t!=n;)t=t.nextSibling,c=!1;return a}function hc(e,t,n){var r;if(t==e.display.lineDiv){if(r=e.display.lineDiv.childNodes[n],!r)return pc(e.clipPos(K(e.display.viewTo-1)),!0);t=null,n=0}else for(r=t;;r=r.parentNode){if(!r||r==e.display.lineDiv)return null;if(r.parentNode&&r.parentNode==e.display.lineDiv)break}for(var i=0;i<e.display.view.length;i++){var a=e.display.view[i];if(a.node==r)return gc(a,t,n)}}function gc(e,t,n){var r=e.text.firstChild,i=!1;if(!t||!te(r,t))return pc(K(mt(e.line),0),!0);if(t==r&&(i=!0,t=r.childNodes[n],n=0,!t)){var a=e.rest?he(e.rest):e.line;return pc(K(mt(a),a.text.length),i)}var o=t.nodeType==3?t:null,s=t;for(!o&&t.childNodes.length==1&&t.firstChild.nodeType==3&&(o=t.firstChild,n&&=o.nodeValue.length);s.parentNode!=r;)s=s.parentNode;var c=e.measure,l=c.maps;function u(t,n,r){for(var i=-1;i<(l?l.length:0);i++)for(var a=i<0?c.map:l[i],o=0;o<a.length;o+=3){var s=a[o+2];if(s==t||s==n){var u=mt(i<0?e.line:e.rest[i]),d=a[o]+r;return(r<0||s!=t)&&(d=a[o+(r?1:0)]),K(u,d)}}}var d=u(o,s,n);if(d)return pc(d,i);for(var f=s.nextSibling,p=o?o.nodeValue.length-n:0;f;f=f.nextSibling){if(d=u(f,f.firstChild,0),d)return pc(K(d.line,d.ch-p),i);p+=f.textContent.length}for(var m=s.previousSibling,h=n;m;m=m.previousSibling){if(d=u(m,m.firstChild,-1),d)return pc(K(d.line,d.ch+h),i);h+=m.textContent.length}}var _c=function(e){this.cm=e,this.prevInput=``,this.pollingFast=!1,this.polling=new ae,this.hasSelection=!1,this.composing=null,this.resetting=!1};_c.prototype.init=function(e){var t=this,n=this,r=this.cm;this.createField(e);var i=this.textarea;e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),g&&(i.style.width=`0px`),z(i,`input`,function(){o&&s>=9&&t.hasSelection&&(t.hasSelection=null),n.poll()}),z(i,`paste`,function(e){U(r,e)||nc(e,r)||(r.state.pasteIncoming=+new Date,n.fastPoll())});function a(e){if(!U(r,e)){if(r.somethingSelected())ec({lineWise:!1,text:r.getSelections()});else if(r.options.lineWiseCopyCut){var t=ic(r);ec({lineWise:!0,text:t.text}),e.type==`cut`?r.setSelections(t.ranges,null,le):(n.prevInput=``,i.value=t.text.join(`
`),ie(i))}else return;e.type==`cut`&&(r.state.cutIncoming=+new Date)}}z(i,`cut`,a),z(i,`copy`,a),z(e.scroller,`paste`,function(t){if(!(tr(e,t)||U(r,t))){if(!i.dispatchEvent){r.state.pasteIncoming=+new Date,n.focus();return}var a=new Event(`paste`);a.clipboardData=t.clipboardData,i.dispatchEvent(a)}}),z(e.lineSpace,`selectstart`,function(t){tr(e,t)||Re(t)}),z(i,`compositionstart`,function(){var e=r.getCursor(`from`);n.composing&&n.composing.range.clear(),n.composing={start:e,range:r.markText(e,r.getCursor(`to`),{className:`CodeMirror-composing`})}}),z(i,`compositionend`,function(){n.composing&&=(n.poll(),n.composing.range.clear(),null)})},_c.prototype.createField=function(e){this.wrapper=oc(),this.textarea=this.wrapper.firstChild;var t=this.cm.options;ac(this.textarea,t.spellcheck,t.autocorrect,t.autocapitalize)},_c.prototype.screenReaderLabelChanged=function(e){e?this.textarea.setAttribute(`aria-label`,e):this.textarea.removeAttribute(`aria-label`)},_c.prototype.prepareSelection=function(){var e=this.cm,t=e.display,n=e.doc,r=ti(e);if(e.options.moveInputWithCursor){var i=kr(e,n.sel.primary().head,`div`),a=t.wrapper.getBoundingClientRect(),o=t.lineDiv.getBoundingClientRect();r.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,i.top+o.top-a.top)),r.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,i.left+o.left-a.left))}return r},_c.prototype.showSelection=function(e){var t=this.cm,n=t.display;O(n.cursorDiv,e.cursors),O(n.selectionDiv,e.selection),e.teTop!=null&&(this.wrapper.style.top=e.teTop+`px`,this.wrapper.style.left=e.teLeft+`px`)},_c.prototype.reset=function(e){if(!(this.contextMenuPending||this.composing&&e)){var t=this.cm;if(this.resetting=!0,t.somethingSelected()){this.prevInput=``;var n=t.getSelection();this.textarea.value=n,t.state.focused&&ie(this.textarea),o&&s>=9&&(this.hasSelection=n)}else e||(this.prevInput=this.textarea.value=``,o&&s>=9&&(this.hasSelection=null));this.resetting=!1}},_c.prototype.getField=function(){return this.textarea},_c.prototype.supportsTouch=function(){return!1},_c.prototype.focus=function(){if(this.cm.options.readOnly!=`nocursor`&&(!v||j(P(this.textarea))!=this.textarea))try{this.textarea.focus()}catch{}},_c.prototype.blur=function(){this.textarea.blur()},_c.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},_c.prototype.receivedFocus=function(){this.slowPoll()},_c.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},_c.prototype.fastPoll=function(){var e=!1,t=this;t.pollingFast=!0;function n(){!t.poll()&&!e?(e=!0,t.polling.set(60,n)):(t.pollingFast=!1,t.slowPoll())}t.polling.set(20,n)},_c.prototype.poll=function(){var e=this,t=this.cm,n=this.textarea,r=this.prevInput;if(this.contextMenuPending||this.resetting||!t.state.focused||Ye(n)&&!r&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var i=n.value;if(i==r&&!t.somethingSelected())return!1;if(o&&s>=9&&this.hasSelection===i||y&&/[\uf700-\uf7ff]/.test(i))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var a=i.charCodeAt(0);if(a==8203&&!r&&(r=`​`),a==8666)return this.reset(),this.cm.execCommand(`undo`)}for(var c=0,l=Math.min(r.length,i.length);c<l&&r.charCodeAt(c)==i.charCodeAt(c);)++c;return Ui(t,function(){tc(t,i.slice(c),r.length-c,null,e.composing?`*compose`:null),i.length>1e3||i.indexOf(`
`)>-1?n.value=e.prevInput=``:e.prevInput=i,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor(`to`),{className:`CodeMirror-composing`}))}),!0},_c.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},_c.prototype.onKeyPress=function(){o&&s>=9&&(this.hasSelection=null),this.fastPoll()},_c.prototype.onContextMenu=function(e){var t=this,n=t.cm,r=n.display,i=t.textarea;t.contextMenuPending&&t.contextMenuPending();var a=Kr(n,e),l=r.scroller.scrollTop;if(!a||f)return;n.options.resetSelectionOnContextMenu&&n.doc.sel.contains(a)==-1&&Wi(n,eo)(n.doc,ya(a),le);var u=i.style.cssText,d=t.wrapper.style.cssText,p=t.wrapper.offsetParent.getBoundingClientRect();t.wrapper.style.cssText=`position: static`,i.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(e.clientY-p.top-5)+`px; left: `+(e.clientX-p.left-5)+`px;
      z-index: 1000; background: `+(o?`rgba(255, 255, 255, .05)`:`transparent`)+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var m;c&&(m=i.ownerDocument.defaultView.scrollY),r.input.focus(),c&&i.ownerDocument.defaultView.scrollTo(null,m),r.input.reset(),n.somethingSelected()||(i.value=t.prevInput=` `),t.contextMenuPending=g,r.selForContextMenu=n.doc.sel,clearTimeout(r.detectingSelectAll);function h(){if(i.selectionStart!=null){var e=n.somethingSelected(),a=`​`+(e?i.value:``);i.value=`⇚`,i.value=a,t.prevInput=e?``:`​`,i.selectionStart=1,i.selectionEnd=a.length,r.selForContextMenu=n.doc.sel}}function g(){if(t.contextMenuPending==g&&(t.contextMenuPending=!1,t.wrapper.style.cssText=d,i.style.cssText=u,o&&s<9&&r.scrollbars.setScrollTop(r.scroller.scrollTop=l),i.selectionStart!=null)){(!o||o&&s<9)&&h();var e=0,a=function(){r.selForContextMenu==n.doc.sel&&i.selectionStart==0&&i.selectionEnd>0&&t.prevInput==`​`?Wi(n,co)(n):e++<10?r.detectingSelectAll=setTimeout(a,500):(r.selForContextMenu=null,r.input.reset())};r.detectingSelectAll=setTimeout(a,200)}}if(o&&s>=9&&h(),w){W(e);var _=function(){B(window,`mouseup`,_),setTimeout(g,20)};z(window,`mouseup`,_)}else setTimeout(g,50)},_c.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled=e==`nocursor`,this.textarea.readOnly=!!e},_c.prototype.setUneditable=function(){},_c.prototype.needsContentAttribute=!1;function vc(e,t){if(t=t?L(t):{},t.value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),t.autofocus==null){var n=j(P(e));t.autofocus=n==e||e.getAttribute(`autofocus`)!=null&&n==document.body}function r(){e.value=s.getValue()}var i;if(e.form&&(z(e.form,`submit`,r),!t.leaveSubmitMethodAlone)){var a=e.form;i=a.submit;try{var o=a.submit=function(){r(),a.submit=i,a.submit(),a.submit=o}}catch{}}t.finishInit=function(n){n.save=r,n.getTextArea=function(){return e},n.toTextArea=function(){n.toTextArea=isNaN,r(),e.parentNode.removeChild(n.getWrapperElement()),e.style.display=``,e.form&&(B(e.form,`submit`,r),!t.leaveSubmitMethodAlone&&typeof e.form.submit==`function`&&(e.form.submit=i))}},e.style.display=`none`;var s=Ys(function(t){return e.parentNode.insertBefore(t,e.nextSibling)},t);return s}function yc(e){e.off=B,e.on=z,e.wheelEventPixels=ma,e.Doc=Io,e.splitLines=Je,e.countColumn=R,e.findColumn=fe,e.isWordChar=xe,e.Pass=ce,e.signal=H,e.Line=xn,e.changeEnd=ba,e.scrollbarModel=Mi,e.Pos=K,e.cmpPos=vt,e.modes=$e,e.mimeModes=et,e.resolveMode=rt,e.getMode=it,e.modeExtensions=at,e.extendMode=ot,e.copyState=st,e.startState=lt,e.innerMode=ct,e.commands=us,e.keyMap=Zo,e.keyName=rs,e.isModifierKey=ts,e.lookupKey=es,e.normalizeKeyMap=$o,e.StringStream=ut,e.SharedTextMarker=Ao,e.TextMarker=Oo,e.LineWidget=wo,e.e_preventDefault=Re,e.e_stopPropagation=ze,e.e_stop=W,e.addClass=ne,e.contains=te,e.rmClass=E,e.keyNames=qo}Ks(Ys),sc(Ys);var bc=`iter insert remove copy getEditor constructor`.split(` `);for(var xc in Io.prototype)Io.prototype.hasOwnProperty(xc)&&oe(bc,xc)<0&&(Ys.prototype[xc]=(function(e){return function(){return e.apply(this.doc,arguments)}})(Io.prototype[xc]));return Le(Io),Ys.inputStyles={textarea:_c,contenteditable:uc},Ys.defineMode=function(e){!Ys.defaults.mode&&e!=`null`&&(Ys.defaults.mode=e),tt.apply(this,arguments)},Ys.defineMIME=nt,Ys.defineMode(`null`,function(){return{token:function(e){return e.skipToEnd()}}}),Ys.defineMIME(`text/plain`,`null`),Ys.defineExtension=function(e,t){Ys.prototype[e]=t},Ys.defineDocExtension=function(e,t){Io.prototype[e]=t},Ys.fromTextArea=vc,yc(Ys),Ys.version=`5.65.20`,Ys}))})),xe=e(be());function Se(e,t){if(!(e instanceof t))throw TypeError(`Cannot call a class as a function`)}function Ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,`value`in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function we(e,t,n){return t&&Ce(e.prototype,t),n&&Ce(e,n),Object.defineProperty(e,`prototype`,{writable:!1}),e}var Te=function(){function e(t){Se(this,e),this.map=new Map,this.first=void 0,this.last=void 0,this.maxSize=t}return we(e,[{key:`size`,get:function(){return this.map.size}},{key:`get`,value:function(e){var t=this.map.get(e);if(t!==void 0)return t!==this.first&&(t===this.last?(this.last=t.prev,this.last.next=void 0):(t.prev.next=t.next,t.next.prev=t.prev),t.next=this.first,this.first.prev=t,this.first=t),t.value}},{key:`set`,value:function(e,t){if(!(this.maxSize<1)){if(this.map.has(e))throw Error(`Cannot update existing keys in the cache`);var n=new Ee(e,t);for(this.first===void 0?(this.first=n,this.last=n):(n.next=this.first,this.first.prev=n,this.first=n),this.map.set(e,n);this.map.size>this.maxSize;){var r=this.last;this.map.delete(r.key),this.last=r.prev,this.last.next=void 0}}}}]),e}(),Ee=we(function e(t,n){Se(this,e),this.next=void 0,this.prev=void 0,this.key=t,this.value=n}),De=9e15,Oe=Math.log10(9e15),ke=1/9e15,Ae=-324,je=1023,Me=function(){for(var e=[],t=Ae+1;t<=308;t++)e.push(Number(`1e`+t));var n=323;return function(t){return e[t+n]}}(),Ne=[2,Math.E,3,4,5,6,7,8,9,10],z=[[1,1.0891180521811203,1.1789767925673957,1.2701455431742086,1.3632090180450092,1.4587818160364217,1.5575237916251419,1.6601571006859253,1.767485818836978,1.8804192098842727,2],[1,1.1121114330934079,1.231038924931609,1.3583836963111375,1.4960519303993531,1.6463542337511945,1.8121385357018724,1.996971324618307,2.2053895545527546,2.4432574483385254,Math.E],[1,1.1187738849693603,1.2464963939368214,1.38527004705667,1.5376664685821402,1.7068895236551784,1.897001227148399,2.1132403089001035,2.362480153784171,2.6539010333870774,3],[1,1.1367350847096405,1.2889510672956703,1.4606478703324786,1.6570295196661111,1.8850062585672889,2.1539465047453485,2.476829779693097,2.872061932789197,3.3664204535587183,4],[1,1.1494592900767588,1.319708228183931,1.5166291280087583,1.748171114438024,2.0253263297298045,2.3636668498288547,2.7858359149579424,3.3257226212448145,4.035730287722532,5],[1,1.159225940787673,1.343712473580932,1.5611293155111927,1.8221199554561318,2.14183924486326,2.542468319282638,3.0574682501653316,3.7390572020926873,4.6719550537360774,6],[1,1.1670905356972596,1.3632807444991446,1.5979222279405536,1.8842640123816674,2.2416069644878687,2.69893426559423,3.3012632110403577,4.121250340630164,5.281493033448316,7],[1,1.1736630594087796,1.379783782386201,1.6292821855668218,1.9378971836180754,2.3289975651071977,2.8384347394720835,3.5232708454565906,4.478242031114584,5.868592169644505,8],[1,1.1793017514670474,1.394054150657457,1.65664127441059,1.985170999970283,2.4069682290577457,2.9647310119960752,3.7278665320924946,4.814462547283592,6.436522247411611,9],[1,1.1840100246247336,1.4061375836156955,1.6802272208863964,2.026757028388619,2.4770056063449646,3.080525271755482,3.9191964192627284,5.135152840833187,6.989961179534715,10]],Pe=[[-1,-.9194161097107025,-.8335625019330468,-.7425599821143978,-.6466611521029437,-.5462617907227869,-.4419033816638769,-.3342645487554494,-.224140440909962,-.11241087890006762,0],[-1,-.90603157029014,-.80786507256596,-.7064666939634,-.60294836853664,-.49849837513117,-.39430303318768,-.29147201034755,-.19097820800866,-.09361896280296,0],[-1,-.9021579584316141,-.8005762598234203,-.6964780623319391,-.5911906810998454,-.486050182576545,-.3823089430815083,-.28106046722897615,-.1831906535795894,-.08935809204418144,0],[-1,-.8917227442365535,-.781258746326964,-.6705130326902455,-.5612813129406509,-.4551067709033134,-.35319256652135966,-.2563741554088552,-.1651412821106526,-.0796919581982668,0],[-1,-.8843387974366064,-.7678744063886243,-.6529563724510552,-.5415870994657841,-.4352842206588936,-.33504449124791424,-.24138853420685147,-.15445285440944467,-.07409659641336663,0],[-1,-.8786709358426346,-.7577735191184886,-.6399546189952064,-.527284921869926,-.4211627631006314,-.3223479611761232,-.23107655627789858,-.1472057700818259,-.07035171210706326,0],[-1,-.8740862815291583,-.7497032990976209,-.6297119746181752,-.5161838335958787,-.41036238255751956,-.31277212146489963,-.2233976621705518,-.1418697367979619,-.06762117662323441,0],[-1,-.8702632331800649,-.7430366914122081,-.6213373075161548,-.5072025698095242,-.40171437727184167,-.30517930701410456,-.21736343968190863,-.137710238299109,-.06550774483471955,0],[-1,-.8670016295947213,-.7373984232432306,-.6143173985094293,-.49973884395492807,-.394584953527678,-.2989649949848695,-.21245647317021688,-.13434688362382652,-.0638072667348083,0],[-1,-.8641642839543857,-.732534623168535,-.6083127477059322,-.4934049257184696,-.3885773075899922,-.29376029055315767,-.2083678561173622,-.13155653399373268,-.062401588652553186,0]],B=function(e){return W.fromValue_noAlloc(e)},H=function(e,t,n){return W.fromComponents(e,t,n)},U=function(e,t,n){return W.fromComponents_noNormalize(e,t,n)},Fe=function(e,t){var n=t+1,r=Math.ceil(Math.log10(Math.abs(e))),i=Math.round(e*10**(n-r))*10**(r-n);return parseFloat(i.toFixed(Math.max(n-r,0)))},Ie=function(e){return Math.sign(e)*Math.log10(Math.abs(e))},Le=function(e){if(!isFinite(e))return e;if(e<-50)return e===Math.trunc(e)?-1/0:0;for(var t=1;e<10;)t*=e,++e;--e;var n=.9189385332046727;n+=(e+.5)*Math.log(e),n-=e;var r=e*e,i=e;return n+=1/(12*i),i*=r,n-=1/(360*i),i*=r,n+=1/(1260*i),i*=r,n-=1/(1680*i),i*=r,n+=1/(1188*i),i*=r,n-=691/(360360*i),i*=r,n+=7/(1092*i),i*=r,n-=3617/(122400*i),Math.exp(n)/t},Re=.5671432904097838,ze=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e-10,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r,i;if(!Number.isFinite(e))return e;if(n){if(e===0)return e;if(e===1)return Re;r=e<10?0:Math.log(e)-Math.log(Math.log(e))}else{if(e===0)return-1/0;r=e<=-.1?-2:Math.log(-e)-Math.log(-Math.log(-e))}for(var a=0;a<100;++a){if(i=(e*Math.exp(-r)+r*r)/(r+1),Math.abs(i-r)<t*Math.abs(i))return i;r=i}throw Error(`Iteration failed to converge: ${e.toString()}`)};function Be(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e-10,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r,i,a,o;if(!Number.isFinite(e.mag))return new W(e);if(n){if(e.eq(W.dZero))return U(0,0,0);if(e.eq(W.dOne))return W.fromNumber(Re);r=W.ln(e)}else{if(e.eq(W.dZero))return new W(W.dNegInf);r=W.ln(e.neg())}for(var s=0;s<100;++s){if(i=r.neg().exp(),a=r.sub(e.mul(i)),o=r.sub(a.div(r.add(1).sub(r.add(2).mul(a).div(W.mul(2,r).add(2))))),W.abs(o.sub(r)).lt(W.abs(o).mul(t)))return o;r=o}throw Error(`Iteration failed to converge: ${e.toString()}`)}var W=function(){function e(t){Se(this,e),this.sign=0,this.mag=0,this.layer=0,t instanceof e?this.fromDecimal(t):typeof t==`number`?this.fromNumber(t):typeof t==`string`&&this.fromString(t)}return we(e,[{key:`m`,get:function(){if(this.sign===0)return 0;if(this.layer===0){var e=Math.floor(Math.log10(this.mag)),t=this.mag===5e-324?5:this.mag/Me(e);return this.sign*t}else if(this.layer===1){var n=this.mag-Math.floor(this.mag);return this.sign*10**n}else return this.sign},set:function(e){this.layer<=2?this.fromMantissaExponent(e,this.e):(this.sign=Math.sign(e),this.sign===0&&(this.layer=0,this.exponent=0))}},{key:`e`,get:function(){return this.sign===0?0:this.layer===0?Math.floor(Math.log10(this.mag)):this.layer===1?Math.floor(this.mag):this.layer===2?Math.floor(Math.sign(this.mag)*10**Math.abs(this.mag)):this.mag*(1/0)},set:function(e){this.fromMantissaExponent(this.m,e)}},{key:`s`,get:function(){return this.sign},set:function(e){e===0?(this.sign=0,this.layer=0,this.mag=0):this.sign=e}},{key:`mantissa`,get:function(){return this.m},set:function(e){this.m=e}},{key:`exponent`,get:function(){return this.e},set:function(e){this.e=e}},{key:`normalize`,value:function(){if(this.sign===0||this.mag===0&&this.layer===0||this.mag===-1/0&&this.layer>0&&Number.isFinite(this.layer))return this.sign=0,this.mag=0,this.layer=0,this;if(this.layer===0&&this.mag<0&&(this.mag=-this.mag,this.sign=-this.sign),this.mag===1/0||this.layer===1/0||this.mag===-1/0||this.layer===-1/0)return this.mag=1/0,this.layer=1/0,this;if(this.layer===0&&this.mag<11111111111111112e-32)return this.layer+=1,this.mag=Math.log10(this.mag),this;var e=Math.abs(this.mag),t=Math.sign(this.mag);if(e>=9e15)return this.layer+=1,this.mag=t*Math.log10(e),this;for(;e<Oe&&this.layer>0;)--this.layer,this.layer===0?this.mag=10**this.mag:(this.mag=t*10**e,e=Math.abs(this.mag),t=Math.sign(this.mag));return this.layer===0&&(this.mag<0?(this.mag=-this.mag,this.sign=-this.sign):this.mag===0&&(this.sign=0)),(Number.isNaN(this.sign)||Number.isNaN(this.layer)||Number.isNaN(this.mag))&&(this.sign=NaN,this.layer=NaN,this.mag=NaN),this}},{key:`fromComponents`,value:function(e,t,n){return this.sign=e,this.layer=t,this.mag=n,this.normalize(),this}},{key:`fromComponents_noNormalize`,value:function(e,t,n){return this.sign=e,this.layer=t,this.mag=n,this}},{key:`fromMantissaExponent`,value:function(e,t){return this.layer=1,this.sign=Math.sign(e),e=Math.abs(e),this.mag=t+Math.log10(e),this.normalize(),this}},{key:`fromMantissaExponent_noNormalize`,value:function(e,t){return this.fromMantissaExponent(e,t),this}},{key:`fromDecimal`,value:function(e){return this.sign=e.sign,this.layer=e.layer,this.mag=e.mag,this}},{key:`fromNumber`,value:function(e){return this.mag=Math.abs(e),this.sign=Math.sign(e),this.layer=0,this.normalize(),this}},{key:`fromString`,value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=t,i=e.fromStringCache.get(r);if(i!==void 0)return this.fromDecimal(i);t=t.replace(`,`,``);var a=t.split(`^^^`);if(a.length===2){var o=parseFloat(a[0]),s=parseFloat(a[1]),c=a[1].split(`;`),l=1;if(c.length===2&&(l=parseFloat(c[1]),isFinite(l)||(l=1)),isFinite(o)&&isFinite(s)){var u=e.pentate(o,s,l,n);return this.sign=u.sign,this.layer=u.layer,this.mag=u.mag,e.fromStringCache.maxSize>=1&&e.fromStringCache.set(r,e.fromDecimal(this)),this}}var d=t.split(`^^`);if(d.length===2){var f=parseFloat(d[0]),p=parseFloat(d[1]),m=d[1].split(`;`),h=1;if(m.length===2&&(h=parseFloat(m[1]),isFinite(h)||(h=1)),isFinite(f)&&isFinite(p)){var g=e.tetrate(f,p,h,n);return this.sign=g.sign,this.layer=g.layer,this.mag=g.mag,e.fromStringCache.maxSize>=1&&e.fromStringCache.set(r,e.fromDecimal(this)),this}}var _=t.split(`^`);if(_.length===2){var v=parseFloat(_[0]),y=parseFloat(_[1]);if(isFinite(v)&&isFinite(y)){var b=e.pow(v,y);return this.sign=b.sign,this.layer=b.layer,this.mag=b.mag,e.fromStringCache.maxSize>=1&&e.fromStringCache.set(r,e.fromDecimal(this)),this}}t=t.trim().toLowerCase();var x,S,C=t.split(`pt`);if(C.length===2){x=10;var w=!1;C[0][0]==`-`&&(w=!0,C[0]=C[0].slice(1)),S=parseFloat(C[0]),C[1]=C[1].replace(`(`,``),C[1]=C[1].replace(`)`,``);var T=parseFloat(C[1]);if(isFinite(T)||(T=1),isFinite(x)&&isFinite(S)){var E=e.tetrate(x,S,T,n);return this.sign=E.sign,this.layer=E.layer,this.mag=E.mag,e.fromStringCache.maxSize>=1&&e.fromStringCache.set(r,e.fromDecimal(this)),w&&(this.sign*=-1),this}}if(C=t.split(`p`),C.length===2){x=10;var D=!1;C[0][0]==`-`&&(D=!0,C[0]=C[0].slice(1)),S=parseFloat(C[0]),C[1]=C[1].replace(`(`,``),C[1]=C[1].replace(`)`,``);var O=parseFloat(C[1]);if(isFinite(O)||(O=1),isFinite(x)&&isFinite(S)){var k=e.tetrate(x,S,O,n);return this.sign=k.sign,this.layer=k.layer,this.mag=k.mag,e.fromStringCache.maxSize>=1&&e.fromStringCache.set(r,e.fromDecimal(this)),D&&(this.sign*=-1),this}}if(C=t.split(`f`),C.length===2){x=10;var A=!1;C[0][0]==`-`&&(A=!0,C[0]=C[0].slice(1)),C[0]=C[0].replace(`(`,``),C[0]=C[0].replace(`)`,``);var ee=parseFloat(C[0]);if(C[1]=C[1].replace(`(`,``),C[1]=C[1].replace(`)`,``),S=parseFloat(C[1]),isFinite(ee)||(ee=1),isFinite(x)&&isFinite(S)){var te=e.tetrate(x,S,ee,n);return this.sign=te.sign,this.layer=te.layer,this.mag=te.mag,e.fromStringCache.maxSize>=1&&e.fromStringCache.set(r,e.fromDecimal(this)),A&&(this.sign*=-1),this}}var j=t.split(`e`),ne=j.length-1;if(ne===0){var re=parseFloat(t);if(isFinite(re))return this.fromNumber(re),e.fromStringCache.size>=1&&e.fromStringCache.set(r,e.fromDecimal(this)),this}else if(ne===1){var ie=parseFloat(t);if(isFinite(ie)&&Math.abs(ie)>1e-307)return this.fromNumber(ie),e.fromStringCache.maxSize>=1&&e.fromStringCache.set(r,e.fromDecimal(this)),this}var M=t.split(`e^`);if(M.length===2){this.sign=1,M[0].charAt(0)==`-`&&(this.sign=-1);for(var N=``,P=0;P<M[1].length;++P){var F=M[1].charCodeAt(P);if(F>=43&&F<=57||F===101)N+=M[1].charAt(P);else{if(this.layer=parseFloat(N),this.mag=parseFloat(M[1].substr(P+1)),this.layer<0||this.layer%1!=0){var I=e.tetrate(10,this.layer,this.mag,n);this.sign=I.sign,this.layer=I.layer,this.mag=I.mag}return this.normalize(),e.fromStringCache.maxSize>=1&&e.fromStringCache.set(r,e.fromDecimal(this)),this}}}if(ne<1)return this.sign=0,this.layer=0,this.mag=0,e.fromStringCache.maxSize>=1&&e.fromStringCache.set(r,e.fromDecimal(this)),this;var L=parseFloat(j[0]);if(L===0)return this.sign=0,this.layer=0,this.mag=0,e.fromStringCache.maxSize>=1&&e.fromStringCache.set(r,e.fromDecimal(this)),this;var R=parseFloat(j[j.length-1]);if(ne>=2){var ae=parseFloat(j[j.length-2]);isFinite(ae)&&(R*=Math.sign(ae),R+=Ie(ae))}if(!isFinite(L))this.sign=j[0]===`-`?-1:1,this.layer=ne,this.mag=R;else if(ne===1)this.sign=Math.sign(L),this.layer=1,this.mag=R+Math.log10(Math.abs(L));else if(this.sign=Math.sign(L),this.layer=ne,ne===2){var oe=e.mul(H(1,2,R),B(L));return this.sign=oe.sign,this.layer=oe.layer,this.mag=oe.mag,e.fromStringCache.maxSize>=1&&e.fromStringCache.set(r,e.fromDecimal(this)),this}else this.mag=R;return this.normalize(),e.fromStringCache.maxSize>=1&&e.fromStringCache.set(r,e.fromDecimal(this)),this}},{key:`fromValue`,value:function(t){return t instanceof e?this.fromDecimal(t):typeof t==`number`?this.fromNumber(t):typeof t==`string`?this.fromString(t):(this.sign=0,this.layer=0,this.mag=0,this)}},{key:`toNumber`,value:function(){return this.mag===1/0&&this.layer===1/0&&this.sign===1?1/0:this.mag===1/0&&this.layer===1/0&&this.sign===-1?-1/0:Number.isFinite(this.layer)?this.layer===0?this.sign*this.mag:this.layer===1?this.sign*10**this.mag:this.mag>0?this.sign>0?1/0:-1/0:0:NaN}},{key:`mantissaWithDecimalPlaces`,value:function(e){return isNaN(this.m)?NaN:this.m===0?0:Fe(this.m,e)}},{key:`magnitudeWithDecimalPlaces`,value:function(e){return isNaN(this.mag)?NaN:this.mag===0?0:Fe(this.mag,e)}},{key:`toString`,value:function(){return isNaN(this.layer)||isNaN(this.sign)||isNaN(this.mag)?`NaN`:this.mag===1/0||this.layer===1/0?this.sign===1?`Infinity`:`-Infinity`:this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toString():this.m+`e`+this.e:this.layer===1?this.m+`e`+this.e:this.layer<=5?(this.sign===-1?`-`:``)+`e`.repeat(this.layer)+this.mag:(this.sign===-1?`-`:``)+`(e^`+this.layer+`)`+this.mag}},{key:`toExponential`,value:function(e){return this.layer===0?(this.sign*this.mag).toExponential(e):this.toStringWithDecimalPlaces(e)}},{key:`toFixed`,value:function(e){return this.layer===0?(this.sign*this.mag).toFixed(e):this.toStringWithDecimalPlaces(e)}},{key:`toPrecision`,value:function(e){return this.e<=-7?this.toExponential(e-1):e>this.e?this.toFixed(e-this.exponent-1):this.toExponential(e-1)}},{key:`valueOf`,value:function(){return this.toString()}},{key:`toJSON`,value:function(){return this.toString()}},{key:`toStringWithDecimalPlaces`,value:function(e){return this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toFixed(e):Fe(this.m,e)+`e`+Fe(this.e,e):this.layer===1?Fe(this.m,e)+`e`+Fe(this.e,e):this.layer<=5?(this.sign===-1?`-`:``)+`e`.repeat(this.layer)+Fe(this.mag,e):(this.sign===-1?`-`:``)+`(e^`+this.layer+`)`+Fe(this.mag,e)}},{key:`abs`,value:function(){return U(this.sign===0?0:1,this.layer,this.mag)}},{key:`neg`,value:function(){return U(-this.sign,this.layer,this.mag)}},{key:`negate`,value:function(){return this.neg()}},{key:`negated`,value:function(){return this.neg()}},{key:`sgn`,value:function(){return this.sign}},{key:`round`,value:function(){return this.mag<0?U(0,0,0):this.layer===0?H(this.sign,0,Math.round(this.mag)):new e(this)}},{key:`floor`,value:function(){return this.mag<0?this.sign===-1?U(-1,0,1):U(0,0,0):this.sign===-1?this.neg().ceil().neg():this.layer===0?H(this.sign,0,Math.floor(this.mag)):new e(this)}},{key:`ceil`,value:function(){return this.mag<0?this.sign===1?U(1,0,1):U(0,0,0):this.sign===-1?this.neg().floor().neg():this.layer===0?H(this.sign,0,Math.ceil(this.mag)):new e(this)}},{key:`trunc`,value:function(){return this.mag<0?U(0,0,0):this.layer===0?H(this.sign,0,Math.trunc(this.mag)):new e(this)}},{key:`add`,value:function(t){var n=B(t);if(this.eq(e.dInf)&&n.eq(e.dNegInf)||this.eq(e.dNegInf)&&n.eq(e.dInf))return new e(e.dNaN);if(!Number.isFinite(this.layer))return new e(this);if(!Number.isFinite(n.layer)||this.sign===0)return new e(n);if(n.sign===0)return new e(this);if(this.sign===-n.sign&&this.layer===n.layer&&this.mag===n.mag)return U(0,0,0);var r,i;if(this.layer>=2||n.layer>=2)return this.maxabs(n);if(e.cmpabs(this,n)>0?(r=new e(this),i=new e(n)):(r=new e(n),i=new e(this)),r.layer===0&&i.layer===0)return e.fromNumber(r.sign*r.mag+i.sign*i.mag);var a=r.layer*Math.sign(r.mag),o=i.layer*Math.sign(i.mag);if(a-o>=2)return r;if(a===0&&o===-1){if(Math.abs(i.mag-Math.log10(r.mag))>17)return r;var s=10**(Math.log10(r.mag)-i.mag),c=i.sign+r.sign*s;return H(Math.sign(c),1,i.mag+Math.log10(Math.abs(c)))}if(a===1&&o===0){if(Math.abs(r.mag-Math.log10(i.mag))>17)return r;var l=10**(r.mag-Math.log10(i.mag)),u=i.sign+r.sign*l;return H(Math.sign(u),1,Math.log10(i.mag)+Math.log10(Math.abs(u)))}if(Math.abs(r.mag-i.mag)>17)return r;var d=10**(r.mag-i.mag),f=i.sign+r.sign*d;return H(Math.sign(f),1,i.mag+Math.log10(Math.abs(f)))}},{key:`plus`,value:function(e){return this.add(e)}},{key:`sub`,value:function(e){return this.add(B(e).neg())}},{key:`subtract`,value:function(e){return this.sub(e)}},{key:`minus`,value:function(e){return this.sub(e)}},{key:`mul`,value:function(t){var n=B(t);if(this.eq(e.dInf)&&n.eq(e.dNegInf)||this.eq(e.dNegInf)&&n.eq(e.dInf))return new e(e.dNegInf);if(this.mag==1/0&&n.eq(e.dZero)||this.eq(e.dZero)&&this.mag==1/0)return new e(e.dNaN);if(this.eq(e.dNegInf)&&n.eq(e.dNegInf))return new e(e.dInf);if(!Number.isFinite(this.layer))return new e(this);if(!Number.isFinite(n.layer))return new e(n);if(this.sign===0||n.sign===0)return U(0,0,0);if(this.layer===n.layer&&this.mag===-n.mag)return U(this.sign*n.sign,0,1);var r,i;if(this.layer>n.layer||this.layer==n.layer&&Math.abs(this.mag)>Math.abs(n.mag)?(r=new e(this),i=new e(n)):(r=new e(n),i=new e(this)),r.layer===0&&i.layer===0)return e.fromNumber(r.sign*i.sign*r.mag*i.mag);if(r.layer>=3||r.layer-i.layer>=2)return H(r.sign*i.sign,r.layer,r.mag);if(r.layer===1&&i.layer===0)return H(r.sign*i.sign,1,r.mag+Math.log10(i.mag));if(r.layer===1&&i.layer===1)return H(r.sign*i.sign,1,r.mag+i.mag);if(r.layer===2&&i.layer===1){var a=H(Math.sign(r.mag),r.layer-1,Math.abs(r.mag)).add(H(Math.sign(i.mag),i.layer-1,Math.abs(i.mag)));return H(r.sign*i.sign,a.layer+1,a.sign*a.mag)}if(r.layer===2&&i.layer===2){var o=H(Math.sign(r.mag),r.layer-1,Math.abs(r.mag)).add(H(Math.sign(i.mag),i.layer-1,Math.abs(i.mag)));return H(r.sign*i.sign,o.layer+1,o.sign*o.mag)}throw Error(`Bad arguments to mul: `+this+`, `+t)}},{key:`multiply`,value:function(e){return this.mul(e)}},{key:`times`,value:function(e){return this.mul(e)}},{key:`div`,value:function(e){var t=B(e);return this.mul(t.recip())}},{key:`divide`,value:function(e){return this.div(e)}},{key:`divideBy`,value:function(e){return this.div(e)}},{key:`dividedBy`,value:function(e){return this.div(e)}},{key:`recip`,value:function(){return this.mag===0?new e(e.dNaN):this.mag===1/0?U(0,0,0):this.layer===0?H(this.sign,0,1/this.mag):H(this.sign,this.layer,-this.mag)}},{key:`reciprocal`,value:function(){return this.recip()}},{key:`reciprocate`,value:function(){return this.recip()}},{key:`mod`,value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=B(t),i=r.abs();if(this.eq(e.dZero)||i.eq(e.dZero))return U(0,0,0);if(n){var a=this.abs().mod(i);return this.sign==-1!=(r.sign==-1)&&(a=r.abs().sub(a)),a.mul(r.sign)}var o=this.toNumber(),s=i.toNumber();return isFinite(o)&&isFinite(s)&&o!=0&&s!=0?new e(o%s):this.sub(i).eq(this)?U(0,0,0):i.sub(this).eq(i)?new e(this):this.sign==-1?this.abs().mod(i).neg():this.sub(this.div(i).floor().mul(i))}},{key:`modulo`,value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this.mod(e,t)}},{key:`modular`,value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this.mod(e,t)}},{key:`cmp`,value:function(e){var t=B(e);return this.sign>t.sign?1:this.sign<t.sign?-1:this.sign*this.cmpabs(e)}},{key:`cmpabs`,value:function(e){var t=B(e),n=this.mag>0?this.layer:-this.layer,r=t.mag>0?t.layer:-t.layer;return n>r?1:n<r?-1:this.mag>t.mag?1:this.mag<t.mag?-1:0}},{key:`compare`,value:function(e){return this.cmp(e)}},{key:`isNan`,value:function(){return isNaN(this.sign)||isNaN(this.layer)||isNaN(this.mag)}},{key:`isFinite`,value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return isFinite(this.sign)&&isFinite(this.layer)&&isFinite(this.mag)})},{key:`eq`,value:function(e){var t=B(e);return this.sign===t.sign&&this.layer===t.layer&&this.mag===t.mag}},{key:`equals`,value:function(e){return this.eq(e)}},{key:`neq`,value:function(e){return!this.eq(e)}},{key:`notEquals`,value:function(e){return this.neq(e)}},{key:`lt`,value:function(e){return this.cmp(e)===-1}},{key:`lte`,value:function(e){return!this.gt(e)}},{key:`gt`,value:function(e){return this.cmp(e)===1}},{key:`gte`,value:function(e){return!this.lt(e)}},{key:`max`,value:function(t){var n=B(t);return this.lt(n)?new e(n):new e(this)}},{key:`min`,value:function(t){var n=B(t);return this.gt(n)?new e(n):new e(this)}},{key:`maxabs`,value:function(t){var n=B(t);return this.cmpabs(n)<0?new e(n):new e(this)}},{key:`minabs`,value:function(t){var n=B(t);return this.cmpabs(n)>0?new e(n):new e(this)}},{key:`clamp`,value:function(e,t){return this.max(e).min(t)}},{key:`clampMin`,value:function(e){return this.max(e)}},{key:`clampMax`,value:function(e){return this.min(e)}},{key:`cmp_tolerance`,value:function(e,t){var n=B(e);return this.eq_tolerance(n,t)?0:this.cmp(n)}},{key:`compare_tolerance`,value:function(e,t){return this.cmp_tolerance(e,t)}},{key:`eq_tolerance`,value:function(e,t){var n=B(e);if(t??=1e-7,this.sign!==n.sign||Math.abs(this.layer-n.layer)>1)return!1;var r=this.mag,i=n.mag;return this.layer>n.layer&&(i=Ie(i)),this.layer<n.layer&&(r=Ie(r)),Math.abs(r-i)<=t*Math.max(Math.abs(r),Math.abs(i))}},{key:`equals_tolerance`,value:function(e,t){return this.eq_tolerance(e,t)}},{key:`neq_tolerance`,value:function(e,t){return!this.eq_tolerance(e,t)}},{key:`notEquals_tolerance`,value:function(e,t){return this.neq_tolerance(e,t)}},{key:`lt_tolerance`,value:function(e,t){var n=B(e);return!this.eq_tolerance(n,t)&&this.lt(n)}},{key:`lte_tolerance`,value:function(e,t){var n=B(e);return this.eq_tolerance(n,t)||this.lt(n)}},{key:`gt_tolerance`,value:function(e,t){var n=B(e);return!this.eq_tolerance(n,t)&&this.gt(n)}},{key:`gte_tolerance`,value:function(e,t){var n=B(e);return this.eq_tolerance(n,t)||this.gt(n)}},{key:`pLog10`,value:function(){return this.lt(e.dZero)?U(0,0,0):this.log10()}},{key:`absLog10`,value:function(){return this.sign===0?new e(e.dNaN):this.layer>0?H(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):H(1,0,Math.log10(this.mag))}},{key:`log10`,value:function(){return this.sign<=0?new e(e.dNaN):this.layer>0?H(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):H(this.sign,0,Math.log10(this.mag))}},{key:`log`,value:function(t){return t=B(t),this.sign<=0||t.sign<=0||t.sign===1&&t.layer===0&&t.mag===1?new e(e.dNaN):this.layer===0&&t.layer===0?H(this.sign,0,Math.log(this.mag)/Math.log(t.mag)):e.div(this.log10(),t.log10())}},{key:`log2`,value:function(){return this.sign<=0?new e(e.dNaN):this.layer===0?H(this.sign,0,Math.log2(this.mag)):this.layer===1?H(Math.sign(this.mag),0,Math.abs(this.mag)*3.321928094887362):this.layer===2?H(Math.sign(this.mag),1,Math.abs(this.mag)+.5213902276543247):H(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}},{key:`ln`,value:function(){return this.sign<=0?new e(e.dNaN):this.layer===0?H(this.sign,0,Math.log(this.mag)):this.layer===1?H(Math.sign(this.mag),0,Math.abs(this.mag)*2.302585092994046):this.layer===2?H(Math.sign(this.mag),1,Math.abs(this.mag)+.36221568869946325):H(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}},{key:`logarithm`,value:function(e){return this.log(e)}},{key:`pow`,value:function(t){var n=B(t),r=new e(this),i=new e(n);if(r.sign===0)return i.eq(0)?U(1,0,1):r;if(r.sign===1&&r.layer===0&&r.mag===1)return r;if(i.sign===0)return U(1,0,1);if(i.sign===1&&i.layer===0&&i.mag===1)return r;var a=r.absLog10().mul(i).pow10();return this.sign===-1?Math.abs(i.toNumber()%2)%2==1?a.neg():Math.abs(i.toNumber()%2)%2==0?a:new e(e.dNaN):a}},{key:`pow10`,value:function(){if(this.eq(e.dInf))return new e(e.dInf);if(this.eq(e.dNegInf))return U(0,0,0);if(!Number.isFinite(this.layer)||!Number.isFinite(this.mag))return new e(e.dNaN);var t=new e(this);if(t.layer===0){var n=10**(t.sign*t.mag);if(Number.isFinite(n)&&Math.abs(n)>=.1)return H(1,0,n);if(t.sign===0)return U(1,0,1);t=U(t.sign,t.layer+1,Math.log10(t.mag))}return t.sign>0&&t.mag>=0?H(t.sign,t.layer+1,t.mag):t.sign<0&&t.mag>=0?H(-t.sign,t.layer+1,-t.mag):U(1,0,1)}},{key:`pow_base`,value:function(e){return B(e).pow(this)}},{key:`root`,value:function(e){var t=B(e);return this.lt(0)&&t.mod(2,!0).eq(1)?this.neg().root(t).neg():this.pow(t.recip())}},{key:`factorial`,value:function(){return this.mag<0||this.layer===0?this.add(1).gamma():this.layer===1?e.exp(e.mul(this,e.ln(this).sub(1))):e.exp(this)}},{key:`gamma`,value:function(){if(this.mag<0)return this.recip();if(this.layer===0){if(this.lt(U(1,0,24)))return e.fromNumber(Le(this.sign*this.mag));var t=this.mag-1,n=.9189385332046727;n+=(t+.5)*Math.log(t),n-=t;var r=t*t,i=t,a=12*i,o=1/a,s=n+o;if(s===n||(n=s,i*=r,a=360*i,o=1/a,s=n-o,s===n))return e.exp(n);n=s,i*=r,a=1260*i;var c=1/a;return n+=c,i*=r,a=1680*i,c=1/a,n-=c,e.exp(n)}else if(this.layer===1)return e.exp(e.mul(this,e.ln(this).sub(1)));else return e.exp(this)}},{key:`lngamma`,value:function(){return this.gamma().ln()}},{key:`exp`,value:function(){return this.mag<0?U(1,0,1):this.layer===0&&this.mag<=709.7?e.fromNumber(Math.exp(this.sign*this.mag)):this.layer===0?H(1,1,this.sign*Math.log10(Math.E)*this.mag):this.layer===1?H(1,2,this.sign*(Math.log10(.4342944819032518)+this.mag)):H(1,this.layer+1,this.sign*this.mag)}},{key:`sqr`,value:function(){return this.pow(2)}},{key:`sqrt`,value:function(){if(this.layer===0)return e.fromNumber(Math.sqrt(this.sign*this.mag));if(this.layer===1)return H(1,2,Math.log10(this.mag)-.3010299956639812);var t=e.div(U(this.sign,this.layer-1,this.mag),U(1,0,2));return t.layer+=1,t.normalize(),t}},{key:`cube`,value:function(){return this.pow(3)}},{key:`cbrt`,value:function(){return this.lt(0)?this.neg().pow(1/3).neg():this.pow(1/3)}},{key:`tetrate`,value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:2,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:U(1,0,1),r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(t===1)return e.pow(this,n);if(t===0)return new e(n);if(this.eq(e.dOne))return U(1,0,1);if(this.eq(-1))return e.pow(this,n);if(t===1/0){var i=this.toNumber();if(i<=1.444667861009766&&i>=.06598803584531254){var a=e.ln(this).neg(),o=a.lambertw().div(a);if(i<1)return o;var s=a.lambertw(!1).div(a);return i>1.444667861009099&&(o=s=e.fromNumber(Math.E)),n=B(n),n.eq(s)?s:n.lt(s)?o:new e(e.dInf)}else if(i>1.444667861009766)return new e(e.dInf);else return new e(e.dNaN)}if(this.eq(e.dZero)){var c=Math.abs((t+1)%2);return c>1&&(c=2-c),e.fromNumber(c)}if(t<0)return e.iteratedlog(n,this,-t,r);n=new e(n);var l=t;t=Math.trunc(t);var u=l-t;if(this.gt(e.dZero)&&(this.lt(1)||this.lte(1.444667861009766)&&n.lte(e.ln(this).neg().lambertw(!1).div(e.ln(this).neg())))&&(l>1e4||!r)){var d=Math.min(1e4,t);n=n.eq(e.dOne)?this.pow(u):this.lt(1)?n.pow(1-u).mul(this.pow(n).pow(u)):n.layeradd(u,this);for(var f=0;f<d;++f){var p=n;if(n=this.pow(n),p.eq(n))return n}return l>1e4&&Math.ceil(l)%2==1?this.pow(n):n}u!==0&&(n.eq(e.dOne)?this.gt(10)||r?n=this.pow(u):(n=e.fromNumber(e.tetrate_critical(this.toNumber(),u)),this.lt(2)&&(n=n.sub(1).mul(this.minus(1)).plus(1))):n=this.eq(10)?n.layeradd10(u,r):this.lt(1)?n.pow(1-u).mul(this.pow(n).pow(u)):n.layeradd(u,this,r));for(var m=0;m<t;++m){if(n=this.pow(n),!isFinite(n.layer)||!isFinite(n.mag))return n.normalize();if(n.layer-this.layer>3)return U(n.sign,n.layer+(t-m-1),n.mag);if(m>1e4)return n}return n}},{key:`iteratedexp`,value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:2,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:U(1,0,1),n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return this.tetrate(e,t,n)}},{key:`iteratedlog`,value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(n<0)return e.tetrate(t,-n,this,r);t=B(t);var i=e.fromDecimal(this),a=n;n=Math.trunc(n);var o=a-n;if(i.layer-t.layer>3){var s=Math.min(n,i.layer-t.layer-3);n-=s,i.layer-=s}for(var c=0;c<n;++c){if(i=i.log(t),!isFinite(i.layer)||!isFinite(i.mag))return i.normalize();if(c>1e4)return i}return o>0&&o<1&&(i=t.eq(10)?i.layeradd10(-o,r):i.layeradd(-o,t,r)),i}},{key:`slog`,value:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=.001,a=!1,o=!1,s=this.slog_internal(t,r).toNumber(),c=1;c<n;++c){var l=new e(t).tetrate(s,e.dOne,r).gt(this);if(c>1&&o!=l&&(a=!0),o=l,a?i/=2:i*=2,i=Math.abs(i)*(l?-1:1),s+=i,i===0)break}return e.fromNumber(s)}},{key:`slog_internal`,value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(t=B(t),t.lte(e.dZero)||t.eq(e.dOne))return new e(e.dNaN);if(t.lt(e.dOne))return this.eq(e.dOne)?U(0,0,0):this.eq(e.dZero)?U(-1,0,1):new e(e.dNaN);if(this.mag<0||this.eq(e.dZero))return U(-1,0,1);if(t.lt(1.444667861009766)){var r=e.ln(t).neg(),i=r.lambertw().div(r);if(this.eq(i))return new e(e.dInf);if(this.gt(i))return new e(e.dNaN)}var a=0,o=e.fromDecimal(this);if(o.layer-t.layer>3){var s=o.layer-t.layer-3;a+=s,o.layer-=s}for(var c=0;c<100;++c)if(o.lt(e.dZero))o=e.pow(t,o),--a;else if(o.lte(e.dOne))return n?e.fromNumber(a+o.toNumber()-1):e.fromNumber(a+e.slog_critical(t.toNumber(),o.toNumber()));else a+=1,o=e.log(o,t);return e.fromNumber(a)}},{key:`layeradd10`,value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;t=e.fromValue_noAlloc(t).toNumber();var r=e.fromDecimal(this);if(t>=1){r.mag<0&&r.layer>0?(r.sign=0,r.mag=0,r.layer=0):r.sign===-1&&r.layer==0&&(r.sign=1,r.mag=-r.mag);var i=Math.trunc(t);t-=i,r.layer+=i}if(t<=-1){var a=Math.trunc(t);if(t-=a,r.layer+=a,r.layer<0)for(var o=0;o<100;++o){if(r.layer++,r.mag=Math.log10(r.mag),!isFinite(r.mag))return r.sign===0&&(r.sign=1),r.layer<0&&(r.layer=0),r.normalize();if(r.layer>=0)break}}for(;r.layer<0;)r.layer++,r.mag=Math.log10(r.mag);return r.sign===0&&(r.sign=1,r.mag===0&&r.layer>=1&&(--r.layer,r.mag=1)),r.normalize(),t===0?r:r.layeradd(t,10,n)}},{key:`layeradd`,value:function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=B(n);if(i.gt(1)&&i.lte(1.444667861009766)){var a=e.excess_slog(this,n,r),o=a[0].toNumber(),s=a[1],c=o+t,l=e.ln(n).neg(),u=l.lambertw().div(l),d=l.lambertw(!1).div(l),f=e.dOne;s==1?f=u.mul(d).sqrt():s==2&&(f=d.mul(2));var p=i.pow(f),m=Math.floor(c),h=c-m,g=f.pow(1-h).mul(p.pow(h));return e.tetrate(i,m,g,r)}var _=this.slog(n,100,r).toNumber()+t;return _>=0?e.tetrate(n,_,e.dOne,r):Number.isFinite(_)?_>=-1?e.log(e.tetrate(n,_+1,e.dOne,r),n):e.log(e.log(e.tetrate(n,_+2,e.dOne,r),n),n):new e(e.dNaN)}},{key:`lambertw`,value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this.lt(-.3678794411710499)?new e(e.dNaN):t?this.abs().lt(`1e-300`)?new e(this):this.mag<0?e.fromNumber(ze(this.toNumber())):this.layer===0?e.fromNumber(ze(this.sign*this.mag)):this.lt(`eee15`)?Be(this):this.ln():this.sign===1?new e(e.dNaN):this.layer===0?e.fromNumber(ze(this.sign*this.mag,1e-10,!1)):this.layer==1?Be(this,1e-10,!1):this.neg().recip().lambertw().neg()}},{key:`ssqrt`,value:function(){return this.linear_sroot(2)}},{key:`linear_sroot`,value:function(t){if(t==1)return this;if(this.eq(e.dInf))return new e(e.dInf);if(!this.isFinite())return new e(e.dNaN);if(t>0&&t<1)return this.root(t);if(t>-2&&t<-1)return e.fromNumber(t).add(2).pow(this.recip());if(t<=0)return new e(e.dNaN);if(t==1/0){var n=this.toNumber();return n<Math.E&&n>.36787944117144233?this.pow(this.recip()):new e(e.dNaN)}if(this.eq(1))return U(1,0,1);if(this.lt(0))return new e(e.dNaN);if(this.lte(`1ee-16`))return t%2==1?new e(this):new e(e.dNaN);if(this.gt(1)){var r=e.dTen;this.gte(e.tetrate(10,t,1,!0))&&(r=this.iteratedlog(10,t-1,!0)),t<=1&&(r=this.root(t));for(var i=e.dZero,a=r.layer,o=r.iteratedlog(10,a,!0),s=o,c=o.div(2),l=!0;l;)c=i.add(o).div(2),e.iteratedexp(10,a,c,!0).tetrate(t,1,!0).gt(this)?o=c:i=c,c.eq(s)?l=!1:s=c;return e.iteratedexp(10,a,c,!0)}else{for(var u=1,d=H(1,10,1),f=H(1,10,1),p=H(1,10,1),m=H(1,1,-16),h=e.dZero,g=H(1,10,1),_=m.pow10().recip(),v=e.dZero,y=_,b=_,x=Math.ceil(t)%2==0,S=0,C=H(1,10,1),w=!1,T=e.dZero,E=!1;u<4;){if(u==2){if(x)break;p=H(1,10,1),m=d,u=3,g=H(1,10,1),C=H(1,10,1)}for(w=!1;m.neq(p);){if(T=m,m.pow10().recip().tetrate(t,1,!0).eq(1)&&m.pow10().recip().lt(.4))_=m.pow10().recip(),y=m.pow10().recip(),b=m.pow10().recip(),v=e.dZero,S=-1,u==3&&(C=m);else if(m.pow10().recip().tetrate(t,1,!0).eq(m.pow10().recip())&&!x&&m.pow10().recip().lt(.4))_=m.pow10().recip(),y=m.pow10().recip(),b=m.pow10().recip(),v=e.dZero,S=0;else if(m.pow10().recip().tetrate(t,1,!0).eq(m.pow10().recip().mul(2).tetrate(t,1,!0)))_=m.pow10().recip(),y=e.dZero,b=_.mul(2),v=_,S=x?-1:0;else{for(h=m.mul(12e-17),_=m.pow10().recip(),y=m.add(h).pow10().recip(),v=_.sub(y),b=_.add(v);y.tetrate(t,1,!0).eq(_.tetrate(t,1,!0))||b.tetrate(t,1,!0).eq(_.tetrate(t,1,!0))||y.gte(_)||b.lte(_);)h=h.mul(2),y=m.add(h).pow10().recip(),v=_.sub(y),b=_.add(v);if((u==1&&b.tetrate(t,1,!0).gt(_.tetrate(t,1,!0))&&y.tetrate(t,1,!0).gt(_.tetrate(t,1,!0))||u==3&&b.tetrate(t,1,!0).lt(_.tetrate(t,1,!0))&&y.tetrate(t,1,!0).lt(_.tetrate(t,1,!0)))&&(C=m),b.tetrate(t,1,!0).lt(_.tetrate(t,1,!0)))S=-1;else if(x)S=1;else if(u==3&&m.gt_tolerance(d,1e-8))S=0;else{for(;y.tetrate(t,1,!0).eq_tolerance(_.tetrate(t,1,!0),1e-8)||b.tetrate(t,1,!0).eq_tolerance(_.tetrate(t,1,!0),1e-8)||y.gte(_)||b.lte(_);)h=h.mul(2),y=m.add(h).pow10().recip(),v=_.sub(y),b=_.add(v);S=b.tetrate(t,1,!0).sub(_.tetrate(t,1,!0)).lt(_.tetrate(t,1,!0).sub(y.tetrate(t,1,!0)))?0:1}}if(S==-1&&(E=!0),u==1&&S==1||u==3&&S!=0)if(p.eq(H(1,10,1)))m=m.mul(2);else{var D=!1;if(w&&(S==1&&u==1||S==-1&&u==3)&&(D=!0),m=m.add(p).div(2),D)break}else if(p.eq(H(1,10,1)))p=m,m=m.div(2);else{var O=!1;if(w&&(S==1&&u==1||S==-1&&u==3)&&(O=!0),p=p.sub(g),m=m.sub(g),O)break}if(p.sub(m).div(2).abs().gt(g.mul(1.5))&&(w=!0),g=p.sub(m).div(2).abs(),m.gt(`1e18`)||m.eq(T))break}if(m.gt(`1e18`)||!E||C==H(1,10,1))break;u==1?d=C:u==3&&(f=C),u++}p=d,m=H(1,1,-18);for(var k=m,A=e.dZero,ee=!0;ee;)if(A=p.eq(H(1,10,1))?m.mul(2):p.add(m).div(2),e.pow(10,A).recip().tetrate(t,1,!0).gt(this)?m=A:p=A,A.eq(k)?ee=!1:k=A,m.gt(`1e18`))return new e(e.dNaN);if(A.eq_tolerance(d,1e-15)){if(f.eq(H(1,10,1)))return new e(e.dNaN);for(p=H(1,10,1),m=f,k=m,A=e.dZero,ee=!0;ee;)if(A=p.eq(H(1,10,1))?m.mul(2):p.add(m).div(2),e.pow(10,A).recip().tetrate(t,1,!0).gt(this)?m=A:p=A,A.eq(k)?ee=!1:k=A,m.gt(`1e18`))return new e(e.dNaN);return A.pow10().recip()}else return A.pow10().recip()}}},{key:`pentate`,value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:2,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:U(1,0,1),r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;n=new e(n);var i=t;t=Math.floor(t);var a=i-t,o=e.dZero,s=e.dZero;if(a!==0)if(n.eq(e.dOne))++t,n=e.fromNumber(a);else return this.pentate(n.penta_log(this,void 0,r).plus(i).toNumber(),1,r);if(t>0)for(var c=0;c<t;){if(s=o,o=n,n=this.tetrate(n.toNumber(),e.dOne,r),++c,this.gt(0)&&this.lte(1)&&n.gt(0)&&n.lte(1))return this.tetrate(t-c,n,r);if(n.eq(o)||n.eq(s)&&c%2==t%2||!isFinite(n.layer)||!isFinite(n.mag))return n.normalize();if(c>1e4)return n}else for(var l=0;l<-t;++l){if(o=n,n=n.slog(this,void 0,r),n.eq(o)||!isFinite(n.layer)||!isFinite(n.mag))return n.normalize();if(l>100)return n}return n}},{key:`penta_log`,value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(t=new e(t),t.lte(1))return new e(e.dNaN);if(this.eq(1))return U(0,0,0);if(this.eq(e.dInf))return new e(e.dInf);var i=new e(1),a=0,o=1;if(this.lt(-1)){if(this.lte(-2))return new e(e.dNaN);var s=t.tetrate(this.toNumber(),1,r);if(this.eq(s))return new e(e.dNegInf);if(this.gt(s))return new e(e.dNaN)}if(this.gt(1)){for(;i.lt(this);)if(a++,i=e.tetrate(t,i.toNumber(),1,r),a>1e3)return new e(e.dNaN)}else for(;i.gt(this);)if(a--,i=e.slog(i,t,r),a>100)return new e(e.dNaN);for(var c=1;c<n;++c){var l=t.pentate(a,e.dOne,r);if(l.eq(this))break;var u=l.gt(this);if(o=Math.abs(o)*(u?-1:1),a+=o,o/=2,o===0)break}return e.fromNumber(a)}},{key:`linear_penta_root`,value:function(t){return t==1?this:t<0?new e(e.dNaN):this.eq(e.dInf)?new e(e.dInf):this.isFinite()?t>0&&t<1?this.root(t):this.eq(1)?U(1,0,1):this.lt(0)?new e(e.dNaN):this.lt(1)?this.linear_sroot(t):e.increasingInverse(function(n){return e.pentate(n,t,1,!0)})(this):new e(e.dNaN)}},{key:`sin`,value:function(){return this.mag<0?new e(this):this.layer===0?e.fromNumber(Math.sin(this.sign*this.mag)):U(0,0,0)}},{key:`cos`,value:function(){return this.mag<0?U(1,0,1):this.layer===0?e.fromNumber(Math.cos(this.sign*this.mag)):U(0,0,0)}},{key:`tan`,value:function(){return this.mag<0?new e(this):this.layer===0?e.fromNumber(Math.tan(this.sign*this.mag)):U(0,0,0)}},{key:`asin`,value:function(){return this.mag<0?new e(this):this.layer===0?e.fromNumber(Math.asin(this.sign*this.mag)):new e(e.dNaN)}},{key:`acos`,value:function(){return this.mag<0?e.fromNumber(Math.acos(this.toNumber())):this.layer===0?e.fromNumber(Math.acos(this.sign*this.mag)):new e(e.dNaN)}},{key:`atan`,value:function(){return this.mag<0?new e(this):this.layer===0?e.fromNumber(Math.atan(this.sign*this.mag)):e.fromNumber(Math.atan(this.sign*(1/0)))}},{key:`sinh`,value:function(){return this.exp().sub(this.negate().exp()).div(2)}},{key:`cosh`,value:function(){return this.exp().add(this.negate().exp()).div(2)}},{key:`tanh`,value:function(){return this.sinh().div(this.cosh())}},{key:`asinh`,value:function(){return e.ln(this.add(this.sqr().add(1).sqrt()))}},{key:`acosh`,value:function(){return e.ln(this.add(this.sqr().sub(1).sqrt()))}},{key:`atanh`,value:function(){return this.abs().gte(1)?new e(e.dNaN):e.ln(this.add(1).div(e.fromNumber(1).sub(this))).div(2)}},{key:`ascensionPenalty`,value:function(t){return t===0?new e(this):this.root(e.pow(10,t))}},{key:`egg`,value:function(){return this.add(9)}},{key:`lessThanOrEqualTo`,value:function(e){return this.cmp(e)<1}},{key:`lessThan`,value:function(e){return this.cmp(e)<0}},{key:`greaterThanOrEqualTo`,value:function(e){return this.cmp(e)>-1}},{key:`greaterThan`,value:function(e){return this.cmp(e)>0}}],[{key:`fromComponents`,value:function(t,n,r){return new e().fromComponents(t,n,r)}},{key:`fromComponents_noNormalize`,value:function(t,n,r){return new e().fromComponents_noNormalize(t,n,r)}},{key:`fromMantissaExponent`,value:function(t,n){return new e().fromMantissaExponent(t,n)}},{key:`fromMantissaExponent_noNormalize`,value:function(t,n){return new e().fromMantissaExponent_noNormalize(t,n)}},{key:`fromDecimal`,value:function(t){return new e().fromDecimal(t)}},{key:`fromNumber`,value:function(t){return new e().fromNumber(t)}},{key:`fromString`,value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return new e().fromString(t,n)}},{key:`fromValue`,value:function(t){return new e().fromValue(t)}},{key:`fromValue_noAlloc`,value:function(t){if(t instanceof e)return t;if(typeof t==`string`){var n=e.fromStringCache.get(t);return n===void 0?e.fromString(t):n}else if(typeof t==`number`)return e.fromNumber(t);else return U(0,0,0)}},{key:`abs`,value:function(e){return B(e).abs()}},{key:`neg`,value:function(e){return B(e).neg()}},{key:`negate`,value:function(e){return B(e).neg()}},{key:`negated`,value:function(e){return B(e).neg()}},{key:`sign`,value:function(e){return B(e).sign}},{key:`sgn`,value:function(e){return B(e).sign}},{key:`round`,value:function(e){return B(e).round()}},{key:`floor`,value:function(e){return B(e).floor()}},{key:`ceil`,value:function(e){return B(e).ceil()}},{key:`trunc`,value:function(e){return B(e).trunc()}},{key:`add`,value:function(e,t){return B(e).add(t)}},{key:`plus`,value:function(e,t){return B(e).add(t)}},{key:`sub`,value:function(e,t){return B(e).sub(t)}},{key:`subtract`,value:function(e,t){return B(e).sub(t)}},{key:`minus`,value:function(e,t){return B(e).sub(t)}},{key:`mul`,value:function(e,t){return B(e).mul(t)}},{key:`multiply`,value:function(e,t){return B(e).mul(t)}},{key:`times`,value:function(e,t){return B(e).mul(t)}},{key:`div`,value:function(e,t){return B(e).div(t)}},{key:`divide`,value:function(e,t){return B(e).div(t)}},{key:`recip`,value:function(e){return B(e).recip()}},{key:`reciprocal`,value:function(e){return B(e).recip()}},{key:`reciprocate`,value:function(e){return B(e).reciprocate()}},{key:`mod`,value:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return B(e).mod(t,n)}},{key:`modulo`,value:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return B(e).modulo(t,n)}},{key:`modular`,value:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return B(e).modular(t,n)}},{key:`cmp`,value:function(e,t){return B(e).cmp(t)}},{key:`cmpabs`,value:function(e,t){return B(e).cmpabs(t)}},{key:`compare`,value:function(e,t){return B(e).cmp(t)}},{key:`isNaN`,value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return e=B(e),isNaN(e.sign)||isNaN(e.layer)||isNaN(e.mag)})},{key:`isFinite`,value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return e=B(e),isFinite(e.sign)&&isFinite(e.layer)&&isFinite(e.mag)})},{key:`eq`,value:function(e,t){return B(e).eq(t)}},{key:`equals`,value:function(e,t){return B(e).eq(t)}},{key:`neq`,value:function(e,t){return B(e).neq(t)}},{key:`notEquals`,value:function(e,t){return B(e).notEquals(t)}},{key:`lt`,value:function(e,t){return B(e).lt(t)}},{key:`lte`,value:function(e,t){return B(e).lte(t)}},{key:`gt`,value:function(e,t){return B(e).gt(t)}},{key:`gte`,value:function(e,t){return B(e).gte(t)}},{key:`max`,value:function(e,t){return B(e).max(t)}},{key:`min`,value:function(e,t){return B(e).min(t)}},{key:`minabs`,value:function(e,t){return B(e).minabs(t)}},{key:`maxabs`,value:function(e,t){return B(e).maxabs(t)}},{key:`clamp`,value:function(e,t,n){return B(e).clamp(t,n)}},{key:`clampMin`,value:function(e,t){return B(e).clampMin(t)}},{key:`clampMax`,value:function(e,t){return B(e).clampMax(t)}},{key:`cmp_tolerance`,value:function(e,t,n){return B(e).cmp_tolerance(t,n)}},{key:`compare_tolerance`,value:function(e,t,n){return B(e).cmp_tolerance(t,n)}},{key:`eq_tolerance`,value:function(e,t,n){return B(e).eq_tolerance(t,n)}},{key:`equals_tolerance`,value:function(e,t,n){return B(e).eq_tolerance(t,n)}},{key:`neq_tolerance`,value:function(e,t,n){return B(e).neq_tolerance(t,n)}},{key:`notEquals_tolerance`,value:function(e,t,n){return B(e).notEquals_tolerance(t,n)}},{key:`lt_tolerance`,value:function(e,t,n){return B(e).lt_tolerance(t,n)}},{key:`lte_tolerance`,value:function(e,t,n){return B(e).lte_tolerance(t,n)}},{key:`gt_tolerance`,value:function(e,t,n){return B(e).gt_tolerance(t,n)}},{key:`gte_tolerance`,value:function(e,t,n){return B(e).gte_tolerance(t,n)}},{key:`pLog10`,value:function(e){return B(e).pLog10()}},{key:`absLog10`,value:function(e){return B(e).absLog10()}},{key:`log10`,value:function(e){return B(e).log10()}},{key:`log`,value:function(e,t){return B(e).log(t)}},{key:`log2`,value:function(e){return B(e).log2()}},{key:`ln`,value:function(e){return B(e).ln()}},{key:`logarithm`,value:function(e,t){return B(e).logarithm(t)}},{key:`pow`,value:function(e,t){return B(e).pow(t)}},{key:`pow10`,value:function(e){return B(e).pow10()}},{key:`root`,value:function(e,t){return B(e).root(t)}},{key:`factorial`,value:function(e,t){return B(e).factorial()}},{key:`gamma`,value:function(e,t){return B(e).gamma()}},{key:`lngamma`,value:function(e,t){return B(e).lngamma()}},{key:`exp`,value:function(e){return B(e).exp()}},{key:`sqr`,value:function(e){return B(e).sqr()}},{key:`sqrt`,value:function(e){return B(e).sqrt()}},{key:`cube`,value:function(e){return B(e).cube()}},{key:`cbrt`,value:function(e){return B(e).cbrt()}},{key:`tetrate`,value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:U(1,0,1),r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return B(e).tetrate(t,n,r)}},{key:`iteratedexp`,value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:U(1,0,1),r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return B(e).iteratedexp(t,n,r)}},{key:`iteratedlog`,value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:10,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return B(e).iteratedlog(t,n,r)}},{key:`layeradd10`,value:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return B(e).layeradd10(t,n)}},{key:`layeradd`,value:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return B(e).layeradd(t,n,r)}},{key:`slog`,value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:10,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return B(e).slog(t,100,n)}},{key:`lambertw`,value:function(e,t){return B(e).lambertw(t)}},{key:`ssqrt`,value:function(e){return B(e).ssqrt()}},{key:`linear_sroot`,value:function(e,t){return B(e).linear_sroot(t)}},{key:`pentate`,value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:U(1,0,1),r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return B(e).pentate(t,n,r)}},{key:`penta_log`,value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:10,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return B(e).penta_log(t,100,n)}},{key:`linear_penta_root`,value:function(e,t){return B(e).linear_penta_root(t)}},{key:`sin`,value:function(e){return B(e).sin()}},{key:`cos`,value:function(e){return B(e).cos()}},{key:`tan`,value:function(e){return B(e).tan()}},{key:`asin`,value:function(e){return B(e).asin()}},{key:`acos`,value:function(e){return B(e).acos()}},{key:`atan`,value:function(e){return B(e).atan()}},{key:`sinh`,value:function(e){return B(e).sinh()}},{key:`cosh`,value:function(e){return B(e).cosh()}},{key:`tanh`,value:function(e){return B(e).tanh()}},{key:`asinh`,value:function(e){return B(e).asinh()}},{key:`acosh`,value:function(e){return B(e).acosh()}},{key:`atanh`,value:function(e){return B(e).atanh()}},{key:`affordGeometricSeries`,value:function(e,t,n,r){return this.affordGeometricSeries_core(B(e),B(t),B(n),r)}},{key:`sumGeometricSeries`,value:function(e,t,n,r){return this.sumGeometricSeries_core(e,B(t),B(n),r)}},{key:`affordArithmeticSeries`,value:function(e,t,n,r){return this.affordArithmeticSeries_core(B(e),B(t),B(n),B(r))}},{key:`sumArithmeticSeries`,value:function(e,t,n,r){return this.sumArithmeticSeries_core(B(e),B(t),B(n),B(r))}},{key:`efficiencyOfPurchase`,value:function(e,t,n){return this.efficiencyOfPurchase_core(B(e),B(t),B(n))}},{key:`randomDecimalForTesting`,value:function(e){if(Math.random()*20<1)return U(0,0,0);var t=Math.random()>.5?1:-1;if(Math.random()*20<1)return U(t,0,1);var n=Math.floor(Math.random()*(e+1)),r=n===0?Math.random()*616-308:Math.random()*16;Math.random()>.9&&(r=Math.trunc(r));var i=10**r;return Math.random()>.9&&(i=Math.trunc(i)),H(t,n,i)}},{key:`affordGeometricSeries_core`,value:function(t,n,r,i){var a=n.mul(r.pow(i));return e.floor(t.div(a).mul(r.sub(1)).add(1).log10().div(r.log10()))}},{key:`sumGeometricSeries_core`,value:function(t,n,r,i){return n.mul(r.pow(i)).mul(e.sub(1,r.pow(t))).div(e.sub(1,r))}},{key:`affordArithmeticSeries_core`,value:function(e,t,n,r){var i=t.add(r.mul(n)).sub(n.div(2)),a=i.pow(2);return i.neg().add(a.add(n.mul(e).mul(2)).sqrt()).div(n).floor()}},{key:`sumArithmeticSeries_core`,value:function(e,t,n,r){var i=t.add(r.mul(n));return e.div(2).mul(i.mul(2).plus(e.sub(1).mul(n)))}},{key:`efficiencyOfPurchase_core`,value:function(e,t,n){return e.div(t).add(e.div(n))}},{key:`slog_critical`,value:function(t,n){return t>10?n-1:e.critical_section(t,n,Pe)}},{key:`tetrate_critical`,value:function(t,n){return e.critical_section(t,n,z)}},{key:`critical_section`,value:function(e,t,n){t*=10,t<0&&(t=0),t>10&&(t=10),e<2&&(e=2),e>10&&(e=10);for(var r=0,i=0,a=0;a<Ne.length;++a)if(Ne[a]==e){r=n[a][Math.floor(t)],i=n[a][Math.ceil(t)];break}else if(Ne[a]<e&&Ne[a+1]>e){var o=(e-Ne[a])/(Ne[a+1]-Ne[a]);r=n[a][Math.floor(t)]*(1-o)+n[a+1][Math.floor(t)]*o,i=n[a][Math.ceil(t)]*(1-o)+n[a+1][Math.ceil(t)]*o;break}var s=t-Math.floor(t);return r<=0||i<=0?r*(1-s)+i*s:e**+(Math.log(r)/Math.log(e)*(1-s)+Math.log(i)/Math.log(e)*s)}},{key:`excess_slog`,value:function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;t=B(t),n=B(n);var i=n;if(n=n.toNumber(),n==1||n<=0)return[new e(e.dNaN),0];if(n>1.444667861009766)return[t.slog(n,100,r),0];var a=e.ln(n).neg(),o=a.lambertw().div(a),s=e.dInf;if(n>1&&(s=a.lambertw(!1).div(a)),n>1.444667861009099&&(o=s=e.fromNumber(Math.E)),t.lt(o))return[t.slog(n,100,r),0];if(t.eq(o))return[new e(e.dInf),0];if(t.eq(s))return[new e(e.dNegInf),2];if(t.gt(s)){var c=s.mul(2),l=i.pow(c),u=0;if(t.gte(c)&&t.lt(l))u=0;else if(t.gte(l)){var d=l;for(u=1;d.lt(t);)if(d=i.pow(d),u+=1,d.layer>3){var f=Math.floor(t.layer-d.layer+1);d=i.iteratedexp(f,d,r),u+=f}d.gt(t)&&(d=d.log(n),--u)}else if(t.lt(c)){var p=c;for(u=0;p.gt(t);)p=p.log(n),--u}for(var m=0,h=0,g=.5,_=c,v=e.dZero;g>1e-16;){if(h=m+g,_=c.pow(1-h).mul(l.pow(h)),v=e.iteratedexp(n,u,_),v.eq(t))return[new e(u+h),2];v.lt(t)&&(m+=g),g/=2}return v.neq_tolerance(t,1e-7)?[new e(e.dNaN),0]:[new e(u+m),2]}if(t.lt(s)&&t.gt(o)){var y=o.mul(s).sqrt(),b=i.pow(y),x=0;if(t.lte(y)&&t.gt(b))x=0;else if(t.lte(b)){var S=b;for(x=1;S.gt(t);)S=i.pow(S),x+=1;S.lt(t)&&(S=S.log(n),--x)}else if(t.gt(y)){var C=y;for(x=0;C.lt(t);)C=C.log(n),--x}for(var w=0,T=0,E=.5,D=y,O=e.dZero;E>1e-16;){if(T=w+E,D=y.pow(1-T).mul(b.pow(T)),O=e.iteratedexp(n,x,D),O.eq(t))return[new e(x+T),1];O.gt(t)&&(w+=E),E/=2}return O.neq_tolerance(t,1e-7)?[new e(e.dNaN),0]:[new e(x+w),1]}throw Error(`Unhandled behavior in excess_slog`)}},{key:`increasingInverse`,value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:120,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:e.dLayerMax.neg(),a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:e.dLayerMax,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:e.dLayerMax.neg(),s=arguments.length>6&&arguments[6]!==void 0?arguments[6]:e.dLayerMax;return function(c){if(c=new e(c),i=new e(i),a=new e(a),o=new e(o),s=new e(s),c.isNan()||a.lt(i)||c.lt(o)||c.gt(s))return new e(e.dNaN);var l=function(t){return new e(t)},u=!0;if(a.lt(0))u=!1;else if(i.gt(0))u=!0;else{var d=t(e.dZero);if(d.eq(c))return U(0,0,0);u=c.gt(d),n&&(u=!u)}var f=u,p;if(u){if(a.lt(11111111111111112e-32))u=!0;else if(i.gt(11111111111111112e-32))u=!1;else{var m=t(new e(ke));u=c.lt(m),n&&(u=!u)}if(u){p=!0;var h=e.pow(10,De).recip();if(a.lt(h))u=!1;else if(i.gt(h))u=!0;else{var g=t(new e(h));u=c.gt(g),n&&(u=!u)}if(u)l=function(t){return e.pow(10,t).recip()};else{var _=e.tetrate(10,De);if(a.lt(_))u=!1;else if(i.gt(_))u=!0;else{var v=t(new e(_));u=c.gt(v),n&&(u=!u)}l=u?function(t){return e.tetrate(10,new e(t).toNumber()).recip()}:function(t){return new e(t).gt(Math.log10(Number.MAX_VALUE))?e.dZero:e.tetrate(10,e.pow(10,t).toNumber()).recip()}}}else{if(p=!1,a.lt(9e15))u=!0;else if(i.gt(9e15))u=!1;else{var y=t(new e(De));u=c.lt(y),n&&(u=!u)}if(u)l=function(t){return new e(t)};else{var b=e.pow(10,De);if(a.lt(b))u=!0;else if(i.gt(b))u=!1;else{var x=t(new e(b));u=c.lt(x),n&&(u=!u)}if(u)l=function(t){return e.pow(10,t)};else{var S=e.tetrate(10,De);if(a.lt(S))u=!0;else if(i.gt(S))u=!1;else{var C=t(new e(S));u=c.lt(C),n&&(u=!u)}l=u?function(t){return e.tetrate(10,new e(t).toNumber())}:function(t){return new e(t).gt(Math.log10(Number.MAX_VALUE))?e.dInf:e.tetrate(10,e.pow(10,t).toNumber())}}}}}else{if(p=!0,a.lt(-11111111111111112e-32))u=!1;else if(i.gt(-11111111111111112e-32))u=!0;else{var w=t(new e(-ke));u=c.gt(w),n&&(u=!u)}if(u){var T=e.pow(10,De).recip().neg();if(a.lt(T))u=!0;else if(i.gt(T))u=!1;else{var E=t(new e(T));u=c.lt(E),n&&(u=!u)}if(u)l=function(t){return e.pow(10,t).recip().neg()};else{var D=e.tetrate(10,De).neg();if(a.lt(D))u=!0;else if(i.gt(D))u=!1;else{var O=t(new e(D));u=c.lt(O),n&&(u=!u)}l=u?function(t){return e.tetrate(10,new e(t).toNumber()).recip().neg()}:function(t){return new e(t).gt(Math.log10(Number.MAX_VALUE))?e.dZero:e.tetrate(10,e.pow(10,t).toNumber()).recip().neg()}}}else{if(p=!1,a.lt(-9e15))u=!1;else if(i.gt(-9e15))u=!0;else{var k=t(new e(-De));u=c.gt(k),n&&(u=!u)}if(u)l=function(t){return e.neg(t)};else{var A=e.pow(10,De).neg();if(a.lt(A))u=!1;else if(i.gt(A))u=!0;else{var ee=t(new e(A));u=c.gt(ee),n&&(u=!u)}if(u)l=function(t){return e.pow(10,t).neg()};else{var te=e.tetrate(10,De).neg();if(a.lt(te))u=!1;else if(i.gt(te))u=!0;else{var j=t(new e(te));u=c.gt(j),n&&(u=!u)}l=u?function(t){return e.tetrate(10,new e(t).toNumber()).neg()}:function(t){return new e(t).gt(Math.log10(Number.MAX_VALUE))?e.dNegInf:e.tetrate(10,e.pow(10,t).toNumber()).neg()}}}}}for(var ne=f!=p!=n,re=ne?function(t,n){return e.gt(t,n)}:function(t,n){return e.lt(t,n)},ie=.001,M=!1,N=!1,P=1,F=e.dOne,I=0,L=!1,R=1;R<r;++R){L=!1,I=P,F=l(P),F.gt(a)&&(F=a,L=!0),F.lt(i)&&(F=i,L=!0);var ae=t(F);if(ae.eq(c)&&!L)break;var oe=re(ae,c);if(R>1&&N!=oe&&(M=!0),N=oe,M?ie/=2:ie*=2,oe!=ne&&F.eq(a)||oe==ne&&F.eq(i))return new e(e.dNaN);if(ie=Math.abs(ie)*(oe?-1:1),P+=ie,ie===0||I==P)break}return l(P)}}}]),e}();W.dZero=U(0,0,0),W.dOne=U(1,0,1),W.dNegOne=U(-1,0,1),W.dTwo=U(1,0,2),W.dTen=U(1,0,10),W.dNaN=U(NaN,NaN,NaN),W.dInf=U(1,1/0,1/0),W.dNegInf=U(-1,1/0,1/0),W.dNumberMax=H(1,0,Number.MAX_VALUE),W.dNumberMin=H(1,0,Number.MIN_VALUE),W.dLayerSafeMax=H(1,2**53-1,De-1),W.dLayerSafeMin=H(1,2**53-1,-(De-1)),W.dLayerMax=H(1,Number.MAX_VALUE,De-1),W.dLayerMin=H(1,Number.MAX_VALUE,-(De-1)),W.fromStringCache=new Te(je),B=W.fromValue_noAlloc,H=W.fromComponents,U=W.fromComponents_noNormalize,W.fromMantissaExponent,W.fromMantissaExponent_noNormalize;var Ve=n(((exports,t)=>{(function(n){typeof exports==`object`&&typeof t==`object`?n(be()):typeof define==`function`&&define.amd?define([`../../lib/codemirror`],n):n(CodeMirror)})(function(e){e.defineSimpleMode=function(t,n){e.defineMode(t,function(t){return e.simpleMode(t,n)})},e.simpleMode=function(n,r){t(r,`start`);var o={},s=r.meta||{},c=!1;for(var u in r)if(u!=s&&r.hasOwnProperty(u))for(var d=o[u]=[],f=r[u],p=0;p<f.length;p++){var m=f[p];d.push(new i(m,r)),(m.indent||m.dedent)&&(c=!0)}var h={startState:function(){return{state:`start`,pending:null,local:null,localState:null,indent:c?[]:null}},copyState:function(t){var n={state:t.state,pending:t.pending,local:t.local,localState:null,indent:t.indent&&t.indent.slice(0)};t.localState&&(n.localState=e.copyState(t.local.mode,t.localState)),t.stack&&(n.stack=t.stack.slice(0));for(var r=t.persistentStates;r;r=r.next)n.persistentStates={mode:r.mode,spec:r.spec,state:r.state==t.localState?n.localState:e.copyState(r.mode,r.state),next:n.persistentStates};return n},token:a(o,n),innerMode:function(e){return e.local&&{mode:e.local.mode,state:e.localState}},indent:l(o,s)};if(s)for(var g in s)s.hasOwnProperty(g)&&(h[g]=s[g]);return h};function t(e,t){if(!e.hasOwnProperty(t))throw Error(`Undefined state `+t+` in simple mode`)}function n(e,t){if(!e)return/(?:)/;var n=``;return e instanceof RegExp?(e.ignoreCase&&(n=`i`),e.unicode&&(n+=`u`),e=e.source):e=String(e),RegExp((t===!1?``:`^`)+`(?:`+e+`)`,n)}function r(e){if(!e)return null;if(e.apply)return e;if(typeof e==`string`)return e.replace(/\./g,` `);for(var t=[],n=0;n<e.length;n++)t.push(e[n]&&e[n].replace(/\./g,` `));return t}function i(e,i){(e.next||e.push)&&t(i,e.next||e.push),this.regex=n(e.regex),this.token=r(e.token),this.data=e}function a(e,t){return function(n,r){if(r.pending){var i=r.pending.shift();return r.pending.length==0&&(r.pending=null),n.pos+=i.text.length,i.token}if(r.local)if(r.local.end&&n.match(r.local.end)){var a=r.local.endToken||null;return r.local=r.localState=null,a}else{var a=r.local.mode.token(n,r.localState),o;return r.local.endScan&&(o=r.local.endScan.exec(n.current()))&&(n.pos=n.start+o.index),a}for(var c=e[r.state],l=0;l<c.length;l++){var u=c[l],d=(!u.data.sol||n.sol())&&n.match(u.regex);if(d){u.data.next?r.state=u.data.next:u.data.push?((r.stack||=[]).push(r.state),r.state=u.data.push):u.data.pop&&r.stack&&r.stack.length&&(r.state=r.stack.pop()),u.data.mode&&s(t,r,u.data.mode,u.token),u.data.indent&&r.indent.push(n.indentation()+t.indentUnit),u.data.dedent&&r.indent.pop();var f=u.token;if(f&&f.apply&&(f=f(d)),d.length>2&&u.token&&typeof u.token!=`string`){for(var p=2;p<d.length;p++)d[p]&&(r.pending||=[]).push({text:d[p],token:u.token[p-1]});return n.backUp(d[0].length-(d[1]?d[1].length:0)),f[0]}else if(f&&f.join)return f[0];else return f}}return n.next(),null}}function o(e,t){if(e===t)return!0;if(!e||typeof e!=`object`||!t||typeof t!=`object`)return!1;var n=0;for(var r in e)if(e.hasOwnProperty(r)){if(!t.hasOwnProperty(r)||!o(e[r],t[r]))return!1;n++}for(var r in t)t.hasOwnProperty(r)&&n--;return n==0}function s(t,r,i,a){var s;if(i.persistent)for(var c=r.persistentStates;c&&!s;c=c.next)(i.spec?o(i.spec,c.spec):i.mode==c.mode)&&(s=c);var l=s?s.mode:i.mode||e.getMode(t,i.spec),u=s?s.state:e.startState(l);i.persistent&&!s&&(r.persistentStates={mode:l,spec:i.spec,state:u,next:r.persistentStates}),r.localState=u,r.local={mode:l,end:i.end&&n(i.end),endScan:i.end&&i.forceEnd!==!1&&n(i.end,!1),endToken:a&&a.join?a[a.length-1]:a}}function c(e,t){for(var n=0;n<t.length;n++)if(t[n]===e)return!0}function l(t,n){return function(r,i,a){if(r.local&&r.local.mode.indent)return r.local.mode.indent(r.localState,i,a);if(r.indent==null||r.local||n.dontIndentStates&&c(r.state,n.dontIndentStates)>-1)return e.Pass;var o=r.indent.length-1,s=t[r.state];scan:for(;;){for(var l=0;l<s.length;l++){var u=s[l];if(u.data.dedent&&u.data.dedentIfLineStart!==!1){var d=u.regex.exec(i);if(d&&d[0]){o--,(u.next||u.push)&&(s=t[u.next||u.push]),i=i.slice(d[0].length);continue scan}}}break}return o<0?0:r.indent[o]}}})})),He=n(((exports,t)=>{(function(n){typeof exports==`object`&&typeof t==`object`?n(be()):typeof define==`function`&&define.amd?define([`../../lib/codemirror`],n):n(CodeMirror)})(function(e){var t=`CodeMirror-hint`,n=`CodeMirror-hint-active`;e.showHint=function(e,t,n){if(!t)return e.showHint(n);n&&n.async&&(t.async=!0);var r={hint:t};if(n)for(var i in n)r[i]=n[i];return e.showHint(r)},e.defineExtension(`showHint`,function(t){t=o(this,this.getCursor(`start`),t);var n=this.listSelections();if(!(n.length>1)){if(this.somethingSelected()){if(!t.hint.supportsSelection)return;for(var i=0;i<n.length;i++)if(n[i].head.line!=n[i].anchor.line)return}this.state.completionActive&&this.state.completionActive.close();var a=this.state.completionActive=new r(this,t);a.options.hint&&(e.signal(this,`startCompletion`,this),a.update(!0))}}),e.defineExtension(`closeHint`,function(){this.state.completionActive&&this.state.completionActive.close()});function r(e,t){if(this.cm=e,this.options=t,this.widget=null,this.debounce=0,this.tick=0,this.startPos=this.cm.getCursor(`start`),this.startLen=this.cm.getLine(this.startPos.line).length-this.cm.getSelection().length,this.options.updateOnCursorActivity){var n=this;e.on(`cursorActivity`,this.activityFunc=function(){n.cursorActivity()})}}var i=window.requestAnimationFrame||function(e){return setTimeout(e,1e3/60)},a=window.cancelAnimationFrame||clearTimeout;r.prototype={close:function(){this.active()&&(this.cm.state.completionActive=null,this.tick=null,this.options.updateOnCursorActivity&&this.cm.off(`cursorActivity`,this.activityFunc),this.widget&&this.data&&e.signal(this.data,`close`),this.widget&&this.widget.close(),e.signal(this.cm,`endCompletion`,this.cm))},active:function(){return this.cm.state.completionActive==this},pick:function(t,n){var r=t.list[n],i=this;this.cm.operation(function(){r.hint?r.hint(i.cm,t,r):i.cm.replaceRange(s(r),r.from||t.from,r.to||t.to,`complete`),e.signal(t,`pick`,r),i.cm.scrollIntoView()}),this.options.closeOnPick&&this.close()},cursorActivity:function(){this.debounce&&=(a(this.debounce),0);var e=this.startPos;this.data&&(e=this.data.from);var t=this.cm.getCursor(),n=this.cm.getLine(t.line);if(t.line!=this.startPos.line||n.length-t.ch!=this.startLen-this.startPos.ch||t.ch<e.ch||this.cm.somethingSelected()||!t.ch||this.options.closeCharacters.test(n.charAt(t.ch-1)))this.close();else{var r=this;this.debounce=i(function(){r.update()}),this.widget&&this.widget.disable()}},update:function(e){if(this.tick!=null){var t=this,n=++this.tick;f(this.options.hint,this.cm,this.options,function(r){t.tick==n&&t.finishUpdate(r,e)})}},finishUpdate:function(t,n){this.data&&e.signal(this.data,`update`);var r=this.widget&&this.widget.picked||n&&this.options.completeSingle;this.widget&&this.widget.close(),this.data=t,t&&t.list.length&&(r&&t.list.length==1?this.pick(t,0):(this.widget=new u(this,t),e.signal(t,`shown`)))}};function o(e,t,n){var r=e.options.hintOptions,i={};for(var a in m)i[a]=m[a];if(r)for(var a in r)r[a]!==void 0&&(i[a]=r[a]);if(n)for(var a in n)n[a]!==void 0&&(i[a]=n[a]);return i.hint.resolve&&(i.hint=i.hint.resolve(e,t)),i}function s(e){return typeof e==`string`?e:e.text}function c(e,t){var n={Up:function(){t.moveFocus(-1)},Down:function(){t.moveFocus(1)},PageUp:function(){t.moveFocus(-t.menuSize()+1,!0)},PageDown:function(){t.moveFocus(t.menuSize()-1,!0)},Home:function(){t.setFocus(0)},End:function(){t.setFocus(t.length-1)},Enter:t.pick,Tab:t.pick,Esc:t.close};/Mac/.test(navigator.platform)&&(n[`Ctrl-P`]=function(){t.moveFocus(-1)},n[`Ctrl-N`]=function(){t.moveFocus(1)});var r=e.options.customKeys,i=r?{}:n;function a(e,r){i[e]=typeof r==`string`?n.hasOwnProperty(r)?n[r]:r:function(e){return r(e,t)}}if(r)for(var o in r)r.hasOwnProperty(o)&&a(o,r[o]);var s=e.options.extraKeys;if(s)for(var o in s)s.hasOwnProperty(o)&&a(o,s[o]);return i}function l(e,t){for(;t&&t!=e;){if(t.nodeName.toUpperCase()===`LI`&&t.parentNode==e)return t;t=t.parentNode}}function u(r,i){this.id=`cm-complete-`+Math.floor(Math.random(1e6)),this.completion=r,this.data=i,this.picked=!1;var a=this,o=r.cm,u=o.getInputField().ownerDocument,d=u.defaultView||u.parentWindow,f=this.hints=u.createElement(`ul`);f.setAttribute(`role`,`listbox`),f.setAttribute(`aria-expanded`,`true`),f.id=this.id,f.className=`CodeMirror-hints `+r.cm.options.theme,this.selectedHint=i.selectedHint||0;for(var p=i.list,m=0;m<p.length;++m){var h=f.appendChild(u.createElement(`li`)),g=p[m],_=t+(m==this.selectedHint?` `+n:``);g.className!=null&&(_=g.className+` `+_),h.className=_,m==this.selectedHint&&h.setAttribute(`aria-selected`,`true`),h.id=this.id+`-`+m,h.setAttribute(`role`,`option`),g.render?g.render(h,i,g):h.appendChild(u.createTextNode(g.displayText||s(g))),h.hintId=m}var v=r.options.container||u.body,y=o.cursorCoords(r.options.alignWithWord?i.from:null),b=y.left,x=y.bottom,S=!0,C=0,w=0;if(v!==u.body){var T=[`absolute`,`relative`,`fixed`].indexOf(d.getComputedStyle(v).position)===-1?v.offsetParent:v,E=T.getBoundingClientRect(),D=u.body.getBoundingClientRect();C=E.left-D.left-T.scrollLeft,w=E.top-D.top-T.scrollTop}f.style.left=b-C+`px`,f.style.top=x-w+`px`;var O=d.innerWidth||Math.max(u.body.offsetWidth,u.documentElement.offsetWidth),k=d.innerHeight||Math.max(u.body.offsetHeight,u.documentElement.offsetHeight);v.appendChild(f),o.getInputField().setAttribute(`aria-autocomplete`,`list`),o.getInputField().setAttribute(`aria-owns`,this.id),o.getInputField().setAttribute(`aria-activedescendant`,this.id+`-`+this.selectedHint);var A=r.options.moveOnOverlap?f.getBoundingClientRect():new DOMRect,ee=r.options.paddingForScrollbar?f.scrollHeight>f.clientHeight+1:!1,te;if(setTimeout(function(){te=o.getScrollInfo()}),A.bottom-k>0){var j=A.bottom-A.top,ne=A.top-(y.bottom-y.top)-2;k-A.top<ne?(j>ne&&(f.style.height=(j=ne)+`px`),f.style.top=(x=y.top-j)-w+`px`,S=!1):f.style.height=k-A.top-2+`px`}var re=A.right-O;if(ee&&(re+=o.display.nativeBarWidth),re>0&&(A.right-A.left>O&&(f.style.width=O-5+`px`,re-=A.right-A.left-O),f.style.left=(b=Math.max(y.left-re-C,0))+`px`),ee)for(var ie=f.firstChild;ie;ie=ie.nextSibling)ie.style.paddingRight=o.display.nativeBarWidth+`px`;if(o.addKeyMap(this.keyMap=c(r,{moveFocus:function(e,t){a.changeActive(a.selectedHint+e,t)},setFocus:function(e){a.changeActive(e)},menuSize:function(){return a.screenAmount()},length:p.length,close:function(){r.close()},pick:function(){a.pick()},data:i})),r.options.closeOnUnfocus){var M;o.on(`blur`,this.onBlur=function(){M=setTimeout(function(){r.close()},100)}),o.on(`focus`,this.onFocus=function(){clearTimeout(M)})}o.on(`scroll`,this.onScroll=function(){var e=o.getScrollInfo(),t=o.getWrapperElement().getBoundingClientRect();te||=o.getScrollInfo();var n=x+te.top-e.top,i=n-(d.pageYOffset||(u.documentElement||u.body).scrollTop);if(S||(i+=f.offsetHeight),i<=t.top||i>=t.bottom)return r.close();f.style.top=n+`px`,f.style.left=b+te.left-e.left+`px`}),e.on(f,`dblclick`,function(e){var t=l(f,e.target||e.srcElement);t&&t.hintId!=null&&(a.changeActive(t.hintId),a.pick())}),e.on(f,`click`,function(e){var t=l(f,e.target||e.srcElement);t&&t.hintId!=null&&(a.changeActive(t.hintId),r.options.completeOnSingleClick&&a.pick())}),e.on(f,`mousedown`,function(){setTimeout(function(){o.focus()},20)});var N=this.getSelectedHintRange();return(N.from!==0||N.to!==0)&&this.scrollToActive(),e.signal(i,`select`,p[this.selectedHint],f.childNodes[this.selectedHint]),!0}u.prototype={close:function(){if(this.completion.widget==this){this.completion.widget=null,this.hints.parentNode&&this.hints.parentNode.removeChild(this.hints),this.completion.cm.removeKeyMap(this.keyMap);var e=this.completion.cm.getInputField();e.removeAttribute(`aria-activedescendant`),e.removeAttribute(`aria-owns`);var t=this.completion.cm;this.completion.options.closeOnUnfocus&&(t.off(`blur`,this.onBlur),t.off(`focus`,this.onFocus)),t.off(`scroll`,this.onScroll)}},disable:function(){this.completion.cm.removeKeyMap(this.keyMap);var e=this;this.keyMap={Enter:function(){e.picked=!0}},this.completion.cm.addKeyMap(this.keyMap)},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(t,r){if(t>=this.data.list.length?t=r?this.data.list.length-1:0:t<0&&(t=r?0:this.data.list.length-1),this.selectedHint!=t){var i=this.hints.childNodes[this.selectedHint];i&&(i.className=i.className.replace(` `+n,``),i.removeAttribute(`aria-selected`)),i=this.hints.childNodes[this.selectedHint=t],i.className+=` `+n,i.setAttribute(`aria-selected`,`true`),this.completion.cm.getInputField().setAttribute(`aria-activedescendant`,i.id),this.scrollToActive(),e.signal(this.data,`select`,this.data.list[this.selectedHint],i)}},scrollToActive:function(){var e=this.getSelectedHintRange(),t=this.hints.childNodes[e.from],n=this.hints.childNodes[e.to],r=this.hints.firstChild;t.offsetTop<this.hints.scrollTop?this.hints.scrollTop=t.offsetTop-r.offsetTop:n.offsetTop+n.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=n.offsetTop+n.offsetHeight-this.hints.clientHeight+r.offsetTop)},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1},getSelectedHintRange:function(){var e=this.completion.options.scrollMargin||0;return{from:Math.max(0,this.selectedHint-e),to:Math.min(this.data.list.length-1,this.selectedHint+e)}}};function d(e,t){if(!e.somethingSelected())return t;for(var n=[],r=0;r<t.length;r++)t[r].supportsSelection&&n.push(t[r]);return n}function f(e,t,n,r){if(e.async)e(t,r,n);else{var i=e(t,n);i&&i.then?i.then(r):r(i)}}function p(t,n){var r=t.getHelpers(n,`hint`),i;if(r.length){var a=function(e,t,n){var i=d(e,r);function a(r){if(r==i.length)return t(null);f(i[r],e,n,function(e){e&&e.list.length>0?t(e):a(r+1)})}a(0)};return a.async=!0,a.supportsSelection=!0,a}else if(i=t.getHelper(t.getCursor(),`hintWords`))return function(t){return e.hint.fromList(t,{words:i})};else if(e.hint.anyword)return function(t,n){return e.hint.anyword(t,n)};else return function(){}}e.registerHelper(`hint`,`auto`,{resolve:p}),e.registerHelper(`hint`,`fromList`,function(t,n){var r=t.getCursor(),i=t.getTokenAt(r),a,o=e.Pos(r.line,i.start),s=r;i.start<r.ch&&/\w/.test(i.string.charAt(r.ch-i.start-1))?a=i.string.substr(0,r.ch-i.start):(a=``,o=r);for(var c=[],l=0;l<n.words.length;l++){var u=n.words[l];u.slice(0,a.length)==a&&c.push(u)}if(c.length)return{list:c,from:o,to:s}}),e.commands.autocomplete=e.showHint;var m={hint:e.hint.auto,completeSingle:!0,alignWithWord:!0,closeCharacters:/[\s()\[\]{};:>,]/,closeOnPick:!0,closeOnUnfocus:!0,updateOnCursorActivity:!0,completeOnSingleClick:!0,container:null,customKeys:null,extraKeys:null,paddingForScrollbar:!0,moveOnOverlap:!0};e.defineOption(`hintOptions`,null)})})),Ue=n(((exports,t)=>{(function(n){typeof exports==`object`&&typeof t==`object`?n(be()):typeof define==`function`&&define.amd?define([`../../lib/codemirror`],n):n(CodeMirror)})(function(e){var t=`CodeMirror-lint-markers`,n=`CodeMirror-lint-line-`;function r(t,n,r){var i=document.createElement(`div`);i.className=`CodeMirror-lint-tooltip cm-s-`+t.options.theme,i.appendChild(r.cloneNode(!0)),t.state.lint.options.selfContain?t.getWrapperElement().appendChild(i):document.body.appendChild(i);function a(t){if(!i.parentNode)return e.off(document,`mousemove`,a);var n=Math.max(0,t.clientY-i.offsetHeight-5),r=Math.max(0,Math.min(t.clientX+5,i.ownerDocument.defaultView.innerWidth-i.offsetWidth));i.style.top=n+`px`,i.style.left=r+`px`}return e.on(document,`mousemove`,a),a(n),i.style.opacity!=null&&(i.style.opacity=1),i}function i(e){e.parentNode&&e.parentNode.removeChild(e)}function a(e){e.parentNode&&(e.style.opacity??i(e),e.style.opacity=0,setTimeout(function(){i(e)},600))}function o(t,n,i,o){var s=r(t,n,i);function c(){e.off(o,`mouseout`,c),s&&=(a(s),null)}var l=setInterval(function(){if(s)for(var e=o;;e=e.parentNode){if(e&&e.nodeType==11&&(e=e.host),e==document.body)return;if(!e){c();break}}if(!s)return clearInterval(l)},400);e.on(o,`mouseout`,c)}function s(e,t,n){for(var r in this.marked=[],t instanceof Function&&(t={getAnnotations:t}),(!t||t===!0)&&(t={}),this.options={},this.linterOptions=t.options||{},c)this.options[r]=c[r];for(var r in t)c.hasOwnProperty(r)?t[r]!=null&&(this.options[r]=t[r]):t.options||(this.linterOptions[r]=t[r]);this.timeout=null,this.hasGutter=n,this.onMouseOver=function(t){b(e,t)},this.waitingFor=0}var c={highlightLines:!1,tooltips:!0,delay:500,lintOnChange:!0,getAnnotations:null,async:!1,selfContain:null,formatAnnotation:null,onUpdateLinting:null};function l(e){var n=e.state.lint;n.hasGutter&&e.clearGutter(t),n.options.highlightLines&&u(e);for(var r=0;r<n.marked.length;++r)n.marked[r].clear();n.marked.length=0}function u(e){e.eachLine(function(t){var n=t.wrapClass&&/\bCodeMirror-lint-line-\w+\b/.exec(t.wrapClass);n&&e.removeLineClass(t,`wrap`,n[0])})}function d(t,n,r,i,a){var s=document.createElement(`div`),c=s;return s.className=`CodeMirror-lint-marker CodeMirror-lint-marker-`+r,i&&(c=s.appendChild(document.createElement(`div`)),c.className=`CodeMirror-lint-marker CodeMirror-lint-marker-multiple`),a!=0&&e.on(c,`mouseover`,function(e){o(t,e,n,c)}),s}function f(e,t){return e==`error`?e:t}function p(e){for(var t=[],n=0;n<e.length;++n){var r=e[n],i=r.from.line;(t[i]||(t[i]=[])).push(r)}return t}function m(e){var t=e.severity;t||=`error`;var n=document.createElement(`div`);return n.className=`CodeMirror-lint-message CodeMirror-lint-message-`+t,e.messageHTML===void 0?n.appendChild(document.createTextNode(e.message)):n.innerHTML=e.messageHTML,n}function h(t,n){var r=t.state.lint,i=++r.waitingFor;function a(){i=-1,t.off(`change`,a)}t.on(`change`,a),n(t.getValue(),function(n,o){t.off(`change`,a),r.waitingFor==i&&(o&&n instanceof e&&(n=o),t.operation(function(){_(t,n)}))},r.linterOptions,t)}function g(t){var n=t.state.lint;if(n){var r=n.options,i=r.getAnnotations||t.getHelper(e.Pos(0,0),`lint`);if(i)if(r.async||i.async)h(t,i);else{var a=i(t.getValue(),n.linterOptions,t);if(!a)return;a.then?a.then(function(e){t.operation(function(){_(t,e)})}):t.operation(function(){_(t,a)})}}}function _(e,r){var i=e.state.lint;if(i){var a=i.options;l(e);for(var o=p(r),s=0;s<o.length;++s){var c=o[s];if(c){for(var u=null,h=i.hasGutter&&document.createDocumentFragment(),g=0;g<c.length;++g){var _=c[g],v=_.severity;v||=`error`,u=f(u,v),a.formatAnnotation&&(_=a.formatAnnotation(_)),i.hasGutter&&h.appendChild(m(_)),_.to&&i.marked.push(e.markText(_.from,_.to,{className:`CodeMirror-lint-mark CodeMirror-lint-mark-`+v,__annotation:_}))}i.hasGutter&&e.setGutterMarker(s,t,d(e,h,u,c.length>1,a.tooltips)),a.highlightLines&&e.addLineClass(s,`wrap`,n+u)}}a.onUpdateLinting&&a.onUpdateLinting(r,o,e)}}function v(e){var t=e.state.lint;t&&(clearTimeout(t.timeout),t.timeout=setTimeout(function(){g(e)},t.options.delay))}function y(e,t,n){for(var r=n.target||n.srcElement,i=document.createDocumentFragment(),a=0;a<t.length;a++){var s=t[a];i.appendChild(m(s))}o(e,n,i,r)}function b(e,t){var n=t.target||t.srcElement;if(/\bCodeMirror-lint-mark-/.test(n.className)){for(var r=n.getBoundingClientRect(),i=(r.left+r.right)/2,a=(r.top+r.bottom)/2,o=e.findMarksAt(e.coordsChar({left:i,top:a},`client`)),s=[],c=0;c<o.length;++c){var l=o[c].__annotation;l&&s.push(l)}s.length&&y(e,s,t)}}e.defineOption(`lint`,!1,function(n,r,i){if(i&&i!=e.Init&&(l(n),n.state.lint.options.lintOnChange!==!1&&n.off(`change`,v),e.off(n.getWrapperElement(),`mouseover`,n.state.lint.onMouseOver),clearTimeout(n.state.lint.timeout),delete n.state.lint),r){for(var a=n.getOption(`gutters`),o=!1,c=0;c<a.length;++c)a[c]==t&&(o=!0);var u=n.state.lint=new s(n,r,o);u.options.lintOnChange&&n.on(`change`,v),u.options.tooltips!=0&&u.options.tooltips!=`gutter`&&e.on(n.getWrapperElement(),`mouseover`,u.onMouseOver),g(n)}}),e.defineExtension(`performLint`,function(){g(this)})})})),We=n(((exports,t)=>{(function(n){typeof exports==`object`&&typeof t==`object`?n(be()):typeof define==`function`&&define.amd?define([`../../lib/codemirror`],n):n(CodeMirror)})(function(e){var t=`CodeMirror-activeline`,n=`CodeMirror-activeline-background`,r=`CodeMirror-activeline-gutter`;e.defineOption(`styleActiveLine`,!1,function(t,n,r){var a=r==e.Init?!1:r;n!=a&&(a&&(t.off(`beforeSelectionChange`,s),i(t),delete t.state.activeLines),n&&(t.state.activeLines=[],o(t,t.listSelections()),t.on(`beforeSelectionChange`,s)))});function i(e){for(var i=0;i<e.state.activeLines.length;i++)e.removeLineClass(e.state.activeLines[i],`wrap`,t),e.removeLineClass(e.state.activeLines[i],`background`,n),e.removeLineClass(e.state.activeLines[i],`gutter`,r)}function a(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function o(e,o){for(var s=[],c=0;c<o.length;c++){var l=o[c],u=e.getOption(`styleActiveLine`);if(!(typeof u==`object`&&u.nonEmpty?l.anchor.line!=l.head.line:!l.empty())){var d=e.getLineHandleVisualStart(l.head.line);s[s.length-1]!=d&&s.push(d)}}a(e.state.activeLines,s)||e.operation(function(){i(e);for(var a=0;a<s.length;a++)e.addLineClass(s[a],`wrap`,t),e.addLineClass(s[a],`background`,n),e.addLineClass(s[a],`gutter`,r);e.state.activeLines=s})}function s(e,t){o(e,t.ranges)}})})),Ge=n(((exports,t)=>{(function(n){typeof exports==`object`&&typeof t==`object`?n(be()):typeof define==`function`&&define.amd?define([`../../lib/codemirror`],n):n(CodeMirror)})(function(e){var t={pairs:`()[]{}''""`,closeBefore:`)]}'":;>`,triples:``,explode:`[]{}`},n=e.Pos;e.defineOption(`autoCloseBrackets`,!1,function(t,n,o){o&&o!=e.Init&&(t.removeKeyMap(i),t.state.closeBrackets=null),n&&(a(r(n,`pairs`)),t.state.closeBrackets=n,t.addKeyMap(i))});function r(e,n){return n==`pairs`&&typeof e==`string`?e:typeof e==`object`&&e[n]!=null?e[n]:t[n]}var i={Backspace:c,Enter:l};function a(e){for(var t=0;t<e.length;t++){var n=e.charAt(t),r=`'`+n+`'`;i[r]||(i[r]=o(n))}}a(t.pairs+"`");function o(e){return function(t){return f(t,e)}}function s(e){var t=e.state.closeBrackets;return!t||t.override?t:e.getModeAt(e.getCursor()).closeBrackets||t}function c(t){var i=s(t);if(!i||t.getOption(`disableInput`))return e.Pass;for(var a=r(i,`pairs`),o=t.listSelections(),c=0;c<o.length;c++){if(!o[c].empty())return e.Pass;var l=p(t,o[c].head);if(!l||a.indexOf(l)%2!=0)return e.Pass}for(var c=o.length-1;c>=0;c--){var u=o[c].head;t.replaceRange(``,n(u.line,u.ch-1),n(u.line,u.ch+1),`+delete`)}}function l(t){var n=s(t),i=n&&r(n,`explode`);if(!i||t.getOption(`disableInput`))return e.Pass;for(var a=t.listSelections(),o=0;o<a.length;o++){if(!a[o].empty())return e.Pass;var c=p(t,a[o].head);if(!c||i.indexOf(c)%2!=0)return e.Pass}t.operation(function(){var e=t.lineSeparator()||`
`;t.replaceSelection(e+e,null),u(t,-1),a=t.listSelections();for(var n=0;n<a.length;n++){var r=a[n].head.line;t.indentLine(r,null,!0),t.indentLine(r+1,null,!0)}})}function u(e,t){for(var n=[],r=e.listSelections(),i=0,a=0;a<r.length;a++){var o=r[a];o.head==e.getCursor()&&(i=a);var s=o.head.ch||t>0?{line:o.head.line,ch:o.head.ch+t}:{line:o.head.line-1};n.push({anchor:s,head:s})}e.setSelections(n,i)}function d(t){var r=e.cmpPos(t.anchor,t.head)>0;return{anchor:new n(t.anchor.line,t.anchor.ch+(r?-1:1)),head:new n(t.head.line,t.head.ch+(r?1:-1))}}function f(t,i){var a=s(t);if(!a||t.getOption(`disableInput`))return e.Pass;var o=r(a,`pairs`),c=o.indexOf(i);if(c==-1)return e.Pass;for(var l=r(a,`closeBefore`),f=r(a,`triples`),p=o.charAt(c+1)==i,h=t.listSelections(),g=c%2==0,_,v=0;v<h.length;v++){var y=h[v],b=y.head,x,S=t.getRange(b,n(b.line,b.ch+1));if(g&&!y.empty())x=`surround`;else if((p||!g)&&S==i)x=p&&m(t,b)?`both`:f.indexOf(i)>=0&&t.getRange(b,n(b.line,b.ch+3))==i+i+i?`skipThree`:`skip`;else if(p&&b.ch>1&&f.indexOf(i)>=0&&t.getRange(n(b.line,b.ch-2),b)==i+i){if(b.ch>2&&/\bstring/.test(t.getTokenTypeAt(n(b.line,b.ch-2))))return e.Pass;x=`addFour`}else if(p){var C=b.ch==0?` `:t.getRange(n(b.line,b.ch-1),b);if(!e.isWordChar(S)&&C!=i&&!e.isWordChar(C))x=`both`;else return e.Pass}else if(g&&(S.length===0||/\s/.test(S)||l.indexOf(S)>-1))x=`both`;else return e.Pass;if(!_)_=x;else if(_!=x)return e.Pass}var w=c%2?o.charAt(c-1):i,T=c%2?i:o.charAt(c+1);t.operation(function(){if(_==`skip`)u(t,1);else if(_==`skipThree`)u(t,3);else if(_==`surround`){for(var e=t.getSelections(),n=0;n<e.length;n++)e[n]=w+e[n]+T;t.replaceSelections(e,`around`),e=t.listSelections().slice();for(var n=0;n<e.length;n++)e[n]=d(e[n]);t.setSelections(e)}else _==`both`?(t.replaceSelection(w+T,null),t.triggerElectric(w+T),u(t,-1)):_==`addFour`&&(t.replaceSelection(w+w+w+w,`before`),u(t,1))})}function p(e,t){var r=e.getRange(n(t.line,t.ch-1),n(t.line,t.ch+1));return r.length==2?r:null}function m(e,t){var r=e.getTokenAt(n(t.line,t.ch+1));return/\bstring/.test(r.type)&&r.start==t.ch&&(t.ch==0||!/\bstring/.test(e.getTokenTypeAt(t)))}})}));Ve(),He(),Ue(),We(),Ge(),window.CodeMirror=xe.default,window.Decimal=W,window.Vue=a,String.prototype.includes||(String.prototype.includes=function(e,t){let n=typeof t==`number`?t:0;return n+e.length>this.length?!1:this.indexOf(e,n)!==-1}),Array.prototype.includes||Object.defineProperty(Array.prototype,`includes`,{value(e,t){if(this===null)throw TypeError(`"this" is null or not defined`);let n=Object(this),r=n.length>>>0;if(r===0)return!1;let i=t|0,a=Math.max(i>=0?i:r-Math.abs(i),0);function o(e,t){return e===t||typeof e==`number`&&typeof t==`number`&&isNaN(e)&&isNaN(t)}for(;a<r;){if(o(n[a],e))return!0;a++}return!1}}),Math.log10||(Math.log10=Math.log10||function(e){return Math.log(e)*Math.LOG10E}),Math.log2||(Math.log2=Math.log2||function(e){return Math.log(e)*Math.LOG2E}),window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(e,t){thisArg=t||window;for(let t=0;t<this.length;t++)e.call(thisArg,this[t],t,this)}),Array.prototype.find||Object.defineProperty(Array.prototype,`find`,{value(e){if(this===null)throw TypeError(`"this" is null or not defined`);let t=Object(this),n=t.length>>>0;if(typeof e!=`function`)throw TypeError(`predicate must be a function`);let r=arguments[1],i=0;for(;i<n;){let n=t[i];if(e.call(r,n,i,t))return n;i++}}}),Array.max=function(e){return Math.max.apply(Math,e)},Array.min=function(e){return Math.min.apply(Math,e)},Object.invert=function(e){let t={},n=Object.keys(e);for(let r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t},typeof Object.assign!=`function`&&Object.defineProperty(Object,`assign`,{value:function(e){if(e===null)throw TypeError(`Cannot convert undefined or null to object`);let t=new Object(e);for(let e=1;e<arguments.length;e++){let n=arguments[e];if(n!==null)for(let e in n)Object.hasOwn(n,e)&&(t[e]=n[e])}return t},enumerable:!1,writable:!0,configurable:!0}),Array.prototype.distinct=function(){return this.filter((e,t,n)=>n.indexOf(e)===t)},Math.wrap=function(e,t,n){let r=n-t+1,i=(e-t)%r;return i<0?n+1+i:t+i},Math.clamp=function(e,t,n){return Math.clampMax(Math.clampMin(e,t),n)},Math.clampMin=function(e,t){return Math.max(e,t)},Math.clampMax=function(e,t){return Math.min(e,t)},Array.prototype.nextSiblingIndex=function(e){let t=this.indexOf(e);if(t===-1)throw TypeError(`Current item is not in array`);return t===this.length-1?0:t+1},Array.prototype.nextSibling=function(e){return this[this.nextSiblingIndex(e)]},Array.prototype.previousSiblingIndex=function(e){let t=this.indexOf(e);if(t===-1)throw TypeError(`Current item is not in array`);return t===0?this.length-1:t-1},Array.prototype.previousSibling=function(e){return this[this.previousSiblingIndex(e)]},W.sumReducer=function(e,t){return W.add(e,t)},W.prodReducer=function(e,t){return W.mul(e,t)},Number.sumReducer=function(e,t){return e+t},Number.prodReducer=function(e,t){return e*t},W.maxReducer=function(e,t){return W.max(e,t)},W.prototype.copyFrom=function(e){if(!(e instanceof W)&&!(e instanceof DecimalCurrency))throw TypeError(`Copy value is not Decimal or DecimalCurrency`);this.mag=e.mag,this.layer=e.layer,this.sign=e.sign},W.prototype.expEquiv=function(e,t=!1){return e.abs().lte(1)?new W(0):t?e.max(1).log10().floor():e.max(1).log10()},W.prototype.logPow=function(e){let t=W.fromValue_noAlloc(this).log10();return t=t.pow(e),W.pow10(t)},W.prototype.logRoot=function(e){let t=W.fromValue_noAlloc(this).log10();return t=t.root(e),W.pow10(t)},window.copyToClipboard=function(e){Promise.resolve(navigator.clipboard.writeText(e)).catch(e=>console.error(e))},window.safeCall=function(e){e&&e()},String.prototype.capitalize=function(){return this.toLowerCase().replace(/^\w/u,e=>e.toUpperCase())},String.prototype.splice=function(e,t,n){return this.slice(0,e)+n+this.slice(e+Math.abs(t))},Array.range=function(e,t){return[...Array(t).keys()].map(t=>t+e)},Array.repeat=function(e,t){return Array(t).fill(e)},Array.prototype.first=function(e){if(e===void 0)return this.length>0?this[0]:void 0;if(typeof e!=`function`)throw TypeError(`Predicate must be a function`);for(let t=0;t<this.length;t++)if(e(this[t])===!0)return this[t];throw Error(`Array doesn't contain a matching item`)},Array.prototype.last=function(e){if(e===void 0)return this.length>0?this[this.length-1]:void 0;if(typeof e!=`function`)throw TypeError(`Predicate must be a function`);for(let t=this.length-1;t>=0;t--)if(e(this[t])===!0)return this[t];throw Error(`Array doesn't contain a matching item`)},Array.prototype.mapToObject=function(e,t){if(typeof e!=`function`||typeof t!=`function`)throw TypeError(`keyFun and valueFun must be functions`);let n={};for(let r=0;r<this.length;++r)n[e(this[r],r)]=t(this[r],r);return n},Array.dimensionTiers=Array.range(1,8),Array.prototype.nSum=function(){return this.length===0?0:this.reduce(Number.sumReducer)},Array.prototype.nMax=function(){return this.length===0?0:this.reduce((e,t)=>Math.max(e,t))},Array.prototype.nMin=function(){return this.length===0?0:this.reduce((e,t)=>Math.min(e,t))},Array.prototype.sum=function(){return this.length===0?o.D0:this.reduce(W.sumReducer)},Array.prototype.max=function(){return this.length===0?o.D0:this.reduce((e,t)=>W.max(e,t),0)},Array.prototype.min=function(){return this.length===0?o.D0:this.reduce((e,t)=>W.min(e,t),o.BEMAX)},Array.prototype.countWhere=function(e){let t=0;for(let n of this)e(n)&&++t;return t},W.prototype.clampMaxExponent=function(e){return this.max(1).log10().gte(e)?W.fromMantissaExponent_noNormalize(1,e):this},Number.prototype.toDecimal=function(){return new W(this.valueOf())},Math.log4=Math.log(4),Array.prototype.randomElement=function(){return this[Math.floor(Math.random()*this.length)]},W.prototype.valueOf=()=>{throw Error(`Implicit conversion from Decimal to number`)},Set.prototype.countWhere=function(e){let t=0;for(let n of this)e(n)&&++t;return t},Set.prototype.find=function(e){for(let t of this)if(e(t))return t},Set.prototype.some=function(e){for(let t of this)if(e(t))return!0;return!1},Set.prototype.every=function(e){for(let t of this)if(!e(t))return!1;return!0},Array.prototype.compact=function(){return this.filter(e=>e!=null)},Array.prototype.toBitmask=function(){return this.reduce((e,t)=>e|1<<t,0)},Set.prototype.toBitmask=function(){let e=0;for(let t of this)e|=1<<t;return e},Array.fromBitmask=function(e){let t=[],n=0;for(;e!==0;)e&1&&t.push(n),e>>=1,++n;return t},String.isWhiteSpace=function(e){return e&&!e.trim()};function Ke(){}globalThis.NotImplementedError=class extends Error{constructor(){super(`The method is not implemented.`),this.name=`NotImplementedError`}},globalThis.GlobalErrorHandler={handled:!1,cleanStart:!1,onerror(e){if(!this.handled){if(this.handled=!0,!this.cleanStart){document.querySelector(`#loading`).style.display=`none`,requestAnimationFrame(()=>this.crash(e));return}this.stopGame(),this.crash(e)}},stopGame(){GameKeyboard.disable(),GameIntervals.stop();let e=(e,t)=>{let n=e(Ke,9999);for(;n--;)t(n)};e(setInterval,clearInterval),e(setTimeout,clearTimeout),e(requestAnimationFrame,cancelAnimationFrame)},crash(e){console.error(`Error detected while running game: ${e}`),window.GameUI!==void 0&&GameUI.initialized&&Modal.message.show(`${e}<br>Check the console for more details`,{},3)}},window.addEventListener(`error`,e=>{GlobalErrorHandler.onerror(e.error)}),window.TimeSpan=class e{static fromYears(t){return new e(new Decimal(t).times(31536e6))}static fromDays(t){return new e(new Decimal(t).times(864e5))}static fromHours(t){return new e(new Decimal(t).times(36e5))}static fromMinutes(t){return new e(new Decimal(t).times(6e4))}static fromSeconds(t){return new e(new Decimal(t).times(1e3))}static fromMilliseconds(t){return new e(t)}constructor(e){qe.isDecimal(e,`Value 'ms' must be a decimal`),this._ms=e}copyFrom(e){qe.isTimeSpan(e),this._ms=e._ms}setFrom(e){qe.isDecimal(e),this._ms=Decimal.fromDecimal(e)}get years(){return Decimal.floor(this.totalYears)}get days(){return Decimal.floor(this.totalDays.sub(this.totalDays.div(365).floor().times(365)))}get hours(){return Decimal.floor(this.totalHours.sub(this.totalHours.div(24).floor().times(24)))}get minutes(){return Decimal.floor(this.totalMinutes.sub(this.totalMinutes.div(60).floor().times(60)))}get seconds(){return Decimal.floor(this.totalSeconds.sub(this.totalSeconds.div(60).floor().times(60)))}get milliseconds(){return Decimal.floor(this.totalMilliseconds.sub(this.totalMilliseconds.div(1e3).floor().times(1e3)))}get totalYears(){return this._ms.div(31536e6)}get totalDays(){return this._ms.div(864e5)}get totalHours(){return this._ms.div(1e3).div(60).div(60)}get totalMinutes(){return this._ms.div(1e3).div(60)}get totalSeconds(){return this._ms.div(1e3)}get totalMilliseconds(){return this._ms}plus(t){return qe.isTimeSpan(t),new e(this._ms.add(t._ms))}minus(t){return qe.isTimeSpan(t),new e(this._ms.sub(t._ms))}times(t){return qe.isDecimal(t),new e(this._ms.times(t))}dividedBy(t){return qe.isDecimal(t),new e(this._ms.div(t))}toString(){return this.years.gt(1e6)?`${format(this.totalYears,3,0)} years`:this.totalSeconds.gte(10)?this.toStringNoDecimals():this.toStringShort()}toStringNoDecimals(){let e=[];function t(e,t){e.eq(0)||n(e,t)}function n(t,n){e.push(t.eq(1)?`${formatInt(t)} ${n}`:`${formatInt(t)} ${n}s`)}return t(this.years,`year`),t(this.days,`day`),t(this.hours,`hour`),t(this.minutes,`minute`),t(this.seconds,`second`),e.length===0?`${formatInt(0)} seconds`:[e.slice(0,-1).join(`, `),e.slice(-1)[0]].join(e.length<2?``:` and `)}toStringShort(e=!0,t=!1){if(format(0)===`END`&&!t)return`END`;let n=this.totalSeconds;if(n.gt(5e-7)&&n.lt(.001))return`${format(n.times(1e3),0,3)} ms`;if(n.lt(1))return`${format(n.times(1e3))} ms`;if(n.lt(10))return`${format(n,0,3)} seconds`;if(n.lt(60))return`${format(n,0,2)} seconds`;if(this.totalHours.lt(100)||t&&this.totalHours.lt(1e3)){if(e&&!Notations.current.isPainful){let e=i(this.seconds,this.milliseconds);return Decimal.floor(this.totalHours).eq(0)?`${r(this.minutes)}:${e}`:`${r(Decimal.floor(this.totalHours))}:${r(this.minutes)}:${e}`}if(this.totalMinutes.lt(60))return`${format(this.totalMinutes,0,2)} minutes`;if(this.totalHours.lt(24))return`${format(this.totalHours,0,2)} hours`}if(this.totalDays.lt(500))return`${t?this.totalDays.toFixed(2):format(this.totalDays,0,2)} days`;return`${t?this.totalYears.toFixed(3):format(this.totalYears,3,2)} years`;function r(e){let t=e.toString();return t.length===1?`0${t}`:t}function i(e,n){let i=r(e);return t?`${i}.${Math.floor(n.div(100))}`:i}}toTimeEstimate(){let e=this.totalSeconds;return e.lt(1)?`< ${formatInt(1)} second`:e.gt(86400*365.25)?`> ${formatInt(1)} year`:this.toStringShort()}static get zero(){return new e(new Decimal(`0`))}static get maxValue(){return new e(DC.BEMAX)}static get minValue(){return new e(new Decimal(1).div(DC.BEMAX))}};var qe={isDefined(e,t){if(e===void 0)throw t||Error(`Value is defined`)},isDecimal(e,t){if(!(e instanceof Decimal))throw t||Error(`Value is not a decimal`)},isTimeSpan(e,t){if(!(e instanceof TimeSpan))throw t||Error(`Value is not a TimeSpan`)}};function Je(){let e=GameEnd.endState>=END_STATE_MARKERS.END_NUMBERS?1:(GameEnd.endState-END_STATE_MARKERS.FADE_AWAY)/2;return player.celestials.pelle.doomed&&Math.random()<e}window.format=function(e,t=2,n=2){return Je()?`END`:(l(e)||(e=new Decimal(e)),Decimal.isNaN(e)?`NaN`:e.gte(Number.MAX_VALUE)&&!player.break?`Infinite`:e.lt(`ee100`)?Notations.current.format(e,t,n,3):LNotations.current.formatLDecimal(e,t))},window.formatInt=function(e){return Je()?`END`:typeof e==`number`?e>1e9?format(e,2,2):formatWithCommas(e.toFixed(0)):!(e instanceof Decimal)||e.lt(1e9)?formatWithCommas(e instanceof Decimal?e.toNumber().toFixed(0):1):format(e,2,2)},window.formatFloat=function(e,t){return Je()?`END`:Decimal.gte(e,1e9)?format(e,t):formatWithCommas(e.toFixed(t))},window.formatPostBreak=function(e,t,n){if(Je())return`END`;let r=Notations.current,i=LNotations.current;if(typeof e==`number`&&!Number.isFinite(e))return r.infinite;let a=Decimal.fromValue_noAlloc(e);if(a.eq(0))return r.formatUnder1000(0,n);if(a.abs().log10().lt(-300))return a.sign<0?r.formatVerySmallNegativeDecimal(a.abs(),n):r.formatVerySmallDecimal(a,n);if(a.abs().log10().lt(3)){let e=a.toNumber();return e<0?r.formatNegativeUnder1000(Math.abs(e),n):r.formatUnder1000(e,n)}return a.layer>=2?i.formatLDecimal(a,t):a.sign<0?r.formatNegativeDecimal(a.abs(),t):r.formatDecimal(a,t)},window.formatPlus=function(e,t,n){return`+${format(e,t,n)}`},window.formatX=function(e,t,n){return`×${format(e,t,n)}`},window.formatPow=function(e,t,n){return`^${format(e,t,n)}`},window.formatPercents=function(e,t){return`${format(Decimal.mul(e,100),2,t)}%`},window.formatRarity=function(e){let t=e.mod(1).eq(0)?0:1;return`${format(e,2,t)}%`},window.formatMachines=function(e,t){if(Je())return`END`;let n=[];return Decimal.neq(e,0)&&n.push(format(e,2)),Decimal.neq(t,0)&&n.push(`${format(t,2,2)}i`),Decimal.eq(e,0)&&Decimal.eq(t,0)?format(0):n.join(` + `)},window.formatTet=function(e,t,n){return`^^${format(e,t,n)}`},window.formatEffectPos=function(e,t,n=!0){return e.lt(1e3)?formatInt(e,2,4)+`%`:e.lt(`1e100000`)||t.lt(2)?formatX(e,2,2):e.lt(`10^^100`)&&n||e.lt(`10^^4`)||t.lt(10)?formatPow(e.log10(),2,2):n?formatTet(value.slog(10),2,2):(val=new Decimal(e),val.layer=1,formatInt(Math.floor(e.slog()-1))+`th Expo `+formatPow(val,2,2))},window.formatEffectNeg=function(e,t){return e.gt(.001)?formatInt(e,2,4)+`%`:e.lt(`1e100000`)||t.lt(2)?`/`+format(e.recip(),2,2):e.recip().lt(`10^^4`)||t.lt(10)?formatPow(e.log10(),2,2):(val=new Decimal(e),val.layer=1,formatInt(Math.floor(e.recip().slog().toNumber()-1))+`th Expo `+formatPow(val,2,2))},window.formatEffectAuto=function(e,t){return e.gt(1)?formatEffectPos(e,t):formatEffectNeg(e,t,!1)},window.timeDisplay=function(e){return TimeSpan.fromMilliseconds(e).toString()},window.timeDisplayNoDecimals=function(e){return TimeSpan.fromMilliseconds(e).toStringNoDecimals()},window.timeDisplayShort=function(e){return TimeSpan.fromMilliseconds(e).toStringShort()};var Ye=/\B(?=(\d{3})+(?!\d))/gu;window.formatWithCommas=function(e){let t=e.toString().split(`.`);return t[0]=t[0].replace(Ye,`,`),t.join(`.`)};var Xe=new Map([[/y$/u,`ies`],[/x$/u,`xes`],[/$/u,`s`]]),Ze=new Map([[`Antimatter`,`Antimatter`],[`Dilated Time`,`Dilated Time`]]);window.pluralize=function(e,t,n){if(e===void 0||t===void 0)throw TypeError(`Arguments must be defined`);if(Decimal.eq(t,1))return e;let r=n??Ze.get(e);if(r!==void 0)return r;let i=generatePlural(e);return Ze.set(e,i),i},window.generatePlural=function(e){for(let[t,n]of Xe.entries()){let r=e.replace(t,n);if(e!==r)return r}return e},window.quantify=function(e,t,n,r,i=format){if(e===void 0||t===void 0)throw TypeError(`Arguments must be defined`);let a=i(t,n,r),o=pluralize(e,t);return`${a} ${o}`},window.quantifyInt=function(e,t){if(e===void 0||t===void 0)throw TypeError(`Arguments must be defined`);let n=formatInt(t),r=pluralize(e,t);return`${n} ${r}`},window.makeEnumeration=function(e){if(e.length===0)return``;if(e.length===1)return e[0];if(e.length===2)return`${e[0]} and ${e[1]}`;let t=e.slice(0,-1).join(`, `),n=e[e.length-1];return`${t}, and ${n}`},window.formatWhole=function e(t){return t=new Decimal(t),t.sign<0?`-`+e(t.neg()):t.gte(e9)||t.lte(nearOne)&&!t.eq(zero)?format(t):format(t,0)},window.formatSmall=function(e,t=2,n=3){return Je()?`END`:(l(e)||(e=new Decimal(e)),e.gte(1)?format(e,t,n):e.gte(.01)?format(e,3,3):(e=Qe(e),Notation.scientific.format(e,t,n).replace(/([^(?:e|F| )]*)$/,`-$1`)))};function Qe(e){let t=Decimal.log10(e).ceil(),n=Decimal.div(e,Decimal.pow(10,t));return t=t.neg(),e=new Decimal(10).pow(t).times(n),e}window.formatGain=function(e,t,n=0,r=0){let i=e.plus(t),a=3.1622776601683795,o;return t.eq(0)?`(+${format(0,n,r)}/sec)`:(o=i.plus(10).slog(10).sub(e.plus(10).slog(10)),o.gte(10)||o.gte(a)&&e.gte(`10^^10`)?`(+^^${format(o,n,r)}/sec)`:(o=i.plus(1).log10().plus(1).log10().plus(1).log10().plus(1).log10().div(e.plus(1).log10().plus(1).log10().plus(1).log10().plus(1).log10()).log10(),o.gte(10)||o.gte(a)&&e.gte(`eeee1e1000`)?`(+${format(o.times(Time.realDeltaTime.totalMilliseconds),n,r)} OoM^5/sec)`:(o=i.plus(1).log10().plus(1).log10().plus(1).log10().div(e.plus(1).log10().plus(1).log10().plus(1).log10()).log10(),o.gte(10)||o.gte(a)&&e.gte(`eee1e1000`)?`(+${format(o.times(Time.realDeltaTime.totalMilliseconds),n,r)} OoM^4/sec)`:(o=i.plus(1).log10().plus(1).log10().div(e.plus(1).log10().plus(1).log10()).log10(),o.gte(10)||o.gte(a)&&e.gte(`ee1e1000`)?`(+${format(o.times(Time.realDeltaTime.totalMilliseconds),n,r)} OoM^3/sec)`:(o=i.plus(1).log10().div(e.plus(1).log10()).log10(),o.gte(10)||o.gte(a)&&e.gte(`e1e1000`)?`(+${format(o.times(Time.realDeltaTime.totalMilliseconds),n,r)} OoM^2/sec)`:(o=i.div(e),o.gte(10)||o.gte(a)&&e.gte(`1e1000`)?`(+${format(o.log10().times(Time.realDeltaTime.totalMilliseconds),n,r)} OoM/sec)`:`(+${format(t,n,r)}/sec)`))))))};var $e=e(n(((exports,t)=>{var n=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,1.5056327351493116e-7],r=607/128,i=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];function a(e){if(e<0)return NaN;for(var t=i[0],n=i.length-1;n>0;--n)t+=i[n]/(e+n);var a=e+r+.5;return .5*Math.log(2*Math.PI)+(e+.5)*Math.log(a)-a+Math.log(t)-Math.log(e)}t.exports=function e(t){if(t<.5)return Math.PI/(Math.sin(Math.PI*t)*e(1-t));if(t>100)return Math.exp(a(t));--t;for(var r=n[0],i=1;i<9;i++)r+=n[i]/(t+i);var o=t+7+.5;return Math.sqrt(2*Math.PI)*o**+(t+.5)*Math.exp(-o)*r},t.exports.log=a}))());window.LOG10_MAX_VALUE=Math.log10(Number.MAX_VALUE),window.DLOG10_MAXNUM=Decimal.log10(Number.MAX_VALUE),window.LN_SQRT_2_PI=.5*Math.log(2*Math.PI),window.LOG10_2=Math.log10(2),window.LOG10_E=Math.log10(Math.E),Math.PI_2=Math.PI*2,window.decimalQuadraticSolution=function(e,t,n,r=!1){let i=e.times(2),a=t.neg(),o=t.pow(2),s=e.times(n).times(4),c=o.sub(s).sqrt();return(r?a.sub(c):a.add(c)).div(i)},window.decimalCubicSolution=function(e,t,n,r,i=!1){let a=t.pow(2).sub(e.times(3).times(n)),s=t.pow(3).times(2).sub(e.times(t).times(n).times(9)).add(e.pow(2).times(r).times(27)),c=Decimal.sqrt(s.pow(2).sub(a.pow(3).times(4))).mul(i?-1:1),l=Decimal.cbrt(s.add(c).div(2));return o.D1.div(e.times(3)).neg().times(t.add(l).add(a.div(l)))},window.decimalDepressedCubicSolution=function(e,t){let n=Decimal.cbrt(t.neg().div(2).add(Decimal.sqrt(t.pow(2).div(4).add(e.pow(3).div(27))))),r=Decimal.cbrt(t.neg().div(2).sub(Decimal.sqrt(t.pow(2).div(4).add(e.pow(3).div(27)))));return n.add(r)},window.bulkBuyBinarySearch=function(e,t,n,r=!1){r||console.log(`Bulk Buy Binary Search was used`);let i=t.costFunction,a=t.firstCost===void 0?i(n):t.firstCost,s=t.cumulative===void 0?!0:t.cumulative;if(e.lt(a))return null;let c=1,l;do c*=2,l=i(n+c-1);while(e.gte(l));if(c===2)return{quantity:1,purchasePrice:a};let u=c/2;if(c>2**53-1)throw Error(`Overflow in binary search`);for(;c-u>1;){let t=Math.floor((u+c)/2);e.gte(i(n+t-1))?u=t:c=t}let d=i(n+u-1);if(!s)return{quantity:u,purchasePrice:d};let f=o.D0,p=0;for(let e=u-1;e>0;--e){let t=f.plus(i(n+e-1));if(t.eq(f))break;if(f=t,++p>1e3)throw Error(`unexpected long loop (buggy cost function?)`)}let m=d.plus(f);return e.lt(m)&&(--u,m=f),{quantity:u,purchasePrice:m}},window.dBBBS=function(e,t,n){let r=t.costFunction,i=t.firstCost===void 0?r(n):t.firstCost,a=t.cumulative===void 0?!0:t.cumulative;if(e.lt(i))return null;let o=new Decimal(15.95424252),s=new Decimal(0),c=Decimal.tetrate(10,9e15).times(8999999999999999),l=new Decimal(15.95424252);for(l.layer=Math.floor((c.layer+o.layer)/2);l.layer!==c.layer;){let t=r(l).gt(e);l.layer=Math.ceil((c.layer+o.layer)/2);let n=r(l).gt(e);l.layer=Math.floor((c.layer+o.layer)/2),(t||n)&&(c.layer=Math.floor((c.layer+o.layer)/2)),t||n||(o.layer=Math.floor((c.layer+o.layer)/2)),l.layer=Math.floor((c.layer+o.layer)/2)}for(o=new Decimal(0),c=new Decimal(8999999999999999),l.mag=(c.mag+o.mag)/2;c.mag!==l.mag;){let n=t.costFunction(l).gt(e);n&&(c.mag=(c.layer+o.layer)/2),n||(o.mag=(c.layer+o.layer)/2),l.mag=(c.mag+o.mag)/2}if(l=o.floor(),a&&o.layer===0)for(l=Decimal.max(o.sub(100),0);l.neq(o)&&s.add(t.costFunction(l)).gt(e);)s=s.add(t.costFunction(l)),l=l.add(1);return l.sub(n),l.eq(o)&&(s=t.costFunction(o)),{quantity:o,purchasePrice:s}},window.LinearMultiplierScaling=class{constructor(e,t){this.baseRatio=e,this.growth=t}scale(e){return this.baseRatio*=e,this.growth*=e,this}shift(e){return this.baseRatio+=this.growth*e,this}logTotalMultiplierAfterPurchases(e){if(e===0)return 0;let t=this.growth/this.baseRatio,n=t*e;return(1/t+e-.5)*Math.log1p(n)+e*(Math.log(this.baseRatio)-1)-t*n/(12*(1+n))}purchasesForLogTotalMultiplier(e){if(this.baseRatio<1.01)throw Error(`Ratio is too small for good calculations`);let t=Math.log(this.baseRatio),n=this.growth/this.baseRatio,r=r=>{let i=n*r,a=Math.log1p(i),o=.5*n/(1+i),s=(1/n+r-.5)*a+r*(t-1)-(e+o*i/6),c=a+t-o*(o/3+1),l=o*(2+o*(2+o/3)),u=s/c;return r-2*u/(1+Math.sqrt(1-2*u*l/c))},i=e/t;if(n*i<.01)return r(r(i));let a=this.growth*e+this.baseRatio*(t-1),o=Math.sqrt(2*(a+1)),s=o*(1+.183709519164226*o)/(1+.693791942633232*Math.log1p(.049293492810849*o)),c=((1+s+a)/Math.log1p(s)-this.baseRatio)/this.growth;return r(r(c))}logTotalMultiplierAfterPurchasesBaseline(e){let t=0,n=this.growth/this.baseRatio;for(let r=0;r<e;++r)t+=Math.log1p(n*r);return t+e*Math.log(this.baseRatio)}},window.getCostWithLinearCostScaling=function(e,t,n,r,i){let a=Math.max(0,Math.floor(Math.log(t/n)/Math.log(r))),o=Math.ceil(r**+Math.min(a,e)*n),s=new LinearMultiplierScaling(r,i),c=Math.exp(s.logTotalMultiplierAfterPurchases(Math.max(0,e-a)));return o*c},window.findFirstInfiniteCostPurchase=function(e,t,n,r){let i=1;for(;Number.isFinite(getCostWithLinearCostScaling(i,e,t,n,r));)i*=2;let a=i/2;for(;a<i;){let o=Math.floor((a+i)/2),s=getCostWithLinearCostScaling(o,e,t,n,r);Number.isFinite(s)?a=o+1:i=o}return a},window.LinearCostScaling=class{constructor(e,t,n,r=o.BEMAX,i=!1){i?this._purchases=Decimal.min(Math.floor(e.div(t).log10().div(Math.log10(n).add(1))),r):this._purchases=Decimal.min(Decimal.floor(e.mul(n.sub(1)).div(t).add(1).log10().div(Decimal.log10(n))),r),this._totalCostMultiplier=Decimal.pow(n,this._purchases),i?this._totalCost=t.mul(Decimal.pow(n,this._purchases.sub(1))):this._totalCost=t.mul(Decimal.sub(1,this._totalCostMultiplier)).div(o.D1.sub(n))}get purchases(){return this._purchases}get totalCostMultiplier(){return this._totalCostMultiplier}get totalCost(){return this._totalCost}},window.ExponentialCostScaling=class{constructor(e){if(this._baseCost=e.baseCost,this._baseIncrease=e.baseIncrease,this._costScale=e.costScale,e.purchasesBeforeScaling===void 0&&e.scalingCostThreshold===void 0)throw TypeError(`purchasesBeforeScaling or scalingCostThreshold must be defined`);if(!(e.purchasesBeforeScaling instanceof Decimal||e.scalingCostThreshold instanceof Decimal))throw TypeError(`purchasesBeforeScaling or scalingCostThreshold must be Decimal`);e.purchasesBeforeScaling instanceof Decimal&&(this._purchasesBeforeScaling=e.purchasesBeforeScaling),e.scalingCostThreshold instanceof Decimal&&(this._purchasesBeforeScaling=e.scalingCostThreshold.log10().sub(this._baseCost.log10()).div(this._baseIncrease.log10()).ceil()),this.log={_baseCost:e.baseCost.log10(),_baseIncrease:e.baseIncrease.log10(),_costScale:e.costScale.log10()}}updateData(e){if(this._baseCost=e.baseCost,this._baseIncrease=e.baseIncrease,this._costScale=e.costScale,e.purchasesBeforeScaling===void 0&&e.scalingCostThreshold===void 0)throw TypeError(`purchasesBeforeScaling or scalingCostThreshold must be defined`);if(!(e.purchasesBeforeScaling instanceof Decimal||e.scalingCostThreshold instanceof Decimal))throw TypeError(`purchasesBeforeScaling or scalingCostThreshold must be Decimal`);e.purchasesBeforeScaling instanceof Decimal&&(this._purchasesBeforeScaling=e.purchasesBeforeScaling),e.scalingCostThreshold instanceof Decimal&&(this._purchasesBeforeScaling=e.scalingCostThreshold.log10().sub(this._baseCost.log10()).div(this._baseIncrease.log10()).ceil()),this.log={_baseCost:e.baseCost.log10(),_baseIncrease:e.baseIncrease.log10(),_costScale:e.costScale.log10()}}get costScale(){return this._costScale}set costScale(e){e instanceof Decimal&&(this._costScale=e,this.log._costScale=e.log10())}calculateCost(e){let t=this.log._baseCost,n=this.log._baseIncrease,r=this.log._costScale,i=this._purchasesBeforeScaling;if(e.lte(i))return Decimal.pow10(t.add(n.times(e)));let a=t.add(n.times(e)),o=e.sub(i),s=o.pow(2).add(o).div(2).times(r);return Decimal.pow10(a.add(s))}getMaxBought(e,t,n,r=!0){let i=this.log._baseCost,a=this.log._baseIncrease,o=this.log._costScale,s=this._purchasesBeforeScaling,c=n.log10(),l=t.log10().sub(c);if(l.lte(i.add(a.times(s.floor())))){let t=l.sub(i).div(a).add(1);if(r&&(t=t.floor()),t.lte(e))return null;let o=this.calculateCost(t).log10().add(c);return t=t.sub(e),t=t.times(n),{quantity:t,logPrice:o}}let u=s;l=l.sub(i.add(a.times(s))),l=l.sub(c);let d=new Decimal(0).sub(o).div(2),f=d.sub(a),p=l;if(u=u.add(decimalQuadraticSolution(d,f,p,!0)).add(1),r&&(u=u.floor()),u.lte(e))return null;let m=this.calculateCost(u).log10().add(c);return u=u.sub(e),r&&(u=u.floor()),u=u.times(n),{quantity:u,logPrice:m}}getContinuumValue(e,t){let n=this.getMaxBought(0,e,t,!1);return n&&n.quantity}},window.productLog=function(e){let t=e,n=0;do n=t,t-=1-(1+e*Math.exp(-t))/(1+t);while(Math.abs(t-n)>1e-6*t);return t},window.decimalProductLog=function(e){let t=e,n=new Decimal;do n=t,t=t.add(1).sub(Decimal.pow(Math.E,t.neg()).mul(e).add(1).div(t.add(1)));while(Decimal.abs(t.sub(n)).gt(cur.div(1e6)));return t},window.permutationIndex=function(e,t){let n=1;for(let t=1;t<=e;t++)n*=t;let r=t%n,i=n/e,a=Array.range(0,e),o=[];for(;a.length>0;){let e=Math.floor(r/i),t=r%i;o.push(a.splice(e,1)[0]),r=t,i/=a.length}return o},window.getHybridCostScaling=function(e,t,n,r,i,a,s,c){let l=getCostWithLinearCostScaling(e.toNumber(),t.toNumber(),n.toNumber(),r.toNumber(),i.toNumber());if(Number.isFinite(l))return new Decimal(l);let u=e.sub(findFirstInfiniteCostPurchase(t.toNumber(),n.toNumber(),r.toNumber(),i.toNumber()));return new ExponentialCostScaling({baseCost:a,baseIncrease:s,costScale:c,scalingCostThreshold:o.NUMMAX}).calculateCost(u)},window.logFactorial=function(){let e=Array.range(1,11).map(Math.log),t=[0];for(let n of e)t.push(t[t.length-1]+n);return e=>typeof e!=`number`||e<0?NaN:e<t.length?t[e]:(0,$e.log)(e+1)}(),window.exp1m=function(e){return e.abs().gte(.001)?e.exp().minus(1):e.plus(e.pow(2).div(2)).plus(e.pow(3).div(6)).plus(e.pow(4).div(24)).plus(e.pow(5).div(120))},window.xorshift32Update=function(e){return e^=e<<13,e^=e>>>17,e^=e<<5,e},window.fastRandom=function(){let e=Math.floor(Date.now())%2**32,t=1/2**32;return()=>(e=xorshift32Update(e),e*t+.5)}(),window.normalDistribution=function(){let e=!1,t=0;return(n,r)=>{if(typeof n!=`number`||typeof r!=`number`)return NaN;if(e)return e=!1,n+r*t;let i,a,o;do a=fastRandom()*2-1,o=fastRandom()*2-1,i=a*a+o*o;while(i>=1||i===0);let s=Math.sqrt(-2*Math.log(i)/i);return e=!0,t=o*s,n+r*a*s}}(),window.binomialGeneratorFC=function(){let e=e=>-.08106146679532726+(e+.5)*Math.log1p(e)-e,t=Array.range(0,20).map(t=>logFactorial(t)-e(t));return e=>{if(typeof e!=`number`||e<0)return NaN;if(e<t.length)return t[e];let n=1/(e+1);return(1/12-(1/360-n*n/1260)*(n*n))*n}}(),window.binomialDistributionSmallExpected=function(e,t){let n=t/(1-t),r=(e+1)*n,i=Math.exp(Math.log1p(-t)*e),a=fastRandom(),o=i,s=0;for(;a>o&&(++s,i*=r/s-n,o+i!==o);)o+=i;return s},window.binomialDistribution=function e(t,n){if(n===0)return 0;if(t instanceof Decimal){if(t.log10().lt(300)){let r=typeof n==`number`?n:n.toNumber();return new Decimal(e(t.toNumber(),r))}let r=t.times(n);return r.e>32?r:new Decimal(poissonDistribution(t.times(n)))}let r=t*n;if(r<15)return binomialDistributionSmallExpected(t,n);if(n>.5)return t-e(t,1-n);if(r>1e32)return r;let i=r*(1-n);return i>1e4?Math.round(normalDistribution(r,Math.sqrt(i))):binomialDistributionBTRD(t,n)},window.poissonDistribution=function e(t){return t===0?0:t instanceof Decimal?t.log10().gt(32)?t:new Decimal(e(t.toNumber())):t>1e32?t:t>1e4?poissonDistributionViaNormal(t):t<20?poissonDistributionSmallExpected(t):poissonDistributionPTRD(t)},window.poissonDistributionViaNormal=function(e){let t=normalDistribution(Math.sqrt(e),.5);return Math.floor(t*t)},window.poissonDistributionSmallExpected=function(e){let t=Math.exp(-e),n=t,r=fastRandom(),i=0;for(;r>n&&(++i,t*=e/i,n+t!==n);)n+=t;return i},window.binomialDistributionBTRD=function(e,t){let n=e*t,r=n*(1-t),i=Math.sqrt(r),a=Math.floor(n+t),o=t/(1-t),s=(e+1)*o,c=1.15+2.53*i,l=-.0873+.0248*c+.01*t,u=n+.5,d=(2.83+5.1/c)*i,f=.43,p=.92-4.2/c;for(;;){let t=fastRandom();if(t<=2*f*p){let e=t/p-f;return Math.floor((2*l/(.5-Math.abs(e))+c)*e+u)}let n;if(t>=p)n=fastRandom()-.5;else{let e=t/p-.93;t=fastRandom()*p,n=(e>0?.5:-.5)-e}let i=.5-Math.abs(n),m=Math.floor((2*l/i+c)*n+u);if(m<0||m>e)continue;t*=d/(l/(i*i)+c);let h=Math.abs(m-a);if(h<=40){let e=1;if(a<m)for(let t=a+1;t<=m;++t)e*=s/t-o;else if(a>m)for(let e=m+1;e<=a;++e)t*=s/e-o;if(t<=e)return m;continue}let g=h/r*(((h/3+.625)*h+1/6)/r+.5),_=-h*h/(2*r),v=Math.log(t);if(v<_-g)return m;if(v>_+g)continue;let y=e-a+1,b=e-m+1,x=(a+.5)*Math.log((a+1)/(o*y))+binomialGeneratorFC(a)+binomialGeneratorFC(e-a),S=(e+1)*Math.log(y/b)+(m+.5)*Math.log(b*o/(m+1))-binomialGeneratorFC(m)-binomialGeneratorFC(e-m);if(v<=x+S)return m}},window.poissonDistributionPTRD=function(e){let t=Math.sqrt(e),n=.931+2.53*t,r=-.059+.02483*n,i=1.1239+1.328/(n-3.4),a=.9277-3.6224/(n-2);for(;;){let o=Math.random();if(o<.86*a){let t=o/a-.43;return Math.floor((2*r/(.5-Math.abs(t))+n)*t+e+.445)}let s;if(o>=a)s=fastRandom()-.5;else{let e=o/a-.93;s=(e>0?.5:-.5)-e,o=fastRandom()*a}let c=.5-Math.abs(s);if(c<.013&&c<o)continue;let l=Math.floor((2*r/c+n)*s+e+.445);o*=i/(r/c/c+n);let u=1/l;if(l>=10){let n=(l+.5)*Math.log(e*u)-e-LN_SQRT_2_PI+l-(1/12-u*u/360)*u;if(Math.log(o*t)<=n)return l}else if(Math.log(o)<=l*Math.log(e)-e-logFactorial(l))return l}},window.depressedCubicRealRoots=function(e,t,n){if(e===0)return t===0?[]:[-n/t];if(t/=e,n/=e,n===0){if(t===0)return[0];if(t>0)return[];let e=Math.sqrt(-t);return[e,-e]}if(t===0)return[Math.cbrt(-n)];let r=.25*n*n+t*t*t/27;if(r>=0)return r=Math.sqrt(r),[Math.cbrt(-.5*n+r)+Math.cbrt(-.5*n-r)];let i=2*Math.sqrt(-t/3),a=Math.acos(3*n/(t*i))/3;return[i*Math.cos(a),i*Math.cos(a-2*Math.PI/3),i*Math.cos(a-4*Math.PI/3)]},window.quadraticRealRoots=function(e,t,n){if(e===0)return t===0?[]:[-n/t];if(t===0){let t=n/e;return t>0?[]:[Math.sqrt(-t),-Math.sqrt(-t)]}let r=t*t-4*e*n;if(r<0)return[];if(r===0)return[-t/(2*e)];let i=-t-Math.sign(t)*Math.sqrt(r);return[i/(2*e),2*n/i]},window.cubicRealRoots=function(e,t,n,r){if(e===0)return quadraticRealRoots(t,n,r);if(t===0)return depressedCubicRealRoots(e,n,r);let i=t/(3*e),a=i*i,o=n/e,s=o-3*a,c=2*i*a-i*o+r/e;return depressedCubicRealRoots(1,s,c).map(e=>e-i)},window.testCRR=function(e,t,n,r){let i=cubicRealRoots(e,t,n,r);console.log(i),console.log(i.map(i=>r+i*(n+i*(t+i*e))))},window.depressedQuarticRealRoots=function(e,t,n,r){if(e===0)return quadraticRealRoots(t,n,r);if(r===0){let r=depressedCubicRealRoots(e,t,n);return r.includes(0)||r.push(0),r}if(n===0){let n=quadraticRealRoots(e,t,r),i=[];for(let e of n){if(e<0)continue;e===0?i.push(0):i.push(Math.sqrt(e),-Math.sqrt(e))}return i}t/=e,n/=e,r/=e;let i=cubicRealRoots(8,8*t,2*t*t-8*r,-n*n).max();if(i<=0)return[];let a=Math.sqrt(2*i),o=2*n/a,s=-(2*t+2*i+o),c=[];s>0?c.push(.5*(a+Math.sqrt(s)),.5*(a-Math.sqrt(s))):s===0&&c.push(.5*a);let l=-(2*t+2*i-o);return l>0?c.push(.5*(-a+Math.sqrt(l)),.5*(-a-Math.sqrt(l))):l===0&&c.push(-.5*a),c},window.testDQRR=function(e,t,n,r){let i=depressedQuarticRealRoots(e,t,n,r);console.log(i),console.log(i.map(i=>r+i*(n+i*(t+i*i*e))))},window.solveSimpleBiquadratic=function(e,t,n,r,i,a){let o=[];if(e===0){if(t===0||i===0)return[];let e=-n/t;return r===0?[{x:-a/i,y:e}]:[{x:(-a-r*e*e)/i,y:e}]}if(r===0){if(t===0||i===0)return[];let r=-a/i;return[{x:r,y:(-n-e*r*r)/t}]}if(t===0){let t=quadraticRealRoots(e,0,n);for(let e of t){let t=a+i*e,n=quadraticRealRoots(r,0,t);for(let t of n)o.push({x:e,y:t})}return o}if(i===0){let i=quadraticRealRoots(r,0,a);for(let r of i){let i=n+t*r,a=quadraticRealRoots(e,0,i);for(let e of a)o.push({x:e,y:r})}return o}let s=e/t,c=n/t,l=depressedQuarticRealRoots(r*s*s,2*r*s*c,i,a+r*c*c);for(let e of l)o.push({x:e,y:-(s*e*e+c)});return o},window.testSSBQ=function(e,t,n,r,i,a){console.log({A:e,B:t,C:n,D:r,E:i,F:a});let o=solveSimpleBiquadratic(e,t,n,r,i,a);for(let s of o){let o=e*s.x*s.x+t*s.y+n,c=r*s.y*s.y+i*s.x+a;console.log(`${s.x} ${s.y} ${o} ${c}`)}},window.AffineTransform=class e{constructor(e=1,t=0,n=0,r=1,i=0,a=0){this.a00=e,this.a01=t,this.a10=n,this.a11=r,this.o0=i,this.o1=a}times(t){if(t instanceof e)return new e(this.a00*t.a00+this.a01*t.a10,this.a00*t.a01+this.a01*t.a11,this.a10*t.a00+this.a11*t.a10,this.a10*t.a01+this.a11*t.a11,this.a00*t.o0+this.a01*t.o1+this.o0,this.a10*t.o0+this.a11*t.o1+this.o1);if(t instanceof Vector)return t.transformedBy(this);throw Error(`unsupported operation`)}translated(t,n){return t instanceof Vector?new e(this.a00,this.a01,this.a10,this.a11,this.o0+t.x,this.o1+t.y):new e(this.a00,this.a01,this.a10,this.a11,this.o0+t,this.o1+n)}rotated(t){return e.rotation(t).times(this)}scaled(t){return e.scale(t).times(this)}get withoutTranslation(){return new e(this.a00,this.a01,this.a10,this.a11)}static translation(t,n){return t instanceof Vector?new e(1,0,0,1,t.x,t.y):new e(1,0,0,1,t,n)}static rotation(t){let n=Math.cos(t),r=Math.sin(t);return new e(n,-r,r,n)}static scale(t){return new e(t,0,0,t)}static identity(){return new e}},window.Vector=class e{constructor(e,t){this.x=e,this.y=t}get length(){return Math.sqrt(this.x*this.x+this.y*this.y)}plus(t){return new e(this.x+t.x,this.y+t.y)}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}minus(t){return new e(this.x-t.x,this.y-t.y)}times(t){return new e(this.x*t,this.y*t)}asTranslate(){return`translate(${this.x}, ${this.y})`}asRotate(){return`rotate(${180/Math.PI*Math.atan2(this.y,this.x)})`}toString(){return`${this.x}, ${this.y}`}round(t){return new e(Math.round(this.x*t)/t,Math.round(this.y*t)/t)}get copy(){return new e(this.x,this.y)}matrixTransform(t,n,r,i){return new e(t*this.x+n*this.y,r*this.x+i*this.y)}transformedBy(t){return new e(t.a00*this.x+t.a01*this.y+t.o0,t.a10*this.x+t.a11*this.y+t.o1)}get negative(){return new e(-this.x,-this.y)}get normalized(){return this.times(1/this.length)}get right90(){return new e(this.y,-this.x)}get left90(){return new e(-this.y,this.x)}get angle(){return Math.atan2(this.y,this.x)}static horiz(t){return new e(t,0)}static unitFromRadians(t){return new e(Math.cos(t),Math.sin(t))}static unitFromDegrees(t){return e.unitFromRadians(t*Math.PI/180)}},window.Curve=class{position(){throw new NotImplementedError}derivative(){throw new NotImplementedError}secondDerivative(){throw new NotImplementedError}curvature(e){let t=this.derivative(e),n=this.secondDerivative(e),r=t.length;return t.cross(n)/(r*r*r)}shapeAt(e){let t=this.derivative(e);return{t:e,position:this.position(e),derivative:t,direction:t.normalized,curvature:this.curvature(e)}}minimumDistanceTo(e,t,n){let r=.5*(t+n),i=Math.max(Math.abs(n),Math.abs(t))*2**-52*16;for(let a=0;;++a){let o=this.position(r),s=this.derivative(r),c=this.secondDerivative(r),l=o.minus(e),u=l.length,d=l.dot(s)*2;d>0?n=r:t=r;let f=(l.dot(c)+s.dot(s))*2,p=f<0?-u/d:-d/f;if(Math.abs(p)<i||a>=16)return u;r=Math.clamp(r+p,t,n)}}},window.LinearPath=class e extends Curve{constructor(e,t){super(),this.p0=e.copy,this.p1=t.copy}position(e){return this.p0.times(1-e).plus(this.p1.times(e))}derivative(){return this.p1.minus(this.p0)}secondDerivative(){return new Vector(0,0)}curvature(e){return 0}trimStart(t){let n=this.p1.minus(this.p0).normalized;return new e(this.p0.plus(n.times(t)),this.p1)}trimEnd(t){let n=this.p1.minus(this.p0).normalized;return new e(this.p0,this.p1.minus(n.times(t)))}transformed(t){return new e(this.p0.transformedBy(t),this.p1.transformedBy(t))}get relativeSVG(){let e=this.p1.minus(this.p0);return`l ${e.x} ${e.y}\n`}createOffsetLine(t,n=0,r=1){let i=this.p1.minus(this.p0).normalized.right90.times(t);return new e(this.position(n).plus(i),this.position(r).plus(i))}static connectCircles(t,n,r,i){let a=r.minus(t).normalized;return new e(t.plus(a.times(n)),r.minus(a.times(i)))}};var et=class e extends Curve{constructor(e,t,n,r){super(),this.p0=e.copy,this.p1=t.copy,this.p2=n.copy,this.p3=r.copy}position(e){let t=(1-e)*(1-e),n=e*e;return this.p0.times((1-e)*t).plus(this.p1.times(3*e*t)).plus(this.p2.times(3*n*(1-e))).plus(this.p3.times(n*e))}derivative(e){return this.p1.minus(this.p0).times(3*(1-e)*(1-e)).plus(this.p2.minus(this.p1).times(6*e*(1-e))).plus(this.p3.minus(this.p2).times(3*e*e))}secondDerivative(e){return this.p2.minus(this.p1.times(2)).plus(this.p0).times(6*(1-e)).plus(this.p3.minus(this.p2.times(2)).plus(this.p1).times(6*e))}transformed(t){return new e(this.p0.transformedBy(t),this.p1.transformedBy(t),this.p2.transformedBy(t),this.p3.transformedBy(t))}get relativeSVG(){let e=this.p1.minus(this.p0),t=this.p2.minus(this.p0),n=this.p3.minus(this.p0);return`c ${e.x} ${e.y} ${t.x} ${t.y} ${n.x} ${n.y}\n`}get reverse(){return new e(this.p3,this.p2,this.p1,this.p0)}static fitCurveSection(t,n){let r=n.position.minus(t.position),i=t.t>n.t,a=t.direction.cross(n.direction),o=solveSimpleBiquadratic(1.5*t.curvature,a,-t.direction.cross(r),1.5*n.curvature,a,n.direction.cross(r));return o=i?o.filter(e=>e.x<=0&&e.y<=0):o.filter(e=>e.x>=0&&e.y>=0),o.length===0?null:new e(t.position,t.position.plus(t.direction.times(o[0].x)),n.position.minus(n.direction.times(o[0].y)),n.position)}};window.OffsetCurve=class extends Curve{constructor(e,t){super(),this.base=e,this.offset=t}position(e){let t=this.base.position(e),n=this.base.derivative(e);return t.plus(n.normalized.right90.times(this.offset))}derivative(e){return this.base.derivative(e)}curvature(e){return 1/(1/this.base.curvature(e)+this.offset)}shapeAt(e){let t=this.base.shapeAt(e);return{t:t.t,position:t.position.plus(t.direction.right90.times(this.offset)),derivative:t.derivative,direction:t.direction,curvature:t.curvature/(1+this.offset*t.curvature)}}},window.LogarithmicSpiral=class e extends Curve{constructor(e,t,n){super(),this.center=e,this.scale=t,this.rate=n}position(e){return Vector.unitFromRadians(e).times(this.scale*Math.exp(this.rate*e)).plus(this.center)}derivative(e){let t=Vector.unitFromRadians(e),n=this.scale*Math.exp(this.rate*e);return t.times(n*this.rate).plus(t.left90.times(n))}secondDerivative(e){let t=Vector.unitFromRadians(e),n=this.scale*Math.exp(this.rate*e);return t.times(n*(this.rate*this.rate-1)).plus(t.left90.times(2*n*this.rate))}shapeAt(e){let t=Vector.unitFromRadians(e),n=this.scale*Math.exp(this.rate*e),r=t.times(n),i=r.times(this.rate).plus(r.left90);return{t:e,position:r.plus(this.center),derivative:i,direction:i.normalized,curvature:1/(Math.abs(n)*Math.sqrt(1+this.rate*this.rate))}}angleFromRadius(e){return Math.log(e/this.scale)/this.rate}static fromPolarEndpoints(t,n,r,i,a){let o=Math.log(a/r)/(i-n);return new e(t,r/Math.exp(o*n),o)}},window.PiecewisePath=class e{constructor(e){this.path=e||[]}push(e){this.path.push(e)}transformedBy(t){return new e(this.path.map(e=>e.transformed(t)))}toSVG(e){let t=this.path[0].position(0),n=[`${e} ${t.x} ${t.y}\n`];for(let e of this.path)n.push(e.relativeSVG);return n.join(``)}static cubicBezierFitToCurveSection(t,n,r,i=1,a=1){let o=new e,s=t.shapeAt(n),c=t.shapeAt(r);function l(e,n,r=8){let i=t.shapeAt(.5*(e.t+n.t));return u(e,i,r-1)&&u(i,n,r-1)}function u(e,n,r=8){let a=et.fitCurveSection(e,n);if(a===null){if(r<=0)throw Error(`coulnd't decompose curve`);return l(e,n,r)}let s=.5*(e.t+n.t);return a.minimumDistanceTo(t.position(s),0,1)>i?l(e,n,r):(o.push(a),!0)}return a>1?l(s,c):u(s,c),o}},window.ExponentialMovingAverage=class{constructor(e=.02,t=5,n=3,r=.4){this.alpha=e,this.maxOutliers=t,this.highOutlierThreshold=n,this.lowOutlierThreshold=r,this.outliers=0,this._average=new Decimal(0)}get average(){return this._average.eq(0)?0:this._average}addValue(e){if(this._average.eq(0))this._average=e;else{this._average=this._average.add(e.sub(this._average).mul(this.average));let t=Decimal.abs(e),n=Decimal.abs(this._average),r=t.gt(n.mul(this.highOutlierThreshold)),i=t.lt(n.mul(this.lowOutlierThreshold));r||i?(this.outliers++,this.outliers>=this.maxOutliers&&(this._average=e,this.outliers=0)):this.outliers=0}}},window.Async={_enabled:!0,get enabled(){return this._enabled},set enabled(e){this._enabled=e},runForTime(e,t,n){let r=n.batchSize||1,i=n.maxTime,a=Date.now();for(let n=t;n>0;){for(let t=0;t<Math.min(n,r);++t)e(n),--n;if(Date.now()-a>=i)return n}return 0},sleepPromise:e=>new Promise(t=>setTimeout(t,e)),run(e,t,n){if(this.enabled){this.enabled=!1;let r=this._run(e,t,n);return n.then?r.then(()=>{n.then(),this.enabled=!0}):r}for(let n=0;n<t;++n)e(n);return n.then&&n.then(),!1},async _run(e,t,n){n.progress||={},n.progress.maxIter=t,n.progress.remaining=this.runForTime(e,n.progress.maxIter,n);let r=n.sleepTime||1;if(n.progress.remaining){n.asyncEntry&&n.asyncEntry(n.progress.maxIter-n.progress.remaining);do await this.sleepPromise(r),n.progress.remaining=this.runForTime(e,n.progress.remaining,n),n.asyncProgress&&n.asyncProgress(n.progress.maxIter-n.progress.remaining);while(n.progress.remaining>0);n.asyncExit&&n.asyncExit()}}},globalThis.EventHub=class e{constructor(){this._handlers={}}on(e,t,n){let r=this._handlers[e];r===void 0&&(r=[],this._handlers[e]=r),r.push({fn:t,target:n})}offAll(e){for(let t of Object.keys(this._handlers))this._handlers[t]=this._handlers[t].filter(t=>t.target!==e)}dispatch(e,t){let n=this._handlers[e];if(n!==void 0)for(let e of n)e.fn(t)}static dispatch(t,...n){e.logic.dispatch(t,n),GameUI.dispatch(t,n)}static get stats(){function t(e){return Object.values(e._handlers).map(e=>e.length).sum()}return`UI(UPDATE/Total): ${e.ui._handlers[GAME_EVENT.UPDATE].length}/${t(e.ui)}; Logic(Total): ${t(e.logic)}`}},EventHub.logic=new EventHub,EventHub.ui=new EventHub,window.GAME_EVENT={GAME_TICK_BEFORE:`GAME_TICK_BEFORE`,GAME_TICK_AFTER:`GAME_TICK_AFTER`,REPLICANTI_TICK_BEFORE:`REPLICANTI_TICK_BEFORE`,REPLICANTI_TICK_AFTER:`REPLICANTI_TICK_AFTER`,DIMBOOST_BEFORE:`DIMBOOST_BEFORE`,DIMBOOST_AFTER:`DIMBOOST_AFTER`,GALAXY_RESET_BEFORE:`GALAXY_RESET_BEFORE`,GALAXY_RESET_AFTER:`GALAXY_RESET_AFTER`,SACRIFICE_RESET_BEFORE:`SACRIFICE_RESET_BEFORE`,SACRIFICE_RESET_AFTER:`SACRIFICE_RESET_AFTER`,BIG_CRUNCH_BEFORE:`BIG_CRUNCH_BEFORE`,BIG_CRUNCH_AFTER:`BIG_CRUNCH_AFTER`,ETERNITY_RESET_BEFORE:`ETERNITY_RESET_BEFORE`,ETERNITY_RESET_AFTER:`ETERNITY_RESET_AFTER`,META_DIMBOOST_BEFORE:`META_DIMBOOST_BEFORE`,META_DIMBOOST_AFTER:`META_DIMBOOST_AFTER`,QUANTUM_RESET_BEFORE:`QUANTUM_RESET_BEFORE`,QUANTUM_RESET_AFTER:`QUANTUM_RESET_AFTER`,REALITY_RESET_BEFORE:`REALITY_RESET_BEFORE`,REALITY_RESET_AFTER:`REALITY_RESET_AFTER`,SINGULARITY_RESET_BEFORE:`SINGULARITY_RESET_BEFORE`,SINGULARITY_RESET_AFTER:`SINGULARITY_RESET_AFTER`,ARMAGEDDON_BEFORE:`ARMAGEDDON_BEFORE`,ARMAGEDDON_AFTER:`ARMAGEDDON_AFTER`,GLYPHS_EQUIPPED_CHANGED:`GLYPHS_EQUIPPED_CHANGED`,GLYPHS_CHANGED:`GLYPHS_CHANGED`,GLYPH_SACRIFICED:`GLYPH_SACRIFICED`,GLYPH_SET_SAVE_CHANGE:`GLYPH_SET_SAVE_CHANGE`,GLYPH_VISUAL_CHANGE:`GLYPH_VISUAL_CHANGE`,BREAK_INFINITY:`BREAK_INFINITY`,FIX_INFINITY:`FIX_INFINITY`,INFINITY_DIMENSION_UNLOCKED:`INFINITY_DIMENSION_UNLOCKED`,INFINITY_CHALLENGE_COMPLETED:`INFINITY_CHALLENGE_COMPLETED`,INFINITY_UPGRADE_BOUGHT:`INFINITY_UPGRADE_BOUGHT`,INFINITY_UPGRADE_CHARGED:`INFINITY_UPGRADE_CHARGED`,INFINITY_UPGRADES_DISCHARGED:`INFINITY_UPGRADES_DISCHARGED`,ACHIEVEMENT_UNLOCKED:`ACHIEVEMENT_UNLOCKED`,CHALLENGE_FAILED:`CHALLENGE_FAILED`,REALITY_UPGRADE_BOUGHT:`REALITY_UPGRADE_BOUGHT`,REALITY_UPGRADE_TEN_BOUGHT:`REALITY_UPGRADE_TEN_BOUGHT`,PERK_BOUGHT:`PERK_BOUGHT`,BLACK_HOLE_UNLOCKED:`BLACK_HOLE_UNLOCKED`,BLACK_HOLE_UPGRADE_BOUGHT:`BLACK_HOLE_UPGRADE_BOUGHT`,GAME_LOAD:`GAME_LOAD`,OFFLINE_CURRENCY_GAINED:`OFFLINE_CURRENCY_GAINED`,SAVE_CONVERTED_FROM_PREVIOUS_VERSION:`SAVE_CONVERTED_FROM_PREVIOUS_VERSION`,REALITY_FIRST_UNLOCKED:`REALITY_FIRST_UNLOCKED`,AUTOMATOR_TYPE_CHANGED:`AUTOMATOR_TYPE_CHANGED`,AUTOMATOR_SAVE_CHANGED:`AUTOMATOR_SAVE_CHANGED`,AUTOMATOR_CONSTANT_CHANGED:`AUTOMATOR_CONSTANT_CHANGED`,PELLE_STRIKE_UNLOCKED:`PELLE_STRIKE_UNLOCKED`,ACHIEVEMENT_EVENT_OTHER:`ACHIEVEMENT_EVENT_OTHER`,ENTER_PRESSED:`ENTER_PRESSED`,ARROW_KEY_PRESSED:`ARROW_KEY_PRESSED`,UPDATE:`UPDATE`,TAB_CHANGED:`TAB_CHANGED`,CLOSE_MODAL:`CLOSE_MODAL`};var tt=class{constructor(e,t,n){if(e===void 0||this.isCustomEffect)return;let r=e=>typeof e==`function`,i=e=>typeof e==`number`,a=e=>e instanceof Decimal,o=e=>i(e)||a(e);if(!r(e)&&!o(e))throw Error(`Unknown effect value type.`);let s=()=>({configurable:!1}),c=(e,t)=>{if(o(t))e.writable=!1,e.value=t;else if(r(t))e.get=t;else throw Error(`Unknown getter type.`)};if(n!==void 0){if(!r(n))throw Error(`Effect condition must be a function.`);let e=s();e.get=n,Object.defineProperty(this,`isEffectConditionSatisfied`,e)}let l=s();if(c(l,e),Object.defineProperty(this,`uncappedEffectValue`,l),t!==void 0){let e=s();c(e,t),Object.defineProperty(this,`cap`,e)}let u=s();c(u,e),o(t)?i(e)?u.get=()=>Math.min(e,this.cap):a(e)?u.get=()=>Decimal.min(e,this.cap):r(e)&&(u.configurable=!0,u.get=()=>{let t=e(),n=s();if(i(t))n.get=()=>Math.min(e(),this.cap);else if(a(t))n.get=()=>Decimal.min(e(),this.cap);else throw Error(`Unknown effect value type.`);return Object.defineProperty(this,`effectValue`,n),n.get()}):r(t)&&(i(e)?u.get=()=>{let t=this.cap;return t===void 0?e:Math.min(e,t)}:a(e)?u.get=()=>{let t=this.cap;return t===void 0?e:Decimal.min(e,t)}:r(e)&&(u.configurable=!0,u.get=()=>{let t=e(),n=s();if(i(t))n.get=()=>{let t=this.cap;return t===void 0?e():Math.min(e(),t)};else if(a(t))n.get=()=>{let t=this.cap;return t===void 0?e():Decimal.min(e(),t)};else throw Error(`Unknown effect value type.`);return Object.defineProperty(this,`effectValue`,n),n.get()})),Object.defineProperty(this,`effectValue`,u)}get effectValue(){throw Error(`Effect is undefined.`)}get uncappedEffectValue(){throw Error(`Effect is undefined.`)}get cap(){throw Error(`Cap is undefined.`)}get isEffectConditionSatisfied(){return!0}get isEffectActive(){return!0}get canBeApplied(){return this.isEffectActive&&this.isEffectConditionSatisfied}effectOrDefault(e){return this.canBeApplied?this.effectValue:e}applyEffect(e){this.canBeApplied&&e(this.effectValue)}get isCustomEffect(){return!1}};const nt={sum(...e){let t=o.D0;return rt(e,e=>t=t.add(e)),t},nSum(...e){let t=0;return rt(e,e=>t+=e),t},product(...e){let t=o.D1;return rt(e,e=>t=t.times(e)),t},last(e,...t){l(e)||(e=new Decimal(e));let n=e,r=!1,i=t.filter(e=>e!=null).toReversed(),a=e=>{n=e,r=!0};for(let e of i)if(e.applyEffect(a),r)break;return n},max(e,...t){l(e)||(e=new Decimal(e));let n=e;return rt(t,e=>n=Decimal.max(n,e)),n},nMax(e,...t){let n=e;return rt(t,e=>n=Math.max(n,e)),n},min(e,...t){l(e)||(e=new Decimal(e));let n=e;return rt(t,e=>n=Decimal.min(n,e)),n},nMin(e,...t){let n=e;return rt(t,e=>n=Math.min(n,e)),n}};Decimal.prototype.plusEffectOf=function(e){let t=this;return e.applyEffect(e=>t=t.plus(e)),t},Decimal.prototype.plusEffectsOf=function(...e){let t=this;return rt(e,e=>t=t.plus(e)),t},Decimal.prototype.minusEffectOf=function(e){let t=this;return e.applyEffect(e=>t=t.minus(e)),t},Decimal.prototype.minusEffectsOf=function(...e){let t=this;return rt(e,e=>t=t.minus(e)),t},Decimal.prototype.timesEffectOf=function(e){let t=this;return e.applyEffect(e=>t=t.times(e)),t},Decimal.prototype.timesEffectsOf=function(...e){let t=this;return rt(e,e=>t=t.times(e)),t},Decimal.prototype.dividedByEffectOf=function(e){let t=this;return e.applyEffect(e=>t=t.dividedBy(e)),t},Decimal.prototype.dividedByEffectsOf=function(...e){let t=this;return rt(e,e=>t=t.dividedBy(e)),t},Decimal.prototype.powEffectOf=function(e){let t=this;return e.applyEffect(e=>t=t.pow(e)),t},Decimal.prototype.powEffectsOf=function(...e){let t=this;return rt(e,e=>t=t.pow(e)),t};function rt(e,t){for(let n of e)n?.applyEffect(t)}var it=class extends tt{constructor(e){if(!e)throw Error(`Must specify config for GameMechanicState`);if(super(e.effect,e.cap,e.effectCondition),this._config=e,e.effects!==void 0)for(let t in this.effects={},e.effects){if(!Object.hasOwn(e.effects,t))continue;let n=e.effects[t],r=typeof n==`number`||typeof n==`function`||n instanceof Decimal?new tt(n):new tt(n.effect,n.cap,n.effectCondition);Object.defineProperty(r,`isEffectActive`,{configurable:!1,get:()=>this.isEffectActive}),this.effects[t]=r}}get config(){return this._config}get id(){return this.config.id}registerEvents(e,t){if(e!==void 0)for(let n of Array.isArray(e)?e:[e])EventHub.logic.on(n,t,this)}static createAccessor(e){let t=mapGameData(e,e=>new this(e)),n=e=>t[e];return n.index=t,n}},at=class extends it{constructor(e){if(super(e),this.id<0||this.id>31)throw Error(`Id ${this.id} out of bit range`)}get bits(){throw new NotImplementedError}set bits(e){throw new NotImplementedError}get isUnlocked(){return!!(this.bits&1<<this.id)}get canBeApplied(){return this.isUnlocked&&this.isEffectActive}get canBeUnlocked(){return!this.isUnlocked}onUnlock(){}unlock(){this.canBeUnlocked&&(this.bits|=1<<this.id,this.onUnlock())}},ot=class extends it{get currency(){throw new NotImplementedError}get isAffordable(){return this.currency.gte(this.cost)}get isAvailableForPurchase(){return!0}get isRebuyable(){return!1}get cost(){return this.config.cost}get isBought(){throw new NotImplementedError}set isBought(e){throw new NotImplementedError}get canBeBought(){return!this.isBought&&this.isAffordable&&this.isAvailableForPurchase}purchase(){return this.canBeBought?(this.currency.subtract(this.cost),this.isBought=!0,this.onPurchased(),GameUI.update(),!0):!1}onPurchased(){}get isEffectActive(){return this.isBought}},st=class extends ot{get set(){throw new NotImplementedError}get isBought(){return this.set.has(this.id)}set isBought(e){e?this.set.add(this.id):this.set.delete(this.id)}},ct=class extends ot{get bits(){throw new NotImplementedError}set bits(e){throw new NotImplementedError}get bitIndex(){throw new NotImplementedError}get isBought(){return(this.bits&1<<this.bitIndex)!=0}set isBought(e){e?this.bits|=1<<this.bitIndex:this.bits&=~(1<<this.bitIndex)}},lt=class extends it{get currency(){throw new NotImplementedError}get isAffordable(){return this.currency.gte(this.cost)}get cost(){return this.config.cost()}get isAvailableForPurchase(){return!0}get isCapped(){return!1}get isRebuyable(){return!0}get boughtAmount(){throw new NotImplementedError}set boughtAmount(e){throw new NotImplementedError}get isEffectActive(){return s(this.boughtAmount)?this.boughtAmount>0:this.boughtAmount.gt(0)}get canBeBought(){return this.isAffordable&&this.isAvailableForPurchase&&!this.isCapped}purchase(){return!this.canBeBought||GameEnd.creditsEverClosed?!1:(this.currency.subtract(this.cost),this.boughtAmount=s(this.boughtAmount)?this.boughtAmount+1:this.boughtAmount.add(1),this.onPurchased(),GameUI.update(),!0)}onPurchased(){}},ut=t({BitPurchasableMechanicState:()=>ct,BitUpgradeState:()=>at,Effect:()=>tt,Effects:()=>nt,GameMechanicState:()=>it,PurchasableMechanicState:()=>ot,RebuyableMechanicState:()=>lt,SetPurchasableMechanicState:()=>st}),G=class e{constructor(t){e.checkInputs(t),this.id=t.id,this.intID=t.intID,this.isGenerated=t.isGenerated,this.glyphTypes=t.glyphTypes,this._singleDesc=t.singleDesc,this._totalDesc=t.totalDesc??t.singleDesc,this._genericDesc=t.genericDesc??t.singleDesc.replace(`{value}`,`x`),this._shortDesc=t.shortDesc,this.effect=t.effect,this.formatEffect=t.formatEffect??(e=>format(e,3,3)),this.formatSingleEffect=t.formatSingleEffect||this.formatEffect,this.combine=e.setupCombine(t),this.conversion=t.conversion,this.formatSecondaryEffect=t.formatSecondaryEffect||(e=>format(e,3,3)),this.formatSingleSecondaryEffect=t.formatSingleSecondaryEffect||this.formatSecondaryEffect,this.alteredColor=t.alteredColor,this.alterationType=t.alterationType,this._biggerIsBetter=void 0,this._enabledInDoomed=t.enabledInDoomed??!1}get biggerIsBetter(){return this._biggerIsBetter===void 0&&(this._biggerIsBetter=this.checkBiggerIsBetter()),this._biggerIsBetter}get singleDesc(){let e=this._singleDesc;return typeof e==`function`?e():e}get totalDesc(){let e=this._totalDesc;return typeof e==`function`?e():e}get genericDesc(){let e=this._genericDesc;return typeof e==`function`?e():e}get shortDesc(){let e=this._shortDesc;return typeof e==`function`?e():e}get isDisabledByDoomed(){return Pelle.isDoomed&&!this._enabledInDoomed}compareValues(e,t){let n=Decimal.compare(e,t);return this.biggerIsBetter?n:-n}checkBiggerIsBetter(){let e=new Decimal(this.effect(new Decimal(1),new Decimal(1.01)));return new Decimal(this.effect(new Decimal(100),new Decimal(2))).gt(e)}static checkInputs(e){let t=new Set([`id`,`intID`,`glyphTypes`,`singleDesc`,`totalDesc`,`genericDesc`,`effect`,`formatEffect`,`formatSingleEffect`,`combine`,`softcap`,`conversion`,`formatSecondaryEffect`,`formatSingleSecondaryEffect`,`alteredColor`,`alterationType`,`isGenerated`,`shortDesc`,`enabledInDoomed`]),n=Object.keys(e).find(e=>!t.has(e));if(n!==void 0)throw Error(`Glyph effect "${e.id}" includes unrecognized field "${n}"`);let r=e.glyphTypes.find(e=>!j.glyphTypes.includes(e()));if(r!==void 0)throw Error(`Glyph effect "${e.id}" references unknown glyphType "${r}"`);let i=e.combine([]);if(typeof i!=`number`&&!(i instanceof Decimal)){if(i.value===void 0||i.capped===void 0)throw Error(`The combine function for Glyph effect "${e.id}" has invalid return type`);if(e.softcap)throw Error(`The combine function for Glyph effect "${e.id}" gives capped information, but there's also a softcap method`)}}static setupCombine(e){let t=e.combine,n=e.softcap,r=t([]);if(typeof r==`number`)return n===void 0?e=>({value:t(e),capped:!1}):e=>{let r=t(e),i=n(r);return{value:i,capped:r!==i}};if(r instanceof Decimal){if(n===void 0)return e=>({value:t(e),capped:!1});let e=r.value instanceof Decimal?(e,t)=>e.neq(t):(e,t)=>e!==t;return t=r=>{let i=t(r),a=n(i.value);return{value:a,capped:i.capped||e(i.value,a)}}}return t}};const dt=[0,9e3,15e3,25e3],ft=mapGameDataToObject(A.reality.glyphEffects,e=>new G(e));function pt(e){return e.reduce((e,t)=>e+(1<<ft[t].bitmaskIndex),0)}function mt(){throw Error(`Moved to getGlyphEffectsFromArray`)}function ht(e){return orderedEffectList.map(e=>ft[e]).filter(t=>e.includes(t.id))}function gt(e){return mt(e).map(e=>e.id)}var _t=D({name:`AutomatorButton`},function(){var e=this,t=e._self._c;return t(`button`,{staticClass:`c-automator__button l-automator__button fas`,on:{click:e.emitClick}})},[],!1,null,`9086e8e0`,null,null).exports,K={name:`AutomatorDataTransferSingleEntry`,props:{script:{type:Object,required:!0}},data(){return{presets:[],constants:[],hidePresets:!0,hideConstants:!0}},computed:{presetData:()=>player.timestudy.presets,constantData:()=>player.reality.automator.constants,hasPresets(){return(this.presets?.length??0)!==0},hasConstants(){return(this.constants?.length??0)!==0}},methods:{update(){this.presets=AutomatorBackend.getUsedPresets(this.script.id),this.constants=AutomatorBackend.getUsedConstants(this.script.id)},iconClass(e){return e?`far fa-plus-square`:`far fa-minus-square`},exportData(e){let t=AutomatorBackend.exportFullScriptData(e);t?(copyToClipboard(t),GameUI.notify.automator(`Exported all data associated with "${this.script.name}" to your clipboard`,6e3)):GameUI.notify.error(`Could not export data from blank Automator script!`)}}},vt={name:`AutomatorDataTransferPage`,components:{AutomatorDataTransferSingleEntry:D(K,function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-entry-padding`},[t(`button`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:`Export Full Script Data`,expression:`'Export Full Script Data'`}],staticClass:`l-button-margin fas fa-file-export`,on:{click:function(t){return e.exportData(e.script.id)}}}),t(`b`,[e._v(`Script name: `+e._s(e.script.name))]),t(`br`),e.hasPresets?t(`span`,[t(`span`,{class:e.iconClass(e.hidePresets),on:{click:function(t){e.hidePresets=!e.hidePresets}}}),e._v(` References `+e._s(e.quantifyInt(`recognized study preset`,e.presets.length))+` `),e.hidePresets?e._e():t(`span`,e._l(e.presets,function(n){return t(`div`,{key:n},[e.presetData[n].name?t(`span`,[e._v(`"`+e._s(e.presetData[n].name)+`" (slot `+e._s(n+1)+`):`)]):t(`span`,[e._v(`Preset slot `+e._s(n+1)+`:`)]),t(`br`),t(`div`,{staticClass:`l-value-padding`},[e.presetData[n].studies?t(`span`,[e._v(e._s(e.presetData[n].studies))]):t(`i`,[e._v(`Empty Study Preset`)])])])}),0)]):t(`span`,[e._v(` Does not reference any study presets. `)]),t(`br`),e.hasConstants?t(`span`,[t(`span`,{class:e.iconClass(e.hideConstants),on:{click:function(t){e.hideConstants=!e.hideConstants}}}),e._v(` References `+e._s(e.quantifyInt(`defined constant`,e.constants.length))+` `),e.hideConstants?e._e():t(`span`,e._l(e.constants,function(n){return t(`div`,{key:n},[e._v(` "`+e._s(n)+`": `),t(`br`),t(`div`,{staticClass:`l-value-padding`},[e._v(` `+e._s(e.constantData[n])+` `)])])}),0)]):t(`span`,[e._v(` Does not reference any defined constants. `)])])},[],!1,null,`e482cf1f`,null,null).exports},data(){return{scripts:0}},computed:{maxScriptCount:()=>AutomatorData.MAX_ALLOWED_SCRIPT_COUNT},created(){this.loadScripts(),this.on$(GAME_EVENT.AUTOMATOR_SAVE_CHANGED,()=>{this.loadScripts()})},methods:{loadScripts(){this.scripts=Object.values(player.reality.automator.scripts).map(e=>({id:e.id,name:e.name}))}}},yt=D(vt,function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-panel-padding`},[e._v(` This page lets you import and export scripts with additional data attached; the encoded text will also include data for any Time Study presets or constants used within the script. This will allow you to more easily transfer working scripts between different save files, but you may have to overwrite existing data in the process due to limited space for study presets and constants. Data exported from this page is also imported in the same way that single script data is imported. `),t(`br`),t(`br`),e._v(` Note: Any mentions of constant names or full study-buying commands within comments will also be counted as being "used" within a script. This is intentional, as the comment is assumed to be indicative of what the script itself is attempting to do with presets or constants. `),t(`br`),t(`br`),e._l(e.scripts,function(e,n){return t(`div`,{key:n},[t(`AutomatorDataTransferSingleEntry`,{staticClass:`l-entry-margin`,attrs:{script:e}})],1)})],2)},[],!1,null,`d6db5de1`,null,null).exports,bt={name:`AutomatorDefineSingleEntry`,props:{constant:{type:String,required:!0}},data(){return{oldAlias:``,aliasString:``,valueString:``}},computed:{maxNameLength(){return AutomatorData.MAX_ALLOWED_CONSTANT_NAME_LENGTH},maxValueLength(){return AutomatorData.MAX_ALLOWED_CONSTANT_VALUE_LENGTH}},created(){this.aliasString=this.constant,this.oldAlias=this.aliasString,this.valueString=player.reality.automator.constants[this.aliasString]},methods:{currentError(){if(!this.aliasString)return null;let e=this.aliasString.match(/^[a-zA-Z_][a-zA-Z_0-9]*$/u),t=Object.keys(player.reality.automator.constants).includes(this.aliasString)&&this.aliasString!==this.oldAlias,n=d.some(e=>{let t=this.aliasString.toLowerCase().match(e);return t?t[0]===this.aliasString.toLowerCase():!1}),r=[`constructor`,`hasOwnProperty`,`isPrototypeOf`,`propertyIsEnumerable`,`toLocaleString`,`toString`,`toValueOf`].some(e=>this.aliasString.match(e));if(!e)return`Constant name must be alphanumeric without spaces and cannot start with a number`;if(t)return`You have already defined a constant with this name`;if(n)return`Constant name conflicts with a command key word`;if(r)return`Constant name cannot shadow a built-in Javascript prototype prop`;if(!this.valueString)return`Constant value cannot be empty`;let i=this.valueString.match(/^-?(0|[1-9]\d*)(\.\d+)?([eE][+-]?\d+)?$/u),a=TimeStudyTree.isValidImportString(this.valueString);return!i&&!a?`Constant value must either be a number or Time Study string`:null},errorTooltip(){let e=this.currentError();if(e)return{content:`<div class="c-block-automator-error">
          <div>${e}</div>
        </div>`,html:!0,trigger:`manual`,show:!0,classes:[`general-tooltip`]}},handleFocus(e){e||this.currentError()||(this.aliasString?this.oldAlias?this.oldAlias===this.aliasString?AutomatorBackend.modifyConstant(this.aliasString,this.valueString):AutomatorBackend.renameConstant(this.oldAlias,this.aliasString):AutomatorBackend.addConstant(this.aliasString,this.valueString):AutomatorBackend.deleteConstant(this.oldAlias),this.oldAlias=this.aliasString,AutomatorData.recalculateErrors(),player.reality.automator.type===AUTOMATOR_TYPE.BLOCK&&BlockAutomator.parseTextFromBlocks())},deleteConstant(){AutomatorBackend.deleteConstant(this.aliasString),this.oldAlias=``,this.aliasString=``,this.valueString=``}}},xt={name:`AutomatorDefinePage`,components:{AutomatorDefineSingleEntry:D(bt,function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-single-definition-container`},[t(`input`,{directives:[{name:`model`,rawName:`v-model`,value:e.aliasString,expression:`aliasString`}],staticClass:`c-define-textbox c-alias`,class:{"l-limit-textbox":e.aliasString.length===e.maxNameLength},attrs:{placeholder:`New constant...`,maxlength:e.maxNameLength},domProps:{value:e.aliasString},on:{focusin:function(t){return e.handleFocus(!0)},focusout:function(t){return e.handleFocus(!1)},input:function(t){t.target.composing||(e.aliasString=t.target.value)}}}),e.aliasString?t(`span`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:e.errorTooltip(),expression:`errorTooltip()`}],staticClass:`o-arrow-padding`},[e._v(` 🠈 `)]):e._e(),e.aliasString?t(`input`,{directives:[{name:`model`,rawName:`v-model`,value:e.valueString,expression:`valueString`}],staticClass:`c-define-textbox c-value`,class:{"l-limit-textbox":e.valueString&&e.valueString.length===e.maxValueLength},attrs:{placeholder:`Value for constant...`,maxlength:e.maxValueLength},domProps:{value:e.valueString},on:{focusin:function(t){return e.handleFocus(!0)},focusout:function(t){return e.handleFocus(!1)},input:function(t){t.target.composing||(e.valueString=t.target.value)}}}):e._e(),e.aliasString?t(`button`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:`Delete this constant`,expression:`'Delete this constant'`}],staticClass:`c-delete-button fas fa-eraser`,on:{click:e.deleteConstant}}):e._e()])},[],!1,null,`7a894dc1`,null,null).exports,PrimaryButton:L},data(){return{constants:[],count:0,refreshConstants:!1}},computed:{maxConstantCount(){return AutomatorData.MAX_ALLOWED_CONSTANT_COUNT},maxNameLength(){return AutomatorData.MAX_ALLOWED_CONSTANT_NAME_LENGTH},maxValueLength(){return AutomatorData.MAX_ALLOWED_CONSTANT_VALUE_LENGTH},hasConstants(){return this.constants.length>1||this.constants[0]!==``}},created(){this.on$(GAME_EVENT.AUTOMATOR_CONSTANT_CHANGED,()=>{this.refreshConstants=!0,this.$nextTick(()=>this.refreshConstants=!1)})},methods:{update(){let e=player.reality.automator.constantSortOrder;this.count=e.length,this.constants=this.count<this.maxConstantCount?[...e,``]:[...e]},deleteAllConstants(){this.hasConstants&&Modal.clearAutomatorConstants.show()},importPresets(){Modal.importTSConstants.show()}}},St=D(xt,function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-panel-padding`},[e._v(` This panel allows you to define case-sensitive constant values which can be used in place of numbers or Time Study import strings. These definitions are shared across all of your scripts and are limited to a maximum of `+e._s(e.maxConstantCount)+` defined constants. Additionally, constant names and values are limited to lengths of `+e._s(e.maxNameLength)+` and `+e._s(e.maxValueLength)+` characters respectively. Changes made to constants will not apply until any currently running scripts are restarted. `),t(`br`),t(`br`),e._v(` As a usage example, defining `),t(`b`,[e._v(`first 🠈 11,21,22,31,32,33`)]),e._v(` allows you to use `),t(`b`,[e._v(`studies purchase first`)]),e._v(` in order to purchase all of the studies in the first three rows. `),t(`br`),t(`br`),t(`PrimaryButton`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:e.hasConstants?null:`You have no valid constants to delete!`,expression:`hasConstants ? null : 'You have no valid constants to delete!'`}],staticClass:`c-delete-margin o-primary-btn--subtab-option`,class:{"o-primary-btn--disabled":!e.hasConstants},on:{click:e.deleteAllConstants}},[e._v(` Delete all constants `)]),t(`br`),t(`br`),t(`PrimaryButton`,{staticClass:`c-delete-margin o-primary-btn--subtab-option`,on:{click:e.importPresets}},[e._v(` Import Time Study Presets `)]),t(`div`,{key:e.count+e.refreshConstants,staticClass:`l-definition-container`},e._l(e.constants,function(e,n){return t(`AutomatorDefineSingleEntry`,{key:n,attrs:{constant:e}})}),1)],1)},[],!1,null,`4d2f7cf1`,null,null).exports,Ct={name:`AutomatorDocsManPage`,props:{command:{type:Object,required:!0}},computed:{description(){let e=this.command.description;return typeof e==`function`?e():e}}},wt={name:`AutomatorDocsCommandList`,components:{AutomatorDocsManPage:D(Ct,function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`c-automator-docs-page`},[t(`b`,[e._v(`NAME`)]),t(`div`,{staticClass:`c-automator-docs-page__indented`,domProps:{innerHTML:e._s(e.command.keyword)}}),t(`b`,[e._v(`SYNTAX`)]),t(`div`,{staticClass:`c-automator-docs-page__indented`,domProps:{innerHTML:e._s(e.command.syntax)}}),e.command.description?[t(`b`,[e._v(`DESCRIPTION`)]),t(`div`,{staticClass:`c-automator-docs-page__indented`,domProps:{innerHTML:e._s(e.description)}})]:e._e(),e._l(e.command.sections,function(n){return[t(`b`,{key:n.name},[e._v(e._s(n.name))]),e._l(n.items,function(n){return[t(`div`,{key:n.header,staticClass:`c-automator-docs-page__indented`},[t(`div`,{domProps:{innerHTML:e._s(n.header)}}),t(`div`,{staticClass:`c-automator-docs-page__indented`,domProps:{innerHTML:e._s(n.description)}})])]})]}),e.command.examples?[t(`b`,[e._v(`USAGE EXAMPLES`)]),e._l(e.command.examples,function(n){return t(`div`,{key:n,staticClass:`c-automator-docs-page__indented`,domProps:{innerHTML:e._s(n)}})})]:e._e()],2)},[],!1,null,`35def87c`,null,null).exports},data(){return{selectedCommand:-1}},computed:{categoryNames:()=>GameDatabase.reality.automator.categoryNames,commands:()=>GameDatabase.reality.automator.commands},methods:{commandsInCategory(e){return this.commands.filter(t=>t.category===e&&t.isUnlocked())}}},Tt=D(wt,function(){var e=this,t=e._self._c;return t(`div`,[e.selectedCommand===-1?e._e():t(`div`,[t(`button`,{staticClass:`c-automator-docs--button l-return-button fas fa-arrow-left`,on:{click:function(t){e.selectedCommand=-1}}}),e._v(` Return to the Command List `)]),e.selectedCommand===-1?t(`div`,{staticClass:`c-automator-docs-page`},[e._v(` Click on an underlined command to see more details on syntax, usage, and functionality. `),t(`br`),t(`br`),t(`span`,[e._v(`Command List:`)]),t(`br`),e._l(e.categoryNames,function(n,r){return t(`div`,{key:r},[e._v(` `+e._s(n)+` (`+e._s(e.commandsInCategory(r).length)+` commands) `),e._l(e.commandsInCategory(r),function(n){return t(`div`,{key:n.id,staticClass:`c-automator-docs-page__link l-command-group`,on:{click:function(t){e.selectedCommand=n.id}}},[n.isUnlocked()?t(`span`,[e._v(` `+e._s(n.keyword)+` `)]):e._e()])})],2)}),t(`br`),t(`span`,[e._v(` Note: In the SYNTAX note on each command, `),t(`u`,[e._v(`underlined`)]),e._v(` inputs are `),t(`i`,[e._v(`required`)]),e._v(` inputs which you must fill and inputs in [square brackets] are optional (if used, they should be input `),t(`i`,[e._v(`without`)]),e._v(` the brackets). Any other parts should be typed in as they appear. Unless otherwise stated, all of the inputs are case-insensitive. Some commands may have more than one valid format, which will appear on separate lines. `)])],2):t(`AutomatorDocsManPage`,{attrs:{command:e.commands[e.selectedCommand]}})],1)},[],!1,null,`dd64ced2`,null,null).exports,Et=D({name:`AutomatorDocsIntroPage`},function(){var e=this;return e._self._c,e._m(0)},[function(){var e=this,t=e._self._c;return t(`div`,[e._v(` Welcome to the Antimatter Dimensions Automator! `),t(`br`),t(`br`),e._v(` This page is an introduction page which gives a very broad overview of everything you can do with the Automator. Specific details on various functionality can be found in the How To Play or their respective tabs (when relevant). `),t(`br`),t(`br`),t(`b`,[e._v(`Scripting Language:`)]),e._v(` The Automator uses a custom scripting language in order to perform certain game actions for you. Click `),t(`div`,{staticClass:`fas fa-list c-automator-button-icon`}),e._v(` to bring up a list of available commands. You can also define constants as shorthand names for various values on the `),t(`div`,{staticClass:`fas fa-book c-automator-button-icon`}),e._v(` page. `),t(`br`),t(`br`),t(`b`,[e._v(`Layout:`)]),e._v(` This Automator itself is split up into two halves; the left half contains your script and controls for starting, stopping, and repeating its execution, and the right half contains Automator information. Clicking `),t(`div`,{staticClass:`fas fa-expand-arrows-alt c-automator-button-icon`}),e._v(` in the top-right corner will expand the Automator to take up the whole browser page for easier editing. `),t(`br`),t(`br`),t(`b`,[e._v(`Editor Modes:`)]),e._v(` There are two different editors you can use to write your automator scripts - a block-based editor (default) and a text-based editor. You can swap between the two editor types with the switch in the top-right corner of the left half. Note that scripts with errors may not properly convert between the two modes, which can cause part of your script to be deleted. `),t(`br`),t(`br`),t(`b`,[e._v(`Making Scripts:`)]),e._v(` You can switch between multiple scripts or make new scripts using the dropdown on the second row of buttons. The current script can be renamed or deleted with the `),t(`div`,{staticClass:`fas fa-edit c-automator-button-icon`}),e._v(` and `),t(`div`,{staticClass:`fas fa-trash c-automator-button-icon`}),e._v(` buttons. The Automator will always contain at least one script for you to edit; deleting your last one will automatically create a new blank one. `),t(`br`),t(`br`),t(`b`,[e._v(`Writing Scripts:`)]),e._v(` Scripts in the block editor are made by going to the block tab `),t(`div`,{staticClass:`fas fa-cubes c-automator-button-icon`}),e._v(`, while scripts in the text editor are made by typing into the left half as a text box. In either editor mode, you can also use some smaller premade scripts from the template generator `),t(`div`,{staticClass:`fas fa-file-code c-automator-button-icon`}),e._v(`. You can undo or redo a limited number of edits using `),t(`div`,{staticClass:`fas fa-arrow-rotate-left c-automator-button-icon`}),e._v(` or `),t(`div`,{staticClass:`fas fa-arrow-rotate-right c-automator-button-icon`}),e._v(`, or by using the respective hotkeys. Edit history is cleared upon switching, converting, or deleting scripts. `),t(`br`),t(`br`),t(`b`,[e._v(`Debugging:`)]),e._v(` The two main tools you have for fixing your scripts are the Error Log `),t(`div`,{staticClass:`fas fa-exclamation-triangle c-automator-button-icon`}),e._v(` for when you can't get your script to run at all, and the Event Log `),t(`div`,{staticClass:`fas fa-eye c-automator-button-icon`}),e._v(` for when it runs but doesn't do what you expect it to do. `),t(`br`),t(`br`),t(`b`,[e._v(`Importing/Exporting:`)]),e._v(` Automator scripts can be exported and imported in text format by using the `),t(`div`,{staticClass:`fas fa-file-export c-automator-button-icon`}),e._v(` and `),t(`div`,{staticClass:`fas fa-file-import c-automator-button-icon`}),e._v(` buttons respectively. You can also access additional extended exporting options `),t(`div`,{staticClass:`fas fa-window-restore c-automator-button-icon`}),e._v(` if desired. `),t(`br`),t(`br`),t(`b`,[e._v(`Script saving:`)]),e._v(` Script changes are not immediately saved to your computer under all conditions; check the Automator How To Play entries for more details. Additionally there are two character limits to reduce lag, shown above the automator panels. `)])}],!1,null,`691dd874`,null,null).exports,Dt=D({name:`AutomatorDocsTemplateList`,data(){return{isBlock:!1,blockTemplates:[],selectedTemplateID:-1}},computed:{templates:()=>GameDatabase.reality.automator.templates.scripts,pasteText(){return this.isBlock?`create a special block you can drag into your Automator where you would like it to be placed. It will then
          automatically fill in all of the individual blocks needed for the template`:`copy the template as text onto your clipboard. You can directly paste the template text into your Automator
          wherever you would like it`}},methods:{update(){this.isBlock=player.reality.automator.type===AUTOMATOR_TYPE.BLOCK,this.blockTemplates=AutomatorData.blockTemplates},showModal(e){Modal.automatorScriptTemplate.show(e)},unpackTemplateBlocks(e){let t=this.blockTemplates[this.selectedTemplateID].blocks,n=BlockAutomator.lines.slice(0,e.newIndex),r=BlockAutomator.lines.slice(e.newIndex).filter(e=>e.cmd),i=Math.max(...BlockAutomator._idArray.filter(e=>e)),a=Math.min(...t.map(e=>e.id)),o=[];for(let e of t)o.push({...e,id:e.id+i-a+1});BlockAutomator.lines=n,BlockAutomator.lines.push(...o),BlockAutomator.lines.push(...r),BlockAutomator.updateIdArray()},setIndex(e){this.selectedTemplateID=e}}},function(){var e=this,t=e._self._c;return t(`div`,[e._v(` These templates will let you do some more common things within the Automator. They may be slightly slower than manually-written scripts, but don't require you to have any previous programming experience to use. Clicking any of these buttons will open up a prompt with some input fields, which will generate a template you can place into your Automator. `),e._l(e.templates,function(n){return t(`button`,{key:n.name,staticClass:`o-primary-btn c-automator-docs-template--button l-automator__button`,on:{click:function(t){return e.showModal(n)}}},[e._v(` Template: `+e._s(n.name)+` `)])}),e._v(` Since you are currently in the `+e._s(e.isBlock?`Block`:`Text`)+` editor, this panel will `+e._s(e.pasteText)+`. `),t(`br`),t(`br`),e.isBlock?t(`draggable`,{key:e.blockTemplates.length,staticClass:`template-container`,attrs:{list:e.blockTemplates,group:{name:`code-blocks`,pull:`clone`,put:!1},sort:!1},on:{end:e.unpackTemplateBlocks}},e._l(e.blockTemplates,function(n,r){return t(`div`,{key:r,staticClass:`o-automator-command o-automator-block-list draggable-blocks`,on:{dragstart:function(t){return e.setIndex(r)}}},[e._v(` `+e._s(n.name)+` `)])}),0):e._e()],2)},[],!1,null,`4bf54ed5`,null,null).exports,Ot=D({name:`AutomatorErrorPage`,data(){return{errors:[]}},methods:{update(){this.errors=AutomatorData.currentErrors()},scrollToLine(e){AutomatorScroller.scrollToLine(e),AutomatorHighlighter.updateHighlightedLine(e,LineEnum.Error)}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`c-automator-docs-page`},[e.errors.length===0?t(`div`,[e._v(` No script errors found! `)]):t(`div`,[t(`b`,[e._v(`Your script has the following `+e._s(e.quantify(`error`,e.errors.length))+`:`)]),t(`br`),e._l(e.errors,function(n,r){return t(`span`,{key:r},[t(`b`,[e._v(`On line `+e._s(n.startLine)+`:`)]),t(`button`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:`Jump to line`,expression:`'Jump to line'`}],staticClass:`c-automator-docs--button fas fa-arrow-circle-right`,on:{click:function(t){return e.scrollToLine(n.startLine)}}}),t(`div`,{staticClass:`c-automator-docs-page__indented`},[e._v(` `+e._s(n.info)+` `)]),t(`div`,{staticClass:`c-automator-docs-page__indented`},[t(`i`,[e._v(`Suggested fix: `+e._s(n.tip))])])])}),t(`i`,[e._v(` Note: Sometimes errors may cause the automator to be unable to scan the rest of the script properly. This may result in some errors "disappearing" due to other errors occurring in earlier lines, or errors in a command which has an inner block (eg. commands like IF or WHILE) causing errors to appear on correctly-formatted later commands. Additionally, some of the suggested fixes may be potentially misleading due to the cause of the error being unclear. `)])],2)])},[],!1,null,`ff046eb0`,null,null).exports,kt={name:`AutomatorEventLog`,data(){return{unsortedEvents:[],newestFirst:!1,timestampMode:0,currentTime:0,maxEntries:0,clearOnReality:!1,clearOnRestart:!1}},computed:{events(){let e=this.unsortedEvents.sort((e,t)=>e.timestamp===t.timestamp?e.thisReality===t.thisReality?e.line-t.line:e.thisReality-t.thisReality:e.timestamp-t.timestamp);return this.newestFirst?e.toReversed():e},clearTooltip(){return`Clear all entries (Max. ${this.maxEntries})`},buttonClassObject(){return`c-automator-docs--button fas`}},watch:{newestFirst(e){player.options.automatorEvents.newestFirst=e},timestampMode(e){player.options.automatorEvents.timestampType=e},clearOnReality(e){player.options.automatorEvents.clearOnReality=e},clearOnRestart(e){player.options.automatorEvents.clearOnRestart=e}},methods:{update(){let e=player.options.automatorEvents;this.unsortedEvents=AutomatorData.eventLog,this.newestFirst=e.newestFirst,this.timestampMode=e.timestampType,this.currentTime=Date.now(),this.maxEntries=e.maxEntries,this.clearOnReality=e.clearOnReality,this.clearOnRestart=e.clearOnRestart},clearLog(){AutomatorData.clearEventLog(),this.update()},sortStyle(e){return{"background-color":e?`var(--color-reality)`:``}},timestampStyle(e){return{"background-color":this.timestampMode===At[e]?`var(--color-reality)`:``}},clearRealityStyle(){return{"background-color":this.clearOnReality?`var(--color-reality)`:``}},clearRestartStyle(){return{"background-color":this.clearOnRestart?`var(--color-reality)`:``}},setTimestampMode(e){this.timestampMode=At[e]},timestamp(e){switch(this.timestampMode){case At.DISABLED:return``;case At.THIS_REALITY:return`, ${TimeSpan.fromSeconds(new Decimal(e.thisReality)).toStringShort()} (real-time) in Reality`;case At.RELATIVE_NOW:return`, ${TimeSpan.fromMilliseconds(new Decimal(this.currentTime-e.timestamp)).toStringShort()} ago`;case At.RELATIVE_PREV:return e.timegap===e.timestamp?`, first logged event`:`, ${TimeSpan.fromMilliseconds(new Decimal(e.timegap)).toStringShort()} after previous event`;case At.DATE_TIME:return`, ${Time.toDateTimeString(e.timestamp)}`;default:throw Error(`Unrecognized timestamp mode in Automator event log`)}},scrollToLine(e){AutomatorScroller.scrollToLine(e),AutomatorHighlighter.updateHighlightedLine(e,LineEnum.Event)}}},At={DISABLED:0,THIS_REALITY:1,RELATIVE_NOW:2,RELATIVE_PREV:3,DATE_TIME:4},jt=D(kt,function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`c-automator-docs-page`},[t(`div`,[e._v(` This panel keeps a running event log of all the commands which the automator has recently executed, with a little extra info on some of the commands. It may be useful to help you find problems if you find your automator is getting stuck in certain spots. `),t(`br`),t(`br`),e._v(` While your settings are kept within your savefile, the actual events are not and will disappear on refresh. `),t(`br`),t(`br`),t(`b`,[e._v(`Entry Sorting:`)]),t(`button`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:`Oldest results first`,expression:`'Oldest results first'`}],staticClass:`fa-angle-down`,class:e.buttonClassObject,style:e.sortStyle(!e.newestFirst),on:{click:function(t){e.newestFirst=!1}}}),t(`button`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:`Newest results first`,expression:`'Newest results first'`}],staticClass:`fa-angle-up`,class:e.buttonClassObject,style:e.sortStyle(e.newestFirst),on:{click:function(t){e.newestFirst=!0}}}),t(`button`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:e.clearTooltip,expression:`clearTooltip`}],staticClass:`fa-trash`,class:e.buttonClassObject,on:{click:e.clearLog}}),t(`button`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:`Clear event log every Reality`,expression:`'Clear event log every Reality'`}],staticClass:`fa-eraser`,class:e.buttonClassObject,style:e.clearRealityStyle(),on:{click:function(t){e.clearOnReality=!e.clearOnReality}}}),t(`button`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:`Clear event log on script restart`,expression:`'Clear event log on script restart'`}],staticClass:`fa-backspace`,class:e.buttonClassObject,style:e.clearRestartStyle(),on:{click:function(t){e.clearOnRestart=!e.clearOnRestart}}})]),t(`div`,[t(`b`,[e._v(`Timestamp style:`)]),t(`button`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:`No timestamps`,expression:`'No timestamps'`}],staticClass:`fa-ban`,class:e.buttonClassObject,style:e.timestampStyle(`DISABLED`),on:{click:function(t){return e.setTimestampMode(`DISABLED`)}}}),t(`button`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:`Current time this Reality`,expression:`'Current time this Reality'`}],staticClass:`fa-stopwatch`,class:e.buttonClassObject,style:e.timestampStyle(`THIS_REALITY`),on:{click:function(t){return e.setTimestampMode(`THIS_REALITY`)}}}),t(`button`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:`Time elapsed since event`,expression:`'Time elapsed since event'`}],staticClass:`fa-clock`,class:e.buttonClassObject,style:e.timestampStyle(`RELATIVE_NOW`),on:{click:function(t){return e.setTimestampMode(`RELATIVE_NOW`)}}}),t(`button`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:`Time since last event`,expression:`'Time since last event'`}],staticClass:`fa-arrow-left`,class:e.buttonClassObject,style:e.timestampStyle(`RELATIVE_PREV`),on:{click:function(t){return e.setTimestampMode(`RELATIVE_PREV`)}}}),t(`button`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:`Date and time`,expression:`'Date and time'`}],staticClass:`fa-user-clock`,class:e.buttonClassObject,style:e.timestampStyle(`DATE_TIME`),on:{click:function(t){return e.setTimestampMode(`DATE_TIME`)}}})]),e._l(e.events,function(n,r){return t(`span`,{key:r},[t(`b`,[e._v(`Line `+e._s(n.line)+e._s(e.timestamp(n))+`:`)]),t(`button`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:`Jump to line`,expression:`'Jump to line'`}],staticClass:`fa-arrow-circle-right`,class:e.buttonClassObject,on:{click:function(t){return e.scrollToLine(n.line)}}}),t(`div`,{staticClass:`c-automator-docs-page__indented`},[t(`i`,[e._v(e._s(n.message))])])])})],2)},[],!1,null,`d980cc2c`,null,null).exports,Mt=D({name:`AutomatorScriptDropdownEntryList`,data(){return{isBlock:!1,currentScriptID:0,runningScriptID:0,isRunning:!1,isPaused:!1,canMakeNewScript:!1}},computed:{scripts(){return Object.values(player.reality.automator.scripts).map(e=>({id:e.id,name:e.name}))},currentScriptContent(){return player.reality.automator.scripts[this.currentScriptID].content},currentScript(){return CodeMirror.Doc(this.currentScriptContent,`automato`).getValue()},scriptCount(){return Object.keys(player.reality.automator.scripts).length},maxScriptCount(){return AutomatorData.MAX_ALLOWED_SCRIPT_COUNT}},created(){this.currentScriptID=player.reality.automator.state.editorScript,this.on$(GAME_EVENT.AUTOMATOR_SAVE_CHANGED,()=>{this.$recompute(`scripts`)})},methods:{update(){this.isBlock=player.reality.automator.type===AUTOMATOR_TYPE.BLOCK,this.runningScriptID=AutomatorBackend.state.topLevelScript,this.isRunning=AutomatorBackend.isRunning,this.isPaused=AutomatorBackend.isOn&&!AutomatorBackend.isRunning,this.canMakeNewScript=this.scriptCount<this.maxScriptCount},changeScriptID(e){this.currentScriptID=e,player.reality.automator.state.editorScript=e,this.updateCurrentScriptID()},createNewScript(){let e=AutomatorBackend.newScript();player.reality.automator.state.editorScript=e.id,this.updateCurrentScriptID(),this.$parent.$parent.rename()},updateCurrentScriptID(){let e=player.reality.automator.scripts;this.currentScriptID=player.reality.automator.state.editorScript,e[this.currentScriptID]===void 0&&(this.currentScriptID=Number(Object.keys(e)[0]),player.reality.automator.state.editorScript=this.currentScriptID),this.isBlock&&this.$nextTick(()=>BlockAutomator.updateEditor(this.currentScript)),this.$parent.openRequest=!1,AutomatorData.clearUndoData()},dropdownLabel(e){let t=[];e.id===this.currentScriptID&&t.push(`viewing`),e.id===this.runningScriptID&&(this.isRunning?t.push(`running`):this.isPaused&&t.push(`paused`));let n=t.length>0?`(${t.join(`, `).capitalize()})`:``;return`${e.name} ${n}`},labelClassObject(e){let t=this.isRunning||this.isPaused;return{"c-automator-docs-script-select":!0,"l-active-script":e===this.runningScriptID&&t,"l-selected-script":e===this.currentScriptID&&(e!==this.runningScriptID||!t)}}}},function(){var e=this,t=e._self._c;return t(`div`,{key:e.scripts.length},[e._l(e.scripts,function(n){return t(`div`,{key:n.id,staticClass:`l-script-option c-script-option-hover-effect`,class:e.labelClassObject(n.id),on:{click:function(t){return e.changeScriptID(n.id)}}},[e._v(` `+e._s(e.dropdownLabel(n))+` `)])}),e.canMakeNewScript?t(`div`,{staticClass:`l-create-script c-automator-docs-script-select c-script-option-hover-effect`,on:{click:function(t){return e.createNewScript()}}},[t(`i`,[e._v(`Create a new script (You have `+e._s(e.formatInt(e.scriptCount))+` / `+e._s(e.formatInt(e.maxScriptCount))+`)`)])]):t(`div`,{staticClass:`l-create-script c-automator-docs-script-select l-max-scripts`},[t(`i`,[e._v(`You can only have `+e._s(e.formatInt(e.maxScriptCount))+` scripts!`)])])],2)},[],!1,null,`b5cf50ed`,null,null).exports,Nt={name:`ExpandingControlBox`,props:{containerClass:{type:String,required:!1,default:void 0},label:{type:String,required:!1,default:void 0},widthSource:{type:String,required:!1,default:void 0},buttonClass:{type:String,required:!1,default:`l-expanding-control-box__button`},autoClose:{type:Boolean,required:!1,default:!1}},data(){return{state:null,openRequest:!1,closedHeight:`1em`,openHeight:`1em`,hasMouse:!1,closeTime:0}},computed:{states:()=>({CLOSED:{name:`CLOSED`,transition:!1,visibility:!1,height:`closed`},OPEN_REQUESTED:{name:`OPEN_REQUESTED`,transition:!0,visibility:!0,height:`closed`},OPENING:{name:`OPENING`,transition:!0,visibility:!0,height:`open`},OPEN:{name:`OPEN`,transition:!1,visibility:!0,height:null},CLOSE_REQUESTED:{name:`CLOSE_REQUESTED`,transition:!1,visibility:!0,height:`open`},CLOSING:{name:`CLOSING`,transition:!0,visibility:!0,height:`closed`}}),maxHeight(){return this.state.height===`open`?this.openHeight:this.state.height===`closed`?this.closedHeight:null},rootClassObject(){return{"l-expanding-control-box--controls-width":this.widthSource!==void 0}},containerStyle(){return{maxHeight:this.maxHeight,visibility:this.state.visibility}},containerClassObject(){let e={"l-expanding-control-box__container--transition":this.state?.transition};return e[this.containerClass]=!0,e},indicatorArrowClassObject(){return{"c-indicator-arrow":!0,"c-indicator-arrow--flipped":this.state===this.states.OPENING||this.state===this.states.OPEN}}},watch:{state(e){switch(this.processRequest(e,this.openRequest),this.updateHeightInfo(),this.state){case this.states.CLOSED:break;case this.states.OPEN_REQUESTED:this.$nextTick(()=>this.state=this.states.OPENING);break;case this.states.OPENING:break;case this.states.OPEN:break;case this.states.CLOSE_REQUESTED:this.$nextTick(()=>this.state=this.states.CLOSING);break;case this.CLOSING:break}},openRequest(e){this.processRequest(this.state,e)}},created(){this.state=this.states.CLOSED,this.on$(`openrequest`,()=>this.openRequest=!0)},mounted(){this.updateHeightInfo(),this.$refs.root.style.height=this.closedHeight,this.updateBaseWidth()},methods:{update(){let e=this.hasMouse?0:(Date.now()-this.closeTime)/1e3;this.autoClose&&this.state===this.states.OPEN&&e>1&&(this.openRequest=!1)},processRequest(e,t){t&&(e===this.states.CLOSED||e===this.states.CLOSE_REQUESTED)&&(this.state=this.states.OPEN_REQUESTED),!t&&(e===this.states.OPEN||e===this.states.OPEN_REQUESTED)&&(this.state=this.states.CLOSE_REQUESTED)},updateBaseWidth(){this.widthSource===`content`?(this.$refs.container.style.width=`${this.$refs.dropdown.offsetWidth}px`,this.$refs.root.style.width=`${this.$refs.dropdown.offsetWidth}px`):this.widthSource===`header`&&(this.$refs.root.style.width=`${this.$refs.container.offsetWidth}px`)},updateHeightInfo(){let e=this.$refs.expandButton.offsetHeight;this.closedHeight=`${e}px`,this.openHeight=`${e+this.$refs.dropdown.offsetHeight}px`},transitionEnd(e){e.propertyName===`max-height`&&(this.state===this.states.OPENING?this.state=this.states.OPEN:this.state===this.states.CLOSING&&(this.state=this.states.CLOSED))},handleClick(){this.openRequest=!this.openRequest,this.hasMouse=this.openRequest},mouseOn(){this.hasMouse=!0},mouseOff(){this.hasMouse=!1,this.closeTime=Date.now()}}},Pt=D(Nt,function(){var e=this,t=e._self._c;return t(`div`,{ref:`root`,staticClass:`l-expanding-control-box`,class:e.rootClassObject},[t(`div`,{ref:`container`,staticClass:`l-expanding-control-box__container`,class:e.containerClassObject,style:e.containerStyle,on:{transitionend:e.transitionEnd,mouseenter:e.mouseOn,mouseleave:e.mouseOff}},[e.$slots.header?t(`div`,{ref:`expandButton`,on:{click:e.handleClick}},[e._t(`header`)],2):t(`div`,{ref:`expandButton`,class:e.buttonClass,on:{click:e.handleClick}},[e._v(` `+e._s(e.label)+` `),t(`span`,{class:e.indicatorArrowClassObject},[e._v(` ▼ `)])]),t(`div`,{ref:`dropdown`},[e._t(`dropdown`)],2)])])},[],!1,null,`9764fa98`,null,null).exports;const Ft={INTRO_PAGE:0,COMMANDS:1,ERRORS:2,EVENTS:3,DATA_TRANSFER:4,CONSTANTS:5,TEMPLATES:6,BLOCKS:7};var It=D({name:`AutomatorDocs`,components:{AutomatorButton:_t,AutomatorDocsCommandList:Tt,AutomatorErrorPage:Ot,AutomatorEventLog:jt,AutomatorDataTransferPage:yt,AutomatorBlocks:O,AutomatorDocsIntroPage:Et,AutomatorDocsTemplateList:Dt,AutomatorDefinePage:St,AutomatorScriptDropdownEntryList:Mt,ExpandingControlBox:Pt},data(){return{isBlock:!1,infoPaneID:1,errorCount:0,editingName:!1,isNameTooLong:!1,scripts:[],runningScriptID:0,totalChars:0,scriptCount:0,canMakeNewScript:!0}},computed:{fullScreen:{get(){return this.$viewModel.tabs.reality.automator.fullScreen},set(e){this.$viewModel.tabs.reality.automator.fullScreen=e,AutomatorData.isEditorFullscreen=e}},fullScreenIconClass(){return this.fullScreen?`fa-compress-arrows-alt`:`fa-expand-arrows-alt`},fullScreenTooltip(){return this.fullScreen?`Exit full screen`:`Expand to full screen`},errorTooltip(){return`Your script has ${quantify(`error`,this.errorCount)}`},nameTooltip(){return this.isNameTooLong?`Names cannot be longer than ${formatInt(AutomatorData.MAX_ALLOWED_SCRIPT_NAME_LENGTH)} characters!`:``},currentScriptID:{get(){return this.$viewModel.tabs.reality.automator.editorScriptID},set(e){this.$viewModel.tabs.reality.automator.editorScriptID=e,AutomatorTextUI.editor&&AutomatorTextUI.editor.performLint()}},currentScriptContent(){return player.reality.automator.scripts[this.currentScriptID].content},currentScript(){return CodeMirror.Doc(this.currentScriptContent,`automato`).getValue()},errorStyle(){return{"background-color":this.errorCount===0?``:`red`}},maxTotalChars(){return AutomatorData.MAX_ALLOWED_TOTAL_CHARACTERS},maxScriptCount(){return AutomatorData.MAX_ALLOWED_SCRIPT_COUNT},panelEnum(){return Ft},importTooltip(){return this.canMakeNewScript?`Import single automator script or data`:`You have too many scripts to import another!`},currentEditorScriptName(){return this.scripts.find(e=>e.id===this.currentScriptID).name}},watch:{infoPaneID(e){player.reality.automator.currentInfoPane=e}},created(){this.on$(GAME_EVENT.GAME_LOAD,()=>this.onGameLoad()),this.on$(GAME_EVENT.AUTOMATOR_SAVE_CHANGED,()=>this.onGameLoad()),this.on$(GAME_EVENT.AUTOMATOR_TYPE_CHANGED,()=>this.openMatchingAutomatorTypeDocs()),this.onGameLoad()},destroyed(){this.fullScreen=!1},methods:{update(){this.isBlock=player.reality.automator.type===x.BLOCK,this.infoPaneID=player.reality.automator.currentInfoPane,this.errorCount=AutomatorData.currentErrors().length,this.runningScriptID=AutomatorBackend.state.topLevelScript,this.totalChars=AutomatorData.totalScriptCharacters(),this.scriptCount=Object.keys(player.reality.automator.scripts).length,this.canMakeNewScript=this.scriptCount<this.maxScriptCount,this.currentScriptID=player.reality.automator.state.editorScript},exportScript(){let e=AutomatorBackend.exportCurrentScriptContents();e?(copyToClipboard(e),GameUI.notify.automator(`Exported current Automator script to your clipboard`)):GameUI.notify.error(`Could not export blank Automator script!`)},importScript(){this.canMakeNewScript&&Modal.importScriptData.show()},onGameLoad(){this.updateCurrentScriptID(),this.updateScriptList(),this.fixAutomatorTypeDocs()},updateScriptList(){this.scripts=Object.values(player.reality.automator.scripts).map(e=>({id:e.id,name:e.name}))},updateCurrentScriptID(){AutomatorData.recalculateErrors();let e=player.reality.automator.scripts;this.currentScriptID=player.reality.automator.state.editorScript,e[this.currentScriptID]===void 0&&(this.currentScriptID=Number(Object.keys(e)[0]),player.reality.automator.state.editorScript=this.currentScriptID,AutomatorData.clearUndoData()),this.isBlock&&BlockAutomator.hasUnparsableCommands(this.currentScript)&&this.currentScript!==``&&(AutomatorBackend.changeModes(this.currentScriptID),Modal.message.show(`Some script commands were unrecognizable - defaulting to text editor.`)),this.$nextTick(()=>{BlockAutomator.updateEditor(this.currentScript),!this.isBlock&&AutomatorTextUI.editor&&AutomatorTextUI.editor.performLint()})},fixAutomatorTypeDocs(){let e=player.reality.automator;e.currentInfoPane===Ft.COMMANDS&&e.type===x.BLOCK&&this.openMatchingAutomatorTypeDocs(),e.currentInfoPane===Ft.BLOCKS&&e.type===x.TEXT&&this.openMatchingAutomatorTypeDocs()},openMatchingAutomatorTypeDocs(){let e=player.reality.automator;e.currentInfoPane=e.type===x.BLOCK?Ft.BLOCKS:Ft.COMMANDS},rename(){this.editingName=!0,this.$nextTick(()=>{this.updateCurrentScriptID(),this.$refs.renameInput.value=player.reality.automator.scripts[this.currentScriptID].name,this.$refs.renameInput.focus()})},deleteScript(){Modal.automatorScriptDelete.show({scriptID:this.currentScriptID})},nameEdited(){let e=this.$refs.renameInput.value.match(/^\s*(.*?)\s*$/u),t=``;if(e.length===2&&e[1].length>0&&(t=e[1]),t.length>AutomatorData.MAX_ALLOWED_SCRIPT_NAME_LENGTH){this.isNameTooLong=!0;return}this.isNameTooLong=!1,player.reality.automator.scripts[this.currentScriptID].name=t,this.updateScriptList(),this.$nextTick(()=>this.editingName=!1)},activePanelClass(e){return{"c-automator__button--active":this.infoPaneID===e}}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-automator-pane`},[t(`div`,{staticClass:`c-automator__controls l-automator__controls`},[t(`div`,{staticClass:`l-automator-button-row`},[t(`AutomatorButton`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:`Automator Introduction`,expression:`'Automator Introduction'`}],staticClass:`fa-circle-info`,class:e.activePanelClass(e.panelEnum.INTRO_PAGE),on:{click:function(t){e.infoPaneID=e.panelEnum.INTRO_PAGE}}}),t(`AutomatorButton`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:`Scripting Information`,expression:`'Scripting Information'`}],staticClass:`fa-list`,class:e.activePanelClass(e.panelEnum.COMMANDS),on:{click:function(t){e.infoPaneID=e.panelEnum.COMMANDS}}}),t(`AutomatorButton`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:e.errorTooltip,expression:`errorTooltip`}],staticClass:`fa-exclamation-triangle`,class:e.activePanelClass(e.panelEnum.ERRORS),style:e.errorStyle,on:{click:function(t){e.infoPaneID=e.panelEnum.ERRORS}}}),t(`AutomatorButton`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:`Extended Data Transfer`,expression:`'Extended Data Transfer'`}],staticClass:`fa-window-restore`,class:e.activePanelClass(e.panelEnum.DATA_TRANSFER),on:{click:function(t){e.infoPaneID=e.panelEnum.DATA_TRANSFER}}}),t(`AutomatorButton`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:`View recently executed commands`,expression:`'View recently executed commands'`}],staticClass:`fa-eye`,class:e.activePanelClass(e.panelEnum.EVENTS),on:{click:function(t){e.infoPaneID=e.panelEnum.EVENTS}}}),t(`AutomatorButton`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:`Modify defined constants`,expression:`'Modify defined constants'`}],staticClass:`fa-book`,class:e.activePanelClass(e.panelEnum.CONSTANTS),on:{click:function(t){e.infoPaneID=e.panelEnum.CONSTANTS}}}),t(`AutomatorButton`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:`Template Creator List`,expression:`'Template Creator List'`}],staticClass:`fa-file-code`,class:e.activePanelClass(e.panelEnum.TEMPLATES),on:{click:function(t){e.infoPaneID=e.panelEnum.TEMPLATES}}}),e.isBlock?t(`AutomatorButton`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:`Command menu for Block editor mode`,expression:`'Command menu for Block editor mode'`}],staticClass:`fa-cubes`,class:e.activePanelClass(e.panelEnum.BLOCKS),on:{click:function(t){e.infoPaneID=e.panelEnum.BLOCKS}}}):e._e(),e.fullScreen?t(`span`,{staticClass:`c-automator__status-text c-automator__status-text--small`,class:{"c-automator__status-text--error":e.totalChars>e.maxTotalChars}},[e._v(` Across all scripts: `+e._s(e.formatInt(e.totalChars))+`/`+e._s(e.formatInt(e.maxTotalChars))+` `)]):e._e(),t(`AutomatorButton`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:e.fullScreenTooltip,expression:`fullScreenTooltip`}],staticClass:`l-automator__expand-corner`,class:e.fullScreenIconClass,on:{click:function(t){e.fullScreen=!e.fullScreen}}})],1),t(`div`,{staticClass:`l-automator-button-row`},[t(`AutomatorButton`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:`Export single automator script`,expression:`'Export single automator script'`}],staticClass:`fa-file-export`,on:{click:e.exportScript}}),t(`AutomatorButton`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:e.importTooltip,expression:`importTooltip`}],staticClass:`fa-file-import`,class:{"c-automator__status-text--error":!e.canMakeNewScript},on:{click:e.importScript}}),t(`div`,{staticClass:`l-automator__script-names`},[e.editingName?t(`input`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:e.nameTooltip,expression:`nameTooltip`}],ref:`renameInput`,staticClass:`l-automator__rename-input c-automator__rename-input`,class:{"c-long-name-box":e.isNameTooLong},on:{blur:e.nameEdited,keyup:function(t){return!t.type.indexOf(`key`)&&e._k(t.keyCode,`enter`,13,t.key,`Enter`)?null:e.$refs.renameInput.blur()}}}):[t(`ExpandingControlBox`,{staticClass:`l-automator__scripts-dropdown`,attrs:{"auto-close":!0},scopedSlots:e._u([{key:`header`,fn:function(){return[t(`div`,{staticClass:`c-automator-docs-script-select`},[e._v(` ▼ Current Script: `+e._s(e.currentEditorScriptName)+` `)])]},proxy:!0},{key:`dropdown`,fn:function(){return[t(`AutomatorScriptDropdownEntryList`,{key:e.scriptCount})]},proxy:!0}],null,!1,1001015561)}),t(`AutomatorButton`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:`Rename script`,expression:`'Rename script'`}],staticClass:`far fa-edit`,on:{click:e.rename}})]],2),t(`AutomatorButton`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:`Delete this script`,expression:`'Delete this script'`}],staticClass:`fas fa-trash`,on:{click:e.deleteScript}})],1)]),t(`div`,{staticClass:`c-automator-docs l-automator-pane__content`},[e.infoPaneID===e.panelEnum.INTRO_PAGE?t(`AutomatorDocsIntroPage`):e.infoPaneID===e.panelEnum.COMMANDS?t(`AutomatorDocsCommandList`):e.infoPaneID===e.panelEnum.ERRORS?t(`AutomatorErrorPage`):e.infoPaneID===e.panelEnum.EVENTS?t(`AutomatorEventLog`):e.infoPaneID===e.panelEnum.DATA_TRANSFER?t(`AutomatorDataTransferPage`):e.infoPaneID===e.panelEnum.CONSTANTS?t(`AutomatorDefinePage`):e.infoPaneID===e.panelEnum.TEMPLATES?t(`AutomatorDocsTemplateList`):e.infoPaneID===e.panelEnum.BLOCKS?t(`AutomatorBlocks`):e._e()],1)])},[],!1,null,`368bf518`,null,null).exports;const Lt={types:{NONE:0,LEVEL:1,RARITY:2,SAC_VALUE:3,FILTER_SCORE:4,CURRENT_REFINE:5,MAX_REFINE:6},labels:[`None`,`Level`,`Rarity`,`Sacrifice Value`,`Glyph Filter Score`,`Current Refinement Value`,`Maximum Refinement Value`]};var Rt=D({name:`SelectGlyphInfoDropdown`,computed:{availableTypes(){let e=Lt.types,t=[e.NONE,e.LEVEL,e.RARITY];return GlyphSacrificeHandler.canSacrifice&&t.push(e.SAC_VALUE),EffarigUnlock.glyphFilter.isUnlocked&&t.push(e.FILTER_SCORE),Ra.unlocks.unlockGlyphAlchemy.canBeApplied&&(t.push(e.CURRENT_REFINE),t.push(e.MAX_REFINE)),t}},methods:{setType(e){player.options.showHintText.glyphInfoType=e,EventHub.dispatch(GAME_EVENT.GLYPH_VISUAL_CHANGE)},getType(e){return Lt.labels[e]}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-select-theme`},[t(`div`,{staticClass:`l-select-theme__inner`},e._l(e.availableTypes,function(n){return t(`div`,{key:n,staticClass:`o-primary-btn l-select-theme__item c-select-theme__item`,on:{click:function(t){return e.setType(n)}}},[e._v(` `+e._s(e.getType(n))+` `)])}),0)])},[],!1,null,null,null,null).exports;function zt(e){return Array.isArray(e)?[]:{}}function Bt(e,t){return e instanceof Decimal?new Decimal(e):e instanceof Set?new Set(e):t.clone!==!1&&t.isMergeableObject?.(e)?Ut(zt(e),e,t):e}function Vt(e,t,n){return[...e,...t].map(e=>Bt(e,n))}function Ht(e,t,n){let r={};return n.isMergeableObject(e)&&Object.keys(e).forEach(t=>{r[t]=Bt(e[t],n)}),Object.keys(t).forEach(i=>{e[i]&&e[i]instanceof Decimal?r[i]=new Decimal(t[i]):e[i]&&e[i]instanceof Set?r[i]=new Set(t[i]):!n.isMergeableObject(t[i])||!e[i]?r[i]=Bt(t[i],n):r[i]=Ut(e[i],t[i],n)}),r}function Ut(e,t,n={}){if(n.arrayMerge=n.arrayMerge||Vt,n.isMergeableObject=n.isMergeableObject||Gt,e instanceof Decimal)return new Decimal(t);if(e instanceof Set)return new Set(t);let r=Array.isArray(t);return r===Array.isArray(e)?r?n.arrayMerge(e,t,n):Ht(e,t,n):Bt(t,n)}function Wt(e,t){if(!Array.isArray(e))throw TypeError(`first argument should be an array`);return t||={arrayMerge:(e,t,n)=>t.map((t,r)=>e[r]&&e[r]instanceof Decimal?new Decimal(t):e[r]&&e[r]instanceof Set?new Set(t):!n.isMergeableObject(t)||!e[r]?Bt(t,n):Ut(e[r],t,n))},e.reduce((e,n)=>Ut(e,n,t),{})}function Gt(e){return Kt(e)&&!qt(e)}function Kt(e){return!!e&&typeof e==`object`}function qt(e){let t=Object.prototype.toString.call(e);return t===`[object RegExp]`||t===`[object Date]`}function Jt(){let e={...j};for(let t in j)j.glyphTypes.includes(t)||delete e[t];return e}window.player={antimatter:o.E1,dimensions:{antimatter:Array.range(0,8).map(()=>({bought:o.D0,costBumps:o.D0,amount:o.D0})),infinity:Array.range(0,8).map(e=>({isUnlocked:!1,bought:o.D0,amount:o.D0,cost:[o.E8,o.E9,o.E10,o.E20,o.E140,o.E200,o.E250,o.E280][e],baseAmount:o.D0})),time:Array.range(0,8).map(e=>({cost:[o.D1,o.D5,o.E2,o.E3,o.E2350,o.E2650,o.E3000,o.E3350][e],amount:o.D0,bought:o.D0}))},buyUntil10:!0,sacrificed:o.D0,achievementBits:Array.repeat(0,17),secretAchievementBits:Array.repeat(0,4),infinityUpgrades:new Set,infinityRebuyables:[new Decimal,new Decimal,new Decimal],challenge:{normal:{current:0,bestTimes:Array.repeat(o.BEMAX,11),completedBits:0},infinity:{current:0,bestTimes:Array.repeat(o.BEMAX,8),completedBits:0},eternity:{current:0,unlocked:0,requirementBits:0,completions:Array.repeat(0,14)},quantum:{current:0,completions:Array.repeat(0,8)}},auto:{autobuyersOn:!0,disableContinuum:!1,reality:{mode:0,rm:o.D1,glyph:o.D0,time:0,shard:o.D0,isActive:!1},eternity:{mode:0,amount:o.D1,increaseWithMult:!0,time:1,xHighest:o.D1,isActive:!1},bigCrunch:{cost:1,interval:15e4,mode:0,amount:o.D1,increaseWithMult:!0,time:1,xHighest:o.D1,isActive:!0,lastTick:0},galaxy:{cost:1,interval:2e4,limitGalaxies:!1,maxGalaxies:new Decimal(1),buyMax:!1,buyMaxInterval:0,isActive:!0,lastTick:0},dimBoost:{cost:1,interval:4e3,limitDimBoosts:!1,maxDimBoosts:new Decimal(1),limitUntilGalaxies:!1,galaxies:new Decimal(10),buyMaxInterval:0,isActive:!0,lastTick:0},tickspeed:{isUnlocked:!1,cost:1,interval:500,mode:AUTOBUYER_MODE.BUY_SINGLE,isActive:!0,lastTick:0,isBought:!1},sacrifice:{multiplier:o.D2,isActive:!0},antimatterDims:{all:Array.range(0,8).map(e=>({isUnlocked:!1,cost:1,interval:[500,600,700,800,900,1e3,1100,1200][e],bulk:1,mode:AUTOBUYER_MODE.BUY_10,isActive:!0,lastTick:0,isBought:!1})),isActive:!0},infinityDims:{all:Array.range(0,8).map(()=>({isActive:!1,lastTick:0})),isActive:!0},timeDims:{all:Array.range(0,8).map(()=>({isActive:!1,lastTick:0})),isActive:!0},metaDims:{all:Array.range(0,8).map(()=>({isActive:!1,lastTick:0})),isActive:!0},replicantiGalaxies:{isActive:!1},replicantiUpgrades:{all:Array.range(0,3).map(()=>({isActive:!1,lastTick:0})),isActive:!0},timeTheorems:{isActive:!1},dilationUpgrades:{all:Array.range(0,5).map(()=>({isActive:!1,lastTick:0})),isActive:!0},blackHolePower:{all:Array.range(0,2).map(()=>({isActive:!1})),isActive:!0},realityUpgrades:{all:Array.range(0,5).map(()=>({isActive:!1})),isActive:!0},imaginaryUpgrades:{all:Array.range(0,10).map(()=>({isActive:!1})),isActive:!0},darkMatterDims:{isActive:!1,lastTick:0},ascension:{isActive:!1,lastTick:0},annihilation:{isActive:!1,multiplier:new Decimal(1.05)},singularity:{isActive:!1},ipMultBuyer:{isActive:!1},epMultBuyer:{isActive:!1},pairProduction:{isActive:!1},mdBoost:{isActive:!1}},infinityPoints:o.D0,infinities:o.D0,infinitiesBanked:o.D0,dimensionBoosts:o.D0,galaxies:o.D0,news:{seen:{},specialTickerData:{uselessNewsClicks:0,paperclips:0,newsQueuePosition:1e3,eiffelTowerChapter:0},totalSeen:0},lastUpdate:Date.now(),backupTimer:0,chall2Pow:o.D1,chall3Pow:o.D0_01,matter:o.D1,chall9TickspeedCostBumps:o.D0,chall8TotalSacrifice:o.D1,ic2Count:0,partInfinityPoint:0,partInfinitied:0,break:!1,secretUnlocks:{themes:new Set,viewSecretTS:!1,cancerAchievements:!1},shownRuns:{Reality:!0,Eternity:!0,Infinity:!0},requirementChecks:{infinity:{maxAll:!1,noSacrifice:!0,noAD8:!0},eternity:{onlyAD1:!0,onlyAD8:!0,noAD1:!0,noRG:!0},reality:{noAM:!0,noTriads:!0,noPurchasedTT:!0,noInfinities:!0,noEternities:!0,noContinuum:!0,maxID1:o.D0,maxStudies:0,maxGlyphs:0,slowestBH:o.D1},quantum:{},permanent:{emojiGalaxies:o.D0,singleTickspeed:0,perkTreeDragging:0}},records:{gameCreatedTime:Date.now(),trueTimePlayed:0,totalTimePlayed:o.D0,timePlayedAtBHUnlock:o.BEMAX,realTimePlayed:o.D0,realTimeDoomed:o.D0,fullGameCompletions:0,previousRunRealTime:o.D0,totalAntimatter:o.E1,recentInfinities:Array.range(0,10).map(()=>[Number.MAX_VALUE,o.BEMAX,o.BEMAX,o.D1,o.D1,``]),recentEternities:Array.range(0,10).map(()=>[Number.MAX_VALUE,o.BEMAX,o.BEMAX,o.D1,o.D1,``,o.D0]),recentRealities:Array.range(0,10).map(()=>[Number.MAX_VALUE,o.BEMAX,o.BEMAX,o.D1,o.D1,``,o.D0,o.D0]),recentQuantums:Array.range(0,10).map(()=>[Number.MAX_VALUE,o.BEMAX,o.BEMAX,o.D1,o.D1,``]),thisInfinity:{time:o.D0,realTime:o.D0,trueTime:0,lastBuyTime:o.D0,maxAM:o.D0,bestIPmin:o.D0,bestIPminVal:o.D0},bestInfinity:{time:o.BEMAX,realTime:o.BEMAX,trueTime:0,bestIPminEternity:o.D0,bestIPminReality:o.D0},thisEternity:{time:o.D0,realTime:o.D0,trueTime:0,maxAM:o.D0,maxIP:o.D0,bestIPMsWithoutMaxAll:o.D0,bestEPmin:o.D0,bestEPminVal:o.D0,bestInfinitiesPerMs:o.D0},bestEternity:{time:o.BEMAX,realTime:o.BEMAX,trueTime:0,bestEPminReality:o.D0},thisReality:{time:o.D0,realTime:o.D0,trueTime:0,maxAM:o.D0,maxIP:o.D0,maxEP:o.D0,bestEternitiesPerMs:o.D0,maxReplicanti:o.D0,maxDT:o.D0,bestRSmin:o.D0,bestRSminVal:o.D0},bestReality:{time:o.BEMAX,realTime:o.BEMAX,trueTime:0,glyphStrength:o.D0,RM:o.D0,RMSet:[],RMmin:o.D0,RMminSet:[],glyphLevel:o.D0,glyphLevelSet:[],bestEP:o.D0,bestEPSet:[],speedSet:[],iMCapSet:[],laitelaSet:[]},thisQuantum:{time:o.D0,realTime:o.D0,trueTime:0,maxTP:o.D0,bestAM:o.D0,bestMA:o.D0,bestQKmin:o.D0,bestQKminVal:o.D0},bestQuantum:{time:o.BEMAX,realTime:o.BEMAX,trueTime:0,netQuarks:o.D0},thisFundament:{time:o.D0,realTime:o.D0,trueTime:0},bestFundament:{time:o.D0,realTime:o.D0,trueTime:0}},speedrun:{isUnlocked:!1,isActive:!1,isSegmented:!1,usedSTD:!1,hasStarted:!1,hideInfo:!1,displayAllMilestones:!1,startDate:0,name:``,offlineTimeUsed:0,records:Array.repeat(0,26),achievementTimes:{},seedSelection:SPEEDRUN_SEED_STATE.FIXED,initialSeed:0,previousRuns:{}},IPMultPurchases:o.D0,version:100,infinityPower:o.D1,postC4Tier:0,eternityPoints:o.D0,eternities:o.D0,eternityUpgrades:new Set,epmultUpgrades:o.D0,timeShards:o.D0,totalTickGained:o.D0,totalTickBought:o.D0,replicanti:{unl:!1,amount:o.D0,chance:new Decimal(.01),chanceCost:o.E150,interval:o.E3,intervalCost:o.E140,boughtGalaxyCap:o.D0,galaxies:o.D0,galCost:o.E170},timestudy:{theorem:o.D0,maxTheorem:o.D0,amBought:o.D0,ipBought:o.D0,epBought:o.D0,studies:[],mastery:[],shopMinimized:!1,preferredPaths:[[],0],presets:[,,,,,,].fill({name:``,studies:``})},respec:!1,eterc8ids:50,eterc8repl:40,dilation:{studies:[],active:!1,tachyonParticles:o.D0,dilatedTime:o.D0,nextThreshold:o.E3,baseTachyonGalaxies:o.D0,totalTachyonGalaxies:o.D0,upgrades:new Set,rebuyables:{1:new Decimal,2:new Decimal,3:new Decimal,4:new Decimal,18:new Decimal,19:new Decimal,20:new Decimal},lastEP:o.DM1},realities:o.D0,partSimulatedReality:o.D0,reality:{realityMachines:o.D0,maxRM:o.D0,imaginaryMachines:o.D0,iMCap:o.D0,glyphs:{active:[],inventory:[],sac:{power:o.D0,infinity:o.D0,time:o.D0,replication:o.D0,dilation:o.D0,effarig:o.D0,reality:o.D0},undo:[],sets:Array(7).fill({name:``,glyphs:[]}),protectedRows:2,filter:{select:AUTO_GLYPH_SCORE.LOWEST_SACRIFICE,trash:AUTO_GLYPH_REJECT.SACRIFICE,simple:0,types:Object.keys(Jt()).filter(e=>j.generatedGlyphTypes.includes(e)).mapToObject(e=>e,e=>({rarity:new Decimal,score:0,effectCount:0,specifiedMask:[],effectScores:[...Array(j[e].effectIDs.length).keys()].mapToObject(t=>j[e].effectIDs[t],()=>0)}))},createdRealityGlyph:!1,cosmetics:{active:!1,glowNotification:!1,unlockedFromNG:[],symbolMap:{},colorMap:{}}},initialSeed:Math.floor(Date.now()*Math.random()+1),seed:1,secondGaussian:1e6,musicSeed:Math.floor(Date.now()*Math.random()+3168660683),musicSecondGaussian:1e6,rebuyables:{1:new Decimal,2:new Decimal,3:new Decimal,4:new Decimal,5:new Decimal},upgradeBits:0,upgReqs:0,imaginaryUpgradeBits:0,imaginaryUpgReqs:0,imaginaryRebuyables:{1:new Decimal,2:new Decimal,3:new Decimal,4:new Decimal,5:new Decimal,6:new Decimal,7:new Decimal,8:new Decimal,9:new Decimal,10:new Decimal},reqLock:{reality:0,imaginary:0},perks:new Set,respec:!1,showGlyphSacrifice:!1,showSidebarPanel:GLYPH_SIDEBAR_MODE.INVENTORY_MANAGEMENT,autoSort:0,autoCollapse:!1,autoAutoClean:!1,applyFilterToPurge:!1,moveGlyphsOnProtection:!1,perkPoints:o.D0,unlockedEC:0,autoEC:!0,lastAutoEC:o.D0,partEternitied:o.D0,autoAchieve:!0,gainedAutoAchievements:!0,automator:{state:{mode:f.STOP,topLevelScript:0,editorScript:0,repeat:!0,forceRestart:!0,followExecution:!0,stack:[]},scripts:{},constants:{},constantSortOrder:[],execTimer:0,type:x.TEXT,forceUnlock:!1,currentInfoPane:Ft.INTRO_PAGE},achTimer:new Decimal,hasCheckedFilter:!1},blackHole:Array.range(0,2).map(e=>({id:e,intervalUpgrades:o.D0,powerUpgrades:o.D0,durationUpgrades:o.D0,phase:o.D0,active:!1,unlocked:!1,activations:o.D0})),blackHolePause:!1,blackHoleAutoPauseMode:0,blackHolePauseTime:o.D0,blackHoleNegative:o.D1,celestials:{teresa:{pouredAmount:0,quoteBits:0,unlockBits:0,run:!1,bestRunAM:o.D1,bestAMSet:[],perkShop:Array.repeat(o.D0,6),lastRepeatedMachines:o.D0,lastRepeatediM:o.D0},effarig:{relicShards:o.D0,unlockBits:0,run:!1,quoteBits:0,glyphWeights:{ep:25,repl:25,dt:25,eternities:25},autoAdjustGlyphWeights:!1},enslaved:{isStoring:!1,stored:o.D0,isStoringReal:!1,storedReal:o.D0,autoStoreReal:!1,isAutoReleasing:!1,quoteBits:0,unlocks:[],run:!1,completed:!1,tesseracts:o.D0,hasSecretStudy:!1,feltEternity:!1,progressBits:0,hintBits:0,hintUnlockProgress:0,glyphHintsGiven:0,zeroHintTime:0},v:{unlockBits:0,run:!1,quoteBits:0,runUnlocks:[0,0,0,0,0,0,0,0,0],goalReductionSteps:[0,0,0,0,0,0,0,0,0],STSpent:0,runGlyphs:[[],[],[],[],[],[],[],[],[]],runRecords:[-10,o.D0,o.D0,o.D0,o.D0,o.D0,0,o.D0,o.D0],wantsFlipped:!0},ra:{pets:{teresa:{level:1,memories:o.D0,memoryChunks:o.D0,memoryUpgrades:0,chunkUpgrades:0},effarig:{level:1,memories:o.D0,memoryChunks:o.D0,memoryUpgrades:0,chunkUpgrades:0},enslaved:{level:1,memories:o.D0,memoryChunks:o.D0,memoryUpgrades:0,chunkUpgrades:0},v:{level:1,memories:o.D0,memoryChunks:o.D0,memoryUpgrades:0,chunkUpgrades:0}},alchemy:Array.repeat(0,21).map(()=>({amount:o.D0,reaction:!1})),highestRefinementValue:{power:o.D0,infinity:o.D0,time:o.D0,replication:o.D0,dilation:o.D0,effarig:o.D0},quoteBits:0,momentumTime:o.D0,unlocks:[],run:!1,charged:new Set,disCharge:!1,peakGamespeed:o.D1,petWithRemembrance:``},laitela:{darkMatter:o.D0,maxDarkMatter:o.D0,run:!1,quoteBits:0,dimensions:Array.range(0,4).map(()=>({amount:o.D0,intervalUpgrades:o.D0,powerDMUpgrades:o.D0,powerDEUpgrades:o.D0,realDiff:o.D0,ascensionCount:o.D0})),entropy:o.D0,thisCompletion:new Decimal(3600),fastestCompletion:new Decimal(3600),difficultyTier:0,upgrades:{},darkMatterMult:o.D1,darkEnergy:o.D0,singularitySorting:{displayResource:0,sortResource:0,showCompleted:0,sortOrder:0},singularities:o.D0,singularityCapIncreases:o.D0,lastCheckedMilestones:o.D0,milestoneGlow:!0},pelle:{doomed:!1,upgrades:new Set,remnants:o.D0,realityShards:o.D0,records:{totalAntimatter:o.D0,totalInfinityPoints:o.D0,totalEternityPoints:o.D0},rebuyables:{antimatterDimensionMult:o.D0,timeSpeedMult:o.D0,glyphLevels:o.D0,infConversion:o.D0,galaxyPower:o.D0,galaxyGeneratorAdditive:o.D0,galaxyGeneratorMultiplicative:o.D0,galaxyGeneratorAntimatterMult:o.D0,galaxyGeneratorIPMult:o.D0,galaxyGeneratorEPMult:o.D0},rifts:{vacuum:{fill:o.D0,active:!1,reducedTo:1},decay:{fill:o.D0,active:!1,percentageSpent:0,reducedTo:1},chaos:{fill:0,active:!1,reducedTo:1},recursion:{fill:o.D0,active:!1,reducedTo:1},paradox:{fill:o.D0,active:!1,reducedTo:1}},progressBits:0,galaxyGenerator:{unlocked:!1,spentGalaxies:o.D0,generatedGalaxies:o.D0,phase:0,sacrificeActive:!1},quoteBits:0,collapsed:{upgrades:!1,rifts:!1,galaxies:!1},showBought:!1}},isGameEnd:!1,tabNotifications:new Set,triggeredTabNotificationBits:0,tutorialState:0,tutorialActive:!0,options:{news:{enabled:!0,repeatBuffer:40,AIChance:0,speed:1,includeAnimated:!0},notation:`Mixed scientific`,lnotation:`Stacked Scientific`,notationDigits:{comma:5,notation:9},sidebarResourceID:0,retryChallenge:!1,retryCelestial:!1,showAllChallenges:!1,cloudEnabled:!0,hideGoogleName:!1,showCloudModal:!0,forceCloudOverwrite:!1,syncSaveIntervals:!0,hotkeys:!0,themeClassic:`Normal`,themeModern:`Normal`,updateRate:33,newUI:!0,offlineProgress:!0,loadBackupWithoutOffline:!1,automaticTabSwitching:!0,respecIntoProtected:!1,offlineTicks:1e5,hibernationCatchup:!0,statTabResources:0,multiplierTab:{currTab:0,showAltGroup:!1,replacePowers:!1},autosaveInterval:3e4,showTimeSinceSave:!0,saveFileName:``,exportedFileCount:0,hideCompletedAchievementRows:!1,glyphTextColors:!0,headerTextColored:!1,showNewGlyphIcon:!0,showUnequippedGlyphIcon:!0,highContrastRarity:!1,swapGlyphColors:!1,hideAlterationEffects:!1,ignoreGlyphEffects:!0,ignoreGlyphLevel:!0,ignoreGlyphRarity:!0,glyphBG:GLYPH_BG_SETTING.AUTO,glyphBorders:!0,showHintText:{showPercentage:!0,achievements:!0,achievementUnlockStates:!0,challenges:!0,studies:!0,glyphEffectDots:!0,realityUpgrades:!0,perks:!0,alchemy:!0,glyphInfoType:Lt.types.NONE,showGlyphInfoByDefault:!1},animations:{bigCrunch:!0,eternity:!0,dilation:!0,tachyonParticles:!0,reality:!0,background:!0,blobSnowflakes:16,blobHole:!1},confirmations:{armageddon:!0,sacrifice:!0,challenges:!0,exitChallenge:!0,eternity:!0,dilation:!0,resetReality:!0,glyphReplace:!0,glyphSacrifice:!0,autoClean:!0,sacrificeAll:!0,glyphSelection:!0,glyphUndo:!0,deleteGlyphSetSave:!0,glyphRefine:!0,bigCrunch:!0,replicantiGalaxy:!0,antimatterGalaxy:!0,dimensionBoost:!0,switchAutomatorMode:!0,respecIAP:!0,ngPlusMode:!0},awayProgress:{antimatter:!0,dimensionBoosts:!0,antimatterGalaxies:!0,infinities:!0,infinityPoints:!0,replicanti:!0,replicantiGalaxies:!0,eternities:!0,eternityPoints:!0,tachyonParticles:!0,dilatedTime:!0,tachyonGalaxies:!0,timeTheorems:!0,achievementCount:!0,realities:!0,realityMachines:!0,imaginaryMachines:!0,relicShards:!0,darkMatter:!0,darkEnergy:!0,singularities:!0,celestialMemories:!0,blackHole:!0,realityShards:!0},hiddenTabBits:0,hiddenSubtabBits:Array.repeat(0,11),lastOpenTab:0,lastOpenSubtab:Array.repeat(0,11),perkLayout:0,perkPhysicsEnabled:!0,automatorEvents:{newestFirst:!1,timestampType:0,maxEntries:200,clearOnReality:!0,clearOnRestart:!0},invertTTgenDisplay:!1,autoRealityForFilter:!1},IAP:{enabled:!1,checkoutSession:{id:!1}},meta:{antimatter:o.D0,dimensions:Array.range(0,8).map(()=>({bought:o.D0,amount:o.D0})),buyUntil10:!0,boosts:o.D0},quantum:{times:o.D0,quarks:o.D0,colors:{red:o.D0,green:o.D0,blue:o.D0},quarkPowers:{red:o.D0,green:o.D0,blue:o.D0},gluons:{rg:o.D0,gb:o.D0,br:o.D0},multiplierUpgrades:o.D0,gluonUpgrades:{rg:new Set,gb:new Set,br:new Set},pair:{electrons:o.D0,positrons:o.D0,dischargedGalaxies:o.D0,positronUpgrades:Array.repeat(o.D0,4),electronUpgrades:Array.repeat(o.D0,4)},bigRip:{active:!1,spaceShards:o.D0}}};const Yt={defaultStart:Wt([{},player]),get isInMatterChallenge(){return NormalChallenge(11).isRunning||InfinityChallenge(6).isRunning},get isInAntimatterChallenge(){return NormalChallenge.isRunning||InfinityChallenge.isRunning},get antimatterChallenge(){return NormalChallenge.current||InfinityChallenge.current},get isInAnyChallenge(){return this.isInAntimatterChallenge||EternityChallenge.isRunning||QuantumChallenge.isRunning},get anyChallenge(){return this.antimatterChallenge||EternityChallenge.current||QuantumChallenge.current},get canCrunch(){if(Enslaved.isRunning&&Enslaved.BROKEN_CHALLENGES.includes(NormalChallenge.current?.id))return!1;let e=NormalChallenge.current||InfinityChallenge.current,t=e===void 0?o.NUMMAX:e.goal;return player.records.thisInfinity.maxAM.gte(t)},get canEternity(){return player.records.thisEternity.maxIP.gte(Yt.eternityGoal)},get canStudyQuantum(){return player.records.thisQuantum.bestMA.gte(Yt.quantumGoal.ma)},get bestRunIPPM(){return GameCache.bestRunIPPM.value},get averageRealTimePerEternity(){return GameCache.averageRealTimePerEternity.value},get tickSpeedMultDecrease(){return GameCache.tickSpeedMultDecrease.value},get dimensionMultDecrease(){return GameCache.dimensionMultDecrease.value},get infinityGoal(){let e=NormalChallenge.current||InfinityChallenge.current;return e===void 0?o.NUMMAX:e.goal},get infinityLimit(){let e=NormalChallenge.current||InfinityChallenge.current;return e===void 0?o.BEMAX:e.goal},get eternityGoal(){return EternityChallenge.isRunning?EternityChallenge.current.currentGoal:requiredIPForEP(1)},get quantumGoal(){return QuantumChallenge.isRunning?QuantumChallenge.current.goal:{am:o.BEMAX,ma:Decimal.pow(Number.MAX_VALUE,2)}},get automatorUnlocked(){return AutomatorPoints.totalPoints>=AutomatorPoints.pointsForAutomator||player.reality.automator.forceUnlock},resetRequirements(e){let t=player.requirementChecks.reality.maxGlyphs;switch(e){case`reality`:player.requirementChecks.reality={noAM:!0,noTriads:!0,noPurchasedTT:!0,noInfinities:!0,noEternities:!0,noContinuum:player.auto.disableContinuum,maxID1:o.D0,maxStudies:0,maxGlyphs:t,slowestBH:BlackHoles.areNegative?player.blackHoleNegative:o.D1};case`quantum`:player.requirementChecks.quantum={};case`eternity`:player.requirementChecks.eternity={onlyAD1:!0,onlyAD8:!0,noAD1:!0,noRG:!0};case`infinity`:player.requirementChecks.infinity={maxAll:!1,noSacrifice:!0,noAD8:!0};break;default:throw Error(`Unrecognized prestige layer for requirement reset`)}}};var Xt=e=>typeof e==`object`&&!!e&&!(e instanceof Decimal);function Zt(e){for(let t in e){if(!Object.hasOwn(e,t)||t===`automator`)continue;let n=e[t];if(Xt(n)){Zt(n);continue}typeof n==`number`&&Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:()=>n,set:function(e){if(e==null)throw TypeError(`null/undefined player property assignment`);if(typeof e!=`number`)throw TypeError(`Non-Number assignment to Number player property`);if(!Number.isFinite(e))throw TypeError(`NaN player property assignment`);n=e}}),n instanceof Decimal&&Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:()=>n,set:function(e){if(e==null)throw TypeError(`null/undefined player property assignment`);if(!(e instanceof Decimal))throw TypeError(`Non-Decimal assignment to Decimal player property`);if(!Number.isFinite(e.mag)||!Number.isFinite(e.sign)||!Number.isFinite(e.layer))throw TypeError(`NaN player property assignment`);n=e}})}}const Qt={container:document.querySelector(`#performance-stats`),samplePeriod:10*1e3,isOn:!1,currentBlocks:[],stats:{},turnOn(){this.isOn=!0,this.container.style.display=`flex`},turnOff(){this.isOn=!1,this.container.style.display=`none`,this.stats={}},toggle(){this.isOn?this.turnOff():this.turnOn()},start(e){if(!this.isOn)return;let t=this.currentBlocks.length>0?this.currentBlocks.last().childBlocks:this.stats,n=t[e];n===void 0&&(n={records:[],childBlocks:{}},t[e]=n),this.currentBlocks.push(n);let r={};n.records.push(r),r.timestamp=performance.now()},end(){if(!this.isOn)return;let e=performance.now(),t=this.currentBlocks.pop().records.last();t.duration=e-t.timestamp},render(){if(!this.isOn)return;let e=-1,t=``,n=this.samplePeriod,r;function i(a){for(let o in e++,a){if(!Object.hasOwn(a,o))continue;let s=a[o],c=s.records;for(;c.length>1&&c.last().timestamp-c.first().timestamp>n;)c.shift();if(t+=`${`-`.repeat(e)}${o}: `,c.length>0){let e=0,n=Number.MIN_VALUE,i=Number.MAX_VALUE;for(let t of c){let r=t.duration;e+=r,r>n&&(n=r),r<i&&(i=r)}let a=e/c.length;r===void 0&&(r=1e3/a,t=`FPS: ${Math.floor(r)}<br>${t}`),t+=`${a.toFixed(3)}/${i.toFixed(3)}/${n.toFixed(3)}`}t+=`<br>`,i(s.childBlocks)}e--}i(this.stats),this.container.innerHTML=t}};var $t=class{add(e,t){throw new NotImplementedError}subtract(e,t){throw new NotImplementedError}multiply(e,t){throw new NotImplementedError}divide(e,t){throw new NotImplementedError}max(e,t){throw new NotImplementedError}min(e,t){throw new NotImplementedError}eq(e,t){throw new NotImplementedError}gt(e,t){throw new NotImplementedError}gte(e,t){throw new NotImplementedError}lt(e,t){throw new NotImplementedError}lte(e,t){throw new NotImplementedError}};$t.number=new class extends $t{add(e,t){return e+t}subtract(e,t){return e-t}multiply(e,t){return e*t}divide(e,t){return e/t}max(e,t){return Math.max(e,t)}min(e,t){return Math.min(e,t)}eq(e,t){return e===t}gt(e,t){return e>t}gte(e,t){return e>=t}lt(e,t){return e<t}lte(e,t){return e<=t}},$t.decimal=new class extends $t{add(e,t){return Decimal.add(e,t)}subtract(e,t){return Decimal.subtract(e,t)}multiply(e,t){return Decimal.multiply(e,t)}divide(e,t){return Decimal.divide(e,t)}max(e,t){return Decimal.max(e,t)}min(e,t){return Decimal.min(e,t)}eq(e,t){return Decimal.eq(e,t)}gt(e,t){return Decimal.gt(e,t)}gte(e,t){return Decimal.gte(e,t)}lt(e,t){return Decimal.lt(e,t)}lte(e,t){return Decimal.lte(e,t)}};var en=class{get value(){throw new NotImplementedError}set value(e){throw new NotImplementedError}get operations(){throw new NotImplementedError}add(e){this.value=this.operations.add(this.value,e)}subtract(e){this.value=this.operations.max(this.operations.subtract(this.value,e),0)}multiply(e){this.value=this.operations.multiply(this.value,e)}divide(e){this.value=this.operations.divide(this.value,e)}eq(e){return this.operations.eq(this.value,e)}gt(e){return this.operations.gt(this.value,e)}gte(e){return this.operations.gte(this.value,e)}lt(e){return this.operations.lt(this.value,e)}lte(e){return this.operations.lte(this.value,e)}purchase(e){return this.gte(e)?(this.subtract(e),!0):!1}bumpTo(e){this.value=this.operations.max(this.value,e)}dropTo(e){this.value=this.operations.min(this.value,e)}get startingValue(){throw new NotImplementedError}reset(){this.value=this.startingValue}},tn=class extends en{get operations(){return $t.decimal}get sign(){return this.value.sign}get mag(){return this.value.mag}get layer(){return this.value.layer}get startingValue(){return o.D0}};window.DecimalCurrency=tn,en.antimatter=new class extends tn{get value(){return player.antimatter}set value(e){InfinityChallenges.nextIC&&InfinityChallenges.notifyICUnlock(e),GameCache.cheapestAntimatterAutobuyer.value&&e.gte(GameCache.cheapestAntimatterAutobuyer.value)&&(TabNotification.newAutobuyer.clearTrigger(),TabNotification.newAutobuyer.tryTrigger()),player.antimatter=e,player.records.thisInfinity.maxAM=player.records.thisInfinity.maxAM.max(e),player.records.thisEternity.maxAM=player.records.thisEternity.maxAM.max(e),player.records.thisReality.maxAM=player.records.thisReality.maxAM.max(e),Pelle.isDoomed&&(player.celestials.pelle.records.totalAntimatter=player.celestials.pelle.records.totalAntimatter.max(e))}add(e){super.add(e),e.gt(0)&&(player.records.totalAntimatter=player.records.totalAntimatter.add(e),player.requirementChecks.reality.noAM=!1)}get productionPerSecond(){return NormalChallenge(12).isRunning?AntimatterDimension(1).productionPerRealSecond.plus(AntimatterDimension(2).productionPerRealSecond):AntimatterDimension(1).productionPerRealSecond}get startingValue(){return Pelle.isDisabled()?new Decimal(100):Effects.max(o.E1,Perk.startAM,Achievement(21),Achievement(37),Achievement(54),Achievement(55),Achievement(78))}},en.matter=new class extends tn{get value(){return player.matter}set value(e){player.matter=Decimal.min(e,o.BEMAX)}},en.infinities=new class extends tn{get value(){return player.infinities}set value(e){player.infinities=e}},en.infinitiesBanked=new class extends tn{get value(){return player.infinitiesBanked}set value(e){player.infinitiesBanked=e}},en.infinitiesTotal=new class extends tn{get value(){return player.infinities.plus(player.infinitiesBanked)}set value(e){player.infinities=e}},en.infinityPoints=new class extends tn{get value(){return player.infinityPoints}set value(e){player.infinityPoints=e,player.records.thisEternity.maxIP=player.records.thisEternity.maxIP.max(e),player.records.thisReality.maxIP=player.records.thisReality.maxIP.max(e),Pelle.isDoomed&&(player.celestials.pelle.records.totalInfinityPoints=player.celestials.pelle.records.totalInfinityPoints.max(e))}get startingValue(){return Pelle.isDisabled()?new Decimal:Effects.max(new Decimal,Perk.startIP1,Perk.startIP2,Achievement(104))}reset(){super.reset(),player.records.thisEternity.maxIP=this.startingValue}},en.infinityPower=new class extends tn{get value(){return player.infinityPower}set value(e){player.infinityPower=e}},en.eternities=new class extends tn{get value(){return player.eternities}set value(e){player.eternities=e}get startingValue(){return Pelle.isDoomed?new Decimal(0):Effects.max(0,RealityUpgrade(10))}},en.eternityPoints=new class extends tn{get value(){return player.eternityPoints}set value(e){player.eternityPoints=e,player.records.thisReality.maxEP=player.records.thisReality.maxEP.max(e),player.records.bestReality.bestEP.lt(e)&&(player.records.bestReality.bestEP=e,player.records.bestReality.bestEPSet=Glyphs.copyForRecords(Glyphs.active.filter(e=>e!==null))),Pelle.isDoomed&&(player.celestials.pelle.records.totalEternityPoints=player.celestials.pelle.records.totalEternityPoints.max(e))}get startingValue(){return Pelle.isDisabled()?new Decimal(0):Effects.max(0,Perk.startEP1,Perk.startEP2,Perk.startEP3)}reset(){super.reset(),player.records.thisReality.maxEP=this.startingValue}},en.timeShards=new class extends tn{get value(){return player.timeShards}set value(e){player.timeShards=e}},en.timeTheorems=new class extends tn{get value(){return player.timestudy.theorem}set value(e){player.timestudy.theorem=e,player.timestudy.maxTheorem=e.plus(TimeTheorems.calculateTimeStudiesCost())}get max(){return player.timestudy.maxTheorem}add(e){super.add(e),player.timestudy.maxTheorem=player.timestudy.maxTheorem.plus(e)}reset(){respecTimeStudies(!0),super.reset(),TimeTheoremPurchaseType.am.reset(),TimeTheoremPurchaseType.ip.reset(),TimeTheoremPurchaseType.ep.reset(),player.timestudy.maxTheorem=this.startingValue}},en.tachyonParticles=new class extends tn{get value(){return player.dilation.tachyonParticles}set value(e){player.dilation.tachyonParticles=e}},en.dilatedTime=new class extends tn{get value(){return player.dilation.dilatedTime}set value(e){player.dilation.dilatedTime=e,player.records.thisReality.maxDT=player.records.thisReality.maxDT.max(e)}},en.realities=new class extends tn{get value(){return player.realities}set value(e){player.realities=e}},en.realityMachines=new class extends tn{get value(){return player.reality.realityMachines}set value(e){let t=(Decimal.min(e,MachineHandler.hardcapRM)),n=(t.minus(player.reality.realityMachines));player.reality.realityMachines=t,player.reality.maxRM=Decimal.max(player.reality.maxRM,t),player.records.bestReality.RM.lt(n)&&(player.records.bestReality.RM=n,player.records.bestReality.RMSet=Glyphs.copyForRecords(Glyphs.active.filter(e=>e!==null)))}},en.perkPoints=new class extends tn{get value(){return player.reality.perkPoints}set value(e){player.reality.perkPoints=e}},en.relicShards=new class extends tn{get value(){return player.celestials.effarig.relicShards}set value(e){player.celestials.effarig.relicShards=e}},en.imaginaryMachines=new class extends tn{get value(){return player.reality.imaginaryMachines}set value(e){player.reality.imaginaryMachines=Decimal.clampMax(e,MachineHandler.currentIMCap)}},en.darkMatter=new class extends tn{get value(){return player.celestials.laitela.darkMatter}set value(e){let t=(Decimal.min(e,Number.MAX_VALUE));player.celestials.laitela.darkMatter=t,player.celestials.laitela.maxDarkMatter=player.celestials.laitela.maxDarkMatter.max(t)}get max(){return player.celestials.laitela.maxDarkMatter}set max(e){player.celestials.laitela.maxDarkMatter=e}},en.darkEnergy=new class extends tn{get value(){return player.celestials.laitela.darkEnergy}set value(e){player.celestials.laitela.darkEnergy=e}get productionPerSecond(){return DarkMatterDimensions.all.map(e=>e.productionPerSecond).sum()}},en.singularities=new class extends tn{get value(){return player.celestials.laitela.singularities}set value(e){player.celestials.laitela.singularities=e}},en.remnants=new class extends tn{get value(){return player.celestials.pelle.remnants}set value(e){player.celestials.pelle.remnants=e}},en.realityShards=new class extends tn{get value(){return player.celestials.pelle.realityShards}set value(e){player.celestials.pelle.realityShards=e}},en.replicanti=new class extends tn{get value(){return player.replicanti.amount}set value(e){player.replicanti.amount=e}},en.galaxyGeneratorGalaxies=new class extends tn{get value(){return player.galaxies.add(GalaxyGenerator.galaxies)}set value(e){let t=(player.galaxies.add(GalaxyGenerator.galaxies).sub(e));player.celestials.pelle.galaxyGenerator.spentGalaxies=player.celestials.pelle.galaxyGenerator.spentGalaxies.add(t)}},en.metaAntimatter=new class extends tn{get value(){return player.meta.antimatter}set value(e){player.meta.antimatter=e,player.records.thisQuantum.bestMA=player.records.thisQuantum.bestMA.max(e)}get productionPerSecond(){return MetaDimension(1).productionPerRealSecond}get startingValue(){return Effects.max(10,Achievement(142))}},en.quarks=new class extends tn{get value(){return player.quantum.quarks}set value(e){player.quantum.quarks=e}},en.quantums=new class extends tn{get value(){return player.quantum.times}set value(e){player.quantum.times=e}};var nn=class e{_getValue;_value;static _registrar;constructor(t){this._getValue=t,e.registerLazy(this)}static get registrar(){return e._registrar===void 0&&(e._registrar=[]),e._registrar}static registerLazy(t){e.registrar.push(t)}static invalidateAll(){for(let t of e.registrar)t.invalidate()}get value(){return this._value===void 0&&(this._value=this._getValue()),this._value}invalidate(){this._value=void 0}invalidateOn(...e){for(let t of e)EventHub.logic.on(t,()=>{this.invalidate()});return this}};window.Lazy=nn;function rn(e,t=!1){let n=0,r=t?0:new Decimal(0);for(;e[n]!==void 0;)r=t?Math.max(r,e[n]):Decimal.max(r,e[n]),n++;return r}const an={worstChallengeTime:new nn(()=>rn(player.challenge.normal.bestTimes)),bestRunIPPM:new nn(()=>player.records.recentInfinities.map(e=>e[3].div(e[1].times(6e4))).reduce(Decimal.maxReducer)),averageRealTimePerEternity:new nn(()=>player.records.recentEternities.map(e=>e[2]).reduce(Decimal.sumReducer).div(1e3*player.records.recentEternities.length)),tickSpeedMultDecrease:new nn(()=>Effects.min(new Decimal(10).sub(Effects.sum(BreakInfinityUpgrade.tickspeedCostMult,EternityChallenge(11).reward)),GluonUpgrade.greenBlue(4)).plusEffectOf(QuantumChallenge(7))),dimensionMultDecrease:new nn(()=>new Decimal(10).sub(Effects.sum(BreakInfinityUpgrade.dimCostMult,EternityChallenge(6).reward)).plusEffectOf(QuantumChallenge(7))),timeStudies:new nn(()=>NormalTimeStudyState.studies.map(e=>player.timestudy.studies.includes(e.id))),currentStudyTree:new nn(()=>new TimeStudyTree(TimeStudyTree.currentStudies)),achievementPeriod:new nn(()=>TimeSpan.fromMinutes(new Decimal(30).sub(Effects.sum(Perk.achievementGroup1,Perk.achievementGroup2,Perk.achievementGroup3,Perk.achievementGroup4))).totalMilliseconds),buyablePerks:new nn(()=>Perks.all.filter(e=>e.canBeBought)),cheapestAntimatterAutobuyer:new nn(()=>Autobuyer.antimatterDimension.zeroIndexed.concat(Autobuyer.tickspeed).filter(e=>!(e.isBought||e.isUnlocked)).map(e=>e.antimatterCost.toNumber()).nMin()),antimatterDimensionCommonMultiplier:new nn(()=>antimatterDimensionCommonMultiplier()),antimatterDimensionFinalMultipliers:Array.range(0,9).map(e=>new nn(()=>getDimensionFinalMultiplierUncached(e))),infinityDimensionCommonMultiplier:new nn(()=>infinityDimensionCommonMultiplier()),timeDimensionCommonMultiplier:new nn(()=>timeDimensionCommonMultiplier()),metaDimensionCommonMultiplier:new nn(()=>metaDimensionCommonMultiplier()),glyphInventorySpace:new nn(()=>Glyphs.freeInventorySpace),glyphEffects:new nn(()=>orderedEffectList.mapToObject(e=>e,e=>getAdjustedGlyphEffectUncached(e))),staticGlyphWeights:new nn(()=>staticGlyphWeights()),logTotalGlyphSacrifice:new nn(()=>GlyphSacrificeHandler.logTotalSacrifice),totalIPMult:new nn(()=>totalIPMult()),challengeTimeSum:new nn(()=>player.challenge.normal.bestTimes.reduce(Decimal.sumReducer)),infinityChallengeTimeSum:new nn(()=>player.challenge.infinity.bestTimes.reduce(Decimal.sumReducer))};EventHub.logic.on(GAME_EVENT.GLYPHS_CHANGED,()=>{an.glyphInventorySpace.invalidate(),an.glyphEffects.invalidate(),an.staticGlyphWeights.invalidate()},an.glyphEffects),an.antimatterDimensionFinalMultipliers.invalidate=function(){for(let e of this)e.invalidate()};const on=(function(){let e=(e,t)=>{let n=-1;return{start(){if(this.isStarted)throw Error(`An already started interval cannot be started again.`);n=setInterval(e,typeof t==`function`?t():t)},get isStarted(){return n!==-1},stop(){clearInterval(n),n=-1},restart(){this.stop(),this.start()}}};return{all(){return Object.values(on).filter(e=>Object.hasOwn(e,`start`)&&Object.hasOwn(e,`stop`))},start(){for(let e of this.all())e.start()},stop(){for(let e of this.all())e.stop()},restart(){for(let e of this.all())e.restart()},gameLoop:e(()=>gameLoop(),()=>player.options.updateRate),save:e(()=>GameStorage.save(),()=>player.options.autosaveInterval-Math.clampMin(0,Date.now()-GameStorage.lastSaveTime)),checkCloudSave:e(()=>{player.options.cloudEnabled&&Cloud.loggedIn&&Cloud.saveCheck()},600*1e3),checkEverySecond:e(()=>{Math.random()<1e-5&&SecretAchievement(18).unlock(),GameStorage.tryOnlineBackups()},1e3),checkForUpdates:e(()=>{isLocalEnvironment()||fetch(`version.txt`).then(e=>e.json()).then(e=>{e.version>player.version&&Modal.message.show(e.message,{callback:updateRefresh},3)})},6e4)}})();var sn=n(((exports,t)=>{(function(e,n,r){if(!e)return;for(var i={8:`backspace`,9:`tab`,13:`enter`,16:`shift`,17:`ctrl`,18:`alt`,20:`capslock`,27:`esc`,32:`space`,33:`pageup`,34:`pagedown`,35:`end`,36:`home`,37:`left`,38:`up`,39:`right`,40:`down`,45:`ins`,46:`del`,91:`meta`,93:`meta`,224:`meta`},a={106:`*`,107:`+`,109:`-`,110:`.`,111:`/`,186:`;`,187:`=`,188:`,`,189:`-`,190:`.`,191:`/`,192:"`",219:`[`,220:`\\`,221:`]`,222:`'`},o={"~":"`","!":`1`,"@":`2`,"#":`3`,$:`4`,"%":`5`,"^":`6`,"&":`7`,"*":`8`,"(":`9`,")":`0`,_:`-`,"+":`=`,":":`;`,'"':`'`,"<":`,`,">":`.`,"?":`/`,"|":`\\`},s={option:`alt`,command:`meta`,return:`enter`,escape:`esc`,plus:`+`,mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?`meta`:`ctrl`},c,l=1;l<20;++l)i[111+l]=`f`+l;for(l=0;l<=9;++l)i[l+96]=l.toString();function u(e,t,n){if(e.addEventListener){e.addEventListener(t,n,!1);return}e.attachEvent(`on`+t,n)}function d(e){if(e.type==`keypress`){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return i[e.which]?i[e.which]:a[e.which]?a[e.which]:String.fromCharCode(e.which).toLowerCase()}function f(e,t){return e.sort().join(`,`)===t.sort().join(`,`)}function p(e){var t=[];return e.shiftKey&&t.push(`shift`),e.altKey&&t.push(`alt`),e.ctrlKey&&t.push(`ctrl`),e.metaKey&&t.push(`meta`),t}function m(e){if(e.preventDefault){e.preventDefault();return}e.returnValue=!1}function h(e){if(e.stopPropagation){e.stopPropagation();return}e.cancelBubble=!0}function g(e){return e==`shift`||e==`ctrl`||e==`alt`||e==`meta`}function _(){if(!c)for(var e in c={},i){if(e>95&&e<112)continue;i.hasOwnProperty(e)&&(c[i[e]]=e)}return c}function v(e,t,n){return n||=_()[e]?`keydown`:`keypress`,n==`keypress`&&t.length&&(n=`keydown`),n}function y(e){return e===`+`?[`+`]:(e=e.replace(/\+{2}/g,`+plus`),e.split(`+`))}function b(e,t){var n,r,i,a=[];for(n=y(e),i=0;i<n.length;++i)r=n[i],s[r]&&(r=s[r]),t&&t!=`keypress`&&o[r]&&(r=o[r],a.push(`shift`)),g(r)&&a.push(r);return t=v(r,a,t),{key:r,modifiers:a,action:t}}function x(e,t){return e===null||e===n?!1:e===t?!0:x(e.parentNode,t)}function S(e){var t=this;if(e||=n,!(t instanceof S))return new S(e);t.target=e,t._callbacks={},t._directMap={};var r={},i,a=!1,o=!1,s=!1;function c(e){e||={};var t=!1,n;for(n in r){if(e[n]){t=!0;continue}r[n]=0}t||(s=!1)}function l(e,n,i,a,o,s){var c,l,u=[],d=i.type;if(!t._callbacks[e])return[];for(d==`keyup`&&g(e)&&(n=[e]),c=0;c<t._callbacks[e].length;++c)if(l=t._callbacks[e][c],!(!a&&l.seq&&r[l.seq]!=l.level)&&d==l.action&&(d==`keypress`&&!i.metaKey&&!i.ctrlKey||f(n,l.modifiers))){var p=!a&&l.combo==o,m=a&&l.seq==a&&l.level==s;(p||m)&&t._callbacks[e].splice(c,1),u.push(l)}return u}function _(e,n,r,i){t.stopCallback(n,n.target||n.srcElement,r,i)||e(n,r)===!1&&(m(n),h(n))}t._handleKey=function(e,t,n){var r=l(e,t,n),i,a={},u=0,d=!1;for(i=0;i<r.length;++i)r[i].seq&&(u=Math.max(u,r[i].level));for(i=0;i<r.length;++i){if(r[i].seq){if(r[i].level!=u)continue;d=!0,a[r[i].seq]=1,_(r[i].callback,n,r[i].combo,r[i].seq);continue}d||_(r[i].callback,n,r[i].combo)}var f=n.type==`keypress`&&o;n.type==s&&!g(e)&&!f&&c(a),o=d&&n.type==`keydown`};function v(e){typeof e.which!=`number`&&(e.which=e.keyCode);var n=d(e);if(n){if(e.type==`keyup`&&a===n){a=!1;return}t.handleKey(n,p(e),e)}}function y(){clearTimeout(i),i=setTimeout(c,1e3)}function x(e,t,n,i){r[e]=0;function o(t){return function(){s=t,++r[e],y()}}function l(t){_(n,t,e),i!==`keyup`&&(a=d(t)),setTimeout(c,10)}for(var u=0;u<t.length;++u){var f=u+1===t.length?l:o(i||b(t[u+1]).action);C(t[u],f,i,e,u)}}function C(e,n,r,i,a){t._directMap[e+`:`+r]=n,e=e.replace(/\s+/g,` `);var o=e.split(` `),s;if(o.length>1){x(e,o,n,r);return}s=b(e,r),t._callbacks[s.key]=t._callbacks[s.key]||[],l(s.key,s.modifiers,{type:s.action},i,e,a),t._callbacks[s.key][i?`unshift`:`push`]({callback:n,modifiers:s.modifiers,action:s.action,seq:i,level:a,combo:e})}t._bindMultiple=function(e,t,n){for(var r=0;r<e.length;++r)C(e[r],t,n)},u(e,`keypress`,v),u(e,`keydown`,v),u(e,`keyup`,v)}S.prototype.bind=function(e,t,n){var r=this;return e=e instanceof Array?e:[e],r._bindMultiple.call(r,e,t,n),r},S.prototype.unbind=function(e,t){var n=this;return n.bind.call(n,e,function(){},t)},S.prototype.trigger=function(e,t){var n=this;return n._directMap[e+`:`+t]&&n._directMap[e+`:`+t]({},e),n},S.prototype.reset=function(){var e=this;return e._callbacks={},e._directMap={},e},S.prototype.stopCallback=function(e,t){var n=this;if((` `+t.className+` `).indexOf(` mousetrap `)>-1||x(t,n.target))return!1;if(`composedPath`in e&&typeof e.composedPath==`function`){var r=e.composedPath()[0];r!==e.target&&(t=r)}return t.tagName==`INPUT`||t.tagName==`SELECT`||t.tagName==`TEXTAREA`||t.isContentEditable},S.prototype.handleKey=function(){var e=this;return e._handleKey.apply(e,arguments)},S.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);c=null},S.init=function(){var e=S(n);for(var t in e)t.charAt(0)!==`_`&&(S[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t))},S.init(),e.Mousetrap=S,t!==void 0&&t.exports&&(t.exports=S),typeof define==`function`&&define.amd&&define(function(){return S})})(typeof window<`u`?window:null,typeof window<`u`?document:null)})),cn=e(sn()),ln={};for(let e=1;e<=9;e++)ln[e+96]=`num${e}`;cn.default.addKeycodes(ln);function un(e){return e.split(`+`)}var dn=new Set([`ctrl`,`shift`,`alt`,`mod`]);function fn(e){return e.find(e=>!dn.has(e))}var pn=class{constructor(e){this.key=e}setAction(e,t){e.includes(`shift`)?this.shiftAction=t:this.action=t}start(){this.isRunning||(this.isRunning=!0,this.executeAction(),this.interval=setInterval(()=>{clearInterval(this.interval),this.executeAction(),this.interval=setInterval(()=>this.executeAction(),40)},500))}executeAction(){ui.view.shiftDown&&this.shiftAction!==void 0?this.shiftAction():this.action!==void 0&&this.action()}probablyStop(){ui.view.shiftDown&&this.stop()}stop(){this.isRunning=!1,this.interval&&clearInterval(this.interval),this.interval=void 0}},mn=class{static stopSpins(){for(let e of hn)e.stop()}static bind(e,t,n){cn.default.bind(e,()=>gn(t),n)}static bindRepeatable(e,t){this._bindSpin(e,()=>gn(t))}static bindHotkey(e,t,n){cn.default.bind(e,()=>_n(t),n)}static bindRepeatableHotkey(e,t){this._bindSpin(e,()=>_n(t))}static _bindSpin(e,t){let n=un(e),r=fn(n),i=hn.find(e=>e.key===r);i===void 0&&(i=new pn(r),hn.push(i),cn.default.bind(r,()=>i.start(),`keydown`),cn.default.bind(r,()=>i.stop(),`keyup`)),e!==r&&(cn.default.bind(e,()=>i.start(),`keydown`),cn.default.bind(e,()=>i.probablyStop(),`keyup`)),i.setAction(n,t)}static disable(){this.stopSpins(),cn.default.reset()}},hn=[];function gn(e){if(!(ui.$viewModel.modal.progressBar!==void 0||GameEnd.endState>=END_STATE_MARKERS.INTERACTIVITY_DISABLED))return e()}function _n(e){if(!(!player.options.hotkeys||document.activeElement.type===`text`||document.activeElement.type===`textarea`))return gn(e)}const vn=globalThis.navigator.userAgent.includes(`Mac OS X`);var yn=class{constructor(e){this.name=e,this.__module__=void 0}get isLoaded(){return this.__module__!==void 0}makePromise(e){if(!this.isLoaded)throw Error(`Node module "${this.name}" is not loaded.`);return new Promise((t,n)=>{e(this.__module__,t,n)})}safeCall(e,t){if(!this.isLoaded)throw Error(`Node module "${this.name}" is not loaded.`);try{return e(this.__module__)}catch(e){return console.error(`Failed to make a call to node module "${this.name}".`),console.error(e),t}}},bn=new yn(`electron`);function xn(){return bn.isLoaded}function Sn(e){return bn.safeCall(t=>t.webFrame.setZoomFactor(e))}function Cn(e){return bn.safeCall(t=>t.shell.openExternal(e))}var wn=1;const Tn={initialize(){this.isActive&&(wn=Number(localStorage.getItem(`Zoom`)),wn=Number.isFinite(wn)?wn:1,window.addEventListener(`resize`,()=>this.updateZoom()))},get isActive(){return xn()},increaseZoom(){if(this.isActive){if(wn>1.5){GameUI.notify.info(`Zoom Level is at Maximum`);return}this.zoomFactor=Math.round((wn+.1)*10)/10}},decreaseZoom(){if(this.isActive){if(wn<.5){GameUI.notify.info(`Zoom Level is at Minimum`);return}this.zoomFactor=Math.round((wn-.1)*10)/10}},resetZoom(){this.isActive&&(this.zoomFactor=1)},get zoomFactor(){return wn},set zoomFactor(e){wn=e,localStorage.setItem(`Zoom`,wn.toString()),this.updateZoom(),GameUI.notify.info(`Size changed to ${Math.round(wn*100)}%`)},updateZoom(){if(!this.isActive)return;let e=window.outerHeight/1020;Sn(e*wn)}};var q=q===void 0?{}:q;q.settings||={titleId:null,developerSecretKey:null,GlobalHeaderInjection:null,productionServerUrl:`.playfabapi.com`},q._internalSettings||={entityToken:null,sdkVersion:`1.136.230206`,requestGetParams:{sdk:`JavaScriptSDK-1.136.230206`},sessionTicket:null,verticalName:null,errorTitleId:`Must be have PlayFab.settings.titleId set to call this method`,errorLoggedIn:`Must be logged in to call this method`,errorEntityToken:`You must successfully call GetEntityToken before calling this`,errorSecretKey:`Must have PlayFab.settings.developerSecretKey set to call this method`,GetServerUrl:function(){return q.settings.productionServerUrl.substring(0,4)===`http`?q.settings.productionServerUrl:q._internalSettings.verticalName?`https://`+q._internalSettings.verticalName+q.settings.productionServerUrl:`https://`+q.settings.titleId+q.settings.productionServerUrl},InjectHeaders:function(e,t){if(t)for(var n in t)try{e.setRequestHeader(gHeaderKey,t[n])}catch(e){console.log(`Failed to append header: `+n+` = `+t[n]+`Error: `+e)}},ExecuteRequest:function(e,t,n,r,i,a,o){return new Promise(function(s,c){if(i!=null&&typeof i!=`function`)throw`Callback must be null or a function`;t??={};var l=new Date,u=JSON.stringify(t),d=[e],f=q._internalSettings.requestGetParams;if(f!=null){var p=!0;for(var m in f)p?(d.push(`?`),p=!1):d.push(`&`),d.push(m),d.push(`=`),d.push(f[m])}var h=d.join(``),g=new XMLHttpRequest;g.open(`POST`,h,!0),g.setRequestHeader(`Content-Type`,`application/json`),g.setRequestHeader(`X-PlayFabSDK`,`JavaScriptSDK-`+q._internalSettings.sdkVersion),n!=null&&g.setRequestHeader(n,r),q._internalSettings.InjectHeaders(g,q.settings.GlobalHeaderInjection),q._internalSettings.InjectHeaders(g,o),g.onloadend=function(){if(i!=null){var e=q._internalSettings.GetPlayFabResponse(t,g,l,a);e.code===200?i(e,null):i(null,e)}},g.onerror=function(){if(i!=null){var e=q._internalSettings.GetPlayFabResponse(t,g,l,a);i(null,e)}},g.send(u),g.onreadystatechange=function(){if(this.readyState===4){var e=q._internalSettings.GetPlayFabResponse(t,this,l,a);this.status===200?s(e):c(e)}}})},GetPlayFabResponse:function(e,t,n,r){var i=null;try{i=JSON.parse(t.responseText)}catch{i={code:503,status:`Service Unavailable`,error:`Connection error`,errorCode:2,errorMessage:t.responseText}}return i.CallBackTimeMS=new Date-n,i.Request=e,i.CustomData=r,i},authenticationContext:{PlayFabId:null,EntityId:null,EntityType:null,SessionTicket:null,EntityToken:null},UpdateAuthenticationContext:function(e,t){var n={};return t.data.PlayFabId!==null&&(q._internalSettings.authenticationContext.PlayFabId=t.data.PlayFabId,n.PlayFabId=t.data.PlayFabId),t.data.SessionTicket!==null&&(q._internalSettings.authenticationContext.SessionTicket=t.data.SessionTicket,n.SessionTicket=t.data.SessionTicket),t.data.EntityToken!==null&&(q._internalSettings.authenticationContext.EntityId=t.data.EntityToken.Entity.Id,n.EntityId=t.data.EntityToken.Entity.Id,q._internalSettings.authenticationContext.EntityType=t.data.EntityToken.Entity.Type,n.EntityType=t.data.EntityToken.Entity.Type,q._internalSettings.authenticationContext.EntityToken=t.data.EntityToken.EntityToken,n.EntityToken=t.data.EntityToken.EntityToken),e=Object.assign(e,n),e},AuthInfoMap:{"X-EntityToken":{authAttr:`entityToken`,authError:`errorEntityToken`},"X-Authorization":{authAttr:`sessionTicket`,authError:`errorLoggedIn`},"X-SecretKey":{authAttr:`developerSecretKey`,authError:`errorSecretKey`}},GetAuthInfo:function(e,t){var n=q._internalSettings.AuthInfoMap[t].authError,r=q._internalSettings.AuthInfoMap[t].authAttr,i=null;r===`entityToken`?i=q._internalSettings.entityToken:r===`sessionTicket`?i=q._internalSettings.sessionTicket:r===`developerSecretKey`&&(i=q.settings.developerSecretKey);var a=e.AuthenticationContext?e.AuthenticationContext[r]:i;return{authKey:t,authValue:a,authError:n}},ExecuteRequestWrapper:function(e,t,n,r,i,a){var o=null;if(n!==null){var s=q._internalSettings.GetAuthInfo(t,n=n),n=s.authKey,o=s.authValue,c=s.authError;if(!o)throw c}return q._internalSettings.ExecuteRequest(q._internalSettings.GetServerUrl()+e,t,n,o,r,i,a)}},q.buildIdentifier=`adobuild_javascriptsdk_114`,q.sdkVersion=`1.136.230206`,q.GenerateErrorReport=function(e){if(e==null)return``;var t=e.errorMessage;for(var n in e.errorDetails)for(var r in e.errorDetails[n])t+=`
`+n+`: `+e.errorDetails[n][r];return t},q.ClientApi={IsClientLoggedIn:function(){return q._internalSettings.sessionTicket!=null&&q._internalSettings.sessionTicket.length>0},ForgetAllCredentials:function(){q._internalSettings.sessionTicket=null,q._internalSettings.entityToken=null},AcceptTrade:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/AcceptTrade`,e,`X-Authorization`,t,n,r)},AddFriend:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/AddFriend`,e,`X-Authorization`,t,n,r)},AddGenericID:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/AddGenericID`,e,`X-Authorization`,t,n,r)},AddOrUpdateContactEmail:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/AddOrUpdateContactEmail`,e,`X-Authorization`,t,n,r)},AddSharedGroupMembers:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/AddSharedGroupMembers`,e,`X-Authorization`,t,n,r)},AddUsernamePassword:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/AddUsernamePassword`,e,`X-Authorization`,t,n,r)},AddUserVirtualCurrency:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/AddUserVirtualCurrency`,e,`X-Authorization`,t,n,r)},AndroidDevicePushNotificationRegistration:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/AndroidDevicePushNotificationRegistration`,e,`X-Authorization`,t,n,r)},AttributeInstall:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/AttributeInstall`,e,`X-Authorization`,t,n,r)},CancelTrade:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/CancelTrade`,e,`X-Authorization`,t,n,r)},ConfirmPurchase:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/ConfirmPurchase`,e,`X-Authorization`,t,n,r)},ConsumeItem:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/ConsumeItem`,e,`X-Authorization`,t,n,r)},ConsumeMicrosoftStoreEntitlements:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/ConsumeMicrosoftStoreEntitlements`,e,`X-Authorization`,t,n,r)},ConsumePS5Entitlements:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/ConsumePS5Entitlements`,e,`X-Authorization`,t,n,r)},ConsumePSNEntitlements:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/ConsumePSNEntitlements`,e,`X-Authorization`,t,n,r)},ConsumeXboxEntitlements:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/ConsumeXboxEntitlements`,e,`X-Authorization`,t,n,r)},CreateSharedGroup:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/CreateSharedGroup`,e,`X-Authorization`,t,n,r)},ExecuteCloudScript:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/ExecuteCloudScript`,e,`X-Authorization`,t,n,r)},GetAccountInfo:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetAccountInfo`,e,`X-Authorization`,t,n,r)},GetAdPlacements:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetAdPlacements`,e,`X-Authorization`,t,n,r)},GetAllUsersCharacters:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetAllUsersCharacters`,e,`X-Authorization`,t,n,r)},GetCatalogItems:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetCatalogItems`,e,`X-Authorization`,t,n,r)},GetCharacterData:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetCharacterData`,e,`X-Authorization`,t,n,r)},GetCharacterInventory:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetCharacterInventory`,e,`X-Authorization`,t,n,r)},GetCharacterLeaderboard:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetCharacterLeaderboard`,e,`X-Authorization`,t,n,r)},GetCharacterReadOnlyData:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetCharacterReadOnlyData`,e,`X-Authorization`,t,n,r)},GetCharacterStatistics:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetCharacterStatistics`,e,`X-Authorization`,t,n,r)},GetContentDownloadUrl:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetContentDownloadUrl`,e,`X-Authorization`,t,n,r)},GetCurrentGames:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetCurrentGames`,e,`X-Authorization`,t,n,r)},GetFriendLeaderboard:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetFriendLeaderboard`,e,`X-Authorization`,t,n,r)},GetFriendLeaderboardAroundPlayer:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetFriendLeaderboardAroundPlayer`,e,`X-Authorization`,t,n,r)},GetFriendsList:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetFriendsList`,e,`X-Authorization`,t,n,r)},GetGameServerRegions:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetGameServerRegions`,e,`X-Authorization`,t,n,r)},GetLeaderboard:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetLeaderboard`,e,`X-Authorization`,t,n,r)},GetLeaderboardAroundCharacter:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetLeaderboardAroundCharacter`,e,`X-Authorization`,t,n,r)},GetLeaderboardAroundPlayer:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetLeaderboardAroundPlayer`,e,`X-Authorization`,t,n,r)},GetLeaderboardForUserCharacters:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetLeaderboardForUserCharacters`,e,`X-Authorization`,t,n,r)},GetPaymentToken:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetPaymentToken`,e,`X-Authorization`,t,n,r)},GetPhotonAuthenticationToken:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetPhotonAuthenticationToken`,e,`X-Authorization`,t,n,r)},GetPlayerCombinedInfo:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetPlayerCombinedInfo`,e,`X-Authorization`,t,n,r)},GetPlayerProfile:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetPlayerProfile`,e,`X-Authorization`,t,n,r)},GetPlayerSegments:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetPlayerSegments`,e,`X-Authorization`,t,n,r)},GetPlayerStatistics:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetPlayerStatistics`,e,`X-Authorization`,t,n,r)},GetPlayerStatisticVersions:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetPlayerStatisticVersions`,e,`X-Authorization`,t,n,r)},GetPlayerTags:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetPlayerTags`,e,`X-Authorization`,t,n,r)},GetPlayerTrades:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetPlayerTrades`,e,`X-Authorization`,t,n,r)},GetPlayFabIDsFromFacebookIDs:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetPlayFabIDsFromFacebookIDs`,e,`X-Authorization`,t,n,r)},GetPlayFabIDsFromFacebookInstantGamesIds:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetPlayFabIDsFromFacebookInstantGamesIds`,e,`X-Authorization`,t,n,r)},GetPlayFabIDsFromGameCenterIDs:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetPlayFabIDsFromGameCenterIDs`,e,`X-Authorization`,t,n,r)},GetPlayFabIDsFromGenericIDs:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetPlayFabIDsFromGenericIDs`,e,`X-Authorization`,t,n,r)},GetPlayFabIDsFromGoogleIDs:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetPlayFabIDsFromGoogleIDs`,e,`X-Authorization`,t,n,r)},GetPlayFabIDsFromGooglePlayGamesPlayerIDs:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetPlayFabIDsFromGooglePlayGamesPlayerIDs`,e,`X-Authorization`,t,n,r)},GetPlayFabIDsFromKongregateIDs:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetPlayFabIDsFromKongregateIDs`,e,`X-Authorization`,t,n,r)},GetPlayFabIDsFromNintendoServiceAccountIds:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetPlayFabIDsFromNintendoServiceAccountIds`,e,`X-Authorization`,t,n,r)},GetPlayFabIDsFromNintendoSwitchDeviceIds:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetPlayFabIDsFromNintendoSwitchDeviceIds`,e,`X-Authorization`,t,n,r)},GetPlayFabIDsFromPSNAccountIDs:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetPlayFabIDsFromPSNAccountIDs`,e,`X-Authorization`,t,n,r)},GetPlayFabIDsFromSteamIDs:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetPlayFabIDsFromSteamIDs`,e,`X-Authorization`,t,n,r)},GetPlayFabIDsFromTwitchIDs:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetPlayFabIDsFromTwitchIDs`,e,`X-Authorization`,t,n,r)},GetPlayFabIDsFromXboxLiveIDs:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetPlayFabIDsFromXboxLiveIDs`,e,`X-Authorization`,t,n,r)},GetPublisherData:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetPublisherData`,e,`X-Authorization`,t,n,r)},GetPurchase:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetPurchase`,e,`X-Authorization`,t,n,r)},GetSharedGroupData:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetSharedGroupData`,e,`X-Authorization`,t,n,r)},GetStoreItems:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetStoreItems`,e,`X-Authorization`,t,n,r)},GetTime:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetTime`,e,`X-Authorization`,t,n,r)},GetTitleData:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetTitleData`,e,`X-Authorization`,t,n,r)},GetTitleNews:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetTitleNews`,e,`X-Authorization`,t,n,r)},GetTitlePublicKey:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetTitlePublicKey`,e,null,t,n,r)},GetTradeStatus:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetTradeStatus`,e,`X-Authorization`,t,n,r)},GetUserData:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetUserData`,e,`X-Authorization`,t,n,r)},GetUserInventory:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetUserInventory`,e,`X-Authorization`,t,n,r)},GetUserPublisherData:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetUserPublisherData`,e,`X-Authorization`,t,n,r)},GetUserPublisherReadOnlyData:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetUserPublisherReadOnlyData`,e,`X-Authorization`,t,n,r)},GetUserReadOnlyData:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GetUserReadOnlyData`,e,`X-Authorization`,t,n,r)},GrantCharacterToUser:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/GrantCharacterToUser`,e,`X-Authorization`,t,n,r)},LinkAndroidDeviceID:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/LinkAndroidDeviceID`,e,`X-Authorization`,t,n,r)},LinkApple:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/LinkApple`,e,`X-Authorization`,t,n,r)},LinkCustomID:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/LinkCustomID`,e,`X-Authorization`,t,n,r)},LinkFacebookAccount:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/LinkFacebookAccount`,e,`X-Authorization`,t,n,r)},LinkFacebookInstantGamesId:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/LinkFacebookInstantGamesId`,e,`X-Authorization`,t,n,r)},LinkGameCenterAccount:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/LinkGameCenterAccount`,e,`X-Authorization`,t,n,r)},LinkGoogleAccount:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/LinkGoogleAccount`,e,`X-Authorization`,t,n,r)},LinkGooglePlayGamesServicesAccount:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/LinkGooglePlayGamesServicesAccount`,e,`X-Authorization`,t,n,r)},LinkIOSDeviceID:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/LinkIOSDeviceID`,e,`X-Authorization`,t,n,r)},LinkKongregate:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/LinkKongregate`,e,`X-Authorization`,t,n,r)},LinkNintendoServiceAccount:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/LinkNintendoServiceAccount`,e,`X-Authorization`,t,n,r)},LinkNintendoSwitchDeviceId:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/LinkNintendoSwitchDeviceId`,e,`X-Authorization`,t,n,r)},LinkOpenIdConnect:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/LinkOpenIdConnect`,e,`X-Authorization`,t,n,r)},LinkPSNAccount:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/LinkPSNAccount`,e,`X-Authorization`,t,n,r)},LinkSteamAccount:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/LinkSteamAccount`,e,`X-Authorization`,t,n,r)},LinkTwitch:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/LinkTwitch`,e,`X-Authorization`,t,n,r)},LinkXboxAccount:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/LinkXboxAccount`,e,`X-Authorization`,t,n,r)},LoginWithAndroidDeviceID:function(e,t,n,r){if(e.TitleId=q.settings.titleId?q.settings.titleId:e.TitleId,!e.TitleId)throw q._internalSettings.errorTitleId;var i=JSON.parse(JSON.stringify(q._internalSettings.authenticationContext));return q._internalSettings.ExecuteRequestWrapper(`/Client/LoginWithAndroidDeviceID`,e,null,function(e,n){e!=null&&(e.data.SessionTicket!=null&&(q._internalSettings.sessionTicket=e.data.SessionTicket),e.data.EntityToken!=null&&(q._internalSettings.entityToken=e.data.EntityToken.EntityToken),i=q._internalSettings.UpdateAuthenticationContext(i,e)),t!=null&&typeof t==`function`&&t(e,n)},n,r),new Promise(function(e){e(i)})},LoginWithApple:function(e,t,n,r){if(e.TitleId=q.settings.titleId?q.settings.titleId:e.TitleId,!e.TitleId)throw q._internalSettings.errorTitleId;var i=JSON.parse(JSON.stringify(q._internalSettings.authenticationContext));return q._internalSettings.ExecuteRequestWrapper(`/Client/LoginWithApple`,e,null,function(e,n){e!=null&&(e.data.SessionTicket!=null&&(q._internalSettings.sessionTicket=e.data.SessionTicket),e.data.EntityToken!=null&&(q._internalSettings.entityToken=e.data.EntityToken.EntityToken),i=q._internalSettings.UpdateAuthenticationContext(i,e)),t!=null&&typeof t==`function`&&t(e,n)},n,r),new Promise(function(e){e(i)})},LoginWithCustomID:function(e,t,n,r){if(e.TitleId=q.settings.titleId?q.settings.titleId:e.TitleId,!e.TitleId)throw q._internalSettings.errorTitleId;var i=JSON.parse(JSON.stringify(q._internalSettings.authenticationContext));return q._internalSettings.ExecuteRequestWrapper(`/Client/LoginWithCustomID`,e,null,function(e,n){e!=null&&(e.data.SessionTicket!=null&&(q._internalSettings.sessionTicket=e.data.SessionTicket),e.data.EntityToken!=null&&(q._internalSettings.entityToken=e.data.EntityToken.EntityToken),i=q._internalSettings.UpdateAuthenticationContext(i,e)),t!=null&&typeof t==`function`&&t(e,n)},n,r),new Promise(function(e){e(i)})},LoginWithEmailAddress:function(e,t,n,r){if(e.TitleId=q.settings.titleId?q.settings.titleId:e.TitleId,!e.TitleId)throw q._internalSettings.errorTitleId;var i=JSON.parse(JSON.stringify(q._internalSettings.authenticationContext));return q._internalSettings.ExecuteRequestWrapper(`/Client/LoginWithEmailAddress`,e,null,function(e,n){e!=null&&(e.data.SessionTicket!=null&&(q._internalSettings.sessionTicket=e.data.SessionTicket),e.data.EntityToken!=null&&(q._internalSettings.entityToken=e.data.EntityToken.EntityToken),i=q._internalSettings.UpdateAuthenticationContext(i,e)),t!=null&&typeof t==`function`&&t(e,n)},n,r),new Promise(function(e){e(i)})},LoginWithFacebook:function(e,t,n,r){if(e.TitleId=q.settings.titleId?q.settings.titleId:e.TitleId,!e.TitleId)throw q._internalSettings.errorTitleId;var i=JSON.parse(JSON.stringify(q._internalSettings.authenticationContext));return q._internalSettings.ExecuteRequestWrapper(`/Client/LoginWithFacebook`,e,null,function(e,n){e!=null&&(e.data.SessionTicket!=null&&(q._internalSettings.sessionTicket=e.data.SessionTicket),e.data.EntityToken!=null&&(q._internalSettings.entityToken=e.data.EntityToken.EntityToken),i=q._internalSettings.UpdateAuthenticationContext(i,e)),t!=null&&typeof t==`function`&&t(e,n)},n,r),new Promise(function(e){e(i)})},LoginWithFacebookInstantGamesId:function(e,t,n,r){if(e.TitleId=q.settings.titleId?q.settings.titleId:e.TitleId,!e.TitleId)throw q._internalSettings.errorTitleId;var i=JSON.parse(JSON.stringify(q._internalSettings.authenticationContext));return q._internalSettings.ExecuteRequestWrapper(`/Client/LoginWithFacebookInstantGamesId`,e,null,function(e,n){e!=null&&(e.data.SessionTicket!=null&&(q._internalSettings.sessionTicket=e.data.SessionTicket),e.data.EntityToken!=null&&(q._internalSettings.entityToken=e.data.EntityToken.EntityToken),i=q._internalSettings.UpdateAuthenticationContext(i,e)),t!=null&&typeof t==`function`&&t(e,n)},n,r),new Promise(function(e){e(i)})},LoginWithGameCenter:function(e,t,n,r){if(e.TitleId=q.settings.titleId?q.settings.titleId:e.TitleId,!e.TitleId)throw q._internalSettings.errorTitleId;var i=JSON.parse(JSON.stringify(q._internalSettings.authenticationContext));return q._internalSettings.ExecuteRequestWrapper(`/Client/LoginWithGameCenter`,e,null,function(e,n){e!=null&&(e.data.SessionTicket!=null&&(q._internalSettings.sessionTicket=e.data.SessionTicket),e.data.EntityToken!=null&&(q._internalSettings.entityToken=e.data.EntityToken.EntityToken),i=q._internalSettings.UpdateAuthenticationContext(i,e)),t!=null&&typeof t==`function`&&t(e,n)},n,r),new Promise(function(e){e(i)})},LoginWithGoogleAccount:function(e,t,n,r){if(e.TitleId=q.settings.titleId?q.settings.titleId:e.TitleId,!e.TitleId)throw q._internalSettings.errorTitleId;var i=JSON.parse(JSON.stringify(q._internalSettings.authenticationContext));return q._internalSettings.ExecuteRequestWrapper(`/Client/LoginWithGoogleAccount`,e,null,function(e,n){e!=null&&(e.data.SessionTicket!=null&&(q._internalSettings.sessionTicket=e.data.SessionTicket),e.data.EntityToken!=null&&(q._internalSettings.entityToken=e.data.EntityToken.EntityToken),i=q._internalSettings.UpdateAuthenticationContext(i,e)),t!=null&&typeof t==`function`&&t(e,n)},n,r),new Promise(function(e){e(i)})},LoginWithGooglePlayGamesServices:function(e,t,n,r){if(e.TitleId=q.settings.titleId?q.settings.titleId:e.TitleId,!e.TitleId)throw q._internalSettings.errorTitleId;var i=JSON.parse(JSON.stringify(q._internalSettings.authenticationContext));return q._internalSettings.ExecuteRequestWrapper(`/Client/LoginWithGooglePlayGamesServices`,e,null,function(e,n){e!=null&&(e.data.SessionTicket!=null&&(q._internalSettings.sessionTicket=e.data.SessionTicket),e.data.EntityToken!=null&&(q._internalSettings.entityToken=e.data.EntityToken.EntityToken),i=q._internalSettings.UpdateAuthenticationContext(i,e)),t!=null&&typeof t==`function`&&t(e,n)},n,r),new Promise(function(e){e(i)})},LoginWithIOSDeviceID:function(e,t,n,r){if(e.TitleId=q.settings.titleId?q.settings.titleId:e.TitleId,!e.TitleId)throw q._internalSettings.errorTitleId;var i=JSON.parse(JSON.stringify(q._internalSettings.authenticationContext));return q._internalSettings.ExecuteRequestWrapper(`/Client/LoginWithIOSDeviceID`,e,null,function(e,n){e!=null&&(e.data.SessionTicket!=null&&(q._internalSettings.sessionTicket=e.data.SessionTicket),e.data.EntityToken!=null&&(q._internalSettings.entityToken=e.data.EntityToken.EntityToken),i=q._internalSettings.UpdateAuthenticationContext(i,e)),t!=null&&typeof t==`function`&&t(e,n)},n,r),new Promise(function(e){e(i)})},LoginWithKongregate:function(e,t,n,r){if(e.TitleId=q.settings.titleId?q.settings.titleId:e.TitleId,!e.TitleId)throw q._internalSettings.errorTitleId;var i=JSON.parse(JSON.stringify(q._internalSettings.authenticationContext));return q._internalSettings.ExecuteRequestWrapper(`/Client/LoginWithKongregate`,e,null,function(e,n){e!=null&&(e.data.SessionTicket!=null&&(q._internalSettings.sessionTicket=e.data.SessionTicket),e.data.EntityToken!=null&&(q._internalSettings.entityToken=e.data.EntityToken.EntityToken),i=q._internalSettings.UpdateAuthenticationContext(i,e)),t!=null&&typeof t==`function`&&t(e,n)},n,r),new Promise(function(e){e(i)})},LoginWithNintendoServiceAccount:function(e,t,n,r){if(e.TitleId=q.settings.titleId?q.settings.titleId:e.TitleId,!e.TitleId)throw q._internalSettings.errorTitleId;var i=JSON.parse(JSON.stringify(q._internalSettings.authenticationContext));return q._internalSettings.ExecuteRequestWrapper(`/Client/LoginWithNintendoServiceAccount`,e,null,function(e,n){e!=null&&(e.data.SessionTicket!=null&&(q._internalSettings.sessionTicket=e.data.SessionTicket),e.data.EntityToken!=null&&(q._internalSettings.entityToken=e.data.EntityToken.EntityToken),i=q._internalSettings.UpdateAuthenticationContext(i,e)),t!=null&&typeof t==`function`&&t(e,n)},n,r),new Promise(function(e){e(i)})},LoginWithNintendoSwitchDeviceId:function(e,t,n,r){if(e.TitleId=q.settings.titleId?q.settings.titleId:e.TitleId,!e.TitleId)throw q._internalSettings.errorTitleId;var i=JSON.parse(JSON.stringify(q._internalSettings.authenticationContext));return q._internalSettings.ExecuteRequestWrapper(`/Client/LoginWithNintendoSwitchDeviceId`,e,null,function(e,n){e!=null&&(e.data.SessionTicket!=null&&(q._internalSettings.sessionTicket=e.data.SessionTicket),e.data.EntityToken!=null&&(q._internalSettings.entityToken=e.data.EntityToken.EntityToken),i=q._internalSettings.UpdateAuthenticationContext(i,e)),t!=null&&typeof t==`function`&&t(e,n)},n,r),new Promise(function(e){e(i)})},LoginWithOpenIdConnect:function(e,t,n,r){if(e.TitleId=q.settings.titleId?q.settings.titleId:e.TitleId,!e.TitleId)throw q._internalSettings.errorTitleId;var i=JSON.parse(JSON.stringify(q._internalSettings.authenticationContext));return q._internalSettings.ExecuteRequestWrapper(`/Client/LoginWithOpenIdConnect`,e,null,function(e,n){e!=null&&(e.data.SessionTicket!=null&&(q._internalSettings.sessionTicket=e.data.SessionTicket),e.data.EntityToken!=null&&(q._internalSettings.entityToken=e.data.EntityToken.EntityToken),i=q._internalSettings.UpdateAuthenticationContext(i,e)),t!=null&&typeof t==`function`&&t(e,n)},n,r),new Promise(function(e){e(i)})},LoginWithPlayFab:function(e,t,n,r){if(e.TitleId=q.settings.titleId?q.settings.titleId:e.TitleId,!e.TitleId)throw q._internalSettings.errorTitleId;var i=JSON.parse(JSON.stringify(q._internalSettings.authenticationContext));return q._internalSettings.ExecuteRequestWrapper(`/Client/LoginWithPlayFab`,e,null,function(e,n){e!=null&&(e.data.SessionTicket!=null&&(q._internalSettings.sessionTicket=e.data.SessionTicket),e.data.EntityToken!=null&&(q._internalSettings.entityToken=e.data.EntityToken.EntityToken),i=q._internalSettings.UpdateAuthenticationContext(i,e)),t!=null&&typeof t==`function`&&t(e,n)},n,r),new Promise(function(e){e(i)})},LoginWithPSN:function(e,t,n,r){if(e.TitleId=q.settings.titleId?q.settings.titleId:e.TitleId,!e.TitleId)throw q._internalSettings.errorTitleId;var i=JSON.parse(JSON.stringify(q._internalSettings.authenticationContext));return q._internalSettings.ExecuteRequestWrapper(`/Client/LoginWithPSN`,e,null,function(e,n){e!=null&&(e.data.SessionTicket!=null&&(q._internalSettings.sessionTicket=e.data.SessionTicket),e.data.EntityToken!=null&&(q._internalSettings.entityToken=e.data.EntityToken.EntityToken),i=q._internalSettings.UpdateAuthenticationContext(i,e)),t!=null&&typeof t==`function`&&t(e,n)},n,r),new Promise(function(e){e(i)})},LoginWithSteam:function(e,t,n,r){if(e.TitleId=q.settings.titleId?q.settings.titleId:e.TitleId,!e.TitleId)throw q._internalSettings.errorTitleId;var i=JSON.parse(JSON.stringify(q._internalSettings.authenticationContext));return q._internalSettings.ExecuteRequestWrapper(`/Client/LoginWithSteam`,e,null,function(e,n){e!=null&&(e.data.SessionTicket!=null&&(q._internalSettings.sessionTicket=e.data.SessionTicket),e.data.EntityToken!=null&&(q._internalSettings.entityToken=e.data.EntityToken.EntityToken),i=q._internalSettings.UpdateAuthenticationContext(i,e)),t!=null&&typeof t==`function`&&t(e,n)},n,r),new Promise(function(e){e(i)})},LoginWithTwitch:function(e,t,n,r){if(e.TitleId=q.settings.titleId?q.settings.titleId:e.TitleId,!e.TitleId)throw q._internalSettings.errorTitleId;var i=JSON.parse(JSON.stringify(q._internalSettings.authenticationContext));return q._internalSettings.ExecuteRequestWrapper(`/Client/LoginWithTwitch`,e,null,function(e,n){e!=null&&(e.data.SessionTicket!=null&&(q._internalSettings.sessionTicket=e.data.SessionTicket),e.data.EntityToken!=null&&(q._internalSettings.entityToken=e.data.EntityToken.EntityToken),i=q._internalSettings.UpdateAuthenticationContext(i,e)),t!=null&&typeof t==`function`&&t(e,n)},n,r),new Promise(function(e){e(i)})},LoginWithXbox:function(e,t,n,r){if(e.TitleId=q.settings.titleId?q.settings.titleId:e.TitleId,!e.TitleId)throw q._internalSettings.errorTitleId;var i=JSON.parse(JSON.stringify(q._internalSettings.authenticationContext));return q._internalSettings.ExecuteRequestWrapper(`/Client/LoginWithXbox`,e,null,function(e,n){e!=null&&(e.data.SessionTicket!=null&&(q._internalSettings.sessionTicket=e.data.SessionTicket),e.data.EntityToken!=null&&(q._internalSettings.entityToken=e.data.EntityToken.EntityToken),i=q._internalSettings.UpdateAuthenticationContext(i,e)),t!=null&&typeof t==`function`&&t(e,n)},n,r),new Promise(function(e){e(i)})},Matchmake:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/Matchmake`,e,`X-Authorization`,t,n,r)},OpenTrade:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/OpenTrade`,e,`X-Authorization`,t,n,r)},PayForPurchase:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/PayForPurchase`,e,`X-Authorization`,t,n,r)},PurchaseItem:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/PurchaseItem`,e,`X-Authorization`,t,n,r)},RedeemCoupon:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/RedeemCoupon`,e,`X-Authorization`,t,n,r)},RefreshPSNAuthToken:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/RefreshPSNAuthToken`,e,`X-Authorization`,t,n,r)},RegisterForIOSPushNotification:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/RegisterForIOSPushNotification`,e,`X-Authorization`,t,n,r)},RegisterPlayFabUser:function(e,t,n,r){if(e.TitleId=q.settings.titleId?q.settings.titleId:e.TitleId,!e.TitleId)throw q._internalSettings.errorTitleId;return JSON.parse(JSON.stringify(q._internalSettings.authenticationContext)),q._internalSettings.ExecuteRequestWrapper(`/Client/RegisterPlayFabUser`,e,null,function(e,n){e!=null&&e.data.SessionTicket!=null&&(q._internalSettings.sessionTicket=e.data.SessionTicket),t!=null&&typeof t==`function`&&t(e,n)},n,r)},RemoveContactEmail:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/RemoveContactEmail`,e,`X-Authorization`,t,n,r)},RemoveFriend:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/RemoveFriend`,e,`X-Authorization`,t,n,r)},RemoveGenericID:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/RemoveGenericID`,e,`X-Authorization`,t,n,r)},RemoveSharedGroupMembers:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/RemoveSharedGroupMembers`,e,`X-Authorization`,t,n,r)},ReportAdActivity:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/ReportAdActivity`,e,`X-Authorization`,t,n,r)},ReportDeviceInfo:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/ReportDeviceInfo`,e,`X-Authorization`,t,n,r)},ReportPlayer:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/ReportPlayer`,e,`X-Authorization`,t,n,r)},RestoreIOSPurchases:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/RestoreIOSPurchases`,e,`X-Authorization`,t,n,r)},RewardAdActivity:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/RewardAdActivity`,e,`X-Authorization`,t,n,r)},SendAccountRecoveryEmail:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/SendAccountRecoveryEmail`,e,null,t,n,r)},SetFriendTags:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/SetFriendTags`,e,`X-Authorization`,t,n,r)},SetPlayerSecret:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/SetPlayerSecret`,e,`X-Authorization`,t,n,r)},StartPurchase:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/StartPurchase`,e,`X-Authorization`,t,n,r)},SubtractUserVirtualCurrency:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/SubtractUserVirtualCurrency`,e,`X-Authorization`,t,n,r)},UnlinkAndroidDeviceID:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/UnlinkAndroidDeviceID`,e,`X-Authorization`,t,n,r)},UnlinkApple:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/UnlinkApple`,e,`X-Authorization`,t,n,r)},UnlinkCustomID:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/UnlinkCustomID`,e,`X-Authorization`,t,n,r)},UnlinkFacebookAccount:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/UnlinkFacebookAccount`,e,`X-Authorization`,t,n,r)},UnlinkFacebookInstantGamesId:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/UnlinkFacebookInstantGamesId`,e,`X-Authorization`,t,n,r)},UnlinkGameCenterAccount:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/UnlinkGameCenterAccount`,e,`X-Authorization`,t,n,r)},UnlinkGoogleAccount:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/UnlinkGoogleAccount`,e,`X-Authorization`,t,n,r)},UnlinkGooglePlayGamesServicesAccount:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/UnlinkGooglePlayGamesServicesAccount`,e,`X-Authorization`,t,n,r)},UnlinkIOSDeviceID:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/UnlinkIOSDeviceID`,e,`X-Authorization`,t,n,r)},UnlinkKongregate:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/UnlinkKongregate`,e,`X-Authorization`,t,n,r)},UnlinkNintendoServiceAccount:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/UnlinkNintendoServiceAccount`,e,`X-Authorization`,t,n,r)},UnlinkNintendoSwitchDeviceId:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/UnlinkNintendoSwitchDeviceId`,e,`X-Authorization`,t,n,r)},UnlinkOpenIdConnect:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/UnlinkOpenIdConnect`,e,`X-Authorization`,t,n,r)},UnlinkPSNAccount:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/UnlinkPSNAccount`,e,`X-Authorization`,t,n,r)},UnlinkSteamAccount:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/UnlinkSteamAccount`,e,`X-Authorization`,t,n,r)},UnlinkTwitch:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/UnlinkTwitch`,e,`X-Authorization`,t,n,r)},UnlinkXboxAccount:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/UnlinkXboxAccount`,e,`X-Authorization`,t,n,r)},UnlockContainerInstance:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/UnlockContainerInstance`,e,`X-Authorization`,t,n,r)},UnlockContainerItem:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/UnlockContainerItem`,e,`X-Authorization`,t,n,r)},UpdateAvatarUrl:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/UpdateAvatarUrl`,e,`X-Authorization`,t,n,r)},UpdateCharacterData:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/UpdateCharacterData`,e,`X-Authorization`,t,n,r)},UpdateCharacterStatistics:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/UpdateCharacterStatistics`,e,`X-Authorization`,t,n,r)},UpdatePlayerStatistics:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/UpdatePlayerStatistics`,e,`X-Authorization`,t,n,r)},UpdateSharedGroupData:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/UpdateSharedGroupData`,e,`X-Authorization`,t,n,r)},UpdateUserData:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/UpdateUserData`,e,`X-Authorization`,t,n,r)},UpdateUserPublisherData:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/UpdateUserPublisherData`,e,`X-Authorization`,t,n,r)},UpdateUserTitleDisplayName:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/UpdateUserTitleDisplayName`,e,`X-Authorization`,t,n,r)},ValidateAmazonIAPReceipt:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/ValidateAmazonIAPReceipt`,e,`X-Authorization`,t,n,r)},ValidateGooglePlayPurchase:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/ValidateGooglePlayPurchase`,e,`X-Authorization`,t,n,r)},ValidateIOSReceipt:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/ValidateIOSReceipt`,e,`X-Authorization`,t,n,r)},ValidateWindowsStoreReceipt:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/ValidateWindowsStoreReceipt`,e,`X-Authorization`,t,n,r)},WriteCharacterEvent:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/WriteCharacterEvent`,e,`X-Authorization`,t,n,r)},WritePlayerEvent:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/WritePlayerEvent`,e,`X-Authorization`,t,n,r)},WriteTitleEvent:function(e,t,n,r){return q._internalSettings.ExecuteRequestWrapper(`/Client/WriteTitleEvent`,e,`X-Authorization`,t,n,r)}},q.ClientApi,q.RegisterWithPhaser=function(){typeof Phaser>`u`||Phaser.Plugin===void 0||(Phaser.Plugin.PlayFab=function(e,t){Phaser.Plugin.call(this,e,t)},Phaser.Plugin.PlayFab.prototype=Object.create(Phaser.Plugin.prototype),Phaser.Plugin.PlayFab.prototype.constructor=Phaser.Plugin.PlayFab,Phaser.Plugin.PlayFab.prototype.PlayFab=q,Phaser.Plugin.PlayFab.prototype.settings=q.settings,Phaser.Plugin.PlayFab.prototype.ClientApi=q.ClientApi)},q.RegisterWithPhaser();var En=q.ClientApi;q.settings.titleId=`59813`;function Dn(){return Nn(En.GetUserData)}function On(e){return Nn(En.UpdateUserData,{Data:e})}function kn(e,t,n){return Nn(En.PurchaseItem,{ItemId:e,Price:t,VirtualCurrency:n})}function An(e){return Nn(En.ConfirmPurchase,{OrderId:e})}function jn(e,t){return Nn(En.ConsumeItem,{ItemInstanceId:e,ConsumeCount:t})}function Mn(e,t){return Nn(En.AddUserVirtualCurrency,{Amount:e,VirtualCurrency:t})}function Nn(e,t){return En.IsClientLoggedIn()?Pn(e,t):Promise.reject(`PlayFab Client is not logged in.`)}function Pn(e,t){return new Promise((n,r)=>{e(t??{},(e,t)=>{!t&&e?.data?n(e.data):r(t??e)})})}var Fn=0,In=[],Ln=!1,Rn=!1;async function zn(){if(Ln){Rn=!0;return}clearTimeout(Fn),Ln=!0;let e=[...In];for(let t of e)try{await Bn(t)}catch{}Ln=!1;let t=Rn?0:2e3;Fn=setTimeout(zn,t),Rn=!1}async function Bn(e){let t=await An(e),n=t.Items[0].ItemId,r=t.Items[0].ItemInstanceId;await jn(r,1);let i=Number(n.replace(`STD`,``));In=In.filter(t=>t!==e),await Mn(i,`ST`),GameUI.notify.info(`${i} STDs Obtained!`)}function Vn(){return vn&&In.length>0}async function Hn(e,t,n){await kn(e,t,`ST`),n!==void 0&&await Un(n)}async function Un(e){let t=await Dn(),n=new Set(t.Data?.Cosmetics?.Value?.split(`,`)??[]);n.add(e);let r=[...n];await On({Cosmetics:r.join(`,`)}),GameUI.update()}var Wn=new yn(`greenworks`);function Gn(){return Wn.safeCall(e=>e.getSteamId())}function Kn(e){return Wn.makePromise((t,n,r)=>t.activateAchievement(e,n,r))}var qn=!1,Jn=!1,Yn=[];const Xn={initialize(){if(qn)throw Error(`Steam Runtime was initialized already.`);qn=!0},get isActive(){if(!qn)throw Error(`Steam Runtime was called before init.`);return Jn},get screenName(){return this.isActive?Gn()?.screenName??`Steam user`:`Non-Steam user`},activateAchievement(e){if(!this.isActive)return;let t=`Achievement${e}`;Yn.includes(t)&&Kn(t)},validatePurchases(){this.isActive&&zn()},async purchaseShopItem(e,t,n){if(!this.isActive)return GameUI.notify.error(`Shop purchases are not available.`),!1;try{return await Hn(e,t,n),!0}catch(e){return GameUI.notify.error(e.errorMessage??e),!1}},get hasPendingPurchaseConfirmations(){return this.isActive?Vn():!1}};var Zn=e(sn());const Qn=[{name:`Toggle Autobuyers`,keys:[`a`],type:`bindHotkey`,function:()=>tr(),visible:!0},{name:`Buy one Tickspeed`,keys:[`shift`,`t`],type:`bindRepeatableHotkey`,function:()=>buyTickSpeed(),visible:!0},{name:`Buy max Tickspeed`,keys:[`t`],type:`bindRepeatableHotkey`,function:()=>buyMaxTickSpeed(),visible:!0},{name:`Max all`,keys:[`m`],type:`bindRepeatableHotkey`,function:()=>{maxAll(),TimeStudy.metaDimensions.isBought&&MetaDimensions.maxAll()},visible:!0},{name:`Dimensional Sacrifice`,keys:[`s`],type:`bindRepeatableHotkey`,function:()=>sacrificeBtnClick(),visible:!0},{name:`Dimension Boost`,keys:[`d`],type:`bindRepeatableHotkey`,function:()=>manualRequestDimensionBoost(!0),visible:!0},{name:`Single Dimension Boost`,keys:[`shift`,`d`],type:`bindRepeatableHotkey`,function:()=>manualRequestDimensionBoost(!1),visible:!1},{name:`Antimatter Galaxy`,keys:[`g`],type:`bindRepeatableHotkey`,function:()=>manualRequestGalaxyReset(!0),visible:!0},{name:`Single Antimatter Galaxy`,keys:[`shift`,`g`],type:`bindRepeatableHotkey`,function:()=>manualRequestGalaxyReset(!1),visible:!1},{name:`Big Crunch`,keys:[`c`],type:`bindRepeatableHotkey`,function:()=>manualBigCrunchResetRequest(),visible:!0},{name:`Replicanti Galaxy`,keys:[`r`],type:`bindHotkey`,function:()=>{replicantiGalaxyRequest(),setHoldingR(!0)},visible:()=>Replicanti.areUnlocked||PlayerProgress.eternityUnlocked()},{name:`Eternity`,keys:[`e`],type:`bindRepeatableHotkey`,function:()=>eternityResetRequest(),visible:()=>PlayerProgress.eternityUnlocked()||Player.canEternity},{name:`Toggle Time Study respec`,keys:[`shift`,`e`],type:`bindHotkey`,function:()=>{player.respec=!player.respec,GameUI.notify.info(`Time Study respec is now ${player.respec?`active`:`inactive`}`)},visible:()=>PlayerProgress.eternityUnlocked()},{name:`Enter/Exit Dilation`,keys:[`l`],type:`bindRepeatableHotkey`,function:()=>startDilatedEternityRequest(),visible:()=>PlayerProgress.realityUnlocked()||PlayerProgress.dilationUnlocked()},{name:`Reality`,keys:[`y`],type:`bindRepeatableHotkey`,function:()=>requestManualReality(),visible:()=>PlayerProgress.realityUnlocked()||isRealityAvailable()},{name:`Toggle Glyph unequip`,keys:[`shift`,`y`],type:`bindHotkey`,function:()=>{player.reality.respec=!player.reality.respec,GameUI.notify.info(`Glyph respec is now ${player.reality.respec?`active`:`inactive`}`)},visible:()=>PlayerProgress.realityUnlocked()},{name:`Start/Pause Automator`,keys:[`u`],type:`bindHotkey`,function:()=>rr(),visible:()=>Player.automatorUnlocked},{name:`Restart Automator`,keys:[`shift`,`u`],type:`bindHotkey`,function:()=>ir(),visible:()=>Player.automatorUnlocked},{name:`Undo Edit (Automator)`,keys:[`mod`,`z`],type:`bind`,function:()=>AutomatorData.undoScriptEdit(),visible:()=>Player.automatorUnlocked},{name:`Redo Edit (Automator)`,keys:[`mod`,`y`],type:`bind`,function:()=>AutomatorData.redoScriptEdit(),visible:()=>Player.automatorUnlocked},{name:`Toggle Black Hole`,keys:[`b`],type:`bindHotkey`,function:()=>BlackHoles.togglePause(),visible:()=>PlayerProgress.realityUnlocked()},{name:`Toggle Continuum`,keys:[`alt`,`a`],type:`bindHotkey`,function:()=>nr(),visible:()=>Laitela.continuumUnlocked},{name:`Armageddon`,keys:[`z`],type:`bindRepeatableHotkey`,function:()=>ar(),visible:()=>Pelle.isDoomed},{name:`Toggle Glyph unequip (Pelle)`,keys:[`shift`,`z`],type:`bindHotkey`,function:()=>{Pelle.isDoomed&&(player.reality.respec=!player.reality.respec,GameUI.notify.info(`Glyph respec is now ${player.reality.respec?`active`:`inactive`}`))},visible:()=>Pelle.isDoomed},{name:`Save game`,keys:[`mod`,`s`],type:`bind`,function:()=>(GameStorage.save(!1,!0),!1),visible:!0},{name:`Export game`,keys:[`mod`,`e`],type:`bind`,function:()=>(GameStorage.export(),!1),visible:!0},{name:`Open Hotkey List Modal`,keys:[`?`],type:`bind`,function:()=>(sr(),!1),visible:!0},{name:`Open How To Play Modal`,keys:[`h`],type:`bind`,function:()=>(cr(),!1),visible:!0},{name:`Modify visible tabs`,keys:[`tab`],type:`bind`,function:()=>(ur(),!1),visible:!0},{name:`Confirm Modal`,keys:[`enter`],type:`bind`,function:()=>(EventHub.dispatch(GAME_EVENT.ENTER_PRESSED),!0),visible:!0},{name:`Close Modal or open Options`,keys:[`esc`],type:`bind`,function:()=>(or(),!1),visible:!0},{name:`Paying respects`,keys:[`f`],type:`bindRepeatable`,function:()=>{GameUI.notify.info(`Paying respects`),SecretAchievement(13).unlock()},visible:!1},{name:`Change Tab`,keys:[`up`],type:`bind`,function:()=>(EventHub.dispatch(GAME_EVENT.ARROW_KEY_PRESSED,`up`),!1),visible:!1},{name:`Change Tab`,keys:[`down`],type:`bind`,function:()=>(EventHub.dispatch(GAME_EVENT.ARROW_KEY_PRESSED,`down`),!1),visible:!1},{name:`Change Subtab`,keys:[`left`],type:`bind`,function:()=>(EventHub.dispatch(GAME_EVENT.ARROW_KEY_PRESSED,`left`),!1),visible:!1},{name:`Change Subtab`,keys:[`right`],type:`bind`,function:()=>(EventHub.dispatch(GAME_EVENT.ARROW_KEY_PRESSED,`right`),!1),visible:!1},{name:`Doesn't exist`,keys:[`9`],type:`bind`,function:()=>SecretAchievement(41).unlock(),visible:!1},{name:`Adjust Autobuyers`,keys:[`mod`,`alt`,`a`],type:`bind`,function:()=>lr(),visible:()=>Autobuyers.hasAutobuyersForEditModal},{name:`Fullscreen`,keys:[`F10`],type:`bind`,function:()=>{},visible:()=>!1},{name:`Zoom In`,keys:[`ctrl`,`=`],type:`bind`,function:()=>Tn.increaseZoom(),visible:()=>!1},{name:`Zoom In`,keys:[`ctrl`,`+`],type:`bind`,function:()=>Tn.increaseZoom(),visible:()=>!1},{name:`Zoom Out`,keys:[`ctrl`,`-`],type:`bind`,function:()=>Tn.decreaseZoom(),visible:()=>!1},{name:`Reset Zoom`,keys:[`ctrl`,`0`],type:`bind`,function:()=>Tn.resetZoom(),visible:()=>!1}];for(let e of Qn)mn[e.type](e.keys.join(`+`),e.function);mn.bind(`r`,()=>setHoldingR(!1),`keyup`),mn.bind(`shift`,()=>setShiftKey(!0),`keydown`),mn.bind(`shift`,()=>setShiftKey(!1),`keyup`),mn.bind(`ctrl+shift`,()=>setShiftKey(!0),`keydown`),mn.bind(`ctrl+shift`,()=>setShiftKey(!1),`keyup`),mn.bind(`alt+shift`,()=>setShiftKey(!0),`keydown`),mn.bind(`alt+shift`,()=>setShiftKey(!1),`keyup`),mn.bindHotkey(`alt+t`,()=>$n(Autobuyer.tickspeed)),mn.bindHotkey(`shift+alt+t`,()=>er(Autobuyer.tickspeed)),mn.bindHotkey(`alt+s`,()=>$n(Autobuyer.sacrifice)),mn.bindHotkey(`alt+d`,()=>$n(Autobuyer.dimboost)),mn.bindHotkey(`alt+g`,()=>$n(Autobuyer.galaxy)),mn.bindHotkey(`alt+r`,()=>$n(Autobuyer.replicantiGalaxy)),mn.bindHotkey(`alt+c`,()=>$n(Autobuyer.bigCrunch)),mn.bindHotkey(`alt+e`,()=>$n(Autobuyer.eternity)),mn.bindHotkey(`alt+y`,()=>$n(Autobuyer.reality)),(function(){function e(e){mn.bindRepeatableHotkey(`${e}`,()=>buyManyDimension(e)),mn.bindRepeatableHotkey(`num${e}`,()=>buyManyDimension(e)),mn.bindRepeatableHotkey(`shift+${e}`,()=>buyOneDimension(e)),mn.bindRepeatableHotkey(`shift+num${e}`,()=>buyOneDimension(e)),mn.bindHotkey(`alt+${e}`,()=>$n(Autobuyer.antimatterDimension(e))),mn.bindHotkey(`alt+num${e}`,()=>$n(Autobuyer.antimatterDimension(e))),mn.bindHotkey(`shift+alt+${e}`,()=>er(Autobuyer.antimatterDimension(e))),mn.bindHotkey(`shift+alt+num${e}`,()=>er(Autobuyer.antimatterDimension(e)))}for(let t=1;t<9;t++)e(t)})(),mn.bind([`mod+shift+c`,`mod+shift+i`,`mod+shift+j`,`f12`],()=>SecretAchievement(23).unlock());function $n(e){let t=e===Autobuyer.tickspeed&&e.isBought;return e.disabledByContinuum?GameUI.notify.info(`Continuum is enabled, you cannot alter this autobuyer`):(e.isUnlocked||t)&&(e.toggle(),GameUI.notify.info(`${e.name} Autobuyer toggled ${e.isActive?`on`:`off`}`)),!1}function er(e){if(e.disabledByContinuum)GameUI.notify.info(`Continuum is enabled, you cannot alter this autobuyer`);else if(e.isUnlocked&&e.toggleMode!==null){e.toggleMode();let t=e.name===`Tickspeed`||e.hasUnlimitedBulk?`max`:`10`;GameUI.notify.info(`${e.name} Autobuyer set to buy ${e.mode===1?`singles`:t}`)}return!1}function tr(){Tab.automation.isUnlocked&&(Autobuyers.toggle(),GameUI.notify.info(`Autobuyers ${player.auto.autobuyersOn?`resumed`:`paused`}`))}function nr(){if(Laitela.continuumUnlocked){if(ImaginaryUpgrade(21).isLockingMechanics&&player.auto.disableContinuum){ImaginaryUpgrade(21).tryShowWarningModal();return}Laitela.setContinuum(player.auto.disableContinuum),GameUI.notify.info(`${player.auto.disableContinuum?`Disabled`:`Enabled`} Continuum`)}}function rr(){if(Player.automatorUnlocked){if(AutomatorBackend.isRunning)AutomatorBackend.pause();else if(AutomatorBackend.isOn)AutomatorBackend.mode=AUTOMATOR_MODE.RUN;else{let e=player.reality.automator.state.editorScript;AutomatorBackend.restart(),AutomatorBackend.start(e),AutomatorData.currentErrors().length===0?GameUI.notify.automator(`Starting script "${AutomatorBackend.scriptName}"`):GameUI.notify.error(`Cannot start script "${AutomatorBackend.scriptName}" (has errors)`);return}let e=AutomatorBackend.isRunning?`Resuming`:`Pausing`,t=AutomatorBackend.currentLineNumber;GameUI.notify.automator(`${e} script "${AutomatorBackend.scriptName}" at line ${t}`)}}function ir(){if(Player.automatorUnlocked){let e=AutomatorBackend.isOn?`Restarting`:`Starting`;GameUI.notify.automator(`${e} script "${AutomatorBackend.scriptName}"`),AutomatorBackend.restart(),AutomatorBackend.start()}}function ar(){Pelle.canArmageddon&&Pelle.armageddon(!0)}function or(){Quote.isOpen||Quote.isHistoryOpen?Quote.clearAll():Modal.isOpen?Modal.hideAll():Tab.options.show(!0)}function sr(){if(Modal.hotkeys.isOpen){EventHub.dispatch(GAME_EVENT.CLOSE_MODAL);return}Modal.isOpen&&Modal.hideAll(),Modal.hotkeys.show()}function cr(){if(Modal.h2p.isOpen){EventHub.dispatch(GAME_EVENT.CLOSE_MODAL);return}Modal.isOpen&&Modal.hideAll(),Modal.h2p.show()}function lr(){if(Modal.autobuyerEditModal.isOpen){EventHub.dispatch(GAME_EVENT.CLOSE_MODAL);return}Autobuyers.hasAutobuyersForEditModal&&(Modal.isOpen&&Modal.hideAll(),Modal.autobuyerEditModal.show())}function ur(){if(Modal.hiddenTabs.isOpen){EventHub.dispatch(GAME_EVENT.CLOSE_MODAL);return}Modal.isOpen&&Modal.hideAll(),Modal.hiddenTabs.show()}EventHub.logic.on(GAME_EVENT.ARROW_KEY_PRESSED,e=>{if(Quote.isOpen||Quote.isHistoryOpen)return;let t=Tabs.current.key;if(e[0]===`up`||e[0]===`down`){let n=Tabs.currentUIFormat.flatMap(e=>e.isAvailable?[e.key]:[]),r=n.indexOf(t);e[0]===`up`?r--:r++,r=(r+n.length)%n.length,Tab[n[r]].show(!0)}else if(e[0]===`left`||e[0]===`right`){let n=Tabs.current._currentSubtab.key,r=Tabs.current.subtabs.flatMap(e=>e.isAvailable?[e.key]:[]),i=r.indexOf(n);e[0]===`left`?i--:i++,i=(i+r.length)%r.length,Tab[t][r[i]].show(!0)}});var dr=[`up`,`up`,`down`,`down`,`left`,`right`,`left`,`right`,`b`,`a`,`enter`],fr=0;function pr(e){SecretAchievement(17).isUnlocked||(dr[fr]===e?fr++:fr=fr===2&&e===`up`?2:e===dr[0]?1:0,dr.length<=fr&&(SecretAchievement(17).unlock(),Currency.antimatter.bumpTo(30),Speedrun.startTimer()))}var mr=Zn.default.prototype.handleKey;Zn.default.prototype.handleKey=function(e,t,n){return n.type===`keydown`&&pr(e),mr.apply(this,[e,t,n])};const hr=Object.freeze({NORMAL:0,DISTANT:1,REMOTE:2,OBSCURE:3,INVISIBLE:4,ETHEREAL:5});var gr=class{constructor(e,t){this.tier=e,this.amount=t}get isSatisfied(){return AntimatterDimension(this.tier).totalAmount.gte(this.amount)}};const _r={get requirement(){return this.requirementAt(player.galaxies)},buyableGalaxies(e,t=player.galaxies){let n=this.costMult,r=this.baseCost.sub(InfinityChallenge(5).isCompleted?1:0).minusEffectOf(InfinityUpgrade.resetBoost),i=e.sub(r).div(n),a=i;return QuantumChallenge(5).isRunning?e.sub(r).div(n).log(1.05).floor().add(1):(a=scale({baseResource:i,scaleStart:this.scalingStart[hr.DISTANT],scalePower:Decimal.pow(5,this.scalingPower[hr.DISTANT]),scaleMode:SCALING_TYPES.MULTIPLICATIVE,isInverted:!0}),a=scale({baseResource:a,scaleStart:this.scalingStart[hr.REMOTE],scalePower:Decimal.pow(1.01,this.scalingPower[hr.REMOTE]),scaleMode:SCALING_TYPES.EXPONENTIAL,isInverted:!0}),a=scale({baseResource:a,scaleStart:this.scalingStart[hr.OBSCURE],scalePower:Decimal.pow(3,this.scalingPower[hr.OBSCURE]),scaleMode:SCALING_TYPES.POLYNOMIAL,isInverted:!0}),a=scale({baseResource:a,scaleStart:this.scalingStart[hr.INVISIBLE],scalePower:Decimal.pow(1.5,this.scalingPower[hr.INVISIBLE]),scaleMode:SCALING_TYPES.DILATION,isInverted:!0}),a=scale({baseResource:a,scaleStart:this.scalingStart[hr.ETHEREAL],scalePower:Decimal.pow(2,this.scalingPower[hr.ETHEREAL]),scaleMode:SCALING_TYPES.EXPONENTIAL,isInverted:!0}),a.ceil().add(1).max(t))},requirementAt(e){let t=new Decimal(e);if(QuantumChallenge(5).isRunning)return new gr(this.requiredTier,this.baseCost.add(Decimal.pow(1.05,t).times(this.costMult)));if(this.typeAt(t)>=hr.ETHEREAL&&(t=scale({baseResource:t,scaleStart:this.scalingStart[hr.ETHEREAL],scalePower:Decimal.pow(1.8,this.scalingPower[hr.ETHEREAL]),scaleMode:SCALING_TYPES.EXPONENTIAL})),this.typeAt(t)>=hr.INVISIBLE&&(t=scale({baseResource:t,scaleStart:this.scalingStart[hr.INVISIBLE],scalePower:Decimal.pow(1.5,this.scalingPower[hr.INVISIBLE]),scaleMode:SCALING_TYPES.DILATION})),this.typeAt(t)>=hr.OBSCURE&&(t=scale({baseResource:t,scaleStart:this.scalingStart[hr.OBSCURE],scalePower:Decimal.pow(3,this.scalingPower[hr.OBSCURE]),scaleMode:SCALING_TYPES.POLYNOMIAL})),this.typeAt(t)>=hr.REMOTE&&(t=scale({baseResource:t,scaleStart:this.scalingStart[hr.REMOTE],scalePower:Decimal.pow(1.01,this.scalingPower[hr.REMOTE]),scaleMode:SCALING_TYPES.EXPONENTIAL})),this.typeAt(t)>=hr.DISTANT){let e=this.scalingStart[hr.DISTANT],n=this.scalingPower[hr.DISTANT];t=scale({baseResource:t,scaleStart:e,scalePower:Decimal.pow(5,n),scaleMode:SCALING_TYPES.MULTIPLICATIVE})}let n=_r.baseCost.add(t.times(_r.costMult));n=n.sub(Effects.sum(InfinityUpgrade.resetBoost)),InfinityChallenge(5).isCompleted&&(n=n.sub(1)),n=Decimal.floor(n);let r=_r.requiredTier;return new gr(r,n)},get scalingStart(){let e=new Decimal(1e6),t=new Decimal(3e5),n=new Decimal(1e5),r=new Decimal(800).plusEffectsOf(MasteryStudy(21),MasteryStudy(22),MasteryStudy(23),MasteryStudy(71)),i=o.E2.plusEffectsOf(TimeStudy(223),TimeStudy(224),TimeStudy(302),EternityChallenge(5).reward).add(GlyphInfo.power.sacrificeInfo.effect());return EternityChallenge(5).isRunning&&(i=new Decimal(0)),{[hr.DISTANT]:i.floor(),[hr.REMOTE]:r.floor(),[hr.OBSCURE]:n.floor(),[hr.INVISIBLE]:t.floor(),[hr.ETHEREAL]:e.floor()}},get scalingPower(){let e=new Decimal(1).dividedByEffectsOf(GluonUpgrade.redGreen(6),GluonUpgrade.greenBlue(6),GluonUpgrade.blueRed(6)),t=new Decimal(1).dividedByEffectsOf(GluonUpgrade.redGreen(1),GluonUpgrade.redGreen(7),GluonUpgrade.greenBlue(7),GluonUpgrade.blueRed(7)),n=new Decimal(1),r=new Decimal(1),i=new Decimal(1);return{[hr.DISTANT]:e,[hr.REMOTE]:t,[hr.OBSCURE]:n,[hr.INVISIBLE]:r,[hr.ETHEREAL]:i}},get costMult(){return new Decimal(Effects.min(NormalChallenge(10).isRunning?90:60,TimeStudy(42)))},get baseCost(){return NormalChallenge(10).isRunning?o.D99:o.D80},get requiredTier(){return NormalChallenge(10).isRunning?6:8},get canBeBought(){return!(EternityChallenge(6).isRunning&&!Enslaved.isRunning||NormalChallenge(8).isRunning||InfinityChallenge(7).isRunning||player.records.thisInfinity.maxAM.gt(Player.infinityGoal)&&(!player.break||Player.isInAntimatterChallenge))},get lockText(){return this.canBeBought?null:EternityChallenge(6).isRunning?`Locked (Eternity Challenge 6)`:InfinityChallenge(7).isRunning?`Locked (Infinity Challenge 7)`:InfinityChallenge(1).isRunning?`Locked (Infinity Challenge 1)`:NormalChallenge(8).isRunning?`Locked (8th Antimatter Dimension Autobuyer Challenge)`:null},get type(){return this.typeAt(player.galaxies)},typeAt(e){return e.gte(this.scalingStart[hr.ETHEREAL])?hr.ETHEREAL:e.gte(this.scalingStart[hr.INVISIBLE])?hr.INVISIBLE:e.gte(this.scalingStart[hr.OBSCURE])?hr.OBSCURE:e.gte(this.scalingStart[hr.REMOTE])?hr.REMOTE:e.gte(this.scalingStart[hr.DISTANT])?hr.DISTANT:hr.NORMAL}};function vr(){EventHub.dispatch(GAME_EVENT.GALAXY_RESET_BEFORE),player.galaxies=player.galaxies.add(1),(!Achievement(143).isUnlocked||Pelle.isDoomed&&!PelleUpgrade.galaxyNoResetDimboost.canBeApplied||EternityMilestone.noADReset.isReached)&&(player.dimensionBoosts=o.D0),softReset(0),Notations.current===Notation.emoji&&(player.requirementChecks.permanent.emojiGalaxies=player.requirementChecks.permanent.emojiGalaxies.add(1)),player.requirementChecks.infinity.noSacrifice=!0,EventHub.dispatch(GAME_EVENT.GALAXY_RESET_AFTER)}function yr(e){if(!(!_r.canBeBought||!_r.requirement.isSatisfied)&&!GameEnd.creditsEverClosed){if(RealityUpgrade(7).isLockingMechanics&&player.galaxies.gt(0)){RealityUpgrade(7).tryShowWarningModal();return}if(player.options.confirmations.antimatterGalaxy){Modal.antimatterGalaxy.show({bulk:e&&EternityMilestone.autobuyMaxGalaxies.isReached});return}br(e)}}function br(e,t=Number.MAX_VALUE){let n=RealityUpgrade(7).isLockingMechanics?o.D1:t;return EternityMilestone.autobuyMaxGalaxies.isReached&&e?xr(n):player.galaxies.gte(n)||!_r.canBeBought||!_r.requirement.isSatisfied?!1:(Tutorial.turnOffEffect(TUTORIAL_STATE.GALAXY),vr(),!0)}function xr(e=o.BEMAX){if(player.galaxies.gte(e)||!_r.canBeBought||!_r.requirement.isSatisfied)return!1;let t=_r.requirement;if(!t.isSatisfied)return!1;let n=AntimatterDimension(t.tier);if(_r.buyableGalaxies(Decimal.round(n.totalAmount)).lte(player.galaxies))return!1;let r=Decimal.min(_r.buyableGalaxies(Decimal.round(n.totalAmount)),e);return Notations.current===Notation.emoji&&(player.requirementChecks.permanent.emojiGalaxies=player.requirementChecks.permanent.emojiGalaxies.add(r.sub(player.galaxies))),player.galaxies=r.sub(1),vr(),Enslaved.isRunning&&player.galaxies.gt(1)&&EnslavedProgress.c10.giveProgress(),Tutorial.turnOffEffect(TUTORIAL_STATE.GALAXY),!0}var Sr=class{constructor(e){this.name=e.name,this.forcedName=e.forcedName,this.isUnlocked=()=>e.isUnlocked()||player.records.fullGameCompletions>0,this.awayOption=e.awayOption??this.name,this.showOption=e.showOption??!0,this.reference=e.reference??[this.name],this.applyFn=e.applyFn??(e=>e),this.classObjectReference=e.classObjectReference??this.name,this.appearsInAwayModal=e.appearsInAwayModal??!0}get option(){return player.options.awayProgress[this.awayOption]}set option(e){player.options.awayProgress[this.awayOption]=e}get classObject(){return`c-modal-away-progress__${this.classObjectReference.replaceAll(/[A-Z]/gu,e=>`-${e.toLowerCase()}`)}`}get formatName(){return this.forcedName?this.forcedName:this.name.replaceAll(/[A-Z]/gu,e=>` ${e}`).replace(/^\w/u,e=>e.toUpperCase())}navigateTo(e){let t=e;for(let e of this.reference)t=t[e];return this.applyFn(t)}};const Cr={all:{},index:[],showOption:[],appearsInAwayModal:[]};for(let e=0;e<A.awayProgressTypes.length;e++){let t=new Sr(A.awayProgressTypes[e]),n=t.name;Cr.all[n]=t,Cr.index.push(n),t.showOption&&Cr.showOption.push(n),t.appearsInAwayModal&&Cr.appearsInAwayModal.push(n)}var wr=class{constructor(e){this.name=e.name,this._confirmationSetting=e.option,this.isUnlocked=()=>e.isUnlocked()||player.records.fullGameCompletions>0}get option(){return player.options.confirmations[this._confirmationSetting]}set option(e){player.options.confirmations[this._confirmationSetting]=e}};const Tr=A.confirmationTypes.mapToObject(e=>e.option,e=>new wr(e));Tr.index=Object.values(Tr);var Er=class{constructor(e=null){this._id=e}get data(){throw new NotImplementedError}get isUnlocked(){throw new NotImplementedError}get id(){return this._id}get canTick(){let e=!player.auto.autobuyersOn||!this.constructor.isActive;return this.isActive&&!e&&(this.isUnlocked||this.isBought)}get isActive(){return this.data.isActive}set isActive(e){this.data.isActive=e}get bulk(){return 1}toggle(){this.isActive=!this.isActive}tick(){throw new NotImplementedError}reset(){}static get entryCount(){return 1}static get autobuyerGroupName(){throw new NotImplementedError}static get isActive(){return!0}static set isActive(e){throw new NotImplementedError}static createAccessor(){let e=this.entryCount,t=Array.range(1,e).map(e=>new this(e)),n=[null,...t],r=e=>n[e];return Object.defineProperties(r,{oneIndexed:{get:()=>n},zeroIndexed:{get:()=>t},entryCount:{get:()=>e},anyUnlocked:{get:()=>t.some(e=>e.isUnlocked)},allUnlocked:{get:()=>t.every(e=>e.isUnlocked)},allActive:{get:()=>t.every(e=>e.isActive)},groupName:{get:()=>this.autobuyerGroupName},isActive:{get:()=>this.isActive,set:e=>{this.isActive=e}}}),r.toggle=()=>this.isActive=!this.isActive,r}},Dr=class extends Er{get interval(){return this.data.interval}get canTick(){return super.canTick&&this.timeSinceLastTick>=this.interval}get timeSinceLastTick(){return player.records.trueTimePlayed-this.data.lastTick}tick(){this.data.lastTick=player.records.trueTimePlayed}get resetTickOn(){}resetTick(e){e>=this.resetTickOn&&(this.data.lastTick=0)}reset(){}},Or=class extends Dr{get baseInterval(){throw new NotImplementedError}get cost(){return this.data.cost}get interval(){let e=this.data.interval;return BreakInfinityUpgrade.autobuyerSpeed.isBought?e/2:e}get hasMaxedInterval(){return this.data.interval<=100}upgradeInterval(e){this.hasMaxedInterval||!e&&!Currency.infinityPoints.purchase(this.cost)||(this.data.cost*=2,this.data.interval=Math.clampMin(this.data.interval*.6,100),Achievement(52).tryUnlock(),Achievement(53).tryUnlock(),GameUI.update())}maxIntervalForFree(){for(;!this.hasMaxedInterval;)this.upgradeInterval(!0)}reset(){EternityMilestone.keepAutobuyers.isReached||PelleUpgrade.keepAutobuyers.canBeApplied||(this.data.interval=this.baseInterval,this.data.cost=1)}static createAccessor(){let e=super.createAccessor();return Object.defineProperty(e,`allMaxedInterval`,{get:()=>e.zeroIndexed.every(e=>e.hasMaxedInterval)}),Object.defineProperty(e,`hasInstant`,{get:()=>e.zeroIndexed.some(e=>e.interval<player.options.updateRate)}),e}},kr=class extends Er{get data(){return player.auto.ipMultBuyer}get name(){return`Infinity Point Multiplier`}get isUnlocked(){return EternityMilestone.autobuyerIPMult.isReached&&!Pelle.isDoomed}get hasUnlimitedBulk(){return!0}tick(){InfinityUpgrade.ipMult.buyMax()}},Ar=class extends Er{get data(){return player.auto.epMultBuyer}get name(){return`Eternity Point Multiplier`}get isUnlocked(){return Achievement(147).isUnlocked}get hasUnlimitedBulk(){return!0}tick(){this.isActive&&(applyEU2(),EternityUpgrade.epMult.buyMax(!0))}},jr=class extends Er{get data(){return player.auto.annihilation}get name(){return`Annihilation`}get isUnlocked(){return SingularityMilestone.annihilationAutobuyer.canBeApplied}get multiplier(){return this.data.multiplier}set multiplier(e){this.data.multiplier=e}get bulk(){return 0}get hasInput(){return!0}get inputType(){return`decimal`}get inputEntry(){return`multiplier`}tick(){Laitela.darkMatterMultGain.gte(this.multiplier)&&Laitela.annihilate()}},Mr=class extends Or{get tier(){return this.id}get name(){return AntimatterDimension(this.tier).shortDisplayName}get fullName(){return`${this.name} Antimatter Dimension`}get data(){return player.auto.antimatterDims.all[this.tier-1]}get baseInterval(){return Player.defaultStart.auto.antimatterDims.all[this.tier-1].interval}get isUnlocked(){return Pelle.isDisabled(`antimatterDimAutobuyer${this.tier}`)?!1:this.data.isBought||this.canBeUpgraded}get isBought(){return this.data.isBought}get antimatterCost(){return o.E10.pow(this.tier-1).times(o.E40)}get canBeBought(){return!Pelle.isDisabled(`antimatterDimAutobuyer${this.tier}`)}get canBeUpgraded(){return NormalChallenge(this.tier).isCompleted}get disabledByContinuum(){return Laitela.continuumActive}get bulk(){return this.hasUnlimitedBulk?1e100:Math.clampMax(this.data.bulk,this.bulkCap)}get hasUnlimitedBulk(){return Achievement(61).isUnlocked}get bulkCap(){return 512}get hasMaxedBulk(){return this.bulk>=this.bulkCap}get mode(){return this.data.mode}set mode(e){this.data.mode=e}get canUnlockSlowVersion(){return player.records.thisEternity.maxAM.gte(this.antimatterCost)}toggleMode(){this.mode=[AUTOBUYER_MODE.BUY_SINGLE,AUTOBUYER_MODE.BUY_10].nextSibling(this.mode)}get canTick(){let e=player.auto.antimatterDims,t=e.all[this.tier-1],n=e.isActive,r=t&&(Autobuyer.antimatterDimension.collapseDisplay?n:!0),i=AntimatterDimension(this.tier),a=i.isAvailableForPurchase&&i.isAffordable,o=this.timeSinceLastTick>=this.interval,s=player.auto.autobuyersOn&&this.isActive&&(this.isUnlocked||this.isBought);return r&&a&&o&&s}tick(){super.tick();let e=this.tier;switch(this.mode){case AUTOBUYER_MODE.BUY_SINGLE:buyOneDimension(e);break;case AUTOBUYER_MODE.BUY_10:buyMaxDimension(e,this.bulk);break}}upgradeBulk(){this.hasMaxedBulk||Currency.infinityPoints.purchase(this.cost)&&(this.data.bulk=Math.clampMax(this.bulk*2,this.bulkCap),this.data.cost=Math.ceil(2.4*this.cost),Achievement(61).tryUnlock(),GameUI.update())}purchase(){this.canUnlockSlowVersion&&(this.data.isBought=!0)}get resetTickOn(){return Perk.antimatterNoReset.canBeApplied?PRESTIGE_EVENT.ANTIMATTER_GALAXY:PRESTIGE_EVENT.DIMENSION_BOOST}reset(){super.reset(),!(EternityMilestone.keepAutobuyers.isReached||PelleUpgrade.keepAutobuyers.canBeApplied)&&(this.data.isUnlocked=!1,this.data.isBought=!1,this.data.bulk=1,TabNotification.newAutobuyer.clearTrigger())}static get entryCount(){return 8}static get autobuyerGroupName(){return`Antimatter Dimension`}static get isActive(){return player.auto.antimatterDims.isActive}static set isActive(e){player.auto.antimatterDims.isActive=e}static createAccessor(){let e=super.createAccessor();return Object.defineProperties(e,{allBought:{get:()=>e.zeroIndexed.every(e=>e.isBought)},allUnlimitedBulk:{get:()=>e.zeroIndexed[0].hasUnlimitedBulk},bulkCap:{get:()=>e.zeroIndexed[0].bulkCap},collapseDisplay:{get:()=>e.allMaxedInterval&&e.allUnlocked&&e.allUnlimitedBulk}}),e}},Nr=class extends Or{get data(){return player.auto.bigCrunch}get name(){return`Infinity`}get isUnlocked(){return Pelle.isDoomed?PelleStrikes.infinity.hasStrike:this.canBeUpgraded}get canBeUpgraded(){return NormalChallenge(12).isCompleted}get baseInterval(){return Player.defaultStart.auto.bigCrunch.interval}get mode(){return this.data.mode}set mode(e){this.data.mode=e}get hasAdditionalModes(){return EternityMilestone.bigCrunchModes.isReached}get increaseWithMult(){return this.data.increaseWithMult}set increaseWithMult(e){this.data.increaseWithMult=e}get amount(){return this.data.amount}get bulk(){return 0}set amount(e){this.data.amount=e}get time(){return this.data.time}set time(e){this.data.time=e}get xHighest(){return this.data.xHighest}set xHighest(e){this.data.xHighest=e}autoInfinitiesAvailable(e){return(e||EternityMilestone.autoInfinities.isReached)&&!EternityChallenge(4).isRunning&&!EternityChallenge(12).isRunning&&!Player.isInAntimatterChallenge&&player.auto.autobuyersOn&&this.data.isActive&&!Autobuyer.eternity.isActive&&this.mode===AUTO_CRUNCH_MODE.TIME&&this.time<=5&&!Autobuyer.eternity.autoEternitiesAvailable()}upgradeInterval(e){super.upgradeInterval(e),TabNotification.breakInfinity.tryTrigger()}bumpAmount(e){this.isUnlocked&&this.increaseWithMult&&(this.amount=this.amount.times(e))}get canTick(){return Player.canCrunch&&super.canTick}get resetTickOn(){return PRESTIGE_EVENT.ETERNITY}get highestPrevPrestige(){return player.records.thisEternity.maxIP}get timeToNextTick(){return Math.clampMin(this.time-Time.thisInfinityRealTime.totalSeconds.toNumber(),0)}get willInfinity(){if(!player.break||Player.isInAntimatterChallenge)return!0;switch(this.mode){case AUTO_CRUNCH_MODE.AMOUNT:return gainedInfinityPoints().gte(this.amount);case AUTO_CRUNCH_MODE.TIME:return Time.thisInfinityRealTime.totalSeconds.toNumber()>this.time;case AUTO_CRUNCH_MODE.X_HIGHEST:default:return gainedInfinityPoints().gte(this.highestPrevPrestige.times(this.xHighest))}}tick(){super.tick(),this.willInfinity&&bigCrunchResetRequest(!0)}reset(){super.reset(),!EternityMilestone.bigCrunchModes.isReached&&(this.mode=AUTO_CRUNCH_MODE.AMOUNT)}},Pr=class extends Er{get data(){return player.auto.blackHolePower.all[this.id-1]}get name(){return`Black Hole ${this.id} Power`}get isUnlocked(){return Ra.unlocks.blackHolePowerAutobuyers.canBeApplied}get hasUnlimitedBulk(){return!0}tick(){let e=BlackHole(this.id);for(;Currency.realityMachines.gte(e.powerUpgrade.cost);)e.powerUpgrade.purchase()}static get entryCount(){return 2}static get autobuyerGroupName(){return`Black Hole Power`}static get isActive(){return player.auto.blackHolePower.isActive}static set isActive(e){player.auto.blackHolePower.isActive=e}},Fr=class extends Dr{get data(){return player.auto.ascension}get name(){return`Dark Matter Dimension Ascension`}get isUnlocked(){return SingularityMilestone.ascensionAutobuyers.canBeApplied}get interval(){return 1e3*SingularityMilestone.darkAutobuyerSpeed.effectValue}get hasUnlimitedBulk(){return!0}tick(){super.tick();for(let e=1;e<=SingularityMilestone.ascensionAutobuyers.effectValue;e++)DarkMatterDimension(e).ascend()}},Ir=class extends Dr{get data(){return player.auto.darkMatterDims}get name(){return`Dark Matter Dimensions`}get isUnlocked(){return SingularityMilestone.darkDimensionAutobuyers.canBeApplied}get interval(){return 1e3*SingularityMilestone.darkAutobuyerSpeed.effectValue}get hasUnlimitedBulk(){return!0}tick(){super.tick(),Laitela.maxAllDMDimensions(SingularityMilestone.darkDimensionAutobuyers.effectValue)}},Lr=class extends Dr{get _upgradeName(){return[`dtGain`,`galaxyThreshold`,`tachyonGain`,`tachyonExponent`][this.id-1]}get data(){return player.auto.dilationUpgrades.all[this.id-1]}get name(){return[`Dilated Time Multiplier`,`Tachyon Galaxy Threshold`,`Tachyon Particle Multiplier`,`Tachyon Exponent Amplifier`][this.id-1]}get interval(){return QuantumSpeedrunMilestone(21).isReached?500/10:500}get isUnlocked(){return QuantumSpeedrunMilestone(6).isReached}get resetTickOn(){return PRESTIGE_EVENT.REALITY}get hasUnlimitedBulk(){return QuantumSpeedrunMilestone(26).isReached}tick(){super.tick();let e=this._upgradeName;DilationUpgrade[e].purchase(this.hasUnlimitedBulk?1/0:1)}static get entryCount(){return 4}static get autobuyerGroupName(){return`Dilation Upgrade`}static get isActive(){return player.auto.dilationUpgrades.isActive}static set isActive(e){player.auto.dilationUpgrades.isActive=e}},Rr=class extends Or{get data(){return player.auto.dimBoost}get name(){return`Dimension Boost`}get isUnlocked(){return Pelle.isDisabled(`dimBoostAutobuyer`)?!1:this.canBeUpgraded}get canBeUpgraded(){return NormalChallenge(10).isCompleted}get baseInterval(){return Player.defaultStart.auto.dimBoost.interval}get limitDimBoosts(){return this.data.limitDimBoosts}set limitDimBoosts(e){this.data.limitDimBoosts=e}get maxDimBoosts(){return this.data.maxDimBoosts}set maxDimBoosts(e){this.data.maxDimBoosts=e}get limitUntilGalaxies(){return this.data.limitUntilGalaxies}set limitUntilGalaxies(e){this.data.limitUntilGalaxies=e}get galaxies(){return this.data.galaxies}set galaxies(e){this.data.galaxies=e}get bulk(){return this.data.bulk}set bulk(e){this.data.bulk=e}get buyMaxInterval(){return this.data.buyMaxInterval}set buyMaxInterval(e){this.data.buyMaxInterval=e}get isBuyMaxUnlocked(){return BreakInfinityUpgrade.autobuyMaxDimboosts.isBought}get interval(){return this.isBuyMaxUnlocked?TimeSpan.fromSeconds(new Decimal(this.buyMaxInterval)).totalMilliseconds.toNumber():super.interval}get canTick(){return DimBoost.canBeBought&&DimBoost.requirement.isSatisfied&&super.canTick}get resetTickOn(){return this.isBuyMaxUnlocked?PRESTIGE_EVENT.INFINITY:PRESTIGE_EVENT.ANTIMATTER_GALAXY}tick(){if(this.isBuyMaxUnlocked){let e=!this.limitUntilGalaxies||player.galaxies.gte(this.galaxies);if(!DimBoost.canUnlockNewDimension&&!e)return;requestDimensionBoost(!0),super.tick();return}let e=!this.limitDimBoosts||DimBoost.purchasedBoosts.lt(this.maxDimBoosts),t=this.limitUntilGalaxies&&player.galaxies.gte(this.galaxies);(e||t)&&(requestDimensionBoost(!1),super.tick())}},zr=class extends Er{get data(){return player.auto.eternity}get name(){return`Eternity`}get isUnlocked(){return EternityMilestone.autobuyerEternity.isReached}get mode(){return this.data.mode}set mode(e){this.data.mode=e}get amount(){return this.data.amount}get increaseWithMult(){return this.data.increaseWithMult}set increaseWithMult(e){this.data.increaseWithMult=e}set amount(e){this.data.amount=e}get time(){return this.data.time}set time(e){this.data.time=e}get xHighest(){return this.data.xHighest}set xHighest(e){this.data.xHighest=e}get hasAdditionalModes(){return RealityUpgrade(13).isBought}autoEternitiesAvailable(e){return(e||EternityMilestone.autoEternities.isReached)&&!Player.isInAnyChallenge&&!player.dilation.active&&player.auto.autobuyersOn&&this.data.isActive&&this.mode===AUTO_ETERNITY_MODE.AMOUNT&&this.amount.equals(0)}bumpAmount(e){this.isUnlocked&&this.increaseWithMult&&(this.amount=this.amount.times(e))}get highestPrevPrestige(){return player.records.thisReality.maxEP}get timeToNextTick(){return Math.clampMin(this.time-Time.thisEternityTrueTime.totalSeconds.toNumber(),0)}get willEternity(){if(EternityChallenge.isRunning)return!EternityChallenge.current?.gainedCompletionStatus.hasMoreCompletions;switch(this.mode){case AUTO_ETERNITY_MODE.AMOUNT:return gainedEternityPoints().gte(this.amount);case AUTO_ETERNITY_MODE.TIME:return Time.thisEternityTrueTime.totalSeconds.toNumber()>this.time;case AUTO_ETERNITY_MODE.X_HIGHEST:default:return gainedEternityPoints().gte(this.highestPrevPrestige.times(this.xHighest))}}tick(){this.willEternity&&eternity(!1,!0)}reset(){EternityMilestone.autobuyerEternity.isReached||(this.isActive=!1)}},Br=class extends Or{get data(){return player.auto.galaxy}get name(){return`Antimatter Galaxy`}get isUnlocked(){return Pelle.isDisabled(`galaxyAutobuyer`)?!1:this.canBeUpgraded}get canBeUpgraded(){return NormalChallenge(11).isCompleted}get baseInterval(){return Player.defaultStart.auto.galaxy.interval}get limitGalaxies(){return this.data.limitGalaxies}set limitGalaxies(e){this.data.limitGalaxies=e}get maxGalaxies(){return this.data.maxGalaxies}set maxGalaxies(e){this.data.maxGalaxies=e}get buyMaxInterval(){return this.data.buyMaxInterval}set buyMaxInterval(e){this.data.buyMaxInterval=e}get isBuyMaxUnlocked(){return EternityMilestone.autobuyMaxGalaxies.isReached}get interval(){return this.isBuyMaxUnlocked?TimeSpan.fromSeconds(new Decimal(this.buyMaxInterval)).totalMilliseconds.toNumber():super.interval}get canTick(){return Galaxy.canBeBought&&Galaxy.requirement.isSatisfied&&super.canTick}get resetTickOn(){return PRESTIGE_EVENT.INFINITY}tick(){super.tick();let e=this.limitGalaxies?this.maxGalaxies:o.BEMAX;requestGalaxyReset(this.isBuyMaxUnlocked,e)}},Vr=class extends Er{get name(){return ImaginaryUpgrade(this.id).config.name}get data(){return player.auto.imaginaryUpgrades.all[this.id-1]}get isUnlocked(){return ImaginaryUpgrade(20).canBeApplied}get hasUnlimitedBulk(){return!0}tick(){let e=ImaginaryUpgrade(this.id);for(;Currency.imaginaryMachines.gte(e.cost);)e.purchase()}static get entryCount(){return 10}static get autobuyerGroupName(){return`Imaginary Upgrade`}static get isActive(){return player.auto.imaginaryUpgrades.isActive}static set isActive(e){player.auto.imaginaryUpgrades.isActive=e}},Hr=class extends Dr{get tier(){return this.id}get dimension(){return InfinityDimension(this.tier)}get name(){return this.dimension.shortDisplayName}get fullName(){return`${this.name} Infinity Dimension`}get data(){return player.auto.infinityDims.all[this.tier-1]}get interval(){return 50}get isUnlocked(){return EternityMilestone[`autobuyerID${this.tier}`].isReached||PelleUpgrade.IDAutobuyers.canBeApplied}get resetTickOn(){return PRESTIGE_EVENT.ETERNITY}get hasUnlimitedBulk(){return!0}get canTick(){return InfinityDimensions.canAutobuy()&&this.dimension.isAvailableForPurchase&&super.canTick}tick(){super.tick(),this.dimension.buyMax(!0)}static get entryCount(){return 8}static get autobuyerGroupName(){return`Infinity Dimension`}static get isActive(){return player.auto.infinityDims.isActive}static set isActive(e){player.auto.infinityDims.isActive=e}},Ur=class extends Er{get data(){return player.auto.reality}get name(){return`Reality`}get isUnlocked(){return RealityUpgrade(25).isBought}get canTick(){return super.canTick&&!GlyphSelection.active}get mode(){return this.data.mode}set mode(e){this.data.mode=e}get rm(){return this.data.rm}set rm(e){this.data.rm=e}get glyph(){return this.data.glyph}set glyph(e){this.data.glyph=e}get time(){return this.data.time}set time(e){this.data.time=e}get shard(){return this.data.shard}set shard(e){this.data.shard=e.clamp(0,Number.MAX_VALUE).toNumber()}toggleMode(){this.mode=[AUTO_REALITY_MODE.RM,AUTO_REALITY_MODE.GLYPH,AUTO_REALITY_MODE.EITHER,AUTO_REALITY_MODE.BOTH,AUTO_REALITY_MODE.TIME,AUTO_REALITY_MODE.RELIC_SHARD].nextSibling(this.mode)}bumpAmount(e){this.isUnlocked&&(this.rm=this.rm.times(e))}tick(){let e=[AUTO_GLYPH_SCORE.LOWEST_SACRIFICE,AUTO_GLYPH_SCORE.LOWEST_ALCHEMY,AUTO_GLYPH_SCORE.ALCHEMY_VALUE],t=EffarigUnlock.glyphFilter.isUnlocked&&!player.reality.hasCheckedFilter&&!e.includes(AutoGlyphProcessor.scoreMode);if(isRealityAvailable()&&player.options.autoRealityForFilter&&t){let e=gainedGlyphLevel(),t=[AUTO_REALITY_MODE.GLYPH,AUTO_REALITY_MODE.EITHER,AUTO_REALITY_MODE.BOTH].includes(this.mode)?{actualLevel:Decimal.min(this.glyph,Glyphs.levelCap),rawLevel:DC.D1}:e,n=GlyphSelection.glyphList(GlyphSelection.choiceCount,t,{isChoosingGlyph:!1}),r=AutoGlyphProcessor.pick(n);if(player.reality.hasCheckedFilter=!0,!AutoGlyphProcessor.wouldKeep(r)){autoReality();return}}let n=!1,r=simulatedRealityCount(!1).add(1),i=MachineHandler.gainedRealityMachines.times(r).gte(this.rm),a=gainedGlyphLevel().actualLevel.gte(this.glyph);switch(this.mode){case AUTO_REALITY_MODE.RM:n=i;break;case AUTO_REALITY_MODE.GLYPH:n=a;break;case AUTO_REALITY_MODE.EITHER:n=i||a;break;case AUTO_REALITY_MODE.BOTH:n=i&&a;break;case AUTO_REALITY_MODE.TIME:n=player.records.thisReality.realTime/1e3>this.time;break;case AUTO_REALITY_MODE.RELIC_SHARD:n=Effarig.shardsGained.mul(r).gt(this.shard);break}n&&autoReality()}},Wr=class extends Er{get name(){return RealityUpgrade(this.id).config.name}get data(){return player.auto.realityUpgrades.all[this.id-1]}get isUnlocked(){return Ra.unlocks.instantECAndRealityUpgradeAutobuyers.canBeApplied}get hasUnlimitedBulk(){return!0}tick(){let e=RealityUpgrade(this.id);for(;Currency.realityMachines.gte(e.cost);)e.purchase()}static get entryCount(){return 5}static get autobuyerGroupName(){return`Reality Upgrade`}static get isActive(){return player.auto.realityUpgrades.isActive}static set isActive(e){player.auto.realityUpgrades.isActive=e}},Gr=class extends Er{get data(){return player.auto.replicantiGalaxies}get name(){return`Replicanti Galaxy`}get isUnlocked(){return EternityMilestone.autobuyerReplicantiGalaxy.isReached}get isEnabled(){return Achievement(138).isUnlocked||!TimeStudy(131).isBought}get hasUnlimitedBulk(){return Achievement(126).isUnlocked}tick(){this.isEnabled&&replicantiGalaxy(!0)}},Kr=class extends Dr{get _upgradeName(){return[`chance`,`interval`,`galaxies`][this.id-1]}get name(){return`Replicanti ${[`Chance`,`Interval`,`Max Galaxies`][this.id-1]}`}get data(){return player.auto.replicantiUpgrades.all[this.id-1]}get interval(){return 50}get isUnlocked(){return ReplicantiUpgrade[this._upgradeName].autobuyerMilestone.isReached||PelleUpgrade.replicantiAutobuyers.canBeApplied}get resetTickOn(){return PRESTIGE_EVENT.ETERNITY}get hasUnlimitedBulk(){return!0}tick(){EternityChallenge(8).isRunning||(super.tick(),ReplicantiUpgrade[this._upgradeName].autobuyerTick())}static get entryCount(){return 3}static get autobuyerGroupName(){return`Replicanti Upgrade`}static get isActive(){return player.auto.replicantiUpgrades.isActive}static set isActive(e){player.auto.replicantiUpgrades.isActive=e}},qr=class extends Er{get data(){return player.auto.sacrifice}get name(){return`Dimensional Sacrifice`}get isUnlocked(){return EternityMilestone.autoIC.isReached||InfinityChallenge(2).isCompleted}get multiplier(){return this.data.multiplier}set multiplier(e){this.data.multiplier=e}get bulk(){return 0}get hasInput(){return!0}get inputType(){return`decimal`}get inputEntry(){return`multiplier`}tick(){(Achievement(118).canBeApplied||Sacrifice.nextBoost.gte(Decimal.max(this.multiplier,1.01)))&&sacrificeReset()}},Jr=class extends Er{get data(){return player.auto.singularity}get name(){return`Singularity`}get isUnlocked(){return SingularityMilestone.autoCondense.canBeApplied}get bulk(){return Singularity.singularitiesGained}tick(){Currency.darkEnergy.value.gte(Singularity.cap.mul(SingularityMilestone.autoCondense.effectValue))&&Singularity.perform()}},Yr=class extends Or{get data(){return player.auto.tickspeed}get name(){return`Tickspeed`}get isUnlocked(){return Pelle.isDisabled(`tickspeedAutobuyer`)?!1:this.canBeUpgraded}get canBeUpgraded(){return NormalChallenge(9).isCompleted}get baseInterval(){return Player.defaultStart.auto.tickspeed.interval}get isBought(){return this.data.isBought}get antimatterCost(){return o.E140}get canBeBought(){return!Pelle.isDoomed}get disabledByContinuum(){return Laitela.continuumActive}get mode(){return this.data.mode}set mode(e){this.data.mode=e}get hasUnlimitedBulk(){return this.mode===AUTOBUYER_MODE.BUY_MAX}get canUnlockSlowVersion(){return player.records.thisEternity.maxAM.gte(this.antimatterCost)}toggleMode(){this.mode=[AUTOBUYER_MODE.BUY_SINGLE,AUTOBUYER_MODE.BUY_MAX].nextSibling(this.mode)}get canTick(){return Tickspeed.isAvailableForPurchase&&Tickspeed.isAffordable&&super.canTick}tick(){switch(super.tick(),this.mode){case AUTOBUYER_MODE.BUY_SINGLE:buyTickSpeed();break;case AUTOBUYER_MODE.BUY_MAX:buyMaxTickSpeed();break}}purchase(){this.canUnlockSlowVersion&&(this.data.isBought=!0)}get resetTickOn(){return Perk.antimatterNoReset.canBeApplied?PRESTIGE_EVENT.ANTIMATTER_GALAXY:PRESTIGE_EVENT.DIMENSION_BOOST}reset(){super.reset(),!(EternityMilestone.keepAutobuyers.isReached||PelleUpgrade.keepAutobuyers.canBeApplied)&&(this.data.mode=AUTOBUYER_MODE.BUY_SINGLE,this.data.isUnlocked=!1,this.data.isBought=!1,TabNotification.newAutobuyer.clearTrigger())}},Xr=class extends Dr{get tier(){return this.id}get name(){return TimeDimension(this.tier).shortDisplayName}get fullName(){return`${this.name} Time Dimension`}get data(){return player.auto.timeDims.all[this.tier-1]}get interval(){return 50}get isUnlocked(){return Achievement(147).isUnlocked}get resetTickOn(){return PRESTIGE_EVENT.REALITY}get hasUnlimitedBulk(){return!0}tick(){applyEU2(),Autobuyer.epMult.tick();let e=this.tier;if(TimeDimension(e).isAvailableForPurchase){super.tick(),buyMaxTimeDimension(e,1,!0);for(let t=0;t<10;t++)buySingleTimeDimension(e,!0)}}static get entryCount(){return 8}static get autobuyerGroupName(){return`Time Dimension`}static get isActive(){return player.auto.timeDims.isActive}static set isActive(e){player.auto.timeDims.isActive=e}},Zr=class extends Er{get data(){return player.auto.timeTheorems}get name(){return`Time Theorem`}get isUnlocked(){return QuantumSpeedrunMilestone(2).isReached}get hasUnlimitedBulk(){return!0}tick(){TimeTheorems.buyMax(!0)}},Qr=class extends Er{get data(){return player.auto.mdBoost}get name(){return`Meta-Dimension Boost`}get isUnlocked(){return QuantumSpeedrunMilestone(15).isReached}get hasUnlimitedBulk(){return QuantumSpeedrunMilestone(27).isReached}tick(){this.hasUnlimitedBulk?MetaDimensions.boost.maxBuy():MetaDimensions.boost.request(1)}},$r=class extends Dr{get tier(){return this.id}get name(){return MetaDimension(this.tier).shortDisplayName}get fullName(){return`${this.name} Meta Dimension`}get data(){return player.auto.metaDims.all[this.tier-1]}get interval(){return QuantumSpeedrunMilestone(21).isReached?500/10:500}get isUnlocked(){return QuantumSpeedrunMilestone(6+this.id).isReached}get resetTickOn(){return PRESTIGE_EVENT.REALITY}get hasUnlimitedBulk(){return!0}tick(){let e=this.tier;MetaDimension(e).isAvailableForPurchase&&(super.tick(),MetaDimensions.buyMax(e,1/0))}static get entryCount(){return 8}static get autobuyerGroupName(){return`Meta Dimension`}static get isActive(){return player.auto.metaDims.isActive}static set isActive(e){player.auto.metaDims.isActive=e}},ei=class extends Er{get data(){return player.auto.pairProduction}get name(){return`Galaxy Discharge`}get isUnlocked(){return TimeStudy.pairProduction.isBought}get hasUnlimitedBulk(){return!0}tick(){PairProduction.sacrificeGalaxies()}};const ti={annihilation:new jr,antimatterDimension:Mr.createAccessor(),bigCrunch:new Nr,blackHolePower:Pr.createAccessor(),darkMatterDimsAscension:new Fr,darkMatterDims:new Ir,dilationUpgrade:Lr.createAccessor(),dimboost:new Rr,eternity:new zr,galaxy:new Br,imaginaryUpgrade:Vr.createAccessor(),infinityDimension:Hr.createAccessor(),ipMult:new kr,epMult:new Ar,reality:new Ur,realityUpgrade:Wr.createAccessor(),replicantiGalaxy:new Gr,replicantiUpgrade:Kr.createAccessor(),sacrifice:new qr,singularity:new Jr,tickspeed:new Yr,timeDimension:Xr.createAccessor(),timeTheorem:new Zr,mdBoost:new Qr,metaDimension:$r.createAccessor(),pairProduction:new ei},ni=function(){let e=ti.antimatterDimension.zeroIndexed,t=ti.infinityDimension.zeroIndexed,n=ti.timeDimension.zeroIndexed,r=ti.metaDimension.zeroIndexed,i=[e,t,n,r],a=[ti.bigCrunch,ti.eternity,ti.reality],o=[ti.sacrifice,ti.replicantiGalaxy,ti.timeTheorem,ti.ipMult,ti.epMult,ti.mdBoost,ti.pairProduction,ti.darkMatterDims,ti.darkMatterDimsAscension,ti.singularity,ti.annihilation],s=[ti.tickspeed,ti.galaxy,ti.dimboost].concat(o),c=[ti.replicantiUpgrade.zeroIndexed,ti.dilationUpgrade.zeroIndexed,ti.blackHolePower.zeroIndexed,ti.realityUpgrade.zeroIndexed,ti.imaginaryUpgrade.zeroIndexed],l=i.concat(a,s,c),u=[ti.antimatterDimension,ti.infinityDimension,ti.timeDimension,ti.metaDimension,ti.replicantiUpgrade,ti.dilationUpgrade,ti.blackHolePower,ti.realityUpgrade,ti.imaginaryUpgrade];return{all:l.flat(),display:[u,o],upgradeable:[...e,ti.tickspeed,ti.dimboost,ti.galaxy,ti.bigCrunch],get unlocked(){return ni.all.filter(e=>e.isUnlocked||e.isBought)},get hasAutobuyersForEditModal(){return[ti.dimboost,ti.galaxy,ti.bigCrunch,ti.eternity,ti.reality].some(e=>e.isUnlocked)},toggle(){player.auto.autobuyersOn=!player.auto.autobuyersOn},tick(){if(player.auto.autobuyersOn){PerformanceStats.start(`Autobuyers`);for(let e of ni.all)e.canTick&&e.tick();PerformanceStats.end()}},resetTick(e){let t=ni.all.filter(e=>e.resetTick!==void 0);for(let n of t)n.resetTick(e)},reset(){for(let e of ni.all)e.reset()}}}();EventHub.logic.on(GAME_EVENT.ETERNITY_RESET_AFTER,()=>ni.reset()),EventHub.logic.on(GAME_EVENT.REALITY_RESET_AFTER,()=>ni.reset()),EventHub.logic.on(GAME_EVENT.DIMBOOST_AFTER,()=>ni.resetTick(PRESTIGE_EVENT.DIMENSION_BOOST)),EventHub.logic.on(GAME_EVENT.GALAXY_RESET_AFTER,()=>ni.resetTick(PRESTIGE_EVENT.ANTIMATTER_GALAXY)),EventHub.logic.on(GAME_EVENT.BIG_CRUNCH_AFTER,()=>ni.resetTick(PRESTIGE_EVENT.INFINITY)),EventHub.logic.on(GAME_EVENT.ETERNITY_RESET_AFTER,()=>ni.resetTick(PRESTIGE_EVENT.ETERNITY)),EventHub.logic.on(GAME_EVENT.REALITY_RESET_AFTER,()=>ni.resetTick(PRESTIGE_EVENT.REALITY)),new TextEncoder;const ri={base32:new TextEncoder().encode(`ABCDEFGHIJKLMNOPQRSTUVWXYZ234567`),base32hex:new TextEncoder().encode(`0123456789ABCDEFGHIJKLMNOPQRSTUV`),base32crockford:new TextEncoder().encode(`0123456789ABCDEFGHJKMNPQRSTVWXYZ`)},ii={base32:new Uint8Array(128).fill(32),base32hex:new Uint8Array(128).fill(32),base32crockford:new Uint8Array(128).fill(32)};ri.base32.forEach((e,t)=>ii.base32[e]=t),ri.base32hex.forEach((e,t)=>ii.base32hex[e]=t),ri.base32crockford.forEach((e,t)=>ii.base32crockford[e]=t);function ai(e,t){let n=e.length;if(e.byteOffset){let t=new Uint8Array(e.buffer);t.set(e),e=t.subarray(0,n)}return e=new Uint8Array(e.buffer.transfer(t)),e.set(e.subarray(0,n),t-n),[e,t-n]}var oi=new TextEncoder().encode(`ABCDEFGHIJKLMNOPQRSTUVWXYZ234567`),si=new Uint8Array(128).fill(32);oi.forEach((e,t)=>si[e]=t),`123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz`.split(``);const ci={base64:new TextEncoder().encode(`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/`),base64url:new TextEncoder().encode(`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_`)},li={base64:new Uint8Array(128).fill(64),base64url:new Uint8Array(128).fill(64)};ci.base64.forEach((e,t)=>li.base64[e]=t),ci.base64url.forEach((e,t)=>li.base64url[e]=t);function di(e){return((e+2)/3|0)*4}function fi(e,t,n,r,i){for(t+=2;t<e.length;t+=3){let i=e[t-2]<<16|e[t-1]<<8|e[t];e[n++]=r[i>>18],e[n++]=r[i>>12&63],e[n++]=r[i>>6&63],e[n++]=r[i&63]}switch(t){case e.length+1:{let a=e[t-2]<<16;e[n++]=r[a>>18],e[n++]=r[a>>12&63],e[n++]=i,e[n++]=i;break}case e.length:{let a=e[t-2]<<16|e[t-1]<<8;e[n++]=r[a>>18],e[n++]=r[a>>12&63],e[n++]=r[a>>6&63],e[n++]=i;break}}return n}function pi(e,t,n,r,i){for(let t=e.length-2;t<e.length;++t)if(e[t]===i){for(let n=t+1;n<e.length;++n)if(e[n]!==i)throw TypeError(`Cannot decode input as base64: Invalid character (${String.fromCharCode(e[n])})`);e=e.subarray(0,t);break}if((e.length-n)%4==1)throw RangeError(`Cannot decode input as base64: Length (${e.length-n}), excluding padding, must not have a remainder of 1 when divided by 4`);for(t+=3;t<e.length;t+=4){let i=mi(e[t-3],r)<<18|mi(e[t-2],r)<<12|mi(e[t-1],r)<<6|mi(e[t],r);e[n++]=i>>16,e[n++]=i>>8&255,e[n++]=i&255}switch(t){case e.length+1:{let i=mi(e[t-3],r)<<18|mi(e[t-2],r)<<12;e[n++]=i>>16;break}case e.length:{let i=mi(e[t-3],r)<<18|mi(e[t-2],r)<<12|mi(e[t-1],r)<<6;e[n++]=i>>16,e[n++]=i>>8&255;break}}return n}function mi(e,t){let n=t[e]??64;if(n===64)throw TypeError(`Cannot decode input as base64: Invalid character (${String.fromCharCode(e)})`);return n}var hi=new TextEncoder().encode(`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/`),gi=new Uint8Array(128).fill(64);hi.forEach((e,t)=>gi[e]=t);var _i=new TextEncoder().encode(`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_`),vi=new Uint8Array(128).fill(64);_i.forEach((e,t)=>vi[e]=t);function yi(e){e=typeof e==`string`?new TextEncoder().encode(e):e instanceof ArrayBuffer?new Uint8Array(e).slice():e.slice();let[t,n]=ai(e,di(e.length)),r=fi(t,n,0,_i,61);return r=t.indexOf(61,r-2),new TextDecoder().decode(r>0?new Uint8Array(t.buffer.transfer(r)):t)}function bi(e){let t=new TextEncoder().encode(e);return new Uint8Array(t.buffer.transfer(pi(t,0,0,vi,61)))}const xi=new TextEncoder().encode(`0123456789abcdef`),Si=new Uint8Array(128).fill(16);xi.forEach((e,t)=>Si[e]=t),new TextEncoder().encode(`ABCDEF`).forEach((e,t)=>Si[e]=t+10);var Ci=new TextEncoder().encode(`0123456789abcdef`),wi=new Uint8Array(128).fill(16);Ci.forEach((e,t)=>wi[e]=t),new TextEncoder().encode(`ABCDEF`).forEach((e,t)=>wi[e]=t+10);var Ti=new ArrayBuffer(8);new Uint32Array(Ti),new BigUint64Array(Ti);var Ei=Uint8Array,Di=Uint16Array,Oi=Int32Array,ki=new Ei([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Ai=new Ei([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ji=new Ei([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Mi=function(e,t){for(var n=new Di(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];for(var i=new Oi(n[30]),r=1;r<30;++r)for(var a=n[r];a<n[r+1];++a)i[a]=a-n[r]<<5|r;return{b:n,r:i}},Ni=Mi(ki,2),Pi=Ni.b,Fi=Ni.r;Pi[28]=258,Fi[258]=28;for(var Ii=Mi(Ai,0),Li=Ii.b,Ri=Ii.r,zi=new Di(32768),Bi=0;Bi<32768;++Bi){var Vi=(Bi&43690)>>1|(Bi&21845)<<1;Vi=(Vi&52428)>>2|(Vi&13107)<<2,Vi=(Vi&61680)>>4|(Vi&3855)<<4,zi[Bi]=((Vi&65280)>>8|(Vi&255)<<8)>>1}for(var Hi=(function(e,t,n){for(var r=e.length,i=0,a=new Di(t);i<r;++i)e[i]&&++a[e[i]-1];var o=new Di(t);for(i=1;i<t;++i)o[i]=o[i-1]+a[i-1]<<1;var s;if(n){s=new Di(1<<t);var c=15-t;for(i=0;i<r;++i)if(e[i])for(var l=i<<4|e[i],u=t-e[i],d=o[e[i]-1]++<<u,f=d|(1<<u)-1;d<=f;++d)s[zi[d]>>c]=l}else for(s=new Di(r),i=0;i<r;++i)e[i]&&(s[i]=zi[o[e[i]-1]++]>>15-e[i]);return s}),Ui=new Ei(288),Bi=0;Bi<144;++Bi)Ui[Bi]=8;for(var Bi=144;Bi<256;++Bi)Ui[Bi]=9;for(var Bi=256;Bi<280;++Bi)Ui[Bi]=7;for(var Bi=280;Bi<288;++Bi)Ui[Bi]=8;for(var Wi=new Ei(32),Bi=0;Bi<32;++Bi)Wi[Bi]=5;var Gi=Hi(Ui,9,0),Ki=Hi(Ui,9,1),qi=Hi(Wi,5,0),Ji=Hi(Wi,5,1),Yi=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},Xi=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(t&7)&n},Zi=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(t&7)},Qi=function(e){return(e+7)/8|0},$i=function(e,t,n){return(t==null||t<0)&&(t=0),(n==null||n>e.length)&&(n=e.length),new Ei(e.subarray(t,n))},ea=[`unexpected EOF`,`invalid block type`,`invalid length/literal`,`invalid distance`,`stream finished`,`no stream handler`,,`no callback`,`invalid UTF-8 data`,`extra field too long`,`date not in range 1980-2099`,`filename too long`,`stream finishing`,`invalid zip data`],ta=function(e,t,n){var r=Error(t||ea[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,ta),!n)throw r;return r},na=function(e,t,n,r){var i=e.length,a=r?r.length:0;if(!i||t.f&&!t.l)return n||new Ei(0);var o=!n,s=o||t.i!=2,c=t.i;o&&(n=new Ei(i*3));var l=function(e){var t=n.length;if(e>t){var r=new Ei(Math.max(t*2,e));r.set(n),n=r}},u=t.f||0,d=t.p||0,f=t.b||0,p=t.l,m=t.d,h=t.m,g=t.n,_=i*8;do{if(!p){u=Xi(e,d,1);var v=Xi(e,d+1,3);if(d+=3,v)if(v==1)p=Ki,m=Ji,h=9,g=5;else if(v==2){var y=Xi(e,d,31)+257,b=Xi(e,d+10,15)+4,x=y+Xi(e,d+5,31)+1;d+=14;for(var S=new Ei(x),C=new Ei(19),w=0;w<b;++w)C[ji[w]]=Xi(e,d+w*3,7);d+=b*3;for(var T=Yi(C),E=(1<<T)-1,D=Hi(C,T,1),w=0;w<x;){var O=D[Xi(e,d,E)];d+=O&15;var k=O>>4;if(k<16)S[w++]=k;else{var A=0,ee=0;for(k==16?(ee=3+Xi(e,d,3),d+=2,A=S[w-1]):k==17?(ee=3+Xi(e,d,7),d+=3):k==18&&(ee=11+Xi(e,d,127),d+=7);ee--;)S[w++]=A}}var te=S.subarray(0,y),j=S.subarray(y);h=Yi(te),g=Yi(j),p=Hi(te,h,1),m=Hi(j,g,1)}else ta(1);else{var k=Qi(d)+4,ne=e[k-4]|e[k-3]<<8,re=k+ne;if(re>i){c&&ta(0);break}s&&l(f+ne),n.set(e.subarray(k,re),f),t.b=f+=ne,t.p=d=re*8,t.f=u;continue}if(d>_){c&&ta(0);break}}s&&l(f+131072);for(var ie=(1<<h)-1,M=(1<<g)-1,N=d;;N=d){var A=p[Zi(e,d)&ie],P=A>>4;if(d+=A&15,d>_){c&&ta(0);break}if(A||ta(2),P<256)n[f++]=P;else if(P==256){N=d,p=null;break}else{var F=P-254;if(P>264){var w=P-257,I=ki[w];F=Xi(e,d,(1<<I)-1)+Pi[w],d+=I}var L=m[Zi(e,d)&M],R=L>>4;L||ta(3),d+=L&15;var j=Li[R];if(R>3){var I=Ai[R];j+=Zi(e,d)&(1<<I)-1,d+=I}if(d>_){c&&ta(0);break}s&&l(f+131072);var ae=f+F;if(f<j){var oe=a-j,se=Math.min(j,ae);for(oe+f<0&&ta(3);f<se;++f)n[f]=r[oe+f]}for(;f<ae;++f)n[f]=n[f-j]}}t.l=p,t.p=N,t.b=f,t.f=u,p&&(u=1,t.m=h,t.d=m,t.n=g)}while(!u);return f!=n.length&&o?$i(n,0,f):n.subarray(0,f)},ra=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8},ia=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8,e[r+2]|=n>>16},aa=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var i=n.length,a=n.slice();if(!i)return{t:fa,l:0};if(i==1){var o=new Ei(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(e,t){return e.f-t.f}),n.push({s:-1,f:25001});var s=n[0],c=n[1],l=0,u=1,d=2;for(n[0]={s:-1,f:s.f+c.f,l:s,r:c};u!=i-1;)s=n[n[l].f<n[d].f?l++:d++],c=n[l!=u&&n[l].f<n[d].f?l++:d++],n[u++]={s:-1,f:s.f+c.f,l:s,r:c};for(var f=a[0].s,r=1;r<i;++r)a[r].s>f&&(f=a[r].s);var p=new Di(f+1),m=oa(n[u-1],p,0);if(m>t){var r=0,h=0,g=m-t,_=1<<g;for(a.sort(function(e,t){return p[t.s]-p[e.s]||e.f-t.f});r<i;++r){var v=a[r].s;if(p[v]>t)h+=_-(1<<m-p[v]),p[v]=t;else break}for(h>>=g;h>0;){var y=a[r].s;p[y]<t?h-=1<<t-p[y]++-1:++r}for(;r>=0&&h;--r){var b=a[r].s;p[b]==t&&(--p[b],++h)}m=t}return{t:new Ei(p),l:m}},oa=function(e,t,n){return e.s==-1?Math.max(oa(e.l,t,n+1),oa(e.r,t,n+1)):t[e.s]=n},sa=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new Di(++t),r=0,i=e[0],a=1,o=function(e){n[r++]=e},s=1;s<=t;++s)if(e[s]==i&&s!=t)++a;else{if(!i&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(i),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(i);a=1,i=e[s]}return{c:n.subarray(0,r),n:t}},ca=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},la=function(e,t,n){var r=n.length,i=Qi(t+2);e[i]=r&255,e[i+1]=r>>8,e[i+2]=e[i]^255,e[i+3]=e[i+1]^255;for(var a=0;a<r;++a)e[i+a+4]=n[a];return(i+4+r)*8},ua=function(e,t,n,r,i,a,o,s,c,l,u){ra(t,u++,n),++i[256];for(var d=aa(i,15),f=d.t,p=d.l,m=aa(a,15),h=m.t,g=m.l,_=sa(f),v=_.c,y=_.n,b=sa(h),x=b.c,S=b.n,C=new Di(19),w=0;w<v.length;++w)++C[v[w]&31];for(var w=0;w<x.length;++w)++C[x[w]&31];for(var T=aa(C,7),E=T.t,D=T.l,O=19;O>4&&!E[ji[O-1]];--O);var k=l+5<<3,A=ca(i,Ui)+ca(a,Wi)+o,ee=ca(i,f)+ca(a,h)+o+14+3*O+ca(C,E)+2*C[16]+3*C[17]+7*C[18];if(c>=0&&k<=A&&k<=ee)return la(t,u,e.subarray(c,c+l));var te,j,ne,re;if(ra(t,u,1+(ee<A)),u+=2,ee<A){te=Hi(f,p,0),j=f,ne=Hi(h,g,0),re=h;var ie=Hi(E,D,0);ra(t,u,y-257),ra(t,u+5,S-1),ra(t,u+10,O-4),u+=14;for(var w=0;w<O;++w)ra(t,u+3*w,E[ji[w]]);u+=3*O;for(var M=[v,x],N=0;N<2;++N)for(var P=M[N],w=0;w<P.length;++w){var F=P[w]&31;ra(t,u,ie[F]),u+=E[F],F>15&&(ra(t,u,P[w]>>5&127),u+=P[w]>>12)}}else te=Gi,j=Ui,ne=qi,re=Wi;for(var w=0;w<s;++w){var I=r[w];if(I>255){var F=I>>18&31;ia(t,u,te[F+257]),u+=j[F+257],F>7&&(ra(t,u,I>>23&31),u+=ki[F]);var L=I&31;ia(t,u,ne[L]),u+=re[L],L>3&&(ia(t,u,I>>5&8191),u+=Ai[L])}else ia(t,u,te[I]),u+=j[I]}return ia(t,u,te[256]),u+j[256]},da=new Oi([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),fa=new Ei(0),pa=function(e,t,n,r,i,a){var o=a.z||e.length,s=new Ei(r+o+5*(1+Math.ceil(o/7e3))+i),c=s.subarray(r,s.length-i),l=a.l,u=(a.r||0)&7;if(t){u&&(c[0]=a.r>>3);for(var d=da[t-1],f=d>>13,p=d&8191,m=(1<<n)-1,h=a.p||new Di(32768),g=a.h||new Di(m+1),_=Math.ceil(n/3),v=2*_,y=function(t){return(e[t]^e[t+1]<<_^e[t+2]<<v)&m},b=new Oi(25e3),x=new Di(288),S=new Di(32),C=0,w=0,T=a.i||0,E=0,D=a.w||0,O=0;T+2<o;++T){var k=y(T),A=T&32767,ee=g[k];if(h[A]=ee,g[k]=A,D<=T){var te=o-T;if((C>7e3||E>24576)&&(te>423||!l)){u=ua(e,c,0,b,x,S,w,E,O,T-O,u),E=C=w=0,O=T;for(var j=0;j<286;++j)x[j]=0;for(var j=0;j<30;++j)S[j]=0}var ne=2,re=0,ie=p,M=A-ee&32767;if(te>2&&k==y(T-M))for(var N=Math.min(f,te)-1,P=Math.min(32767,T),F=Math.min(258,te);M<=P&&--ie&&A!=ee;){if(e[T+ne]==e[T+ne-M]){for(var I=0;I<F&&e[T+I]==e[T+I-M];++I);if(I>ne){if(ne=I,re=M,I>N)break;for(var L=Math.min(M,I-2),R=0,j=0;j<L;++j){var ae=T-M+j&32767,oe=h[ae],se=ae-oe&32767;se>R&&(R=se,ee=ae)}}}A=ee,ee=h[A],M+=A-ee&32767}if(re){b[E++]=268435456|Fi[ne]<<18|Ri[re];var ce=Fi[ne]&31,le=Ri[re]&31;w+=ki[ce]+Ai[le],++x[257+ce],++S[le],D=T+ne,++C}else b[E++]=e[T],++x[e[T]]}}for(T=Math.max(T,D);T<o;++T)b[E++]=e[T],++x[e[T]];u=ua(e,c,l,b,x,S,w,E,O,T-O,u),l||(a.r=u&7|c[u/8|0]<<3,u-=7,a.h=g,a.p=h,a.i=T,a.w=D)}else{for(var T=a.w||0;T<o+l;T+=65535){var ue=T+65535;ue>=o&&(c[u/8|0]=l,ue=o),u=la(c,u+1,e.subarray(T,ue))}a.i=o}return $i(s,0,r+Qi(u)+i)},ma=function(e,t,n,r,i){if(!i&&(i={l:1},t.dictionary)){var a=t.dictionary.subarray(-32768),o=new Ei(a.length+e.length);o.set(a),o.set(e,a.length),e=o,i.w=a.length}return pa(e,t.level==null?6:t.level,t.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,n,r,i)};function ha(e,t){return ma(e,t||{},0,0)}function ga(e,t){return na(e,{i:2},t&&t.out,t&&t.dictionary)}var _a=typeof TextEncoder<`u`&&new TextEncoder,va=typeof TextDecoder<`u`&&new TextDecoder;try{va.decode(fa,{stream:!0})}catch{}var ya=function(e){for(var t=``,n=0;;){var r=e[n++],i=(r>127)+(r>223)+(r>239);if(n+i>e.length)return{s:t,r:$i(e,n-1)};i?i==3?(r=((r&15)<<18|(e[n++]&63)<<12|(e[n++]&63)<<6|e[n++]&63)-65536,t+=String.fromCharCode(55296|r>>10,56320|r&1023)):i&1?t+=String.fromCharCode((r&31)<<6|e[n++]&63):t+=String.fromCharCode((r&15)<<12|(e[n++]&63)<<6|e[n++]&63):t+=String.fromCharCode(r)}};function ba(e,t){if(t){for(var n=new Ei(e.length),r=0;r<e.length;++r)n[r]=e.charCodeAt(r);return n}if(_a)return _a.encode(e);for(var i=e.length,a=new Ei(e.length+(e.length>>1)),o=0,s=function(e){a[o++]=e},r=0;r<i;++r){if(o+5>a.length){var c=new Ei(o+8+(i-r<<1));c.set(a),a=c}var l=e.charCodeAt(r);l<128||t?s(l):l<2048?(s(192|l>>6),s(128|l&63)):l>55295&&l<57344?(l=65536+(l&1047552)|e.charCodeAt(++r)&1023,s(240|l>>18),s(128|l>>12&63),s(128|l>>6&63),s(128|l&63)):(s(224|l>>12),s(128|l>>6&63),s(128|l&63))}return $i(a,0,o)}function xa(e,t){if(t){for(var n=``,r=0;r<e.length;r+=16384)n+=String.fromCharCode.apply(null,e.subarray(r,r+16384));return n}else if(va)return va.decode(e);else{var i=ya(e),a=i.s,n=i.r;return n.length&&ta(8),a}}const Sa={serialize(e){let t=JSON.stringify(e,this.jsonConverter);return this.encodeText(t,`savefile`)},jsonConverter(e,t){return t===1/0?`Infinity`:t instanceof Set?[...t.keys()]:t},deserialize(e){if(typeof e==`string`)try{let t=this.decodeText(e,`savefile`);return JSON.parse(t,(e,t)=>t===1/0?`Infinity`:t)}catch{return}},startingString:{savefile:`AntimatterDimensionsSavefileFormat`,"automator script":`AntimatterDimensionsAutomatorScriptFormat`,"automator data":`AntimatterDimensionsAutomatorDataFormat`,"glyph filter":`AntimatterDimensionsGlyphFilterFormat`},endingString:{savefile:`EndOfSavefile`,"automator script":`EndOfAutomatorScript`,"automator data":`EndOfAutomatorData`,"glyph filter":`EndOfGlyphFilter`},version:`AAD`,steps:[{encode:e=>ba(e),decode:e=>xa(e)},{encode:e=>ha(e),decode:e=>ga(e)},{encode:e=>yi(e),decode:e=>bi(e)},{encode:(e,t)=>e+Sa.endingString[t],decode:(e,t)=>e.slice(0,e.length-Sa.endingString[t].length),condition:e=>e>=`AAB`}],getSteps(e,t){return this.steps.filter(e=>!e.condition||e.condition(t)).concat({encode:t=>`${Sa.startingString[e]+Sa.version}${t}`,decode:t=>t.slice(Sa.startingString[e].length+3)})},encodeText(e,t){return this.getSteps(t,this.version).reduce((e,n)=>n.encode(e,t),e)},decodeText(e,t){if(e.startsWith(this.startingString[t])){let n=this.startingString[t].length,r=e.slice(n,n+3);return this.getSteps(t,r).reduceRight((e,n)=>n.decode(e,t),e)}return atob(e)}};var Ca=function(e,t){return Ca=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Ca(e,t)};function wa(e,t){if(typeof t!=`function`&&t!==null)throw TypeError(`Class extends value `+String(t)+` is not a constructor or null`);Ca(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function Ta(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols==`function`)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var Ea=t({AllNotation:()=>rs,BarNotation:()=>Ko,BlindNotation:()=>ts,BlobsNotation:()=>es,BracketsNotation:()=>io,ClockNotation:()=>Ao,CustomNotation:()=>Ka,DotsNotation:()=>po,EmojiNotation:()=>Ya,EngineeringNotation:()=>Ga,HexNotation:()=>yo,ImperialNotation:()=>Do,InfinityNotation:()=>ao,LettersNotation:()=>qa,LogarithmNotation:()=>to,MixedEngineeringNotation:()=>eo,MixedLogarithmSciNotation:()=>ro,MixedScientificNotation:()=>Qa,Notation:()=>Ua,PrimeNotation:()=>Ho,RomanNotation:()=>uo,ScientificNotation:()=>Wa,Settings:()=>Da,ShiNotation:()=>Jo,StandardNotation:()=>Xa,ZalgoNotation:()=>_o,abbreviateStandard:()=>Fa,formatMantissa:()=>Ha,formatMantissaBaseTen:()=>Va,formatMantissaWithExponent:()=>Ba}),Da={isInfinite:function(e){return e.gte(new W(`1e9000000000000000`))},exponentCommas:{show:!0,min:1e5,max:1e9},exponentDefaultPlaces:3};function Oa(e,t){return t===0?e.slice(-3):e.slice(-3*(t+1),-3*t)}function ka(e){return Array.from(Array(Math.ceil(e.length/3))).map(function(t,n){return Oa(e,n)}).reverse().join(`,`)}function Aa(e){var t=e.toString().split(`.`);return t[0]=t[0].replace(/\w+$/g,ka),t.join(`.`)}function ja(e){var t=e.exponent%3;return W.fromMantissaExponent_noNormalize(e.mantissa*10**t,e.exponent-t)}var Ma=[`K`,`M`,`B`,`T`,`Qa`,`Qt`,`Sx`,`Sp`,`Oc`,`No`],Na=[[``,`U`,`D`,`T`,`Qa`,`Qt`,`Sx`,`Sp`,`O`,`N`],[``,`Dc`,`Vg`,`Tg`,`Qd`,`Qi`,`Se`,`St`,`Og`,`Nn`],[``,`Ce`,`Dn`,`Tc`,`Qe`,`Qu`,`Sc`,`Si`,`Oe`,`Ne`]],Pa=[``,`MI-`,`MC-`,`NA-`,`PC-`,`FM-`,`AT-`,`ZP-`];function Fa(e){var t=e-1;if(t===-1)return``;if(t<Ma.length)return Ma[t];for(var n=[],r=t;r>0;)n.push(Na[n.length%3][r%10]),r=Math.floor(r/10);for(;n.length%3!=0;)n.push(``);for(var i=``,a=n.length/3-1;a>=0;a--)i+=n.slice(a*3,a*3+3).join(``)+Pa[a];return i.replace(/-[A-Z]{2}-/g,`-`).replace(/U([A-Z]{2}-)/g,`$1`).replace(/-$/,``)}function Ia(e){return e<Da.exponentCommas.min}function La(e){return Da.exponentCommas.show&&e<Da.exponentCommas.max}function za(e){return Ia(e)||La(e)}function Ba(e,t,n,r,i,a,o){return a===void 0&&(a=`e`),o===void 0&&(o=!1),function(s,c,l){var u=n**+r,d=Math.floor(s.exponent/Math.log10(u))*r;o&&(d=Math.max(d,0));var f=s.div(W.pow(n,d)).toNumber();if(!(1<=f&&f<u)){var p=Math.floor(Math.log(f)/Math.log(u));f/=u**+p,d+=r*p}var m=e(f,c);if(m===e(u,c)&&(m=e(1,c),d+=r),d===0)return m;var h=t(d,l);return i!==void 0&&!za(d)&&(m=i(f,c)),`${za(d)?`${m}${a}${h}`:`${a}${h}`}`}}function Va(e,t){return e.toFixed(Math.max(0,t))}function Ha(e,t){return function(n,r){for(var i=Math.round(n*e**+Math.max(0,r)),a=[];i>0||a.length===0;)a.push(t[i%e]),i=Math.floor(i/e);var o=a.reverse().join(``);return r>0&&(o=o.padStart(r+1,`0`),o=`${o.slice(0,-r)}.${o.slice(-r)}`),o}}var Ua=function(){function e(){}return e.prototype.format=function(e,t,n,r){if(t===void 0&&(t=0),n===void 0&&(n=0),r===void 0&&(r=t),typeof e==`number`&&!Number.isFinite(e))return this.infinite;var i=W.fromValue_noAlloc(e);if(i.exponent<-300)return i.sign<0?this.formatVerySmallNegativeDecimal(i.abs(),n):this.formatVerySmallDecimal(i,n);if(i.exponent<3){var a=i.toNumber();return a<0?this.formatNegativeUnder1000(Math.abs(a),n):this.formatUnder1000(a,n)}return Da.isInfinite(i.abs())?i.sign<0?this.negativeInfinite:this.infinite:i.sign<0?this.formatNegativeDecimal(i.abs(),t,r):this.formatDecimal(i,t,r)},Object.defineProperty(e.prototype,`negativeInfinite`,{get:function(){return`-${this.infinite}`},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,`infinite`,{get:function(){return`Infinite`},enumerable:!1,configurable:!0}),e.prototype.formatVerySmallNegativeDecimal=function(e,t){return`-${this.formatVerySmallDecimal(e,t)}`},e.prototype.formatVerySmallDecimal=function(e,t){return this.formatUnder1000(e.toNumber(),t)},e.prototype.formatNegativeUnder1000=function(e,t){return`-${this.formatUnder1000(e,t)}`},e.prototype.formatUnder1000=function(e,t){return e.toFixed(t)},e.prototype.formatNegativeDecimal=function(e,t,n){return`-${this.formatDecimal(e,t,n)}`},e.prototype.formatExponent=function(e,t,n,r){return t===void 0&&(t=Da.exponentDefaultPlaces),n===void 0&&(n=function(e,t){return e.toString()}),r===void 0&&(r=Math.max(2,t)),Ia(e)?n(e,Math.max(t,1)):La(e)?Aa(n(e,0)):this.format(e,r,r)},e}(),Wa=function(e){wa(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t.prototype,`name`,{get:function(){return`Scientific`},enumerable:!1,configurable:!0}),t.prototype.formatDecimal=function(e,t,n){return Ba(Va,this.formatExponent.bind(this),10,1,function(e,t){return Va(e,0)})(e,t,n)},t}(Ua),Ga=function(e){wa(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t.prototype,`name`,{get:function(){return`Engineering`},enumerable:!1,configurable:!0}),t.prototype.formatDecimal=function(e,t,n){return Ba(Va,this.formatExponent.bind(this),10,3,function(e,t){return Va(e,0)})(e,t,n)},t}(Ua),Ka=function(e){wa(t,e);function t(t,n,r){n===void 0&&(n=``),r===void 0&&(r=``);var i=this;if(t.length<2)throw Error(`The supplied letter sequence must contain at least 2 letters`);return i=e.call(this)||this,i.letters=t,i.mantissaExponentSeparator=n,i.separator=r,i}return Object.defineProperty(t.prototype,`name`,{get:function(){return`Custom`},enumerable:!1,configurable:!0}),t.prototype.formatDecimal=function(e,t){var n=ja(e);return n.mantissa.toFixed(t)+this.mantissaExponentSeparator+this.transcribe(n.exponent).join(this.separator)},t.prototype.transcribe=function(e){var t=e/3,n=this.letters.length;if(t<=n)return[this.letters[t-1]];for(var r=[];t>n;){var i=t%n,a=(i===0?n:i)-1;r.push(this.letters[a]),t=(t-i)/n,i===0&&t--}return r.push(this.letters[t-1]),r.reverse()},t}(Ga),qa=function(e){wa(t,e);function t(){return e.call(this,`abcdefghijklmnopqrstuvwxyz`)||this}return Object.defineProperty(t.prototype,`name`,{get:function(){return`Letters`},enumerable:!1,configurable:!0}),t}(Ka),Ja=`😠.🎂.🎄.💀.🍆.👪.🌈.💯.🍦.🎃.💋.😂.🌙.⛔.🐙.💩.❓.☢.🙈.👍.☂.✌.⚠.❌.😋.⚡`.split(`.`),Ya=function(e){wa(t,e);function t(){return e.call(this,Ja)||this}return Object.defineProperty(t.prototype,`name`,{get:function(){return`Emoji`},enumerable:!1,configurable:!0}),t}(Ka),Xa=function(e){wa(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.name=`Standard`,t}return t.prototype.formatDecimal=function(e,t,n){return Ba(Va,Fa,1e3,1,void 0,` `,!0)(e,t,n)},t}(Ua),Za=new Xa,Qa=function(e){wa(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t.prototype,`name`,{get:function(){return`Mixed scientific`},enumerable:!1,configurable:!0}),t.prototype.formatDecimal=function(e,t,n){return e.exponent<33?Za.formatDecimal(e,t,n):Ba(Va,this.formatExponent.bind(this),10,1,function(e,t){return Va(e,0)})(e,t,n)},t}(Ua),$a=new Xa,eo=function(e){wa(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t.prototype,`name`,{get:function(){return`Mixed engineering`},enumerable:!1,configurable:!0}),t.prototype.formatDecimal=function(e,t,n){return e.max(1).exponent<33?$a.formatDecimal(e,t,n):Ba(Va,this.formatExponent.bind(this),10,3,function(e,t){return Va(e,0)})(e,t,n)},t}(Ua),to=function(e){wa(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t.prototype,`name`,{get:function(){return`Logarithm`},enumerable:!1,configurable:!0}),t.prototype.formatDecimal=function(e,t,n){var r=e.exponent;return`e${this.formatExponent(r,t,function(e,t){return e.toFixed(t)},n)}`},t}(Ua),no=new Wa,ro=function(e){wa(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t.prototype,`name`,{get:function(){return`Mixed Logarithm (Sci)`},enumerable:!1,configurable:!0}),t.prototype.formatDecimal=function(e,t,n){if(e.lt(1e33))return no.formatDecimal(e,t,n);var r=e.exponent;return`e${this.formatExponent(r,t,function(e,t){return e.toFixed(t)},n)}`},t}(Ua),io=function(e){wa(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t.prototype,`name`,{get:function(){return`Brackets`},enumerable:!1,configurable:!0}),t.prototype.formatDecimal=function(e){for(var t=[`)`,`[`,`{`,`]`,`(`,`}`],n=Math.LN10/Math.log(6)*e.exponent,r=Math.floor(n),i=n-r,a=Math.floor(i*36),o=``;r>=6;){var s=r%6;r-=s,r/=6,o=t[s]+o}return o=`e${t[r]}${o}.`,o+=t[Math.floor(a/6)],o+=t[a%6],o},t}(Ua),ao=function(e){wa(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t.prototype,`name`,{get:function(){return`Infinity`},enumerable:!1,configurable:!0}),t.prototype.formatDecimal=function(e,t){var n=e.log(Number.MAX_VALUE),r=n.lt(1e3)?4:3,i=n.toFixed(Math.max(r,t));return Da.exponentCommas.show?`${Aa(i)}∞`:`${i}∞`},t}(Ua),oo=[[1e6,`M̄`],[9e5,`C̄M̄`],[5e5,`D̄`],[4e5,`C̄D̄`],[1e5,`C̄`],[9e4,`X̄C̄`],[5e4,`L̄`],[4e4,`X̄L̄`],[1e4,`X̄`],[9e3,`ⅯX̄`],[5e3,`V̄`],[4e3,`ⅯV̄`],[1e3,`Ⅿ`],[900,`ⅭⅯ`],[500,`Ⅾ`],[400,`ⅭⅮ`],[100,`Ⅽ`],[90,`ⅩⅭ`],[50,`Ⅼ`],[40,`ⅩⅬ`],[10,`Ⅹ`],[9,`ⅠⅩ`],[5,`Ⅴ`],[4,`ⅠⅤ`],[1,`Ⅰ`]],so=[``,`·`,`:`,`∴`,`∷`,`⁙`],co=4e6,lo=Math.log10(co),uo=function(e){wa(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t.prototype,`name`,{get:function(){return`Roman`},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`infinite`,{get:function(){return`Infinitus`},enumerable:!1,configurable:!0}),t.prototype.formatUnder1000=function(e){return this.romanize(e)},t.prototype.formatDecimal=function(e){if(e.lt(4e6))return this.romanize(e.toNumber());var t=e.exponent/lo,n=co**+(t-Math.floor(t));return`${this.romanize(n)}↑${this.formatDecimal(new W(t))}`},t.prototype.romanize=function(e){for(var t=``,n=0,r=oo;n<r.length;n++)for(var i=r[n],a=i[0],o=i[1];a<=e;)t+=o,e-=a;var s=Math.round(Math.floor(e*10)*1.2);return s===0?t===``?`nulla`:t:(s>5&&(s-=6,t+=`Ｓ`),t+=so[s],t)},t}(Ua),fo=`⠀⠁⠂⠃⠄⠅⠆⠇⠈⠉⠊⠋⠌⠍⠎⠏⠐⠑⠒⠓⠔⠕⠖⠗⠘⠙⠚⠛⠜⠝⠞⠟⠠⠡⠢⠣⠤⠥⠦⠧⠨⠩⠪⠫⠬⠭⠮⠯⠰⠱⠲⠳⠴⠵⠶⠷⠸⠹⠺⠻⠼⠽⠾⠿⡀⡁⡂⡃⡄⡅⡆⡇⡈⡉⡊⡋⡌⡍⡎⡏⡐⡑⡒⡓⡔⡕⡖⡗⡘⡙⡚⡛⡜⡝⡞⡟⡠⡡⡢⡣⡤⡥⡦⡧⡨⡩⡪⡫⡬⡭⡮⡯⡰⡱⡲⡳⡴⡵⡶⡷⡸⡹⡺⡻⡼⡽⡾⡿⢀⢁⢂⢃⢄⢅⢆⢇⢈⢉⢊⢋⢌⢍⢎⢏⢐⢑⢒⢓⢔⢕⢖⢗⢘⢙⢚⢛⢜⢝⢞⢟⢠⢡⢢⢣⢤⢥⢦⢧⢨⢩⢪⢫⢬⢭⢮⢯⢰⢱⢲⢳⢴⢵⢶⢷⢸⢹⢺⢻⢼⢽⢾⢿⣀⣁⣂⣃⣄⣅⣆⣇⣈⣉⣊⣋⣌⣍⣎⣏⣐⣑⣒⣓⣔⣕⣖⣗⣘⣙⣚⣛⣜⣝⣞⣟⣠⣡⣢⣣⣤⣥⣦⣧⣨⣩⣪⣫⣬⣭⣮⣯⣰⣱⣲⣳⣴⣵⣶⣷⣸⣹⣺⣻⣼⣽⣾⣿`,po=function(e){wa(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t.prototype,`name`,{get:function(){return`Dots`},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`infinite`,{get:function(){return`⣿⠀⣿`},enumerable:!1,configurable:!0}),t.prototype.formatUnder1000=function(e){return this.dotify(e*254)},t.prototype.formatDecimal=function(e){if(e.lt(16387063.9980315))return this.dotify(e.toNumber()*254);var t=e.exponent/Math.log10(254),n=Math.floor(t-2),r=254**(t-n);return`${this.dotify(n)}⣿${this.dotify(r*254)}`},t.prototype.dotify=function(e,t){t===void 0&&(t=!1);var n=Math.round(e);return!t&&n<254?fo[n+1]:n<64516?fo[Math.floor(n/254)+1]+fo[n%254+1]:this.dotify(Math.floor(n/64516))+this.dotify(n%64516,!0)},t}(Ua),mo=[`̍`,`̶`,`͓`,`̿`,`҉`,`̰`,`̚`,`̸`,`͚`,`̷`],ho=[`H`,`E`,` `,`C`,`O`,`M`,`E`,`S`];function go(e){return e[Math.floor(Math.random()*e.length)]}for(var _o=function(e){wa(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t.prototype,`name`,{get:function(){return`Zalgo`},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`infinite`,{get:function(){return ho.map(function(e){return e+go(mo)}).join(``)},enumerable:!1,configurable:!0}),t.prototype.formatUnder1000=function(e){return this.heComes(new W(e))},t.prototype.formatDecimal=function(e){return this.heComes(e)},t.prototype.heComes=function(e){for(var t=(e.plus(1).exponent+Math.log(Math.max(e.mantissa,1)))/66666*1e3,n=Number(t.toFixed(2)),r=Math.floor(Math.abs(2**30*(t-n))),i=Array.from(Aa(n)),a=Array.from(r.toString()+t.toFixed(0)),o=0;o<a.length;o++){var s=parseInt(a[o],10),c=37*o%i.length;i[c]+=mo[s]}return i.join(``)},t}(Ua),vo={positive:0,negative:1},yo=function(e){wa(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t.prototype,`name`,{get:function(){return`Hex`},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`negativeInfinite`,{get:function(){return`00000000`},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`infinite`,{get:function(){return`FFFFFFFF`},enumerable:!1,configurable:!0}),t.prototype.formatVerySmallNegativeDecimal=function(e){return this.formatDecimal(e.negate())},t.prototype.formatVerySmallDecimal=function(e){return this.formatDecimal(e)},t.prototype.formatNegativeUnder1000=function(e){return this.formatDecimal(new W(-e))},t.prototype.formatUnder1000=function(e){return this.formatDecimal(new W(e))},t.prototype.formatNegativeDecimal=function(e){return this.formatDecimal(e.negate())},t.prototype.formatDecimal=function(e){return this.rawValue(e,32).toString(16).toUpperCase().padStart(8,`0`)},t.prototype.modifiedLogarithm=function(e){var t=Math.floor(e.exponent/Math.log10(2)),n=W.pow(2,t),r=W.div(e,n).toNumber()-1;return t+r},t.prototype.isFinite=function(e){return typeof e==`number`?isFinite(e):isFinite(e.e)&&isFinite(e.mantissa)},t.prototype.rawValue=function(e,t){for(var n=e,r=[],i=0;i<t&&this.isFinite(n);i++)W.lt(n,0)?(r.push(vo.negative),n=-this.modifiedLogarithm(W.times(n,-1))):(r.push(vo.positive),n=this.modifiedLogarithm(n));var a=parseInt(r.map(function(e){return e===vo.positive?1:0}).join(``).padEnd(t,`0`),2);return a!==2**t-1&&(n>0||n===0&&a%2==1)&&(a+=1),a},t}(Ua),bo=[[0,`pL`,0],[61611520,`minim`,0],[61611520*60,`dram`,1],[61611520*60*8,`ounce`,2],[61611520*60*8*4,`gill`,2],[61611520*60*8*4*2,`cup`,3],[61611520*60*8*4*2*2,`pint`,4],[61611520*60*8*4*2*2*2,`quart`,4],[61611520*60*8*4*2*2*2*4,`gallon`,4],[61611520*60*8*4*2*2*2*4*4.5,`pin`,3],[61611520*60*8*4*2*2*2*4*9,`firkin`,3],[61611520*60*8*4*2*2*2*4*18,`kilderkin`,4],[61611520*60*8*4*2*2*2*4*36,`barrel`,4],[61611520*60*8*4*2*2*2*4*54,`hogshead`,5],[61611520*60*8*4*2*2*2*4*72,`puncheon`,6],[61611520*60*8*4*2*2*2*4*108,`butt`,7],[61611520*60*8*4*2*2*2*4*216,`tun`,7]],xo=bo[1],So=[`minute `,`tiny `,`petite `,`small `,`modest `,`medium `,`generous `,`large `,`great `,`grand `,`huge `,`gigantic `,`immense `,`colossal `,`vast `,`galactic `,`cosmic `,`infinite `,`eternal `],Co=new Set(`aeiouAEIOU`),wo=10*bo[bo.length-1][0],To=Math.log10(wo),Eo=Math.log10(wo/xo[0]),Do=function(e){wa(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t.prototype,`name`,{get:function(){return`Imperial`},enumerable:!1,configurable:!0}),t.prototype.formatUnder1000=function(e){return this.formatDecimal(new W(e))},t.prototype.formatDecimal=function(e){if(e.lt(wo))return this.convertToVolume(e.toNumber(),So[0]);for(var t=e.log10().toNumber()-To,n=1;t>Eo;)n++,t/=Eo;return this.convertToVolume(10**t*xo[0],So[n])},t.prototype.convertToVolume=function(e,t){var n=this.findVolumeUnit(e);if(n===0)return this.formatMetric(e);var r=this.checkSmallUnits(t,e,n);if(r!==void 0)return r;var i=bo[n],a=Math.floor(e/i[0]),o=e-a*i[0];if(n<bo.length-1){var s=this.checkAlmost(t,e,0,n+1);if(s!==void 0)return s}var c=this.checkAlmost(t,o,a,n);if(c!==void 0)return c;if(o<bo[n-i[2]][0])return this.pluralOrArticle(a,t+i[1]);for(var l=Math.floor(o/bo[n-1][0]),u=n-1,d=o-l*bo[n-1][0],f=n-2;f>0&&f>n-i[2];--f){var p=bo[f],m=Math.floor(o/p[0]);if(m>9&&f!==1)break;var h=o-m*p[0];h<.99*d&&(l=m,u=f,d=h)}return this.bigAndSmall(t,a,i,l,bo[u])},t.prototype.formatMetric=function(e){return e<1e3?`${e<10||e===Math.round(e)?e.toFixed(2):e.toFixed(0)}pL`:e<1e6?`${(e/1e3).toPrecision(4)}nL`:`${(e/1e6).toPrecision(4)}μL`},t.prototype.checkSmallUnits=function(e,t,n){var r=bo[n];if(n<=3&&t+9.5*xo[0]>bo[n+1][0])return this.almostOrShortOf(t,e,1,bo[n+1],xo);if(n===1){var i=Math.round(t*10/r[0]);if(i===10)return this.addArticle(e+r[1]);var a=i<100?1:0;return`${(i/10).toFixed(a)} ${e}${r[1]}s`}if(n===2){var o=Math.floor(t/r[0]),s=t-o*r[0];if(s>50.5*xo[0])return this.almostOrShortOf(t,e,o+1,r,xo);var c=Math.round(s/xo[0]);return this.bigAndSmall(e,o,r,c,xo)}},t.prototype.findVolumeUnit=function(e){for(var t=0,n=bo.length,r=0;n-t>1;)r=Math.floor((t+n)/2),bo[r][0]>e?n=r:t=r;return t},t.prototype.checkAlmost=function(e,t,n,r){var i=bo[r];if(t+bo[r-i[2]][0]>=i[0])return this.almost(e,n+1,i);var a=bo[r+1-i[2]];if(t+a[0]>=i[0])return this.shortOf(e,n+1,i,1,a)},t.prototype.bigAndSmall=function(e,t,n,r,i){var a=this.pluralOrArticle(t,e+n[1]);return r===0?a:`${a} and ${this.pluralOrArticle(r,i[1])}`},t.prototype.almost=function(e,t,n){return`almost ${this.pluralOrArticle(t,e+n[1])}`},t.prototype.almostOrShortOf=function(e,t,n,r,i){var a=Math.round((n*r[0]-e)/i[0]);return a===0?this.almost(t,n,r):this.shortOf(t,n,r,a,i)},t.prototype.shortOf=function(e,t,n,r,i){return`${this.pluralOrArticle(r,i[1])} short of ${this.pluralOrArticle(t,e+n[1])}`},t.prototype.pluralOrArticle=function(e,t){return e===1?this.addArticle(t):`${e} ${t}s`},t.prototype.addArticle=function(e){return(Co.has(e[0])?`an `:`a `)+e},t}(Ua),Oo=[`🕛`,`🕐`,`🕑`,`🕒`,`🕓`,`🕔`,`🕕`,`🕖`,`🕗`,`🕘`,`🕙`,`🕚`],ko=Math.log10(12),Ao=function(e){wa(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t.prototype,`name`,{get:function(){return`Clock`},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`infinite`,{get:function(){return`🕛🕡`},enumerable:!1,configurable:!0}),t.prototype.formatUnder1000=function(e){return this.clockwise(new W(e))},t.prototype.formatDecimal=function(e){return this.clockwise(e)},t.prototype.clockwise=function(e){if(e.lt(12))return this.hour(e.toNumber());var t=e.exponent/ko,n=Math.floor(t);if(t<301){var r=(12**(t-n+1)-12)/11;if(n<13)return this.hour(n-1)+this.hour(r);n-=13;var i=``;return n>=144&&(i=this.hour(0),n-=144),i+this.hour(n/12)+this.hour(n%12)+this.hour(r)}n-=301;for(var a=1;n>=1728;)n=(n-1728)/12,++a;return this.hour(a)+this.hour(n/144)+this.hour(n%144/12)+this.hour(n%12)},t.prototype.hour=function(e){return Oo[Math.max(Math.min(Math.floor(e),11),0)]},t}(Ua),jo=10006,Mo=new W(jo),No=Math.log10(jo),Po=[],Fo=Array(jo).fill(!1),Io=Math.ceil(Math.sqrt(jo)),Lo=2;Lo<Io;Lo++)if(!Fo[Lo]){Po.push(Lo);for(var Ro=Lo;Ro<=jo;Ro+=Lo)Fo[Ro]=!0}for(var Lo=Io;Lo<jo;Lo++)Fo[Lo]||Po.push(Lo);for(var zo=Po.length-1,Bo=Po[zo],Vo=[`⁰`,`¹`,`²`,`³`,`⁴`,`⁵`,`⁶`,`⁷`,`⁸`,`⁹`,`¹⁰`,`¹¹`,`¹²`,`¹³`],Ho=function(e){wa(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t.prototype,`name`,{get:function(){return`Prime`},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`infinite`,{get:function(){return`Primefinity?`},enumerable:!1,configurable:!0}),t.prototype.formatUnder1000=function(e){return this.primify(new W(e))},t.prototype.formatDecimal=function(e){return this.primify(e)},t.prototype.primify=function(e){if(e.lte(Mo)){var t=Math.floor(e.toNumber());return t===0?`0`:t===1?`1`:this.formatFromList(this.primesFromInt(t))}var n=(e.exponent+Math.log(Math.max(e.mantissa,1)))/No,r=jo**+(n/Math.ceil(n));if(n<=10006)return this.formatBaseExp(r,n);var i=Math.log10(n)/Math.log10(jo),a=Math.ceil(i);n=jo**+(i/a),r=jo**+(n/Math.ceil(n));var o=this.primesFromInt(a),s=o.length===1?Vo[o[0]]:`^(${this.formatFromList(o)})`;return this.formatBaseExp(r,n)+s},t.prototype.formatBaseExp=function(e,t){var n=this.formatFromList(this.primesFromInt(Math.floor(e))),r=this.formatFromList(this.primesFromInt(Math.ceil(t)));return`(${n})^(${r})`},t.prototype.formatFromList=function(e){for(var t=[],n=0,r=0,i=0;i<e.length;i++)e[i]===n?r++:(n>0&&(r>1?t.push(`${n}${Vo[r]}`):t.push(n)),n=e[i],r=1),i===e.length-1&&(r>1?t.push(`${e[i]}${Vo[r]}`):t.push(e[i]));return t.join(`×`)},t.prototype.findGreatestLtePrimeIndex=function(e){if(e>=Bo)return zo;for(var t=0,n=zo;n!==t+1;){var r=Math.floor((n+t)/2),i=Po[r];if(i===e)return r;e<i?n=r:t=r}return t},t.prototype.primesFromInt=function(e){for(var t=[],n=e;n!==1;){var r=this.findGreatestLtePrimeIndex(n);if(Po[r]===n){t.push(n);break}for(var i=n/2,a=this.findGreatestLtePrimeIndex(i),o=void 0;o===void 0;){var s=Po[a--];n%s===0&&(o=s)}n/=o,t.push(o)}return t.reverse()},t}(Ua),Uo=[``,``,``,``,``,``,``,``],Wo=[``,``,``,``,``,``,``,``],Go=Math.log(8),Ko=function(e){wa(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t.prototype,`name`,{get:function(){return`Bar`},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`negativeInfinite`,{get:function(){return``},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`infinite`,{get:function(){return``},enumerable:!1,configurable:!0}),t.prototype.formatVerySmallNegativeDecimal=function(e){return this.flipBars(this.formatDecimal(e))},t.prototype.formatVerySmallDecimal=function(e){return this.formatDecimal(e)},t.prototype.formatNegativeUnder1000=function(e){return this.flipBars(this.formatDecimal(new W(e)))},t.prototype.formatUnder1000=function(e){return this.formatDecimal(new W(e))},t.prototype.formatNegativeDecimal=function(e){return this.flipBars(this.formatDecimal(e))},t.prototype.formatDecimal=function(e){if(e.eq(0))return`0`;if(e.lessThan(1)&&e.greaterThan(0))return`/${this.formatDecimal(W.div(1,e))}`;for(var t=Math.LN10/Go*e.exponent,n=Math.floor(t),r=t-n,i=Math.floor(r*64),a=[Uo[i%8],Uo[Math.floor(i/8)]];n>=8;){var o=n%8;n=(n-o)/8,a.push(Uo[o])}return a.push(Uo[n]),a.join(``)},t.prototype.flipBars=function(e){for(var t=[],n=0,r=e;n<r.length;n++){var i=r[n];t.push(Wo[Uo.indexOf(i)])}return t.join(``)},t}(Ua),qo=`世使侍勢十史嗜士始室實屍市恃拭拾施是時氏濕獅矢石視試詩誓識逝適釋食`,Jo=function(e){wa(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t.prototype,`name`,{get:function(){return`Shi`},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`infinite`,{get:function(){return this.shi(new W(Number.MAX_VALUE))},enumerable:!1,configurable:!0}),t.prototype.formatUnder1000=function(e){return this.shi(new W(e))},t.prototype.formatDecimal=function(e){return this.shi(e)},t.prototype.getShiCharacter=function(e){return qo[Math.floor(e)%qo.length]},t.prototype.shi=function(e){for(var t=(e.exponent*1e3)**.08,n=``,r=0;r<3;r++)n+=this.getShiCharacter(t*qo.length**+r);return n},t}(Ua),Yo=``.codePointAt(0)??65,Xo=[],Zo=0;Zo<23;Zo++){var Qo=String.fromCharCode(Yo+Zo);Xo.push(Qo)}var $o=Math.log10(3),es=function(e){wa(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t.prototype,`name`,{get:function(){return`Blobs`},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`infinite`,{get:function(){return``},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`negativeInfinite`,{get:function(){return``},enumerable:!1,configurable:!0}),t.prototype.formatNegativeUnder1000=function(e){return`${this.blobify(new W(e-1))}`},t.prototype.formatNegativeDecimal=function(e){return`${this.blobify(e.minus(1))}`},t.prototype.formatUnder1000=function(e){return this.blobify(new W(e))},t.prototype.formatDecimal=function(e){return this.blobify(e)},t.prototype.blobify=function(e){var t=this.reduceNumber(e.abs());return t<23?Xo[Math.floor(t)]:Math.floor(t/23)<24?Xo[Math.floor(t/23)-1]+Xo[Math.floor(t%23)]:this.blobify(W.floor(t/23-1))+Xo[Math.floor(t%23)]},t.prototype.reduceNumber=function(e){return e.lte(1e3)?e.toNumber():(Math.log10(e.exponent)-$o)/Math.log10(1.0002)+1e3},t}(Ua),ts=function(e){wa(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t.prototype,`name`,{get:function(){return`Blind`},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`negativeInfinite`,{get:function(){return` `},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`infinite`,{get:function(){return` `},enumerable:!1,configurable:!0}),t.prototype.formatVerySmallNegativeDecimal=function(){return` `},t.prototype.formatVerySmallDecimal=function(){return` `},t.prototype.formatNegativeUnder1000=function(){return` `},t.prototype.formatUnder1000=function(){return` `},t.prototype.formatNegativeDecimal=function(){return` `},t.prototype.formatDecimal=function(){return` `},t}(Ua),ns=[new Wa,new qa,new Xa,new to,new io,new ao,new uo,new po,new _o,new yo,new Do,new Ao,new Ho,new Ko,new Jo,new es,new ts],rs=function(e){wa(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t.prototype,`name`,{get:function(){return`ALL`},enumerable:!1,configurable:!0}),t.prototype.formatNegativeUnder1000=function(e,t){return this.formatDecimal(new W(-e),t)},t.prototype.formatUnder1000=function(e,t){return this.formatDecimal(new W(e),t)},t.prototype.formatNegativeDecimal=function(e,t){return this.formatDecimal(new W(-e),t)},t.prototype.formatDecimal=function(e,t){var n=Math.floor(Math.log2(e.abs().plus(2).log2().toNumber()));return ns[n%ns.length].format(e,t,t)},t}(Ua);function J(e){return new Decimal(e)}var os=new Decimal(`10^^9000000000000000`);function ss(e){if(Array.isArray(e.effects))return e;let t=[`companion`,`cursed`,`reality`].includes(e.type)?28:0,n=[];for(let r=0;r<32;r++)(e.effects>>r)%2==1&&n.push(GlyphEffects.all.filter(e=>e.intID==t)[0].id),t+=1;return e.effects=n,delete e.isGenerated,e.level=J(e.level),e.rawLevel=J(e.rawLevel),e.strength=J(e.strength),e}function cs(e){let t=[];for(let n=0;n<32;n++)(e.celestials.ra.unlockBits>>n)%2==1&&t.push(n);return t}function ls(e){e.auto.annihilation.multiplier=J(e.auto.annihilation.multiplier),e.auto.dimBoost.galaxies=J(e.auto.dimBoost.galaxies),e.auto.dimBoost.maxDimboosts=J(e.auto.dimBoost.maxDimboosts),e.auto.galaxy.maxGalaxies=J(e.auto.galaxy.maxGalaxies),e.auto.reality.glyph=J(e.auto.reality.glyph),e.auto.reality.shard=J(e.auto.reality.shard),e.blackHole[0].activations=J(e.blackHole[0].activations),e.blackHole[0].durationUpgrades=J(e.blackHole[0].durationUpgrades),e.blackHole[0].phase=J(e.blackHole[0].phase),e.blackHole[0].powerUpgrades=J(e.blackHole[0].powerUpgrades),e.blackHole[0].intervalUpgrades=J(e.blackHole[0].intervalUpgrades),e.blackHole[1].activations=J(e.blackHole[1].activations),e.blackHole[1].durationUpgrades=J(e.blackHole[1].durationUpgrades),e.blackHole[1].phase=J(e.blackHole[1].phase),e.blackHole[1].powerUpgrades=J(e.blackHole[1].powerUpgrades),e.blackHole[1].intervalUpgrades=J(e.blackHole[1].intervalUpgrades),e.blackHolePauseTime=J(e.blackHolePauseTime),e.celestials.effarig.relicShards=J(e.celestials.effarig.relicShards),e.celestials.enslaved.stored=J(e.celestials.enslaved.stored),e.celestials.enslaved.storedReal=J(e.celestials.enslaved.storedReal),e.celestials.enslaved.tesseracts=J(e.celestials.enslaved.tesseracts),e.celestials.laitela.darkEnergy=J(e.celestials.laitela.darkEnergy),e.celestials.laitela.darkMatterMult=J(e.celestials.laitela.darkMatterMult),e.celestials.laitela.entropy=J(e.celestials.laitela.entropy),e.celestials.laitela.fastestCompletion=J(e.celestials.laitela.fastestCompletion),e.celestials.laitela.singularities=J(e.celestials.laitela.singularities),e.celestials.pelle.realityShards=J(e.celestials.pelle.realityShards),e.celestials.pelle.rebuyables.antimatterDimensionMult=J(e.celestials.pelle.rebuyables.antimatterDimensionMult),e.celestials.pelle.rebuyables.galaxyGeneratorAdditive=J(e.celestials.pelle.rebuyables.galaxyGeneratorAdditive),e.celestials.pelle.rebuyables.galaxyGeneratorAntimatterMult=J(e.celestials.pelle.rebuyables.galaxyGeneratorAntimatterMult),e.celestials.pelle.rebuyables.galaxyGeneratorEPMult=J(e.celestials.pelle.rebuyables.galaxyGeneratorEPMult),e.celestials.pelle.rebuyables.galaxyGeneratorIPMult=J(e.celestials.pelle.rebuyables.galaxyGeneratorIPMult),e.celestials.pelle.rebuyables.galaxyGeneratorMultiplicative=J(e.celestials.pelle.rebuyables.galaxyGeneratorMultiplicative),e.celestials.pelle.rebuyables.galaxyPower=J(e.celestials.pelle.rebuyables.galaxyPower),e.celestials.pelle.rebuyables.glyphLevels=J(e.celestials.pelle.rebuyables.glyphLevels),e.celestials.pelle.rebuyables.infConversion=J(e.celestials.pelle.rebuyables.infConversion),e.celestials.pelle.rebuyables.timeSpeedMult=J(e.celestials.pelle.rebuyables.timeSpeedMult),e.celestials.pelle.remnants=J(e.celestials.pelle.remnants),e.celestials.pelle.rifts.decay.fill=J(e.celestials.pelle.rifts.decay.fill),e.celestials.pelle.rifts.paradox.fill=J(e.celestials.pelle.rifts.paradox.fill),e.celestials.pelle.rifts.recursion.fill=J(e.celestials.pelle.rifts.recursion.fill),e.celestials.pelle.rifts.vacuum.fill=J(e.celestials.pelle.rifts.vacuum.fill);for(let t=0;t<21;t++)e.celestials.ra.alchemy[t].amount=J(e.celestials.ra.alchemy[t].amount);e.celestials.ra.highestRefinementValue.dilation=J(e.celestials.ra.highestRefinementValue.dilation),e.celestials.ra.highestRefinementValue.effarig=J(e.celestials.ra.highestRefinementValue.effarig),e.celestials.ra.highestRefinementValue.infinity=J(e.celestials.ra.highestRefinementValue.infinity),e.celestials.ra.highestRefinementValue.power=J(e.celestials.ra.highestRefinementValue.power),e.celestials.ra.highestRefinementValue.replication=J(e.celestials.ra.highestRefinementValue.replication),e.celestials.ra.highestRefinementValue.time=J(e.celestials.ra.highestRefinementValue.time),e.celestials.ra.momentumTime=J(e.celestials.ra.momentumTime),e.celestials.ra.peakGamespeed=J(e.celestials.ra.peakGamespeed),e.celestials.ra.pets.effarig.memories=J(e.celestials.ra.pets.effarig.memories),e.celestials.ra.pets.effarig.memoryChunks=J(e.celestials.ra.pets.effarig.memoryChunks),e.celestials.ra.pets.enslaved.memories=J(e.celestials.ra.pets.enslaved.memories),e.celestials.ra.pets.enslaved.memoryChunks=J(e.celestials.ra.pets.enslaved.memoryChunks),e.celestials.ra.pets.teresa.memories=J(e.celestials.ra.pets.teresa.memories),e.celestials.ra.pets.teresa.memoryChunks=J(e.celestials.ra.pets.teresa.memoryChunks),e.celestials.ra.pets.v.memories=J(e.celestials.ra.pets.v.memories),e.celestials.ra.pets.effarig.v=J(e.celestials.ra.pets.v.memoryChunks),e.celestials.ra.unlocks=cs(e),delete e.celestials.ra.unlockBits,e.celestials.teresa.bestAMSet=e.celestials.teresa.bestAMSet.map(e=>ss(e)),e.celestials.teresa.lastRepeatediM=new Decimal,e.celestials.teresa.lastRepeatedMachines.gte(`1e5000`)&&(e.celestials.teresa.lastRepeatedMachines=new Decimal(`1e1000`),e.celestials.teresa.lastRepeatediM=e.celestials.teresa.lastRepeatedMachines.div(`1e10000`)),e.celestials.v.runGlyphs=e.celestials.v.runGlyphs.map(e=>e.map(e=>ss(e))),e.celestials.v.runRecords[1]=J(e.celestials.v.runRecords[1]),e.celestials.v.runRecords[2]=J(e.celestials.v.runRecords[2]),e.celestials.v.runRecords[3]=J(e.celestials.v.runRecords[3]),e.celestials.v.runRecords[4]=J(e.celestials.v.runRecords[4]),e.celestials.v.runRecords[5]=J(e.celestials.v.runRecords[5]),e.celestials.v.runRecords[7]=J(e.celestials.v.runRecords[7]),e.celestials.v.runRecords[8]=J(e.celestials.v.runRecords[8]),e.chall2Pow=J(e.chall2Pow),e.chall3Pow=J(e.chall3Pow),e.chall8TotalSacrifice=J(e.chall8TotalSacrifice),e.chall9TickspeedCostBumps=J(e.chall9TickspeedCostBumps),e.challenge.infinity.bestTimes=e.challenge.infinity.bestTimes.map(e=>!(e instanceof Decimal)&&e>16e307?os:J(e)),e.challenge.normal.bestTimes=e.challenge.normal.bestTimes.map(e=>!(e instanceof Decimal)&&e>16e307?os:J(e)),e.dilation.baseTachyonGalaxies=J(e.dilation.baseTachyonGalaxies),e.dilation.nextThreshold=J(e.dilation.nextThreshold),e.dilation.totalTachyonGalaxies=J(e.dilation.totalTachyonGalaxies);for(let t=1;t<14;t===3?t=11:t++)e.dilation.rebuyables[t]=J(e.dilation.rebuyables[t]);e.dimensionBoosts=J(e.dimensionBoosts);for(let t=0;t<8;t++)e.dimensions.antimatter[t].bought=J(e.dimensions.antimatter[t].bought),e.dimensions.antimatter[t].costBumps=J(e.dimensions.antimatter[t].costBumps),e.dimensions.infinity[t].baseAmount=J(e.dimensions.infinity[t].baseAmount),e.dimensions.infinity[t].bought=J(e.dimensions.infinity[t].bought),e.dimensions.time[t].bought=J(e.dimensions.time[t].bought);for(let t in e.epmultUpgrades=J(e.epmultUpgrades),e.galaxies=J(e.galaxies),e.infinityRebuyables[0]=J(e.infinityRebuyables[0]),e.infinityRebuyables[1]=J(e.infinityRebuyables[1]),e.infinityRebuyables[2]=J(e.infinityRebuyables[2]),e.IPMultPurchases=J(e.IPMultPurchases),e.options.lastOpenSubtab[2]===3&&(e.options.lastOpenSubtab[2]=1),e.options.lnotation=`Stacked Scientific`,e.partSimulatedReality=J(e.partSimulatedReality),e.realities=J(e.realities),e.reality.achTimer=J(e.reality.achTimer),e.reality.glyphs.active=e.reality.glyphs.active.map(e=>ss(e)),e.reality.glyphs.inventory=e.reality.glyphs.inventory.map(e=>ss(e)),e.reality.glyphs.filter.types){if(!Object.hasOwn(e.reality.glyphs.filter.types,t))continue;e.reality.glyphs.filter.types[t].rarity=J(e.reality.glyphs.filter.types[t].rarity),e.reality.glyphs.filter.types[t].effectScores={};let n=[];for(let r=0;r<30;r++)(e.reality.glyphs.filter.types[t].specifiedMask>>r)%2==1&&n.push(GlyphEffects.all.filter(e=>e.intID==r)[0].id),r<=26&&GlyphEffects.all[r].glyphTypes.includes(t)&&(e.reality.glyphs.filter.types[t].effectScores[GlyphEffects.all[r].id]=0),e.reality.glyphs.filter.types[t].specifiedMask=n}e.reality.glyphs.sac!==void 0&&(e.reality.glyphs.sac.dilation=J(e.reality.glyphs.sac.dilation),e.reality.glyphs.sac.effarig=J(e.reality.glyphs.sac.effarig),e.reality.glyphs.sac.infinity=J(e.reality.glyphs.sac.infinity),e.reality.glyphs.sac.power=J(e.reality.glyphs.sac.power),e.reality.glyphs.sac.reality=J(e.reality.glyphs.sac.reality),e.reality.glyphs.sac.replication=J(e.reality.glyphs.sac.replication),e.reality.glyphs.sac.time=J(e.reality.glyphs.sac.time));for(let t=0;t<7;t++)e.reality.glyphs.sets[t].glyphs=e.reality.glyphs.sets[t].glyphs.map(e=>ss(e));e.reality.iMcap=J(e.reality.iMcap),e.reality.imaginaryMachines=J(e.reality.imaginaryMachines),e.reality.lastAutoEC=J(e.reality.lastAutoEC),e.reality.perkPoints=J(e.reality.perkPoints);for(let t=1;t<=5;t++)e.reality.rebuyables[t]=J(e.reality.rebuyables[t]);e.records.bestEternity.realTime=J(e.records.bestEternity.realTime),e.records.bestEternity.realTime.gt(`e308`)&&(e.records.bestEternity.realTime=os),e.records.bestEternity.time=J(e.records.bestEternity.time),e.records.bestEternity.time.gt(`e308`)&&(e.records.bestEternity.time=os),e.records.bestInfinity.realTime=J(e.records.bestInfinity.realTime),e.records.bestInfinity.realTime.gt(`e308`)&&(e.records.bestInfinity.realTime=os),e.records.bestInfinity.time=J(e.records.bestInfinity.time),e.records.bestInfinity.time.gt(`e308`)&&(e.records.bestInfinity.time=os),e.records.bestReality.RMSet=e.records.bestReality.RMSet?.map(e=>ss(e)),e.records.bestReality.RMminSet=e.records.bestReality.RMminSet?.map(e=>ss(e)),e.records.bestReality.glyphLevel=J(e.records.bestReality.glyphLevel),e.records.bestReality.glyphLevelSet=e.records.bestReality.glyphLevelSet?.map(e=>ss(e)),e.records.bestReality.glyphStrength=J(e.records.bestReality.glyphStrength),e.records.bestReality.imCapSet=e.records.bestReality.imCapSet?.map(e=>ss(e)),e.records.bestReality.laitelaSet=e.records.bestReality.laitelaSet?.map(e=>ss(e)),e.records.bestReality.realTime=J(e.records.bestReality.realTime),e.records.bestReality.realTime.gt(`e308`)&&(e.records.bestReality.realTime=os),e.records.bestReality.speedSet=e.records.bestReality.speedSet?.map(e=>ss(e)),e.records.bestReality.time=J(e.records.bestReality.time),e.records.bestReality.time.gt(`e308`)&&(e.records.bestReality.time=os),e.records.previousRunRealTime=J(e.records.previousRunRealTime),e.records.realTimeDoomed=J(e.records.realTimeDoomed),e.records.realTimePlayed=J(e.records.realTimePlayed),e.records.trueTimePlayed=e.records.realTimePlayed.toNumber();for(let t=0;t<10;t++)e.records.recentEternities[t][6]=J(e.records.recentEternities[t][5]),e.records.recentEternities[t][5]=e.records.recentEternities[t][4],e.records.recentEternities[t][4]=J(e.records.recentEternities[t][3]),e.records.recentEternities[t][3]=J(e.records.recentEternities[t][2]),e.records.recentEternities[t][2]=J(e.records.recentEternities[t][1]),e.records.recentEternities[t][1]=J(e.records.recentEternities[t][0]),e.records.recentEternities[t][5]instanceof Decimal&&(e.records.recentEternities[t][5]=``),e.records.recentInfinities[t][5]=e.records.recentInfinities[t][4],e.records.recentInfinities[t][4]=J(e.records.recentInfinities[t][3]),e.records.recentInfinities[t][3]=J(e.records.recentInfinities[t][2]),e.records.recentInfinities[t][2]=J(e.records.recentInfinities[t][1]),e.records.recentInfinities[t][1]=J(e.records.recentInfinities[t][0]),e.records.recentRealities[t][8]=J(e.records.recentRealities[t][7]),e.records.recentRealities[t][7]=J(e.records.recentRealities[t][6]),e.records.recentRealities[t][6]=J(e.records.recentRealities[t][5]),e.records.recentRealities[t][5]=e.records.recentRealities[t][4],e.records.recentRealities[t][4]=J(e.records.recentRealities[t][3]),e.records.recentRealities[t][3]=J(e.records.recentRealities[t][2]),e.records.recentRealities[t][2]=J(e.records.recentRealities[t][1]),e.records.recentRealities[t][1]=J(e.records.recentRealities[t][0]);e.records.thisEternity.realTime=J(e.records.thisEternity.realTime),e.records.thisEternity.time=J(e.records.thisEternity.time),e.records.thisEternity.trueTime=e.records.thisEternity.realTime.toNumber(),e.records.thisInfinity.realTime=J(e.records.thisInfinity.realTime),e.records.thisInfinity.time=J(e.records.thisInfinity.time),e.records.thisInfinity.trueTime=e.records.thisInfinity.realTime.toNumber(),e.records.thisReality.realTime=J(e.records.thisReality.realTime),e.records.thisReality.time=J(e.records.thisReality.time),e.records.thisReality.trueTime=e.records.thisReality.realTime.toNumber(),e.records.thisReality.bestRSmin=J(e.records.thisReality.bestRSmin),e.records.thisReality.bestRSminVal=J(e.records.thisReality.bestRSminVal),e.records.timePlayedAtBHUnlock=J(e.records.timePlayedAtBHUnlock),e.records.totalTimePlayed=J(e.records.totalTimePlayed),e.replicanti.boughtGalaxyCap=J(e.replicanti.boughtGalaxyCap),e.replicanti.chance=J(e.replicanti.chance),e.replicanti.galaxies=J(e.replicanti.galaxies),e.replicanti.interval=J(e.replicanti.interval),e.replicanti.timer=J(e.replicanti.timer),e.requirementChecks.reality.slowestBH=J(e.requirementChecks.reality.slowestBH),e.requirementChecks.reality.maxID1=J(e.requirementChecks.reality.maxID1),e.requirementChecks.permanent.emojiGalaxies=J(e.requirementChecks.permanent.emojiGalaxies),e.totalTickGained=J(e.totalTickGained),e.totalTickBought=J(e.totalTickBought)}const Y={firstRealityMigration:13,patches:{1:e=>{for(let t=0;t<e.autobuyers.length;t++)e.autobuyers[t]%1!=0&&(e.infinityPoints=e.infinityPoints.plus(e.autobuyers[t].cost-1));e.autobuyers=[1,2,3,4,5,6,7,8,9,10,11,12]},2:e=>{e.dimensionMultDecrease!==10&&(e.dimensionMultDecrease===9&&(e.dimensionMultDecrease=10,e.dimensionMultDecreaseCost=1e8,e.infinityPoints=e.infinityPoints.plus(1e8)),e.dimensionMultDecrease===8&&(e.dimensionMultDecrease=10,e.dimensionMultDecreaseCost=1e8,e.infinityPoints=e.infinityPoints.plus(21e8)),e.dimensionMultDecrease===7&&(e.dimensionMultDecrease=10,e.dimensionMultDecreaseCost=1e8,e.infinityPoints=e.infinityPoints.plus(421e8)))},5:e=>{e.newsArray=[]},9:e=>{let t=[];e.achievements.delete(`r22`)&&t.push(`r35`),e.achievements.delete(`r35`)&&t.push(`r76`),e.achievements.delete(`r41`)&&t.push(`r22`),e.achievements.delete(`r76`)&&t.push(`r41`);for(let n of t)e.achievements.add(n);e.replicanti.intervalCost=e.replicanti.intervalCost.dividedBy(0x56bc75e2d63100000)},9.5:e=>{e.timestudy.studies.includes(191)&&(e.timestudy.theorem=e.timestudy.theorem.plus(100))},10:e=>{if(e.timestudy.studies.includes(72))for(let t=4;t<8;t++)e[`infinityDimension${t}`].amount=Decimal.div(e[`infinityDimension${t}`].amount,Sacrifice.totalBoost.pow(.02))},12:e=>{let t=[null,1,5,100,1e3],n=[null,3,9,27,81];if(e.timeDimension1)for(let r=1;r<5;r++)new Decimal(`1e300`).lt(e[`timeDimension${r}`].cost)&&(e[`timeDimension${r}`].cost=Decimal.pow(n[r]*2.2,e[`timeDimension${r}`].bought).times(t[r]))},12.1:e=>{for(let t of e.achievements)if(t.includes(`s`)&&t.length<=3){e.achievements.splice(e.achievements.indexOf(`r36`),1);break}},13:e=>{e.realTimePlayed=e.totalTimePlayed,e.thisReality=e.totalTimePlayed,e.thisInfinityRealTime=e.thisInfinityTime*100,e.thisEternityRealTime=e.thisEternity*100,e.thisRealityRealTime=e.thisReality*100,e.thisInfinityLastBuyTime=e.thisInfinityTime*100;for(let t=0;t<10;t++)e.lastTenEternities[t][2]=e.lastTenEternities[t][0],e.lastTenRuns[t][2]=e.lastTenRuns[t][0];e.options.newUI=!1,window.uiChoiceModalInterval=setInterval(()=>{GameUI.initialized&&(Modal.uiChoice.show(),clearInterval(window.uiChoiceModalInterval))},1e3),Y.normalizeTimespans(e),Y.convertAutobuyerMode(e),Y.fixChallengeIds(e),Y.adjustMultCosts(e),Y.convertAchivementsToNumbers(e),Y.adjustGameCreatedTime(e),Y.moveSavedStudyTrees(e),Y.convertEPMult(e),Y.moveChallengeInfo(e),Y.infinitiedConversion(e),Y.adjustWhy(e),Y.removeAchPow(e),Y.adjustSacrificeConfirmation(e),Y.migrateNotation(e),Y.fixAutobuyers(e),Y.removeAutoIPProperties(e),Y.adjustAchievementVars(e),Y.uniformDimensions(e),Y.removeEternityChallGoal(e),Y.removeTickspeed(e),Y.removePostC3Reward(e),Y.renameMoney(e),Y.moveAutobuyers(e),Y.convertEternityCountToDecimal(e),Y.renameDimboosts(e),Y.migrateConfirmations(e),Y.removeOtherTickspeedProps(e),Y.renameNewsOption(e),Y.removeDimensionCosts(e),Y.changeC8Handling(e),Y.convertAchievementsToBits(e),Y.setNoInfinitiesOrEternitiesThisReality(e),Y.setTutorialState(e),Y.migrateLastTenRuns(e),Y.migrateIPGen(e),Y.renameCloudVariable(e),Y.standardizeUncompletedTimes(e),Y.makeRecords(e),Y.deleteOldRecords(e),Y.migrateAutobuyers(e),Y.migratePlayerVars(e),Y.consolidateAuto(e),Y.convertTimeTheoremPurchases(e),Y.deleteDimboostBulk(e),Y.deleteFloatingTextOption(e),Y.refactorDoubleIPRebuyable(e),Y.infMultNameConversion(e),Y.convertNews(e),Y.etercreqConversion(e),Y.moveTS33(e),Y.addBestPrestigeCurrency(e),Y.migrateTheme(e)},14:e=>{Y.reworkBHPulsing(e),e.reality.autoSort!==0&&e.reality.autoSort++},15:e=>{for(let t=0;t<10;t++){if(e.records.lastTenInfinities){let n=e.records.lastTenInfinities[t];e.records.recentInfinities[t]=[n[0]??Number.MAX_VALUE,Number(n[3]??Number.MAX_VALUE),new Decimal(n[1]??1),new Decimal(n[2]??1),``]}if(e.records.lastTenEternities){let n=e.records.lastTenEternities[t];e.records.recentEternities[t]=[n[0]??Number.MAX_VALUE,Number(n[3]??Number.MAX_VALUE),new Decimal(n[1]??1),new Decimal(n[2]??1),``,new Decimal(0)]}if(e.records.lastTenRealities){let n=e.records.lastTenRealities[t];e.records.recentRealities[t]=[n[0]??Number.MAX_VALUE,Number(n[3]??Number.MAX_VALUE),new Decimal(n[1]??1),n[2]??1,``,0,0]}}if(delete e.records.lastTenInfinities,delete e.records.lastTenEternities,delete e.records.lastTenRealities,delete e.options.showLastTenResourceGain,e.news.seen){let t=0;for(let n of Object.values(e.news.seen))for(let e of n)t+=countValuesFromBitmask(e);e.news.totalSeen=Math.max(e.news.totalSeen,t)}},16:e=>{e.options.perkLayout=e.options.fixedPerkStartingPos?0:1,delete e.options.fixedPerkStartingPos,e.reality.initialSeed=e.reality.seed,e.reality.initialSeed===0&&(e.reality.initialSeed=1);let t=Array.repeat(0,26);for(let n of GameDatabase.speedrunMilestones)t[n.id]=e.speedrun.records[n.key];for(e.speedrun.records=t,e.speedrun.seedSelection=SPEEDRUN_SEED_STATE.UNKNOWN,delete e.speedrun.milestones;e.reality.glyphs.sets.length<7;)e.reality.glyphs.sets.push({name:``,glyphs:[]})},17:e=>{let t=e.options.currentMultiplierSubtab??0;e.options.multiplierTab.currTab=t+(t>5?1:0),delete e.options.currentMultiplierSubtab},18:e=>{e.reality.automator.constantSortOrder=Object.keys(e.reality.automator.constants)},19:e=>{delete e.options.confirmations.resetCelestial},20:e=>{let t=e.celestials.effarig;e.reality.glyphs.filter={select:t?.mode??0,trash:t?.glyphTrashMode??0,simple:t?.simpleEffectCount??0};let n={},r=Object.values(GameDatabase.reality.glyphEffects);for(let e of GlyphInfo.alchemyGlyphTypes){let i=t.glyphScoreSettings?.types[e],a=r.filter(t=>t.glyphTypes.includes(e)).sort((e,t)=>e.bitmaskIndex-t.bitmaskIndex);if(n[e]={rarity:i?.rarityThreshold??0,score:i?.scoreThreshold??0,effectCount:i?.effectCount??0},n[e].specifiedMask=0,n[e].effectScores=[],!i)continue;for(let t of a){if(!t)continue;n[e].specifiedMask|=i.effectChoices[t.id]?1<<t.bitmaskIndex:0,n[e].effectScores.push(i.effectScores[t.id])}}e.reality.glyphs.filter.types=n,delete e.celestials.effarig.glyphScoreSettings,delete e.celestials.effarig.glyphTrashMode;let i=e=>{if(Array.isArray(e))return e;let t=[20,21,22].map(e=>1<<e).nSum(),n=[20,21,22].map(t=>(e&1<<t)!=0);n.push(n.shift());let r=0;for(let e=20;e<=22;e++)n[e-20]&&(r|=1<<e);return e&~t|r},a=e.reality.glyphs.active.concat(e.reality.glyphs.inventory);for(let e of a)e.effects=i(e.effects);let o=[`RMSet`,`RMminSet`,`glyphLevelSet`,`bestEPSet`,`speedSet`,`iMCapSet`,`laitelaSet`];for(let t of o){let n=e.records.bestReality[t];for(let e of n)e.effects=i(e.effects)}e.options.glyphBG=e.options.lightGlyphs?1:2,delete e.options.lightGlyphs},21:e=>{for(let t=1;t<=12;t++)e.eternityChalls[`eterc${t}`]>0&&(e.reality.unlockedEC|=1<<t);e.reality.maxRM=new Decimal(e.reality.realityMachines)},22:e=>{e.options.perkLayout>2&&(e.options.perkLayout+=3),e.options.statTabResources=e.options.showRecentRate?1:0,delete e.options.showRecentRate;for(let t=0;t<e.records.recentRealities.length;t++)e.records.recentRealities[t].push(0);e.options.themeClassic===void 0&&(e.options.themeClassic=`Normal`),e.options.themeModern===void 0&&(e.options.themeModern=`Normal`);let t=Math.floor(Date.now()*Math.random()+1);e.reality.seed===1&&(e.reality.seed=t),e.reality.initialSeed===1&&(e.reality.initialSeed=t)},23:e=>{let t=e=>{let t=[20,21,22].map(e=>1<<e).sum(),n=[20,21,22].map(t=>(e&1<<t)!=0);n.push(n.shift());let r=0;for(let e=20;e<=22;e++)n[e-20]&&(r|=1<<e);return e&~t|r};for(let n of e.reality.glyphs.sets)for(let e of n.glyphs)e.effects=t(e.effects)},24:e=>{let t=Object.keys(e.reality.automator.constants);t.length!==e.reality.automator.constantSortOrder.length&&(e.reality.automator.constantSortOrder=[...t])},25:e=>{e.achievementBits[13]&32&&!e.reality.perks.has(107)&&e.reality.perks.add(107),e.celestials.pelle.doomed&&(e.dilation.rebuyables[3]=0)},26:e=>{delete e.infinity?.upgradeBits},83:e=>{ls(e)},100:e=>{for(let t=0;t<14;t++)e.challenge.eternity.completions[t]=e.eternityChalls[`eterc${t+1}`];delete e.eternityChalls}},normalizeTimespans(e){e.realTimePlayed*=100,e.totalTimePlayed*=100,e.thisInfinityTime*=100,e.thisEternity*=100,e.thisReality*=100,e.bestInfinityTime=e.bestInfinityTime===9999999999?999999999999:e.bestInfinityTime*100,e.bestEternity=e.bestEternity===9999999999?999999999999:e.bestEternity*100;for(let t=0;t<10;t++)e.lastTenEternities[t][0]*=100,e.lastTenRuns[t][0]*=100,e.lastTenEternities[t][2]*=100,e.lastTenRuns[t][2]*=100;e.challengeTimes&&=e.challengeTimes.map(e=>e*100),e.infchallengeTimes&&=e.infchallengeTimes.map(e=>e*100)},convertAutobuyerMode(e){for(let t=0;t<8;t++){let n=e.autobuyers[t];n%1!=0&&(n.target<10?n.target=AUTOBUYER_MODE.BUY_SINGLE:n.target=AUTOBUYER_MODE.BUY_10)}let t=e.autobuyers[8];t%1!=0&&(t.target<10?t.target=AUTOBUYER_MODE.BUY_SINGLE:t.target=AUTOBUYER_MODE.BUY_MAX)},fixChallengeIds(e){let t=!1;function n(e){if(!e.startsWith(`challenge`))return e;t=!0;let n=Number.parseInt(e.slice(9),10);return`challenge${GameDatabase.challenges.normal.find(e=>e.legacyId===n).id}`}e.currentChallenge=n(e.currentChallenge),e.challenges=e.challenges.map(n),t&&e.challengeTimes&&(e.challengeTimes=GameDatabase.challenges.normal.slice(1).map(t=>e.challengeTimes[t.legacyId-2]))},adjustMultCosts(e){e.tickSpeedMultDecreaseCost!==void 0&&(e.infinityRebuyables[0]=Math.round(Math.log(e.tickSpeedMultDecreaseCost/3e6)/Math.log(5))),e.dimensionMultDecreaseCost!==void 0&&(e.infinityRebuyables[1]=Math.round(Math.log(e.dimensionMultDecreaseCost/1e8)/Math.log(5e3))),delete e.tickSpeedMultDecrease,delete e.tickSpeedMultDecreaseCost,delete e.dimensionMultDecrease,delete e.dimensionMultDecreaseCost},convertAchivementsToNumbers(e){if(e.achievements.length>0&&e.achievements.every(e=>typeof e==`number`))return;let t=e.achievements;e.achievements=new Set,e.secretAchievements=new Set;for(let n of t){let t=GameDatabase.achievements.normal.find(e=>e.name===n);if(t!==void 0){e.achievements.add(t.id);continue}let r=Number.parseInt(n.slice(1),10);if(isNaN(r))throw TypeError(`Could not parse achievement id ${n}`);if(n.startsWith(`r`)){if(GameDatabase.achievements.normal.some(e=>e.id===r)===void 0)throw Error(`Unrecognized achievement ${n}`);e.achievements.add(r)}else if(n.startsWith(`s`)){if(GameDatabase.achievements.secret.some(e=>e.id===r)===void 0)throw Error(`Unrecognized secret achievement ${r}`);e.secretAchievements.add(r)}}},adjustGameCreatedTime(e){e.gameCreatedTime=e.lastUpdate-e.realTimePlayed},moveSavedStudyTrees(e){for(let t=1;t<=3;++t){let n=localStorage.getItem(`studyTree${t}`);n&&(e.timestudy.presets[t-1].studies=n)}},convertEPMult(e){if(e.epmult===void 0)return;let t=new Decimal(e.epmult);if(delete e.epmultCost,delete e.epmult,t.lte(1)){e.epmultUpgrades=0;return}e.epmultUpgrades=t.log(5)},moveChallengeInfo(e){function t(e){if(e.startsWith(`challenge`))return{type:`normal`,id:Number.parseInt(e.slice(9),10)};if(e.startsWith(`postc`))return{type:`infinity`,id:Number.parseInt(e.slice(5),10)};if(e!==``)throw Error(`Unrecognized challenge ID ${e}`);return null}if(e.challengeTimes){for(let t=0;t<e.challengeTimes.length;++t)e.challenge.normal.bestTimes[t]=Math.min(e.challenge.normal.bestTimes[t],e.challengeTimes[t]);delete e.challengeTimes}if(e.infchallengeTimes){for(let t=0;t<e.infchallengeTimes.length;++t)e.challenge.infinity.bestTimes[t]=Math.min(e.challenge.infinity.bestTimes[t],e.infchallengeTimes[t]);delete e.infchallengeTimes}if(e.currentChallenge!==void 0){let n=t(e.currentChallenge);delete e.currentChallenge,n&&(e.challenge[n.type].current=n.id)}if(e.challenges){for(let n of e.challenges){let r=t(n);e.challenge[r.type].completedBits|=1<<r.id}delete e.challenges}if(e.currentEternityChall!==void 0){let t=e.currentEternityChall;if(delete e.currentEternityChall,t.startsWith(`eterc`))e.challenge.eternity.current=Number.parseInt(t.slice(5),10);else if(t!==``)throw Error(`Unrecognized eternity challenge ${t}`)}e.eternityChallUnlocked!==void 0&&(e.challenge.eternity.unlocked=e.eternityChallUnlocked,delete e.eternityChallUnlocked),delete e.challengeTarget},adjustWhy(e){e.requirementChecks.permanent.singleTickspeed=e.why??0,delete e.why},adjustAchievementVars(e){e.requirementChecks.eternity.onlyAD1=e.dead,delete e.dead,e.requirementChecks.eternity.onlyAD8=e.dimlife,delete e.dimlife,e.requirementChecks.reality.noAM=!1,e.requirementChecks.eternity.noAD1=!1,e.requirementChecks.infinity.noAD8=!1,e.requirementChecks.eternity.noRG=e.replicanti.gal===0,(e.timestudy.theorem.gt(0)||e.timestudy.studies.length>0||e.challenge.eternity.unlocked!==0)&&(e.requirementChecks.reality.noPurchasedTT=!1),e.sacrificed.gt(0)&&(e.requirementChecks.infinity.noSacrifice=!1),e.requirementChecks.permanent.emojiGalaxies=e.spreadingCancer,delete e.spreadingCancer},removeAchPow(e){delete e.achPow},adjustSacrificeConfirmation(e){e.options.sacrificeConfirmation!==void 0&&(e.options.confirmations.sacrifice=e.options.sacrificeConfirmation,delete e.options.sacrificeConfirmation)},migrateNotation(e){let t=e.options.notation;t===void 0&&(e.options.notation=`Standard`);let n={Mixed:`Mixed scientific`,Default:`Brackets`,Emojis:`Cancer`};n[t]!==void 0&&(e.options.notation=n[t])},fixAutobuyers(e){for(let t=0;t<12;t++)e.autobuyers[t]%1!=0&&e.autobuyers[t].target%1!=0&&(e.autobuyers[t].target=AUTOBUYER_MODE.BUY_SINGLE),e.autobuyers[t]%1!=0&&(e.autobuyers[t].bulk===void 0||isNaN(e.autobuyers[t].bulk)||e.autobuyers[t].bulk===null)&&(e.autobuyers[t].bulk=1);typeof e.autobuyers[9]!=`number`&&typeof e.autobuyers[9].bulk!=`number`&&(e.autobuyers[9].bulk=1),e.autobuyers[11]%1!=0&&e.autobuyers[11].priority!==void 0&&e.autobuyers[11].priority!==null&&e.autobuyers[11].priority!==`undefined`&&(e.autobuyers[11].priority=new Decimal(e.autobuyers[11].priority))},removeAutoIPProperties(e){delete e.autoIP,delete e.autoTime},removeEternityChallGoal(e){delete e.eternityChallGoal},removeTickspeed(e){delete e.tickspeed,e.tickSpeedCost=new Decimal(1e3),e.tickspeedMultiplier=new Decimal(10)},removeOtherTickspeedProps(e){delete e.tickSpeedCost,delete e.tickspeedMultiplier},renameNewsOption(e){e.options.news.enabled=!e.options.newsHidden,delete e.options.newsHidden},removeDimensionCosts(e){for(let t of e.dimensions.antimatter)delete t.cost,delete t.costMultiplier},renameTickspeedPurchaseBumps(e){e.chall9TickspeedPurchaseBumps!==void 0&&(e.chall9TickspeedCostBumps=e.chall9TickspeedPurchaseBumps,delete e.chall9TickspeedPurchaseBumps)},removePostC3Reward(e){delete e.postC3Reward},renameMoney(e){e.antimatter=new Decimal(e.money),e.totalAntimatter=new Decimal(e.totalmoney),delete e.money,delete e.totalmoney},uniformDimensions(e){for(let t=1;t<=8;t++){let n=[null,`first`,`second`,`third`,`fourth`,`fifth`,`sixth`,`seventh`,`eight`][t],r={cost:`${n}Cost`,amount:`${n}Amount`,bought:`${n}Bought`,pow:`${n}Pow`},i=e.dimensions.antimatter[t-1];i.cost=new Decimal(e[r.cost]),i.amount=new Decimal(e[r.amount]),i.bought=e[r.bought],e.costmultipliers&&(i.costMultiplier=new Decimal(e.costMultipliers[t-1])),delete e[r.cost],delete e[r.amount],delete e[r.bought],delete e[r.pow]}if(delete e.costMultipliers,e.infinityDimension1){for(let t=1;t<=8;t++){let n=e.dimensions.infinity[t-1],r=`infinityDimension${t}`,i=e[r];n.cost=new Decimal(i.cost),n.amount=new Decimal(i.amount),n.bought=i.bought,n.baseAmount=i.baseAmount,n.isUnlocked=e.infDimensionsUnlocked[t-1],delete e[r]}delete e.infDimensionsUnlocked}if(e.timeDimension1)for(let t=1;t<=8;t++){let n=e.dimensions.time[t-1],r=`timeDimension${t}`,i=e[r];i!==void 0&&(n.cost=new Decimal(i.cost),n.amount=new Decimal(i.amount),n.bought=i.bought,delete e[r])}},moveAutobuyers(e){e.autobuyers[11]%1!=0&&e.autobuyers[11].priority!==void 0&&e.autobuyers[11].priority!==null&&e.autobuyers[11].priority!==`undefined`&&(e.autobuyers[11].priority=new Decimal(e.autobuyers[11].priority));for(let t=0;t<8;t++){let n=e.autobuyers[t];if(n%1==0)continue;let r=e.auto.antimatterDims.all[t];r.cost=n.cost,r.interval=n.interval,r.bulk=n.bulk,r.mode=n.target,r.priority=n.priority,r.isActive=n.isOn,r.lastTick=e.realTimePlayed}if(e.autobuyers[8]%1!=0){let t=e.autobuyers[8],n=e.auto.tickspeed;n.cost=t.cost,n.interval=t.interval,n.mode=t.target,n.priority=t.priority,n.isActive=t.isOn,n.lastTick=e.realTimePlayed}if(e.autobuyers[9]%1!=0){let t=e.autobuyers[9],n=e.auto.dimBoost;n.cost=t.cost,n.interval=t.interval,n.maxDimBoosts=t.priority,n.galaxies=e.overXGalaxies,n.bulk=t.bulk,n.buyMaxInterval=t.bulk,n.isActive=t.isOn,n.lastTick=e.realTimePlayed}if(delete e.overXGalaxies,e.autobuyers[10]%1!=0){let t=e.autobuyers[10],n=e.auto.galaxy;n.cost=t.cost,n.interval=t.interval,n.maxGalaxies=t.priority,n.buyMaxInterval=t.bulk,n.buyMax=t.bulk>0,n.isActive=t.isOn,n.lastTick=e.realTimePlayed}if(e.autobuyers[11]%1!=0){let t=e.autobuyers[11],n=e.auto.bigCrunch;n.cost=t.cost,n.interval=t.interval,n.mode=[`amount`,`time`,`relative`].indexOf(e.autoCrunchMode);let r=new Decimal(t.priority);switch(e.autoCrunchMode){case`amount`:n.amount=r;break;case`time`:n.time=r.lt(DC.NUMMAX)?r.toNumber():n.time;break;case`relative`:n.xHighest=r;break}n.isActive=t.isOn,n.lastTick=e.realTimePlayed}if(delete e.autoCrunchMode,delete e.autobuyers,e.autoSacrifice&&e.autoSacrifice%1!=0){let t=e.autoSacrifice,n=e.auto.sacrifice;n.multiplier=new Decimal(t.priority),n.isActive=t.isOn}if(delete e.autoSacrifice,e.eternityBuyer!==void 0){let t=e.eternityBuyer,n=e.auto.eternity;e.autoEternityMode===void 0&&(n.time=Number(t.limit)),n.isActive=t.isOn}delete e.eternityBuyer},convertNews(e){e.newsArray===void 0?e.newsArray=[]:e.newsArray=e.newsArray.map(e=>typeof e==`number`?`a${e}`:e);let t=new Set(e.newsArray);e.news={},e.news.seen={},e.news.specialTickerData={uselessNewsClicks:0,paperclips:0,newsQueuePosition:1e3,eiffelTowerChapter:0};let n=NewsHandler.BITS_PER_MASK;for(let r of t){let t=r.match(/([a-z]+)(\d+)/u),i=t[1],a=Number.parseInt(t[2],10);for(e.news.seen[i]||(e.news.seen[i]=[]);n*e.news.seen[i].length<a;)e.news.seen[i].push(0);e.news.seen[i][Math.floor(a/n)]|=1<<a%n}e.news.totalSeen=NewsHandler.uniqueTickersSeen,delete e.newsArray},convertEternityCountToDecimal(e){e.eternities=new Decimal(e.eternities),e.reality.partEternitied=new Decimal(e.reality.partEternitied)},renameDimboosts(e){e.dimensionBoosts=e.resets,delete e.resets},migrateConfirmations(e){e.options.confirmations.challenges=!e.options.challConf,delete e.options.challConf,e.options.confirmations.eternity=e.options.eternityconfirm,delete e.options.eternityconfirm,delete e.tickDecrease},changeC8Handling(e){e.chall8TotalSacrifice=Decimal.pow(e.chall11Pow,2),delete e.chall11Pow},convertAchievementsToBits(e){let t={"4,3":`6,4`,"6,4":`7,7`,"7,7":`4,3`,"10,1":`11,7`,"11,7":`10,1`,"11,3":`12,4`,"12,4":`11,3`},n=(n,r,i)=>{for(let e of r){let r=Math.floor(e/10),a=e%10;!i&&[r,a].join(`,`)in t&&([r,a]=t[[r,a].join(`,`)].split(`,`)),n[r-1]|=1<<a-1}!i&&(e.infinityUpgrades.size>=16||e.eternities.gt(0)||e.realities.gt(0))?n[3]|=1:n[3]&=-2,i&&(n[2]&=-129)};e.achievementBits=Array.repeat(0,15),n(e.achievementBits,e.achievements,!1),delete e.achievements,e.secretAchievementBits=Array.repeat(0,4),n(e.secretAchievementBits,e.secretAchievements,!0),delete e.secretAchievements},setNoInfinitiesOrEternitiesThisReality(e){e.requirementChecks.reality.noInfinities=e.infinities.eq(0)&&e.eternities.eq(0),e.requirementChecks.reality.noEternities=e.eternities.eq(0)},setTutorialState(e){e.infinities.gt(0)||e.eternities.gt(0)||e.realities.gt(0)||e.galaxies>0?e.tutorialState=4:e.dimensionBoosts>0&&(e.tutorialState=TUTORIAL_STATE.GALAXY)},migrateLastTenRuns(e){e.lastTenRuns=e.lastTenRuns.map(e=>[e[0],e[1],new Decimal(e[3]),new Decimal(e[2]).toNumber()]),e.lastTenEternities=e.lastTenEternities.map(e=>[e[0],e[1],new Decimal(1),new Decimal(e[2]).toNumber()])},migrateIPGen(e){e.infinityRebuyables[2]=e.offlineProd/5,delete e.offlineProd,delete e.offlineProdCost},renameCloudVariable(e){e.options.cloudEnabled=e.options.cloud,delete e.options.cloud},standardizeUncompletedTimes(e){e.bestInfinityTime===999999999999&&(e.bestInfinityTime=Number.MAX_VALUE),e.bestInfinityRealTime===999999999999&&(e.bestInfinityRealTime=Number.MAX_VALUE),e.bestEternity===999999999999&&(e.bestEternity=Number.MAX_VALUE);for(let t=0;t<e.challenge.normal.bestTimes.length;t++)e.challenge.normal.bestTimes[t]===26784e5&&(e.challenge.normal.bestTimes[t]=Number.MAX_VALUE);for(let t=0;t<e.challenge.infinity.bestTimes.length;t++)e.challenge.infinity.bestTimes[t]===26784e5&&(e.challenge.infinity.bestTimes[t]=Number.MAX_VALUE);for(let t=0;t<10;t++)e.lastTenRuns[t][0]===26784e5&&(e.lastTenRuns[t][0]=Number.MAX_VALUE),e.lastTenRuns[t][3]===26784e3&&(e.lastTenRuns[t][3]=Number.MAX_VALUE),e.lastTenEternities[t][0]===26784e5&&(e.lastTenEternities[t][0]=Number.MAX_VALUE),e.lastTenEternities[t][3]===26784e3&&(e.lastTenEternities[t][3]=Number.MAX_VALUE)},makeRecords(e){e.records.gameCreatedTime=e.gameCreatedTime,e.records.totalTimePlayed=e.totalTimePlayed,e.records.realTimePlayed=e.realTimePlayed,e.records.totalAntimatter=new Decimal(e.totalAntimatter),e.records.lastTenInfinities=e.lastTenRuns,e.records.lastTenEternities=e.lastTenEternities;for(let t=0;t<10;t++)e.records.lastTenInfinities[t][1]=new Decimal(e.lastTenRuns[t][1]),e.records.lastTenEternities[t][1]=new Decimal(e.lastTenEternities[t][1]);e.records.thisInfinity.time=e.thisInfinityTime,e.records.thisInfinity.realTime=e.thisInfinityTime,e.records.bestInfinity.time=e.bestInfinityTime,e.records.thisEternity.time=e.thisEternity,e.records.thisEternity.realTime=e.thisEternity,e.records.bestEternity.time=e.bestEternity,e.records.thisReality.time=e.thisReality,e.records.thisReality.realTime=e.thisReality},deleteOldRecords(e){delete e.gameCreatedTime,delete e.totalTimePlayed,delete e.realTimePlayed,delete e.totalAntimatter,delete e.lastTenRuns,delete e.lastTenEternities,delete e.thisInfinityTime,delete e.bestInfinityTime,delete e.thisEternity,delete e.bestEternity,delete e.thisReality},migrateAutobuyers(e){e.auto.autobuyerOn=e.options.autobuyerOn,delete e.options.bulkOn,delete e.options.autobuyerOn},migratePlayerVars(e){e.replicanti.boughtGalaxyCap=e.replicanti.gal,e.dilation.totalTachyonGalaxies=new Decimal(e.dilation.freeGalaxies),delete e.replicanti.gal,delete e.dilation.freeGalaxies},consolidateAuto(e){for(let t=0;t<8;t++)e.auto.infinityDims.all[t].isActive=e.infDimBuyers[t];for(let t=0;t<3;t++)e.auto.replicantiUpgrades.all[t].isActive=e.replicanti.auto[t];e.auto.replicantiGalaxies.isActive=e.replicanti.galaxybuyer,e.auto.ipMultBuyer.isActive=e.infMultBuyer,delete e.infDimBuyers,delete e.auto.infDimTimer,delete e.replicanti.galaxybuyer,delete e.replicanti.auto,delete e.auto.repUpgradeTimer,delete e.infMultBuyer},convertTimeTheoremPurchases(e){e.timestudy.amBought=new Decimal(e.timestudy.amcost).exponent/2e4-1,e.timestudy.ipBought=new Decimal(e.timestudy.ipcost).exponent/100,e.timestudy.epBought=Math.round(new Decimal(e.timestudy.epcost).log2()),delete e.timestudy.amcost,delete e.timestudy.ipcost,delete e.timestudy.epcost},infinitiedConversion(e){e.infinities=new Decimal(e.infinitied),e.infinitiesBanked=new Decimal(e.infinitiedBank),delete e.infinitied,delete e.infinitiedBank},deleteDimboostBulk(e){delete e.auto.dimBoost.bulk,e.infinityUpgrades.delete(`bulkBoost`)&&e.infinityUpgrades.add(`autobuyMaxDimboosts`)},removePriority(e){let t=e.auto.antimatterDims.all??e.auto.antimatterDims;for(let e=0;e<8;e++)delete t[e].priority;delete e.auto.tickspeed.priority},deleteFloatingTextOption(e){delete e.options.animations.floatingText},refactorDoubleIPRebuyable(e){let t=new Decimal(e.infMult).log2();delete e.infMult,e.infMult=Math.round(t),delete e.infMultCost},deletePostChallUnlocked(e){delete e.postChallUnlocked},infMultNameConversion(e){e.IPMultPurchases=e.infMult,delete e.infMult},etercreqConversion(e){e.etercreq&&(e.challenge.eternity.requirementBits|=1<<e.etercreq),delete e.etercreq},moveTS33(e){e.timestudy.studies.includes(33)&&!e.timestudy.studies.includes(22)&&(e.timestudy.studies.splice(e.timestudy.studies.indexOf(33),1),e.timestudy.theorem=new Decimal(e.timestudy.theorem).plus(2))},addBestPrestigeCurrency(e){e.records.thisReality.maxEP=e.eternityPoints,e.records.bestReality.bestEP=e.eternityPoints,e.records.thisEternity.maxIP=e.infinityPoints,e.records.thisReality.maxIP=e.infinityPoints},migrateTheme(e){e.options.themeClassic=e.options.theme===void 0?`Normal`:e.options.theme,delete e.options.themes,delete e.options.secretThemeKey},reworkBHPulsing(e){delete e.celestials.enslaved.storedFraction},prePatch(e){e.totalAntimatter=e.totalAntimatter||e.totalmoney||e.money,e.thisEternity=e.thisEternity||e.totalTimePlayed,e.version=e.version||0},patch(e,t){this.prePatch(e);let n=Wt([Player.defaultStart,e]),r=Object.keys(this.patches).map(parseFloat).sort(),i;for(;(i=r.find(e=>n.version<e&&e<t))!==void 0;){let e=this.patches[i];e(n),n.version=i}return n},patchPreReality(e){return this.patch(e,this.firstRealityMigration)},patchPostReality(e){return this.patch(e,Object.keys(Y.patches).map(e=>Number(e)).nMax()+1)}};Y.convertAutobuyerMode,Y.fixChallengeIds,Y.adjustMultCosts,Y.convertAchivementsToNumbers,Y.adjustGameCreatedTime,Y.moveSavedStudyTrees,Y.convertEPMult,Y.moveChallengeInfo,Y.adjustWhy,Y.adjustThemes,Y.removeAchPow,Y.adjustSacrificeConfirmation,Y.migrateNotation,Y.fixAutobuyers,Y.removeAutoIPProperties,Y.uniformDimensions,Y.removeEternityChallGoal,Y.renameMoney,Y.convertNews,Y.convertEternityCountToDecimal,Y.renameDimboosts,Y.migrateConfirmations,Y.removeOtherTickspeedProps,Y.renameNewsOption,Y.removeDimensionCosts,Y.renameTickspeedPurchaseBumps,Y.changeC8Handling,Y.convertAchievementsToBits,Y.convertTimeTheoremPurchases,Y.infinitiedConversion,Y.deleteDimboostBulk,Y.removePriority,Y.deleteFloatingTextOption,Y.refactorDoubleIPRebuyable,Y.deletePostChallUnlocked,Y.infMultNameConversion,Y.etercreqConversion,Y.moveTS33;const us={ONLINE:0,OFFLINE:1,RESERVE:2},ds=[{id:1,type:us.ONLINE,intervalStr:()=>`${formatInt(1)} minute`,interval:60},{id:2,type:us.ONLINE,intervalStr:()=>`${formatInt(5)} minutes`,interval:300},{id:3,type:us.ONLINE,intervalStr:()=>`${formatInt(20)} minutes`,interval:1200},{id:4,type:us.ONLINE,intervalStr:()=>`${formatInt(1)} hour`,interval:3600},{id:5,type:us.OFFLINE,intervalStr:()=>`${formatInt(10)} minutes`,interval:600},{id:6,type:us.OFFLINE,intervalStr:()=>`${formatInt(1)} hour`,interval:3600},{id:7,type:us.OFFLINE,intervalStr:()=>`${formatInt(5)} hours`,interval:5*3600},{id:8,type:us.RESERVE}],fs={currentSlot:0,saves:{0:void 0,1:void 0,2:void 0},saved:0,lastSaveTime:Date.now(),lastCloudSave:Date.now(),offlineEnabled:void 0,offlineTicks:void 0,lastUpdateOnLoad:0,lastBackupTimes:[],oldBackupTimer:0,ignoreBackupTimer:!0,maxOfflineTicks(e,t=this.offlineTicks){let n=Math.clampMax(Math.floor(e/33),1e6);return Math.clampMax(t,n)},get localStorageKey(){return`dimensionSave`},backupDataKey(e,t){return`backupSave-${e}-${t}`},backupTimeKey(e){return`backupTimes-${e}`},load(){let e=localStorage.getItem(this.localStorageKey),t=GameSaveSerializer.deserialize(e);this.loadRoot(t),Achievements.updateSteamStatus()},loadRoot(e){if(e===void 0){this.currentSlot=0,this.loadPlayerObject(Player.defaultStart);return}if(e.saves===void 0){this.saves={0:e,1:void 0,2:void 0},this.currentSlot=0,this.loadPlayerObject(e),this.loadBackupTimes(),this.backupOfflineSlots(),this.save(!0);return}this.saves=e.saves,this.currentSlot=e.current,this.loadPlayerObject(this.saves[this.currentSlot]),this.loadBackupTimes(),this.backupOfflineSlots()},loadSlot(e){this.currentSlot=e,this.save(!0),this.loadPlayerObject(this.saves[e]??Player.defaultStart),this.loadBackupTimes(),this.backupOfflineSlots(),Tabs.all.find(e=>e.id===player.options.lastOpenTab).show(!1),Modal.hideAll(),Cloud.resetTempState(),GameUI.notify.info(`Game loaded`),Achievements.updateSteamStatus()},import(e){if(tryImportSecret(e)||Theme.tryUnlock(e))return;let t=GameSaveSerializer.deserialize(e);if(this.checkPlayerObject(t)!==``){Modal.message.show(`Could not load the save (format unrecognized or invalid).`);return}this.oldBackupTimer=player.backupTimer,Modal.hideAll(),Quote.clearAll(),AutomatorBackend.clearEditor(),this.loadPlayerObject(t),GlyphAppearanceHandler.clearInvalidCosmetics(),player.speedrun?.isActive&&Speedrun.setSegmented(!0),this.save(!0),Cloud.resetTempState(),this.resetBackupTimer(),Tab.options.subtabs[0].show(),GameUI.notify.info(`Game imported`),Achievements.updateSteamStatus()},importAsFile(){if(GameEnd.creditsEverClosed)return;let e=new FileReader().readAsText(file);this.import(e)},overwriteSlot(e,t){this.saves[e]=t,e===this.currentSlot&&this.loadPlayerObject(t),this.save(!0)},checkPlayerObject(e){if(e==null)return`Save decoding failed (invalid format)`;if(e.money===void 0&&e.antimatter===void 0)return`Save does not have antimatter property`;if(e.version===void 0||e.version<25)return`Save is from an earlier version of AD. Import to vanilla first.`;let t=[];function n(e,r){let i=!1;for(let a in e){let o=e[a],s;switch(typeof o){case`object`:s=n(o,`${r}.${a}`),i||=s;break;case`number`:s=Number.isNaN(o),i||=s,s&&t.push(`${r}.${a}`);break;case`string`:s=o===`NaN`,i||=s,s&&t.push(`${r}.${a}`);break}}return i}return n(e,`player`),t.length===0?``:`${quantify(`NaN player property`,t.length)} found:
      ${t.join(`, `)}`},canSave(e=!1){let t=GlyphSelection.active,n=ui.$viewModel.modal.progressBar!==void 0&&!e;return!(GameEnd.endState>=END_STATE_MARKERS.SAVE_DISABLED&&!GameEnd.removeAdditionalEnd||GameEnd.endState>=END_STATE_MARKERS.INTERACTIVITY_DISABLED)&&!(t||n)},save(e=!0,t=!1){if(!this.canSave())return;this.lastSaveTime=Date.now(),GameIntervals.save.restart(),t&&++this.saved>99&&SecretAchievement(12).unlock();let n={current:this.currentSlot,saves:this.saves};localStorage.setItem(this.localStorageKey,GameSaveSerializer.serialize(n)),e||GameUI.notify.info(`Game saved`)},saveToBackup(e,t){this.canSave(!0)&&(localStorage.setItem(this.backupDataKey(this.currentSlot,e),GameSaveSerializer.serialize(player)),this.lastBackupTimes[e]={backupTimer:t,date:Date.now()},localStorage.setItem(this.backupTimeKey(this.currentSlot),GameSaveSerializer.serialize(this.lastBackupTimes)))},loadFromBackup(e){let t=localStorage.getItem(this.backupDataKey(this.currentSlot,e));return GameSaveSerializer.deserialize(t)},backupOfflineSlots(){let e=Date.now()-this.lastUpdateOnLoad,t=ds.filter(e=>e.type===us.OFFLINE).sort((e,t)=>t.interval-e.interval);for(let n of t)if(e>1e3*n.interval){this.saveToBackup(n.id,player.backupTimer);break}},backupOnlineSlots(e){let t=player.backupTimer;for(let n of e)this.saveToBackup(n,t)},loadBackupTimes(){this.lastBackupTimes=GameSaveSerializer.deserialize(localStorage.getItem(this.backupTimeKey(this.currentSlot))),this.lastBackupTimes||={};for(let e of ds){let t=e.id;this.lastBackupTimes[t]||(this.lastBackupTimes[t]={backupTimer:0,date:0})}},tryOnlineBackups(){let e=[];for(let t of ds.filter(e=>e.type===us.ONLINE)){let n=t.id,r=player.backupTimer-(this.lastBackupTimes[n]?.backupTimer??0);1e3*t.interval-r<=800&&e.push(n)}this.backupOnlineSlots(e)},resetBackupTimer(){let e=Object.values(this.lastBackupTimes).map(e=>e&&e.backupTimer).max();player.backupTimer=Math.max(this.oldBackupTimer,player.backupTimer,e.toNumber())},saveToReserveSlot(){let e=ds.find(e=>e.type===us.RESERVE).id;this.saveToBackup(e,player.backupTimer)},export(){copyToClipboard(this.exportModifiedSave()),GameUI.notify.info(`Exported current savefile to your clipboard`)},get exportDateString(){let e=new Date,t=e.getFullYear(),n=e.getMonth()+1,r=e.getDate();return`${t}-${n}-${r}`},exportAsFile(){if(!this.canSave())return;player.options.exportedFileCount++,this.save(!0);let e=player.options.saveFileName?` - ${player.options.saveFileName},`:``,t=this.exportModifiedSave();ps(`AD Save, Slot ${fs.currentSlot+1}${e} #${player.options.exportedFileCount} \
(${this.exportDateString}).txt`,t),GameUI.notify.info(`Successfully downloaded current save file to your computer`)},exportBackupsAsFile(){player.options.exportedFileCount++;let e={};for(let t of ds.map(e=>e.id)){let n=this.loadFromBackup(t);n&&(e[t]=n)}e.time=GameSaveSerializer.deserialize(localStorage.getItem(this.backupTimeKey(this.currentSlot))),ps(`AD Save Backups, Slot ${fs.currentSlot+1} #${player.options.exportedFileCount} \
(${this.exportDateString}).txt`,GameSaveSerializer.serialize(e)),GameUI.notify.info(`Successfully downloaded save file backups to your computer`)},importBackupsFromFile(e){let t=GameSaveSerializer.deserialize(e);localStorage.setItem(this.backupTimeKey(this.currentSlot),GameSaveSerializer.serialize(t.time));for(let e of Object.keys(t)){if(e===`time`)continue;let n=Number(e),r=this.backupDataKey(this.currentSlot,n);localStorage.setItem(r,GameSaveSerializer.serialize(t[e])),this.backupTimeData[n]={backupTimer:t.time[n].backupTimer,date:t.time[n].date}}this.resetBackupTimer(),GameUI.notify.info(`Successfully imported save file backups from file`)},exportModifiedSave(){let e=player.speedrun.isSegmented;Speedrun.setSegmented(!0);let t=GameSaveSerializer.serialize(player);return Speedrun.setSegmented(e),t},hardReset(){this.loadPlayerObject(Player.defaultStart),this.save(!0),Tab.dimensions.antimatter.show(),Cloud.resetTempState()},loadPlayerObject(e){this.saved=0;let t=this.checkPlayerObject(e);if(e===Player.defaultStart||t!==``)player=Wt([{},Player.defaultStart]),player.records.gameCreatedTime=Date.now(),player.lastUpdate=Date.now();else{let t=e.version<Y.firstRealityMigration;if(player=Y.patchPreReality(e),t&&EventHub.dispatch(GAME_EVENT.SAVE_CONVERTED_FROM_PREVIOUS_VERSION),player.version>=83){let e=e=>(e.level=new Decimal(e.level),e.rawLevel=new Decimal(e.rawLevel),e.strength=new Decimal(e.strength),e);player.celestials.teresa.bestAMSet=player.celestials.teresa.bestAMSet.map(t=>e(t)),player.celestials.v.runGlyphs=player.celestials.v.runGlyphs.map(t=>t.map(t=>e(t))),player.reality.glyphs.active=player.reality.glyphs.active.map(t=>e(t)),player.reality.glyphs.inventory=player.reality.glyphs.inventory.map(t=>e(t));for(let t=0;t<7;t++)player.reality.glyphs.sets[t].glyphs=player.reality.glyphs.sets[t].glyphs.map(t=>e(t));player.records.bestReality.RMSet=player.records.bestReality.RMSet?.map(t=>e(t)),player.records.bestReality.RMminSet=player.records.bestReality.RMminSet?.map(t=>e(t)),player.records.bestReality.glyphLevelSet=player.records.bestReality.glyphLevelSet?.map(t=>e(t)),player.records.bestReality.imCapSet=player.records.bestReality.imCapSet?.map(t=>e(t)),player.records.bestReality.laitelaSet=player.records.bestReality.laitelaSet?.map(t=>e(t)),player.records.bestReality.speedSet=player.records.bestReality.speedSet?.map(t=>e(t))}for(let e in player.reality.glyphs.filter.types)player.reality.glyphs.filter.types[e].rarity=new Decimal(player.reality.glyphs.filter.types[e].rarity);player=Y.patchPostReality(player)}this.saves[this.currentSlot]=player,this.lastUpdateOnLoad=player.lastUpdate,guardFromNaNValues(player),ui.view.news=player.options.news.enabled,ui.view.newUI=player.options.newUI,ui.view.tutorialState=player.tutorialState,ui.view.tutorialActive=player.tutorialActive,ECTimeStudyState.invalidateCachedRequirements(),recalculateAllGlyphs(),checkPerkValidity(),V.updateTotalRunUnlocks(),Enslaved.boostReality=!1,GameEnd.additionalEnd=0,Theme.set(Theme.currentName()),Glyphs.unseen=[],Glyphs.unequipped=[],Notations.find(player.options.notation).setAsCurrent(!0),Da.exponentCommas.min=10**player.options.notationDigits.comma,Da.exponentCommas.max=10**player.options.notationDigits.notation,EventHub.dispatch(GAME_EVENT.GAME_LOAD),AutomatorBackend.initializeFromSave(),Lazy.invalidateAll();let n=Date.now()-player.lastUpdate;if((this.offlineEnabled??player.options.offlineProgress)&&!Speedrun.isPausedAtStart()){let e=n;player.speedrun.offlineTimeUsed+=e,e>300*1e3&&player.celestials.enslaved.autoStoreReal&&(e=Enslaved.autoStoreRealTime(e)),e>1e4?simulateTime(e/1e3,!1,e<50*1e3):this.postLoadStuff()}else Speedrun.isPausedAtStart()||Achievement(35).tryUnlock(),player.lastUpdate=Date.now(),this.postLoadStuff();n>1e3*86400*14&&([`S4`,`S9`].includes(Theme.current().name)&&Theme.set(`Normal`),setTimeout(()=>{Notations.current.isPainful&&Notation.mixedScientific.setAsCurrent()},2500),setTimeout(()=>Modal.catchup.show(n),5e3))},postLoadStuff(){GameIntervals.restart(),fs.ignoreBackupTimer=!1,Enslaved.nextTickDiff=new Decimal(player.options.updateRate),player.celestials.enslaved.storedReal.gte(1440*60*1e3)&&SecretAchievement(46).unlock(),GameUI.update();for(let e of AlchemyResources.all)e.before=e.amount}};function ps(e,t){let n=document.createElement(`a`);if(n.setAttribute(`href`,`data:text/plain;charset=utf-8,${encodeURIComponent(t)}`),n.setAttribute(`download`,e),document.createEvent){let e=document.createEvent(`MouseEvents`);e.initEvent(`click`,!0,!0),n.dispatchEvent(e)}else n.click()}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var ms={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},X=function(e,t){if(!e)throw hs(t)},hs=function(e){return Error(`Firebase Database (`+ms.SDK_VERSION+`) INTERNAL ASSERT FAILED: `+e)},gs=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)==55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)==56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},_s=function(e){let t=[],n=0,r=0;for(;n<e.length;){let i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){let a=e[n++];t[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){let a=e[n++],o=e[n++],s=e[n++],c=((i&7)<<18|(a&63)<<12|(o&63)<<6|s&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{let a=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return t.join(``)},vs={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789`,get ENCODED_VALS(){return this.ENCODED_VALS_BASE+`+/=`},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+`-_.`},HAS_NATIVE_SUPPORT:typeof atob==`function`,encodeByteArray(e,t){if(!Array.isArray(e))throw Error(`encodeByteArray takes an array as a parameter`);this.init_();let n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){let i=e[t],a=t+1<e.length,o=a?e[t+1]:0,s=t+2<e.length,c=s?e[t+2]:0,l=i>>2,u=(i&3)<<4|o>>4,d=(o&15)<<2|c>>6,f=c&63;s||(f=64,a||(d=64)),r.push(n[l],n[u],n[d],n[f])}return r.join(``)},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(gs(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):_s(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){let i=n[e.charAt(t++)],a=t<e.length?n[e.charAt(t)]:0;++t;let o=t<e.length?n[e.charAt(t)]:64;++t;let s=t<e.length?n[e.charAt(t)]:64;if(++t,i==null||a==null||o==null||s==null)throw new ys;let c=i<<2|a>>4;if(r.push(c),o!==64){let e=a<<4&240|o>>2;if(r.push(e),s!==64){let e=o<<6&192|s;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},ys=class extends Error{constructor(){super(...arguments),this.name=`DecodeBase64StringError`}},bs=function(e){let t=gs(e);return vs.encodeByteArray(t,!0)},xs=function(e){return bs(e).replace(/\./g,``)},Ss=function(e){try{return vs.decodeString(e,!0)}catch(e){console.error(`base64Decode failed: `,e)}return null};
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Cs(e){return ws(void 0,e)}function ws(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:let n=t;return new Date(n.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(let n in t){if(!t.hasOwnProperty(n)||!Ts(n))continue;e[n]=ws(e[n],t[n])}return e}function Ts(e){return e!==`__proto__`}
/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Es(){if(typeof self<`u`)return self;if(typeof window<`u`)return window;if(typeof global<`u`)return global;throw Error(`Unable to locate global object.`)}
/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Ds=()=>Es().__FIREBASE_DEFAULTS__,Os=()=>{if(typeof process>`u`)return;let e={}.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},ks=()=>{if(typeof document>`u`)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=e&&Ss(e[1]);return t&&JSON.parse(t)},As=()=>{try{return Ds()||Os()||ks()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},js=e=>As()?.emulatorHosts?.[e],Ms=e=>{let t=js(e);if(!t)return;let n=t.lastIndexOf(`:`);if(n<=0||n+1===t.length)throw Error(`Invalid host ${t} with no separate hostname and port!`);let r=parseInt(t.substring(n+1),10);return t[0]===`[`?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Ns=()=>As()?.config,Ps=e=>As()?.[`_${e}`],Fs=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e==`function`&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}};
/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Is(e,t){if(e.uid)throw Error(`The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.`);let n={alg:`none`,type:`JWT`},r=t||`demo-project`,i=e.iat||0,a=e.sub||e.user_id;if(!a)throw Error(`mockUserToken must contain 'sub' or 'user_id' field!`);let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:`custom`,identities:{}}},e);return[xs(JSON.stringify(n)),xs(JSON.stringify(o)),``].join(`.`)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Ls(){return typeof navigator<`u`&&typeof navigator.userAgent==`string`?navigator.userAgent:``}function Rs(){return typeof window<`u`&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ls())}function zs(){let e=typeof chrome==`object`?chrome.runtime:typeof browser==`object`?browser.runtime:void 0;return typeof e==`object`&&e.id!==void 0}function Bs(){return typeof navigator==`object`&&navigator.product===`ReactNative`}function Vs(){let e=Ls();return e.indexOf(`MSIE `)>=0||e.indexOf(`Trident/`)>=0}function Hs(){return ms.NODE_CLIENT===!0||ms.NODE_ADMIN===!0}function Us(){try{return typeof indexedDB==`object`}catch{return!1}}function Ws(){return new Promise((e,t)=>{try{let n=!0,r=`validate-browser-context-for-indexeddb-analytics-module`,i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{t(i.error?.message||``)}}catch(e){t(e)}})}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Gs=`FirebaseError`,Ks=class e extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=Gs,Object.setPrototypeOf(this,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qs.prototype.create)}},qs=class{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){let n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],a=i?Js(i,n):`Error`,o=`${this.serviceName}: ${a} (${r}).`;return new Ks(r,o,n)}};function Js(e,t){return e.replace(Ys,(e,n)=>{let r=t[n];return r==null?`<${n}?>`:String(r)})}var Ys=/\{\$([^}]+)}/g;
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Xs(e){return JSON.parse(e)}function Zs(e){return JSON.stringify(e)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Qs=function(e){let t={},n={},r={},i=``;try{let a=e.split(`.`);t=Xs(Ss(a[0])||``),n=Xs(Ss(a[1])||``),i=a[2],r=n.d||{},delete n.d}catch{}return{header:t,claims:n,data:r,signature:i}},$s=function(e){let t=Qs(e),n=t.claims;return!!n&&typeof n==`object`&&n.hasOwnProperty(`iat`)},ec=function(e){let t=Qs(e).claims;return typeof t==`object`&&t.admin===!0};
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function tc(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function nc(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function rc(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function ic(e,t,n){let r={};for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function ac(e,t){if(e===t)return!0;let n=Object.keys(e),r=Object.keys(t);for(let i of n){if(!r.includes(i))return!1;let n=e[i],a=t[i];if(oc(n)&&oc(a)){if(!ac(n,a))return!1}else if(n!==a)return!1}for(let e of r)if(!n.includes(e))return!1;return!0}function oc(e){return typeof e==`object`&&!!e}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function sc(e){let t=[];for(let[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+`=`+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+`=`+encodeURIComponent(r));return t.length?`&`+t.join(`&`):``}function cc(e){let t={};return e.replace(/^\?/,``).split(`&`).forEach(e=>{if(e){let[n,r]=e.split(`=`);t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function lc(e){let t=e.indexOf(`?`);if(!t)return``;let n=e.indexOf(`#`,t);return e.substring(t,n>0?n:void 0)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var uc=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||=0;let n=this.W_;if(typeof e==`string`)for(let r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let e=16;e<80;e++){let t=n[e-3]^n[e-8]^n[e-14]^n[e-16];n[e]=(t<<1|t>>>31)&4294967295}let r=this.chain_[0],i=this.chain_[1],a=this.chain_[2],o=this.chain_[3],s=this.chain_[4],c,l;for(let e=0;e<80;e++){e<40?e<20?(c=o^i&(a^o),l=1518500249):(c=i^a^o,l=1859775393):e<60?(c=i&a|o&(i|a),l=2400959708):(c=i^a^o,l=3395469782);let t=(r<<5|r>>>27)+c+s+l+n[e]&4294967295;s=o,o=a,a=(i<<30|i>>>2)&4294967295,i=r,r=t}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+o&4294967295,this.chain_[4]=this.chain_[4]+s&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);let n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;for(;r<t;){if(a===0)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if(typeof e==`string`){for(;r<t;)if(i[a]=e.charCodeAt(r),++a,++r,a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++a,++r,a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}digest(){let e=[],t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let e=this.blockSize-1;e>=56;e--)this.buf_[e]=t&255,t/=256;this.compress_(this.buf_);let n=0;for(let t=0;t<5;t++)for(let r=24;r>=0;r-=8)e[n]=this.chain_[t]>>r&255,++n;return e}};function dc(e,t){let n=new fc(e,t);return n.subscribe.bind(n)}var fc=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(e===void 0&&t===void 0&&n===void 0)throw Error(`Missing Observer.`);r=pc(e,[`next`,`error`,`complete`])?e:{next:e,error:t,complete:n},r.next===void 0&&(r.next=mc),r.error===void 0&&(r.error=mc),r.complete===void 0&&(r.complete=mc);let i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],--this.observerCount,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(e){typeof console<`u`&&console.error&&console.error(e)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function pc(e,t){if(typeof e!=`object`||!e)return!1;for(let n of t)if(n in e&&typeof e[n]==`function`)return!0;return!1}function mc(){}function hc(e,t){return`${e} failed: ${t} argument `}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var gc=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){let t=i-55296;r++,X(r<e.length,`Surrogate pair missing trail surrogate.`);let n=e.charCodeAt(r)-56320;i=65536+(t<<10)+n}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},_c=function(e){let t=0;for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};
/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function vc(e){return e&&e._delegate?e._delegate:e}var yc=class{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode=`LAZY`,this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}},bc=`[DEFAULT]`,xc=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let e=new Fs;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{let n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(e){if(n)return null;throw e}else if(n)return null;else throw Error(`Service ${this.name} is not available`)}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(Cc(e))try{this.getOrInitializeService({instanceIdentifier:bc})}catch{}for(let[e,t]of this.instancesDeferred.entries()){let n=this.normalizeInstanceIdentifier(e);try{let e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch{}}}}clearInstance(e=bc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>`INTERNAL`in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>`_delete`in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=bc){return this.instances.has(e)}getOptions(e=bc){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(let[e,t]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(e);n===i&&t.resolve(r)}return r}onInit(e,t){let n=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(n)??new Set;r.add(e),this.onInitCallbacks.set(n,r);let i=this.instances.get(n);return i&&e(i,n),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){let n=this.onInitCallbacks.get(t);if(n)for(let r of n)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Sc(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=bc){return this.component?this.component.multipleInstances?e:bc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!==`EXPLICIT`}};function Sc(e){return e===`[DEFAULT]`?void 0:e}function Cc(e){return e.instantiationMode===`EAGER`}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var wc=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new xc(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}},Tc=[],Ec;(function(e){e[e.DEBUG=0]=`DEBUG`,e[e.VERBOSE=1]=`VERBOSE`,e[e.INFO=2]=`INFO`,e[e.WARN=3]=`WARN`,e[e.ERROR=4]=`ERROR`,e[e.SILENT=5]=`SILENT`})(Ec||={});var Dc={debug:Ec.DEBUG,verbose:Ec.VERBOSE,info:Ec.INFO,warn:Ec.WARN,error:Ec.ERROR,silent:Ec.SILENT},Oc=Ec.INFO,kc={[Ec.DEBUG]:`log`,[Ec.VERBOSE]:`log`,[Ec.INFO]:`info`,[Ec.WARN]:`warn`,[Ec.ERROR]:`error`},Ac=(e,t,...n)=>{if(t<e.logLevel)return;let r=new Date().toISOString(),i=kc[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw Error(`Attempted to log a message with an invalid logType (value: ${t})`)},jc=class{constructor(e){this.name=e,this._logLevel=Oc,this._logHandler=Ac,this._userLogHandler=null,Tc.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ec))throw TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e==`string`?Dc[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!=`function`)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ec.DEBUG,...e),this._logHandler(this,Ec.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ec.VERBOSE,...e),this._logHandler(this,Ec.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ec.INFO,...e),this._logHandler(this,Ec.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ec.WARN,...e),this._logHandler(this,Ec.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ec.ERROR,...e),this._logHandler(this,Ec.ERROR,...e)}},Mc=(e,t)=>t.some(t=>e instanceof t),Nc,Pc;function Fc(){return Nc||=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]}function Ic(){return Pc||=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey]}var Lc=new WeakMap,Rc=new WeakMap,zc=new WeakMap,Bc=new WeakMap,Vc=new WeakMap;function Hc(e){let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener(`success`,i),e.removeEventListener(`error`,a)},i=()=>{t(Jc(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener(`success`,i),e.addEventListener(`error`,a)});return t.then(t=>{t instanceof IDBCursor&&Lc.set(t,e)}).catch(()=>{}),Vc.set(t,e),t}function Uc(e){if(Rc.has(e))return;let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener(`complete`,i),e.removeEventListener(`error`,a),e.removeEventListener(`abort`,a)},i=()=>{t(),r()},a=()=>{n(e.error||new DOMException(`AbortError`,`AbortError`)),r()};e.addEventListener(`complete`,i),e.addEventListener(`error`,a),e.addEventListener(`abort`,a)});Rc.set(e,t)}var Wc={get(e,t,n){if(e instanceof IDBTransaction){if(t===`done`)return Rc.get(e);if(t===`objectStoreNames`)return e.objectStoreNames||zc.get(e);if(t===`store`)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Jc(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t===`done`||t===`store`)?!0:t in e}};function Gc(e){Wc=e(Wc)}function Kc(e){return e===IDBDatabase.prototype.transaction&&!(`objectStoreNames`in IDBTransaction.prototype)?function(t,...n){let r=e.call(Yc(this),t,...n);return zc.set(r,t.sort?t.sort():[t]),Jc(r)}:Ic().includes(e)?function(...t){return e.apply(Yc(this),t),Jc(Lc.get(this))}:function(...t){return Jc(e.apply(Yc(this),t))}}function qc(e){return typeof e==`function`?Kc(e):(e instanceof IDBTransaction&&Uc(e),Mc(e,Fc())?new Proxy(e,Wc):e)}function Jc(e){if(e instanceof IDBRequest)return Hc(e);if(Bc.has(e))return Bc.get(e);let t=qc(e);return t!==e&&(Bc.set(e,t),Vc.set(t,e)),t}var Yc=e=>Vc.get(e);function Xc(e,t,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){let o=indexedDB.open(e,t),s=Jc(o);return r&&o.addEventListener(`upgradeneeded`,e=>{r(Jc(o.result),e.oldVersion,e.newVersion,Jc(o.transaction),e)}),n&&o.addEventListener(`blocked`,e=>n(e.oldVersion,e.newVersion,e)),s.then(e=>{a&&e.addEventListener(`close`,()=>a()),i&&e.addEventListener(`versionchange`,e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),s}var Zc=[`get`,`getKey`,`getAll`,`getAllKeys`,`count`],Qc=[`put`,`add`,`delete`,`clear`],$c=new Map;function el(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t==`string`))return;if($c.get(t))return $c.get(t);let n=t.replace(/FromIndex$/,``),r=t!==n,i=Qc.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Zc.includes(n)))return;let a=async function(e,...t){let a=this.transaction(e,i?`readwrite`:`readonly`),o=a.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),i&&a.done]))[0]};return $c.set(t,a),a}Gc(e=>({...e,get:(t,n,r)=>el(t,n)||e.get(t,n,r),has:(t,n)=>!!el(t,n)||e.has(t,n)}));
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var tl=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(nl(e)){let t=e.getImmediate();return`${t.library}/${t.version}`}else return null}).filter(e=>e).join(` `)}};function nl(e){return e.getComponent()?.type===`VERSION`}var rl=`@firebase/app`,il=`0.9.13`,al=new jc(`@firebase/app`),ol=`@firebase/app-compat`,sl=`@firebase/analytics-compat`,cl=`@firebase/analytics`,ll=`@firebase/app-check-compat`,ul=`@firebase/app-check`,dl=`@firebase/auth`,fl=`@firebase/auth-compat`,pl=`@firebase/database`,ml=`@firebase/database-compat`,hl=`@firebase/functions`,gl=`@firebase/functions-compat`,_l=`@firebase/installations`,vl=`@firebase/installations-compat`,yl=`@firebase/messaging`,bl=`@firebase/messaging-compat`,xl=`@firebase/performance`,Sl=`@firebase/performance-compat`,Cl=`@firebase/remote-config`,wl=`@firebase/remote-config-compat`,Tl=`@firebase/storage`,El=`@firebase/storage-compat`,Dl=`@firebase/firestore`,Ol=`@firebase/firestore-compat`,kl=`firebase`,Al=`9.23.0`,jl=`[DEFAULT]`,Ml={[rl]:`fire-core`,[ol]:`fire-core-compat`,[cl]:`fire-analytics`,[sl]:`fire-analytics-compat`,[ul]:`fire-app-check`,[ll]:`fire-app-check-compat`,[dl]:`fire-auth`,[fl]:`fire-auth-compat`,[pl]:`fire-rtdb`,[ml]:`fire-rtdb-compat`,[hl]:`fire-fn`,[gl]:`fire-fn-compat`,[_l]:`fire-iid`,[vl]:`fire-iid-compat`,[yl]:`fire-fcm`,[bl]:`fire-fcm-compat`,[xl]:`fire-perf`,[Sl]:`fire-perf-compat`,[Cl]:`fire-rc`,[wl]:`fire-rc-compat`,[Tl]:`fire-gcs`,[El]:`fire-gcs-compat`,[Dl]:`fire-fst`,[Ol]:`fire-fst-compat`,"fire-js":`fire-js`,[kl]:`fire-js-all`},Nl=new Map,Pl=new Map;function Fl(e,t){try{e.container.addComponent(t)}catch(n){al.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Il(e){let t=e.name;if(Pl.has(t))return al.debug(`There were multiple attempts to register component ${t}.`),!1;Pl.set(t,e);for(let t of Nl.values())Fl(t,e);return!0}function Ll(e,t){let n=e.container.getProvider(`heartbeat`).getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}var Rl=new qs(`app`,`Firebase`,{"no-app":`No Firebase App '{$appName}' has been created - call initializeApp() first`,"bad-app-name":`Illegal App name: '{$appName}`,"duplicate-app":`Firebase App named '{$appName}' already exists with different options or config`,"app-deleted":`Firebase App named '{$appName}' already deleted`,"no-options":`Need to provide options, when not being deployed to hosting via source.`,"invalid-app-argument":`firebase.{$appName}() takes either no argument or a Firebase App instance.`,"invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":`Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.`,"idb-get":`Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.`,"idb-set":`Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.`,"idb-delete":`Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.`}),zl=class{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new yc(`app`,()=>this,`PUBLIC`))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Rl.create(`app-deleted`,{appName:this._name})}},Bl=Al;function Vl(e,t={}){let n=e;typeof t!=`object`&&(t={name:t});let r=Object.assign({name:jl,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!=`string`||!i)throw Rl.create(`bad-app-name`,{appName:String(i)});if(n||=Ns(),!n)throw Rl.create(`no-options`);let a=Nl.get(i);if(a){if(ac(n,a.options)&&ac(r,a.config))return a;throw Rl.create(`duplicate-app`,{appName:i})}let o=new wc(i);for(let e of Pl.values())o.addComponent(e);let s=new zl(n,r,o);return Nl.set(i,s),s}function Hl(e=jl){let t=Nl.get(e);if(!t&&e===`[DEFAULT]`&&Ns())return Vl();if(!t)throw Rl.create(`no-app`,{appName:e});return t}function Ul(e,t,n){let r=Ml[e]??e;n&&(r+=`-${n}`);let i=r.match(/\s|\//),a=t.match(/\s|\//);if(i||a){let e=[`Unable to register library "${r}" with version "${t}":`];i&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&e.push(`and`),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),al.warn(e.join(` `));return}Il(new yc(`${r}-version`,()=>({library:r,version:t}),`VERSION`))}
/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Wl=`firebase-heartbeat-database`,Gl=`firebase-heartbeat-store`,Kl=null;function ql(){return Kl||=Xc(Wl,1,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(Gl)}}}).catch(e=>{throw Rl.create(`idb-open`,{originalErrorMessage:e.message})}),Kl}async function Jl(e){try{return await(await ql()).transaction(Gl).objectStore(Gl).get(Xl(e))}catch(e){if(e instanceof Ks)al.warn(e.message);else{let t=Rl.create(`idb-get`,{originalErrorMessage:e?.message});al.warn(t.message)}}}async function Yl(e,t){try{let n=(await ql()).transaction(Gl,`readwrite`);await n.objectStore(Gl).put(t,Xl(e)),await n.done}catch(e){if(e instanceof Ks)al.warn(e.message);else{let t=Rl.create(`idb-set`,{originalErrorMessage:e?.message});al.warn(t.message)}}}function Xl(e){return`${e.name}!${e.options.appId}`}
/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Zl=1024,Ql=720*60*60*1e3,$l=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider(`app`).getImmediate();this._storage=new nu(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){let e=this.container.getProvider(`platform-logger`).getImmediate().getPlatformInfoString(),t=eu();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===t||this._heartbeatsCache.heartbeats.some(e=>e.date===t)))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{let t=new Date(e.date).valueOf();return Date.now()-t<=Ql}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return``;let e=eu(),{heartbeatsToSend:t,unsentEntries:n}=tu(this._heartbeatsCache.heartbeats),r=xs(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}};function eu(){return new Date().toISOString().substring(0,10)}function tu(e,t=Zl){let n=[],r=e.slice();for(let i of e){let e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),ru(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ru(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var nu=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Us()?Ws().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise&&await Jl(this.app)||{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let t=await this.read();return Yl(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let t=await this.read();return Yl(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:[...t.heartbeats,...e.heartbeats]})}else return}};function ru(e){return xs(JSON.stringify({version:2,heartbeats:e})).length}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function iu(e){Il(new yc(`platform-logger`,e=>new tl(e),`PRIVATE`)),Il(new yc(`heartbeat`,e=>new $l(e),`PRIVATE`)),Ul(rl,il,e),Ul(rl,il,`esm2017`),Ul(`fire-js`,``)}iu(``);function au(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var ou=au,su=new qs(`auth`,`Firebase`,au()),cu=new jc(`@firebase/auth`);function lu(e,...t){cu.logLevel<=Ec.WARN&&cu.warn(`Auth (${Bl}): ${e}`,...t)}function uu(e,...t){cu.logLevel<=Ec.ERROR&&cu.error(`Auth (${Bl}): ${e}`,...t)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function du(e,...t){throw mu(e,...t)}function fu(e,...t){return mu(e,...t)}function pu(e,t,n){let r=Object.assign(Object.assign({},ou()),{[t]:n});return new qs(`auth`,`Firebase`,r).create(t,{appName:e.name})}function mu(e,...t){if(typeof e!=`string`){let n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return su.create(e,...t)}function Z(e,t,...n){if(!e)throw mu(t,...n)}function hu(e){let t=`INTERNAL ASSERTION FAILED: `+e;throw uu(t),Error(t)}function gu(e,t){e||hu(t)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function _u(){return typeof self<`u`&&self.location?.href||``}function vu(){return yu()===`http:`||yu()===`https:`}function yu(){return typeof self<`u`&&self.location?.protocol||null}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function bu(){return typeof navigator<`u`&&navigator&&`onLine`in navigator&&typeof navigator.onLine==`boolean`&&(vu()||zs()||`connection`in navigator)?navigator.onLine:!0}function xu(){if(typeof navigator>`u`)return null;let e=navigator;return e.languages&&e.languages[0]||e.language||null}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Su=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,gu(t>e,`Short delay should be less than long delay!`),this.isMobile=Rs()||Bs()}get(){return bu()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Cu(e,t){gu(e.emulator,`Emulator should always be set here`);let{url:n}=e.emulator;return t?`${n}${t.startsWith(`/`)?t.slice(1):t}`:n}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var wu=class{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<`u`&&`fetch`in self)return self.fetch;hu(`Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`)}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<`u`&&`Headers`in self)return self.Headers;hu(`Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`)}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<`u`&&`Response`in self)return self.Response;hu(`Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`)}},Tu={CREDENTIAL_MISMATCH:`custom-token-mismatch`,MISSING_CUSTOM_TOKEN:`internal-error`,INVALID_IDENTIFIER:`invalid-email`,MISSING_CONTINUE_URI:`internal-error`,INVALID_PASSWORD:`wrong-password`,MISSING_PASSWORD:`missing-password`,EMAIL_EXISTS:`email-already-in-use`,PASSWORD_LOGIN_DISABLED:`operation-not-allowed`,INVALID_IDP_RESPONSE:`invalid-credential`,INVALID_PENDING_TOKEN:`invalid-credential`,FEDERATED_USER_ID_ALREADY_LINKED:`credential-already-in-use`,MISSING_REQ_TYPE:`internal-error`,EMAIL_NOT_FOUND:`user-not-found`,RESET_PASSWORD_EXCEED_LIMIT:`too-many-requests`,EXPIRED_OOB_CODE:`expired-action-code`,INVALID_OOB_CODE:`invalid-action-code`,MISSING_OOB_CODE:`internal-error`,CREDENTIAL_TOO_OLD_LOGIN_AGAIN:`requires-recent-login`,INVALID_ID_TOKEN:`invalid-user-token`,TOKEN_EXPIRED:`user-token-expired`,USER_NOT_FOUND:`user-token-expired`,TOO_MANY_ATTEMPTS_TRY_LATER:`too-many-requests`,INVALID_CODE:`invalid-verification-code`,INVALID_SESSION_INFO:`invalid-verification-id`,INVALID_TEMPORARY_PROOF:`invalid-credential`,MISSING_SESSION_INFO:`missing-verification-id`,SESSION_EXPIRED:`code-expired`,MISSING_ANDROID_PACKAGE_NAME:`missing-android-pkg-name`,UNAUTHORIZED_DOMAIN:`unauthorized-continue-uri`,INVALID_OAUTH_CLIENT_ID:`invalid-oauth-client-id`,ADMIN_ONLY_OPERATION:`admin-restricted-operation`,INVALID_MFA_PENDING_CREDENTIAL:`invalid-multi-factor-session`,MFA_ENROLLMENT_NOT_FOUND:`multi-factor-info-not-found`,MISSING_MFA_ENROLLMENT_ID:`missing-multi-factor-info`,MISSING_MFA_PENDING_CREDENTIAL:`missing-multi-factor-session`,SECOND_FACTOR_EXISTS:`second-factor-already-in-use`,SECOND_FACTOR_LIMIT_EXCEEDED:`maximum-second-factor-count-exceeded`,BLOCKING_FUNCTION_ERROR_RESPONSE:`internal-error`,RECAPTCHA_NOT_ENABLED:`recaptcha-not-enabled`,MISSING_RECAPTCHA_TOKEN:`missing-recaptcha-token`,INVALID_RECAPTCHA_TOKEN:`invalid-recaptcha-token`,INVALID_RECAPTCHA_ACTION:`invalid-recaptcha-action`,MISSING_CLIENT_TYPE:`missing-client-type`,MISSING_RECAPTCHA_VERSION:`missing-recaptcha-version`,INVALID_RECAPTCHA_VERSION:`invalid-recaptcha-version`,INVALID_REQ_TYPE:`invalid-req-type`},Eu=new Su(3e4,6e4);function Du(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Ou(e,t,n,r,i={}){return ku(e,i,async()=>{let i={},a={};r&&(t===`GET`?a=r:i={body:JSON.stringify(r)});let o=sc(Object.assign({key:e.config.apiKey},a)).slice(1),s=await e._getAdditionalHeaders();return s[`Content-Type`]=`application/json`,e.languageCode&&(s[`X-Firebase-Locale`]=e.languageCode),wu.fetch()(ju(e,e.config.apiHost,n,o),Object.assign({method:t,headers:s,referrerPolicy:`no-referrer`},i))})}async function ku(e,t,n){e._canInitEmulator=!1;let r=Object.assign(Object.assign({},Tu),t);try{let t=new Mu(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();let a=await i.json();if(`needConfirmation`in a)throw Nu(e,`account-exists-with-different-credential`,a);if(i.ok&&!(`errorMessage`in a))return a;{let[t,n]=(i.ok?a.errorMessage:a.error.message).split(` : `);if(t===`FEDERATED_USER_ID_ALREADY_LINKED`)throw Nu(e,`credential-already-in-use`,a);if(t===`EMAIL_EXISTS`)throw Nu(e,`email-already-in-use`,a);if(t===`USER_DISABLED`)throw Nu(e,`user-disabled`,a);let o=r[t]||t.toLowerCase().replace(/[_\s]+/g,`-`);if(n)throw pu(e,o,n);du(e,o)}}catch(t){if(t instanceof Ks)throw t;du(e,`network-request-failed`,{message:String(t)})}}async function Au(e,t,n,r,i={}){let a=await Ou(e,t,n,r,i);return`mfaPendingCredential`in a&&du(e,`multi-factor-auth-required`,{_serverResponse:a}),a}function ju(e,t,n,r){let i=`${t}${n}?${r}`;return e.config.emulator?Cu(e.config,i):`${e.config.apiScheme}://${i}`}var Mu=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(fu(this.auth,`network-request-failed`)),Eu.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Nu(e,t,n){let r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=fu(e,t,r);return i.customData._tokenResponse=n,i}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function Pu(e,t){return Ou(e,`POST`,`/v1/accounts:delete`,t)}async function Fu(e,t){return Ou(e,`POST`,`/v1/accounts:lookup`,t)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Iu(e){if(e)try{let t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Lu(e,t=!1){let n=vc(e),r=await n.getIdToken(t),i=zu(r);Z(i&&i.exp&&i.auth_time&&i.iat,n.auth,`internal-error`);let a=typeof i.firebase==`object`?i.firebase:void 0,o=a?.sign_in_provider;return{claims:i,token:r,authTime:Iu(Ru(i.auth_time)),issuedAtTime:Iu(Ru(i.iat)),expirationTime:Iu(Ru(i.exp)),signInProvider:o||null,signInSecondFactor:a?.sign_in_second_factor||null}}function Ru(e){return Number(e)*1e3}function zu(e){let[t,n,r]=e.split(`.`);if(t===void 0||n===void 0||r===void 0)return uu(`JWT malformed, contained fewer than 3 sections`),null;try{let e=Ss(n);return e?JSON.parse(e):(uu(`Failed to decode base64 JWT payload`),null)}catch(e){return uu(`Caught error parsing JWT payload as JSON`,e?.toString()),null}}function Bu(e){let t=zu(e);return Z(t,`internal-error`),Z(t.exp!==void 0,`internal-error`),Z(t.iat!==void 0,`internal-error`),Number(t.exp)-Number(t.iat)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function Vu(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof Ks&&Hu(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}function Hu({code:e}){return e===`auth/user-disabled`||e===`auth/user-token-expired`}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Uu=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;let e=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code===`auth/network-request-failed`&&this.schedule(!0);return}this.schedule()}},Wu=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Iu(this.lastLoginAt),this.creationTime=Iu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function Gu(e){let t=e.auth,n=await e.getIdToken(),r=await Vu(e,Fu(t,{idToken:n}));Z(r?.users.length,t,`internal-error`);let i=r.users[0];e._notifyReloadListener(i);let a=i.providerUserInfo?.length?Ju(i.providerUserInfo):[],o=qu(e.providerData,a),s=e.isAnonymous,c=!(e.email&&i.passwordHash)&&!o?.length,l=s?c:!1,u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Wu(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(e,u)}async function Ku(e){let t=vc(e);await Gu(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function qu(e,t){return[...e.filter(e=>!t.some(t=>t.providerId===e.providerId)),...t]}function Ju(e){return e.map(e=>{var{providerId:t}=e,n=Ta(e,[`providerId`]);return{providerId:t,uid:n.rawId||``,displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function Yu(e,t){let n=await ku(e,{},async()=>{let n=sc({grant_type:`refresh_token`,refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,a=ju(e,r,`/v1/token`,`key=${i}`),o=await e._getAdditionalHeaders();return o[`Content-Type`]=`application/x-www-form-urlencoded`,wu.fetch()(a,{method:`POST`,headers:o,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Xu=class e{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Z(e.idToken,`internal-error`),Z(e.idToken!==void 0,`internal-error`),Z(e.refreshToken!==void 0,`internal-error`);let t=`expiresIn`in e&&e.expiresIn!==void 0?Number(e.expiresIn):Bu(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return Z(!this.accessToken||this.refreshToken,e,`user-token-expired`),!t&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:n,refreshToken:r,expiresIn:i}=await Yu(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,n){let{refreshToken:r,accessToken:i,expirationTime:a}=n,o=new e;return r&&(Z(typeof r==`string`,`internal-error`,{appName:t}),o.refreshToken=r),i&&(Z(typeof i==`string`,`internal-error`,{appName:t}),o.accessToken=i),a&&(Z(typeof a==`number`,`internal-error`,{appName:t}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new e,this.toJSON())}_performRefresh(){return hu(`not implemented`)}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Zu(e,t){Z(typeof e==`string`||e===void 0,`internal-error`,{appName:t})}var Qu=class e{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Ta(e,[`uid`,`auth`,`stsTokenManager`]);this.providerId=`firebase`,this.proactiveRefresh=new Uu(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Wu(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){let t=await Vu(this,this.stsTokenManager.getToken(this.auth,e));return Z(t,this.auth,`internal-error`),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Lu(this,e)}reload(){return Ku(this)}_assign(e){this!==e&&(Z(this.uid===e.uid,this.auth,`internal-error`),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(t){let n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Z(!this.reloadListener,this.auth,`internal-error`),this.reloadListener=e,this.reloadUserInfo&&=(this._notifyReloadListener(this.reloadUserInfo),null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Gu(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){let e=await this.getIdToken();return await Vu(this,Pu(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||``}static _fromJSON(t,n){let r=n.displayName??void 0,i=n.email??void 0,a=n.phoneNumber??void 0,o=n.photoURL??void 0,s=n.tenantId??void 0,c=n._redirectEventId??void 0,l=n.createdAt??void 0,u=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:p,providerData:m,stsTokenManager:h}=n;Z(d&&h,t,`internal-error`);let g=Xu.fromJSON(this.name,h);Z(typeof d==`string`,t,`internal-error`),Zu(r,t.name),Zu(i,t.name),Z(typeof f==`boolean`,t,`internal-error`),Z(typeof p==`boolean`,t,`internal-error`),Zu(a,t.name),Zu(o,t.name),Zu(s,t.name),Zu(c,t.name),Zu(l,t.name),Zu(u,t.name);let _=new e({uid:d,auth:t,email:i,emailVerified:f,displayName:r,isAnonymous:p,photoURL:o,phoneNumber:a,tenantId:s,stsTokenManager:g,createdAt:l,lastLoginAt:u});return m&&Array.isArray(m)&&(_.providerData=m.map(e=>Object.assign({},e))),c&&(_._redirectEventId=c),_}static async _fromIdTokenResponse(t,n,r=!1){let i=new Xu;i.updateFromServerResponse(n);let a=new e({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await Gu(a),a}},$u=new Map;function ed(e){gu(e instanceof Function,`Expected a class definition`);let t=$u.get(e);return t?(gu(t instanceof e,`Instance stored in cache mismatched with class`),t):(t=new e,$u.set(e,t),t)}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var td=class{constructor(){this.type=`NONE`,this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){let t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}};td.type=`NONE`;var nd=td;
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function rd(e,t,n){return`firebase:${e}:${t}:${n}`}var id=class e{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;let{config:r,name:i}=this.auth;this.fullUserKey=rd(this.userKey,r.apiKey,i),this.fullPersistenceKey=rd(`persistence`,r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);return e?Qu._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r=`authUser`){if(!n.length)return new e(ed(nd),t,r);let i=(await Promise.all(n.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e),a=i[0]||ed(nd),o=rd(r,t.config.apiKey,t.name),s=null;for(let e of n)try{let n=await e._get(o);if(n){let r=Qu._fromJSON(t,n);e!==a&&(s=r),a=e;break}}catch{}let c=i.filter(e=>e._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new e(a,t,r):(a=c[0],s&&await a._set(o,s.toJSON()),await Promise.all(n.map(async e=>{if(e!==a)try{await e._remove(o)}catch{}})),new e(a,t,r))}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function ad(e){let t=e.toLowerCase();if(t.includes(`opera/`)||t.includes(`opr/`)||t.includes(`opios/`))return`Opera`;if(ld(t))return`IEMobile`;if(t.includes(`msie`)||t.includes(`trident/`))return`IE`;if(t.includes(`edge/`))return`Edge`;if(od(t))return`Firefox`;if(t.includes(`silk/`))return`Silk`;if(dd(t))return`Blackberry`;if(fd(t))return`Webos`;if(sd(t))return`Safari`;if((t.includes(`chrome/`)||cd(t))&&!t.includes(`edge/`))return`Chrome`;if(ud(t))return`Android`;{let t=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(t?.length===2)return t[1]}return`Other`}function od(e=Ls()){return/firefox\//i.test(e)}function sd(e=Ls()){let t=e.toLowerCase();return t.includes(`safari/`)&&!t.includes(`chrome/`)&&!t.includes(`crios/`)&&!t.includes(`android`)}function cd(e=Ls()){return/crios\//i.test(e)}function ld(e=Ls()){return/iemobile/i.test(e)}function ud(e=Ls()){return/android/i.test(e)}function dd(e=Ls()){return/blackberry/i.test(e)}function fd(e=Ls()){return/webos/i.test(e)}function pd(e=Ls()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function md(e=Ls()){return pd(e)&&!!window.navigator?.standalone}function hd(){return Vs()&&document.documentMode===10}function gd(e=Ls()){return pd(e)||ud(e)||fd(e)||dd(e)||/windows phone/i.test(e)||ld(e)}function _d(){try{return!!(window&&window!==window.top)}catch{return!1}}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function vd(e,t=[]){let n;switch(e){case`Browser`:n=ad(Ls());break;case`Worker`:n=`${ad(Ls())}-${e}`;break;default:n=e}let r=t.length?t.join(`,`):`FirebaseCore-web`;return`${n}/JsCore/${Bl}/${r}`}async function yd(e,t){return Ou(e,`GET`,`/v2/recaptchaConfig`,Du(e,t))}function bd(e){return e!==void 0&&e.enterprise!==void 0}var xd=class{constructor(e){if(this.siteKey=``,this.emailPasswordEnabled=!1,e.recaptchaKey===void 0)throw Error(`recaptchaKey undefined`);this.siteKey=e.recaptchaKey.split(`/`)[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(e=>e.provider===`EMAIL_PASSWORD_PROVIDER`&&e.enforcementState!==`OFF`)}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Sd(){return document.getElementsByTagName(`head`)?.[0]??document}function Cd(e){return new Promise((t,n)=>{let r=document.createElement(`script`);r.setAttribute(`src`,e),r.onload=t,r.onerror=e=>{let t=fu(`internal-error`);t.customData=e,n(t)},r.type=`text/javascript`,r.charset=`UTF-8`,Sd().appendChild(r)})}function wd(e){return`__${e}${Math.floor(Math.random()*1e6)}`}var Td=`https://www.google.com/recaptcha/enterprise.js?render=`,Ed=`recaptcha-enterprise`,Dd=`NO_RECAPTCHA`,Od=class{constructor(e){this.type=Ed,this.auth=Md(e)}async verify(e=`verify`,t=!1){async function n(e){if(!t){if(e.tenantId==null&&e._agentRecaptchaConfig!=null)return e._agentRecaptchaConfig.siteKey;if(e.tenantId!=null&&e._tenantRecaptchaConfigs[e.tenantId]!==void 0)return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{yd(e,{clientType:`CLIENT_TYPE_WEB`,version:`RECAPTCHA_ENTERPRISE`}).then(r=>{if(r.recaptchaKey===void 0)n(Error(`recaptcha Enterprise site key undefined`));else{let n=new xd(r);return e.tenantId==null?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}}).catch(e=>{n(e)})})}function r(t,n,r){let i=window.grecaptcha;bd(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(Dd)})}):r(Error(`No reCAPTCHA enterprise script loaded.`))}return new Promise((e,i)=>{n(this.auth).then(n=>{if(!t&&bd(window.grecaptcha))r(n,e,i);else{if(typeof window>`u`){i(Error(`RecaptchaVerifier is only supported in browser`));return}Cd(Td+n).then(()=>{r(n,e,i)}).catch(e=>{i(e)})}}).catch(e=>{i(e)})})}};async function kd(e,t,n,r=!1){let i=new Od(e),a;try{a=await i.verify(n)}catch{a=await i.verify(n,!0)}let o=Object.assign({},t);return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:`CLIENT_TYPE_WEB`}),Object.assign(o,{recaptchaVersion:`RECAPTCHA_ENTERPRISE`}),o}
/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Ad=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let n=t=>new Promise((n,r)=>{try{let r=e(t);n(r)}catch(e){r(e)}});n.onAbort=t,this.queue.push(n);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(e){t.reverse();for(let e of t)try{e()}catch{}throw this.auth._errorFactory.create(`login-blocked`,{originalMessage:e?.message})}}},jd=class{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Nd(this),this.idTokenSubscription=new Nd(this),this.beforeStateQueue=new Ad(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=su,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ed(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await id.create(this,e),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){let t=await this.assertedPersistence.getCurrentUser(),n=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let t=this.redirectUser?._redirectEventId,i=n?._redirectEventId,a=await this.tryRedirectSignIn(e);(!t||t===i)&&a?.user&&(n=a.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(e){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(e))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Z(this._popupRedirectResolver,this,`argument-error`),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Gu(e)}catch(e){if(e?.code!==`auth/network-request-failed`)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=xu()}async _delete(){this._deleted=!0}async updateCurrentUser(e){let t=e?vc(e):null;return t&&Z(t.auth.config.apiKey===this.config.apiKey,this,`invalid-user-token`),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Z(this.tenantId===e.tenantId,this,`tenant-id-mismatch`),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(ed(e))})}async initializeRecaptchaConfig(){let e=await yd(this,{clientType:`CLIENT_TYPE_WEB`,version:`RECAPTCHA_ENTERPRISE`}),t=new xd(e);this.tenantId==null?this._agentRecaptchaConfig=t:this._tenantRecaptchaConfigs[this.tenantId]=t,t.emailPasswordEnabled&&new Od(this).verify()}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new qs(`auth`,`Firebase`,e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){let n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&ed(e)||this._popupRedirectResolver;Z(t,this,`argument-error`),this.redirectPersistenceManager=await id.create(this,[ed(t._redirectPersistence)],`redirectUser`),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};let i=typeof t==`function`?t:t.next.bind(t),a=this._isInitialized?Promise.resolve():this._initializationPromise;return Z(a,this,`internal-error`),a.then(()=>i(this.currentUser)),typeof t==`function`?e.addObserver(t,n,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Z(this.persistenceManager,this,`internal-error`),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vd(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e[`X-Firebase-gmpid`]=this.app.options.appId);let t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e[`X-Firebase-Client`]=t);let n=await this._getAppCheckToken();return n&&(e[`X-Firebase-AppCheck`]=n),e}async _getAppCheckToken(){let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&lu(`Error while retrieving App Check token: ${e.error}`),e?.token}};function Md(e){return vc(e)}var Nd=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=dc(e=>this.observer=e)}get next(){return Z(this.observer,this.auth,`internal-error`),this.observer.next.bind(this.observer)}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Pd(e,t){let n=Ll(e,`auth`);if(n.isInitialized()){let e=n.getImmediate(),r=n.getOptions();if(ac(r,t??{}))return e;du(e,`already-initialized`)}return n.initialize({options:t})}function Fd(e,t){let n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(ed);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}function Id(e,t,n){let r=Md(e);Z(r._canInitEmulator,r,`emulator-config-failed`),Z(/^https?:\/\//.test(t),r,`invalid-emulator-scheme`);let i=!!n?.disableWarnings,a=Ld(t),{host:o,port:s}=Rd(t),c=s===null?``:`:${s}`;r.config.emulator={url:`${a}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:s,protocol:a.replace(`:`,``),options:Object.freeze({disableWarnings:i})}),i||Bd()}function Ld(e){let t=e.indexOf(`:`);return t<0?``:e.substr(0,t+1)}function Rd(e){let t=Ld(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:``,port:null};let r=n[2].split(`@`).pop()||``,i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let e=i[1];return{host:e,port:zd(r.substr(e.length+1))}}else{let[e,t]=r.split(`:`);return{host:e,port:zd(t)}}}function zd(e){if(!e)return null;let t=Number(e);return isNaN(t)?null:t}function Bd(){function e(){let e=document.createElement(`p`),t=e.style;e.innerText=`Running in emulator mode. Do not use with production credentials.`,t.position=`fixed`,t.width=`100%`,t.backgroundColor=`#ffffff`,t.border=`.1em solid #000000`,t.color=`#b50000`,t.bottom=`0px`,t.left=`0px`,t.margin=`0px`,t.zIndex=`10000`,t.textAlign=`center`,e.classList.add(`firebase-emulator-warning`),document.body.appendChild(e)}typeof console<`u`&&typeof console.info==`function`&&console.info(`WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.`),typeof window<`u`&&typeof document<`u`&&(document.readyState===`loading`?window.addEventListener(`DOMContentLoaded`,e):e())}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Vd=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return hu(`not implemented`)}_getIdTokenResponse(e){return hu(`not implemented`)}_linkToIdToken(e,t){return hu(`not implemented`)}_getReauthenticationResolver(e){return hu(`not implemented`)}};async function Hd(e,t){return Ou(e,`POST`,`/v1/accounts:update`,t)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function Ud(e,t){return Au(e,`POST`,`/v1/accounts:signInWithPassword`,Du(e,t))}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function Wd(e,t){return Au(e,`POST`,`/v1/accounts:signInWithEmailLink`,Du(e,t))}async function Gd(e,t){return Au(e,`POST`,`/v1/accounts:signInWithEmailLink`,Du(e,t))}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Kd=class e extends Vd{constructor(e,t,n,r=null){super(`password`,n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(t,n){return new e(t,n,`password`)}static _fromEmailAndCode(t,n,r=null){return new e(t,n,`emailLink`,r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e==`string`?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod===`password`)return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod===`emailLink`)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case`password`:let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:`CLIENT_TYPE_WEB`};if(e._getRecaptchaConfig()?.emailPasswordEnabled){let n=await kd(e,t,`signInWithPassword`);return Ud(e,n)}else return Ud(e,t).catch(async n=>{if(n.code===`auth/missing-recaptcha-token`){console.log(`Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.`);let n=await kd(e,t,`signInWithPassword`);return Ud(e,n)}else return Promise.reject(n)});case`emailLink`:return Wd(e,{email:this._email,oobCode:this._password});default:du(e,`internal-error`)}}async _linkToIdToken(e,t){switch(this.signInMethod){case`password`:return Hd(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case`emailLink`:return Gd(e,{idToken:t,email:this._email,oobCode:this._password});default:du(e,`internal-error`)}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function qd(e,t){return Au(e,`POST`,`/v1/accounts:signInWithIdp`,Du(e,t))}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Jd=`http://localhost`,Yd=class e extends Vd{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){let n=new e(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):du(`argument-error`),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){let n=typeof t==`string`?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,a=Ta(n,[`providerId`,`signInMethod`]);if(!r||!i)return null;let o=new e(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){let t=this.buildRequest();return qd(e,t)}_linkToIdToken(e,t){let n=this.buildRequest();return n.idToken=t,qd(e,n)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,qd(e,t)}buildRequest(){let e={requestUri:Jd,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=sc(t)}return e}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function Xd(e,t){return Ou(e,`POST`,`/v1/accounts:sendVerificationCode`,Du(e,t))}async function Zd(e,t){return Au(e,`POST`,`/v1/accounts:signInWithPhoneNumber`,Du(e,t))}async function Qd(e,t){let n=await Au(e,`POST`,`/v1/accounts:signInWithPhoneNumber`,Du(e,t));if(n.temporaryProof)throw Nu(e,`account-exists-with-different-credential`,n);return n}var $d={USER_NOT_FOUND:`user-not-found`};async function ef(e,t){let n=Object.assign(Object.assign({},t),{operation:`REAUTH`});return Au(e,`POST`,`/v1/accounts:signInWithPhoneNumber`,Du(e,n),$d)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var tf=class e extends Vd{constructor(e){super(`phone`,`phone`),this.params=e}static _fromVerification(t,n){return new e({verificationId:t,verificationCode:n})}static _fromTokenResponse(t,n){return new e({phoneNumber:t,temporaryProof:n})}_getIdTokenResponse(e){return Zd(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return Qd(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return ef(e,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){let e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(t){typeof t==`string`&&(t=JSON.parse(t));let{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:a}=t;return!r&&!n&&!i&&!a?null:new e({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:a})}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function nf(e){switch(e){case`recoverEmail`:return`RECOVER_EMAIL`;case`resetPassword`:return`PASSWORD_RESET`;case`signIn`:return`EMAIL_SIGNIN`;case`verifyEmail`:return`VERIFY_EMAIL`;case`verifyAndChangeEmail`:return`VERIFY_AND_CHANGE_EMAIL`;case`revertSecondFactorAddition`:return`REVERT_SECOND_FACTOR_ADDITION`;default:return null}}function rf(e){let t=cc(lc(e)).link,n=t?cc(lc(t)).deep_link_id:null,r=cc(lc(e)).deep_link_id;return(r?cc(lc(r)).link:null)||r||n||t||e}var af=class e{constructor(e){let t=cc(lc(e)),n=t.apiKey??null,r=t.oobCode??null,i=nf(t.mode??null);Z(n&&r&&i,`argument-error`),this.apiKey=n,this.operation=i,this.code=r,this.continueUrl=t.continueUrl??null,this.languageCode=t.languageCode??null,this.tenantId=t.tenantId??null}static parseLink(t){let n=rf(t);try{return new e(n)}catch{return null}}},sf=class e{constructor(){this.providerId=e.PROVIDER_ID}static credential(e,t){return Kd._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){let n=af.parseLink(t);return Z(n,`argument-error`),Kd._fromEmailAndCode(e,n.code,n.tenantId)}};sf.PROVIDER_ID=`password`,sf.EMAIL_PASSWORD_SIGN_IN_METHOD=`password`,sf.EMAIL_LINK_SIGN_IN_METHOD=`emailLink`;
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var cf=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}},lf=class extends cf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}},uf=class e extends lf{constructor(){super(`facebook.com`)}static credential(t){return Yd._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!(`oauthAccessToken`in t)||!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch{return null}}};uf.FACEBOOK_SIGN_IN_METHOD=`facebook.com`,uf.PROVIDER_ID=`facebook.com`;
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var df=class e extends lf{constructor(){super(`google.com`),this.addScope(`profile`)}static credential(t,n){return Yd._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return e.credential(n,r)}catch{return null}}};df.GOOGLE_SIGN_IN_METHOD=`google.com`,df.PROVIDER_ID=`google.com`;
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var ff=class e extends lf{constructor(){super(`github.com`)}static credential(t){return Yd._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!(`oauthAccessToken`in t)||!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch{return null}}};ff.GITHUB_SIGN_IN_METHOD=`github.com`,ff.PROVIDER_ID=`github.com`;
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var pf=class e extends lf{constructor(){super(`twitter.com`)}static credential(t,n){return Yd._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return e.credential(n,r)}catch{return null}}};pf.TWITTER_SIGN_IN_METHOD=`twitter.com`,pf.PROVIDER_ID=`twitter.com`;
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function mf(e,t){return Au(e,`POST`,`/v1/accounts:signUp`,Du(e,t))}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var hf=class e{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){let a=await Qu._fromIdTokenResponse(t,r,i),o=gf(r);return new e({user:a,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);let i=gf(r);return new e({user:t,providerId:i,_tokenResponse:r,operationType:n})}};function gf(e){return e.providerId?e.providerId:`phoneNumber`in e?`phone`:null}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var _f=class e extends Ks{constructor(t,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,e.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new e(t,n,r,i)}};function vf(e,t,n,r){return(t===`reauthenticate`?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{throw n.code===`auth/multi-factor-auth-required`?_f._fromErrorAndOperation(e,n,t,r):n})}async function yf(e,t,n=!1){let r=await Vu(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return hf._forOperation(e,`link`,r)}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function bf(e,t,n=!1){let{auth:r}=e,i=`reauthenticate`;try{let a=await Vu(e,vf(r,i,t,e),n);Z(a.idToken,r,`internal-error`);let o=zu(a.idToken);Z(o,r,`internal-error`);let{sub:s}=o;return Z(e.uid===s,r,`user-mismatch`),hf._forOperation(e,i,a)}catch(e){throw e?.code===`auth/user-not-found`&&du(r,`user-mismatch`),e}}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function xf(e,t,n=!1){let r=`signIn`,i=await vf(e,r,t),a=await hf._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(a.user),a}async function Sf(e,t){return xf(Md(e),t)}async function Cf(e,t,n){let r=Md(e),i={returnSecureToken:!0,email:t,password:n,clientType:`CLIENT_TYPE_WEB`},a;if(r._getRecaptchaConfig()?.emailPasswordEnabled){let e=await kd(r,i,`signUpPassword`);a=mf(r,e)}else a=mf(r,i).catch(async e=>{if(e.code===`auth/missing-recaptcha-token`){console.log(`Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.`);let e=await kd(r,i,`signUpPassword`);return mf(r,e)}else return Promise.reject(e)});let o=await a.catch(e=>Promise.reject(e)),s=await hf._fromIdTokenResponse(r,`signIn`,o);return await r._updateCurrentUser(s.user),s}function wf(e,t,n){return Sf(vc(e),sf.credential(t,n))}function Tf(e,t,n,r){return vc(e).onIdTokenChanged(t,n,r)}function Ef(e,t,n){return vc(e).beforeAuthStateChanged(t,n)}function Df(e){return vc(e).signOut()}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Of(e,t){return Ou(e,`POST`,`/v2/accounts/mfaEnrollment:start`,Du(e,t))}function kf(e,t){return Ou(e,`POST`,`/v2/accounts/mfaEnrollment:finalize`,Du(e,t))}function Af(e,t){return Ou(e,`POST`,`/v2/accounts/mfaEnrollment:start`,Du(e,t))}function jf(e,t){return Ou(e,`POST`,`/v2/accounts/mfaEnrollment:finalize`,Du(e,t))}var Mf=`__sak`,Nf=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Mf,`1`),this.storage.removeItem(Mf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Pf(){let e=Ls();return sd(e)||pd(e)}var Ff=1e3,If=class extends Nf{constructor(){super(()=>window.localStorage,`LOCAL`),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=Pf()&&_d(),this.fallbackToPolling=gd(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(let t of Object.keys(this.listeners)){let n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});return}let n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let r=this.storage.getItem(n);if(e.newValue!==r)e.newValue===null?this.storage.removeItem(n):this.storage.setItem(n,e.newValue);else if(this.localCache[n]===e.newValue&&!t)return}let r=()=>{let e=this.storage.getItem(n);!t&&this.localCache[n]===e||this.notifyListeners(n,e)},i=this.storage.getItem(n);hd()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;let n=this.listeners[e];if(n)for(let e of Array.from(n))e(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent(`storage`,{key:e,oldValue:t,newValue:n}),!0)})},Ff)}stopPolling(){this.pollTimer&&=(clearInterval(this.pollTimer),null)}attachListener(){window.addEventListener(`storage`,this.boundEventHandler)}detachListener(){window.removeEventListener(`storage`,this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){let t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}};If.type=`LOCAL`;var Lf=If,Rf=class extends Nf{constructor(){super(()=>window.sessionStorage,`SESSION`)}_addListener(e,t){}_removeListener(e,t){}};Rf.type=`SESSION`;var zf=Rf;
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Bf(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}}))}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Vf=class e{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let n=this.receivers.find(e=>e.isListeningto(t));if(n)return n;let r=new e(t);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){let t=e,{eventId:n,eventType:r,data:i}=t.data,a=this.handlersMap[r];if(!a?.size)return;t.ports[0].postMessage({status:`ack`,eventId:n,eventType:r});let o=Array.from(a).map(async e=>e(t.origin,i)),s=await Bf(o);t.ports[0].postMessage({status:`done`,eventId:n,eventType:r,response:s})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener(`message`,this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener(`message`,this.boundEventHandler)}};Vf.receivers=[];
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Hf(e=``,t=10){let n=``;for(let e=0;e<t;e++)n+=Math.floor(Math.random()*10);return e+n}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Uf=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener(`message`,e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){let r=typeof MessageChannel<`u`?new MessageChannel:null;if(!r)throw Error(`connection_unavailable`);let i,a;return new Promise((o,s)=>{let c=Hf(``,20);r.port1.start();let l=setTimeout(()=>{s(Error(`unsupported_event`))},n);a={messageChannel:r,onMessage(e){let t=e;if(t.data.eventId===c)switch(t.data.status){case`ack`:clearTimeout(l),i=setTimeout(()=>{s(Error(`timeout`))},3e3);break;case`done`:clearTimeout(i),o(t.data.response);break;default:clearTimeout(l),clearTimeout(i),s(Error(`invalid_response`));break}}},this.handlers.add(a),r.port1.addEventListener(`message`,a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Wf(){return window}function Gf(e){Wf().location.href=e}
/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Kf(){return Wf().WorkerGlobalScope!==void 0&&typeof Wf().importScripts==`function`}async function qf(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Jf(){return(navigator==null?void 0:navigator.serviceWorker)?.controller||null}function Yf(){return Kf()?self:null}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Xf=`firebaseLocalStorageDb`,Zf=`firebaseLocalStorage`,Qf=`fbase_key`,$f=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener(`success`,()=>{e(this.request.result)}),this.request.addEventListener(`error`,()=>{t(this.request.error)})})}};function ep(e,t){return e.transaction([Zf],t?`readwrite`:`readonly`).objectStore(Zf)}function tp(){let e=indexedDB.deleteDatabase(Xf);return new $f(e).toPromise()}function np(){let e=indexedDB.open(Xf,1);return new Promise((t,n)=>{e.addEventListener(`error`,()=>{n(e.error)}),e.addEventListener(`upgradeneeded`,()=>{let t=e.result;try{t.createObjectStore(Zf,{keyPath:Qf})}catch(e){n(e)}}),e.addEventListener(`success`,async()=>{let n=e.result;n.objectStoreNames.contains(`firebaseLocalStorage`)?t(n):(n.close(),await tp(),t(await np()))})})}async function rp(e,t,n){let r=ep(e,!0).put({[Qf]:t,value:n});return new $f(r).toPromise()}async function ip(e,t){let n=ep(e,!1).get(t),r=await new $f(n).toPromise();return r===void 0?null:r.value}function ap(e,t){let n=ep(e,!0).delete(t);return new $f(n).toPromise()}var op=class{constructor(){this.type=`LOCAL`,this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||=await np(),this.db}async _withRetries(e){let t=0;for(;;)try{let t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&=(this.db.close(),void 0)}}async initializeServiceWorkerMessaging(){return Kf()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Vf._getInstance(Yf()),this.receiver._subscribe(`keyChanged`,async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe(`ping`,async(e,t)=>[`keyChanged`])}async initializeSender(){if(this.activeServiceWorker=await qf(),!this.activeServiceWorker)return;this.sender=new Uf(this.activeServiceWorker);let e=await this.sender._send(`ping`,{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes(`keyChanged`)&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Jf()!==this.activeServiceWorker))try{await this.sender._send(`keyChanged`,{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let e=await np();return await rp(e,Mf,`1`),await ap(e,Mf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>rp(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){let t=await this._withRetries(t=>ip(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ap(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){let e=await this._withRetries(e=>{let t=ep(e,!1).getAll();return new $f(t).toPromise()});if(!e||this.pendingWrites!==0)return[];let t=[],n=new Set;for(let{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(let e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;let n=this.listeners[e];if(n)for(let e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&=(clearInterval(this.pollTimer),null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}};op.type=`LOCAL`;var sp=op;
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function cp(e,t){return Ou(e,`POST`,`/v2/accounts/mfaSignIn:start`,Du(e,t))}function lp(e,t){return Ou(e,`POST`,`/v2/accounts/mfaSignIn:finalize`,Du(e,t))}function up(e,t){return Ou(e,`POST`,`/v2/accounts/mfaSignIn:finalize`,Du(e,t))}wd(`rcb`),new Su(3e4,6e4);
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var dp=`recaptcha`;async function fp(e,t,n){let r=await n.verify();try{Z(typeof r==`string`,e,`argument-error`),Z(n.type===dp,e,`argument-error`);let i=typeof t==`string`?{phoneNumber:t}:t;if(`session`in i){let t=i.session;if(`phoneNumber`in i)return Z(t.type===`enroll`,e,`internal-error`),(await Of(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,recaptchaToken:r}})).phoneSessionInfo.sessionInfo;{Z(t.type===`signin`,e,`internal-error`);let n=i.multiFactorHint?.uid||i.multiFactorUid;return Z(n,e,`missing-multi-factor-info`),(await cp(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:r}})).phoneResponseInfo.sessionInfo}}else{let{sessionInfo:t}=await Xd(e,{phoneNumber:i.phoneNumber,recaptchaToken:r});return t}}finally{n._reset()}}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var pp=class e{constructor(t){this.providerId=e.PROVIDER_ID,this.auth=Md(t)}verifyPhoneNumber(e,t){return fp(this.auth,e,vc(t))}static credential(e,t){return tf._fromVerification(e,t)}static credentialFromResult(t){let n=t;return e.credentialFromTaggedObject(n)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{phoneNumber:t,temporaryProof:n}=e;return t&&n?tf._fromTokenResponse(t,n):null}};pp.PROVIDER_ID=`phone`,pp.PHONE_SIGN_IN_METHOD=`phone`;
/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function mp(e,t){return t?ed(t):(Z(e._popupRedirectResolver,e,`argument-error`),e._popupRedirectResolver)}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var hp=class extends Vd{constructor(e){super(`custom`,`custom`),this.params=e}_getIdTokenResponse(e){return qd(e,this._buildIdpRequest())}_linkToIdToken(e,t){return qd(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return qd(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function gp(e){return xf(e.auth,new hp(e),e.bypassAuthState)}function _p(e){let{auth:t,user:n}=e;return Z(n,t,`internal-error`),bf(n,new hp(e),e.bypassAuthState)}async function vp(e){let{auth:t,user:n}=e;return Z(n,t,`internal-error`),yf(n,new hp(e),e.bypassAuthState)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var yp=class{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:a,type:o}=e;if(a){this.reject(a);return}let s={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(s))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case`signInViaPopup`:case`signInViaRedirect`:return gp;case`linkViaPopup`:case`linkViaRedirect`:return vp;case`reauthViaPopup`:case`reauthViaRedirect`:return _p;default:du(this.auth,`internal-error`)}}resolve(e){gu(this.pendingPromise,`Pending promise was never set`),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){gu(this.pendingPromise,`Pending promise was never set`),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}},bp=new Su(2e3,1e4),xp=class e extends yp{constructor(t,n,r,i,a){super(t,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,e.currentPopupAction&&e.currentPopupAction.cancel(),e.currentPopupAction=this}async executeNotNull(){let e=await this.execute();return Z(e,this.auth,`internal-error`),e}async onExecution(){gu(this.filter.length===1,`Popup operations only handle one event`);let e=Hf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(fu(this.auth,`web-storage-unsupported`))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(fu(this.auth,`cancelled-popup-request`))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,e.currentPopupAction=null}pollUserCancellation(){let e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fu(this.auth,`popup-closed-by-user`))},8e3);return}this.pollId=window.setTimeout(e,bp.get())};e()}};xp.currentPopupAction=null;
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Sp=`pendingRedirect`,Cp=new Map,wp=class extends yp{constructor(e,t,n=!1){super(e,[`signInViaRedirect`,`linkViaRedirect`,`reauthViaRedirect`,`unknown`],t,void 0,n),this.eventId=null}async execute(){let e=Cp.get(this.auth._key());if(!e){try{let t=await Tp(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}Cp.set(this.auth._key(),e)}return this.bypassAuthState||Cp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type===`signInViaRedirect`)return super.onAuthEvent(e);if(e.type===`unknown`){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function Tp(e,t){let n=Op(t),r=Dp(e);if(!await r._isAvailable())return!1;let i=await r._get(n)===`true`;return await r._remove(n),i}function Ep(e,t){Cp.set(e._key(),t)}function Dp(e){return ed(e._redirectPersistence)}function Op(e){return rd(Sp,e.config.apiKey,e.name)}async function kp(e,t,n=!1){let r=Md(e),i=mp(r,t),a=await new wp(r,i,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}var Ap=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Np(e)?t:(this.hasHandledPotentialRedirect=!0,t||=(this.queuedRedirectEvent=e,!0),t)}sendToConsumer(e,t){if(e.error&&!Mp(e)){let n=e.error.code?.split(`auth/`)[1]||`internal-error`;t.onError(fu(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(jp(e))}saveEventToCache(e){this.cachedEventUids.add(jp(e)),this.lastProcessedEventTime=Date.now()}};function jp(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join(`-`)}function Mp({type:e,error:t}){return e===`unknown`&&t?.code===`auth/no-auth-event`}function Np(e){switch(e.type){case`signInViaRedirect`:case`linkViaRedirect`:case`reauthViaRedirect`:return!0;case`unknown`:return Mp(e);default:return!1}}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function Pp(e,t={}){return Ou(e,`GET`,`/v1/projects`,t)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Fp=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ip=/^https?/;async function Lp(e){if(e.config.emulator)return;let{authorizedDomains:t}=await Pp(e);for(let e of t)try{if(Rp(e))return}catch{}du(e,`unauthorized-domain`)}function Rp(e){let t=_u(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith(`chrome-extension://`)){let i=new URL(e);return i.hostname===``&&r===``?n===`chrome-extension:`&&e.replace(`chrome-extension://`,``)===t.replace(`chrome-extension://`,``):n===`chrome-extension:`&&i.hostname===r}if(!Ip.test(n))return!1;if(Fp.test(e))return r===e;let i=e.replace(/\./g,`\\.`);return RegExp(`^(.+\\.`+i+`|`+i+`)$`,`i`).test(r)}
/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var zp=new Su(3e4,6e4);function Bp(){let e=Wf().___jsl;if(e?.H){for(let t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}}function Vp(e){return new Promise((t,n)=>{function r(){Bp(),gapi.load(`gapi.iframes`,{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Bp(),n(fu(e,`network-request-failed`))},timeout:zp.get()})}if(Wf().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(Wf().gapi?.load)r();else{let t=wd(`iframefcb`);return Wf()[t]=()=>{gapi.load?r():n(fu(e,`network-request-failed`))},Cd(`https://apis.google.com/js/api.js?onload=${t}`).catch(e=>n(e))}}).catch(e=>{throw Hp=null,e})}var Hp=null;function Up(e){return Hp||=Vp(e),Hp}
/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Wp=new Su(5e3,15e3),Gp=`__/auth/iframe`,Kp=`emulator/auth/iframe`,qp={style:{position:`absolute`,top:`-100px`,width:`1px`,height:`1px`},"aria-hidden":`true`,tabindex:`-1`},Jp=new Map([[`identitytoolkit.googleapis.com`,`p`],[`staging-identitytoolkit.sandbox.googleapis.com`,`s`],[`test-identitytoolkit.sandbox.googleapis.com`,`t`]]);function Yp(e){let t=e.config;Z(t.authDomain,e,`auth-domain-config-required`);let n=t.emulator?Cu(t,Kp):`https://${e.config.authDomain}/${Gp}`,r={apiKey:t.apiKey,appName:e.name,v:Bl},i=Jp.get(e.config.apiHost);i&&(r.eid=i);let a=e._getFrameworks();return a.length&&(r.fw=a.join(`,`)),`${n}?${sc(r).slice(1)}`}async function Xp(e){let t=await Up(e),n=Wf().gapi;return Z(n,e,`internal-error`),t.open({where:document.body,url:Yp(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qp,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});let i=fu(e,`network-request-failed`),a=Wf().setTimeout(()=>{r(i)},Wp.get());function o(){Wf().clearTimeout(a),n(t)}t.ping(o).then(o,()=>{r(i)})}))}
/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Zp={location:`yes`,resizable:`yes`,statusbar:`yes`,toolbar:`no`},Qp=`_blank`,$p=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function em(e,t,n,r=500,i=600){let a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s=``,c=Object.assign(Object.assign({},Zp),{width:r.toString(),height:i.toString(),top:a,left:o}),l=Ls().toLowerCase();n&&(s=cd(l)?Qp:n),od(l)&&(t||=`http://localhost`,c.scrollbars=`yes`);let u=Object.entries(c).reduce((e,[t,n])=>`${e}${t}=${n},`,``);if(md(l)&&s!==`_self`)return tm(t||``,s),new $p(null);let d=window.open(t||``,s,u);Z(d,e,`popup-blocked`);try{d.focus()}catch{}return new $p(d)}function tm(e,t){let n=document.createElement(`a`);n.href=e,n.target=t;let r=document.createEvent(`MouseEvent`);r.initMouseEvent(`click`,!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}
/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var nm=`__/auth/handler`,rm=`emulator/auth/handler`;async function im(e,t,n,r,i,a){Z(e.config.authDomain,e,`auth-domain-config-required`),Z(e.config.apiKey,e,`invalid-api-key`);let o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Bl,eventId:i};if(t instanceof cf){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||``,rc(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(let[e,t]of Object.entries(a||{}))o[e]=t}if(t instanceof lf){let e=t.getScopes().filter(e=>e!==``);e.length>0&&(o.scopes=e.join(`,`))}e.tenantId&&(o.tid=e.tenantId);let s=o;for(let e of Object.keys(s))s[e]===void 0&&delete s[e];let c=await e._getAppCheckToken(),l=c?`#fac=${encodeURIComponent(c)}`:``;return`${am(e)}?${sc(s).slice(1)}${l}`}function am({config:e}){return e.emulator?Cu(e,rm):`https://${e.authDomain}/${nm}`}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var om=`webStorageSupport`,sm=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zf,this._completeRedirectFn=kp,this._overrideRedirectResult=Ep}async _openPopup(e,t,n,r){gu(this.eventManagers[e._key()]?.manager,`_initialize() not called before _openPopup()`);let i=await im(e,t,n,_u(),r);return em(e,i,Hf())}async _openRedirect(e,t,n,r){await this._originValidation(e);let i=await im(e,t,n,_u(),r);return Gf(i),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(gu(n,`If manager is not set, promise should be`),n)}let n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){let t=await Xp(e),n=new Ap(e);return t.register(`authEvent`,t=>(Z(t?.authEvent,e,`invalid-auth-event`),{status:n.onEvent(t.authEvent)?`ACK`:`ERROR`}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(om,{type:om},n=>{let r=n?.[0]?.[om];r!==void 0&&t(!!r),du(e,`internal-error`)},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Lp(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return gd()||sd()||pd()}},cm=class{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case`enroll`:return this._finalizeEnroll(e,t.credential,n);case`signin`:return this._finalizeSignIn(e,t.credential);default:return hu(`unexpected MultiFactorSessionType`)}}},lm=class e extends cm{constructor(e){super(`phone`),this.credential=e}static _fromCredential(t){return new e(t)}_finalizeEnroll(e,t,n){return kf(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return lp(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},um=class{constructor(){}static assertion(e){return lm._fromCredential(e)}};um.FACTOR_ID=`phone`;var dm=class{static assertionForEnrollment(e,t){return fm._fromSecret(e,t)}static assertionForSignIn(e,t){return fm._fromEnrollmentId(e,t)}static async generateSecret(e){let t=e;Z(t.auth!==void 0,`internal-error`);let n=await Af(t.auth,{idToken:t.credential,totpEnrollmentInfo:{}});return pm._fromStartTotpMfaEnrollmentResponse(n,t.auth)}};dm.FACTOR_ID=`totp`;var fm=class e extends cm{constructor(e,t,n){super(`totp`),this.otp=e,this.enrollmentId=t,this.secret=n}static _fromSecret(t,n){return new e(n,void 0,t)}static _fromEnrollmentId(t,n){return new e(n,t)}async _finalizeEnroll(e,t,n){return Z(this.secret!==void 0,e,`argument-error`),jf(e,{idToken:t,displayName:n,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,t){Z(this.enrollmentId!==void 0&&this.otp!==void 0,e,`argument-error`);let n={verificationCode:this.otp};return up(e,{mfaPendingCredential:t,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:n})}},pm=class e{constructor(e,t,n,r,i,a,o){this.sessionInfo=a,this.auth=o,this.secretKey=e,this.hashingAlgorithm=t,this.codeLength=n,this.codeIntervalSeconds=r,this.enrollmentCompletionDeadline=i}static _fromStartTotpMfaEnrollmentResponse(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,t){let n=!1;return(mm(e)||mm(t))&&(n=!0),n&&(mm(e)&&(e=this.auth.currentUser?.email||`unknownuser`),mm(t)&&(t=this.auth.name)),`otpauth://totp/${t}:${e}?secret=${this.secretKey}&issuer=${t}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}};function mm(e){return e===void 0||e?.length===0}var hm=`@firebase/auth`,gm=`0.23.2`,_m=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(t=>{e(t?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Z(this.auth._initializationPromise,`dependent-sdk-initialized-before-auth`)}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function vm(e){switch(e){case`Node`:return`node`;case`ReactNative`:return`rn`;case`Worker`:return`webworker`;case`Cordova`:return`cordova`;default:return}}function ym(e){Il(new yc(`auth`,(t,{options:n})=>{let r=t.getProvider(`app`).getImmediate(),i=t.getProvider(`heartbeat`),a=t.getProvider(`app-check-internal`),{apiKey:o,authDomain:s}=r.options;Z(o&&!o.includes(`:`),`invalid-api-key`,{appName:r.name});let c={apiKey:o,authDomain:s,clientPlatform:e,apiHost:`identitytoolkit.googleapis.com`,tokenApiHost:`securetoken.googleapis.com`,apiScheme:`https`,sdkClientVersion:vd(e)},l=new jd(r,i,a,c);return Fd(l,n),l},`PUBLIC`).setInstantiationMode(`EXPLICIT`).setInstanceCreatedCallback((e,t,n)=>{e.getProvider(`auth-internal`).initialize()})),Il(new yc(`auth-internal`,e=>(e=>new _m(e))(Md(e.getProvider(`auth`).getImmediate())),`PRIVATE`).setInstantiationMode(`EXPLICIT`)),Ul(hm,gm,vm(e)),Ul(hm,gm,`esm2017`)}var bm=Ps(`authIdTokenMaxAge`)||300,xm=null,Sm=e=>async t=>{let n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>bm)return;let i=n?.token;xm!==i&&(xm=i,await fetch(e,{method:i?`POST`:`DELETE`,headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Cm(e=Hl()){let t=Ll(e,`auth`);if(t.isInitialized())return t.getImmediate();let n=Pd(e,{popupRedirectResolver:sm,persistence:[sp,Lf,zf]}),r=Ps(`authTokenSyncURL`);if(r){let e=Sm(r);Ef(n,e,()=>e(n.currentUser)),Tf(n,t=>e(t))}let i=js(`auth`);return i&&Id(n,`http://${i}`),n}ym(`Browser`);var wm=`@firebase/database`,Tm=`0.14.4`,Em=``;function Dm(e){Em=e}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Om=class{constructor(e){this.domStorage_=e,this.prefix_=`firebase:`}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Zs(t))}get(e){let t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:Xs(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}},km=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return tc(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}},Am=function(e){try{if(typeof window<`u`&&window[e]!==void 0){let t=window[e];return t.setItem(`firebase:sentinel`,`cache`),t.removeItem(`firebase:sentinel`),new Om(t)}}catch{}return new km},jm=Am(`localStorage`),Mm=Am(`sessionStorage`),Nm=new jc(`@firebase/database`),Pm=(function(){let e=1;return function(){return e++}})(),Fm=function(e){let t=gc(e),n=new uc;n.update(t);let r=n.digest();return vs.encodeByteArray(r)},Im=function(...e){let t=``;for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)||r&&typeof r==`object`&&typeof r.length==`number`?t+=Im.apply(null,r):typeof r==`object`?t+=Zs(r):t+=r,t+=` `}return t},Lm=null,Rm=!0,zm=function(e,t){X(!t||e===!0||e===!1,`Can't turn on custom loggers persistently.`),e===!0?(Nm.logLevel=Ec.VERBOSE,Lm=Nm.log.bind(Nm),t&&Mm.set(`logging_enabled`,!0)):typeof e==`function`?Lm=e:(Lm=null,Mm.remove(`logging_enabled`))},Bm=function(...e){if(Rm===!0&&(Rm=!1,Lm===null&&Mm.get(`logging_enabled`)===!0&&zm(!0)),Lm){let t=Im.apply(null,e);Lm(t)}},Vm=function(e){return function(...t){Bm(e,...t)}},Hm=function(...e){let t=`FIREBASE INTERNAL ERROR: `+Im(...e);Nm.error(t)},Um=function(...e){let t=`FIREBASE FATAL ERROR: ${Im(...e)}`;throw Nm.error(t),Error(t)},Wm=function(...e){let t=`FIREBASE WARNING: `+Im(...e);Nm.warn(t)},Gm=function(){typeof window<`u`&&window.location&&window.location.protocol&&window.location.protocol.indexOf(`https:`)!==-1&&Wm(`Insecure Firebase access from a secure page. Please use https in calls to new Firebase().`)},Km=function(e){return typeof e==`number`&&(e!==e||e===1/0||e===-1/0)},qm=function(e){if(Hs()||document.readyState===`complete`)e();else{let t=!1,n=function(){if(!document.body){setTimeout(n,10);return}t||(t=!0,e())};document.addEventListener?(document.addEventListener(`DOMContentLoaded`,n,!1),window.addEventListener(`load`,n,!1)):document.attachEvent&&(document.attachEvent(`onreadystatechange`,()=>{document.readyState===`complete`&&n()}),window.attachEvent(`onload`,n))}},Jm=`[MIN_NAME]`,Ym=`[MAX_NAME]`,Xm=function(e,t){if(e===t)return 0;if(e===`[MIN_NAME]`||t===`[MAX_NAME]`)return-1;if(t===`[MIN_NAME]`||e===`[MAX_NAME]`)return 1;{let n=sh(e),r=sh(t);return n===null?r===null&&e<t?-1:1:r===null?-1:n-r===0?e.length-t.length:n-r}},Zm=function(e,t){return e===t?0:e<t?-1:1},Qm=function(e,t){if(t&&e in t)return t[e];throw Error(`Missing required key (`+e+`) in object: `+Zs(t))},$m=function(e){if(typeof e!=`object`||!e)return Zs(e);let t=[];for(let n in e)t.push(n);t.sort();let n=`{`;for(let r=0;r<t.length;r++)r!==0&&(n+=`,`),n+=Zs(t[r]),n+=`:`,n+=$m(e[t[r]]);return n+=`}`,n},eh=function(e,t){let n=e.length;if(n<=t)return[e];let r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function th(e,t){for(let n in e)e.hasOwnProperty(n)&&t(n,e[n])}var nh=function(e){X(!Km(e),`Invalid JSON number`);let t=1023,n,r,i,a,o;e===0?(r=0,i=0,n=1/e==-1/0?1:0):(n=e<0,e=Math.abs(e),e>=2**(1-t)?(a=Math.min(Math.floor(Math.log(e)/Math.LN2),t),r=a+t,i=Math.round(e*2**(52-a)-2**52)):(r=0,i=Math.round(e/2**(1-t-52))));let s=[];for(o=52;o;--o)s.push(i%2?1:0),i=Math.floor(i/2);for(o=11;o;--o)s.push(r%2?1:0),r=Math.floor(r/2);s.push(n?1:0),s.reverse();let c=s.join(``),l=``;for(o=0;o<64;o+=8){let e=parseInt(c.substr(o,8),2).toString(16);e.length===1&&(e=`0`+e),l+=e}return l.toLowerCase()},rh=function(){return!!(typeof window==`object`&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},ih=function(){return typeof Windows==`object`&&typeof Windows.UI==`object`};function ah(e,t){let n=`Unknown Error`;e===`too_big`?n=`The data requested exceeds the maximum size that can be accessed with a single request.`:e===`permission_denied`?n=`Client doesn't have permission to access the desired data.`:e===`unavailable`&&(n=`The service is unavailable`);let r=Error(e+` at `+t._path.toString()+`: `+n);return r.code=e.toUpperCase(),r}var oh=RegExp(`^-?(0*)\\d{1,10}$`),sh=function(e){if(oh.test(e)){let t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},ch=function(e){try{e()}catch(e){setTimeout(()=>{let t=e.stack||``;throw Wm(`Exception was thrown by user callback.`,t),e},0)}},lh=function(){return(typeof window==`object`&&window.navigator&&window.navigator.userAgent||``).search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},uh=function(e,t){let n=setTimeout(e,t);return typeof n==`number`&&typeof Deno<`u`&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n==`object`&&n.unref&&n.unref(),n},dh=class{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(e=>this.appCheck=e)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,n)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)==null||t.get().then(t=>t.addTokenListener(e))}notifyForInvalidToken(){Wm(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}},fh=class{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(e=>this.auth_=e)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(e=>e&&e.code===`auth/token-not-initialized`?(Bm(`Got auth/token-not-initialized error.  Treating as null token.`),null):Promise.reject(e)):new Promise((t,n)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e=`Provided authentication credentials for the app named "`+this.appName_+`" are invalid. This usually indicates your app was not initialized correctly. `;`credential`in this.firebaseOptions_?e+=`Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.`:`serviceAccount`in this.firebaseOptions_?e+=`Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.`:e+=`Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.`,Wm(e)}},ph=class{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}};ph.OWNER=`owner`;var mh=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,hh=`websocket`,gh=`long_polling`,_h=class{constructor(e,t,n,r,i=!1,a=``,o=!1,s=!1){this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=a,this.includeNamespaceInQueryParams=o,this.isUsingEmulator=s,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(`.`)+1),this.internalHost=jm.get(`host:`+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)===`s-`}isCustomHost(){return this._domain!==`firebaseio.com`&&this._domain!==`firebaseio-demo.com`}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&jm.set(`host:`+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+=`<`+this.persistenceKey+`>`),e}toURLString(){let e=this.secure?`https://`:`http://`,t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:``;return`${e}${this.host}/${t}`}};function vh(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function yh(e,t,n){X(typeof t==`string`,`typeof type must == string`),X(typeof n==`object`,`typeof params must == object`);let r;if(t===`websocket`)r=(e.secure?`wss://`:`ws://`)+e.internalHost+`/.ws?`;else if(t===`long_polling`)r=(e.secure?`https://`:`http://`)+e.internalHost+`/.lp?`;else throw Error(`Unknown connection type: `+t);vh(e)&&(n.ns=e.namespace);let i=[];return th(n,(e,t)=>{i.push(e+`=`+t)}),r+i.join(`&`)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var bh=class{constructor(){this.counters_={}}incrementCounter(e,t=1){tc(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Cs(this.counters_)}},xh={},Sh={};function Ch(e){let t=e.toString();return xh[t]||(xh[t]=new bh),xh[t]}function wh(e,t){let n=e.toString();return Sh[n]||(Sh[n]=t()),Sh[n]}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Th=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){let e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&ch(()=>{this.onMessage_(e[t])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&=(this.onClose(),null);break}this.currentResponseNum++}}},Eh=`start`,Dh=`pLPCommand`,Oh=`pRTLPCB`,kh=`dframe`,Ah=1840,jh=25e3,Mh=3e4,Nh=class e{constructor(e,t,n,r,i,a,o){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=a,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Vm(e),this.stats_=Ch(t),this.urlFn=e=>(this.appCheckToken&&(e.ac=this.appCheckToken),yh(t,gh,e))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Th(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_(`Timed out trying to connect.`),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Mh)),qm(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ph((...e)=>{let[t,n,r,i,a]=e;if(this.incrementIncomingBytes_(e),this.scriptTagHolder)if(this.connectTimeoutTimer_&&=(clearTimeout(this.connectTimeoutTimer_),null),this.everConnected_=!0,t===`start`)this.id=n,this.password=r;else if(t===`close`)n?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(n,()=>{this.onClosed_()})):this.onClosed_();else throw Error(`Unrecognized command received: `+t)},(...e)=>{let[t,n]=e;this.incrementIncomingBytes_(e),this.myPacketOrderer.handleResponse(t,n)},()=>{this.onClosed_()},this.urlFn);let e={};e[Eh]=`t`,e.ser=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=`5`,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e.ac=this.appCheckToken),typeof location<`u`&&location.hostname&&mh.test(location.hostname)&&(e.r=`f`);let t=this.urlFn(e);this.log_(`Connecting via long-poll to `+t),this.scriptTagHolder.addTag(t,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){e.forceAllow_=!0}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){return Hs()?!1:e.forceAllow_?!0:!e.forceDisallow_&&typeof document<`u`&&document.createElement!=null&&!rh()&&!ih()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&=(this.scriptTagHolder.close(),null),this.myDisconnFrame&&=(document.body.removeChild(this.myDisconnFrame),null),this.connectTimeoutTimer_&&=(clearTimeout(this.connectTimeoutTimer_),null)}onClosed_(){this.isClosed_||(this.log_(`Longpoll is closing itself`),this.shutdown_(),this.onDisconnect_&&=(this.onDisconnect_(this.everConnected_),null))}close(){this.isClosed_||(this.log_(`Longpoll is being closed.`),this.shutdown_())}send(e){let t=Zs(e);this.bytesSent+=t.length,this.stats_.incrementCounter(`bytes_sent`,t.length);let n=bs(t),r=eh(n,Ah);for(let e=0;e<r.length;e++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[e]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(Hs())return;this.myDisconnFrame=document.createElement(`iframe`);let n={};n[kh]=`t`,n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display=`none`,document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let t=Zs(e).length;this.bytesReceived+=t,this.stats_.incrementCounter(`bytes_received`,t)}},Ph=class e{constructor(t,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Hs())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=Pm(),window[Dh+this.uniqueCallbackIdentifier]=t,window[Oh+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();let r=``;this.myIFrame.src&&this.myIFrame.src.substr(0,11)===`javascript:`&&(r=`<script>document.domain="`+document.domain+`";<\/script>`);let i=`<html><body>`+r+`</body></html>`;try{this.myIFrame.doc.open(),this.myIFrame.doc.write(i),this.myIFrame.doc.close()}catch(e){Bm(`frame writing exception`),e.stack&&Bm(e.stack),Bm(e)}}}static createIFrame_(){let e=document.createElement(`iframe`);if(e.style.display=`none`,document.body){document.body.appendChild(e);try{e.contentWindow.document||Bm(`No IE domain setting required`)}catch{e.src=`javascript:void((function(){document.open();document.domain='`+document.domain+`';document.close();})())`}}else throw`Document body has not initialized. Wait to initialize Firebase until after the document is ready.`;return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent=``,setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},0));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n=``,r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){let e=this.pendingSegs.shift();n=n+`&seg`+r+`=`+e.seg+`&ts`+r+`=`+e.ts+`&d`+r+`=`+e.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);let n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(jh));this.addTag(e,()=>{clearTimeout(r),n()})}addTag(e,t){Hs()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let n=this.myIFrame.doc.createElement(`script`);n.type=`text/javascript`,n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){let e=n.readyState;(!e||e===`loaded`||e===`complete`)&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{Bm(`Long-poll script failed to load: `+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch{}},1)}},Fh=16384,Ih=45e3,Lh=null;typeof MozWebSocket<`u`?Lh=MozWebSocket:typeof WebSocket<`u`&&(Lh=WebSocket);var Rh=class e{constructor(t,n,r,i,a,o,s){this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Vm(this.connId),this.stats_=Ch(n),this.connURL=e.connectionURL_(n,o,s,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,t,n,r,i){let a={};return a.v=`5`,!Hs()&&typeof location<`u`&&location.hostname&&mh.test(location.hostname)&&(a.r=`f`),t&&(a.s=t),n&&(a.ls=n),r&&(a.ac=r),i&&(a.p=i),yh(e,hh,a)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_(`Websocket connecting to `+this.connURL),this.everConnected_=!1,jm.set(`previous_websocket_failure`,!0);try{let e;if(Hs()){let t=this.nodeAdmin?`AdminNode`:`Node`;e={headers:{"User-Agent":`Firebase/5/${Em}/${process.platform}/${t}`,"X-Firebase-GMPID":this.applicationId||``}},this.authToken&&(e.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(e.headers[`X-Firebase-AppCheck`]=this.appCheckToken);let n={},r=this.connURL.indexOf(`wss://`)===0?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;r&&(e.proxy={origin:r})}this.mySock=new Lh(this.connURL,[],e)}catch(e){this.log_(`Error instantiating WebSocket.`);let t=e.message||e.data;t&&this.log_(t),this.onClosed_();return}this.mySock.onopen=()=>{this.log_(`Websocket connected.`),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_(`Websocket connection was disconnected.`),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_(`WebSocket error.  Closing connection.`);let t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<`u`&&navigator.userAgent){let e=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);e&&e.length>1&&parseFloat(e[1])<4.4&&(t=!0)}return!t&&Lh!==null&&!e.forceDisallow_}static previouslyFailed(){return jm.isInMemoryStorage||jm.get(`previous_websocket_failure`)===!0}markConnectionHealthy(){jm.remove(`previous_websocket_failure`)}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){let e=this.frames.join(``);this.frames=null;let t=Xs(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(X(this.frames===null,`We already have a frame buffer`),e.length<=6){let t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;let t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter(`bytes_received`,t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{let e=this.extractFrameCount_(t);e!==null&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();let t=Zs(e);this.bytesSent+=t.length,this.stats_.incrementCounter(`bytes_sent`,t.length);let n=eh(t,Fh);n.length>1&&this.sendString_(String(n.length));for(let e=0;e<n.length;e++)this.sendString_(n[e])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&=(clearInterval(this.keepaliveTimer),null),this.mySock&&=(this.mySock.close(),null)}onClosed_(){this.isClosed_||(this.log_(`WebSocket is closing itself`),this.shutdown_(),this.onDisconnect&&=(this.onDisconnect(this.everConnected_),null))}close(){this.isClosed_||(this.log_(`WebSocket is being closed`),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_(`0`),this.resetKeepAlive()},Math.floor(Ih))}sendString_(e){try{this.mySock.send(e)}catch(e){this.log_(`Exception thrown from WebSocket.send():`,e.message||e.data,`Closing connection.`),setTimeout(this.onClosed_.bind(this),0)}}};Rh.responsesRequiredToBeHealthy=2,Rh.healthyTimeout=3e4;
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var zh=class e{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Nh,Rh]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){let n=Rh&&Rh.isAvailable(),r=n&&!Rh.previouslyFailed();if(t.webSocketOnly&&(n||Wm(`wss:// URL used, but browser isn't known to support websockets.  Trying anyway.`),r=!0),r)this.transports_=[Rh];else{let t=this.transports_=[];for(let n of e.ALL_TRANSPORTS)n&&n.isAvailable()&&t.push(n);e.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw Error(`No transports available`)}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}};zh.globalTransportInitialized_=!1;
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Bh=6e4,Vh=5e3,Hh=class{constructor(e,t,n,r,i,a,o,s,c,l){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=a,this.onReady_=o,this.onDisconnect_=s,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Vm(`c:`+this.id+`:`),this.transportManager_=new zh(t),this.log_(`Connection created`),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,n)},0);let r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=uh(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_(`Connection exceeded healthy timeout but has received `+this.conn_.bytesReceived+` bytes.  Marking connection healthy.`),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_(`Connection exceeded healthy timeout but has sent `+this.conn_.bytesSent+` bytes.  Leaving connection alive.`):(this.log_(`Closing unhealthy connection after timeout.`),this.close()))},Math.floor(r)))}nextTransportId_(){return`c:`+this.id+`:`+ this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_(`Secondary connection lost.`),this.onSecondaryConnectionLost_()):this.log_(`closing an old connection`)}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_(`message on old connection`))}}sendRequest(e){let t={t:`d`,d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_(`cleaning up and promoting a connection: `+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(`t`in e){let t=e.t;t===`a`?this.upgradeIfSecondaryHealthy_():t===`r`?(this.log_(`Got a reset on secondary, closing it`),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===`o`&&(this.log_(`got pong on secondary.`),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let t=Qm(`t`,e),n=Qm(`d`,e);if(t===`c`)this.onSecondaryControl_(n);else if(t===`d`)this.pendingDataMessages.push(n);else throw Error(`Unknown protocol layer: `+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_(`Secondary connection is healthy.`),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_(`sending ping on secondary.`),this.secondaryConn_.send({t:`c`,d:{t:`p`,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_(`sending client ack on secondary`),this.secondaryConn_.send({t:`c`,d:{t:`a`,d:{}}}),this.log_(`Ending transmission on primary`),this.conn_.send({t:`c`,d:{t:`n`,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let t=Qm(`t`,e),n=Qm(`d`,e);t===`c`?this.onControl_(n):t===`d`&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_(`Primary connection is healthy.`),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let t=Qm(`t`,e);if(`d`in e){let n=e.d;if(t===`h`){let e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if(t===`n`){this.log_(`recvd end transmission on primary`),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===`s`?this.onConnectionShutdown_(n):t===`r`?this.onReset_(n):t===`e`?Hm(`Server Error: `+n):t===`o`?(this.log_(`got pong on primary.`),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Hm(`Unknown control packet command: `+t)}}onHandshake_(e){let t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),n!==`5`&&Wm(`Protocol version mismatch detected`),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),uh(()=>{this.secondaryConn_&&(this.log_(`Timed out trying to upgrade.`),this.secondaryConn_.close())},Math.floor(Bh))}onReset_(e){this.log_(`Reset packet received.  New host: `+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_(`Realtime connection established.`),this.conn_=e,this.state_=1,this.onReady_&&=(this.onReady_(t,this.sessionId),null),this.primaryResponsesRequired_===0?(this.log_(`Primary connection is healthy.`),this.isHealthy_=!0):uh(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Vh))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_(`sending ping on primary.`),this.sendData_({t:`c`,d:{t:`p`,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_(`Realtime connection failed.`),this.repoInfo_.isCacheableHost()&&(jm.remove(`host:`+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_(`Realtime connection lost.`),this.close()}onConnectionShutdown_(e){this.log_(`Connection shutdown command received. Shutting down...`),this.onKill_&&=(this.onKill_(e),null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw`Connection is not connected`;this.tx_.send(e)}close(){this.state_!==2&&(this.log_(`Closing realtime connection.`),this.state_=2,this.closeConnections_(),this.onDisconnect_&&=(this.onDisconnect_(),null))}closeConnections_(){this.log_(`Shutting down all connections`),this.conn_&&=(this.conn_.close(),null),this.secondaryConn_&&=(this.secondaryConn_.close(),null),this.healthyTimeout_&&=(clearTimeout(this.healthyTimeout_),null)}},Uh=class{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}},Wh=class{constructor(e){this.allowedEvents_=e,this.listeners_={},X(Array.isArray(e)&&e.length>0,`Requires a non-empty array`)}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let n=[...this.listeners_[e]];for(let e=0;e<n.length;e++)n[e].callback.apply(n[e].context,t)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});let r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);let r=this.listeners_[e]||[];for(let e=0;e<r.length;e++)if(r[e].callback===t&&(!n||n===r[e].context)){r.splice(e,1);return}}validateEventType_(e){X(this.allowedEvents_.find(t=>t===e),`Unknown event: `+e)}},Gh=class e extends Wh{constructor(){super([`online`]),this.online_=!0,typeof window<`u`&&window.addEventListener!==void 0&&!Rs()&&(window.addEventListener(`online`,()=>{this.online_||(this.online_=!0,this.trigger(`online`,!0))},!1),window.addEventListener(`offline`,()=>{this.online_&&(this.online_=!1,this.trigger(`online`,!1))},!1))}static getInstance(){return new e}getInitialEvent(e){return X(e===`online`,`Unknown event type: `+e),[this.online_]}currentlyOnline(){return this.online_}},Kh=class{constructor(e,t){if(t===void 0){this.pieces_=e.split(`/`);let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e=``;for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==``&&(e+=`/`+this.pieces_[t]);return e||`/`}};function qh(){return new Kh(``)}function Jh(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Yh(e){return e.pieces_.length-e.pieceNum_}function Xh(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new Kh(e.pieces_,t)}function Zh(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Qh(e){let t=``;for(let n=e.pieceNum_;n<e.pieces_.length;n++)e.pieces_[n]!==``&&(t+=`/`+encodeURIComponent(String(e.pieces_[n])));return t||`/`}function $h(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function eg(e){if(e.pieceNum_>=e.pieces_.length)return null;let t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Kh(t,0)}function tg(e,t){let n=[];for(let t=e.pieceNum_;t<e.pieces_.length;t++)n.push(e.pieces_[t]);if(t instanceof Kh)for(let e=t.pieceNum_;e<t.pieces_.length;e++)n.push(t.pieces_[e]);else{let e=t.split(`/`);for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new Kh(n,0)}function ng(e){return e.pieceNum_>=e.pieces_.length}function rg(e,t){let n=Jh(e),r=Jh(t);if(n===null)return t;if(n===r)return rg(Xh(e),Xh(t));throw Error(`INTERNAL ERROR: innerPath (`+t+`) is not within outerPath (`+e+`)`)}function ig(e,t){if(Yh(e)!==Yh(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function ag(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(Yh(e)>Yh(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var og=class{constructor(e,t){this.errorPrefix_=t,this.parts_=$h(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let e=0;e<this.parts_.length;e++)this.byteLength_+=_c(this.parts_[e]);lg(this)}};function sg(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=_c(t),lg(e)}function cg(e){let t=e.parts_.pop();e.byteLength_-=_c(t),e.parts_.length>0&&--e.byteLength_}function lg(e){if(e.byteLength_>768)throw Error(e.errorPrefix_+`has a key path longer than 768 bytes (`+e.byteLength_+`).`);if(e.parts_.length>32)throw Error(e.errorPrefix_+`path specified exceeds the maximum depth that can be written (32) or object contains a cycle `+ug(e))}function ug(e){return e.parts_.length===0?``:`in property '`+e.parts_.join(`.`)+`'`}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var dg=class e extends Wh{constructor(){super([`visible`]);let e,t;typeof document<`u`&&document.addEventListener!==void 0&&(document.hidden===void 0?document.mozHidden===void 0?document.msHidden===void 0?document.webkitHidden!==void 0&&(t=`webkitvisibilitychange`,e=`webkitHidden`):(t=`msvisibilitychange`,e=`msHidden`):(t=`mozvisibilitychange`,e=`mozHidden`):(t=`visibilitychange`,e=`hidden`)),this.visible_=!0,t&&document.addEventListener(t,()=>{let t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger(`visible`,t))},!1)}static getInstance(){return new e}getInitialEvent(e){return X(e===`visible`,`Unknown event type: `+e),[this.visible_]}},fg=1e3,pg=300*1e3,mg=30*1e3,hg=1.3,gg=`server_kill`,_g=class e extends Uh{constructor(t,n,r,i,a,o,s,c){if(super(),this.repoInfo_=t,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=a,this.authTokenProvider_=o,this.appCheckTokenProvider_=s,this.authOverride_=c,this.id=e.nextPersistentConnectionId_++,this.log_=Vm(`p:`+this.id+`:`),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=fg,this.maxReconnectDelay_=pg,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!Hs())throw Error(`Auth override specified in options, but not supported on non Node.js platforms`);dg.getInstance().on(`visible`,this.onVisible_,this),t.host.indexOf(`fblocal`)===-1&&Gh.getInstance().on(`online`,this.onOnline_,this)}sendRequest(e,t,n){let r=++this.requestNumber_,i={r,a:e,b:t};this.log_(Zs(i)),X(this.connected_,`sendRequest call when we're not connected not allowed.`),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();let t=new Fs,n={action:`g`,request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{let n=e.d;e.s===`ok`?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;let r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,r){this.initConnection_();let i=e._queryIdentifier,a=e._path.toString();this.log_(`Listen called for `+a+` `+i),this.listens.has(a)||this.listens.set(a,new Map),X(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),`listen() called for non-default but complete query`),X(!this.listens.get(a).has(i),`listen() called twice for same path/queryId.`);let o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}sendGet_(e){let t=this.outstandingGets_[e];this.sendRequest(`g`,t.request,n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)})}sendListen_(t){let n=t.query,r=n._path.toString(),i=n._queryIdentifier;this.log_(`Listen on `+r+` for `+i);let a={p:r};t.tag&&(a.q=n._queryObject,a.t=t.tag),a.h=t.hashFn(),this.sendRequest(`q`,a,a=>{let o=a.d,s=a.s;e.warnOnListenWarnings_(o,n),(this.listens.get(r)&&this.listens.get(r).get(i))===t&&(this.log_(`listen response`,a),s!==`ok`&&this.removeListen_(r,i),t.onComplete&&t.onComplete(s,o))})}static warnOnListenWarnings_(e,t){if(e&&typeof e==`object`&&tc(e,`w`)){let n=nc(e,`w`);if(Array.isArray(n)&&~n.indexOf(`no_index`)){let e=`".indexOn": "`+t._queryParams.getIndex().toString()+`"`,n=t._path.toString();Wm(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_(`Auth token refreshed`),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest(`unauth`,{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||ec(e))&&(this.log_(`Admin auth credential detected.  Reducing max reconnect time.`),this.maxReconnectDelay_=mg)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_(`App check token refreshed`),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest(`unappeck`,{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let e=this.authToken_,t=$s(e)?`auth`:`gauth`,n={cred:e};this.authOverride_===null?n.noauth=!0:typeof this.authOverride_==`object`&&(n.authvar=this.authOverride_),this.sendRequest(t,n,t=>{let n=t.s,r=t.d||`error`;this.authToken_===e&&(n===`ok`?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest(`appcheck`,{token:this.appCheckToken_},e=>{let t=e.s,n=e.d||`error`;t===`ok`?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)})}unlisten(e,t){let n=e._path.toString(),r=e._queryIdentifier;this.log_(`Unlisten called for `+n+` `+r),X(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),`unlisten() called for non-default but complete query`),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_(`Unlisten on `+e+` for `+t);let i={p:e};r&&(i.q=n,i.t=r),this.sendRequest(`n`,i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_(`o`,e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:`o`,data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_(`om`,e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:`om`,data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_(`oc`,e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:`oc`,data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){let i={p:t,d:n};this.log_(`onDisconnect `+e,i),this.sendRequest(e,i,e=>{r&&setTimeout(()=>{r(e.s,e.d)},0)})}put(e,t,n,r){this.putInternal(`p`,e,t,n,r)}merge(e,t,n,r){this.putInternal(`m`,e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();let a={p:t,d:n};i!==void 0&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;let o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_(`Buffering put: `+t)}sendPut_(e){let t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,n=>{this.log_(t+` response`,n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)})}reportStats(e){if(this.connected_){let t={c:e};this.log_(`reportStats`,t),this.sendRequest(`s`,t,e=>{if(e.s!==`ok`){let t=e.d;this.log_(`reportStats`,`Error sending stats: `+t)}})}}onDataMessage_(e){if(`r`in e){this.log_(`from server: `+Zs(e));let t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else if(`error`in e)throw`A server-side error has occurred: `+e.error;else `a`in e&&this.onDataPush_(e.a,e.b)}onDataPush_(e,t){this.log_(`handleServerMessage`,e,t),e===`d`?this.onDataUpdate_(t.p,t.d,!1,t.t):e===`m`?this.onDataUpdate_(t.p,t.d,!0,t.t):e===`c`?this.onListenRevoked_(t.p,t.q):e===`ac`?this.onAuthRevoked_(t.s,t.d):e===`apc`?this.onAppCheckRevoked_(t.s,t.d):e===`sd`?this.onSecurityDebugPacket_(t):Hm(`Unrecognized action received from server: `+Zs(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_(`connection ready`),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){X(!this.realtime_,`Scheduling a connect when we're already connected/ing?`),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_(`Window became visible.  Reducing delay.`),this.reconnectDelay_=fg,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_(`Browser went online.`),this.reconnectDelay_=fg,this.realtime_||this.scheduleConnect_(0)):(this.log_(`Browser went offline.  Killing connection.`),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_(`data client disconnected`),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&=(new Date().getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=fg),null):(this.log_(`Window isn't visible.  Delaying reconnect.`),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let e=new Date().getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_(`Trying to reconnect in `+t+`ms`),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*hg)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_(`Making a connection attempt`),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+`:`+ e.nextConnectionId_++,a=this.lastSessionId,o=!1,s=null,c=function(){s?s.close():(o=!0,r())};this.realtime_={close:c,sendRequest:function(e){X(s,`sendRequest call when we're not connected not allowed.`),s.sendRequest(e)}};let l=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[e,c]=await Promise.all([this.authTokenProvider_.getToken(l),this.appCheckTokenProvider_.getToken(l)]);o?Bm(`getToken() completed but was canceled`):(Bm(`getToken() completed. Creating connection.`),this.authToken_=e&&e.accessToken,this.appCheckToken_=c&&c.token,s=new Hh(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,e=>{Wm(e+` (`+this.repoInfo_.toString()+`)`),this.interrupt(gg)},a))}catch(e){this.log_(`Failed to get token: `+e),o||(this.repoInfo_.nodeAdmin&&Wm(e),c())}}}interrupt(e){Bm(`Interrupting connection for reason: `+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&=(clearTimeout(this.establishConnectionTimer_),null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Bm(`Resuming connection for reason: `+e),delete this.interruptReasons_[e],rc(this.interruptReasons_)&&(this.reconnectDelay_=fg,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){let t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){let t=this.outstandingPuts_[e];t&&`h`in t.request&&t.queued&&(t.onComplete&&t.onComplete(`disconnect`),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n=t?t.map(e=>$m(e)).join(`$`):`default`,r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete(`permission_denied`)}removeListen_(e,t){let n=new Kh(e).toString(),r;if(this.listens.has(n)){let e=this.listens.get(n);r=e.get(t),e.delete(t),e.size===0&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){Bm(`Auth token revoked: `+e+`/`+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e===`invalid_token`||e===`permission_denied`)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=mg,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){Bm(`App check token revoked: `+e+`/`+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e===`invalid_token`||e===`permission_denied`)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):`msg`in e&&console.log(`FIREBASE: `+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let e of this.listens.values())for(let t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){let e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){let e={},t=`js`;Hs()&&(t=this.repoInfo_.nodeAdmin?`admin_node`:`node`),e[`sdk.`+t+`.`+Em.replace(/\./g,`-`)]=1,Rs()?e[`framework.cordova`]=1:Bs()&&(e[`framework.reactnative`]=1),this.reportStats(e)}shouldReconnect_(){let e=Gh.getInstance().currentlyOnline();return rc(this.interruptReasons_)&&e}};_g.nextPersistentConnectionId_=0,_g.nextConnectionId_=0;
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var vg=class e{constructor(e,t){this.name=e,this.node=t}static Wrap(t,n){return new e(t,n)}},yg=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){let n=new vg(Jm,e),r=new vg(Jm,t);return this.compare(n,r)!==0}minPost(){return vg.MIN}},bg,xg=class extends yg{static get __EMPTY_NODE(){return bg}static set __EMPTY_NODE(e){bg=e}compare(e,t){return Xm(e.name,t.name)}isDefinedOn(e){throw hs(`KeyIndex.isDefinedOn not expected to be called.`)}indexedValueChanged(e,t){return!1}minPost(){return vg.MIN}maxPost(){return new vg(Ym,bg)}makePost(e,t){return X(typeof e==`string`,`KeyIndex indexValue must always be a string.`),new vg(e,bg)}toString(){return`.key`}},Sg=new xg,Cg=class{constructor(e,t,n,r,i=null){this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let a=1;for(;!e.isEmpty();)if(e=e,a=t?n(e.key,t):1,r&&(a*=-1),a<0)e=this.isReverse_?e.left:e.right;else if(a===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value};if(this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},wg=class e{constructor(t,n,r,i,a){this.key=t,this.value=n,this.color=r??e.RED,this.left=i??Eg.EMPTY_NODE,this.right=a??Eg.EMPTY_NODE}copy(t,n,r,i,a){return new e(t??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this,i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):i===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return Eg.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)!n.left.isEmpty()&&!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),!n.right.isEmpty()&&!n.right.isRed_()&&!n.right.left.isRed_()&&(n=n.moveRedRight_()),t(e,n.key)===0){if(n.right.isEmpty())return Eg.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){let t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){return 2**this.check_()<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw Error(`Red node has red child(`+this.key+`,`+this.value+`)`);if(this.right.isRed_())throw Error(`Right child of (`+this.key+`,`+this.value+`) is red`);let e=this.left.check_();if(e!==this.right.check_())throw Error(`Black depths differ`);return e+(this.isRed_()?0:1)}};wg.RED=!0,wg.BLACK=!1;var Tg=class{copy(e,t,n,r,i){return this}insert(e,t,n){return new wg(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Eg=class e{constructor(t,n=e.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,wg.BLACK,null,null))}remove(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,wg.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),t===0)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();)if(t=this.comparator_(e,n.key),t===0){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}else t<0?n=n.left:t>0&&(r=n,n=n.right);throw Error(`Attempted to find predecessor key for a nonexistent key.  What gives?`)}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Cg(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Cg(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Cg(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Cg(this.root_,null,this.comparator_,!0,e)}};Eg.EMPTY_NODE=new Tg;
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Dg(e,t){return Xm(e.name,t.name)}function Og(e,t){return Xm(e,t)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var kg;function Ag(e){kg=e}var jg=function(e){return typeof e==`number`?`number:`+nh(e):`string:`+e},Mg=function(e){if(e.isLeafNode()){let t=e.val();X(typeof t==`string`||typeof t==`number`||typeof t==`object`&&tc(t,`.sv`),`Priority must be a string or number.`)}else X(e===kg||e.isEmpty(),`priority of unexpected type.`);X(e===kg||e.getPriority().isEmpty(),`Priority nodes can't have a priority of their own.`)},Ng,Pg=class e{constructor(t,n=e.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=n,this.lazyHash_=null,X(this.value_!==void 0&&this.value_!==null,`LeafNode shouldn't be created with null/undefined value.`),Mg(this.priorityNode_)}static set __childrenNodeConstructor(e){Ng=e}static get __childrenNodeConstructor(){return Ng}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new e(this.value_,t)}getImmediateChild(t){return t===`.priority`?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return ng(t)?this:Jh(t)===`.priority`?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(t,n){return t===`.priority`?this.updatePriority(n):n.isEmpty()&&t!==`.priority`?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}updateChild(t,n){let r=Jh(t);return r===null?n:n.isEmpty()&&r!==`.priority`?this:(X(r!==`.priority`||Yh(t)===1,`.priority must be the last token in a path`),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(Xh(t),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e=``;this.priorityNode_.isEmpty()||(e+=`priority:`+jg(this.priorityNode_.val())+`:`);let t=typeof this.value_;e+=t+`:`,t===`number`?e+=nh(this.value_):e+=this.value_,this.lazyHash_=Fm(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(X(t.isLeafNode(),`Unknown node type`),this.compareToLeafNode_(t))}compareToLeafNode_(t){let n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return X(i>=0,`Unknown leaf type: `+n),X(a>=0,`Unknown leaf type: `+r),i===a?r===`object`?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){let t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}};Pg.VALUE_TYPE_ORDER=[`object`,`boolean`,`number`,`string`];
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Fg,Ig;function Lg(e){Fg=e}function Rg(e){Ig=e}var zg=new class extends yg{compare(e,t){let n=(e.node.getPriority()),r=(t.node.getPriority()),i=(n.compareTo(r));return i===0?Xm(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return vg.MIN}maxPost(){return new vg(Ym,new Pg(`[PRIORITY-POST]`,Ig))}makePost(e,t){let n=(Fg(e));return new vg(t,new Pg(`[PRIORITY-POST]`,n))}toString(){return`.priority`}},Bg=Math.log(2),Vg=class{constructor(e){let t=e=>parseInt(Math.log(e)/Bg,10),n=e=>parseInt(Array(e+1).join(`1`),2);this.count=t(e+1),this.current_=this.count-1;let r=n(this.count);this.bits_=e+1&r}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},Hg=function(e,t,n,r){e.sort(t);let i=function(t,r){let a=r-t,o,s;if(a===0)return null;if(a===1)return o=e[t],s=n?n(o):o,new wg(s,o.node,wg.BLACK,null,null);{let c=parseInt(a/2,10)+t,l=i(t,c),u=i(c+1,r);return o=e[c],s=n?n(o):o,new wg(s,o.node,wg.BLACK,l,u)}},a=function(t){let r=null,a=null,o=e.length,s=function(t,r){let a=o-t,s=o;o-=t;let l=i(a+1,s),u=e[a],d=n?n(u):u;c(new wg(d,u.node,r,null,l))},c=function(e){r?(r.left=e,r=e):(a=e,r=e)};for(let e=0;e<t.count;++e){let n=t.nextBitIsOne(),r=2**(t.count-(e+1));n?s(r,wg.BLACK):(s(r,wg.BLACK),s(r,wg.RED))}return a},o=new Vg(e.length),s=a(o);return new Eg(r||t,s)},Ug,Wg={},Gg=class e{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return X(Wg&&zg,`ChildrenNode.ts has not been loaded`),Ug||=new e({".priority":Wg},{".priority":zg}),Ug}get(e){let t=nc(this.indexes_,e);if(!t)throw Error(`No index defined for `+e);return t instanceof Eg?t:null}hasIndex(e){return tc(this.indexSet_,e.toString())}addIndex(t,n){X(t!==Sg,`KeyIndex always exists and isn't meant to be added to the IndexMap.`);let r=[],i=!1,a=n.getIterator(vg.Wrap),o=a.getNext();for(;o;)i||=t.isDefinedOn(o.node),r.push(o),o=a.getNext();let s=i?Hg(r,t.getCompare()):Wg,c=t.toString(),l=Object.assign({},this.indexSet_);l[c]=t;let u=Object.assign({},this.indexes_);return u[c]=s,new e(u,l)}addToIndexes(t,n){let r=ic(this.indexes_,(e,r)=>{let i=nc(this.indexSet_,r);if(X(i,`Missing index implementation for `+r),e===Wg)if(i.isDefinedOn(t.node)){let e=[],r=n.getIterator(vg.Wrap),a=r.getNext();for(;a;)a.name!==t.name&&e.push(a),a=r.getNext();return e.push(t),Hg(e,i.getCompare())}else return Wg;else{let r=n.get(t.name),i=e;return r&&(i=i.remove(new vg(t.name,r))),i.insert(t,t.node)}});return new e(r,this.indexSet_)}removeFromIndexes(t,n){let r=ic(this.indexes_,e=>{if(e===Wg)return e;{let r=n.get(t.name);return r?e.remove(new vg(t.name,r)):e}});return new e(r,this.indexSet_)}},Kg,qg=class e{constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Mg(this.priorityNode_),this.children_.isEmpty()&&X(!this.priorityNode_||this.priorityNode_.isEmpty(),`An empty node cannot have a priority`)}static get EMPTY_NODE(){return Kg||=new e(new Eg(Og),null,Gg.Default)}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Kg}updatePriority(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}getImmediateChild(e){if(e===`.priority`)return this.getPriority();{let t=this.children_.get(e);return t===null?Kg:t}}getChild(e){let t=Jh(e);return t===null?this:this.getImmediateChild(t).getChild(Xh(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(t,n){if(X(n,`We should always be passing snapshot nodes`),t===`.priority`)return this.updatePriority(n);{let r=new vg(t,n),i,a;n.isEmpty()?(i=this.children_.remove(t),a=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(t,n),a=this.indexMap_.addToIndexes(r,this.children_));let o=i.isEmpty()?Kg:this.priorityNode_;return new e(i,o,a)}}updateChild(e,t){let n=Jh(e);if(n===null)return t;{X(Jh(e)!==`.priority`||Yh(e)===1,`.priority must be the last token in a path`);let r=this.getImmediateChild(n).updateChild(Xh(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let n={},r=0,i=0,a=!0;if(this.forEachChild(zg,(o,s)=>{n[o]=s.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1}),!t&&a&&i<2*r){let e=[];for(let t in n)e[t]=n[t];return e}else return t&&!this.getPriority().isEmpty()&&(n[`.priority`]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e=``;this.getPriority().isEmpty()||(e+=`priority:`+jg(this.getPriority().val())+`:`),this.forEachChild(zg,(t,n)=>{let r=n.hash();r!==``&&(e+=`:`+t+`:`+r)}),this.lazyHash_=e===``?``:Fm(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){let r=this.resolveIndex_(n);if(r){let n=r.getPredecessorKey(new vg(e,t));return n?n.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){let t=this.resolveIndex_(e);if(t){let e=t.minKey();return e&&e.name}else return this.children_.minKey()}getFirstChild(e){let t=this.getFirstChildName(e);return t?new vg(t,this.children_.get(t)):null}getLastChildName(e){let t=this.resolveIndex_(e);if(t){let e=t.maxKey();return e&&e.name}else return this.children_.maxKey()}getLastChild(e){let t=this.getLastChildName(e);return t?new vg(t,this.children_.get(t)):null}forEachChild(e,t){let n=this.resolveIndex_(e);return n?n.inorderTraversal(e=>t(e.name,e.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){let n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,e=>e);{let n=this.children_.getIteratorFrom(e.name,vg.Wrap),r=n.peek();for(;r!=null&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){let n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,e=>e);{let n=this.children_.getReverseIteratorFrom(e.name,vg.Wrap),r=n.peek();for(;r!=null&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Jg?-1:0}withIndex(t){if(t===Sg||this.indexMap_.hasIndex(t))return this;{let n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Sg||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{let t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){let e=this.getIterator(zg),n=t.getIterator(zg),r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return r===null&&i===null}else return!1;else return!1}}resolveIndex_(e){return e===Sg?null:this.indexMap_.get(e.toString())}};qg.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var Jg=new class extends qg{constructor(){super(new Eg(Og),qg.EMPTY_NODE,Gg.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return qg.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(vg,{MIN:{value:new vg(Jm,qg.EMPTY_NODE)},MAX:{value:new vg(Ym,Jg)}}),xg.__EMPTY_NODE=qg.EMPTY_NODE,Pg.__childrenNodeConstructor=qg,Ag(Jg),Rg(Jg);function Yg(e,t=null){if(e===null)return qg.EMPTY_NODE;if(typeof e==`object`&&`.priority`in e&&(t=e[`.priority`]),X(t===null||typeof t==`string`||typeof t==`number`||typeof t==`object`&&`.sv`in t,`Invalid priority type found: `+typeof t),typeof e==`object`&&`.value`in e&&e[`.value`]!==null&&(e=e[`.value`]),typeof e!=`object`||`.sv`in e)return new Pg(e,Yg(t));if(e instanceof Array){let n=qg.EMPTY_NODE;return th(e,(t,r)=>{if(tc(e,t)&&t.substring(0,1)!==`.`){let e=Yg(r);(e.isLeafNode()||!e.isEmpty())&&(n=n.updateImmediateChild(t,e))}}),n.updatePriority(Yg(t))}else{let n=[],r=!1;if(th(e,(e,t)=>{if(e.substring(0,1)!==`.`){let i=Yg(t);i.isEmpty()||(r||=!i.getPriority().isEmpty(),n.push(new vg(e,i)))}}),n.length===0)return qg.EMPTY_NODE;let i=Hg(n,Dg,e=>e.name,Og);if(r){let e=Hg(n,zg.getCompare());return new qg(i,Yg(t),new Gg({".priority":e},{".priority":zg}))}else return new qg(i,Yg(t),Gg.Default)}}Lg(Yg);
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Xg=class extends yg{constructor(e){super(),this.indexPath_=e,X(!ng(e)&&Jh(e)!==`.priority`,`Can't create PathIndex with empty path or .priority key`)}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){let n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return i===0?Xm(e.name,t.name):i}makePost(e,t){let n=Yg(e),r=qg.EMPTY_NODE.updateChild(this.indexPath_,n);return new vg(t,r)}maxPost(){let e=qg.EMPTY_NODE.updateChild(this.indexPath_,Jg);return new vg(Ym,e)}toString(){return $h(this.indexPath_,0).join(`/`)}},Zg=new class extends yg{compare(e,t){let n=(e.node.compareTo(t.node));return n===0?Xm(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return vg.MIN}maxPost(){return vg.MAX}makePost(e,t){let n=(Yg(e));return new vg(t,n)}toString(){return`.value`}};
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Qg(e){return{type:`value`,snapshotNode:e}}function $g(e,t){return{type:`child_added`,snapshotNode:t,childName:e}}function e_(e,t){return{type:`child_removed`,snapshotNode:t,childName:e}}function t_(e,t,n){return{type:`child_changed`,snapshotNode:t,childName:e,oldSnap:n}}function n_(e,t){return{type:`child_moved`,snapshotNode:t,childName:e}}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var r_=class{constructor(e){this.index_=e}updateChild(e,t,n,r,i,a){X(e.isIndexed(this.index_),`A node must be indexed if only a child is updated`);let o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()||(a!=null&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(e_(t,o)):X(e.isLeafNode(),`A child remove without an old child only makes sense on a leaf node`):o.isEmpty()?a.trackChildChange($g(t,n)):a.trackChildChange(t_(t,n,o))),e.isLeafNode()&&n.isEmpty())?e:e.updateImmediateChild(t,n).withIndex(this.index_)}updateFullNode(e,t,n){return n!=null&&(e.isLeafNode()||e.forEachChild(zg,(e,r)=>{t.hasChild(e)||n.trackChildChange(e_(e,r))}),t.isLeafNode()||t.forEachChild(zg,(t,r)=>{if(e.hasChild(t)){let i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(t_(t,r,i))}else n.trackChildChange($g(t,r))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?qg.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}},i_=class e{constructor(t){this.indexedFilter_=new r_(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,r,i,a){return this.matches(new vg(t,n))||(n=qg.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)}updateFullNode(e,t,n){t.isLeafNode()&&(t=qg.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(qg.EMPTY_NODE);let i=this;return t.forEachChild(zg,(e,t)=>{i.matches(new vg(e,t))||(r=r.updateImmediateChild(e,qg.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}},a_=class{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{let t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{let t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new i_(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,r,i,a){return this.rangedFilter_.matches(new vg(t,n))||(n=qg.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,a):this.fullLimitUpdateChild_(e,t,n,i,a)}updateFullNode(e,t,n){let r;if(t.isLeafNode()||t.isEmpty())r=qg.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){r=qg.EMPTY_NODE.withIndex(this.index_);let e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_),n=0;for(;e.hasNext()&&n<this.limit_;){let t=e.getNext();if(this.withinDirectionalStart(t))if(this.withinDirectionalEnd(t))r=r.updateImmediateChild(t.name,t.node),n++;else break;else continue}}else{r=t.withIndex(this.index_),r=r.updatePriority(qg.EMPTY_NODE);let e=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_),n=0;for(;e.hasNext();){let t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:r=r.updateImmediateChild(t.name,qg.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,r,i){let a;if(this.reverse_){let e=this.index_.getCompare();a=(t,n)=>e(n,t)}else a=this.index_.getCompare();let o=e;X(o.numChildren()===this.limit_,``);let s=new vg(t,n),c=this.reverse_?o.getFirstChild(this.index_):o.getLastChild(this.index_),l=this.rangedFilter_.matches(s);if(o.hasChild(t)){let e=o.getImmediateChild(t),u=r.getChildAfterChild(this.index_,c,this.reverse_);for(;u!=null&&(u.name===t||o.hasChild(u.name));)u=r.getChildAfterChild(this.index_,u,this.reverse_);let d=u==null?1:a(u,s);if(l&&!n.isEmpty()&&d>=0)return i?.trackChildChange(t_(t,n,e)),o.updateImmediateChild(t,n);{i?.trackChildChange(e_(t,e));let n=o.updateImmediateChild(t,qg.EMPTY_NODE);return u!=null&&this.rangedFilter_.matches(u)?(i?.trackChildChange($g(u.name,u.node)),n.updateImmediateChild(u.name,u.node)):n}}else if(n.isEmpty())return e;else if(l)return a(c,s)>=0?(i!=null&&(i.trackChildChange(e_(c.name,c.node)),i.trackChildChange($g(t,n))),o.updateImmediateChild(t,n).updateImmediateChild(c.name,qg.EMPTY_NODE)):e;else return e}},o_=class e{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_=``,this.indexStartValue_=null,this.indexStartName_=``,this.indexEndValue_=null,this.indexEndName_=``,this.index_=zg}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===``?this.startSet_:this.viewFrom_===`l`}getIndexStartValue(){return X(this.startSet_,`Only valid if start has been set`),this.indexStartValue_}getIndexStartName(){return X(this.startSet_,`Only valid if start has been set`),this.startNameSet_?this.indexStartName_:Jm}hasEnd(){return this.endSet_}getIndexEndValue(){return X(this.endSet_,`Only valid if end has been set`),this.indexEndValue_}getIndexEndName(){return X(this.endSet_,`Only valid if end has been set`),this.endNameSet_?this.indexEndName_:Ym}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==``}getLimit(){return X(this.limitSet_,`Only valid if limit has been set`),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===zg}copy(){let t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}};function s_(e){return e.loadsAllData()?new r_(e.getIndex()):e.hasLimit()?new a_(e):new i_(e)}function c_(e){let t={};if(e.isDefault())return t;let n;if(e.index_===zg?n=`$priority`:e.index_===Zg?n=`$value`:e.index_===Sg?n=`$key`:(X(e.index_ instanceof Xg,`Unrecognized index type!`),n=e.index_.toString()),t.orderBy=Zs(n),e.startSet_){let n=e.startAfterSet_?`startAfter`:`startAt`;t[n]=Zs(e.indexStartValue_),e.startNameSet_&&(t[n]+=`,`+Zs(e.indexStartName_))}if(e.endSet_){let n=e.endBeforeSet_?`endBefore`:`endAt`;t[n]=Zs(e.indexEndValue_),e.endNameSet_&&(t[n]+=`,`+Zs(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function l_(e){let t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;n===``&&(n=e.isViewFromLeft()?`l`:`r`),t.vf=n}return e.index_!==zg&&(t.i=e.index_.toString()),t}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var u_=class e extends Uh{constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=Vm(`p:rest:`),this.listens_={}}reportStats(e){throw Error(`Method not implemented.`)}static getListenId_(e,t){return t===void 0?(X(e._queryParams.isDefault(),`should have a tag if it's not a default query.`),e._path.toString()):`tag$`+t}listen(t,n,r,i){let a=t._path.toString();this.log_(`Listen called for `+a+` `+t._queryIdentifier);let o=e.getListenId_(t,r),s={};this.listens_[o]=s;let c=c_(t._queryParams);this.restRequest_(a+`.json`,c,(e,t)=>{let n=t;if(e===404&&(n=null,e=null),e===null&&this.onDataUpdate_(a,n,!1,r),nc(this.listens_,o)===s){let t=e?e===401?`permission_denied`:`rest_error:`+e:`ok`;i(t,null)}})}unlisten(t,n){let r=e.getListenId_(t,n);delete this.listens_[r]}get(e){let t=c_(e._queryParams),n=e._path.toString(),r=new Fs;return this.restRequest_(n+`.json`,t,(e,t)=>{let i=t;e===404&&(i=null,e=null),e===null?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(Error(i))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},n){return t.format=`export`,Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,i])=>{r&&r.accessToken&&(t.auth=r.accessToken),i&&i.token&&(t.ac=i.token);let a=(this.repoInfo_.secure?`https://`:`http://`)+this.repoInfo_.host+e+`?ns=`+this.repoInfo_.namespace+sc(t);this.log_(`Sending REST request for `+a);let o=new XMLHttpRequest;o.onreadystatechange=()=>{if(n&&o.readyState===4){this.log_(`REST Response for `+a+` received. status:`,o.status,`response:`,o.responseText);let e=null;if(o.status>=200&&o.status<300){try{e=Xs(o.responseText)}catch{Wm(`Failed to parse JSON response for `+a+`: `+o.responseText)}n(null,e)}else o.status!==401&&o.status!==404&&Wm(`Got unsuccessful REST response for `+a+` Status: `+o.status),n(o.status);n=null}},o.open(`GET`,a,!0),o.send()})}},d_=class{constructor(){this.rootNode_=qg.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}};
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function f_(){return{value:null,children:new Map}}function p_(e,t,n){if(ng(t))e.value=n,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,n);else{let r=Jh(t);e.children.has(r)||e.children.set(r,f_());let i=e.children.get(r);t=Xh(t),p_(i,t,n)}}function m_(e,t,n){e.value===null?h_(e,(e,r)=>{let i=new Kh(t.toString()+`/`+e);m_(r,i,n)}):n(t,e.value)}function h_(e,t){e.children.forEach((e,n)=>{t(n,e)})}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var g_=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),t=Object.assign({},e);return this.last_&&th(this.last_,(e,n)=>{t[e]=t[e]-n}),this.last_=e,t}},__=10*1e3,v_=30*1e3,y_=300*1e3,b_=class{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new g_(e);let n=__+(v_-__)*Math.random();uh(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){let e=this.statsListener_.get(),t={},n=!1;th(e,(e,r)=>{r>0&&tc(this.statsToReport_,e)&&(t[e]=r,n=!0)}),n&&this.server_.reportStats(t),uh(this.reportStats_.bind(this),Math.floor(Math.random()*2*y_))}},x_;(function(e){e[e.OVERWRITE=0]=`OVERWRITE`,e[e.MERGE=1]=`MERGE`,e[e.ACK_USER_WRITE=2]=`ACK_USER_WRITE`,e[e.LISTEN_COMPLETE=3]=`LISTEN_COMPLETE`})(x_||={});function S_(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function C_(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function w_(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var T_=class e{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=x_.ACK_USER_WRITE,this.source=S_()}operationForChild(t){if(ng(this.path)){if(this.affectedTree.value!=null)return X(this.affectedTree.children.isEmpty(),`affectedTree should not have overlapping affected paths.`),this;{let n=this.affectedTree.subtree(new Kh(t));return new e(qh(),n,this.revert)}}else return X(Jh(this.path)===t,`operationForChild called for unrelated child.`),new e(Xh(this.path),this.affectedTree,this.revert)}},E_=class e{constructor(e,t){this.source=e,this.path=t,this.type=x_.LISTEN_COMPLETE}operationForChild(t){return ng(this.path)?new e(this.source,qh()):new e(this.source,Xh(this.path))}},D_=class e{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=x_.OVERWRITE}operationForChild(t){return ng(this.path)?new e(this.source,qh(),this.snap.getImmediateChild(t)):new e(this.source,Xh(this.path),this.snap)}},O_=class e{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=x_.MERGE}operationForChild(t){if(ng(this.path)){let n=this.children.subtree(new Kh(t));return n.isEmpty()?null:n.value?new D_(this.source,qh(),n.value):new e(this.source,qh(),n)}else return X(Jh(this.path)===t,`Can't get a merge for a child not on the path of the operation`),new e(this.source,Xh(this.path),this.children)}toString(){return`Operation(`+this.path+`: `+this.source.toString()+` merge: `+this.children.toString()+`)`}},k_=class{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ng(e))return this.isFullyInitialized()&&!this.filtered_;let t=Jh(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}},A_=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function j_(e,t,n,r){let i=[],a=[];return t.forEach(t=>{t.type===`child_changed`&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push(n_(t.childName,t.snapshotNode))}),M_(e,i,`child_removed`,t,r,n),M_(e,i,`child_added`,t,r,n),M_(e,i,`child_moved`,a,r,n),M_(e,i,`child_changed`,t,r,n),M_(e,i,`value`,t,r,n),i}function M_(e,t,n,r,i,a){let o=r.filter(e=>e.type===n);o.sort((t,n)=>P_(e,t,n)),o.forEach(n=>{let r=N_(e,n,a);i.forEach(i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))})})}function N_(e,t,n){return t.type===`value`||t.type===`child_removed`||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function P_(e,t,n){if(t.childName==null||n.childName==null)throw hs(`Should only compare child_ events.`);let r=new vg(t.childName,t.snapshotNode),i=new vg(n.childName,n.snapshotNode);return e.index_.compare(r,i)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function F_(e,t){return{eventCache:e,serverCache:t}}function I_(e,t,n,r){return F_(new k_(t,n,r),e.serverCache)}function L_(e,t,n,r){return F_(e.eventCache,new k_(t,n,r))}function R_(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function z_(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var B_,V_=()=>(B_||=new Eg(Zm),B_),H_=class e{constructor(e,t=V_()){this.value=e,this.children=t}static fromObject(t){let n=new e(null);return th(t,(e,t)=>{n=n.set(new Kh(e),t)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:qh(),value:this.value};if(ng(e))return null;{let n=Jh(e),r=this.children.get(n);if(r!==null){let i=r.findRootMostMatchingPathAndValue(Xh(e),t);return i==null?null:{path:tg(new Kh(n),i.path),value:i.value}}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(t){if(ng(t))return this;{let n=Jh(t),r=this.children.get(n);return r===null?new e(null):r.subtree(Xh(t))}}set(t,n){if(ng(t))return new e(n,this.children);{let r=Jh(t),i=(this.children.get(r)||new e(null)).set(Xh(t),n),a=this.children.insert(r,i);return new e(this.value,a)}}remove(t){if(ng(t))return this.children.isEmpty()?new e(null):new e(null,this.children);{let n=Jh(t),r=this.children.get(n);if(r){let i=r.remove(Xh(t)),a=i.isEmpty()?this.children.remove(n):this.children.insert(n,i);return this.value===null&&a.isEmpty()?new e(null):new e(this.value,a)}else return this}}get(e){if(ng(e))return this.value;{let t=Jh(e),n=this.children.get(t);return n?n.get(Xh(e)):null}}setTree(t,n){if(ng(t))return n;{let r=Jh(t),i=(this.children.get(r)||new e(null)).setTree(Xh(t),n),a=i.isEmpty()?this.children.remove(r):this.children.insert(r,i);return new e(this.value,a)}}fold(e){return this.fold_(qh(),e)}fold_(e,t){let n={};return this.children.inorderTraversal((r,i)=>{n[r]=i.fold_(tg(e,r),t)}),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,qh(),t)}findOnPath_(e,t,n){let r=this.value?n(t,this.value):!1;if(r)return r;if(ng(e))return null;{let r=Jh(e),i=this.children.get(r);return i?i.findOnPath_(Xh(e),tg(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,qh(),t)}foreachOnPath_(t,n,r){if(ng(t))return this;{this.value&&r(n,this.value);let i=Jh(t),a=this.children.get(i);return a?a.foreachOnPath_(Xh(t),tg(n,i),r):new e(null)}}foreach(e){this.foreach_(qh(),e)}foreach_(e,t){this.children.inorderTraversal((n,r)=>{r.foreach_(tg(e,n),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,n)=>{n.value&&e(t,n.value)})}},U_=class e{constructor(e){this.writeTree_=e}static empty(){return new e(new H_(null))}};function W_(e,t,n){if(ng(t))return new U_(new H_(n));{let r=e.writeTree_.findRootMostValueAndPath(t);if(r!=null){let i=r.path,a=r.value,o=rg(i,t);return a=a.updateChild(o,n),new U_(e.writeTree_.set(i,a))}else{let r=new H_(n),i=e.writeTree_.setTree(t,r);return new U_(i)}}}function G_(e,t,n){let r=e;return th(n,(e,n)=>{r=W_(r,tg(t,e),n)}),r}function K_(e,t){if(ng(t))return U_.empty();{let n=e.writeTree_.setTree(t,new H_(null));return new U_(n)}}function q_(e,t){return J_(e,t)!=null}function J_(e,t){let n=e.writeTree_.findRootMostValueAndPath(t);return n==null?null:e.writeTree_.get(n.path).getChild(rg(n.path,t))}function Y_(e){let t=[],n=e.writeTree_.value;return n==null?e.writeTree_.children.inorderTraversal((e,n)=>{n.value!=null&&t.push(new vg(e,n.value))}):n.isLeafNode()||n.forEachChild(zg,(e,n)=>{t.push(new vg(e,n))}),t}function X_(e,t){if(ng(t))return e;{let n=J_(e,t);return n==null?new U_(e.writeTree_.subtree(t)):new U_(new H_(n))}}function Z_(e){return e.writeTree_.isEmpty()}function Q_(e,t){return $_(qh(),e.writeTree_,t)}function $_(e,t,n){if(t.value!=null)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal((t,i)=>{t===`.priority`?(X(i.value!==null,`Priority writes must always be leaf nodes`),r=i.value):n=$_(tg(e,t),i,n)}),!n.getChild(e).isEmpty()&&r!==null&&(n=n.updateChild(tg(e,`.priority`),r)),n}}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function ev(e,t){return Sv(t,e)}function tv(e,t,n,r,i){X(r>e.lastWriteId,`Stacking an older write on top of newer ones`),i===void 0&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=W_(e.visibleWrites,t,n)),e.lastWriteId=r}function nv(e,t){for(let n=0;n<e.allWrites.length;n++){let r=e.allWrites[n];if(r.writeId===t)return r}return null}function rv(e,t){let n=e.allWrites.findIndex(e=>e.writeId===t);X(n>=0,`removeWrite called with nonexistent writeId.`);let r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,a=!1,o=e.allWrites.length-1;for(;i&&o>=0;){let t=e.allWrites[o];t.visible&&(o>=n&&iv(t,r.path)?i=!1:ag(r.path,t.path)&&(a=!0)),o--}if(i){if(a)return av(e),!0;if(r.snap)e.visibleWrites=K_(e.visibleWrites,r.path);else{let t=r.children;th(t,t=>{e.visibleWrites=K_(e.visibleWrites,tg(r.path,t))})}return!0}else return!1}function iv(e,t){if(e.snap)return ag(e.path,t);for(let n in e.children)if(e.children.hasOwnProperty(n)&&ag(tg(e.path,n),t))return!0;return!1}function av(e){e.visibleWrites=sv(e.allWrites,ov,qh()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function ov(e){return e.visible}function sv(e,t,n){let r=U_.empty();for(let i=0;i<e.length;++i){let a=e[i];if(t(a)){let e=a.path,t;if(a.snap)ag(n,e)?(t=rg(n,e),r=W_(r,t,a.snap)):ag(e,n)&&(t=rg(e,n),r=W_(r,qh(),a.snap.getChild(t)));else if(a.children){if(ag(n,e))t=rg(n,e),r=G_(r,t,a.children);else if(ag(e,n))if(t=rg(e,n),ng(t))r=G_(r,qh(),a.children);else{let e=nc(a.children,Jh(t));if(e){let n=e.getChild(Xh(t));r=W_(r,qh(),n)}}}else throw hs(`WriteRecord should have .snap or .children`)}}return r}function cv(e,t,n,r,i){if(!r&&!i){let r=J_(e.visibleWrites,t);if(r!=null)return r;{let r=X_(e.visibleWrites,t);if(Z_(r))return n;if(n==null&&!q_(r,qh()))return null;{let e=n||qg.EMPTY_NODE;return Q_(r,e)}}}else{let a=X_(e.visibleWrites,t);if(!i&&Z_(a))return n;if(!i&&n==null&&!q_(a,qh()))return null;{let a=sv(e.allWrites,function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(ag(e.path,t)||ag(t,e.path))},t),o=n||qg.EMPTY_NODE;return Q_(a,o)}}}function lv(e,t,n){let r=qg.EMPTY_NODE,i=J_(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(zg,(e,t)=>{r=r.updateImmediateChild(e,t)}),r;if(n){let i=X_(e.visibleWrites,t);return n.forEachChild(zg,(e,t)=>{let n=Q_(X_(i,new Kh(e)),t);r=r.updateImmediateChild(e,n)}),Y_(i).forEach(e=>{r=r.updateImmediateChild(e.name,e.node)}),r}else{let n=X_(e.visibleWrites,t);return Y_(n).forEach(e=>{r=r.updateImmediateChild(e.name,e.node)}),r}}function uv(e,t,n,r,i){X(r||i,`Either existingEventSnap or existingServerSnap must exist`);let a=tg(t,n);if(q_(e.visibleWrites,a))return null;{let t=X_(e.visibleWrites,a);return Z_(t)?i.getChild(n):Q_(t,i.getChild(n))}}function dv(e,t,n,r){let i=tg(t,n),a=J_(e.visibleWrites,i);if(a!=null)return a;if(r.isCompleteForChild(n)){let t=X_(e.visibleWrites,i);return Q_(t,r.getNode().getImmediateChild(n))}else return null}function fv(e,t){return J_(e.visibleWrites,t)}function pv(e,t,n,r,i,a,o){let s,c=X_(e.visibleWrites,t),l=J_(c,qh());if(l!=null)s=l;else if(n!=null)s=Q_(c,n);else return[];if(s=s.withIndex(o),!s.isEmpty()&&!s.isLeafNode()){let e=[],t=o.getCompare(),n=a?s.getReverseIteratorFrom(r,o):s.getIteratorFrom(r,o),c=n.getNext();for(;c&&e.length<i;)t(c,r)!==0&&e.push(c),c=n.getNext();return e}else return[]}function mv(){return{visibleWrites:U_.empty(),allWrites:[],lastWriteId:-1}}function hv(e,t,n,r){return cv(e.writeTree,e.treePath,t,n,r)}function gv(e,t){return lv(e.writeTree,e.treePath,t)}function _v(e,t,n,r){return uv(e.writeTree,e.treePath,t,n,r)}function vv(e,t){return fv(e.writeTree,tg(e.treePath,t))}function yv(e,t,n,r,i,a){return pv(e.writeTree,e.treePath,t,n,r,i,a)}function bv(e,t,n){return dv(e.writeTree,e.treePath,t,n)}function xv(e,t){return Sv(tg(e.treePath,t),e.writeTree)}function Sv(e,t){return{treePath:e,writeTree:t}}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Cv=class{constructor(){this.changeMap=new Map}trackChildChange(e){let t=e.type,n=e.childName;X(t===`child_added`||t===`child_changed`||t===`child_removed`,`Only child changes supported for tracking`),X(n!==`.priority`,`Only non-priority child changes can be tracked.`);let r=this.changeMap.get(n);if(r){let i=r.type;if(t===`child_added`&&i===`child_removed`)this.changeMap.set(n,t_(n,e.snapshotNode,r.snapshotNode));else if(t===`child_removed`&&i===`child_added`)this.changeMap.delete(n);else if(t===`child_removed`&&i===`child_changed`)this.changeMap.set(n,e_(n,r.oldSnap));else if(t===`child_changed`&&i===`child_added`)this.changeMap.set(n,$g(n,e.snapshotNode));else if(t===`child_changed`&&i===`child_changed`)this.changeMap.set(n,t_(n,e.snapshotNode,r.oldSnap));else throw hs(`Illegal combination of changes: `+e+` occurred after `+r)}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}},wv=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}},Tv=class{constructor(e,t,n=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{let t=this.optCompleteServerCache_==null?this.viewCache_.serverCache:new k_(this.optCompleteServerCache_,!0,!1);return bv(this.writes_,e,t)}}getChildAfterChild(e,t,n){let r=this.optCompleteServerCache_==null?z_(this.viewCache_):this.optCompleteServerCache_,i=yv(this.writes_,r,t,1,n,e);return i.length===0?null:i[0]}};
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Ev(e){return{filter:e}}function Dv(e,t){X(t.eventCache.getNode().isIndexed(e.filter.getIndex()),`Event snap not indexed`),X(t.serverCache.getNode().isIndexed(e.filter.getIndex()),`Server snap not indexed`)}function Ov(e,t,n,r,i){let a=new Cv,o,s;if(n.type===x_.OVERWRITE){let c=n;c.source.fromUser?o=Mv(e,t,c.path,c.snap,r,i,a):(X(c.source.fromServer,`Unknown source.`),s=c.source.tagged||t.serverCache.isFiltered()&&!ng(c.path),o=jv(e,t,c.path,c.snap,r,i,s,a))}else if(n.type===x_.MERGE){let c=n;c.source.fromUser?o=Pv(e,t,c.path,c.children,r,i,a):(X(c.source.fromServer,`Unknown source.`),s=c.source.tagged||t.serverCache.isFiltered(),o=Iv(e,t,c.path,c.children,r,i,s,a))}else if(n.type===x_.ACK_USER_WRITE){let s=n;o=s.revert?zv(e,t,s.path,r,i,a):Lv(e,t,s.path,s.affectedTree,r,i,a)}else if(n.type===x_.LISTEN_COMPLETE)o=Rv(e,t,n.path,r,a);else throw hs(`Unknown operation type: `+n.type);let c=a.getChanges();return kv(t,o,c),{viewCache:o,changes:c}}function kv(e,t,n){let r=t.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=R_(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(Qg(R_(t)))}}function Av(e,t,n,r,i,a){let o=t.eventCache;if(vv(r,n)!=null)return t;{let s,c;if(ng(n))if(X(t.serverCache.isFullyInitialized(),`If change path is empty, we must have complete server data`),t.serverCache.isFiltered()){let n=z_(t),i=n instanceof qg?n:qg.EMPTY_NODE,o=gv(r,i);s=e.filter.updateFullNode(t.eventCache.getNode(),o,a)}else{let n=hv(r,z_(t));s=e.filter.updateFullNode(t.eventCache.getNode(),n,a)}else{let l=Jh(n);if(l===`.priority`){X(Yh(n)===1,`Can't have a priority with additional path components`);let i=o.getNode();c=t.serverCache.getNode();let a=_v(r,n,i,c);s=a==null?o.getNode():e.filter.updatePriority(i,a)}else{let u=Xh(n),d;if(o.isCompleteForChild(l)){c=t.serverCache.getNode();let e=_v(r,n,o.getNode(),c);d=e==null?o.getNode().getImmediateChild(l):o.getNode().getImmediateChild(l).updateChild(u,e)}else d=bv(r,l,t.serverCache);s=d==null?o.getNode():e.filter.updateChild(o.getNode(),l,d,u,i,a)}}return I_(t,s,o.isFullyInitialized()||ng(n),e.filter.filtersNodes())}}function jv(e,t,n,r,i,a,o,s){let c=t.serverCache,l,u=o?e.filter:e.filter.getIndexedFilter();if(ng(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){let e=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),e,null)}else{let e=Jh(n);if(!c.isCompleteForPath(n)&&Yh(n)>1)return t;let i=Xh(n),a=c.getNode().getImmediateChild(e).updateChild(i,r);l=e===`.priority`?u.updatePriority(c.getNode(),a):u.updateChild(c.getNode(),e,a,i,wv,null)}let d=L_(t,l,c.isFullyInitialized()||ng(n),u.filtersNodes()),f=new Tv(i,d,a);return Av(e,d,n,i,f,s)}function Mv(e,t,n,r,i,a,o){let s=t.eventCache,c,l,u=new Tv(i,t,a);if(ng(n))l=e.filter.updateFullNode(t.eventCache.getNode(),r,o),c=I_(t,l,!0,e.filter.filtersNodes());else{let i=Jh(n);if(i===`.priority`)l=e.filter.updatePriority(t.eventCache.getNode(),r),c=I_(t,l,s.isFullyInitialized(),s.isFiltered());else{let a=Xh(n),l=s.getNode().getImmediateChild(i),d;if(ng(a))d=r;else{let e=u.getCompleteChild(i);d=e==null?qg.EMPTY_NODE:Zh(a)===`.priority`&&e.getChild(eg(a)).isEmpty()?e:e.updateChild(a,r)}if(l.equals(d))c=t;else{let n=e.filter.updateChild(s.getNode(),i,d,a,u,o);c=I_(t,n,s.isFullyInitialized(),e.filter.filtersNodes())}}}return c}function Nv(e,t){return e.eventCache.isCompleteForChild(t)}function Pv(e,t,n,r,i,a,o){let s=t;return r.foreach((r,c)=>{let l=tg(n,r);Nv(t,Jh(l))&&(s=Mv(e,s,l,c,i,a,o))}),r.foreach((r,c)=>{let l=tg(n,r);Nv(t,Jh(l))||(s=Mv(e,s,l,c,i,a,o))}),s}function Fv(e,t,n){return n.foreach((e,n)=>{t=t.updateChild(e,n)}),t}function Iv(e,t,n,r,i,a,o,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let c=t,l=ng(n)?r:new H_(null).setTree(n,r),u=t.serverCache.getNode();return l.children.inorderTraversal((n,r)=>{if(u.hasChild(n)){let l=t.serverCache.getNode().getImmediateChild(n),u=Fv(e,l,r);c=jv(e,c,new Kh(n),u,i,a,o,s)}}),l.children.inorderTraversal((n,r)=>{let l=!t.serverCache.isCompleteForChild(n)&&r.value===null;if(!u.hasChild(n)&&!l){let l=t.serverCache.getNode().getImmediateChild(n),u=Fv(e,l,r);c=jv(e,c,new Kh(n),u,i,a,o,s)}}),c}function Lv(e,t,n,r,i,a,o){if(vv(i,n)!=null)return t;let s=t.serverCache.isFiltered(),c=t.serverCache;if(r.value!=null){if(ng(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return jv(e,t,n,c.getNode().getChild(n),i,a,s,o);if(ng(n)){let r=new H_(null);return c.getNode().forEachChild(Sg,(e,t)=>{r=r.set(new Kh(e),t)}),Iv(e,t,n,r,i,a,s,o)}else return t}else{let l=new H_(null);return r.foreach((e,t)=>{let r=tg(n,e);c.isCompleteForPath(r)&&(l=l.set(e,c.getNode().getChild(r)))}),Iv(e,t,n,l,i,a,s,o)}}function Rv(e,t,n,r,i){let a=t.serverCache,o=L_(t,a.getNode(),a.isFullyInitialized()||ng(n),a.isFiltered());return Av(e,o,n,r,wv,i)}function zv(e,t,n,r,i,a){let o;if(vv(r,n)!=null)return t;{let s=new Tv(r,t,i),c=t.eventCache.getNode(),l;if(ng(n)||Jh(n)===`.priority`){let n;if(t.serverCache.isFullyInitialized())n=hv(r,z_(t));else{let e=t.serverCache.getNode();X(e instanceof qg,`serverChildren would be complete if leaf node`),n=gv(r,e)}n=n,l=e.filter.updateFullNode(c,n,a)}else{let i=Jh(n),u=bv(r,i,t.serverCache);u==null&&t.serverCache.isCompleteForChild(i)&&(u=c.getImmediateChild(i)),l=u==null?t.eventCache.getNode().hasChild(i)?e.filter.updateChild(c,i,qg.EMPTY_NODE,Xh(n),s,a):c:e.filter.updateChild(c,i,u,Xh(n),s,a),l.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=hv(r,z_(t)),o.isLeafNode()&&(l=e.filter.updateFullNode(l,o,a)))}return o=t.serverCache.isFullyInitialized()||vv(r,qh())!=null,I_(t,l,o,e.filter.filtersNodes())}}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Bv=class{constructor(e,t){this.query_=e,this.eventRegistrations_=[];let n=this.query_._queryParams,r=new r_(n.getIndex()),i=s_(n);this.processor_=Ev(i);let a=t.serverCache,o=t.eventCache,s=r.updateFullNode(qg.EMPTY_NODE,a.getNode(),null),c=i.updateFullNode(qg.EMPTY_NODE,o.getNode(),null),l=new k_(s,a.isFullyInitialized(),r.filtersNodes()),u=new k_(c,o.isFullyInitialized(),i.filtersNodes());this.viewCache_=F_(u,l),this.eventGenerator_=new A_(this.query_)}get query(){return this.query_}};function Vv(e){return e.viewCache_.serverCache.getNode()}function Hv(e){return R_(e.viewCache_)}function Uv(e,t){let n=z_(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!ng(t)&&!n.getImmediateChild(Jh(t)).isEmpty())?n.getChild(t):null}function Wv(e){return e.eventRegistrations_.length===0}function Gv(e,t){e.eventRegistrations_.push(t)}function Kv(e,t,n){let r=[];if(n){X(t==null,`A cancel should cancel all event registrations.`);let i=e.query._path;e.eventRegistrations_.forEach(e=>{let t=e.createCancelEvent(n,i);t&&r.push(t)})}if(t){let n=[];for(let r=0;r<e.eventRegistrations_.length;++r){let i=e.eventRegistrations_[r];if(!i.matches(t))n.push(i);else if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(r+1));break}}e.eventRegistrations_=n}else e.eventRegistrations_=[];return r}function qv(e,t,n,r){t.type===x_.MERGE&&t.source.queryId!==null&&(X(z_(e.viewCache_),`We should always have a full cache before handling merges`),X(R_(e.viewCache_),`Missing event cache, even though we have a server cache`));let i=e.viewCache_,a=Ov(e.processor_,i,t,n,r);return Dv(e.processor_,a.viewCache),X(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),`Once a server snap is complete, it should never go back`),e.viewCache_=a.viewCache,Yv(e,a.changes,a.viewCache.eventCache.getNode(),null)}function Jv(e,t){let n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(zg,(e,t)=>{r.push($g(e,t))}),n.isFullyInitialized()&&r.push(Qg(n.getNode())),Yv(e,r,n.getNode(),t)}function Yv(e,t,n,r){let i=r?[r]:e.eventRegistrations_;return j_(e.eventGenerator_,t,n,i)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Xv,Zv=class{constructor(){this.views=new Map}};function Qv(e){X(!Xv,`__referenceConstructor has already been defined`),Xv=e}function $v(){return X(Xv,`Reference.ts has not been loaded`),Xv}function ey(e){return e.views.size===0}function ty(e,t,n,r){let i=t.source.queryId;if(i!==null){let a=e.views.get(i);return X(a!=null,`SyncTree gave us an op for an invalid query.`),qv(a,t,n,r)}else{let i=[];for(let a of e.views.values())i=i.concat(qv(a,t,n,r));return i}}function ny(e,t,n,r,i){let a=t._queryIdentifier,o=e.views.get(a);if(!o){let e=hv(n,i?r:null),a=!1;e?a=!0:r instanceof qg?(e=gv(n,r),a=!1):(e=qg.EMPTY_NODE,a=!1);let o=F_(new k_(e,a,!1),new k_(r,i,!1));return new Bv(t,o)}return o}function ry(e,t,n,r,i,a){let o=ny(e,t,r,i,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),Gv(o,n),Jv(o,n)}function iy(e,t,n,r){let i=t._queryIdentifier,a=[],o=[],s=ly(e);if(i===`default`)for(let[t,i]of e.views.entries())o=o.concat(Kv(i,n,r)),Wv(i)&&(e.views.delete(t),i.query._queryParams.loadsAllData()||a.push(i.query));else{let t=e.views.get(i);t&&(o=o.concat(Kv(t,n,r)),Wv(t)&&(e.views.delete(i),t.query._queryParams.loadsAllData()||a.push(t.query)))}return s&&!ly(e)&&a.push(new($v())(t._repo,t._path)),{removed:a,events:o}}function ay(e){let t=[];for(let n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function oy(e,t){let n=null;for(let r of e.views.values())n||=Uv(r,t);return n}function sy(e,t){if(t._queryParams.loadsAllData())return uy(e);{let n=t._queryIdentifier;return e.views.get(n)}}function cy(e,t){return sy(e,t)!=null}function ly(e){return uy(e)!=null}function uy(e){for(let t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var dy;function fy(e){X(!dy,`__referenceConstructor has already been defined`),dy=e}function py(){return X(dy,`Reference.ts has not been loaded`),dy}var my=1,hy=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new H_(null),this.pendingWriteTree_=mv(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function gy(e,t,n,r,i){return tv(e.pendingWriteTree_,t,n,r,i),i?Oy(e,new D_(S_(),t,n)):[]}function _y(e,t,n=!1){let r=nv(e.pendingWriteTree_,t);if(rv(e.pendingWriteTree_,t)){let t=new H_(null);return r.snap==null?th(r.children,e=>{t=t.set(new Kh(e),!0)}):t=t.set(qh(),!0),Oy(e,new T_(r.path,t,n))}else return[]}function vy(e,t,n){return Oy(e,new D_(C_(),t,n))}function yy(e,t,n){let r=H_.fromObject(n);return Oy(e,new O_(C_(),t,r))}function by(e,t){return Oy(e,new E_(C_(),t))}function xy(e,t,n){let r=Py(e,n);if(r){let n=Fy(r),i=n.path,a=n.queryId,o=rg(i,t),s=new E_(w_(a),o);return Iy(e,i,s)}else return[]}function Sy(e,t,n,r,i=!1){let a=t._path,o=e.syncPointTree_.get(a),s=[];if(o&&(t._queryIdentifier===`default`||cy(o,t))){let c=iy(o,t,n,r);ey(o)&&(e.syncPointTree_=e.syncPointTree_.remove(a));let l=c.removed;if(s=c.events,!i){let n=l.findIndex(e=>e._queryParams.loadsAllData())!==-1,i=e.syncPointTree_.findOnPath(a,(e,t)=>ly(t));if(n&&!i){let t=e.syncPointTree_.subtree(a);if(!t.isEmpty()){let n=Ly(t);for(let t=0;t<n.length;++t){let r=n[t],i=r.query,a=jy(e,r);e.listenProvider_.startListening(Ry(i),My(e,i),a.hashFn,a.onComplete)}}}!i&&l.length>0&&!r&&(n?e.listenProvider_.stopListening(Ry(t),null):l.forEach(t=>{let n=e.queryToTagMap.get(Ny(t));e.listenProvider_.stopListening(Ry(t),n)}))}zy(e,l)}return s}function Cy(e,t,n,r){let i=Py(e,r);if(i!=null){let r=Fy(i),a=r.path,o=r.queryId,s=rg(a,t),c=new D_(w_(o),s,n);return Iy(e,a,c)}else return[]}function wy(e,t,n,r){let i=Py(e,r);if(i){let r=Fy(i),a=r.path,o=r.queryId,s=rg(a,t),c=H_.fromObject(n),l=new O_(w_(o),s,c);return Iy(e,a,l)}else return[]}function Ty(e,t,n,r=!1){let i=t._path,a=null,o=!1;e.syncPointTree_.foreachOnPath(i,(e,t)=>{let n=rg(e,i);a||=oy(t,n),o||=ly(t)});let s=e.syncPointTree_.get(i);s?(o||=ly(s),a||=oy(s,qh())):(s=new Zv,e.syncPointTree_=e.syncPointTree_.set(i,s));let c;a==null?(c=!1,a=qg.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((e,t)=>{let n=oy(t,qh());n&&(a=a.updateImmediateChild(e,n))})):c=!0;let l=cy(s,t);if(!l&&!t._queryParams.loadsAllData()){let n=Ny(t);X(!e.queryToTagMap.has(n),`View does not exist, but we have a tag`);let r=By();e.queryToTagMap.set(n,r),e.tagToQueryMap.set(r,n)}let u=ev(e.pendingWriteTree_,i),d=ry(s,t,n,u,a,c);if(!l&&!o&&!r){let n=sy(s,t);d=d.concat(Vy(e,t,n))}return d}function Ey(e,t,n){let r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(e,n)=>{let r=rg(e,t),i=oy(n,r);if(i)return i});return cv(r,t,i,n,!0)}function Dy(e,t){let n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(e,t)=>{let i=rg(e,n);r||=oy(t,i)});let i=e.syncPointTree_.get(n);i?r||=oy(i,qh()):(i=new Zv,e.syncPointTree_=e.syncPointTree_.set(n,i));let a=r!=null,o=a?new k_(r,!0,!1):null,s=ev(e.pendingWriteTree_,t._path),c=ny(i,t,s,a?o.getNode():qg.EMPTY_NODE,a);return Hv(c)}function Oy(e,t){return ky(t,e.syncPointTree_,null,ev(e.pendingWriteTree_,qh()))}function ky(e,t,n,r){if(ng(e.path))return Ay(e,t,n,r);{let i=t.get(qh());n==null&&i!=null&&(n=oy(i,qh()));let a=[],o=Jh(e.path),s=e.operationForChild(o),c=t.children.get(o);if(c&&s){let e=n?n.getImmediateChild(o):null,t=xv(r,o);a=a.concat(ky(s,c,e,t))}return i&&(a=a.concat(ty(i,e,r,n))),a}}function Ay(e,t,n,r){let i=t.get(qh());n==null&&i!=null&&(n=oy(i,qh()));let a=[];return t.children.inorderTraversal((t,i)=>{let o=n?n.getImmediateChild(t):null,s=xv(r,t),c=e.operationForChild(t);c&&(a=a.concat(Ay(c,i,o,s)))}),i&&(a=a.concat(ty(i,e,r,n))),a}function jy(e,t){let n=t.query,r=My(e,n);return{hashFn:()=>(Vv(t)||qg.EMPTY_NODE).hash(),onComplete:t=>{if(t===`ok`)return r?xy(e,n._path,r):by(e,n._path);{let r=ah(t,n);return Sy(e,n,null,r)}}}}function My(e,t){let n=Ny(t);return e.queryToTagMap.get(n)}function Ny(e){return e._path.toString()+`$`+e._queryIdentifier}function Py(e,t){return e.tagToQueryMap.get(t)}function Fy(e){let t=e.indexOf(`$`);return X(t!==-1&&t<e.length-1,`Bad queryKey.`),{queryId:e.substr(t+1),path:new Kh(e.substr(0,t))}}function Iy(e,t,n){let r=e.syncPointTree_.get(t);X(r,`Missing sync point for query tag that we're tracking`);let i=ev(e.pendingWriteTree_,t);return ty(r,n,i,null)}function Ly(e){return e.fold((e,t,n)=>{if(t&&ly(t))return[uy(t)];{let e=[];return t&&(e=ay(t)),th(n,(t,n)=>{e=e.concat(n)}),e}})}function Ry(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(py())(e._repo,e._path):e}function zy(e,t){for(let n=0;n<t.length;++n){let r=t[n];if(!r._queryParams.loadsAllData()){let t=Ny(r),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}function By(){return my++}function Vy(e,t,n){let r=t._path,i=My(e,t),a=jy(e,n),o=e.listenProvider_.startListening(Ry(t),i,a.hashFn,a.onComplete),s=e.syncPointTree_.subtree(r);if(i)X(!ly(s.value),`If we're adding a query, it shouldn't be shadowed`);else{let t=s.fold((e,t,n)=>{if(!ng(e)&&t&&ly(t))return[uy(t).query];{let e=[];return t&&(e=e.concat(ay(t).map(e=>e.query))),th(n,(t,n)=>{e=e.concat(n)}),e}});for(let n=0;n<t.length;++n){let r=t[n];e.listenProvider_.stopListening(Ry(r),My(e,r))}}return o}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Hy=class e{constructor(e){this.node_=e}getImmediateChild(t){let n=this.node_.getImmediateChild(t);return new e(n)}node(){return this.node_}},Uy=class e{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(t){let n=tg(this.path_,t);return new e(this.syncTree_,n)}node(){return Ey(this.syncTree_,this.path_)}},Wy=function(e){return e||={},e.timestamp=e.timestamp||new Date().getTime(),e},Gy=function(e,t,n){if(!e||typeof e!=`object`)return e;if(X(`.sv`in e,`Unexpected leaf node or priority contents`),typeof e[`.sv`]==`string`)return Ky(e[`.sv`],t,n);if(typeof e[`.sv`]==`object`)return qy(e[`.sv`],t);X(!1,`Unexpected server value: `+JSON.stringify(e,null,2))},Ky=function(e,t,n){switch(e){case`timestamp`:return n.timestamp;default:X(!1,`Unexpected server value: `+e)}},qy=function(e,t,n){e.hasOwnProperty(`increment`)||X(!1,`Unexpected server value: `+JSON.stringify(e,null,2));let r=e.increment;typeof r!=`number`&&X(!1,`Unexpected increment value: `+r);let i=t.node();if(X(i!=null,`Expected ChildrenNode.EMPTY_NODE for nulls`),!i.isLeafNode())return r;let a=i.getValue();return typeof a==`number`?a+r:r},Jy=function(e,t,n,r){return Xy(t,new Uy(n,e),r)},Yy=function(e,t,n){return Xy(e,new Hy(t),n)};function Xy(e,t,n){let r=e.getPriority().val(),i=Gy(r,t.getImmediateChild(`.priority`),n),a;if(e.isLeafNode()){let r=e,a=Gy(r.getValue(),t,n);return a!==r.getValue()||i!==r.getPriority().val()?new Pg(a,Yg(i)):e}else{let r=e;return a=r,i!==r.getPriority().val()&&(a=a.updatePriority(new Pg(i))),r.forEachChild(zg,(e,r)=>{let i=Xy(r,t.getImmediateChild(e),n);i!==r&&(a=a.updateImmediateChild(e,i))}),a}}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Zy=class{constructor(e=``,t=null,n={children:{},childCount:0}){this.name=e,this.parent=t,this.node=n}};function Qy(e,t){let n=t instanceof Kh?t:new Kh(t),r=e,i=Jh(n);for(;i!==null;){let e=nc(r.node.children,i)||{children:{},childCount:0};r=new Zy(i,r,e),n=Xh(n),i=Jh(n)}return r}function $y(e){return e.node.value}function eb(e,t){e.node.value=t,sb(e)}function tb(e){return e.node.childCount>0}function nb(e){return $y(e)===void 0&&!tb(e)}function rb(e,t){th(e.node.children,(n,r)=>{t(new Zy(n,e,r))})}function ib(e,t,n,r){n&&!r&&t(e),rb(e,e=>{ib(e,t,!0,r)}),n&&r&&t(e)}function ab(e,t,n){let r=n?e:e.parent;for(;r!==null;){if(t(r))return!0;r=r.parent}return!1}function ob(e){return new Kh(e.parent===null?e.name:ob(e.parent)+`/`+e.name)}function sb(e){e.parent!==null&&cb(e.parent,e.name,e)}function cb(e,t,n){let r=nb(n),i=tc(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,sb(e)):!r&&!i&&(e.node.children[t]=n.node,e.node.childCount++,sb(e))}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var lb=/[\[\].#$\/\u0000-\u001F\u007F]/,ub=/[\[\].#$\u0000-\u001F\u007F]/,db=function(e){return typeof e==`string`&&e.length!==0&&!lb.test(e)},fb=function(e){return typeof e==`string`&&e.length!==0&&!ub.test(e)},pb=function(e){return e&&=e.replace(/^\/*\.info(\/|$)/,`/`),fb(e)},mb=function(e,t,n,r){r&&t===void 0||hb(hc(e,`value`),t,n)},hb=function(e,t,n){let r=n instanceof Kh?new og(n,e):n;if(t===void 0)throw Error(e+`contains undefined `+ug(r));if(typeof t==`function`)throw Error(e+`contains a function `+ug(r)+` with contents = `+t.toString());if(Km(t))throw Error(e+`contains `+t.toString()+` `+ug(r));if(typeof t==`string`&&t.length>10485760/3&&_c(t)>10485760)throw Error(e+`contains a string greater than 10485760 utf8 bytes `+ug(r)+` ('`+t.substring(0,50)+`...')`);if(t&&typeof t==`object`){let n=!1,i=!1;if(th(t,(t,a)=>{if(t===`.value`)n=!0;else if(t!==`.priority`&&t!==`.sv`&&(i=!0,!db(t)))throw Error(e+` contains an invalid key (`+t+`) `+ug(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);sg(r,t),hb(e,a,r),cg(r)}),n&&i)throw Error(e+` contains ".value" child `+ug(r)+` in addition to actual children.`)}},gb=function(e,t,n,r){if(!(r&&n===void 0)&&!fb(n))throw Error(hc(e,t)+`was an invalid path = "`+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},_b=function(e,t,n,r){n&&=n.replace(/^\/*\.info(\/|$)/,`/`),gb(e,t,n,r)},vb=function(e,t){if(Jh(t)===`.info`)throw Error(e+` failed = Can't modify data under /.info/`)},yb=function(e,t){let n=t.path.toString();if(typeof t.repoInfo.host!=`string`||t.repoInfo.host.length===0||!db(t.repoInfo.namespace)&&t.repoInfo.host.split(`:`)[0]!==`localhost`||n.length!==0&&!pb(n))throw Error(hc(e,`url`)+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)},bb=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function xb(e,t){let n=null;for(let r=0;r<t.length;r++){let i=t[r],a=i.getPath();n!==null&&!ig(a,n.path)&&(e.eventLists_.push(n),n=null),n===null&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function Sb(e,t,n){xb(e,n),Cb(e,e=>ag(e,t)||ag(t,e))}function Cb(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){let i=e.eventLists_[r];if(i){let a=i.path;t(a)?(wb(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function wb(e){for(let t=0;t<e.events.length;t++){let n=e.events[t];if(n!==null){e.events[t]=null;let r=n.getEventRunner();Lm&&Bm(`event: `+n.toString()),ch(r)}}}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Tb=`repo_interrupt`,Eb=class{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new bb,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=f_(),this.transactionQueueTree_=new Zy,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?`https://`:`http://`)+this.repoInfo_.host}};function Db(e,t,n){if(e.stats_=Ch(e.repoInfo_),e.forceRestClient_||lh())e.server_=new u_(e.repoInfo_,(t,n,r,i)=>{Ab(e,t,n,r,i)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>jb(e,!0),0);else{if(n!=null){if(typeof n!=`object`)throw Error(`Only objects are supported for option databaseAuthVariableOverride`);try{Zs(n)}catch(e){throw Error(`Invalid authOverride provided: `+e)}}e.persistentConnection_=new _g(e.repoInfo_,t,(t,n,r,i)=>{Ab(e,t,n,r,i)},t=>{jb(e,t)},t=>{Mb(e,t)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(t=>{e.server_.refreshAuthToken(t)}),e.appCheckProvider_.addTokenChangeListener(t=>{e.server_.refreshAppCheckToken(t.token)}),e.statsReporter_=wh(e.repoInfo_,()=>new b_(e.stats_,e.server_)),e.infoData_=new d_,e.infoSyncTree_=new hy({startListening:(t,n,r,i)=>{let a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=vy(e.infoSyncTree_,t._path,o),setTimeout(()=>{i(`ok`)},0)),a},stopListening:()=>{}}),Nb(e,`connected`,!1),e.serverSyncTree_=new hy({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,(n,r)=>{let a=i(n,r);Sb(e.eventQueue_,t._path,a)}),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function Ob(e){let t=e.infoData_.getNode(new Kh(`.info/serverTimeOffset`)).val()||0;return new Date().getTime()+t}function kb(e){return Wy({timestamp:Ob(e)})}function Ab(e,t,n,r,i){e.dataUpdateCount++;let a=new Kh(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(i)if(r){let t=ic(n,e=>Yg(e));o=wy(e.serverSyncTree_,a,t,i)}else{let t=Yg(n);o=Cy(e.serverSyncTree_,a,t,i)}else if(r){let t=ic(n,e=>Yg(e));o=yy(e.serverSyncTree_,a,t)}else{let t=Yg(n);o=vy(e.serverSyncTree_,a,t)}let s=a;o.length>0&&(s=Wb(e,a)),Sb(e.eventQueue_,s,o)}function jb(e,t){Nb(e,`connected`,t),t===!1&&Lb(e)}function Mb(e,t){th(t,(t,n)=>{Nb(e,t,n)})}function Nb(e,t,n){let r=new Kh(`/.info/`+t),i=Yg(n);e.infoData_.updateSnapshot(r,i);let a=vy(e.infoSyncTree_,r,i);Sb(e.eventQueue_,r,a)}function Pb(e){return e.nextWriteId_++}function Fb(e,t,n){let r=Dy(e.serverSyncTree_,t);return r==null?e.server_.get(t).then(r=>{let i=Yg(r).withIndex(t._queryParams.getIndex());Ty(e.serverSyncTree_,t,n,!0);let a;if(t._queryParams.loadsAllData())a=vy(e.serverSyncTree_,t._path,i);else{let n=My(e.serverSyncTree_,t);a=Cy(e.serverSyncTree_,t._path,i,n)}return Sb(e.eventQueue_,t._path,a),Sy(e.serverSyncTree_,t,n,null,!0),i},n=>(zb(e,`get for query `+Zs(t)+` failed: `+n),Promise.reject(Error(n)))):Promise.resolve(r)}function Ib(e,t,n,r,i){zb(e,`set`,{path:t.toString(),value:n,priority:r});let a=kb(e),o=Yg(n,r),s=Ey(e.serverSyncTree_,t),c=Yy(o,s,a),l=Pb(e),u=gy(e.serverSyncTree_,t,c,l,!0);xb(e.eventQueue_,u),e.server_.put(t.toString(),o.val(!0),(n,r)=>{let a=n===`ok`;a||Wm(`set at `+t+` failed: `+n);let o=_y(e.serverSyncTree_,l,!a);Sb(e.eventQueue_,t,o),Bb(e,i,n,r)});let d=Xb(e,t);Wb(e,d),Sb(e.eventQueue_,d,[])}function Lb(e){zb(e,`onDisconnectEvents`);let t=kb(e),n=f_();m_(e.onDisconnect_,qh(),(r,i)=>{let a=Jy(r,i,e.serverSyncTree_,t);p_(n,r,a)});let r=[];m_(n,qh(),(t,n)=>{r=r.concat(vy(e.serverSyncTree_,t,n));let i=Xb(e,t);Wb(e,i)}),e.onDisconnect_=f_(),Sb(e.eventQueue_,qh(),r)}function Rb(e){e.persistentConnection_&&e.persistentConnection_.interrupt(Tb)}function zb(e,...t){let n=``;e.persistentConnection_&&(n=e.persistentConnection_.id+`:`),Bm(n,...t)}function Bb(e,t,n,r){t&&ch(()=>{if(n===`ok`)t(null);else{let e=(n||`error`).toUpperCase(),i=e;r&&(i+=`: `+r);let a=Error(i);a.code=e,t(a)}})}function Vb(e,t,n){return Ey(e.serverSyncTree_,t,n)||qg.EMPTY_NODE}function Hb(e,t=e.transactionQueueTree_){if(t||Yb(e,t),$y(t)){let n=qb(e,t);X(n.length>0,`Sending zero length transaction queue`),n.every(e=>e.status===0)&&Ub(e,ob(t),n)}else tb(t)&&rb(t,t=>{Hb(e,t)})}function Ub(e,t,n){let r=n.map(e=>e.currentWriteId),i=Vb(e,t,r),a=i,o=i.hash();for(let e=0;e<n.length;e++){let r=n[e];X(r.status===0,`tryToSendTransactionQueue_: items in queue should all be run.`),r.status=1,r.retryCount++;let i=rg(t,r.path);a=a.updateChild(i,r.currentOutputSnapshotRaw)}let s=a.val(!0),c=t;e.server_.put(c.toString(),s,r=>{zb(e,`transaction put response`,{path:c.toString(),status:r});let i=[];if(r===`ok`){let r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(_y(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push(()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)),n[t].unwatcher();Yb(e,Qy(e.transactionQueueTree_,t)),Hb(e,e.transactionQueueTree_),Sb(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)ch(r[e])}else{if(r===`datastale`)for(let e=0;e<n.length;e++)n[e].status===3?n[e].status=4:n[e].status=0;else{Wm(`transaction at `+c.toString()+` failed: `+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}Wb(e,t)}},o)}function Wb(e,t){let n=Kb(e,t),r=ob(n),i=qb(e,n);return Gb(e,i,r),r}function Gb(e,t,n){if(t.length===0)return;let r=[],i=[],a=t.filter(e=>e.status===0).map(e=>e.currentWriteId);for(let o=0;o<t.length;o++){let s=t[o],c=rg(n,s.path),l=!1,u;if(X(c!==null,`rerunTransactionsUnderNode_: relativePath should not be null.`),s.status===4)l=!0,u=s.abortReason,i=i.concat(_y(e.serverSyncTree_,s.currentWriteId,!0));else if(s.status===0)if(s.retryCount>=25)l=!0,u=`maxretry`,i=i.concat(_y(e.serverSyncTree_,s.currentWriteId,!0));else{let n=Vb(e,s.path,a);s.currentInputSnapshot=n;let r=t[o].update(n.val());if(r!==void 0){hb(`transaction failed: Data returned `,r,s.path);let t=Yg(r);typeof r==`object`&&r&&tc(r,`.priority`)||(t=t.updatePriority(n.getPriority()));let o=s.currentWriteId,c=kb(e),l=Yy(t,n,c);s.currentOutputSnapshotRaw=t,s.currentOutputSnapshotResolved=l,s.currentWriteId=Pb(e),a.splice(a.indexOf(o),1),i=i.concat(gy(e.serverSyncTree_,s.path,l,s.currentWriteId,s.applyLocally)),i=i.concat(_y(e.serverSyncTree_,o,!0))}else l=!0,u=`nodata`,i=i.concat(_y(e.serverSyncTree_,s.currentWriteId,!0))}Sb(e.eventQueue_,n,i),i=[],l&&(t[o].status=2,(function(e){setTimeout(e,0)})(t[o].unwatcher),t[o].onComplete&&(u===`nodata`?r.push(()=>t[o].onComplete(null,!1,t[o].currentInputSnapshot)):r.push(()=>t[o].onComplete(Error(u),!1,null))))}Yb(e,e.transactionQueueTree_);for(let e=0;e<r.length;e++)ch(r[e]);Hb(e,e.transactionQueueTree_)}function Kb(e,t){let n,r=e.transactionQueueTree_;for(n=Jh(t);n!==null&&$y(r)===void 0;)r=Qy(r,n),t=Xh(t),n=Jh(t);return r}function qb(e,t){let n=[];return Jb(e,t,n),n.sort((e,t)=>e.order-t.order),n}function Jb(e,t,n){let r=$y(t);if(r)for(let e=0;e<r.length;e++)n.push(r[e]);rb(t,t=>{Jb(e,t,n)})}function Yb(e,t){let n=$y(t);if(n){let e=0;for(let t=0;t<n.length;t++)n[t].status!==2&&(n[e]=n[t],e++);n.length=e,eb(t,n.length>0?n:void 0)}rb(t,t=>{Yb(e,t)})}function Xb(e,t){let n=ob(Kb(e,t)),r=Qy(e.transactionQueueTree_,t);return ab(r,t=>{Zb(e,t)}),Zb(e,r),ib(r,t=>{Zb(e,t)}),n}function Zb(e,t){let n=$y(t);if(n){let r=[],i=[],a=-1;for(let t=0;t<n.length;t++)n[t].status===3||(n[t].status===1?(X(a===t-1,`All SENT items should be at beginning of queue.`),a=t,n[t].status=3,n[t].abortReason=`set`):(X(n[t].status===0,`Unexpected transaction status in abort`),n[t].unwatcher(),i=i.concat(_y(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,Error(`set`),!1,null))));a===-1?eb(t,void 0):n.length=a+1,Sb(e.eventQueue_,ob(t),i);for(let e=0;e<r.length;e++)ch(r[e])}}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Qb(e){let t=``,n=e.split(`/`);for(let e=0;e<n.length;e++)if(n[e].length>0){let r=n[e];try{r=decodeURIComponent(r.replace(/\+/g,` `))}catch{}t+=`/`+r}return t}function $b(e){let t={};e.charAt(0)===`?`&&(e=e.substring(1));for(let n of e.split(`&`)){if(n.length===0)continue;let r=n.split(`=`);r.length===2?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Wm(`Invalid query segment '${n}' in query '${e}'`)}return t}var ex=function(e,t){let n=tx(e),r=n.namespace;n.domain===`firebase.com`&&Um(n.host+` is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead`),(!r||r===`undefined`)&&n.domain!==`localhost`&&Um(`Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com`),n.secure||Gm();let i=n.scheme===`ws`||n.scheme===`wss`;return{repoInfo:new _h(n.host,n.secure,r,i,t,``,r!==n.subdomain),path:new Kh(n.pathString)}},tx=function(e){let t=``,n=``,r=``,i=``,a=``,o=!0,s=`https`,c=443;if(typeof e==`string`){let l=e.indexOf(`//`);l>=0&&(s=e.substring(0,l-1),e=e.substring(l+2));let u=e.indexOf(`/`);u===-1&&(u=e.length);let d=e.indexOf(`?`);d===-1&&(d=e.length),t=e.substring(0,Math.min(u,d)),u<d&&(i=Qb(e.substring(u,d)));let f=$b(e.substring(Math.min(e.length,d)));l=t.indexOf(`:`),l>=0?(o=s===`https`||s===`wss`,c=parseInt(t.substring(l+1),10)):l=t.length;let p=t.slice(0,l);if(p.toLowerCase()===`localhost`)n=`localhost`;else if(p.split(`.`).length<=2)n=p;else{let e=t.indexOf(`.`);r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),a=r}`ns`in f&&(a=f.ns)}return{host:t,port:c,domain:n,subdomain:r,secure:o,scheme:s,pathString:i,namespace:a}},nx=`-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz`;(function(){let e=0,t=[];return function(n){let r=n===e;e=n;let i,a=Array(8);for(i=7;i>=0;i--)a[i]=nx.charAt(n%64),n=Math.floor(n/64);X(n===0,`Cannot push at time == 0`);let o=a.join(``);if(r){for(i=11;i>=0&&t[i]===63;i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=nx.charAt(t[i]);return X(o.length===20,`nextPushId: Length should be 20.`),o}})();
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var rx=class{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){let e=this.snapshot.ref;return this.eventType===`value`?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+`:`+this.eventType+`:`+Zs(this.snapshot.exportVal())}},ix=class{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return`cancel`}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+`:cancel`}},ax=class{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return X(this.hasCancelCallback,`Raising a cancel event on a listener with no cancel callback`),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}},ox=class e{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return ng(this._path)?null:Zh(this._path)}get ref(){return new sx(this._repo,this._path)}get _queryIdentifier(){let e=l_(this._queryParams),t=$m(e);return t===`{}`?`default`:t}get _queryObject(){return l_(this._queryParams)}isEqual(t){if(t=vc(t),!(t instanceof e))return!1;let n=this._repo===t._repo,r=ig(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+Qh(this._path)}},sx=class e extends ox{constructor(e,t){super(e,t,new o_,!1)}get parent(){let t=eg(this._path);return t===null?null:new e(this._repo,t)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},cx=class e{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){let n=new Kh(t),r=ux(this.ref,t);return new e(this._node.getChild(n),r,zg)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(n,r)=>t(new e(r,ux(this.ref,n),zg)))}hasChild(e){let t=new Kh(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function lx(e,t){return e=vc(e),e._checkNotDeleted(`ref`),t===void 0?e._root:ux(e._root,t)}function ux(e,t){return e=vc(e),Jh(e._path)===null?_b(`child`,`path`,t,!1):gb(`child`,`path`,t,!1),new sx(e._repo,tg(e._path,t))}function dx(e,t){e=vc(e),vb(`set`,e._path),mb(`set`,t,e._path,!1);let n=new Fs;return Ib(e._repo,e._path,t,null,n.wrapCallback(()=>{})),n.promise}function fx(e){e=vc(e);let t=new ax(()=>{}),n=new px(t);return Fb(e._repo,e,n).then(t=>new cx(t,new sx(e._repo,e._path),e._queryParams.getIndex()))}var px=class e{constructor(e){this.callbackContext=e}respondsTo(e){return e===`value`}createEvent(e,t){let n=t._queryParams.getIndex();return new rx(`value`,this,new cx(e.snapshotNode,new sx(t._repo,t._path),n))}getEventRunner(e){return e.getEventType()===`cancel`?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new ix(this,e,t):null}matches(t){return t instanceof e?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}};Qv(sx),fy(sx);
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var mx=`FIREBASE_DATABASE_EMULATOR_HOST`,hx={},gx=!1;function _x(e,t,n,r){e.repoInfo_=new _h(`${t}:${n}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}function vx(e,t,n,r,i){let a=r||e.options.databaseURL;a===void 0&&(e.options.projectId||Um(`Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp().`),Bm(`Using default host for project `,e.options.projectId),a=`${e.options.projectId}-default-rtdb.firebaseio.com`);let o=ex(a,i),s=o.repoInfo,c,l;typeof process<`u`&&(l={}[mx]),l?(c=!0,a=`http://${l}?ns=${s.namespace}`,o=ex(a,i),s=o.repoInfo):c=!o.repoInfo.secure;let u=i&&c?new ph(ph.OWNER):new fh(e.name,e.options,t);yb(`Invalid Firebase Database URL`,o),ng(o.path)||Um(`Database URL must point to the root of a Firebase Database (not including a child path).`);let d=bx(s,e,u,new dh(e.name,n));return new xx(d,e)}function yx(e,t){let n=hx[t];(!n||n[e.key]!==e)&&Um(`Database ${t}(${e.repoInfo_}) has already been deleted.`),Rb(e),delete n[e.key]}function bx(e,t,n,r){let i=hx[t.name];i||(i={},hx[t.name]=i);let a=i[e.toURLString()];return a&&Um(`Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.`),a=new Eb(e,gx,n,r),i[e.toURLString()]=a,a}var xx=class{constructor(e,t){this._repoInternal=e,this.app=t,this.type=`database`,this._instanceStarted=!1}get _repo(){return this._instanceStarted||=(Db(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),!0),this._repoInternal}get _root(){return this._rootInternal||=new sx(this._repo,qh()),this._rootInternal}_delete(){return this._rootInternal!==null&&(yx(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Um(`Cannot call `+e+` on a deleted database.`)}};function Sx(e=Hl(),t){let n=Ll(e,`database`).getImmediate({identifier:t});if(!n._instanceStarted){let e=Ms(`database`);e&&Cx(n,...e)}return n}function Cx(e,t,n,r={}){e=vc(e),e._checkNotDeleted(`useEmulator`),e._instanceStarted&&Um(`Cannot call useEmulator() after instance has already been initialized.`);let i=e._repoInternal,a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Um(`mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".`),a=new ph(ph.OWNER);else if(r.mockUserToken){let t=typeof r.mockUserToken==`string`?r.mockUserToken:Is(r.mockUserToken,e.app.options.projectId);a=new ph(t)}_x(i,t,n,a)}
/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function wx(e){Dm(Bl),Il(new yc(`database`,(e,{instanceIdentifier:t})=>{let n=e.getProvider(`app`).getImmediate(),r=e.getProvider(`auth-internal`),i=e.getProvider(`app-check-internal`);return vx(n,r,i,t)},`PUBLIC`).setMultipleInstances(!0)),Ul(wm,Tm,e),Ul(wm,Tm,`esm2017`)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
_g.prototype.simpleListen=function(e,t){this.sendRequest(`q`,{p:e},t)},_g.prototype.echo=function(e,t){this.sendRequest(`echo`,{d:e},t)},wx(),Ul(`firebase`,`9.23.0`,`app`);var Tx=n(((exports,t)=>{
/*
* [js-sha512]{@link https://github.com/emn178/js-sha512}
*
* @version 0.8.0
* @author Chen, Yi-Cyuan [emn178@gmail.com]
* @copyright Chen, Yi-Cyuan 2014-2018
* @license MIT
*/
(function(){var e=`input is invalid type`,n=`finalize already called`,r=typeof window==`object`,i=r?window:{};i.JS_SHA512_NO_WINDOW&&(r=!1);var a=!r&&typeof self==`object`;!i.JS_SHA512_NO_NODE_JS&&typeof process==`object`&&process.versions&&process.versions.node?i=global:a&&(i=self);var o=!i.JS_SHA512_NO_COMMON_JS&&typeof t==`object`&&t.exports,s=typeof define==`function`&&define.amd,c=!i.JS_SHA512_NO_ARRAY_BUFFER&&typeof ArrayBuffer<`u`,l=`0123456789abcdef`.split(``),u=[-2147483648,8388608,32768,128],d=[24,16,8,0],f=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],p=[`hex`,`array`,`digest`,`arrayBuffer`],m=[];(i.JS_SHA512_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(e){return Object.prototype.toString.call(e)===`[object Array]`}),c&&(i.JS_SHA512_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(e){return typeof e==`object`&&e.buffer&&e.buffer.constructor===ArrayBuffer});var h=function(e,t){return function(n){return new y(t,!0).update(n)[e]()}},g=function(e){var t=h(`hex`,e);t.create=function(){return new y(e)},t.update=function(e){return t.create().update(e)};for(var n=0;n<p.length;++n){var r=p[n];t[r]=h(r,e)}return t},_=function(e,t){return function(n,r){return new b(n,t,!0).update(r)[e]()}},v=function(e){var t=_(`hex`,e);t.create=function(t){return new b(t,e)},t.update=function(e,n){return t.create(e).update(n)};for(var n=0;n<p.length;++n){var r=p[n];t[r]=_(r,e)}return t};function y(e,t){t?(m[0]=m[1]=m[2]=m[3]=m[4]=m[5]=m[6]=m[7]=m[8]=m[9]=m[10]=m[11]=m[12]=m[13]=m[14]=m[15]=m[16]=m[17]=m[18]=m[19]=m[20]=m[21]=m[22]=m[23]=m[24]=m[25]=m[26]=m[27]=m[28]=m[29]=m[30]=m[31]=m[32]=0,this.blocks=m):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e==384?(this.h0h=3418070365,this.h0l=3238371032,this.h1h=1654270250,this.h1l=914150663,this.h2h=2438529370,this.h2l=812702999,this.h3h=355462360,this.h3l=4144912697,this.h4h=1731405415,this.h4l=4290775857,this.h5h=2394180231,this.h5l=1750603025,this.h6h=3675008525,this.h6l=1694076839,this.h7h=1203062813,this.h7l=3204075428):e==256?(this.h0h=573645204,this.h0l=4230739756,this.h1h=2673172387,this.h1l=3360449730,this.h2h=596883563,this.h2l=1867755857,this.h3h=2520282905,this.h3l=1497426621,this.h4h=2519219938,this.h4l=2827943907,this.h5h=3193839141,this.h5l=1401305490,this.h6h=721525244,this.h6l=746961066,this.h7h=246885852,this.h7l=2177182882):e==224?(this.h0h=2352822216,this.h0l=424955298,this.h1h=1944164710,this.h1l=2312950998,this.h2h=502970286,this.h2l=855612546,this.h3h=1738396948,this.h3l=1479516111,this.h4h=258812777,this.h4l=2077511080,this.h5h=2011393907,this.h5l=79989058,this.h6h=1067287976,this.h6l=1780299464,this.h7h=286451373,this.h7l=2446758561):(this.h0h=1779033703,this.h0l=4089235720,this.h1h=3144134277,this.h1l=2227873595,this.h2h=1013904242,this.h2l=4271175723,this.h3h=2773480762,this.h3l=1595750129,this.h4h=1359893119,this.h4l=2917565137,this.h5h=2600822924,this.h5l=725511199,this.h6h=528734635,this.h6l=4215389547,this.h7h=1541459225,this.h7l=327033209),this.bits=e,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1}y.prototype.update=function(t){if(this.finalized)throw Error(n);var r,i=typeof t;if(i!==`string`){if(i===`object`){if(t===null)throw Error(e);if(c&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!Array.isArray(t)&&(!c||!ArrayBuffer.isView(t)))throw Error(e)}else throw Error(e);r=!0}for(var a,o=0,s,l=t.length,u=this.blocks;o<l;){if(this.hashed&&(this.hashed=!1,u[0]=this.block,u[1]=u[2]=u[3]=u[4]=u[5]=u[6]=u[7]=u[8]=u[9]=u[10]=u[11]=u[12]=u[13]=u[14]=u[15]=u[16]=u[17]=u[18]=u[19]=u[20]=u[21]=u[22]=u[23]=u[24]=u[25]=u[26]=u[27]=u[28]=u[29]=u[30]=u[31]=u[32]=0),r)for(s=this.start;o<l&&s<128;++o)u[s>>2]|=t[o]<<d[s++&3];else for(s=this.start;o<l&&s<128;++o)a=t.charCodeAt(o),a<128?u[s>>2]|=a<<d[s++&3]:a<2048?(u[s>>2]|=(192|a>>6)<<d[s++&3],u[s>>2]|=(128|a&63)<<d[s++&3]):a<55296||a>=57344?(u[s>>2]|=(224|a>>12)<<d[s++&3],u[s>>2]|=(128|a>>6&63)<<d[s++&3],u[s>>2]|=(128|a&63)<<d[s++&3]):(a=65536+((a&1023)<<10|t.charCodeAt(++o)&1023),u[s>>2]|=(240|a>>18)<<d[s++&3],u[s>>2]|=(128|a>>12&63)<<d[s++&3],u[s>>2]|=(128|a>>6&63)<<d[s++&3],u[s>>2]|=(128|a&63)<<d[s++&3]);this.lastByteIndex=s,this.bytes+=s-this.start,s>=128?(this.block=u[32],this.start=s-128,this.hash(),this.hashed=!0):this.start=s}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes%=4294967296),this},y.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[32]=this.block,e[t>>2]|=u[t&3],this.block=e[32],t>=112&&(this.hashed||this.hash(),e[0]=this.block,e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=e[16]=e[17]=e[18]=e[19]=e[20]=e[21]=e[22]=e[23]=e[24]=e[25]=e[26]=e[27]=e[28]=e[29]=e[30]=e[31]=e[32]=0),e[30]=this.hBytes<<3|this.bytes>>>29,e[31]=this.bytes<<3,this.hash()}},y.prototype.hash=function(){var e=this.h0h,t=this.h0l,n=this.h1h,r=this.h1l,i=this.h2h,a=this.h2l,o=this.h3h,s=this.h3l,c=this.h4h,l=this.h4l,u=this.h5h,d=this.h5l,p=this.h6h,m=this.h6l,h=this.h7h,g=this.h7l,_=this.blocks,v,y,b,x,S,C,w,T,E,D,O,k,A,ee,te,j,ne,re,ie,M,N,P,F,I,L;for(v=32;v<160;v+=2)M=_[v-30],N=_[v-29],y=(M>>>1|N<<31)^(M>>>8|N<<24)^M>>>7,b=(N>>>1|M<<31)^(N>>>8|M<<24)^(N>>>7|M<<25),M=_[v-4],N=_[v-3],x=(M>>>19|N<<13)^(N>>>29|M<<3)^M>>>6,S=(N>>>19|M<<13)^(M>>>29|N<<3)^(N>>>6|M<<26),M=_[v-32],N=_[v-31],P=_[v-14],F=_[v-13],C=(F&65535)+(N&65535)+(b&65535)+(S&65535),w=(F>>>16)+(N>>>16)+(b>>>16)+(S>>>16)+(C>>>16),T=(P&65535)+(M&65535)+(y&65535)+(x&65535)+(w>>>16),E=(P>>>16)+(M>>>16)+(y>>>16)+(x>>>16)+(T>>>16),_[v]=E<<16|T&65535,_[v+1]=w<<16|C&65535;var R=e,ae=t,oe=n,se=r,ce=i,le=a,ue=o,de=s,fe=c,pe=l,me=u,he=d,ge=p,_e=m,ve=h,ye=g;for(j=oe&ce,ne=se&le,v=0;v<160;v+=8)y=(R>>>28|ae<<4)^(ae>>>2|R<<30)^(ae>>>7|R<<25),b=(ae>>>28|R<<4)^(R>>>2|ae<<30)^(R>>>7|ae<<25),x=(fe>>>14|pe<<18)^(fe>>>18|pe<<14)^(pe>>>9|fe<<23),S=(pe>>>14|fe<<18)^(pe>>>18|fe<<14)^(fe>>>9|pe<<23),D=R&oe,O=ae&se,re=D^R&ce^j,ie=O^ae&le^ne,I=fe&me^~fe&ge,L=pe&he^~pe&_e,M=_[v],N=_[v+1],P=f[v],F=f[v+1],C=(F&65535)+(N&65535)+(L&65535)+(S&65535)+(ye&65535),w=(F>>>16)+(N>>>16)+(L>>>16)+(S>>>16)+(ye>>>16)+(C>>>16),T=(P&65535)+(M&65535)+(I&65535)+(x&65535)+(ve&65535)+(w>>>16),E=(P>>>16)+(M>>>16)+(I>>>16)+(x>>>16)+(ve>>>16)+(T>>>16),M=E<<16|T&65535,N=w<<16|C&65535,C=(ie&65535)+(b&65535),w=(ie>>>16)+(b>>>16)+(C>>>16),T=(re&65535)+(y&65535)+(w>>>16),E=(re>>>16)+(y>>>16)+(T>>>16),P=E<<16|T&65535,F=w<<16|C&65535,C=(de&65535)+(N&65535),w=(de>>>16)+(N>>>16)+(C>>>16),T=(ue&65535)+(M&65535)+(w>>>16),E=(ue>>>16)+(M>>>16)+(T>>>16),ve=E<<16|T&65535,ye=w<<16|C&65535,C=(F&65535)+(N&65535),w=(F>>>16)+(N>>>16)+(C>>>16),T=(P&65535)+(M&65535)+(w>>>16),E=(P>>>16)+(M>>>16)+(T>>>16),ue=E<<16|T&65535,de=w<<16|C&65535,y=(ue>>>28|de<<4)^(de>>>2|ue<<30)^(de>>>7|ue<<25),b=(de>>>28|ue<<4)^(ue>>>2|de<<30)^(ue>>>7|de<<25),x=(ve>>>14|ye<<18)^(ve>>>18|ye<<14)^(ye>>>9|ve<<23),S=(ye>>>14|ve<<18)^(ye>>>18|ve<<14)^(ve>>>9|ye<<23),k=ue&R,A=de&ae,re=k^ue&oe^D,ie=A^de&se^O,I=ve&fe^~ve&me,L=ye&pe^~ye&he,M=_[v+2],N=_[v+3],P=f[v+2],F=f[v+3],C=(F&65535)+(N&65535)+(L&65535)+(S&65535)+(_e&65535),w=(F>>>16)+(N>>>16)+(L>>>16)+(S>>>16)+(_e>>>16)+(C>>>16),T=(P&65535)+(M&65535)+(I&65535)+(x&65535)+(ge&65535)+(w>>>16),E=(P>>>16)+(M>>>16)+(I>>>16)+(x>>>16)+(ge>>>16)+(T>>>16),M=E<<16|T&65535,N=w<<16|C&65535,C=(ie&65535)+(b&65535),w=(ie>>>16)+(b>>>16)+(C>>>16),T=(re&65535)+(y&65535)+(w>>>16),E=(re>>>16)+(y>>>16)+(T>>>16),P=E<<16|T&65535,F=w<<16|C&65535,C=(le&65535)+(N&65535),w=(le>>>16)+(N>>>16)+(C>>>16),T=(ce&65535)+(M&65535)+(w>>>16),E=(ce>>>16)+(M>>>16)+(T>>>16),ge=E<<16|T&65535,_e=w<<16|C&65535,C=(F&65535)+(N&65535),w=(F>>>16)+(N>>>16)+(C>>>16),T=(P&65535)+(M&65535)+(w>>>16),E=(P>>>16)+(M>>>16)+(T>>>16),ce=E<<16|T&65535,le=w<<16|C&65535,y=(ce>>>28|le<<4)^(le>>>2|ce<<30)^(le>>>7|ce<<25),b=(le>>>28|ce<<4)^(ce>>>2|le<<30)^(ce>>>7|le<<25),x=(ge>>>14|_e<<18)^(ge>>>18|_e<<14)^(_e>>>9|ge<<23),S=(_e>>>14|ge<<18)^(_e>>>18|ge<<14)^(ge>>>9|_e<<23),ee=ce&ue,te=le&de,re=ee^ce&R^k,ie=te^le&ae^A,I=ge&ve^~ge&fe,L=_e&ye^~_e&pe,M=_[v+4],N=_[v+5],P=f[v+4],F=f[v+5],C=(F&65535)+(N&65535)+(L&65535)+(S&65535)+(he&65535),w=(F>>>16)+(N>>>16)+(L>>>16)+(S>>>16)+(he>>>16)+(C>>>16),T=(P&65535)+(M&65535)+(I&65535)+(x&65535)+(me&65535)+(w>>>16),E=(P>>>16)+(M>>>16)+(I>>>16)+(x>>>16)+(me>>>16)+(T>>>16),M=E<<16|T&65535,N=w<<16|C&65535,C=(ie&65535)+(b&65535),w=(ie>>>16)+(b>>>16)+(C>>>16),T=(re&65535)+(y&65535)+(w>>>16),E=(re>>>16)+(y>>>16)+(T>>>16),P=E<<16|T&65535,F=w<<16|C&65535,C=(se&65535)+(N&65535),w=(se>>>16)+(N>>>16)+(C>>>16),T=(oe&65535)+(M&65535)+(w>>>16),E=(oe>>>16)+(M>>>16)+(T>>>16),me=E<<16|T&65535,he=w<<16|C&65535,C=(F&65535)+(N&65535),w=(F>>>16)+(N>>>16)+(C>>>16),T=(P&65535)+(M&65535)+(w>>>16),E=(P>>>16)+(M>>>16)+(T>>>16),oe=E<<16|T&65535,se=w<<16|C&65535,y=(oe>>>28|se<<4)^(se>>>2|oe<<30)^(se>>>7|oe<<25),b=(se>>>28|oe<<4)^(oe>>>2|se<<30)^(oe>>>7|se<<25),x=(me>>>14|he<<18)^(me>>>18|he<<14)^(he>>>9|me<<23),S=(he>>>14|me<<18)^(he>>>18|me<<14)^(me>>>9|he<<23),j=oe&ce,ne=se&le,re=j^oe&ue^ee,ie=ne^se&de^te,I=me&ge^~me&ve,L=he&_e^~he&ye,M=_[v+6],N=_[v+7],P=f[v+6],F=f[v+7],C=(F&65535)+(N&65535)+(L&65535)+(S&65535)+(pe&65535),w=(F>>>16)+(N>>>16)+(L>>>16)+(S>>>16)+(pe>>>16)+(C>>>16),T=(P&65535)+(M&65535)+(I&65535)+(x&65535)+(fe&65535)+(w>>>16),E=(P>>>16)+(M>>>16)+(I>>>16)+(x>>>16)+(fe>>>16)+(T>>>16),M=E<<16|T&65535,N=w<<16|C&65535,C=(ie&65535)+(b&65535),w=(ie>>>16)+(b>>>16)+(C>>>16),T=(re&65535)+(y&65535)+(w>>>16),E=(re>>>16)+(y>>>16)+(T>>>16),P=E<<16|T&65535,F=w<<16|C&65535,C=(ae&65535)+(N&65535),w=(ae>>>16)+(N>>>16)+(C>>>16),T=(R&65535)+(M&65535)+(w>>>16),E=(R>>>16)+(M>>>16)+(T>>>16),fe=E<<16|T&65535,pe=w<<16|C&65535,C=(F&65535)+(N&65535),w=(F>>>16)+(N>>>16)+(C>>>16),T=(P&65535)+(M&65535)+(w>>>16),E=(P>>>16)+(M>>>16)+(T>>>16),R=E<<16|T&65535,ae=w<<16|C&65535;C=(t&65535)+(ae&65535),w=(t>>>16)+(ae>>>16)+(C>>>16),T=(e&65535)+(R&65535)+(w>>>16),E=(e>>>16)+(R>>>16)+(T>>>16),this.h0h=E<<16|T&65535,this.h0l=w<<16|C&65535,C=(r&65535)+(se&65535),w=(r>>>16)+(se>>>16)+(C>>>16),T=(n&65535)+(oe&65535)+(w>>>16),E=(n>>>16)+(oe>>>16)+(T>>>16),this.h1h=E<<16|T&65535,this.h1l=w<<16|C&65535,C=(a&65535)+(le&65535),w=(a>>>16)+(le>>>16)+(C>>>16),T=(i&65535)+(ce&65535)+(w>>>16),E=(i>>>16)+(ce>>>16)+(T>>>16),this.h2h=E<<16|T&65535,this.h2l=w<<16|C&65535,C=(s&65535)+(de&65535),w=(s>>>16)+(de>>>16)+(C>>>16),T=(o&65535)+(ue&65535)+(w>>>16),E=(o>>>16)+(ue>>>16)+(T>>>16),this.h3h=E<<16|T&65535,this.h3l=w<<16|C&65535,C=(l&65535)+(pe&65535),w=(l>>>16)+(pe>>>16)+(C>>>16),T=(c&65535)+(fe&65535)+(w>>>16),E=(c>>>16)+(fe>>>16)+(T>>>16),this.h4h=E<<16|T&65535,this.h4l=w<<16|C&65535,C=(d&65535)+(he&65535),w=(d>>>16)+(he>>>16)+(C>>>16),T=(u&65535)+(me&65535)+(w>>>16),E=(u>>>16)+(me>>>16)+(T>>>16),this.h5h=E<<16|T&65535,this.h5l=w<<16|C&65535,C=(m&65535)+(_e&65535),w=(m>>>16)+(_e>>>16)+(C>>>16),T=(p&65535)+(ge&65535)+(w>>>16),E=(p>>>16)+(ge>>>16)+(T>>>16),this.h6h=E<<16|T&65535,this.h6l=w<<16|C&65535,C=(g&65535)+(ye&65535),w=(g>>>16)+(ye>>>16)+(C>>>16),T=(h&65535)+(ve&65535)+(w>>>16),E=(h>>>16)+(ve>>>16)+(T>>>16),this.h7h=E<<16|T&65535,this.h7l=w<<16|C&65535},y.prototype.hex=function(){this.finalize();var e=this.h0h,t=this.h0l,n=this.h1h,r=this.h1l,i=this.h2h,a=this.h2l,o=this.h3h,s=this.h3l,c=this.h4h,u=this.h4l,d=this.h5h,f=this.h5l,p=this.h6h,m=this.h6l,h=this.h7h,g=this.h7l,_=this.bits,v=l[e>>28&15]+l[e>>24&15]+l[e>>20&15]+l[e>>16&15]+l[e>>12&15]+l[e>>8&15]+l[e>>4&15]+l[e&15]+l[t>>28&15]+l[t>>24&15]+l[t>>20&15]+l[t>>16&15]+l[t>>12&15]+l[t>>8&15]+l[t>>4&15]+l[t&15]+l[n>>28&15]+l[n>>24&15]+l[n>>20&15]+l[n>>16&15]+l[n>>12&15]+l[n>>8&15]+l[n>>4&15]+l[n&15]+l[r>>28&15]+l[r>>24&15]+l[r>>20&15]+l[r>>16&15]+l[r>>12&15]+l[r>>8&15]+l[r>>4&15]+l[r&15]+l[i>>28&15]+l[i>>24&15]+l[i>>20&15]+l[i>>16&15]+l[i>>12&15]+l[i>>8&15]+l[i>>4&15]+l[i&15]+l[a>>28&15]+l[a>>24&15]+l[a>>20&15]+l[a>>16&15]+l[a>>12&15]+l[a>>8&15]+l[a>>4&15]+l[a&15]+l[o>>28&15]+l[o>>24&15]+l[o>>20&15]+l[o>>16&15]+l[o>>12&15]+l[o>>8&15]+l[o>>4&15]+l[o&15];return _>=256&&(v+=l[s>>28&15]+l[s>>24&15]+l[s>>20&15]+l[s>>16&15]+l[s>>12&15]+l[s>>8&15]+l[s>>4&15]+l[s&15]),_>=384&&(v+=l[c>>28&15]+l[c>>24&15]+l[c>>20&15]+l[c>>16&15]+l[c>>12&15]+l[c>>8&15]+l[c>>4&15]+l[c&15]+l[u>>28&15]+l[u>>24&15]+l[u>>20&15]+l[u>>16&15]+l[u>>12&15]+l[u>>8&15]+l[u>>4&15]+l[u&15]+l[d>>28&15]+l[d>>24&15]+l[d>>20&15]+l[d>>16&15]+l[d>>12&15]+l[d>>8&15]+l[d>>4&15]+l[d&15]+l[f>>28&15]+l[f>>24&15]+l[f>>20&15]+l[f>>16&15]+l[f>>12&15]+l[f>>8&15]+l[f>>4&15]+l[f&15]),_==512&&(v+=l[p>>28&15]+l[p>>24&15]+l[p>>20&15]+l[p>>16&15]+l[p>>12&15]+l[p>>8&15]+l[p>>4&15]+l[p&15]+l[m>>28&15]+l[m>>24&15]+l[m>>20&15]+l[m>>16&15]+l[m>>12&15]+l[m>>8&15]+l[m>>4&15]+l[m&15]+l[h>>28&15]+l[h>>24&15]+l[h>>20&15]+l[h>>16&15]+l[h>>12&15]+l[h>>8&15]+l[h>>4&15]+l[h&15]+l[g>>28&15]+l[g>>24&15]+l[g>>20&15]+l[g>>16&15]+l[g>>12&15]+l[g>>8&15]+l[g>>4&15]+l[g&15]),v},y.prototype.toString=y.prototype.hex,y.prototype.digest=function(){this.finalize();var e=this.h0h,t=this.h0l,n=this.h1h,r=this.h1l,i=this.h2h,a=this.h2l,o=this.h3h,s=this.h3l,c=this.h4h,l=this.h4l,u=this.h5h,d=this.h5l,f=this.h6h,p=this.h6l,m=this.h7h,h=this.h7l,g=this.bits,_=[e>>24&255,e>>16&255,e>>8&255,e&255,t>>24&255,t>>16&255,t>>8&255,t&255,n>>24&255,n>>16&255,n>>8&255,n&255,r>>24&255,r>>16&255,r>>8&255,r&255,i>>24&255,i>>16&255,i>>8&255,i&255,a>>24&255,a>>16&255,a>>8&255,a&255,o>>24&255,o>>16&255,o>>8&255,o&255];return g>=256&&_.push(s>>24&255,s>>16&255,s>>8&255,s&255),g>=384&&_.push(c>>24&255,c>>16&255,c>>8&255,c&255,l>>24&255,l>>16&255,l>>8&255,l&255,u>>24&255,u>>16&255,u>>8&255,u&255,d>>24&255,d>>16&255,d>>8&255,d&255),g==512&&_.push(f>>24&255,f>>16&255,f>>8&255,f&255,p>>24&255,p>>16&255,p>>8&255,p&255,m>>24&255,m>>16&255,m>>8&255,m&255,h>>24&255,h>>16&255,h>>8&255,h&255),_},y.prototype.array=y.prototype.digest,y.prototype.arrayBuffer=function(){this.finalize();var e=this.bits,t=new ArrayBuffer(e/8),n=new DataView(t);return n.setUint32(0,this.h0h),n.setUint32(4,this.h0l),n.setUint32(8,this.h1h),n.setUint32(12,this.h1l),n.setUint32(16,this.h2h),n.setUint32(20,this.h2l),n.setUint32(24,this.h3h),e>=256&&n.setUint32(28,this.h3l),e>=384&&(n.setUint32(32,this.h4h),n.setUint32(36,this.h4l),n.setUint32(40,this.h5h),n.setUint32(44,this.h5l)),e==512&&(n.setUint32(48,this.h6h),n.setUint32(52,this.h6l),n.setUint32(56,this.h7h),n.setUint32(60,this.h7l)),t},y.prototype.clone=function(){var e=new y(this.bits,!1);return this.copyTo(e),e},y.prototype.copyTo=function(e){var t=0,n=[`h0h`,`h0l`,`h1h`,`h1l`,`h2h`,`h2l`,`h3h`,`h3l`,`h4h`,`h4l`,`h5h`,`h5l`,`h6h`,`h6l`,`h7h`,`h7l`,`start`,`bytes`,`hBytes`,`finalized`,`hashed`,`lastByteIndex`];for(t=0;t<n.length;++t)e[n[t]]=this[n[t]];for(t=0;t<this.blocks.length;++t)e.blocks[t]=this.blocks[t]};function b(t,n,r){var i,a=typeof t;if(a!==`string`){if(a===`object`){if(t===null)throw Error(e);if(c&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!Array.isArray(t)&&(!c||!ArrayBuffer.isView(t)))throw Error(e)}else throw Error(e);i=!0}var o=t.length;if(!i){for(var s=[],o=t.length,l=0,u,d=0;d<o;++d)u=t.charCodeAt(d),u<128?s[l++]=u:u<2048?(s[l++]=192|u>>6,s[l++]=128|u&63):u<55296||u>=57344?(s[l++]=224|u>>12,s[l++]=128|u>>6&63,s[l++]=128|u&63):(u=65536+((u&1023)<<10|t.charCodeAt(++d)&1023),s[l++]=240|u>>18,s[l++]=128|u>>12&63,s[l++]=128|u>>6&63,s[l++]=128|u&63);t=s}t.length>128&&(t=new y(n,!0).update(t).array());for(var f=[],p=[],d=0;d<128;++d){var m=t[d]||0;f[d]=92^m,p[d]=54^m}y.call(this,n,r),this.update(p),this.oKeyPad=f,this.inner=!0,this.sharedMemory=r}b.prototype=new y,b.prototype.finalize=function(){if(y.prototype.finalize.call(this),this.inner){this.inner=!1;var e=this.array();y.call(this,this.bits,this.sharedMemory),this.update(this.oKeyPad),this.update(e),y.prototype.finalize.call(this)}},b.prototype.clone=function(){var e=new b([],this.bits,!1);this.copyTo(e),e.inner=this.inner;for(var t=0;t<this.oKeyPad.length;++t)e.oKeyPad[t]=this.oKeyPad[t];return e};var x=g(512);x.sha512=x,x.sha384=g(384),x.sha512_256=g(256),x.sha512_224=g(224),x.sha512.hmac=v(512),x.sha384.hmac=v(384),x.sha512_256.hmac=v(256),x.sha512_224.hmac=v(224),o?t.exports=x:(i.sha512=x.sha512,i.sha384=x.sha384,i.sha512_256=x.sha512_256,i.sha512_224=x.sha512_224,s&&define(function(){return x}))})()})),Ex=e(Tx());const Dx={apiKey:null,authDomain:null,databaseURL:null,projectId:null,storageBucket:null,messagingSenderId:null,appId:null},Ox=class extends it{get id(){return this.config.id}get name(){return this.config.name}get suggestedResource(){return typeof this.config.suggestedResource==`function`?this.config.suggestedResource():this.config.suggestedResource}}.createAccessor(GameDatabase.progressStages);Ox.all=GameDatabase.progressStages;var kx=class extends it{get requiredStage(){return this.config.requiredStage}get name(){return this.config.name}get description(){return typeof this.config.description==`function`?this.config.description():this.config.description}};const Ax=mapGameDataToObject(GameDatabase.catchupResources,e=>new kx(e)),jx={getProgressStage(e){let t=Ox.all;for(let n=t.length-1;n>=0;n--)if(t[n].hasReached(e))return t[n];throw Error(`No valid progress stage found`)},getCompositeProgress(e){if(!e)return 0;let t=this.getProgressStage(e);return t.id+Math.clampMax(t.subProgressValue(e),1)},compareSaveProgress(e,t){let n=this.getCompositeProgress(e)-this.getCompositeProgress(t);return n>.05?-1:n<-.05?1:0},compareSaveTimes(e,t){return!e||!t?0:e.records?.realTimePlayed-t.records?.realTimePlayed>=0?-1:1}};var Mx=Dx.apiKey!==null;Mx&&Vl(Dx);const Nx={provider:Mx?new df:null,auth:Mx?Cm():null,db:Mx?Sx():null,user:null,lastCloudHash:null,get isAvailable(){return Mx},resetTempState(){this.lastCloudHash=null,GameStorage.lastCloudSave=Date.now(),GameIntervals.checkCloudSave.restart()},get loggedIn(){return this.user!==null},async loginWithSteam(e,t,n){if(!this.isAvailable)return;if(this.loggedIn){Nx.user.displayName=n;return}let r=`${e}@ad.com`,i=t,a;if(await wf(this.auth,r,i).catch(()=>Cf(this.auth,r,i)).catch(e=>a=e),a!==void 0){console.log(`Firebase Login Error: ${a}`);return}Nx.user.displayName=n},compareSaves(e,t,n){try{return{farther:jx.compareSaveProgress(e,t),older:jx.compareSaveTimes(e,t),differentName:e?.options.saveFileName!==t?.options.saveFileName,hashMismatch:this.lastCloudHash&&this.lastCloudHash!==n}}catch{return null}},async saveCheck(e=!1){if(!this.isAvailable)return;let t=GameStorage.currentSlot,n=await this.load();if(n===null)this.save();else{let r=(0,Ex.sha512_256)(GameSaveSerializer.serialize(n));this.lastCloudHash||=r;let i=GameStorage.saves[t],a=this.compareSaves(n,i,r),o=()=>this.save();if(!a){Modal.addCloudConflict(t,a,n,i,o),Modal.cloudInvalidData.show({isSaving:!0});return}let s=n&&i&&a&&(a.older===-1||a.farther===-1||a.differentName||a.hashMismatch);e||s&&player.options.showCloudModal?(Modal.addCloudConflict(t,a,n,i,o),Modal.cloudSaveConflict.show()):(!s||player.options.forceCloudOverwrite)&&o()}},save(){if(!this.user||GlyphSelection.active||ui.$viewModel.modal.progressBar!==void 0)return;player.options.syncSaveIntervals&&GameStorage.save();let e=GameSaveSerializer.serialize(GameStorage.saves[GameStorage.currentSlot]);this.lastCloudHash=(0,Ex.sha512_256)(e),GameStorage.lastCloudSave=Date.now(),GameIntervals.checkCloudSave.restart();let t=GameStorage.currentSlot;this.writeToCloudDB(t,e),player.options.hideGoogleName?GameUI.notify.info(`Game saved (slot ${t+1}) to cloud`):GameUI.notify.info(`Game saved (slot ${t+1}) to cloud as user ${this.user.displayName}`)},async loadCheck(){if(!this.isAvailable)return;let e=await this.load();if(e===null)player.options.hideGoogleName?GameUI.notify.info(`No cloud save for current Google Account`):GameUI.notify.info(`No cloud save for user ${this.user.displayName}`);else{let t=e,n=GameStorage.currentSlot,r=GameStorage.saves[n],i=this.compareSaves(t,r),a=()=>{GameStorage.overwriteSlot(n,t),player.options.hideGoogleName?GameUI.notify.info(`Cloud save (slot ${n+1}) loaded`):GameUI.notify.info(`Cloud save (slot ${n+1}) loaded for user ${this.user.displayName}`)};if(!i){Modal.addCloudConflict(n,i,t,r,a),Modal.cloudInvalidData.show({isSaving:!1});return}t&&r&&(i.older===1||i.farther!==-1||i.differentName)?(Modal.addCloudConflict(n,i,t,r,a),Modal.cloudLoadConflict.show()):a()}},async load(){let e=await this.readFromCloudDB(GameStorage.currentSlot);return e.exists()||(await this.separateSaveSlots(),e=await this.readFromCloudDB(GameStorage.currentSlot),e.exists())?GameSaveSerializer.deserialize(e.val()):null},async separateSaveSlots(){let e=await this.readFromCloudDB(null);if(!e.exists())return;let t=GameSaveSerializer.deserialize(e.val());if(t)for(let e of Object.keys(t.saves)){let n=GameSaveSerializer.serialize(t.saves[e]);await this.writeToCloudDB(Number(e),n)}},readFromCloudDB(e){let t=e===null?``:`/${e}`;return fx(lx(this.db,`users/${this.user.id}/web${t}`))},writeToCloudDB(e,t){let n=e===null?``:`/${e}`;return dx(lx(this.db,`users/${this.user.id}/web${n}`),t)},logout(){this.isAvailable&&Df(this.auth)},init(){this.isAvailable&&Cm().onAuthStateChanged(e=>{e?this.user={id:e.uid,displayName:e.displayName,email:e.email}:this.user=null})}};var Px=t({ExtendedLogarithmNotation:()=>Gx,ExtendedScientificNotation:()=>Kx,HyperENotation:()=>eS,SemiStackedScientificNotation:()=>Jx,SimpleExtendedScientificNotation:()=>$x,StackedMixedScientificNotation:()=>nS,StackedScientificNotation:()=>qx,TetrationalNotation:()=>Yx,TrueTetrationalNotation:()=>Xx}),Fx=function(){function e(){}return e}(),Ix={isInfinite:function(e){return e.gte(W.tetrate(10,0x2386f26fc10000))},numCommas:1e5,exponentDefaultPlaces:3};function Lx(e,t){return t===0?e.slice(-3):e.slice(-3*(t+1),-3*t)}function Rx(e){return Array.from(Array(Math.ceil(e.length/3))).map(function(t,n){return Lx(e,n)}).reverse().join(`,`)}function zx(e,t,n){return n||t===0?parseFloat(e.toPrecision(Math.max(t,1))).toString():e.toPrecision(t)}function Bx(e,t,n,r){if(e<=Ix.numCommas)return zx(e,t,n);if(e<=1e9)return Rx(zx(e,t,n));var i=r??t,a=e/10**Math.floor(Math.log10(e)),o=Math.floor(Math.log10(e));return`${zx(a,i,!1)}e${zx(o,String(o).length,!0)}`}function Vx(e,t){return e<1e9?`${Bx(10**(e%1),t,!1)}e${Bx(Math.floor(e),String(Math.floor(e)).length,!0)}`:`e${Bx(e,4,!0)}`}function Hx(e,t){var n=Number(zx(e.mag,t,!0)),r=e;return n>=9e15&&(r.mag=Math.log10(r.mag),r.layer+=1),n<15.9&&(r.mag=10**r.mag,--r.layer),r}function Ux(e,t,n,r){var i={mag:e.mag,layer:e.layer,sign:e.sign};i=Hx(i,t);var a=n;return i.sign<=0&&(a=`-${a}`),a+=Vx(i.mag,t),a+=r,a+=Bx(i.layer-1,String(i.layer-1).length,!1,t),a}function Wx(e,t,n,r){var i={mag:e.mag,layer:e.layer,sign:e.sign};i=Hx(i,t);var a=r;return i.sign<=0&&(a=`-${a}`),a+=Bx(i.layer-1,String(i.layer-1).length,!1,t),a+=n,a+=Vx(i.mag,t),a}var Gx=function(e){wa(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t.prototype,`name`,{get:function(){return`Extended Logarithm`},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`isSlog`,{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.formatLDecimal=function(e,t){return e.isNan()?`NaN`:e.isFinite?`${e.sign===-1?`-`:``}F${Bx(e.abs().slog().toNumber(),t+1,!1)}`:`${e.sign===-1?`-`:``}Infinity`},t}(Fx),Kx=function(e){wa(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t.prototype,`name`,{get:function(){return`Extended Scientific`},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`isSlog`,{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.formatLDecimal=function(e,t){return e.isNan()?`NaN`:e.isFinite?Wx(e,t+1,`E`,`F`):`${e.sign===-1?`-`:``}Infinity`},t}(Fx),qx=function(e){wa(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t.prototype,`name`,{get:function(){return`Stacked Scientific`},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`isSlog`,{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.formatLDecimal=function(e,t){if(e.isNan())return`NaN`;if(!e.isFinite)return`${e.sign===-1?`-`:``}Infinity`;if(e.layer<=4){var n=``;return n+=`e`.repeat(e.layer-1),`${n}${Bx(10**(e.mag%1),t+1,!1)}e${Bx(Math.floor(e.mag),99,!0)}`}return Wx(e,t+1,`]`,`[e^`)},t}(Fx),Jx=function(e){wa(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t.prototype,`name`,{get:function(){return`Semi-Stacked Scientific`},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`isSlog`,{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.formatLDecimal=function(e,t){if(e.isNan())return`NaN`;if(!e.isFinite)return`${e.sign===-1?`-`:``}Infinity`;if(e.layer<=4){var n=``;return n+=`e`.repeat(e.layer-1),`${n}${Bx(10**(e.mag%1),t+1,!1)}e${Bx(Math.floor(e.mag),99,!0)}`}return Wx(e,t+1,`E`,`F`)},t}(Fx),Yx=function(e){wa(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t.prototype,`name`,{get:function(){return`Tetrational`},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`isSlog`,{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.formatLDecimal=function(e,t){return e.isNan()?`NaN`:e.isFinite?Wx(e,t+1,`^`,`10^^`):`${e.sign===-1?`-`:``}Infinity`},t}(Fx),Xx=function(e){wa(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t.prototype,`name`,{get:function(){return`True Tetrational`},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`isSlog`,{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.formatLDecimal=function(e,t){return e.isNan()?`NaN`:e.isFinite?`${e.sign===-1?`-`:``}10^^${Bx(e.abs().slog().toNumber(),t+1,!1)}`:`${e.sign===-1?`-`:``}Infinity`},t}(Fx);function Zx(e,t,n){var r=e.log10().floor(),i=e.div(r.pow10()),a=``;return a=r.gte(1e9)?Qx(r,t):r.gte(1e4)?Bx(r.toNumber(),99,!0):r.toStringWithDecimalPlaces(0),n?`${i.toStringWithDecimalPlaces(t)}e${a}`:`e${a}`}function Qx(e,t){if(e.isNan())return`NaN`;if(!e.isFinite())return`${e.sign===-1?`-`:``}Infinity`;if(e.sign===-1)return`-${Qx(e.neg(),t)}`;if(e.gte(`eeee1000`)){var n=e.slog(),r=n.floor();return`${n.sub(r).pow10().toStringWithDecimalPlaces(t)}F${Bx(r.toNumber(),n.gte(1e9)?t:99,!0)}`}else if(e.gte(`1e1000000`))return Zx(e,t,!1);else if(e.gte(1e9))return Zx(e,t,!0);return Bx(e.toNumber(),t,!0)}var $x=function(e){wa(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t.prototype,`name`,{get:function(){return`Simple Extended Scientific`},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`isSlog`,{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.formatLDecimal=function(e,t){return Qx(e,t)},t}(Fx),eS=function(e){wa(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t.prototype,`name`,{get:function(){return`Hyper E`},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`isSlog`,{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.formatLDecimal=function(e,t){return e.isNan()?`NaN`:e.isFinite?Ux(e,t+1,`E`,`#`):`${e.sign===-1?`-`:``}Infinity`},t}(Fx);function tS(e,t){if(e<=3)return String(e);var n=[`K`,`M`,`B`,`T`,`Qa`,`Qt`,`Sx`,`Sp`,`Oc`,`No`],r=[[``,`U`,`D`,`T`,`Qa`,`Qt`,`Sx`,`Sp`,`O`,`N`],[``,`Dc`,`Vg`,`Tg`,`Qd`,`Qi`,`Se`,`St`,`Og`,`Nn`],[``,`Ce`,`Dn`,`Tc`,`Qe`,`Qu`,`Sc`,`Si`,`Oe`,`Ne`]];if(e<33)return`${(10**(e%3)).toFixed(t)}${n[Math.floor(e/3)-1]}`;if(e<3003){var i=``;return i+=r[0][Math.floor((e-3)%30/3)],i+=r[1][Math.floor((e-3)%300/30)],i+=r[2][Math.floor((e-3)/300)],`${(10**(e%3)).toFixed(t)}${i}`}var a=e;if(e<3000003){var o=``;o+=r[0][Math.floor((e-3)%30/3)],o+=r[1][Math.floor((e-3)%300/30)],o+=r[2][Math.floor((e-3)%3e3/300)];var s=`MI-`;return a/=1e3,s+=r[0][Math.floor((a-3)%30/3)],s+=r[1][Math.floor((a-3)%300/30)],s+=r[2][Math.floor((a-3)%3e3/300)],`${(10**(e%3)).toFixed(t)}${s}${o}`}var c=``;c+=r[0][Math.floor((e-3)%30/3)],c+=r[1][Math.floor((e-3)%300/30)],c+=r[2][Math.floor((e-3)%3e3/300)];var l=`MI-`;a/=1e3,l+=r[0][Math.floor((a-3)%30/3)],l+=r[1][Math.floor((a-3)%300/30)],l+=r[2][Math.floor((a-3)%3e3/300)];var u=`MC-`;return a/=1e3,u+=r[0][Math.floor((a-3)%30/3)],u+=r[1][Math.floor((a-3)%300/30)],u+=r[2][Math.floor((a-3)%3e3/300)],`${(10**(e%3)).toFixed(t)}${u}${l}${c}`}var nS=function(e){wa(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t.prototype,`name`,{get:function(){return`Stacked Mixed Scientific`},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`isSlog`,{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.formatLDecimal=function(e,t){if(e.isNan())return`NaN`;if(!e.isFinite)return`${e.sign===-1?`-`:``}Infinity`;if(e.layer<=4){var n=``;return n+=`e`.repeat(e.layer-1),e.mag>=1e9?(n+=`e`,`${n}${tS(Math.log10(e.mag),t)}`):`${n}${tS(e.mag,t)}`}var r=e.layer-2,i=``;return e.mag>=1e9?(r+=1,i=`${tS(Math.log10(e.mag),t)}`):i=`${tS(e.mag,t)}`,`[e^${r}]e${i}`},t}(Fx);const rS=function(){let e=Ea,t=e=>{let t=new e;return t.setAsCurrent=()=>{player.options.notation=t.name,ui.notationName=t.name},t},n=e=>(e.isPainful=!0,e);return{scientific:t(e.ScientificNotation),engineering:t(e.EngineeringNotation),letters:t(e.LettersNotation),standard:n(t(e.StandardNotation)),emoji:n(t(e.EmojiNotation)),mixedScientific:t(e.MixedScientificNotation),mixedEngineering:t(e.MixedEngineeringNotation),logarithm:t(e.LogarithmNotation),brackets:n(t(e.BracketsNotation)),infinity:t(e.InfinityNotation),roman:n(t(e.RomanNotation)),dots:n(t(e.DotsNotation)),zalgo:n(t(e.ZalgoNotation)),hex:n(t(e.HexNotation)),imperial:n(t(e.ImperialNotation)),clock:n(t(e.ClockNotation)),prime:n(t(e.PrimeNotation)),bar:n(t(e.BarNotation)),shi:n(t(e.ShiNotation)),blind:n(t(e.BlindNotation)),blobs:n(t(e.BlobsNotation)),all:n(t(e.AllNotation))}}(),iS=function(){let e=Px,t=e=>{let t=new e;return t.setAsCurrent=()=>{player.options.lnotation=t.name,ui.lnotationName=t.name},t};return{extendedScientific:t(e.ExtendedScientificNotation),stackedScientific:t(e.StackedScientificNotation),semiStackedScientific:t(e.SemiStackedScientificNotation),entendedLogarithm:t(e.ExtendedLogarithmNotation),tetrational:t(e.TetrationalNotation),trueTetrational:t(e.TrueTetrationalNotation)}}();rS.emoji.setAsCurrent=(e=!1)=>{player.options.notation=rS.emoji.name,ui.notationName=rS.emoji.name,e||GameUI.notify.success(`😂😂😂`)};const aS={all:[iS.extendedScientific,iS.stackedScientific,iS.semiStackedScientific,iS.entendedLogarithm,iS.tetrational,iS.trueTetrational],find:e=>{let t=aS.all.find(t=>t.name===e);return t===void 0?iS.extendedScientific:t},get current(){return GameUI.initialized?ui.lnotation:iS.extendedScientific}},oS={all:[rS.scientific,rS.engineering,rS.letters,rS.standard,rS.emoji,rS.mixedScientific,rS.mixedEngineering,rS.logarithm,rS.brackets,rS.infinity,rS.roman,rS.dots,rS.zalgo,rS.hex,rS.imperial,rS.clock,rS.prime,rS.bar,rS.shi,rS.blind,rS.blobs,rS.all],find:e=>{let t=oS.all.find(t=>t.name===e);return t===void 0?rS.mixedScientific:t},get current(){return GameUI.initialized?ui.notation:rS.mixedScientific}};Da.isInfinite=e=>ui.formatPreBreak&&e.gte(o.NUMMAX),EventHub.logic.on(GAME_EVENT.GAME_TICK_AFTER,()=>{ui.formatPreBreak=!PlayerProgress.hasBroken()||NormalChallenge.isRunning&&!Enslaved.isRunning});const sS={DIM1:0,DIM2:1,TICKSPEED:2,DIMBOOST:3,GALAXY:4,AUTOMATOR:5};var cS=[{id:sS.DIM1,condition:()=>!0},{id:sS.DIM2,condition:()=>Currency.antimatter.gte(100)},{id:sS.TICKSPEED,condition:()=>AntimatterDimension(2).bought.gt(0)},{id:sS.DIMBOOST,condition:()=>AntimatterDimension(4).amount.gte(20)},{id:sS.GALAXY,condition:()=>AntimatterDimension(8).amount.gte(80)},{id:sS.AUTOMATOR,condition:()=>Player.automatorUnlocked}];const lS={isActive(e){return player.records.fullGameCompletions===0&&ui.view.tutorialState===e&&ui.view.tutorialActive},emphasizeH2P(){let e=player.tutorialState>sS.DIMBOOST||player.dimensionBoosts.gt(0);return player.records.fullGameCompletions===0&&!e},turnOffEffect(e){e===player.tutorialState&&(player.tutorialActive=!1,ui.view.tutorialActive=!1,this.tutorialLoop())},moveOn(e){e===player.tutorialState&&(player.tutorialState++,ui.view.tutorialState++,player.tutorialActive=!0,ui.view.tutorialActive=!0)},tutorialLoop(){let e=cS.find(e=>e.id===player.tutorialState+1);e&&e.condition()&&this.moveOn(player.tutorialState)}},uS={startNewGame(){GameEnd.creditsClosed=!1,GameEnd.creditsEverClosed=!1,player.isGameEnd=!1,player.celestials.pelle.doomed=!1;let e=player.speedrun;if(e.isActive){player.speedrun.previousRuns[player.records.fullGameCompletions+1]={isSegmented:e.isSegmented,usedSTD:e.usedSTD,startDate:e.startDate,name:e.name,offlineTimeUsed:e.offlineTimeUsed,records:[...e.records],achievementTimes:structuredClone(e.achievementTimes),seedSelection:e.seedSelection,initialSeed:e.initialSeed};let t=Object.keys(e.previousRuns).map(Number);t.length>100&&(player.speedrun.previousRuns[t.min()]=void 0)}player.records.fullGameCompletions++,GlyphAppearanceHandler.unlockSet(),this.restartWithCarryover(),GameEnd.removeAdditionalEnd=!0,GameEnd.additionalEnd=15,setTimeout(()=>GameStorage.save(),1e4)},restartWithCarryover(){let e=JSON.stringify(player.options),t=structuredClone(player.secretUnlocks),n=JSON.stringify(player.secretAchievementBits),r=JSON.stringify(player.reality.automator.constants),i=JSON.stringify(player.reality.automator.constantSortOrder),a=JSON.stringify(player.reality.automator.scripts),o=player.records.fullGameCompletions,s=player.records.previousRunRealTime.add(player.records.realTimePlayed),c=JSON.stringify(player.reality.glyphs.cosmetics),l=JSON.stringify(player.speedrun.previousRuns),u=player.speedrun.isUnlocked,d=JSON.stringify(player.timestudy.presets),f=JSON.stringify(Glyphs.allGlyphs.filter(e=>e.type===`companion`));Modal.hideAll(),Quote.clearAll(),GameStorage.hardReset(),player.options=JSON.parse(e),player.options.confirmations.glyphSelection=!0,player.secretUnlocks=t,player.secretAchievementBits=JSON.parse(n),player.reality.automator.constants=JSON.parse(r),player.reality.automator.constantSortOrder=JSON.parse(i),player.reality.automator.scripts=JSON.parse(a),player.records.fullGameCompletions=o,player.records.previousRunRealTime=s,ui.view.newUI=player.options.newUI,ui.view.news=player.options.news.enabled,player.reality.glyphs.cosmetics=JSON.parse(c),player.speedrun.previousRuns=JSON.parse(l),player.speedrun.isUnlocked=u,Themes.find(Theme.currentName()).set(),player.timestudy.presets=JSON.parse(d),JSON.parse(f).forEach(e=>{Glyphs.addToInventory(e)}),Notations.all.find(e=>e.name===player.options.notation).setAsCurrent(),Da.exponentCommas.min=10**player.options.notationDigits.comma,Da.exponentCommas.max=10**player.options.notationDigits.notation,player.lastUpdate=Date.now()}},dS={addToQueue(e){ui.view.quotes.queue.push(e),ui.view.quotes.current||this.advanceQueue()},advanceQueue(){ui.view.quotes.current=ui.view.quotes.queue.shift()},showHistory(e){ui.view.quotes.history=e},clearQueue(){ui.view.quotes.queue=[],ui.view.quotes.current=void 0},clearHistory(){ui.view.quotes.history=void 0},clearAll(){this.clearQueue(),this.clearHistory()},get isOpen(){return ui.view.quotes.current!==void 0},get isHistoryOpen(){return ui.view.quotes.history!==void 0}};function fS(e){let t=e.map(e=>e[1]).nSum(),n=Date.now()/1e3%t,r=e[0][1]/2,i=0;for(let t=0;t<e.length;t++){let a=e[(t+e.length-1)%e.length],o=e[t],s=e[(t+1)%e.length],c=n-i,l=c-o[1];if(l>0){i+=o[1];continue}if(c<=r){let e=.5*c/r;return[[a[0],.5-e],[o[0],.5+e]]}if(-l<=r){let e=.5*l/r;return[[o[0],.5-e],[s[0],.5+e]]}return[[o[0],1]]}throw Error(`Could not blend celestial fractions in Quote modal`)}var pS=class{constructor(e,t){this._parent=t,this._showCelestialName=e.showCelestialName??!0,this._celestialArray=e.background?()=>fS(e.background):[[t.celestial,1]];let n=/\$(\d+)/gu;this._line=typeof e==`string`?e:()=>e.text.replaceAll(n,(t,n)=>I.wordCycle(e[n]))}get line(){return typeof this._line==`function`?this._line():this._line}get celestials(){return typeof this._celestialArray==`function`?this._celestialArray():this._celestialArray}get celestialSymbols(){return this.celestials.map(e=>Celestials[e[0]].symbol)}get showCelestialName(){return this._showCelestialName}get celestialName(){return Celestials[this._parent.celestial].displayName}},mS=class extends at{constructor(e,t){super(e),this._celestial=t,this._lines=e.lines.map(e=>new pS(e,this))}get bits(){return player.celestials[this._celestial].quoteBits}set bits(e){player.celestials[this._celestial].quoteBits=e}get requirement(){return this.config.requirement?.()}get celestial(){return this._celestial}line(e){return this._lines[e]}get totalLines(){return this._lines.length}show(){this.unlock()}onUnlock(){this.present()}present(){dS.addToQueue(this)}};const hS={teresa:mapGameDataToObject(GameDatabase.celestials.quotes.teresa,e=>new mS(e,`teresa`)),effarig:mapGameDataToObject(GameDatabase.celestials.quotes.effarig,e=>new mS(e,`effarig`)),enslaved:mapGameDataToObject(GameDatabase.celestials.quotes.enslaved,e=>new mS(e,`enslaved`)),v:mapGameDataToObject(GameDatabase.celestials.quotes.v,e=>new mS(e,`v`)),ra:mapGameDataToObject(GameDatabase.celestials.quotes.ra,e=>new mS(e,`ra`)),laitela:mapGameDataToObject(GameDatabase.celestials.quotes.laitela,e=>new mS(e,`laitela`)),pelle:mapGameDataToObject(GameDatabase.celestials.quotes.pelle,e=>new mS(e,`pelle`))},gS={timePoured:0,lastUnlock:`effarig`,pouredAmountCap:1e24,displayName:`Teresa`,possessiveName:`Teresa's`,get isUnlocked(){return Achievement(147).isUnlocked},pourRM(e){if(this.pouredAmount>=gS.pouredAmountCap)return;this.timePoured+=e;let t=Currency.realityMachines.value.max(1e100),n=Math.min((this.pouredAmount+1e6)*.01*this.timePoured**2,t.toNumber());this.pouredAmount+=Math.min(n,gS.pouredAmountCap-this.pouredAmount),Currency.realityMachines.subtract(n),this.checkForUnlocks()},checkForUnlocks(){for(let e of yS.all)e.unlock()},initializeRun(){clearCelestialRuns(),player.celestials.teresa.run=!0},rewardMultiplier(e){return Decimal.max(Decimal.pow(e.plus(1).log10().div(15e7),12),1)},get pouredAmount(){return player.celestials.teresa.pouredAmount},set pouredAmount(e){player.celestials.teresa.pouredAmount=e},get fill(){return Math.min(Math.log10(this.pouredAmount)/24,1)},get possibleFill(){return Decimal.min(Currency.realityMachines.value.plus(this.pouredAmount).max(1).log10().div(24),1).toNumber()},get rmMultiplier(){return Decimal.max(250*(this.pouredAmount/1e24)**.1,1)},get runRewardMultiplier(){return this.rewardMultiplier(player.celestials.teresa.bestRunAM)},get isRunning(){return player.celestials.teresa.run},get runCompleted(){return player.celestials.teresa.bestRunAM.gt(1)},quotes:hS.teresa,symbol:`Ϟ`,reset(){player.celestials.teresa.pouredAmount=0,player.celestials.teresa.unlockBits=0,player.celestials.teresa.run=!1,player.celestials.teresa.bestRunAM=o.D1,player.celestials.teresa.bestAMSet=[],player.celestials.teresa.perkShop=[o.D0,o.D0,o.D0,o.D0,o.D0,o.D0],player.celestials.teresa.lastRepeatedMachines=o.D0,player.celestials.teresa.lastRepeatediM=o.D0}};var _S=class extends lt{constructor(e){super(e),this.costCap=e.costCap}get currency(){return Currency.perkPoints}get boughtAmount(){return player.celestials.teresa.perkShop[this.id]}set boughtAmount(e){player.celestials.teresa.perkShop[this.id]=e}get isCapped(){return Decimal.gte(this.cost,this.costCap())}get isAvailableForPurchase(){let e=this.config.otherReq?this.config.otherReq():!0;return this.currency.value.gte(this.cost)&&e}onPurchased(){if(this.id===0&&GameCache.staticGlyphWeights.invalidate(),this.id===1&&Autobuyer.reality.bumpAmount(2),this.id===4&&!Pelle.isDoomed&&(GameCache.glyphInventorySpace.value===0?(Currency.perkPoints.add(1),GameUI.notify.error(`You have no empty inventory space!`)):(Glyphs.addToInventory(GlyphGenerator.musicGlyph()),GameUI.notify.success(`Created a Music Glyph`))),this.id===5&&!Pelle.isDoomed){let e=GameCache.glyphInventorySpace.value;for(let t=0;t<e;t++)Glyphs.addToInventory(GlyphGenerator.musicGlyph());GameUI.notify.success(`Created ${quantifyInt(`Music Glyph`,e)}`)}}},vS=class extends at{get bits(){return player.celestials.teresa.unlockBits}set bits(e){player.celestials.teresa.unlockBits=e}get price(){return this.config.price}get pelleDisabled(){return Pelle.isDoomed&&this.config.isDisabledInDoomed}get isEffectActive(){return!this.pelleDisabled}get canBeUnlocked(){return!this.isUnlocked&&gS.pouredAmount>=this.price}get description(){return typeof this.config.description==`function`?this.config.description():this.config.description}onUnlock(){this.config.onUnlock?.()}};const yS=mapGameDataToObject(A.celestials.teresa.unlocks,e=>new vS(e)),bS=mapGameDataToObject(A.celestials.perkShop,e=>new _S(e));EventHub.logic.on(GAME_EVENT.TAB_CHANGED,()=>{Tab.celestials.teresa.isOpen&&gS.quotes.initial.show()}),EventHub.logic.on(GAME_EVENT.GAME_LOAD,()=>gS.checkForUnlocks());const xS={INFINITY:1,ETERNITY:2,REALITY:3,COMPLETED:4},SS={displayName:`Effarig`,possessiveName:`Effarig's`,initializeRun(){clearCelestialRuns(),player.celestials.effarig.run=!0,recalculateAllGlyphs(),Tab.reality.glyphs.show(!1)},get isRunning(){return player.celestials.effarig.run},get currentStage(){return wS.infinity.isUnlocked?wS.eternity.isUnlocked?wS.reality.isUnlocked?xS.COMPLETED:xS.REALITY:xS.ETERNITY:xS.INFINITY},get currentStageName(){switch(this.currentStage){case xS.INFINITY:return`Infinity`;case xS.ETERNITY:return`Eternity`;case xS.REALITY:default:return`Reality`}},get eternityCap(){return this.isRunning&&this.currentStage===xS.ETERNITY?o.E50:void 0},get glyphLevelCap(){switch(this.currentStage){case xS.INFINITY:return new Decimal(o.E2);case xS.ETERNITY:return new Decimal(1500);case xS.REALITY:default:return new Decimal(2e3)}},get shardsGained(){return TeresaUnlocks.effarig.canBeApplied?Decimal.floor(Decimal.pow(Currency.eternityPoints.value.add(1).log10().div(7500),getActiveGlyphEffects().length)).times(AlchemyResource.effarig.effectValue):o.D0},get maxRarityBoost(){return Decimal.log10(Decimal.log10(Currency.relicShards.value.add(10))).times(5)},nerfFactor(e){let t;switch(this.currentStage){case xS.INFINITY:t=1500;break;case xS.ETERNITY:t=29.29;break;case xS.REALITY:default:t=25;break}return o.D1.sub(new Decimal(t).div(Decimal.sqrt(e.add(1).absLog10()).add(t))).times(3)},get tickDilation(){return this.nerfFactor(Currency.timeShards.value).div(10).add(.7)},get multDilation(){return this.nerfFactor(Currency.infinityPower.value).div(4).add(.25)},get tickspeed(){let e=Tickspeed.baseValue.reciprocal().log10().add(3);return Decimal.pow10(Decimal.pow(e,this.tickDilation)).reciprocal()},multiplier(e){let t=new Decimal(e).add(1).absLog10();return Decimal.pow10(Decimal.pow(t,this.multDilation))},get bonusRG(){return Decimal.floor(replicantiCap().max(1).log10().div(LOG10_MAX_VALUE).sub(1))},quotes:hS.effarig,symbol:`Ϙ`,reset(){player.celestials.effarig.relicShards=o.D0,player.celestials.effarig.unlockBits=0,player.celestials.effarig.run=!1,player.celestials.effarig.glyphWeights.ep=25,player.celestials.effarig.glyphWeights.repl=25,player.celestials.effarig.glyphWeights.dt=25,player.celestials.effarig.glyphWeights.eternities=25,player.celestials.effarig.autoAdjustGlyphWeights=!1}};var CS=class extends at{get bits(){return player.celestials.effarig.unlockBits}set bits(e){player.celestials.effarig.unlockBits=e}get cost(){return this.config.cost}get isEffectActive(){return!Pelle.isDisabled(`effarig`)}purchase(){this.isUnlocked||!Currency.relicShards.purchase(this.cost)||(this.unlock(),this.config.onPurchased?.())}};const wS=mapGameDataToObject(A.celestials.effarig.unlocks,e=>new CS(e));EventHub.logic.on(GAME_EVENT.TAB_CHANGED,()=>{Tab.celestials.effarig.isOpen&&SS.quotes.initial.show()}),EventHub.logic.on(GAME_EVENT.BIG_CRUNCH_BEFORE,()=>{SS.isRunning&&SS.quotes.completeInfinity.show()}),EventHub.logic.on(GAME_EVENT.ETERNITY_RESET_BEFORE,()=>{SS.isRunning&&SS.quotes.completeEternity.show()});const TS={FREE_TICKSPEED_SOFTCAP:{id:0,price:TimeSpan.fromYears(new Decimal(1e35)).totalMilliseconds,secondaryRequirement:()=>!0,description:()=>`Increase the softcap to Tickspeed upgrades from Time Dimensions by ${formatInt(1e5)}`},RUN:{id:1,price:TimeSpan.fromYears(new Decimal(1e40)).totalMilliseconds,secondaryRequirement(){let e=player.records.bestReality.glyphLevel.gte(5e3),t=strengthToRarity(player.records.bestReality.glyphStrength).gte(100);return e&&t},description(){let e=player.records.bestReality.glyphLevel.gte(5e3),t=strengthToRarity(player.records.bestReality.glyphStrength).gte(100);return`Unlock The Nameless Ones' Reality (requires ${e?`[✓]`:`[✗]`} a level
      ${formatInt(5e3)} Glyph and ${t?`[✓]`:`[✗]`} a ${formatRarity(new Decimal(100))} rarity Glyph)`}}},ES={displayName:`The Nameless Ones`,possessiveName:`The Nameless Ones'`,boostReality:!1,BROKEN_CHALLENGES:[2,3,4,5,7,8,10,11,12],nextTickDiff:new Decimal(50),isReleaseTick:!1,autoReleaseTick:0,autoReleaseSpeed:0,timeCap:o.BEMAX,glyphLevelMin:5e3,currentBlackHoleStoreAmountPerMs:o.D0,tachyonNerf:.3,toggleStoreBlackHole(){this.canModifyGameTimeStorage&&(player.celestials.enslaved.isStoring=!player.celestials.enslaved.isStoring,player.celestials.enslaved.isStoringReal=!1)},toggleStoreReal(){!this.canModifyRealTimeStorage&&!this.isStoredRealTimeCapped||(player.celestials.enslaved.isStoringReal=!player.celestials.enslaved.isStoringReal,player.celestials.enslaved.isStoring=!1)},toggleAutoStoreReal(){this.canModifyRealTimeStorage&&(player.celestials.enslaved.autoStoreReal=!player.celestials.enslaved.autoStoreReal)},get canModifyGameTimeStorage(){return ES.isUnlocked&&!Pelle.isDoomed&&!BlackHoles.arePaused&&!EternityChallenge(12).isRunning&&!ES.isRunning&&!Laitela.isRunning},get canModifyRealTimeStorage(){return ES.isUnlocked&&!Pelle.isDoomed},get isStoredRealTimeCapped(){return player.celestials.enslaved.storedReal<this.storedRealTimeCap},get isStoringGameTime(){return this.canModifyGameTimeStorage&&(this.isAutoReleasing||player.celestials.enslaved.isStoring)},get isStoringRealTime(){return this.canModifyRealTimeStorage&&player.celestials.enslaved.isStoringReal},get storedRealTimeEfficiency(){return .7},get storedRealTimeCap(){let e=Ra.unlocks.improvedStoredTime.effects.realTimeCap.effectOrDefault(0);return new Decimal(3600*1e3*8).add(e)},get isAutoReleasing(){return player.celestials.enslaved.isAutoReleasing&&!BlackHoles.areNegative&&!Pelle.isDisabled(`blackhole`)},storeRealTime(e){if(Pelle.isDoomed)return;let t=Date.now(),n=e===void 0?Decimal.max(t-player.lastUpdate,0):e,r=this.storedRealTimeEfficiency,i=this.storedRealTimeCap;player.celestials.enslaved.storedReal=player.celestials.enslaved.storedReal.add(n.mul(r)),player.celestials.enslaved.storedReal.gt(i)&&(player.celestials.enslaved.isStoringReal=!1,player.celestials.enslaved.storedReal=i),player.celestials.enslaved.storedReal.gte(1440*60*1e3)&&SecretAchievement(46).unlock(),player.lastUpdate=t},autoStoreRealTime(e){let t=this.storedRealTimeCap-player.celestials.enslaved.storedReal,n=Math.min(e,Math.max(0,t/this.storedRealTimeEfficiency));return player.celestials.enslaved.storedReal+=n*this.storedRealTimeEfficiency,player.lastUpdate+=n,e-n},canRelease(e){return!ES.isStoringRealTime&&!EternityChallenge(12).isRunning&&!Laitela.isRunning&&!(ES.isRunning&&e)&&!Pelle.isDoomed},useStoredTime(e){if(!this.canRelease(e))return;let t=player.requirementChecks.reality.slowestBH.lte(1e-300);if(ImaginaryUpgrade(24).isLockingMechanics&&Ra.isRunning&&t){e||ImaginaryUpgrade(24).tryShowWarningModal(`discharge your Black Hole`);return}player.requirementChecks.reality.slowestBH=o.D1;let n=player.celestials.enslaved.stored;ES.isRunning&&(n=ES.storedTimeInsideEnslaved(n),Time.thisReality.totalYears.add(TimeSpan.fromMilliseconds(n).totalYears.gt(1))&&OS.storedTime.giveProgress()),e&&(n=n.mul(.01)),this.nextTickDiff=Decimal.clampMax(n,this.timeCap),this.isReleaseTick=!0;let r=n.div(50);player.celestials.ra.peakGamespeed=Decimal.max(player.celestials.ra.peakGamespeed,r),this.autoReleaseSpeed=n.div(player.options.updateRate).div(5),player.celestials.enslaved.stored=player.celestials.enslaved.stored.mul(e?.99:0)},has(e){return player.celestials.enslaved.unlocks.includes(e.id)},canBuy(e){return player.celestials.enslaved.stored.gte(e.price)&&e.secondaryRequirement()&&!this.has(e)},buyUnlock(e){return this.canBuy(e)?(e.id===TS.RUN.id&&this.quotes.unlockRun.show(),player.celestials.enslaved.stored=player.celestials.enslaved.stored.sub(e.price),player.celestials.enslaved.unlocks.push(e.id),!0):!1},initializeRun(){clearCelestialRuns(),player.celestials.enslaved.run=!0,player.celestials.enslaved.hasSecretStudy=!1,this.feltEternity=!1,AutomatorData.recalculateErrors(),AutomatorBackend.state.mode===AUTOMATOR_MODE.RUN&&AutomatorData.currentErrors().length>0&&(AutomatorBackend.stop(),GameUI.notify.error(`This Reality forbids Black Holes! (Automator stopped)`)),this.quotes.startRun.show()},get isRunning(){return player.celestials.enslaved.run},completeRun(){player.celestials.enslaved.completed=!0,this.quotes.completeReality.show()},get isCompleted(){return player.celestials.enslaved.completed},get canTickHintTimer(){return!OS.hintsUnlocked.hasProgress&&ES.has(TS.RUN)&&!ES.isCompleted},get isUnlocked(){return EffarigUnlock.eternity.isUnlocked},get realityBoostRatio(){return Decimal.max(1,Decimal.floor(player.celestials.enslaved.storedReal.div(Decimal.max(1e3,Time.thisRealityRealTime.totalMilliseconds))))},get canAmplify(){return this.realityBoostRatio.gt(1)&&!Pelle.isDoomed&&!isInCelestialReality()},storedTimeInsideEnslaved(e){return e.lte(1e3)?e:Decimal.pow(10,Decimal.pow(Decimal.log10(e.div(1e3)),.55)).times(1e3)},feelEternity(){this.feltEternity?Modal.message.show(`You have already exposed this crack in the Reality. Time in this Eternity is being multiplied
        by your Eternity count, up to a maximum of ${formatX(1e66)}.`,{closeEvent:GAME_EVENT.REALITY_RESET_AFTER},1):(OS.feelEternity.giveProgress(),this.feltEternity=!0,Modal.message.show(`Time in this Eternity will be multiplied by your Eternity count,
        up to a maximum of ${formatX(1e66)}.`,{closeEvent:GAME_EVENT.REALITY_RESET_AFTER},1))},get feltEternity(){return player.celestials.enslaved.feltEternity},set feltEternity(e){player.celestials.enslaved.feltEternity=e},get nextHintCost(){return TimeSpan.fromYears(new Decimal(1e40*3**this.hintCostIncreases)).totalMilliseconds},get hintCostIncreases(){let e=player.celestials.enslaved.zeroHintTime-Date.now();return Math.clampMin(e/TimeSpan.fromDays(new Decimal(1)).totalMilliseconds.toNumber(),0)},spendTimeForHint(){return player.celestials.enslaved.stored<this.nextHintCost?!1:(player.celestials.enslaved.stored-=this.nextHintCost,ES.hintCostIncreases===0?player.celestials.enslaved.zeroHintTime=Date.now()+TimeSpan.fromDays(1).totalMilliseconds.toNumber():player.celestials.enslaved.zeroHintTime+=TimeSpan.fromDays(1).totalMilliseconds.toNumber(),!0)},quotes:hS.enslaved,symbol:``,reset(){player.celestials.enslaved.isStoring=!1,player.celestials.enslaved.stored=o.D0,player.celestials.enslaved.isStoringReal=!1,player.celestials.enslaved.storedReal=o.D0,player.celestials.enslaved.autoStoreReal=!1,player.celestials.enslaved.isAutoReleasing=!1,player.celestials.enslaved.unlocks=[],player.celestials.enslaved.run=!1,player.celestials.enslaved.completed=!1,player.celestials.enslaved.tesseracts=o.D0,player.celestials.enslaved.hasSecretStudy=!1,player.celestials.enslaved.feltEternity=!1,player.celestials.enslaved.progressBits=0}};var DS=class extends at{get bits(){return player.celestials.enslaved.hintBits}set bits(e){player.celestials.enslaved.hintBits=e}get hasProgress(){return!!(player.celestials.enslaved.progressBits&1<<this.id)}get hasHint(){return this.hasProgress||this.isUnlocked}get hintInfo(){return this.config.hint}get completedInfo(){return typeof this.config.condition==`function`?this.config.condition():this.config.condition}giveProgress(){this.hasHint&&!this.hasProgress&&(player.celestials.enslaved.zeroHintTime-=Math.log(2)/Math.log(3)*TimeSpan.fromDays(1).totalMilliseconds.toNumber(),GameUI.notify.success(`You found a crack in The Nameless Ones' Reality!`,1e4)),player.celestials.enslaved.progressBits|=1<<this.id}};const OS=mapGameDataToObject(A.celestials.enslaved.progress,e=>new DS(e)),kS={get bought(){return player.celestials.enslaved.tesseracts},get extra(){return this.bought.times(o.DM1.add(SingularityMilestone.tesseractMultFromSingularities.effectOrDefault(1)))},get effectiveCount(){return this.bought.add(this.extra)},buyTesseract(){this.canBuyTesseract&&(GameEnd.creditsEverClosed||(player.celestials.enslaved.tesseracts=player.celestials.enslaved.tesseracts.add(1)))},costs(e){return e=e.add(1),e.lte(3)?Decimal.pow10(e.times(2e7)):Decimal.pow10(e.sub(3).factorial().times(Decimal.pow(2,e.sub(3))).times(6e7))},get nextCost(){return this.costs(this.bought)},get canBuyTesseract(){return ES.isCompleted&&Currency.infinityPoints.gte(kS.nextCost)},capIncrease(e=this.bought){let t=e.times(SingularityMilestone.tesseractMultFromSingularities.effectOrDefault(1));return(t.lt(1)?o.D0:Decimal.pow(2,t).times(25e4)).times(o.D1.add(AlchemyResource.boundless.effectValue))},get nextTesseractIncrease(){return this.capIncrease(this.bought.add(1)).sub(this.capIncrease(this.bought))}};EventHub.logic.on(GAME_EVENT.TAB_CHANGED,()=>{Tab.celestials.enslaved.isOpen&&ES.quotes.initial.show()});const AS={officialFixedSeed:69420,unlock(){player.speedrun.isUnlocked||(Modal.message.show(`You have unlocked Speedrun Mode! This allows you to start a new save file with some slight
      changes which can be helpful if you're trying to complete the game as quickly as possible. The option to
      start a Speedrun Save is now available in the Options tab, under Saving. Choosing to start a Speedrun Save
      will provide you with another modal with more in-depth information.`,{},3),player.speedrun.isUnlocked=!0)},canModifySeed(){return player.realities.lt(1)},modifySeed(e,t){player.speedrun.seedSelection=e;let n;switch(e){case SPEEDRUN_SEED_STATE.FIXED:player.reality.initialSeed=this.officialFixedSeed,player.speedrun.initialSeed=this.officialFixedSeed;return;case SPEEDRUN_SEED_STATE.RANDOM:n=Math.floor(0x9184e72a000*Math.random()),player.reality.initialSeed=n,player.speedrun.initialSeed=n;return;case SPEEDRUN_SEED_STATE.PLAYER:player.reality.initialSeed=t,player.speedrun.initialSeed=t;return;default:throw Error(`Unrecognized speedrun seed setting option`)}},seedModeText(e){let t=e??player.speedrun;switch(t.seedSelection){case SPEEDRUN_SEED_STATE.UNKNOWN:return`No seed data (old save)`;case SPEEDRUN_SEED_STATE.FIXED:return`Official fixed seed (${t.initialSeed})`;case SPEEDRUN_SEED_STATE.RANDOM:return`Random seed (${t.initialSeed})`;case SPEEDRUN_SEED_STATE.PLAYER:return`Player seed (${t.initialSeed})`;default:throw Error(`Unrecognized speedrun seed option in seedModeText`)}},generateName(e){if(e.trim()===``){let e=Math.floor(9999999*Math.random())+1;return`AD Player #${`0`.repeat(6-Math.floor(Math.log10(e)))}${e}`}return e.length>40?`${e.slice(0,37)}...`:e},prepareSave(e){NG.restartWithCarryover(),player.speedrun.isUnlocked=!0,player.speedrun.isActive=!0,this.modifySeed(SPEEDRUN_SEED_STATE.FIXED),player.speedrun.name=e;for(let e of Object.keys(player.options.confirmations))player.options.confirmations[e]=!1;player.options.confirmations.glyphSelection=!0;for(let e of Object.keys(player.options.animations))typeof player.options.animations[e]==`boolean`&&(player.options.animations[e]=!1);Achievement(22).unlock(),Achievement(35).unlock(),Achievement(76).unlock(),player.speedrun.offlineTimeUsed=0,GameStorage.save()},startTimer(){player.speedrun.hasStarted||(player.speedrun.hasStarted=!0,player.speedrun.startDate=Date.now(),player.lastUpdate=Date.now())},isPausedAtStart(){return player.speedrun.isActive&&!player.speedrun.hasStarted},setSegmented(e){this.isPausedAtStart()||(player.speedrun.isSegmented=e)},mostRecentMilestone(){let e=player.speedrun.records.max();return e===0?0:player.speedrun.records.indexOf(e)}},jS=class extends it{constructor(e){super(e),this.registerEvents(e.checkEvent,e=>this.tryComplete(e))}get name(){return this.config.name}get isReached(){return player.speedrun.records[this.config.id]!==0}tryComplete(e){this.config.checkRequirement(e)&&this.complete()}complete(){this.isReached||!player.speedrun.isActive||(player.speedrun.records[this.config.id]=Math.round(player.records.trueTimePlayed),GameUI.notify.success(`Speedrun Milestone Reached: ${this.name}`))}}.createAccessor(A.speedrunMilestones);var MS=class extends it{get completions(){let e=player.celestials.v.runUnlocks[this.id];return e===void 0?0:e}get conditionBaseValue(){let e=this.config.values[this.completions];return e===void 0?this.config.values[this.completions-1]:e}get canBeReduced(){return this.completions<this.config.values.length&&this.completions!==0&&new Decimal(this.reduction).neq(this.config.maxShardReduction(this.conditionBaseValue))}get isReduced(){return player.celestials.v.goalReductionSteps[this.id]===0?!1:IS.shardReduction.canBeApplied&&this.reduction.gt(0)}get reductionCost(){let e=this.config.reductionStepSize?this.config.reductionStepSize:1;return this.config.isHard?(1.15**e-1)/.15*LS.nextHardReductionCost(player.celestials.v.goalReductionSteps[this.id]):e*LS.nextNormalReductionCost()}get tiersReduced(){return player.celestials.v.goalReductionSteps[this.id]/100}get reduction(){let e=this.conditionBaseValue;return Decimal.clamp(this.config.shardReduction(this.tiersReduced),0,this.config.maxShardReduction(e))}get conditionValue(){let e=this.conditionBaseValue;return this.isReduced&&(e=e instanceof Decimal?e.sub(this.reduction):Decimal.sub(e,this.reduction).toNumber()),e}get formattedDescription(){return this.config.description(this.conditionValue)}set completions(e){player.celestials.v.runUnlocks[this.id]=e}tryComplete(){let e=player.celestials.v,t=this.config.currentValue();for(this.config.condition()&&Decimal.gte(t,e.runRecords[this.id])&&(e.runRecords[this.id]=t,e.runGlyphs[this.id]=Glyphs.copyForRecords(Glyphs.active.filter(e=>e!==null)));this.completions<this.config.values.length&&Decimal.gte(e.runRecords[this.id],this.conditionValue);)if(!(!LS.isFlipped&&this.config.isHard)){this.completions++,GameUI.notify.success(`You have unlocked V-Achievement
        '${this.config.name}' tier ${formatInt(this.completions)}`),LS.updateTotalRunUnlocks();for(let e of LS.quotes.all)e.requirement&&e.show()}}},NS=class extends at{get bits(){return player.celestials.v.unlockBits}set bits(e){player.celestials.v.unlockBits=e}get pelleDisabled(){return Pelle.isDoomed&&this!==IS.vAchievementUnlock}get isEffectActive(){return this.isUnlocked&&!this.pelleDisabled}get description(){return typeof this.config.description==`function`?this.config.description():this.config.description}get rewardText(){return typeof this.config.reward==`function`?this.config.reward():this.config.reward}get canBeUnlocked(){return this.config.requirement()&&!this.isUnlocked}get formattedEffect(){return!this.config.effect||!this.config.format?``:this.config.format(this.effectValue)}onUnlock(){GameUI.notify.success(this.description)}};const PS=MS.createAccessor(A.celestials.v.runUnlocks),FS={all:PS.index.compact()},IS=mapGameDataToObject(A.celestials.v.unlocks,e=>new NS(e)),LS={displayName:`V`,possessiveName:`V's`,spaceTheorems:0,checkForUnlocks(){for(let e of IS.all){if(e===IS.vAchievementUnlock)continue;e.unlock()}if(this.isRunning){for(let e of FS.all)e.tryComplete();this.spaceTheorems>=36&&jS(22).tryComplete()}IS.raUnlock.canBeApplied&&!Ra.unlocks.autoTP.canBeApplied&&Ra.checkForUnlocks()},get canUnlockCelestial(){return IS.vAchievementUnlock.canBeUnlocked},unlockCelestial(){player.celestials.v.unlockBits|=1<<IS.vAchievementUnlock.id,GameUI.notify.success(`You have unlocked V, The Celestial Of Achievements!`,1e4),LS.quotes.unlock.show()},initializeRun(){clearCelestialRuns(),player.celestials.v.run=!0,this.quotes.realityEnter.show()},updateTotalRunUnlocks(){let e=0;for(let t=0;t<player.celestials.v.runUnlocks.length;t++)t<6?e+=player.celestials.v.runUnlocks[t]:e+=player.celestials.v.runUnlocks[t]*2;this.spaceTheorems=e},reset(){player.celestials.v={unlockBits:0,run:!1,quotes:[],runUnlocks:[0,0,0,0,0,0,0,0,0],goalReductionSteps:[0,0,0,0,0,0,0,0,0],STSpent:0,runGlyphs:[[],[],[],[],[],[],[],[],[]],runRecords:[-10,DC.D0,DC.D0,DC.D0,DC.D0,DC.D0,0,DC.D0,DC.D0]},this.spaceTheorems=0},get availableST(){return LS.spaceTheorems-player.celestials.v.STSpent},get isRunning(){return player.celestials.v.run},get isFlipped(){return Ra.unlocks.unlockHardV.isUnlocked},get isFullyCompleted(){return this.spaceTheorems>=66},nextNormalReductionCost(){return 1e3},nextHardReductionCost(e){return 1e3*1.15**e},quotes:hS.v,symbol:`⌬`};EventHub.logic.on(GAME_EVENT.TAB_CHANGED,()=>{Tab.celestials.v.isOpen&&LS.quotes.initial.show()});var RS=class extends it{get bits(){return player.celestials.ra.unlockBits}set bits(e){player.celestials.ra.unlockBits=e}get isUnlocked(){return player.celestials.ra.unlocks.includes(this.id)}get disabledByPelle(){return Pelle.isDoomed&&this.config.disabledByPelle}get isEffectActive(){return this.isUnlocked&&!this.disabledByPelle}get requirementText(){let e=this.pet.name;return this.level===1?`Unlock ${e}`:`Get ${e} to level ${this.level}`}get reward(){return typeof this.config.reward==`function`?this.config.reward():this.config.reward}get displayIcon(){return this.disabledByPelle?`<span class="fas fa-ban"></span>`:this.config.displayIcon}get pet(){return HS.pets[this.config.pet]}get level(){return this.config.level}get canBeUnlocked(){return this.pet.level>=this.level&&!this.isUnlocked}unlock(){this.canBeUnlocked&&player.celestials.ra.unlocks.push(this.id)}onUnlock(){player.celestials.ra.unlocks.push(this.id),this.config.onUnlock?.()}},zS=mapGameDataToObject(GameDatabase.celestials.ra.unlocks,e=>new RS(e)),BS=class extends it{get data(){return player.celestials.ra.pets[this.id]}get name(){return this.config.name}get chunkGain(){return this.config.chunkGain}get memoryGain(){return this.config.memoryGain}get color(){return this.config.color}get requiredUnlock(){return this.config.requiredUnlock?.()}get rawMemoryChunksPerSecond(){return this.config.rawMemoryChunksPerSecond()}get memoryProductionMultiplier(){return this.config.memoryProductionMultiplier()}get isUnlocked(){return this.requiredUnlock===void 0||this.requiredUnlock.isUnlocked}get isCapped(){return this.level>=HS.levelCap}get level(){return this.isUnlocked?this.data.level:0}set level(e){this.data.level=e}get memories(){return this.data.memories}set memories(e){this.data.memories=e}get memoryChunks(){return this.data.memoryChunks}set memoryChunks(e){this.data.memoryChunks=e}get requiredMemories(){return HS.requiredMemoriesForLevel(this.level)}get memoryChunksPerSecond(){if(!this.canGetMemoryChunks)return o.D0;let e=this.rawMemoryChunksPerSecond.mul(this.chunkUpgradeCurrentMult).mul(Effects.product(HS.unlocks.continuousTTBoost.effects.memoryChunks)).mul(GlyphInfo.reality.sacrificeInfo.effect());return this.hasRemembrance?e=e.mul(HS.remembrance.multiplier):HS.petWithRemembrance&&(e=e.mul(HS.remembrance.nerf)),e}get canGetMemoryChunks(){return this.isUnlocked&&HS.isRunning}get hasRemembrance(){return HS.petWithRemembrance===this.name}get memoryUpgradeCurrentMult(){return Decimal.pow(1.3,this.data.memoryUpgrades)}get chunkUpgradeCurrentMult(){return Decimal.pow(1.5,this.data.chunkUpgrades)}get memoryUpgradeCost(){return Decimal.pow(5,this.data.memoryUpgrades).mul(o.E3)}get chunkUpgradeCost(){return Decimal.pow(25,this.data.chunkUpgrades).mul(5e3)}get canBuyMemoryUpgrade(){return this.memoryUpgradeCost.lte(this.memories)}get canBuyChunkUpgrade(){return this.chunkUpgradeCost.lte(this.memories)}get memoryUpgradeCapped(){return this.memoryUpgradeCost.gte(HS.requiredMemoriesForLevel(HS.levelCap-1).div(2))}get chunkUpgradeCapped(){return this.chunkUpgradeCost.gte(HS.requiredMemoriesForLevel(HS.levelCap-1).div(2))}purchaseMemoryUpgrade(){!this.canBuyMemoryUpgrade||this.memoryUpgradeCapped||(this.memories=this.memories.sub(this.memoryUpgradeCost),this.data.memoryUpgrades++)}purchaseChunkUpgrade(){!this.canBuyChunkUpgrade||this.chunkUpgradeCapped||(this.memories=this.memories.sub(this.chunkUpgradeCost),this.data.chunkUpgrades++)}levelUp(){this.memories.lt(this.requiredMemories)||(this.memories=this.memories.sub(this.requiredMemories),this.level++,HS.checkForUnlocks())}get unlocks(){return HS.unlocks.all.filter(e=>e.pet===this).sort((e,t)=>e.level-t.level)}tick(e,t){let n=e.div(1e3),r=t?n.mul(this.memoryChunksPerSecond):0,i=n.mul(this.memoryChunks.add(r.div(2))).mul(HS.productionPerMemoryChunk).mul(this.memoryUpgradeCurrentMult);this.memoryChunks=this.memoryChunks.add(r),this.memories=this.memories.add(i)}reset(){this.data.level=1,this.data.memories=o.D0,this.data.memoryChunks=o.D0,this.data.memoryUpgrades=0,this.data.chunkUpgrades=0}},VS=mapGameDataToObject(GameDatabase.celestials.ra.pets,e=>new BS(e));const HS={displayName:`Ra`,possessiveName:`Ra's`,unlocks:zS,pets:VS,remembrance:{multiplier:5,nerf:.5,requiredLevels:20,get isUnlocked(){return HS.totalPetLevel>=this.requiredLevels}},reset(){let e=player.celestials.ra;e.unlockBits=0,e.run=!1,e.charged=new Set,e.disCharge=!1,e.peakGamespeed=o.D1;for(let e of HS.pets.all)e.reset()},memoryTick(e,t){if(this.isUnlocked)for(let n of HS.pets.all)n.tick(e,t)},get productionPerMemoryChunk(){let e=Effects.product(HS.unlocks.continuousTTBoost.effects.memories,Achievement(168));for(let t of HS.pets.all)t.isUnlocked&&(e=e.mul(t.memoryProductionMultiplier));return e},get memoryBoostResources(){let e=[];for(let t of HS.pets.all)new Decimal(t.memoryProductionMultiplier).neq(1)&&e.push(t.memoryGain);return Achievement(168).isUnlocked&&e.push(`Achievement 168`),HS.unlocks.continuousTTBoost.canBeApplied&&e.push(`current TT`),e.length===1?`${e[0]}`:e.length===2?`${e[0]} and ${e[1]}`:`${e.slice(0,-1).join(`, `)}, and ${e[e.length-1]}`},requiredMemoriesForLevel(e){if(e>=HS.levelCap)return o.BEMAX;let t=Decimal.pow(e,2).div(10).add(e),n=Decimal.pow(1.5,Decimal.max(0,e-15));return Decimal.floor(Decimal.pow(t,5.52).mul(n).mul(o.E6))},timeToGoalString(e,t){let n=Enslaved.isStoringRealTime?o.D0:HS.productionPerMemoryChunk.mul(e.memoryUpgradeCurrentMult).mul(e.memoryChunksPerSecond).div(2),r=HS.productionPerMemoryChunk.mul(e.memoryUpgradeCurrentMult).mul(e.memoryChunks),i=t.neg(),a=n===0?i.neg().div(r):decimalQuadraticSolution(n,r,i);return Number.isFinite(a)?`in ${TimeSpan.fromSeconds(new Decimal(a)).toStringShort()}`:``},get totalPetLevel(){return this.pets.all.map(e=>e.isUnlocked?e.level:0).nSum()},get levelCap(){return 25},get maxTotalPetLevel(){return this.levelCap*this.pets.all.length},checkForUnlocks(){if(VUnlocks.raUnlock.canBeApplied){for(let e of HS.unlocks.all)e.unlock();HS.checkForQuotes()}},checkForQuotes(){for(let e of HS.quotes.all)e.requirement&&e.show()},initializeRun(){clearCelestialRuns(),player.celestials.ra.run=!0,this.quotes.realityEnter.show()},toggleMode(){player.celestials.ra.activeMode=!player.celestials.ra.activeMode},theoremBoostFactor(){return Decimal.min(10,Decimal.max(0,Currency.timeTheorems.value.add(1).log10().sub(350)).div(50))},get isUnlocked(){return V.spaceTheorems>=36},get isRunning(){return player.celestials.ra.run},get totalCharges(){return HS.unlocks.chargedInfinityUpgrades.effectOrDefault(0)},get chargesLeft(){return this.totalCharges-player.celestials.ra.charged.size},get canBuyTriad(){return HS.unlocks.unlockHardV.canBeApplied},get petWithRemembrance(){return player.celestials.ra.petWithRemembrance},set petWithRemembrance(e){player.celestials.ra.petWithRemembrance=e},updateAlchemyFlow(e){let t=o.E3.div(e);for(let e of AlchemyResources.all)e.ema.addValue(e.amount.sub(e.before).mul(t)),e.before=e.amount},applyAlchemyReactions(e){if(!HS.unlocks.effarigUnlock.canBeApplied)return;let t=AlchemyReactions.all.compact().sort((e,t)=>Decimal.compare(t.priority,e.priority));for(let e of t)e.combineReagents();this.updateAlchemyFlow(e)},get alchemyResourceCap(){return 25e3},get momentumValue(){let e=TimeSpan.fromMilliseconds(player.celestials.ra.momentumTime).totalHours;return Decimal.min(e.times(.005).add(1),AlchemyResource.momentum.effectValue)},quotes:hS.ra,symbol:`<i class='fas fa-sun'></i>`},US={get additionThreshold(){return 1e36},get empowermentThreshold(){return 1e43},get boostingThreshold(){return 1e60},getSacrificePower(e){if(Pelle.isDisabled(`alteration`))return o.D0;let t=player.reality.glyphs.sac[e];if(t===void 0)throw Error(`Unknown sacrifice type`);return t},get isUnlocked(){return Pelle.isDisabled(`alteration`)?!1:HS.unlocks.alteredGlyphs.canBeApplied},isAdded(e){return this.isUnlocked&&this.getSacrificePower(e).gte(this.additionThreshold)},isEmpowered(e){return this.isUnlocked&&this.getSacrificePower(e).gte(this.empowermentThreshold)},isBoosted(e){return this.isUnlocked&&this.getSacrificePower(e).gte(this.boostingThreshold)},sacrificeBoost(e){return this.getSacrificePower(e).clampMax(GlyphSacrificeHandler.maxSacrificeForEffects).div(this.boostingThreshold).clampMin(1).log10().div(2)},baseAdditionColor(e=Theme.current().isDark()){return e?`#CCCCCC`:`black`},baseEmpowermentColor(e=Theme.current().isDark()){return e?`#EEEE30`:`#C6C610`},baseBoostColor(e=Theme.current().isDark()){return e?`#60DDDD`:`#28BDBD`},getAdditionColor(e){let t=CosmeticGlyphTypes[e].currentColor.bg===`black`;return this.isAdded(e)?this.baseAdditionColor(t):void 0},getEmpowermentColor(e){let t=CosmeticGlyphTypes[e].currentColor.bg===`black`;return this.isEmpowered(e)?this.baseEmpowermentColor(t):void 0},getBoostColor(e){let t=CosmeticGlyphTypes[e].currentColor.bg===`black`;return this.isBoosted(e)?this.baseBoostColor(t):void 0}};EventHub.logic.on(GAME_EVENT.TAB_CHANGED,()=>{Tab.celestials.ra.isOpen&&HS.quotes.unlock.show()});var WS=class extends it{constructor(e){super(e),this.ema=new ExponentialMovingAverage(.01,10,100,.01),this._before=0}get name(){return this.config.name}get symbol(){return this.config.symbol}get description(){return this.config.description}get isBaseResource(){return this.config.isBaseResource===!0}get data(){return player.celestials.ra.alchemy[this.id]}get amount(){return this.data.amount}set amount(e){this.data.amount=e}get before(){return this._before}set before(e){this._before=e}get flow(){return this.ema.average}get fillFraction(){return Decimal.clamp(this.amount.div(this.cap),0,1).toNumber()}get unlockedWith(){return Ra.pets.effarig}get unlockedAt(){return this.config.unlockedAt}get isUnlocked(){return this.unlockedWith.level>=this.unlockedAt}get lockText(){return`${this.unlockedWith.name} Level ${formatInt(this.unlockedAt)}`}get isCustomEffect(){return!0}get effectValue(){return V.isRunning&&this.config.id===14?o.D0:this.config.effect(Pelle.isDisabled(`alchemy`)?o.D0:this.amount)}get reaction(){return XS.all[this.id]}get cap(){throw new NotImplementedError}get capped(){return this.amount.gte(this.cap)}},GS=class extends WS{constructor(e){super(e),this._name=e.name.toLowerCase()}get highestRefinementValue(){return player.celestials.ra.highestRefinementValue[this._name]}set highestRefinementValue(e){player.celestials.ra.highestRefinementValue[this._name]=Decimal.max(this.highestRefinementValue,e)}get cap(){return Decimal.clampMax(Ra.alchemyResourceCap,this.highestRefinementValue)}},KS=class extends WS{get cap(){let e=this.reaction.reagents.map(e=>e.resource.cap);return Decimal.min(...e)}},qS=class{constructor(e,t){this._product=e,this._reagents=t}get product(){return this._product}get reagents(){return this._reagents}get reactionYield(){if(!this._product.isUnlocked||this._reagents.some(e=>!e.resource.isUnlocked))return new Decimal;let e=this._reagents.map(e=>e.resource.amount);for(;e.length>1;)e[0].gt(e[1])?e.splice(1,1):e.splice(0,1);e=e[0],e=e.sub(this._product.amount),e=e.div(100);let t=this._reagents.map(e=>e.resource.amount.div(e.cost));for(;t.length>1;)t[0].gt(t[1])?t.splice(1,1):t.splice(0,1);return Decimal.min(t[0],Decimal.max(e,1))}get actualYield(){let e=this.baseProduction.mul(this.reactionYield).mul(this.reactionEfficiency),t=this._product.amount,n=t.add(e),r=this.reactionYield;for(let e of this._reagents){let i=e.resource.amount,a=e.resource.amount.sub(this.reactionYield.mul(e.cost)),o=i.sub(t),s=a.sub(n);r=Decimal.min(r,this.reactionYield.mul(o).div(o.sub(s)))}return Decimal.clampMin(r,0)}get priority(){let e=Glyphs.levelCap;for(let t of this._reagents){let n=t.resource.amount.sub(t.cost.mul(this.actualYield));e=Decimal.min(e,n)}return e}get isActive(){return this._product.data.reaction}set isActive(e){this._product.data.reaction=e}get isReality(){return this._product.id===ALCHEMY_RESOURCE.REALITY}get baseProduction(){return this.isReality?o.D1:o.D5}get reactionEfficiency(){return this.isReality?1:JS.synergism.effectValue}get reactionProduction(){return this.baseProduction.mul(this.reactionEfficiency)}combineReagents(){if(!this.isActive||this.reactionYield.eq(0))return;let e=JS.unpredictability.effectValue,t=poissonDistribution(e.div(e.sub(1).neg())).add(1),n=this._product.cap;t=t.clampMax(1e4).toNumber();for(let e=0;e<t;e++){let e=this.actualYield;for(let t of this._reagents)t.resource.amount=t.resource.amount.sub(e.mul(t.cost));let t=Decimal.clampMin(e.mul(this.reactionProduction),.05);this._product.amount=Decimal.clampMax(this._product.amount.add(t),n)}}};const JS=mapGameDataToObject(GameDatabase.celestials.alchemy.resources,e=>e.isBaseResource?new GS(e):new KS(e)),YS={all:JS.all,base:JS.all.filter(e=>e.isBaseResource)},XS=function(){function e(e){return e.config.reagents.map(e=>({resource:YS.all.find(t=>t.id===e.resource),cost:e.amount}))}return{all:YS.all.map(t=>t.isBaseResource?null:new qS(t,e(t)))}}();var ZS=class{_getData;_tier;_displayName;_shortDisplayName;constructor(e,t){this._tier=t,this._getData=e,this._displayName=[null,`First`,`Second`,`Third`,`Fourth`,`Fifth`,`Sixth`,`Seventh`,`Eighth`][t],this._shortDisplayName=[null,`1st`,`2nd`,`3rd`,`4th`,`5th`,`6th`,`7th`,`8th`][t]}get tier(){return this._tier}get displayName(){return this._displayName}get shortDisplayName(){return this._shortDisplayName}get data(){return this._getData()[this.tier-1]}get amount(){return this.data?.amount}set amount(e){this.data.amount=e}get bought(){return this.data?.bought}set bought(e){this.data.bought=e}get productionPerRealSecond(){return this.productionPerSecond.times(getGameSpeedupForDisplay())}productionForDiff(e){return this.productionPerSecond.times(e.div(1e3))}produceCurrency(e,t){e.add(this.productionForDiff(t))}produceDimensions(e,t){e.amount=e.amount.plus(this.productionForDiff(t))}static get dimensionCount(){return 8}},QS=o.D5,$S=o.E1,eC=[1.65,1.6,1.55,1.5],tC=o.E1,nC=o.E1,rC=o.E1,iC=.92;const aC=new Decimal(500),oC=new Decimal(500);var sC=1200,cC=class extends ZS{static get dimensionCount(){return 4}constructor(e){super(()=>player.celestials.laitela.dimensions,e)}get productionPerSecond(){return this.powerDE.mul(o.E3.div(this.interval))}get unlockUpgrade(){return ImaginaryUpgrade(this.tier+14)}get isUnlocked(){return this.unlockUpgrade.isBought}get ascensions(){return this.data.ascensionCount}get intervalPurchaseCap(){return o.E1}get rawInterval(){let e=iC;return Decimal.pow(4,this.tier-1).mul(o.E3).mul(Decimal.pow(e,this.data.intervalUpgrades)).mul(Decimal.pow(SingularityMilestone.ascensionIntervalScaling.effectOrDefault(1200),this.ascensions)).mul(SingularityMilestone.darkDimensionIntervalReduction.effectOrDefault(1))}get interval(){return Decimal.clampMin(this.intervalPurchaseCap,this.rawInterval)}get commonDarkMult(){return o.D1.timesEffectsOf(SingularityMilestone.darkFromTesseracts,SingularityMilestone.darkFromGlyphLevel,SingularityMilestone.darkFromTheorems,SingularityMilestone.darkFromDM4,SingularityMilestone.darkFromGamespeed,SingularityMilestone.darkFromDilatedTime)}get powerDMPerAscension(){return SingularityMilestone.improvedAscensionDM.effectOrDefault(o.D0).add(aC)}get powerDM(){return this.isUnlocked?Decimal.pow(1.15,this.data.powerDMUpgrades).mul(2).add(1).times(Laitela.realityReward).times(Laitela.darkMatterMult).times(this.commonDarkMult).times(Decimal.pow(this.powerDMPerAscension,this.ascensions)).timesEffectsOf(SingularityMilestone.darkMatterMult,SingularityMilestone.multFromInfinitied).dividedBy(Decimal.pow(1e4,Decimal.pow(this.tier-1,.5))):o.D0}get powerDE(){if(!this.isUnlocked||Pelle.isDoomed)return o.D0;let e=Decimal.pow(15,this.tier-1),t=Laitela.isFullyDestabilized?8:1;return this.data.powerDEUpgrades.div(10).add(1).mul(Decimal.pow(1.005,this.data.powerDEUpgrades)).mul(e).div(1e3).times(this.commonDarkMult).times(Decimal.pow(oC,this.ascensions)).timesEffectsOf(SingularityMilestone.darkEnergyMult,SingularityMilestone.realityDEMultiplier,SingularityMilestone.multFromInfinitied).mul(t)}get intervalAfterAscension(){let e=this.costScaleInterval.getMaxBought(this.data.intervalUpgrades,Currency.darkMatter.value,o.D1);return Decimal.clampMin(this.intervalPurchaseCap,this.rawInterval.mul(Decimal.pow(iC,e)).mul(SingularityMilestone.ascensionIntervalScaling.effectOrDefault(1200)))}get adjustedStartingCost(){return Decimal.pow(sC,[null,0,2,5,13][this.tier]).mul(10).mul(SingularityMilestone.darkDimensionCostReduction.effectOrDefault(1))}get rawIntervalCost(){return Decimal.pow(this.intervalCostIncrease,this.data.intervalUpgrades).times(this.adjustedStartingCost).times(tC)}get intervalCost(){return this.costScaleInterval.calculateCost(this.data.intervalUpgrades)}get intervalCostIncrease(){return Decimal.pow(QS,SingularityMilestone.intervalCostScalingReduction.effectOrDefault(1))}get rawPowerDMCost(){return Decimal.pow(this.powerDMCostIncrease,this.data.powerDMUpgrades).times(this.adjustedStartingCost).times(nC)}get powerDMCost(){return this.rawPowerDMCost.floor()}get powerDMCostIncrease(){return $S}get rawPowerDECost(){return Decimal.pow(this.powerDECostIncrease,this.data.powerDEUpgrades).times(this.adjustedStartingCost).times(rC)}get powerDECost(){return this.rawPowerDECost.floor()}get powerDECostIncrease(){return new Decimal(eC[this.tier-1])}get costScaleDE(){return new ExponentialCostScaling({baseCost:this.adjustedStartingCost.mul(SingularityMilestone.darkDimensionCostReduction.effectOrDefault(1)).times(rC),baseIncrease:this.powerDECostIncrease,costScale:new Decimal(10),scalingCostThreshold:o.NUMMAX.div(SingularityMilestone.darkDimensionCostReduction.effectOrDefault(1))})}get costScaleDM(){return new ExponentialCostScaling({baseCost:this.adjustedStartingCost.mul(SingularityMilestone.darkDimensionCostReduction.effectOrDefault(1)).times(nC),baseIncrease:this.powerDMCostIncrease,costScale:new Decimal(10),scalingCostThreshold:o.NUMMAX.div(SingularityMilestone.darkDimensionCostReduction.effectOrDefault(1))})}get costScaleInterval(){return new ExponentialCostScaling({baseCost:this.adjustedStartingCost.mul(SingularityMilestone.darkDimensionCostReduction.effectOrDefault(1)).times(tC),baseIncrease:this.intervalCostIncrease,costScale:new Decimal(10),scalingCostThreshold:o.NUMMAX.div(SingularityMilestone.darkDimensionCostReduction.effectOrDefault(1))})}get realDiff(){return this.data.realDiff}set realDiff(e){this.data.realDiff=e}get canBuyInterval(){return Currency.darkMatter.gte(this.intervalCost)&&this.interval.gt(this.intervalPurchaseCap)}get canBuyPowerDM(){return Currency.darkMatter.gte(this.powerDMCost)}get canBuyPowerDE(){return Currency.darkMatter.gte(this.powerDECost)}get maxIntervalPurchases(){return Decimal.ceil(Decimal.log10(this.intervalPurchaseCap.div(this.interval)).div(Decimal.log10(iC)))}buyManyInterval(e){let t=this.costScaleInterval.getMaxBought(this.data.intervalUpgrades,Currency.darkMatter.value,o.D1),n=t?.quantity;t!==null&&(Decimal.lte(e,n.clampMax(this.maxIntervalPurchases))&&(Currency.darkMatter.purchase(this.costScaleInterval.calculateCost(this.data.intervalUpgrades.add(Decimal.min(e,this.maxIntervalPurchases)).sub(1))),this.data.intervalUpgrades=this.data.intervalUpgrades.add(Decimal.min(e,this.maxIntervalPurchases))),Currency.darkMatter.purchase(this.costScaleInterval.calculateCost(this.data.intervalUpgrades.add(n.clampMax(this.maxIntervalPurchases)).sub(1))),this.data.intervalUpgrades=this.data.intervalUpgrades.add(n.clampMax(this.maxIntervalPurchases)))}buyManyPowerDM(e){let t=this.costScaleDM.getMaxBought(this.data.powerDMUpgrades,Currency.darkMatter.value,o.D1);t!==null&&(Decimal.lte(e,t.quantity)&&(Currency.darkMatter.purchase(this.costScaleDM.calculateCost(this.data.powerDMUpgrades.add(e).sub(1))),this.data.powerDMUpgrades=this.data.powerDMUpgrades.add(e)),Currency.darkMatter.purchase(this.costScaleDM.calculateCost(this.data.powerDMUpgrades.add(t.quantity.sub(1)))),this.data.powerDMUpgrades=this.data.powerDMUpgrades.add(t.quantity))}buyManyPowerDE(e){let t=this.costScaleDE.getMaxBought(this.data.powerDEUpgrades,Currency.darkMatter.value,o.D1);t!==null&&(Decimal.lte(e,t.quantity)&&(Currency.darkMatter.purchase(this.costScaleDE.calculateCost(this.data.powerDEUpgrades.add(e).sub(1))),this.data.powerDEUpgrades=this.data.powerDEUpgrades.add(e)),Currency.darkMatter.purchase(this.costScaleDE.calculateCost(this.data.powerDEUpgrades.add(t.quantity.sub(1)))),this.data.powerDEUpgrades=this.data.powerDEUpgrades.add(t.quantity))}buyInterval(){return this.buyManyInterval(o.D1)}buyPowerDM(){return this.buyManyPowerDM(o.D1)}buyPowerDE(){return this.buyManyPowerDE(o.D1)}ascend(){this.interval.gt(this.intervalPurchaseCap)||(this.data.ascensionCount=this.data.ascensionCount.add(1),this.buyManyInterval(1/0))}reset(){this.data.amount=o.D1,this.data.intervalUpgrades=o.D0,this.data.powerDMUpgrades=o.D0,this.data.powerDEUpgrades=o.D0,this.data.realDiff=o.D0,this.data.ascensionCount=o.D0}static createAccessor(){let e=Array.range(1,this.dimensionCount).map(e=>new this(e));e.unshift(null);let t=t=>{if(e[t]===void 0)throw TypeError(`Unknown Dimension referenced`);return e[t]};return Object.defineProperty(t,`index`,{value:e}),t}};const lC=cC.createAccessor(),uC={all:lC.index.compact(),tick(e){if(Laitela.isUnlocked){for(let t=4;t>=1;t--){let n=lC(t);if(n.isUnlocked&&(n.realDiff=n.realDiff.add(e),n.interval.lt(n.realDiff))){let e=Decimal.floor(n.realDiff.div(n.interval)),r=n.amount.times(e).times(n.powerDM);t===1?Currency.darkMatter.add(r):lC(t-1).amount=lC(t-1).amount.plus(r),Currency.darkEnergy.add(e.mul(n.powerDE)),n.realDiff=n.realDiff.sub(n.interval.mul(e))}}SingularityMilestone.dim4Generation.canBeApplied&&Laitela.annihilationUnlocked&&(lC(4).amount=lC(4).amount.plus(SingularityMilestone.dim4Generation.effectValue.mul(e.div(1e3))))}},reset(){for(let e of uC.all)e.reset();Currency.darkMatter.reset()}},dC={displayName:`Lai'tela`,possessiveName:`Lai'tela's`,get celestial(){return player.celestials.laitela},get isUnlocked(){return ImaginaryUpgrade(15).isBought},initializeRun(){clearCelestialRuns(),this.celestial.run=!0},get isRunning(){return this.celestial.run},get difficultyTier(){return player.celestials.laitela.difficultyTier},set difficultyTier(e){player.celestials.laitela.difficultyTier=e},get maxAllowedDimension(){return 8-this.difficultyTier},get isFullyDestabilized(){return dC.maxAllowedDimension===0},get continuumUnlocked(){return ImaginaryUpgrade(15).isBought&&!Pelle.isDisabled(`continuum`)},get continuumActive(){return!player.auto.disableContinuum},setContinuum(e){player.auto.disableContinuum=!e,player.auto.disableContinuum||(player.requirementChecks.reality.noContinuum=!1)},get matterExtraPurchaseFactor(){return Decimal.pow(Currency.darkMatter.max.add(1).max(1).log10().div(50),.4).times(SingularityMilestone.continuumMult.effectOrDefault(o.D0).add(1)).div(2).add(1)},get realityReward(){return Decimal.clampMin(Decimal.pow(100,this.difficultyTier).mul(Decimal.pow(player.celestials.laitela.fastestCompletion.recip().mul(360),2)),1)},get entropyGainPerSecond(){return Decimal.clamp(Decimal.pow(Currency.antimatter.value.add(1).log10().div(1e11),2),0,100).div(200)},get darkMatterMultGain(){return Decimal.pow(Currency.darkMatter.value.dividedBy(this.annihilationDMRequirement).plus(1).log10(),1.5).mul(ImaginaryUpgrade(21).effectOrDefault(1))},get darkMatterMult(){return this.celestial.darkMatterMult},get darkMatterMultRatio(){return this.celestial.darkMatterMult.add(this.darkMatterMultGain).div(this.celestial.darkMatterMult)},get annihilationUnlocked(){return ImaginaryUpgrade(19).isBought},get annihilationDMRequirement(){return 1e60},get canAnnihilate(){return dC.annihilationUnlocked&&Currency.darkMatter.gte(this.annihilationDMRequirement)},annihilate(e){return!e&&!this.canAnnihilate?!1:(this.celestial.darkMatterMult=this.celestial.darkMatterMult.add(this.darkMatterMultGain),uC.reset(),dC.quotes.annihilation.show(),Achievement(176).unlock(),!0)},maxAllDMDimensions(e){let t=uC.all.filter(t=>t.isUnlocked&&t.tier<=e);for(let n=0;n<e;n++)t[n].buyManyInterval(1/0);for(let n=0;n<e;n++)t[n].buyManyPowerDM(1/0);for(let n=0;n<e;n++)t[n].buyManyPowerDE(1/0)},reset(){this.annihilate(!0),this.celestial.darkMatterMult=o.D1,Currency.darkMatter.max=o.D1,Currency.darkMatter.reset(),Currency.singularities.reset(),this.celestial.fastestCompletion=new Decimal(3600),this.celestial.difficultyTier=0,this.celestial.singularityCapIncreases=o.D0},quotes:hS.laitela,symbol:`ᛝ`};EventHub.logic.on(GAME_EVENT.TAB_CHANGED,()=>{Tab.celestials.laitela.isOpen&&dC.quotes.unlock.show()});var fC=class extends it{constructor(e){let t=e.effect,n=Wt([{},e]);n.effect=()=>t(this.completions),super(n),this._rawEffect=t}get start(){return this.config.start}get repeat(){return this.config.repeat}get limit(){return this.config.limit}get isUnique(){return this.repeat===0}get isUnlocked(){return Currency.singularities.gte(this.start)}get increaseThreshold(){return this.config.increaseThreshold}nerfCompletions(e){let t=this.increaseThreshold;return!t||e.lt(t)?e:e.sub(t).div(3).add(t)}unnerfCompletions(e){let t=this.increaseThreshold;return!t||e.lt(t)?e:e.sub(t).times(3).add(t)}get previousGoal(){return this.isUnique?o.D1:this.isUnlocked?Decimal.pow(this.repeat,this.unnerfCompletions(this.completions).sub(1)).times(this.start):o.D0}get nextGoal(){return this.isUnique?new Decimal(this.start):Decimal.pow(this.repeat,this.unnerfCompletions(this.completions.add(1)).sub(1)).times(this.start)}get rawCompletions(){return this.isUnique?this.isUnlocked?o.D1:o.D0:this.isUnlocked?Decimal.log10(Currency.singularities.value).sub(Decimal.log10(this.start)).div(Decimal.log10(this.repeat)).add(1):o.D0}get completions(){return Decimal.min(Decimal.floor(this.nerfCompletions(this.rawCompletions)),this.limit)}get remainingSingularities(){return this.nextGoal.sub(Currency.singularities.value)}get progressToNext(){let e=Currency.singularities.value.minus(this.previousGoal).div(this.nextGoal);return formatPercents(Decimal.clampMax(e,1))}get isMaxed(){return this.isUnique&&this.isUnlocked||this.completions.gte(this.limit)}get effectDisplay(){return Decimal.isFinite(this.effectValue)?this.config.effectFormat(this.effectValue):`N/A`}get nextEffectDisplay(){return this.config.effectFormat(this._rawEffect(this.completions.add(1)))}get description(){return this.config.description}get canBeApplied(){return this.isUnlocked&&!Pelle.isDisabled(`singularity`)}};const pC=mapGameDataToObject(GameDatabase.celestials.singularityMilestones,e=>new fC(e)),mC={all:pC.all,lastNotified:player.celestials.laitela.lastCheckedMilestones,get sorted(){return this.all.sort((e,t)=>Decimal.compare(e.remainingSingularities,t.remainingSingularities))},sortedForCompletions(e){let t=player.celestials.laitela.singularitySorting,n;switch(t.sortResource){case SINGULARITY_MILESTONE_SORT.SINGULARITIES_TO_NEXT:n=e=>e.isMaxed?Decimal.log10(e.isUnique?e.nextGoal:e.previousGoal).add(1):Decimal.log10(e.remainingSingularities).div(100);break;case SINGULARITY_MILESTONE_SORT.CURRENT_COMPLETIONS:n=e=>{let t=Decimal.clampMin(e.previousGoal,1),n=Decimal.clamp(Currency.singularities.value.div(t).max(1).log10().div(e.nextGoal.div(t).max(1).log10()),0,1);return e.completions.add(n).div(20)};break;case SINGULARITY_MILESTONE_SORT.PERCENT_COMPLETIONS:n=e=>{let t=Number.isFinite(e.limit)?e.limit:100,n=Currency.singularities.value.div(e.previousGoal).max(1).log10().div(Decimal.log10(e.nextGoal.div(e.previousGoal)));return Decimal.clampMax(n.add(e.completions).div(t),1).add(Number.isFinite(e.limit)?0:1)};break;case SINGULARITY_MILESTONE_SORT.FINAL_COMPLETION:n=e=>{let t=Number.isFinite(e.limit)?e.limit:50;return Decimal.mul(e.config.start,Decimal.pow(e.config.repeat,t-1)).max(1).log10().div(100)};break;case SINGULARITY_MILESTONE_SORT.MOST_RECENT:n=e=>e.isUnlocked?Decimal.log10(e.isUnique?e.nextGoal:e.previousGoal).div(100):Decimal.log10(e.start).div(1e3).add(1);break;default:throw Error(`Unrecognized Singularity Milestone sorting option (order)`)}let r;switch(t.showCompleted){case COMPLETED_MILESTONES.FIRST:r=10;break;case COMPLETED_MILESTONES.LAST:r=-10;break;case COMPLETED_MILESTONES.IGNORED:r=0;break;default:throw Error(`Unrecognized Singularity Milestone sorting option (completed milestones)`)}let i=t=>t.previousGoal.gt(player.celestials.laitela.lastCheckedMilestones)&&e?20:0,a=e=>Decimal.add(t.sortOrder?n(e):n(e).neg(),i(e)+(e.isMaxed?r:0));return this.sorted.sort((e,t)=>Decimal.compare(a(e),a(t)))},get nextMilestoneGroup(){return this.sortedForCompletions(!1).filter(e=>!e.isMaxed).slice(0,6)},get unseenMilestones(){let e=player.celestials.laitela;return hC.filter(t=>e.lastCheckedMilestones.lt(t)&&Currency.singularities.gte(t))},dumbgt(e,t){return new Decimal(e).gt(new Decimal(t))},get unnotifiedMilestones(){return hC.filter(e=>this.dumbgt(e,this.lastNotified)&&Currency.singularities.gte(e))}};var hC=function(){return mC.all.map(e=>Array.range(0,Math.min(50,e.limit)).filter(t=>!e.increaseThreshold||t<=e.increaseThreshold||t>e.increaseThreshold&&(t-e.increaseThreshold)%3==2).map(t=>e.start*e.repeat**+t)).flat(1/0).filter(e=>e<1e100).sort((e,t)=>e-t)}();const gC={get cap(){return Decimal.pow10(player.celestials.laitela.singularityCapIncreases).mul(200)},get gainPerCapIncrease(){return pC.improvedSingularityCap.effectOrDefault(new Decimal(11))},get singularitiesGained(){return Decimal.floor(Decimal.pow(this.gainPerCapIncrease,player.celestials.laitela.singularityCapIncreases).mul(pC.singularityMult.effectOrDefault(o.D1)).mul(ImaginaryUpgrade(10).effectOrDefault(o.D0).add(1)))},get timePerCondense(){return this.cap.div(Currency.darkEnergy.productionPerSecond)},get timeUntilCap(){return this.cap.minus(Currency.darkEnergy.value).div(Currency.darkEnergy.productionPerSecond)},get timeDelayFromAuto(){return this.timePerCondense.times(pC.autoCondense.effectOrDefault(1/0)-1)},get capIsReached(){return Currency.darkEnergy.gte(this.cap)},increaseCap(){player.celestials.laitela.singularityCapIncreases.gt(5e11)&&player.celestial.laitela.singularityCapIncreases.add(Decimal.pow10(player.celestial.laitela.singularityCapIncreases.log(10).sub(10).floor())),player.celestials.laitela.singularityCapIncreases=player.celestials.laitela.singularityCapIncreases.add(1)},decreaseCap(){player.celestials.laitela.singularityCapIncreases.eq(0)||(player.celestials.laitela.singularityCapIncreases.gt(5e11)&&player.celestial.laitela.singularityCapIncreases.sub(Decimal.pow10(player.celestial.laitela.singularityCapIncreases.log(10).sub(10).floor())),player.celestials.laitela.singularityCapIncreases=player.celestials.laitela.singularityCapIncreases.sub(1))},perform(){if(!(!this.capIsReached||Pelle.isDoomed)){EventHub.dispatch(GAME_EVENT.SINGULARITY_RESET_BEFORE),Currency.darkEnergy.reset(),Currency.singularities.add(this.singularitiesGained);for(let e of Laitela.quotes.all)e.requirement&&e.show();EventHub.dispatch(GAME_EVENT.SINGULARITY_RESET_AFTER)}}};EventHub.logic.on(GAME_EVENT.GAME_LOAD,()=>mC.lastNotified=Currency.singularities.value),EventHub.logic.on(GAME_EVENT.SINGULARITY_RESET_AFTER,()=>{let e=mC.unnotifiedMilestones.length;e!==0&&(e===1?GameUI.notify.blackHole(`You reached a Singularity milestone!`):e>100?GameUI.notify.blackHole(`You reached over 100 Singularity milestones!`):GameUI.notify.blackHole(`You reached ${formatInt(e)} Singularity milestones!`),mC.lastNotified=Currency.singularities.value)});var _C={chars:{0:`̍.̎.̄.̅.̿.̑.̆.̐.͒.͗.͑.̇.̈.̊.͂.̓.̈́.͊.͋.͌.̃.̂.̌.͐.̀.́.̋.̏.̒.̓.̔.̽.̉.ͣ.ͤ.ͥ.ͦ.ͧ.ͨ.ͩ.ͪ.ͫ.ͬ.ͭ.ͮ.ͯ.̾.͛.͆.̚`.split(`.`),1:`̖.̗.̘.̙.̜.̝.̞.̟.̠.̤.̥.̦.̩.̪.̫.̬.̭.̮.̯.̰.̱.̲.̳.̹.̺.̻.̼.ͅ.͇.͈.͉.͍.͎.͓.͔.͕.͖.͙.͚.̣`.split(`.`),2:[`̕`,`̛`,`̀`,`́`,`͘`,`̡`,`̢`,`̧`,`̨`,`̴`,`̵`,`̶`,`͏`,`͜`,`͝`,`͞`,`͟`,`͠`,`͢`,`̸`,`̷`,`͡`,`҉`]},random(e,t){if(e==1)return 0;let n=66669*t%981/997;return e?Math.floor(n*e+1)-1:n},generate(e,t=0){let n=e.split(``),r=n.reduce((e,t)=>e+t.charCodeAt(0),0);return n.map(e=>{if(e==` `)return e;for(let n=0;n<t;n++){let t=_C.random(3,r++);_C.random(10,r++)/10>=.5&&(e+=_C.chars[t][_C.random(_C.chars[t].length,r++)])}return e}).join(``)}},vC=_C.generate,yC={achievements:()=>({}),IPMults:()=>({}),EPMults:()=>({}),galaxies:()=>({}),InfinitiedMults:()=>({}),infinitiedGen:()=>({}),eternityGain:()=>({}),eternityMults:()=>({}),studies:()=>({}),EPgen:()=>({}),autoec:()=>({}),replicantiIntervalMult:()=>({}),tpMults:()=>({}),glyphs:()=>!PelleRifts.vacuum.milestones[0].canBeApplied,V:()=>({}),singularity:()=>({}),continuum:()=>({}),alchemy:()=>({}),achievementMult:()=>({}),blackhole:()=>({}),effarig:()=>({}),imaginaryUpgrades:()=>({}),glyphsac:()=>({}),antimatterDimAutobuyer1:()=>CC.antimatterDimAutobuyers1,antimatterDimAutobuyer2:()=>CC.antimatterDimAutobuyers1,antimatterDimAutobuyer3:()=>CC.antimatterDimAutobuyers1,antimatterDimAutobuyer4:()=>CC.antimatterDimAutobuyers1,antimatterDimAutobuyer5:()=>CC.antimatterDimAutobuyers2,antimatterDimAutobuyer6:()=>CC.antimatterDimAutobuyers2,antimatterDimAutobuyer7:()=>CC.antimatterDimAutobuyers2,antimatterDimAutobuyer8:()=>CC.antimatterDimAutobuyers2,tickspeedAutobuyer:()=>CC.tickspeedAutobuyer,dimBoostAutobuyer:()=>CC.dimBoostAutobuyer,galaxyAutobuyer:()=>CC.galaxyAutobuyer,timeTheoremAutobuyer:()=>({}),rupg10:()=>({}),dtMults:()=>({}),chargedInfinityUpgrades:()=>({}),alteration:()=>({}),timeTheorems:()=>({})};const bC={symbol:`♅`,possessiveName:`Pelle's`,initializeRun(){if(this.isDoomed){bC.armageddon(!0);return}if(Glyphs.harshAutoClean(),!Glyphs.unequipAll()){Modal.hideAll(),Modal.message.show(`Dooming your Reality will unequip your Glyphs. Some of your
        Glyphs could not be unequipped due to lack of inventory space.`,1);return}if(Glyphs.harshAutoClean(),Glyphs.freeInventorySpace<5){Modal.hideAll(),Modal.message.show(`You must have enough empty unprotected Glyph slots for
        ${formatInt(5)} additional Glyphs in order to Doom your Reality.`,1);return}for(let e of GlyphInfo.basicGlyphTypes)Glyphs.addToInventory(GlyphGenerator.doomedGlyph(e));Glyphs.refreshActive(),player.options.confirmations.glyphReplace=!0,player.reality.automator.state.repeat=!1,player.reality.automator.state.forceRestart=!1,BlackHoles.arePaused&&BlackHoles.togglePause(),player.celestials.pelle.doomed=!0,bC.armageddon(!1),respecTimeStudies(!0),en.infinityPoints.reset(),player.IPMultPurchases=o.D0,Autobuyer.bigCrunch.mode=AUTO_CRUNCH_MODE.AMOUNT,disChargeAll(),clearCelestialRuns(),player.auto.antimatterDims.isActive=!0,player.buyUntil10=!0,player.records.realTimeDoomed=0;for(let e of AlchemyResources.all)e.amount=0;AutomatorBackend.stop();let e=-2&1<<GameDatabase.tabs.find(e=>e.key===`shop`).id;player.options.hiddenTabBits&=e;let t=new Set([`statistics`,`achievements`,`reality`,`celestials`]),n=new Set(GameDatabase.tabs.filter(e=>t.has(e.key)).map(e=>e.id));for(let e=0;e<GameDatabase.tabs.length;e++)player.options.hiddenSubtabBits[e]&=n.has(e)?-1:0;bC.quotes.initial.show(),GameStorage.save(!0)},get displayName(){return Date.now()%4e3>500?`Pelle`:I.randomCrossWords(`Pelle`)},get isUnlocked(){return ImaginaryUpgrade(25).isBought},isDisabled(e){if(!this.isDoomed)return!1;if(!e)return!0;if(!yC[e])return console.error(`Mechanic ${e} isn't present in the disabledMechanicUnlocks!`),!0;let t=yC[e]();return typeof t==`boolean`?t:!t.canBeApplied},get canArmageddon(){return this.remnantsGain.gte(1)},armageddon(e){!this.canArmageddon&&e||(EventHub.dispatch(GAME_EVENT.ARMAGEDDON_BEFORE,e),e&&(this.cel.remnants=this.cel.remnants.add(this.remnantsGain)),finishProcessReality({reset:!0,armageddon:!0}),disChargeAll(),player.celestials.enslaved.isStoringReal=!1,player.celestials.enslaved.autoStoreReal=!1,PelleStrikes.dilation.hasStrike&&(player.dilation.active=!0),EventHub.dispatch(GAME_EVENT.ARMAGEDDON_AFTER,e))},gameLoop(e){this.isDoomed&&(en.realityShards.add(this.realityShardGainPerSecond.times(e).div(1e3)),PelleRifts.all.forEach(t=>t.fill(e)))},get cel(){return player.celestials.pelle},get isDoomed(){return this.cel.doomed},get disabledAchievements(){return[164,156,143,142,141,137,134,133,132,131,126,125,118,117,116,113,111,104,103,95,93,92,91,87,85,78,76,74,65,55,54,37]},get uselessInfinityUpgrades(){return[`passiveGen`,`ipMult`,`infinitiedGeneration`]},get uselessTimeStudies(){return[32,33,41,51,61,62,121,122,123,141,142,143,192,213]},get disabledRUPGs(){return[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,19,20,22,23,24]},get uselessPerks(){return[10,12,13,14,15,16,17,30,40,41,42,43,44,45,46,51,52,53,60,61,62,80,81,82,83,100,103,104,105,106,201,202,203,204]},get specialGlyphEffect(){let e=this.isDoomed&&PelleRifts.chaos.milestones[1].canBeApplied,t=this.getSpecialGlyphEffectDescription(this.activeGlyphType),n=t=>e&&this.activeGlyphType===t;return{isUnlocked:e,description:t,infinity:n(`infinity`)&&player.challenge.eternity.current<=8?en.infinityPoints.value.plus(1).pow(.2):o.D1,time:n(`time`)?en.eternityPoints.value.plus(1).pow(.3):o.D1,replication:n(`replication`)?10**53**PelleRifts.vacuum.percentage:1,dilation:n(`dilation`)?Decimal.pow(player.dilation.totalTachyonGalaxies,1.5).max(1):o.D1,power:n(`power`)?1.02:1,companion:n(`companion`)?1.34:1,isScaling:()=>[`infinity`,`time`,`replication`,`dilation`].includes(this.activeGlyphType)}},getSpecialGlyphEffectDescription(e){switch(e){case`infinity`:return`Infinity Point gain ${player.challenge.eternity.current<=8?formatX(en.infinityPoints.value.plus(1).pow(.2),2):formatX(o.D1,2)} (based on current IP)`;case`time`:return`Eternity Point gain ${formatX(en.eternityPoints.value.plus(1).pow(.3),2)}
          (based on current EP)`;case`replication`:return`Replication speed ${formatX(10**53**PelleRifts.vacuum.percentage,2)} \
        (based on ${I.wordCycle(PelleRifts.vacuum.name)})`;case`dilation`:return`Dilated Time gain ${formatX(Decimal.pow(player.dilation.totalTachyonGalaxies,1.5).max(1),2)}
          (based on Tachyon Galaxies)`;case`power`:return`Galaxies are ${formatPercents(.02)} stronger`;case`companion`:return`You feel ${formatPercents(.34)} better`;case void 0:return`No Glyph equipped!`;default:return`You cannot equip this Glyph while Doomed!`}},get remnantRequirementForDilation(){return 38e6},get canDilateInPelle(){return this.cel.remnants.gte(this.remnantRequirementForDilation)},resetResourcesForDilation(){this.cel.records.totalAntimatter=new Decimal(`1e180000`),this.cel.records.totalInfinityPoints=new Decimal(`1e60000`),en.eternityPoints.reset(),this.cel.records.totalEternityPoints=new Decimal(`1e1050`)},get remnantsGain(){let e=this.cel.records.totalAntimatter.plus(1).log10(),t=this.cel.records.totalInfinityPoints.plus(1).log10(),n=this.cel.records.totalEternityPoints.plus(1).log10();PelleStrikes.dilation.hasStrike&&(e=e.times(500),t=t.times(10),n=n.times(5));let r=e.add(2).log10().add(t.add(2).log10()).add(n.add(2).log10()).div(1.64).pow(7.5);return r.lt(1)?r:Decimal.floor(r.minus(this.cel.remnants))},realityShardGain(e){return Decimal.pow(10,Decimal.pow(e,1/7.5).times(4)).minus(1).div(1e3)},get realityShardGainPerSecond(){return this.realityShardGain(this.cel.remnants)},get nextRealityShardGain(){return this.realityShardGain(this.remnantsGain.add(this.cel.remnants))},get riftDrainPercent(){return .03},get glyphMaxLevel(){return CC.glyphLevels.effectValue},get glyphStrength(){return o.D1},antimatterDimensionMult(e){return Decimal.pow(10,Decimal.log10(e.add(1)).add(e.pow(5.1).div(1e3)).add(o.D4.pow(e).div(0x8ac7230489e80000)))},get activeGlyphType(){return Glyphs.active.filter(Boolean)[0]?.type},get hasGalaxyGenerator(){return player.celestials.pelle.galaxyGenerator.unlocked},transitionText(e,t,n=0){let r=Math.round((e.length*(1-n)+t.length*n)*1e8)/1e8,i=r*(1-n),a=i,o=``;for(let n=0;n<r;n++)if(n>=a){let e=Math.floor(n*(t.length/r));o+=t[e],a+=i}else{let t=Math.floor(n*(e.length/r));o+=e[t]}return vC(o,Math.floor(n**2*7))},endTabNames:`End Is Nigh Destruction Is Imminent Help Us Good Bye Forever`.split(` `),quotes:hS.pelle,reset(){player.celestials.pelle={doomed:!1,upgrades:new Set,remnants:o.D0,realityShards:o.D0,records:{totalAntimatter:o.D0,totalInfinityPoints:o.D0,totalEternityPoints:o.D0},rebuyables:{antimatterDimensionMult:o.D0,timeSpeedMult:o.D0,glyphLevels:o.D0,infConversion:o.D0,galaxyPower:o.D0,galaxyGeneratorAdditive:o.D0,galaxyGeneratorMultiplicative:o.D0,galaxyGeneratorAntimatterMult:o.D0,galaxyGeneratorIPMult:o.D0,galaxyGeneratorEPMult:o.D0},rifts:{vacuum:{fill:o.D0,active:!1,reducedTo:1},decay:{fill:o.D0,active:!1,percentageSpent:0,reducedTo:1},chaos:{fill:0,active:!1,reducedTo:1},recursion:{fill:o.D0,active:!1,reducedTo:1},paradox:{fill:o.D0,active:!1,reducedTo:1}},progressBits:0,galaxyGenerator:{unlocked:!1,spentGalaxies:o.D0,generatedGalaxies:o.D0,phase:0,sacrificeActive:!1},quoteBits:0,collapsed:{upgrades:!1,rifts:!1,galaxies:!1},showBought:!1}}};EventHub.logic.on(GAME_EVENT.ARMAGEDDON_AFTER,()=>{en.remnants.gte(1)&&bC.quotes.arm.show()}),EventHub.logic.on(GAME_EVENT.PELLE_STRIKE_UNLOCKED,()=>{PelleStrikes.infinity.hasStrike&&bC.quotes.strike1.show(),PelleStrikes.powerGalaxies.hasStrike&&bC.quotes.strike2.show(),PelleStrikes.eternity.hasStrike&&bC.quotes.strike3.show(),PelleStrikes.ECs.hasStrike&&bC.quotes.strike4.show(),PelleStrikes.dilation.hasStrike&&bC.quotes.strike5.show()});var xC=class extends lt{get currency(){return en.realityShards}get boughtAmount(){return player.celestials.pelle.rebuyables[this.id]}set boughtAmount(e){player.celestials.pelle.rebuyables[this.id]=e}get isCapped(){return this.boughtAmount.gte(this.config.cap)}get isCustomEffect(){return!0}get effectValue(){return this.config.effect(this.boughtAmount)}onPurchased(){this.id===`glyphLevels`&&EventHub.dispatch(GAME_EVENT.GLYPHS_CHANGED)}},SC=class extends st{get set(){return player.celestials.pelle.upgrades}get currency(){return en.realityShards}get description(){return this.config.description}get cost(){return this.config.cost}get isAvailableForPurchase(){return bC.isDoomed}};const CC=mapGameDataToObject(GameDatabase.celestials.pelle.upgrades,e=>e.rebuyable?new xC(e):new SC(e));CC.rebuyables=CC.all.filter(e=>e.isRebuyable),CC.singles=CC.all.filter(e=>!e.isRebuyable).sort((e,t)=>e.cost-t.cost);var wC=class extends at{get bits(){return player.celestials.pelle.progressBits}set bits(e){player.celestials.pelle.progressBits=e}get hasStrike(){return this.isUnlocked}get canBeUnlocked(){return Pelle.isDoomed&&!this.hasStrike}get requirement(){let e=this.config.requirementDescription;return typeof e==`function`?e():e}get penalty(){let e=this.config.penaltyDescription;return typeof e==`function`?e():e}reward(){return this.config.rewardDescription()}get rift(){return this.config.rift()}trigger(){this.unlock()}onUnlock(){GameUI.notify.strike(`You encountered a Pelle Strike: ${this.requirement}`),player.celestials.pelle.collapsed.rifts=!1,this.id===5&&Pelle.resetResourcesForDilation(),Tab.celestials.pelle.show(),EventHub.dispatch(GAME_EVENT.PELLE_STRIKE_UNLOCKED)}};const TC=mapGameDataToObject(GameDatabase.celestials.pelle.strikes,e=>new wC(e));var EC=class extends it{lastChecked=!1;get requirement(){return this.config.requirement}get resource(){return this.config.resource}checkMilestoneState(){this.lastChecked!==this.isUnlocked&&this.config.onStateChange?.(),this.lastChecked=this.isUnlocked}get isUnlocked(){return this.resource===`decay`&&kC.chaos.milestones[0].isEffectActive?!0:this.requirement<=kC[this.resource].percentage}get isEffectActive(){return this.isUnlocked}get description(){let e=this.config.description;return typeof e==`function`?e():e}get formattedEffect(){return this.canBeApplied?this.config.formatEffect(this.effectValue):!1}},OC=class extends it{constructor(e){super(e),this._milestones=this.config.milestones.map(e=>new EC(e))}get fillCurrency(){return this.config.currency()}get strike(){return this.config.strike()}get canBeApplied(){return this.strike.hasStrike}get name(){return this.config.name}get reducedTo(){return this.rift.reducedTo}set reducedTo(e){this.rift.reducedTo=e}get rift(){return player.celestials.pelle.rifts[this.config.key]}get totalFill(){return this.rift.fill}set totalFill(e){this.rift.fill=e}get isActive(){return this.rift.active}get realPercentage(){return this.config.percentage(this.totalFill)}get spentPercentage(){return this.rift.percentageSpent||0}get percentage(){return this.reducedTo>1?this.reducedTo:this.config.spendable?Math.min(this.config.percentage(this.totalFill)-this.spentPercentage,this.reducedTo):Math.min(this.realPercentage,this.reducedTo)}get milestones(){return this._milestones}get description(){return this.config.description}get drainResource(){return this.config.drainResource}get effects(){let e=this.config.baseEffect(this.effectValue),t=this.config.additionalEffects?.().map(e=>e.formattedEffect)??[];return[e,...t]}get isCustomEffect(){return!0}get effectValue(){return this.config.effect(this.config.percentageToFill(this.percentage))}get maxValue(){return this.config.percentageToFill(1+this.spentPercentage)}get isMaxed(){return this.percentage>=1}get galaxyGeneratorText(){return this.config.galaxyGeneratorText}toggle(){let e=kC.all.filter(e=>e.isActive).length;!this.isActive&&e===2?GameUI.notify.error(`You can only have 2 rifts active at the same time!`):this.rift.active=!this.rift.active}checkMilestoneStates(){this.milestones.forEach(e=>e.checkMilestoneState())}fill(e){if(this.isActive&&this.isMaxed){this.rift.active=!1;return}if(!(!this.isActive||this.isMaxed)){if(this.fillCurrency.value instanceof Decimal){if(this.fillCurrency.value.lte(1))return;let t=this.fillCurrency.value.times(Decimal.pow(1-Pelle.riftDrainPercent,e.div(1e3))),n=this.fillCurrency.value.minus(t);this.fillCurrency.value=this.fillCurrency.value.minus(n).max(1),this.totalFill=this.totalFill.plus(n).min(this.maxValue)}else{let t=this.fillCurrency.value*Decimal.pow(1-Pelle.riftDrainPercent,e.div(1e3)).toNumber(),n=this.fillCurrency.value-t;this.fillCurrency.value=Math.max(this.fillCurrency.value-n,0),this.totalFill=Math.clampMax(this.totalFill+n,this.maxValue)}kC.vacuum.milestones[0].canBeApplied&&Glyphs.refreshActive(),this.checkMilestoneStates()}}};const kC=mapGameDataToObject(GameDatabase.celestials.pelle.rifts,e=>new OC(e));kC.totalMilestones=()=>kC.all.flatMap(e=>e.milestones).countWhere(e=>e.canBeApplied);const AC={hasReturnedGlyphSlot:!1,get generationCaps(){return kC.all.map(e=>({rift:e.config.key,cap:e.config.galaxyGeneratorThreshold})).sort((e,t)=>Decimal.compare(e.cap,t.cap))},get spentGalaxies(){return player.celestials.pelle.galaxyGenerator.spentGalaxies},get generatedGalaxies(){return player.celestials.pelle.galaxyGenerator.generatedGalaxies},get galaxies(){return this.generatedGalaxies.sub(this.spentGalaxies)},get gainPerSecond(){return Pelle.hasGalaxyGenerator?new Decimal(MC.additive.effectValue).timesEffectsOf(MC.multiplicative,MC.antimatterMult,MC.IPMult,MC.EPMult):o.D0},get capObj(){return this.generationCaps[player.celestials.pelle.galaxyGenerator.phase]},get generationCap(){return this.capObj?this.capObj.cap:o.BEMAX},get capRift(){return kC[this.capObj?.rift]},get isCapped(){return this.generationCap===this.generatedGalaxies},get sacrificeActive(){return player.celestials.pelle.galaxyGenerator.sacrificeActive},startSacrifice(){player.celestials.pelle.collapsed.rifts=!1,player.celestials.pelle.galaxyGenerator.sacrificeActive=!0},loop(e){if(this.isCapped&&Pelle.quotes.galaxyGeneratorRifts.show(),this.sacrificeActive){if(this.capRift.reducedTo=Decimal.max(Decimal.sub(this.capRift.reducedTo,e.div(1e5).mul(3)),0).toNumber(),this.capRift.reducedTo===0){player.celestials.pelle.galaxyGenerator.sacrificeActive=!1,player.celestials.pelle.galaxyGenerator.phase++;let e=player.celestials.pelle.galaxyGenerator.phase;e===1?Pelle.quotes.galaxyGeneratorPhase1.show():e===4&&Pelle.quotes.galaxyGeneratorPhase4.show(),this.capObj||Pelle.quotes.end.show()}kC.all.forEach(e=>e.checkMilestoneStates()),!kC.vacuum.milestones[0].canBeApplied&&Glyphs.active.some(e=>e).length>0&&(Glyphs.unequipAll(player.options.respecIntoProtected&&Glyphs.findFreeIndex(!0)===-1),Glyphs.refreshActive())}player.celestials.pelle.galaxyGenerator.generatedGalaxies=player.celestials.pelle.galaxyGenerator.generatedGalaxies.add(this.gainPerSecond.times(e.div(1e3))),player.celestials.pelle.galaxyGenerator.generatedGalaxies=Decimal.min(player.celestials.pelle.galaxyGenerator.generatedGalaxies,this.generationCap),this.capRift||(kC.all.forEach(t=>t.reducedTo=e.div(1e5).mul(3).add(t.reducedTo).clampMax(2).toNumber()),kC.vacuum.milestones[0].canBeApplied&&!this.hasReturnedGlyphSlot&&(Glyphs.refreshActive(),EventHub.dispatch(GAME_EVENT.GLYPHS_EQUIPPED_CHANGED),this.hasReturnedGlyphSlot=!0))}};var jC=class extends lt{get currency(){return this.config.currency()}get boughtAmount(){return player.celestials.pelle.rebuyables[this.id]}set boughtAmount(e){player.celestials.pelle.rebuyables[this.id]=e}get isCustomEffect(){return!0}get effectValue(){return this.config.effect(this.boughtAmount)}};const MC=mapGameDataToObject(GameDatabase.celestials.pelle.galaxyGeneratorUpgrades,e=>new jC(e)),NC={GAME_END:1,TAB_START_HIDE:1.5,INTERACTIVITY_DISABLED:2.5,FADE_AWAY:2.5,SAVE_DISABLED:4,END_NUMBERS:4.2,CREDITS_START:4.5,SHOW_NEW_GAME:13.5,SPECTATE_GAME:13.9,SONG_END:13.7,CREDITS_END:14.5},PC={get endState(){return this.removeAdditionalEnd||player.bypassEnd?this.additionalEnd:Math.max(player.celestials.pelle.records.totalAntimatter.add(1).log10().add(1).log10().sub(8.7).div(Math.log10(9e15)-8.7).min(1).toNumber()+this.additionalEnd,0)},_additionalEnd:0,get additionalEnd(){return player.isGameEnd||this.removeAdditionalEnd?this._additionalEnd:0},set additionalEnd(e){this._additionalEnd=player.isGameEnd||this.removeAdditionalEnd?e:0},removeAdditionalEnd:!1,creditsClosed:!1,creditsEverClosed:!1,gameLoop(e){let t=l(e)?e.toNumber():e;this.removeAdditionalEnd&&(this.additionalEnd-=Math.min(t/200,.5),this.additionalEnd<4&&(this.additionalEnd=0,this.removeAdditionalEnd=!1)),!this.removeAdditionalEnd&&this.endState>=NC.GAME_END&&ui.$viewModel.modal.progressBar===void 0&&(player.isGameEnd=!0,this.additionalEnd+=Math.min(t/1e3/20,.1))}},FC={teresa:gS,effarig:SS,enslaved:ES,v:LS,ra:HS,laitela:dC,pelle:bC};GameDatabase.celestials.descriptions=[{name:`Teresa`,effects(){return`Glyph Time Theorem generation is disabled.
      You gain less Infinity Points and Eternity Points (x^${format(.55,2,2)}).`}},{name:`Effarig`,effects(){return`All Dimension multipliers, game speed, and tickspeed are severely lowered, like Dilation.
      Infinity Power reduces the production and game speed penalties and Time Shards reduce the tickspeed penalty.
      Glyph levels are temporarily capped to ${formatInt(SS.glyphLevelCap)}, rarity is unaffected.`},description(){return`You will exit Effarig's Reality when you complete a Layer of it for the first time.`}},{name:`The Nameless Ones`,effects(){return`Glyph levels are boosted to a minimum of ${formatInt(5e3)}.
      Infinity, Time, and 8th Antimatter Dimension purchases are limited to ${formatInt(1)} each.
      Antimatter Dimension multipliers are always Dilated (the Glyph effect still only applies in actual Dilation).
      Time Study 192 (uncapped Replicanti) is locked.
      The Black Hole is disabled.
      Tachyon Particle production and Dilated Time production are severely reduced.
      Time Theorem generation from Dilation Glyphs is disabled.
      Certain challenge goals are increased.
      Stored game time is discharged at a reduced effectiveness (exponent^${format(.55,2,2)}).`}},{name:`V`,effects(){let e=`All Dimension multipliers, Eternity Point gain, Infinity Point gain, and Dilated Time gain      per second are square-rooted. 
      The Replicanti interval is squared.`;return HS.unlocks.unlockGlyphAlchemy.canBeApplied?e+`
      The Exponential Glyph Alchemy effect is disabled.`:e}},{name:`Ra`,effects(){return`You only have ${formatInt(4)} Dimension Boosts and can not gain any more.
      The Tickspeed purchase multiplier is fixed at ${formatX(1.1245,0,3)}.`}},{name:`Lai'tela`,effects(){let e,t=8-dC.difficultyTier;switch(t){case 0:e=`all Dimensions`;break;case 1:e=`2nd and higher Dimensions`;break;case 2:e=`3rd and higher Dimensions`;break;case 7:e=`8th Dimensions`;break;default:e=`${t+1}th and higher Dimensions`;break}let n=t===8?``:`Production from ${e} is disabled.`;return`Infinity Point and Eternity Point gain are Dilated.
      Game speed is reduced to ${formatInt(1)} and gradually comes back over ${formatInt(10)} minutes.
      Black Hole storing, discharging, pulsing, and inversion are all disabled.
      ${n}`},description(){return`Antimatter generates entropy inside of this Reality.\
      At ${formatPercents(1)} entropy, the Reality becomes destabilized\
      and you gain a reward based on how quickly you reached ${formatPercents(1)}.
      Destabilizing the Reality in less than ${formatInt(30)} seconds makes it become significantly more difficult,\
      in exchange for giving a much stronger reward.\
      Doing this ${formatInt(8)} times will also give a ${formatX(8)} to Dark Energy gain.`}}];var IC=D({name:`ModalCloseButton`,components:{PrimaryButton:L}},function(){var e=this,t=e._self._c;return t(`PrimaryButton`,{staticClass:`o-primary-btn--modal-close c-modal__close-btn`,on:{click:e.emitClick}},[e._v(` × `)])},[],!1,null,null,null,null).exports,LC={name:`ModalConfirmationCheck`,props:{option:{type:String,required:!0}},data(){return{setting:!0}},computed:{confirmation(){return ConfirmationTypes[this.option]},confirmationClass(){return{"c-modal__confirmation-toggle__checkbox":!0,"c-modal__confirmation-toggle__checkbox--active":!this.setting}},tooltipText(){return`${this.setting?`Disable`:`Reenable`} the ${this.confirmation.name} confirmation`}},created(){this.setting=this.confirmation.option},methods:{toggle(){this.setting=!this.setting,this.confirmation.option=this.setting}}},RC=D(LC,function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`c-modal__confirmation-toggle`,on:{click:e.toggle}},[t(`div`,{class:e.confirmationClass},[e.setting?e._e():t(`span`,{staticClass:`fas fa-check`}),t(`div`,{staticClass:`c-modal__confirmation-toggle__tooltip`},[e._v(` `+e._s(e.tooltipText)+` `)])]),t(`span`,{staticClass:`c-modal__confirmation-toggle__text`},[e._v(` Don't show this message again `)])])},[],!1,null,null,null,null).exports,zC=r({name:`ModalWrapperChoice`,components:{PrimaryButton:L,ModalConfirmationCheck:RC,ModalCloseButton:IC},props:{cancelClass:{type:String,required:!1,default:`o-primary-btn--width-medium c-modal-message__okay-btn`},confirmClass:{type:String,required:!1,default:`o-primary-btn--width-medium c-modal-message__okay-btn c-modal__confirm-btn`},showCancel:{type:Boolean,required:!1,default:!0},showConfirm:{type:Boolean,required:!1,default:!0},option:{type:String,required:!1,default:void 0},confirmFn:{type:Function,required:!1,default:void 0},cancelFn:{type:Function,required:!1,default:void 0}},created(){this.on$(GAME_EVENT.ENTER_PRESSED,this.doConfirm)},methods:{doConfirm(){this.confirmFn?this.confirmFn():(this.$emit(`confirm`),EventHub.dispatch(GAME_EVENT.CLOSE_MODAL))},doCancel(){this.cancelFn?this.cancelFn():(this.$emit(`cancel`),EventHub.dispatch(GAME_EVENT.CLOSE_MODAL))},closeModal(){EventHub.dispatch(GAME_EVENT.CLOSE_MODAL)}}}),BC=D(zC,function(){var e=this,t=e._self._c;return e._self._setupProxy,t(`div`,{staticClass:`c-modal-message l-modal-content--centered`},[t(`span`,{staticClass:`c-modal__header`},[t(`ModalCloseButton`,{on:{click:e.closeModal}}),e.$slots.header?t(`span`,{staticClass:`c-modal__title`},[e._t(`header`)],2):e._e()],1),e._t(`default`),e.option?t(`ModalConfirmationCheck`,{attrs:{option:e.option}}):e._e(),t(`div`,{staticClass:`l-modal-buttons`},[e.showCancel?t(`PrimaryButton`,{class:e.cancelClass,on:{click:e.doCancel}},[e._t(`cancel-text`,function(){return[e._v(` Cancel `)]})],2):e._e(),e._t(`extra-buttons`),e.showConfirm?t(`PrimaryButton`,{class:e.confirmClass,on:{click:e.doConfirm}},[e._t(`confirm-text`,function(){return[e._v(` Confirm `)]})],2):e._e()],2)],2)},[],!1,null,`7c8103d7`,null,null).exports,VC={name:`CloudInvalidDataModal`,components:{ModalWrapperChoice:BC},props:{isSaving:{type:Boolean,required:!0}},computed:{conflict(){return this.$viewModel.modal.cloudConflict},overwriteText(){return this.isSaving?`Overwrite Cloud Save`:`Load save from Cloud`}},methods:{ignore(){EventHub.dispatch(GAME_EVENT.CLOSE_MODAL)},overwrite(){this.conflict.onAccept?.(),EventHub.dispatch(GAME_EVENT.CLOSE_MODAL)}}},HC=D(VC,function(){var e=this,t=e._self._c;return t(`ModalWrapperChoice`,{staticClass:`c-modal-options__large`,attrs:{"cancel-class":`c-modal-message__okay-btn`,"confirm-class":`c-modal-message__okay-btn c-modal__confirm-btn`,"cancel-fn":e.overwrite},on:{confirm:function(t){return e.ignore()}},scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` Could not compare with Cloud Save `)]},proxy:!0},{key:`cancel-text`,fn:function(){return[e._v(` `+e._s(e.overwriteText)+` `)]},proxy:!0},{key:`confirm-text`,fn:function(){return[e._v(` Do not overwrite `)]},proxy:!0}])},[e._v(` While attempting to compare your saves, the game was unable to properly process the data in your Cloud save. This is most likely due to the Cloud save being very outdated, using a data format from a much older version of the game. `),t(`br`),t(`br`),e.isSaving?t(`span`,[e._v(` It is probably safe to overwrite your Cloud save. You can click "Cloud load" and force the save to be loaded if you would like to attempt to convert it to a valid save format that you can use. `)]):t(`span`,[e._v(` You can try to load your data from the Cloud if desired. The game will attempt to load in your Cloud data by converting its format, but this may not work and in the worst case may require you to reset this save slot in order for the game to work again. `)]),t(`br`),e._v(` Note: This modal will show up regardless of your settings, because this issue will continue to prevent the 10-minute autosave until it is resolved. `)])},[],!1,null,null,null,null).exports,UC={name:`SaveInfoEntry`,props:{saveId:{type:Number,required:!1,default:0},saveData:{type:Object,required:!0},otherData:{type:Object,required:!0},showName:{type:Boolean,required:!1,default:!0},saveType:{type:String,required:!0}},computed:{timePlayed(){return`Time Played: ${TimeSpan.fromMilliseconds(this.saveData.realTimePlayed).toString()}`},antimatter(){return this.compareLayeredValues([`pelleAM`,`totalAntimatter`],[`Total Doomed Antimatter:`,`Total Antimatter:`],[format,format],``)},prestigeCount(){return this.compareLayeredValues([`remnants`,`realities`,`eternities`,`infinities`],[`Remnants:`,`Realities:`,`Eternities:`,`Infinities:`],[format,this.formatSmall,this.formatSmall,this.formatSmall],`(No prestige layers reached yet.)`)},prestigeResource(){return this.compareLayeredValues([`realityShards`,`imaginaryMachines`,`realityMachines`,`eternityPoints`,`infinityPoints`],[`Reality Shards:`,`Reality Machines:`,`Reality Machines:`,`Eternity Points:`,`Infinity Points:`],[format,e=>formatMachines(this.saveData.realityMachines,e),format,format,format],``)},extraProgressIndicator(){return this.compareLayeredValues([`pelleLore`,`bestLevel`,`dilatedTime`],[`Your Reality is Doomed.`,`Best Glyph Level:`,`Dilated Time:`],[()=>``,formatInt,format],``)},name(){return this.saveData.saveName}},methods:{formatSmall(e){return Decimal.gt(e,1e4)?format(e,2):formatInt(e)},compareLayeredValues(e,t,n,r){let i,a;for(let t=0;t<e.length;t++){let n=e[t];if(!(Decimal.eq(this.saveData[n],0)&&Decimal.eq(this.otherData[n],0)))if(Decimal.eq(this.saveData[n],this.otherData[n])){a=!0,i=0;break}else if(Decimal.neq(this.saveData[n],0)&&Decimal.neq(this.otherData[n],0)){a=!0,i=Decimal.gt(this.saveData[n],this.otherData[n])?1:-1;break}else{a=!1,i=Decimal.gt(this.saveData[n],0)?1:-1;break}}let o=r,s=``;for(let r=0;r<e.length;r++){let i=e[r];if(Decimal.gt(this.saveData[i],0)){o=t[r],s=n[r](this.saveData[i],2);break}}if(i===0)return`${o} ${s}`;let c=`<span style="color:#${(e=>getComputedStyle(document.body).getPropertyValue(`--color-${e}`).split(`#`)[1])(i===1?`good`:`infinity`)}">`;return a?`${o} ${c}${s}</span>`:`${c}${o} ${s}</span>`}}},WC=D(UC,function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-modal-options__save-record`},[t(`h3`,[e._v(e._s(e.saveType)+` `),e.saveId?t(`span`,[e._v(`(Slot #`+e._s(e.saveId+1)+`):`)]):e._e()]),e.showName?t(`span`,[e.name?t(`span`,[e._v(` Save Name: `+e._s(e.name)+` `)]):t(`span`,[e._v(` Unnamed Save `)]),t(`br`)]):e._e(),e._v(` `+e._s(e.timePlayed)+` `),t(`br`),t(`span`,{domProps:{innerHTML:e._s(e.antimatter)}}),t(`span`,{domProps:{innerHTML:e._s(e.prestigeCount)}}),t(`span`,{domProps:{innerHTML:e._s(e.prestigeResource)}}),t(`span`,{domProps:{innerHTML:e._s(e.extraProgressIndicator)}}),t(`br`),e._t(`default`)],2)},[],!1,null,null,null,null).exports,GC=D({name:`CloudLoadConflictModal`,components:{ModalWrapperChoice:BC,SaveInfoEntry:WC},computed:{conflict(){return this.$viewModel.modal.cloudConflict},older(){return this.conflict.saveComparison.older===1},farther(){return this.conflict.saveComparison.farther===1},hasDifferentName(){return this.conflict.cloud.saveName!==this.conflict.local.saveName},suggestionText(){let e=`style="color: var(--color-bad)"`,t=[`Loading this Cloud save `],n=this.conflict.cloud.compositeProgress,r=this.conflict.local.compositeProgress,i=this.farther&&Math.abs(n-r)>.15;return t.push(i?`<b ${e}>would cause your local save to lose significant progress</b>`:`<b style="color: var(--color-good)">is probably safe</b>`),this.hasDifferentName&&t.push(`<br>${i?`Additionally`:`However`}, the Cloud save
          <b ${e}>may be a save from a different device</b>.`),(i||this.hasDifferentName)&&t.push(`<br><b ${e}>Are you sure you wish to overwrite your local save?</b>`),t.join(``)}},methods:{confirm(){this.conflict.onAccept?.(),EventHub.dispatch(GAME_EVENT.CLOSE_MODAL)}}},function(){var e=this,t=e._self._c;return t(`ModalWrapperChoice`,{staticClass:`c-modal-options__large`,attrs:{"cancel-class":`c-modal-message__okay-btn`,"confirm-class":`c-modal-message__okay-btn c-modal__confirm-btn`,"confirm-fn":e.confirm},scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` Load Game from Cloud `)]},proxy:!0},{key:`cancel-text`,fn:function(){return[e._v(` Keep Local Save `)]},proxy:!0},{key:`confirm-text`,fn:function(){return[e._v(` Overwrite Local with Cloud Save `)]},proxy:!0}])},[e.hasDifferentName?t(`span`,[e._v(` Your Local and Cloud Saves have `),t(`b`,[e._v(`different names`)]),e._v(`. `)]):e.older?t(`span`,[e._v(` Loading from the Cloud would `),t(`b`,[e._v(`load a save with less playtime`)]),e._v(`. `)]):e.farther?t(`span`,[e._v(` Loading from the Cloud would `),t(`b`,[e._v(`cause you to lose progress`)]),e._v(`. `)]):t(`span`,[e._v(` Your Local Save and Cloud Save `),t(`b`,[e._v(`appear to have similar amounts of progress`)]),e._v(`. `)]),e._v(` Please select the save you want to load. `),t(`br`),t(`br`),t(`SaveInfoEntry`,{attrs:{"save-data":e.conflict.local,"other-data":e.conflict.cloud,"save-id":e.conflict.saveId,"show-name":e.hasDifferentName,"save-type":`Local Save`}}),t(`SaveInfoEntry`,{attrs:{"save-data":e.conflict.cloud,"other-data":e.conflict.local,"save-id":e.conflict.saveId,"show-name":e.hasDifferentName,"save-type":`Cloud Save`}}),t(`span`,{domProps:{innerHTML:e._s(e.suggestionText)}})],1)},[],!1,null,null,null,null).exports,KC=D({name:`CloudSaveConflictModal`,components:{ModalWrapperChoice:BC,SaveInfoEntry:WC},computed:{conflict(){return this.$viewModel.modal.cloudConflict},older(){return this.conflict.saveComparison.older===-1},farther(){return this.conflict.saveComparison.farther===-1},hasDifferentName(){return this.conflict.cloud.saveName!==this.conflict.local.saveName},wrongHash(){return this.conflict.saveComparison.hashMismatch},suggestionText(){let e=`style="color: var(--color-infinity)"`,t=[`Saving to the Cloud `],n=this.conflict.cloud.compositeProgress,r=this.conflict.local.compositeProgress,i=this.farther&&Math.abs(n-r)>.15;return t.push(i?`<b ${e}>would overwrite a save with significantly more progress</b>`:`<b style="color: var(--color-good)">is probably safe</b>`),(this.hasDifferentName||this.wrongHash)&&t.push(` ${i?`Additionally`:`However`}, you may be overwriting a 
          <b ${e}>save from a different device</b>.`),(i||this.hasDifferentName||this.wrongHash)&&t.push(`<br><b ${e}>Are you sure you wish to overwrite the Cloud save?</b>`),t.join(``)},noOverwriteInfo(){return`Save conflicts will keep occurring without overwriting.`},overwriteInfo(){return`If another device is also saving to the cloud on this Google Account at the same time,
        this modal may appear repeatedly.`}},methods:{doNotSave(){player.options.cloudEnabled=!1,EventHub.dispatch(GAME_EVENT.CLOSE_MODAL)},overwrite(){this.conflict.onAccept?.(),EventHub.dispatch(GAME_EVENT.CLOSE_MODAL)}}},function(){var e=this,t=e._self._c;return t(`ModalWrapperChoice`,{staticClass:`c-modal-options__large`,attrs:{"cancel-class":`c-modal-message__okay-btn`,"confirm-class":`c-modal-message__okay-btn c-modal__confirm-btn`,"cancel-fn":e.overwrite},on:{confirm:function(t){return e.doNotSave()}},scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` Save Game to Cloud `)]},proxy:!0},{key:`cancel-text`,fn:function(){return[e._v(` Overwrite Cloud Save `)]},proxy:!0},{key:`confirm-text`,fn:function(){return[e._v(` Do not overwrite `)]},proxy:!0}])},[e.wrongHash?t(`span`,[e._v(` Your Cloud Save has been `),t(`b`,[e._v(`changed by a different device`)]),e._v(` since you last saved to the Cloud this session. `)]):e.hasDifferentName?t(`span`,[e._v(` Your Local and Cloud Saves have `),t(`b`,[e._v(`different names`)]),e._v(`. `)]):e.older?t(`span`,[e._v(` Saving to the Cloud would `),t(`b`,[e._v(`overwrite an older save`)]),e._v(`. `)]):e.farther?t(`span`,[e._v(` Saving to the Cloud would `),t(`b`,[e._v(`overwrite a save with more progress`)]),e._v(`. `)]):t(`span`,[e._v(` Your Local Save and Cloud Save `),t(`b`,[e._v(`appear to have similar amounts of progress`)]),e._v(`. `)]),t(`br`),t(`SaveInfoEntry`,{attrs:{"save-data":e.conflict.local,"other-data":e.conflict.cloud,"save-id":e.conflict.saveId,"show-name":e.hasDifferentName,"save-type":`Local Save`}}),t(`SaveInfoEntry`,{attrs:{"save-data":e.conflict.cloud,"other-data":e.conflict.local,"save-id":e.conflict.saveId,"show-name":e.hasDifferentName,"save-type":`Cloud Save`}}),t(`span`,{domProps:{innerHTML:e._s(e.suggestionText)}}),t(`br`),t(`span`,[e._v(` Not overwriting will turn off Cloud saving and you will need to manually turn it back on again if you want to use it. `),t(`span`,{attrs:{"ach-tooltip":e.noOverwriteInfo}},[t(`i`,{staticClass:`fas fa-question-circle`})])]),t(`span`,[e._v(` Overwriting will force a save to the Cloud in this particular instance; in most cases this should prevent this modal from reappearing afterwards. `),t(`span`,{attrs:{"ach-tooltip":e.overwriteInfo}},[t(`i`,{staticClass:`fas fa-question-circle`})])])],1)},[],!1,null,null,null,null).exports,qC={name:`EternityChallengeStartModal`,components:{ModalWrapperChoice:BC},props:{id:{type:Number,required:!0}},computed:{challenge(){return EternityChallenge(this.id)},challengeIsCompleted(){return this.challenge.isFullyCompleted},message(){return`You will go eternal (if possible) and start a new Eternity within the Challenge, with all the
        Challenge-specific restrictions and modifiers active.
        To complete the Challenge${this.challengeIsCompleted?``:` and gain its reward`},
        you must reach the Challenge goal of
        ${format(this.challenge.currentGoal)} Infinity Points. You can complete Eternity Challenges up to
        ${formatInt(5)} times, with increasing goals and bonuses.`},entranceLabel(){return`You are about to enter Eternity Challenge ${this.id}`},reward(){let e=this.challenge._config.reward.description;return typeof e==`function`&&(e=e()),`The reward for completing this challenge is: ${e}`},condition(){let e=this.challenge._config.description;return typeof e==`function`&&(e=e()),`Inside this Eternity Challenge, ${e}`}},created(){this.on$(GAME_EVENT.ETERNITY_RESET_AFTER,this.emitClose),this.on$(GAME_EVENT.REALITY_RESET_AFTER,this.emitClose)},methods:{handleYesClick(){this.challenge.start(!0),EventHub.ui.offAll(this)}}},JC=D(qC,function(){var e=this,t=e._self._c;return t(`ModalWrapperChoice`,{attrs:{option:`challenges`},on:{confirm:e.handleYesClick},scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` `+e._s(e.entranceLabel)+` `)]},proxy:!0},{key:`confirm-text`,fn:function(){return[e._v(` Begin `)]},proxy:!0}])},[t(`div`,{staticClass:`c-modal-message__text`},[e._v(` `+e._s(e.message)+` `),t(`br`),t(`br`),e._v(` `+e._s(e.condition)+` `)]),e.challengeIsCompleted?e._e():t(`div`,{staticClass:`c-modal-message__text`},[t(`br`),e._v(` `+e._s(e.reward)+` `)])])},[],!1,null,null,null,null).exports,YC={name:`InfinityChallengeStartModal`,components:{ModalWrapperChoice:BC},props:{id:{type:Number,required:!0}},computed:{challenge(){return InfinityChallenge(this.id)},challengeIsCompleted(){return this.challenge.isCompleted},message(){return`You will Big Crunch (if possible) and start a new Infinity within the Challenge with all the
        Challenge-specific restrictions and modifiers active.
        To complete the Challenge${this.challengeIsCompleted?``:` and gain its reward`},
        you must reach the Challenge goal of
        ${format(InfinityChallenge(this.id).goal)} Antimatter.
        You do not start with any Dimension Boosts or Galaxies, regardless of upgrades.`},entranceLabel(){return`You are about to enter Infinity Challenge ${this.id}`},reward(){let e=this.challenge._config.reward.description;return typeof e==`function`&&(e=e()),`The reward for completing this challenge is: ${e}`},condition(){let e=this.challenge._config.description;return typeof e==`function`&&(e=e()),`Inside this Infinity Challenge, ${e}`}},created(){this.on$(GAME_EVENT.ETERNITY_RESET_AFTER,this.emitClose),this.on$(GAME_EVENT.REALITY_RESET_AFTER,this.emitClose)},methods:{handleYesClick(){this.challenge.start()}}},XC=D(YC,function(){var e=this,t=e._self._c;return t(`ModalWrapperChoice`,{attrs:{option:`challenges`},on:{confirm:e.handleYesClick},scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` `+e._s(e.entranceLabel)+` `)]},proxy:!0},{key:`confirm-text`,fn:function(){return[e._v(` Begin `)]},proxy:!0}])},[t(`div`,{staticClass:`c-modal-message__text`},[e._v(` `+e._s(e.message)+` `),t(`br`),t(`br`),e._v(` `+e._s(e.condition)+` `)]),e.challengeIsCompleted?e._e():t(`div`,{staticClass:`c-modal-message__text`},[t(`br`),e._v(` `+e._s(e.reward)+` `)])])},[],!1,null,null,null,null).exports,ZC=D({name:`MessageModal`,components:{PrimaryButton:L,ModalCloseButton:IC},data(){return{message:``}},computed:{modal(){return this.$viewModel.modal.current},isThemeS12(){return this.$viewModel.theme===`S12`}},created(){this.on$(GAME_EVENT.ENTER_PRESSED,this.handleClick)},methods:{update(){this.message=this.modal?.message},handleClick(){this.modal.callback?.(),this.emitClose(),EventHub.ui.offAll(this)}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`c-modal-message l-modal-content--centered`},[e.modal.closeButton?t(`ModalCloseButton`,{class:e.isThemeS12?`c-modal__close-btn`:`c-modal__close-btn--tiny`,on:{click:e.emitClose}}):e.isThemeS12?t(`ModalCloseButton`,{staticClass:`c-modal__close-btn c-modal__close-btn--disabled`}):e._e(),t(`div`,{staticClass:`c-modal-message__text`,domProps:{innerHTML:e._s(e.message)}}),t(`PrimaryButton`,{staticClass:`o-primary-btn--width-medium c-modal-message__okay-btn c-modal__confirm-btn`,on:{click:e.handleClick}},[e._v(` Okay `)]),e.isThemeS12?t(`div`,{staticClass:`c-modal__title`},[e._v(` Message `)]):e._e()],1)},[],!1,null,null,null,null).exports,QC={name:`NormalChallengeStartModal`,components:{ModalWrapperChoice:BC},props:{id:{type:Number,required:!0}},computed:{challenge(){return NormalChallenge(this.id)},challengeIsCompleted(){return this.challenge.isCompleted},message(){return`You will Big Crunch (if possible) and start a new Infinity within the Challenge with all the
        Challenge-specific restrictions and modifiers active.
        To complete the Challenge${this.challengeIsCompleted?``:` and gain its reward`},
        you must reach Infinity again.
        You do not start with any Dimension Boosts or Galaxies, regardless of upgrades.`},entranceLabel(){return`You are about to enter Challenge ${this.id}`},reward(){return`The reward for completing this challenge is: ${this.challenge._config.reward}`},condition(){let e=this.challenge._config.description;return typeof e==`function`&&(e=e()),`Inside this Challenge, ${e}`}},created(){this.on$(GAME_EVENT.ETERNITY_RESET_AFTER,this.emitClose),this.on$(GAME_EVENT.REALITY_RESET_AFTER,this.emitClose)},methods:{handleYesClick(){this.challenge.start()}}},$C=D(QC,function(){var e=this,t=e._self._c;return t(`ModalWrapperChoice`,{attrs:{option:`challenges`},on:{confirm:e.handleYesClick},scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` `+e._s(e.entranceLabel)+` `)]},proxy:!0},{key:`confirm-text`,fn:function(){return[e._v(` Begin `)]},proxy:!0}])},[t(`div`,{staticClass:`c-modal-message__text`},[e._v(` `+e._s(e.message)+` `),t(`br`),t(`br`),e._v(` `+e._s(e.condition)+` `)]),e.challengeIsCompleted?e._e():t(`div`,{staticClass:`c-modal-message__text`},[t(`br`),e._v(` `+e._s(e.reward)+` `)])])},[],!1,null,null,null,null).exports,ew={name:`AntimatterGalaxyModal`,components:{ModalWrapperChoice:BC},props:{bulk:{type:Boolean,required:!0}},data(){return{newGalaxies:0,keepAntimatter:!1,perkANRBought:!1,keepDimBoost:!1}},computed:{topLabel(){return this.bulk?`You are about to purchase ${quantifyInt(`Antimatter Galaxy`,this.newGalaxies)}`:`You are about to purchase an Antimatter Galaxy`},message(){let e=[];Pelle.isDoomed&&e.push(`Antimatter`,`Antimatter Dimensions`,`Tickspeed`),this.perkANRBought||e.push(`Antimatter Dimensions`,`Tickspeed`),this.keepDimBoost||e.push(`Dimension Boosts`),!this.keepAntimatter&&!this.perkANRBought&&e.push(`Antimatter`);let t=makeEnumeration(e),n=``;InfinityChallenge(3).isRunning?n=`Infinity Challenge ${InfinityChallenge(3).id}`:Ra.isRunning&&(n=`${Ra.displayName}'s Reality`);let r=n===``?`you will receive a small boost to Tickspeed Upgrades.`:`you will not receive a boost to Tickspeed Upgrades, because you are in ${n}.`,i=t===``?`This will reset nothing, and ${r}`:`This will reset your ${t}. However, ${r}`;return this.bulk?`Are you sure you want to purchase
      ${quantifyInt(`Antimatter Galaxy`,this.newGalaxies)}? ${i}`:`Are you sure you want to purchase an Antimatter Galaxy? ${i}`}},created(){this.on$(GAME_EVENT.DIMBOOST_AFTER,()=>BreakInfinityUpgrade.autobuyMaxDimboosts.isBought?void 0:this.emitClose())},methods:{update(){if(this.bulk){let e=Galaxy.requirement,t=AntimatterDimension(e.tier);Galaxy.buyableGalaxies(Decimal.floor(t.totalAmount.toNumber())).gt(player.galaxies)&&(this.newGalaxies=Galaxy.buyableGalaxies(Decimal.floor(t.totalAmount.toNumber())).sub(player.galaxies))}this.keepAntimatter=Achievement(111).isUnlocked,this.perkANRBought=Perk.antimatterNoReset.canBeApplied,this.keepDimBoost=Achievement(143).isUnlocked&&!Pelle.isDoomed||PelleUpgrade.galaxyNoResetDimboost.canBeApplied},handleYesClick(){requestGalaxyReset(this.bulk),EventHub.ui.offAll(this)}}},tw=D(ew,function(){var e=this,t=e._self._c;return t(`ModalWrapperChoice`,{attrs:{option:`antimatterGalaxy`},on:{confirm:e.handleYesClick},scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` `+e._s(e.topLabel)+` `)]},proxy:!0}])},[t(`div`,{staticClass:`c-modal-message__text`},[e._v(` `+e._s(e.message)+` `)])])},[],!1,null,null,null,null).exports,nw=D({name:`ArmageddonModal`,components:{ModalWrapperChoice:BC},data(){return{isDoomed:!1,remnantsGain:new Decimal(0),realityShardGain:new Decimal(0),nextRealityShardGain:new Decimal(0),canArmageddon:!1}},computed:{topLabel(){return this.isDoomed?`You are about to perform an Armageddon reset`:`You are about to Doom your Reality`},message(){let e=Currency.remnants.eq(0)?`which will produce ${format(this.nextRealityShardGain,2,2)} Reality Shards/s`:`which will increase your Reality Shards gain from ${format(this.realityShardGain,2,2)}/s
          to ${format(this.nextRealityShardGain,2,2)}/s`;return`Armageddon will start a new Doomed Reality. You will gain
      ${quantify(`Remnant`,this.remnantsGain,2,0)} ${e}`}},methods:{update(){this.isDoomed=Pelle.isDoomed,this.remnantsGain.copyFrom(Pelle.remnantsGain),this.realityShardGain.copyFrom(Pelle.realityShardGainPerSecond),this.nextRealityShardGain.copyFrom(Pelle.nextRealityShardGain),this.canArmageddon=Pelle.canArmageddon},handleYesClick(){Pelle.initializeRun()}}},function(){var e=this,t=e._self._c;return t(`ModalWrapperChoice`,{attrs:{option:e.isDoomed?`armageddon`:void 0},on:{confirm:e.handleYesClick},scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` `+e._s(e.topLabel)+` `)]},proxy:!0}])},[e.isDoomed?t(`div`,{staticClass:`c-modal-message__text`},[e._v(` `+e._s(e.message)+` `)]):t(`div`,{staticClass:`c-modal-message__text`},[e._v(` Dooming your Reality will reset everything except Challenge records, Celestial progress and anything under the General and Reality header on the Statistics tab. You will not gain any rewards from your progress in your current Reality. Dooming your Reality will also purge most of your unprotected Glyphs and disable certain game mechanics. `),t(`br`),t(`br`),e._v(` Are you sure you want to do this? `)])])},[],!1,null,null,null,null).exports,rw={name:`ResetModal`,components:{ModalWrapperChoice:BC},props:{header:{type:String,required:!0},message:{type:String,required:!0},gainedResources:{type:String,required:!0},startingResources:{type:String,required:!1,default:void 0},confirmOption:{type:String,required:!1,default:void 0},confirmFn:{type:Function,required:!0},alternateText:{type:String,required:!1,default:void 0},alternateCondition:{type:Boolean,required:!1,default:!1}}},iw=D(rw,function(){var e=this,t=e._self._c;return t(`ModalWrapperChoice`,{attrs:{option:e.confirmOption},on:{confirm:e.confirmFn},scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` `+e._s(e.header)+` `)]},proxy:!0}])},[e.alternateCondition?t(`div`,[t(`div`,{staticClass:`c-modal-message__text`},[e._v(` `+e._s(e.alternateText)+` `)])]):t(`div`,[t(`div`,{staticClass:`c-modal-message__text`},[e._v(` `+e._s(e.message)+` `),t(`br`)]),t(`br`),t(`div`,{staticClass:`c-modal-message__text`},[e._v(` `+e._s(e.gainedResources)+` `)]),t(`br`),e.startingResources?t(`div`,{staticClass:`c-modal-message__text`},[e._v(` `+e._s(e.startingResources)+` `)]):e._e()])])},[],!1,null,null,null,null).exports,aw=D({name:`BigCrunchModal`,components:{ResetModal:iw},data(){return{gainedInfinities:new Decimal,gainedInfinityPoints:new Decimal,startingBoosts:0,startingAM:new Decimal(10),willStartWithGalaxy:!1}},computed:{isFirstInfinity(){return!PlayerProgress.infinityUnlocked()},message(){return`Upon Infinity, all Dimensions, Dimension Boosts, and Antimatter Galaxies are reset. ${this.isFirstInfinity?this.firstInfinityInfo:``}`},firstInfinityInfo(){return`In return, you gain an Infinity Point (IP). This allows you to buy multiple upgrades that you can
        find in the Infinity tab. You will also gain one Infinity, which is the stat shown in the Statistics tab.`},ipGainInfo(){return`You will gain ${quantify(`Infinity`,this.gainedInfinities,2,0)}
        and ${quantify(`Infinity Point`,this.gainedInfinityPoints,2,0)}.`},startingResources(){let e=[];return this.startingAM.gte(10)&&e.push(`${quantify(`Antimatter`,this.startingAM,2,1)}`),this.startingBoosts.gte(0)&&e.push(`${quantify(`Dimension Boost`,this.startingBoosts)}`),this.willStartWithGalaxy&&e.push(`${quantify(`Galaxy`,1)}`),`You will start your next Infinity with ${makeEnumeration(e)}.`}},methods:{update(){this.gainedInfinities=gainedInfinities().round(),this.gainedInfinityPoints=gainedInfinityPoints().round(),this.startingBoosts=DimBoost.startingDimensionBoosts,this.startingAM=Currency.antimatter.startingValue,this.willStartWithGalaxy=InfinityUpgrade.skipResetGalaxy.isBought},handleYesClick(){bigCrunchResetRequest(),EventHub.ui.offAll(this),this.isFirstInfinity&&setTimeout(()=>Modal.message.show(`This animation will occur after every manually-triggered Infinity. If
          you would like to disable it, there is a setting to do so in the Options tab. This can be done for any
          visual animation effect in the game after seeing it for the first time.`,{},3),2e3)}}},function(){var e=this,t=e._self._c;return t(`ResetModal`,{attrs:{header:`You are about to Infinity`,message:e.message,"gained-resources":e.ipGainInfo,"starting-resources":e.startingResources,"confirm-fn":e.handleYesClick,"alternate-condition":e.isFirstInfinity,"alternate-text":e.message,"confirm-option":e.isFirstInfinity?void 0:`bigCrunch`}})},[],!1,null,null,null,null).exports,ow={name:`DimensionBoostModal`,components:{ModalWrapperChoice:BC},props:{bulk:{type:Boolean,required:!0}},computed:{topLabel(){return`You are about to do a Dimension Boost Reset`},message(){return`This will ${Perk.antimatterNoReset.canBeApplied||Achievement(111).canBeApplied||PelleUpgrade.dimBoostResetsNothing.isBought?`not actually reset anything due to an upgrade you have which prevents Antimatter and Antimatter Dimensions
          from being reset in this situation. You will still gain the multiplier from the Boost, as usual.`:`reset your Antimatter and Antimatter Dimensions. Are you sure you want to do this?`}`}},methods:{handleYesClick(){requestDimensionBoost(this.bulk),EventHub.ui.offAll(this)}}},sw=D(ow,function(){var e=this,t=e._self._c;return t(`ModalWrapperChoice`,{attrs:{option:`dimensionBoost`},on:{confirm:e.handleYesClick},scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` `+e._s(e.topLabel)+` `)]},proxy:!0}])},[t(`div`,{staticClass:`c-modal-message__text`},[e._v(` `+e._s(e.message)+` `)])])},[],!1,null,null,null,null).exports,cw={name:`EnterCelestialsRaPet`,props:{petId:{type:Number,required:!0}},data(){return{isUnlocked:!1}},computed:{pet(){return Ra.pets.all[this.petId]},name(){return this.pet.name},color(){return`color: ${this.pet.color}`},gainText(){let e=this.pet.id===`enslaved`,t=e?`gain`:`gains`,n=e?`have`:`has`;return this.pet.level===25?`${n} regained all Memories`:`${t} Memory Chunks based on ${this.chunkGain}`},chunkGain(){return this.pet.chunkGain}},methods:{update(){this.isUnlocked=this.pet.isUnlocked}}},lw=D(cw,function(){var e=this,t=e._self._c;return e.isUnlocked?t(`span`,{style:e.color},[e._v(` `+e._s(e.name)+` `+e._s(e.gainText)+`. `),t(`br`)]):e._e()},[],!1,null,null,null,null).exports,uw={name:`EnterCelestialsModal`,components:{ModalWrapperChoice:BC,EnterCelestialsRaPet:lw},props:{number:{type:Number,required:!0},name:{type:String,required:!0}},data(){return{laitelaFastest:new Decimal(3600),teresaBestAM:new Decimal,teresaRunMult:new Decimal,effarigDone:!1,effarigLayer:``,enslavedDone:!1,laitelaTime:``}},computed:{effects(){return GameDatabase.celestials.descriptions[this.number].effects().split(`
`)},description(){let e=GameDatabase.celestials.descriptions[this.number].description;return e?e():``},topLabel(){return`${this.name} Reality`},message(){return`Perform a Reality reset and enter ${this.name} Reality, in which:`},extraLine(){switch(this.number){case 0:return this.teresaBestAM.eq(1)?`You have not unlocked the reward for Teresa's Reality yet. Unlocking the reward requires
              purchasing the Reality study and completing the Reality for the first time.`:`Your highest Teresa completion was for ${format(this.teresaBestAM,2,2)} antimatter,
              gaining you a ${formatX(this.teresaRunMult,2)} multiplier to Glyph Sacrifice power.`;case 1:return this.effarigDone?`Effarig is completed!`:`You are currently on the ${this.effarigLayer} Layer.`;case 2:return this.enslavedDone?`Have... we... not helped enough...`:`We... can help... Let us... help...`;case 3:return``;case 4:return`Within Ra's Reality, some resources will generate Memory Chunks
          for Celestial Memories based on their amounts:`;case 5:return this.laitelaFastest.gte(300)?`You have not completed Lai'tela at this tier.`:`Your fastest completion on this tier is ${this.laitelaTime}.`;case 6:return``;default:throw Error(`Attempted to start an Unknown Celestial in Celestial Modal Confirmation.`)}}},methods:{update(){this.teresaBestAM.copyFrom(player.celestials.teresa.bestRunAM),this.teresaRunMult.copyFrom(Teresa.runRewardMultiplier);let e=Effarig.currentStage;this.effarigDone=e===EFFARIG_STAGES.COMPLETED,this.effarigLayer=[null,`Infinity`,`Eternity`,`Reality`][e],this.enslavedDone=Enslaved.isCompleted,this.laitelaFastest.copyFrom(player.celestials.laitela.fastestCompletion),this.laitelaTime=TimeSpan.fromSeconds(this.laitelaFastest).toStringShort()},handleYesClick(){switch(beginProcessReality(getRealityProps(!0)),this.number){case 0:return Teresa.initializeRun();case 1:return Effarig.initializeRun();case 2:return Enslaved.initializeRun();case 3:return V.initializeRun();case 4:return Ra.initializeRun();case 5:return Laitela.initializeRun();case 6:throw Error(`Attempted to start Pelle through EnterCelestialsModal instead of ArmageddonModal`);default:throw Error(`Attempted to start an Unknown Celestial in Celestial Modal Confirmation.`)}}}},dw=D(uw,function(){var e=this,t=e._self._c;return t(`ModalWrapperChoice`,{on:{confirm:e.handleYesClick},scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` `+e._s(e.topLabel)+` `)]},proxy:!0},{key:`confirm-text`,fn:function(){return[e._v(` Begin `)]},proxy:!0}])},[t(`div`,{staticClass:`c-modal-message__text`},[e._v(` `+e._s(e.message)+` `),t(`br`),t(`br`),t(`div`,{staticClass:`c-modal-celestial__run-effects`},e._l(e.effects,function(n,r){return t(`div`,{key:r,staticClass:`c-modal-celestial__run-effects__line`},[n.trim()?t(`b`,[e._v(`•`)]):e._e(),t(`b`,[e._v(`\xA0`)]),e._v(` `+e._s(n)+` `)])}),0),e.description?t(`div`,{staticClass:`reality-description`},[t(`br`),t(`br`),e._v(` `+e._s(e.description)+` `)]):e._e(),t(`br`),t(`br`),t(`div`,[e._v(` `+e._s(e.extraLine)+` `)]),e.number===4?t(`span`,e._l(4,function(e){return t(`EnterCelestialsRaPet`,{key:e,attrs:{"pet-id":e-1}})}),1):e._e()])])},[],!1,null,`32f769f6`,null,null).exports,fw={isDisplaying:!1,displayForce(e,t){document.body.style.animation=`${e} ${t}s 1`,this.isDisplaying=!0,setTimeout(()=>{document.body.style.animation=``,this.isDisplaying=!1},t*1e3)},display(e,t){this.isDisplaying||this.displayForce(e,t)}},pw=D({name:`EnterDilationModal`,components:{ModalWrapperChoice:BC},computed:{message(){return`Dilating time will start a new Eternity, and all Dimension multiplier's exponents and
        tickspeed multiplier's exponent will be reduced to ${formatPow(.75,2,2)}. If you can Eternity while Dilated,
        your Tachyon Particles will be increased to a value based on your highest antimatter and any Tachyon Particle
        multipliers you have.`},entranceLabel(){return`You are about to enter Dilation`},EPSinceLabel(){return player.dilation.lastEP.eq(-1)?`This is your first Dilation`:!isInCelestialReality()&&Ra.unlocks.unlockDilationStartingTP.canBeApplied?`You already have the maximum feasible amount of Tachyon Particles you can attain due to
          Teresa's Level ${formatInt(25)} reward.`:`You last completed Dilation at ${format(player.dilation.lastEP,2,2)} Eternity Points.`}},methods:{handleYesClick(){player.dilation.active||(player.options.animations.dilation&&!fw.isDisplaying?animateAndDilate():(startDilatedEternity(),Pelle.isDoomed&&PelleStrikes.dilation.trigger()))}}},function(){var e=this,t=e._self._c;return t(`ModalWrapperChoice`,{attrs:{option:`dilation`},on:{confirm:e.handleYesClick},scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` `+e._s(e.entranceLabel)+` `)]},proxy:!0},{key:`confirm-text`,fn:function(){return[e._v(` Enter `)]},proxy:!0}])},[t(`div`,{staticClass:`c-modal-message__text`},[e._v(` `+e._s(e.EPSinceLabel)+` `),t(`br`),t(`br`),e._v(` `+e._s(e.message)+` `)])])},[],!1,null,null,null,null).exports,mw=D({name:`EternityModal`,components:{ResetModal:iw},data(){return{exitingEC:!1,startingIP:new Decimal,gainedEternityPoints:new Decimal,gainedEternities:new Decimal}},computed:{message(){return PlayerProgress.eternityUnlocked()?`Eternity will reset everything except Achievements, Challenge records, and anything under the General header
          on the Statistics tab.`:`Eternity will reset everything except Achievements, Challenge records, and anything under the General header
          on the Statistics tab. You will also gain an Eternity Point and unlock various upgrades.`},gainedEPOnEternity(){return`You will gain ${quantify(`Eternity`,this.gainedEternities,2)} 
      and ${quantify(`Eternity Point`,this.gainedEternityPoints,2)} on Eternity.`},startWithIP(){return this.startingIP.gt(0)?`You will start your next Eternity with ${quantify(`Infinity Point`,this.startingIP,2)}.`:``},eternityChallenge(){let e=EternityChallenge.current;if(e.isFullyCompleted)return`Eternity Challenge ${e.id} is already fully completed.`;if(!Perk.studyECBulk.isBought)return`You will gain one completion of Eternity Challenge ${e.id}.`;let t=e.gainedCompletionStatus.gainedCompletions;return`You will gain ${quantifyInt(`completion`,t)} for Eternity Challenge ${e.id}.`}},methods:{update(){this.exitingEC=EternityChallenge.isRunning,this.startingIP=Currency.infinityPoints.startingValue,this.gainedEternityPoints=gainedEternityPoints(),this.gainedEternities=gainedEternities()},handleYesClick(){animateAndEternity(),EventHub.ui.offAll(this)}}},function(){var e=this,t=e._self._c;return t(`ResetModal`,{attrs:{header:e.exitingEC?`Complete Eternity Challenge`:`You are about to Eternity`,message:e.message,"gained-resources":e.gainedEPOnEternity,"starting-resources":e.startWithIP,"confirm-fn":e.handleYesClick,"alternate-condition":e.exitingEC,"alternate-text":e.exitingEC?e.eternityChallenge:void 0,"confirm-option":`eternity`}})},[],!1,null,null,null,null).exports,hw={name:`ExitChallengeModal`,components:{ModalWrapperChoice:BC},props:{challengeName:{type:String,required:!0},normalName:{type:String,required:!0},hasHigherLayers:{type:Boolean,required:!0},exitFn:{type:Function,required:!0}},computed:{isCelestial(){return this.challengeName.match(`Reality`)},isRestarting(){return this.isCelestial?player.options.retryCelestial:player.options.retryChallenge}},methods:{handleYesClick(){this.exitFn(),EventHub.ui.offAll(this)}}},gw=D(hw,function(){var e=this,t=e._self._c;return t(`ModalWrapperChoice`,{attrs:{option:`exitChallenge`},on:{confirm:e.handleYesClick},scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` You are about to `+e._s(e.isRestarting?`restart`:`exit`)+` `+e._s(e.challengeName)+` `)]},proxy:!0},{key:`confirm-text`,fn:function(){return[e._v(` `+e._s(e.isRestarting?`Restart`:`Exit`)+` `)]},proxy:!0}])},[t(`div`,{staticClass:`c-modal-message__text`},[e.isRestarting?t(`span`,[e._v(` You will immediately re-enter `+e._s(e.challengeName)+` again after confirming this modal. `)]):t(`span`,[e._v(` This will place you back into a regular `+e._s(e.normalName)+` without any restrictions. `)]),e.hasHigherLayers?t(`span`,[e._v(` Other effects coming from higher-layer restrictions will still continue to apply. `)]):e._e()])])},[],!1,null,null,null,null).exports,_w=D({name:`ExitDilationModal`,components:{ModalWrapperChoice:BC},data(){return{tachyonGain:new Decimal(0),isDoomed:!1}},computed:{gainText(){return this.tachyonGain.lte(0)?`not gain anything`:`gain ${quantify(`Tachyon Particle`,this.tachyonGain,2,1)}`},isInEC(){return Player.anyChallenge instanceof EternityChallengeState},confirmText(){return this.isDoomed?`Okay`:`Exit`}},methods:{update(){player.dilation.active||this.emitClose(),this.tachyonGain.copyFrom(getTachyonGain(!0)),this.isDoomed=Pelle.isDoomed},handleYesClick(){player.dilation.active&&(player.options.animations.dilation&&!fw.isDisplaying?animateAndUndilate():eternity(!1,!1,{switchingDilation:!0}))}}},function(){var e=this,t=e._self._c;return t(`ModalWrapperChoice`,{attrs:{option:`dilation`},on:{confirm:e.handleYesClick},scopedSlots:e._u([{key:`header`,fn:function(){return[e.isDoomed?t(`span`,[e._v(` You cannot exit Dilation while Doomed `)]):t(`span`,[e._v(` You are about to exit Dilation `)])]},proxy:!0},{key:`confirm-text`,fn:function(){return[e._v(` `+e._s(e.confirmText)+` `)]},proxy:!0}])},[t(`div`,{staticClass:`c-modal-message__text`},[e.isDoomed?t(`span`,[e._v(` Dilation is permanent. You will `+e._s(e.gainText)+` and reset your current eternity. `)]):t(`span`,[e._v(` If you exit Dilation now, you will `+e._s(e.gainText)+`. `)]),e.isInEC?t(`div`,[e._v(` You will also exit your current Eternity Challenge as well. `)]):e._e(),t(`br`),e._v(` Are you sure you want to proceed? `)])])},[],!1,null,null,null,null).exports,vw=D({name:`HardResetModal`,components:{ModalWrapperChoice:BC},data(){return{input:``}},computed:{willHardReset(){return this.input===`The Seam of Totality watches over the imaginary plane like a figment of heretical absolution.`},hasExtraNG(){return player.records.fullGameCompletions>0},hasSpeedrun(){return player.speedrun.isUnlocked}},destroyed(){this.willHardReset&&SecretAchievement(38).unlock()},methods:{hardReset(){this.willHardReset&&GameStorage.hardReset(),this.input=``}}},function(){var e=this,t=e._self._c;return t(`ModalWrapperChoice`,{attrs:{"show-cancel":!e.willHardReset,"show-confirm":e.willHardReset,"confirm-class":`o-primary-btn--width-medium c-modal__confirm-btn c-modal-hard-reset-btn`},on:{confirm:e.hardReset},scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` HARD RESET `)]},proxy:!0},{key:`confirm-text`,fn:function(){return[e._v(` HARD RESET `)]},proxy:!0}])},[t(`div`,{staticClass:`c-modal-message__text`},[e._v(` Please confirm your desire to hard reset this save slot. `),t(`span`,{staticClass:`c-modal-hard-reset-danger`},[e._v(`Deleting your save will not unlock anything secret.`)]),t(`br`),e._v(` Type in "The Seam of Totality watches over the imaginary plane like a figment of heretical absolution." to confirm. `),t(`div`,{staticClass:`c-modal-hard-reset-danger`},[e._v(` THIS WILL WIPE YOUR SAVE. `),e.hasExtraNG?t(`span`,[t(`br`),e._v(` This will also remove any Glyph cosmetics you have unlocked from completing the game! `)]):e._e(),e.hasSpeedrun?t(`span`,[t(`br`),e._v(` You will lose the ability to do a Speedrun. To restart your run, use the "Start Speedrun" button instead. `)]):e._e()])]),t(`input`,{directives:[{name:`model`,rawName:`v-model`,value:e.input,expression:`input`}],ref:`input`,staticClass:`c-modal-input c-modal-hard-reset__input`,attrs:{type:`text`,onpaste:`return false;`},domProps:{value:e.input},on:{keyup:function(t){return!t.type.indexOf(`key`)&&e._k(t.keyCode,`esc`,27,t.key,[`Esc`,`Escape`])?null:e.emitClose.apply(null,arguments)},input:function(t){t.target.composing||(e.input=t.target.value)}}}),t(`div`,{staticClass:`c-modal-hard-reset-info`},[e.willHardReset?t(`div`,{staticClass:`c-modal-hard-reset-danger`},[e._v(` Phrase confirmed - continuing will irreversibly delete your save! `)]):t(`div`,[e._v(` Type in the correct phrase to hard reset. `)])])])},[],!1,null,null,null,null).exports,yw={name:`GlyphTooltipEffect`,props:{effect:{type:String,required:!0},value:{type:[Number,Object],required:!0}},computed:{effectConfig(){return GlyphEffects[this.effect]},boostColor(){return this.effectConfig.alterationType!==void 0&&this.effectConfig.alterationType!==ALTERATION_TYPE.ADDITION?this.effectConfig.alteredColor():void 0},additionColor(){return this.effectConfig.alterationType===ALTERATION_TYPE.ADDITION?this.effectConfig.alteredColor():void 0},effectStringTemplate(){return this.effectConfig.singleDesc},primaryEffectText(){let e=this.effectConfig.formatSingleEffect(this.value);return this.boostColor?`⯅${e}`:e},secondaryEffectText(){let e=this.effectConfig.formatSingleSecondaryEffect(this.effectConfig.conversion(this.value));return this.boostColor?`⯅${e}`:e},textSplits(){let e=this.effectStringTemplate.split(`{value}`),t=e[1]?e[1].split(`{value2}`):``;return t.length===1?e:[e[0]].concat(t)},hasValue(){return this.effectStringTemplate.includes(`{value}`)},hasSecondaryValue(){return this.textSplits[2]!==void 0},isPelleDisabled(){return this.effectConfig.isDisabledByDoomed},convertedParts(){let e=[];for(let t of this.textSplits)e.push(this.convertToHTML(t));return e},valueStyle(){return this.boostColor?{color:this.boostColor,"text-shadow":`0 0 0.4rem ${this.boostColor}`}:{color:`#76EE76`}},textShadowColor(){return GlyphAppearanceHandler.getBaseColor(!0)}},methods:{convertToHTML(e){return e.replace(`
`,`<br>`).replace(`]`,`</span>`).replace(`[`,`<span style="${GlyphAppearanceHandler.isLightBG?``:`text-shadow: white 0 0 0.6rem;`}
            font-weight: bold;">`)}}},bw={name:`GlyphTooltip`,components:{GlyphTooltipEffect:D(yw,function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`c-glyph-tooltip__effect`,class:{"o-pelle-disabled":e.isPelleDisabled}},[t(`span`,{domProps:{innerHTML:e._s(e.convertedParts[0])}}),e.hasValue?t(`span`,{style:e.valueStyle},[e._v(e._s(e.primaryEffectText))]):e._e(),t(`span`,{domProps:{innerHTML:e._s(e.convertedParts[1])}}),e.hasSecondaryValue?t(`span`,{style:e.valueStyle},[e._v(e._s(e.secondaryEffectText))]):e._e(),e.hasSecondaryValue?t(`span`,{domProps:{innerHTML:e._s(e.convertedParts[2])}}):e._e()])},[],!1,null,null,null,null).exports},props:{type:{type:String,required:!0},strength:{type:Decimal,required:!0},level:{type:Decimal,required:!0},effects:{type:Array,required:!0},id:{type:Number,required:!1,default:0},sacrificeReward:{type:Decimal,required:!1,default:new Decimal},refineReward:{type:Decimal,required:!1,default:new Decimal},uncappedRefineReward:{type:Decimal,required:!1,default:new Decimal},currentAction:{type:String,required:!0},scoreMode:{type:Number,required:!0},showDeletionText:{type:Boolean,required:!1,default:!0},displayLevel:{type:Decimal,required:!1,default:new Decimal},changeWatcher:{type:Number,required:!0}},data(){return{showChaosText:!1,chaosDescription:``}},computed:{onTouchDevice(){return GameUI.touchDevice},effectiveLevel(){return this.displayLevel.neq(0)?this.displayLevel:this.level},sortedEffects(){return getGlyphEffectValuesFromArray(this.effects,this.effectiveLevel,this.strength,this.type)},rarityInfo(){return getRarity(this.strength)},baseColor(){return CosmeticGlyphTypes[this.type].currentColor.bg},textColor(){return this.baseColor===`black`?`white`:`black`},mainBorderColor(){return GlyphAppearanceHandler.getBorderColor(this.type)},descriptionStyle(){let e=GlyphAppearanceHandler.getRarityColor(this.strength,this.type),t=GlyphAppearanceHandler.isLightBG?`white`:`black`;return{color:this.type===`cursed`?t:e,animation:this.type===`reality`?`a-reality-glyph-name-cycle 10s infinite`:void 0}},description(){let e=`${this.type.capitalize()}`;switch(this.type){case`companion`:return`Companion Glyph`;case`cursed`:return`Cursed Glyph`;case`reality`:return`Pure Glyph of ${e}`;default:return`${this.rarityInfo.name} Glyph of ${e}`}},isLevelCapped(){return this.displayLevel.neq(0)&&this.displayLevel.lt(this.level)},isLevelBoosted(){return this.displayLevel.neq(0)&&this.displayLevel.gt(this.level)},rarityText(){if(!j[this.type].hasRarity)return``;let e=Pelle.isDoomed?Pelle.glyphStrength:this.strength;return`| Rarity:
        <span style="color: ${this.descriptionStyle.color}">${formatRarity(strengthToRarity(e))}</span>`},levelText(){if(this.type===`companion`)return``;let e=this.isLevelCapped?`<i class='fas fa-sort-down'></i>`:this.isLevelBoosted?`<i class='fas fa-sort-up'></i>`:``;return`Level: <span style="color: ${this.isLevelCapped?`#ff4444`:this.isLevelBoosted?`#44FF44`:void 0}">
              ${e}${formatInt(this.effectiveLevel)}${e}
              </span>`},eventHandlers(){return GameUI.touchDevice?{touchstart:this.touchStart,dragstart:this.dragStart,dragEnd:this.dragEnd}:{}},glyphTooltipStyle(){let e=this.type===`cursed`?this.textColor:GlyphAppearanceHandler.getBorderColor(this.type);return{"pointer-events":this.onTouchDevice?void 0:`none`,"border-color":e,"box-shadow":`0 0 0.5rem ${e}, 0 0 0.5rem ${e} inset`,animation:this.type===`reality`?`a-reality-glyph-tooltip-cycle 10s infinite`:void 0,color:this.textColor,background:this.baseColor}},glyphHeaderStyle(){let e=this.type===`cursed`,t=this.type===`reality`,n=GlyphAppearanceHandler.getRarityColor(this.strength,this.type);return e&&(n=this.textColor),this.type===`companion`&&(n=GlyphAppearanceHandler.getBorderColor(this.type)),{"border-color":n,"box-shadow":`0 0 0.5rem 0.1rem ${n}, 0 0 0.8rem ${n} inset`,animation:t?`a-reality-glyph-tooltip-header-cycle 10s infinite`:void 0,color:this.textColor,background:this.baseColor}}},watch:{changeWatcher(){this.$recompute(`sortedEffects`)}},mounted(){document.body.append(this.$el)},destroyed(){try{document.body.removeChild(this.$el)}catch{}},methods:{update(){this.showChaosText=Pelle.specialGlyphEffect.isUnlocked,this.showChaosText&&(this.chaosDescription=Pelle.getSpecialGlyphEffectDescription(this.type))},touchStart(){this.$parent.$emit(`tooltip-touched`)},dragStart(e){e.preventDefault(),e.stopPropagation()},dragEnd(e){e.preventDefault(),e.stopPropagation()},removeGlyph(){GlyphSacrificeHandler.removeGlyph(Glyphs.findById(this.id),!1)},getFontColor(){return Theme.current().isDark()?`#cccccc`:`black`},sacrificeText(){if(!j[this.type].hasSacrifice)return``;let e=`${format(this.sacrificeReward,2,2)}`;return`<span style="font-weight: ${this.currentAction===`sacrifice`?`bold`:``};">
              Sacrifice: ${e}
              </span>`},refineText(){if(!j[this.type].hasAlchemyResource||!AlchemyResource[this.type].isUnlocked)return``;let e=`${format(this.uncappedRefineReward,2,2)} ${j[this.type].regularGlyphSymbol}`;return this.uncappedRefineReward.neq(this.refineReward)&&(e+=` (Actual value due to cap: ${format(this.refineReward,2,2)} ${j[this.type].regularGlyphSymbol})`),`<span style="font-weight: ${this.currentAction===`refine`?`bold`:``};">
              Refine: ${e}
              </span>`},scoreText(){return this.type===`companion`||this.type===`cursed`||this.type===`reality`||![AUTO_GLYPH_SCORE.SPECIFIED_EFFECT,AUTO_GLYPH_SCORE.EFFECT_SCORE].includes(this.scoreMode)?``:`Score: ${format(AutoGlyphProcessor.filterValue(this.$parent.glyph),1,1)}`}}},xw=D(bw,function(){var e=this,t=e._self._c;return t(`div`,e._g({staticClass:`l-glyph-tooltip c-glyph-tooltip`,style:e.glyphTooltipStyle},e.eventHandlers),[t(`div`,{staticClass:`c-glyph-tooltip__header`,style:e.glyphHeaderStyle},[t(`span`,{staticClass:`c-glyph-tooltip__description`,style:e.descriptionStyle,domProps:{innerHTML:e._s(e.description)}}),t(`span`,{staticClass:`l-glyph-tooltip__info`},[t(`span`,{domProps:{innerHTML:e._s(e.levelText)}}),t(`span`,{domProps:{innerHTML:e._s(e.rarityText)}})]),e.showDeletionText?t(`span`,[t(`span`,e._g({staticClass:`c-glyph-tooltip__sacrifice`},e.onTouchDevice?{click:e.removeGlyph}:{}),[t(`span`,{domProps:{innerHTML:e._s(e.sacrificeText())}}),e.sacrificeText()&&e.refineText()?t(`span`,[e._v(` | `)]):e._e(),t(`span`,{domProps:{innerHTML:e._s(e.refineText())}})])]):e._e(),t(`span`,{staticClass:`c-glyph-tooltip__sacrifice`},[e._v(e._s(e.scoreText()))])]),t(`div`,{staticClass:`l-glyph-tooltip__effects`},[e._l(e.sortedEffects,function(n){return t(`GlyphTooltipEffect`,{key:n.id+e.changeWatcher,attrs:{effect:n.id,value:n.value}})}),e.showChaosText?t(`div`,{staticClass:`pelle-current-glyph-effects c-glyph-tooltip__effect`},[e._v(` `+e._s(e.chaosDescription)+` `)]):e._e()],2)])},[],!1,null,`f0b2a3a7`,null,null).exports,Sw={common:[],uncommon:[{lineType:`linear`,angles:[45],colorSplit:[14,16,84,86]}],rare:[{lineType:`linear`,angles:[45,135],colorSplit:[14,16,84,86]}],epic:[{lineType:`linear`,angles:[45,135],colorSplit:[12,14,16,18,82,84,86,88]}],legendary:[{lineType:`bump`,colorSplit:[15,25]}],mythical:[{lineType:`bump`,colorSplit:[15,25]},{lineType:`linear`,angles:[45,135],colorSplit:[10,13,87,90]}],transcendent:[{lineType:`bump`,colorSplit:[15,35]},{lineType:`linear`,angles:[45,135],colorSplit:[10,12,14,16,84,86,88,90]}],celestial:[{lineType:`bump`,colorSplit:[15,35]},{lineType:`radial`,colorSplit:[65,85]}],cursed:[{lineType:`spike`,center:[40,40],angles:[305,325]},{lineType:`spike`,center:[60,40],angles:[35,55]},{lineType:`spike`,center:[60,60],angles:[125,145]},{lineType:`spike`,center:[40,60],angles:[215,235]}],companion:[{lineType:`companion`}]};function Cw(e,t,n,r){let i,a,o,s,c=!1,l=[],u=[];switch(e.lineType){case`linear`:i=[0,...e.colorSplit,100],a=e=>r?50+.7*(e-50):e;for(let n of e.angles){for(let e=0;e<i.length-1;e++)l.push(`${c?t:`transparent`} ${a(i[e])}% ${a(i[e+1])}%`),c=!c;u.push(`repeating-linear-gradient(${n}deg, ${l.join(`,`)})`)}return u.join(`,`);case`bump`:s=n.type===`effarig`?`${t}60`:t,o=[`50% -25%`,`50% 125%`,`-25% 50%`,`125% 50%`],a=e=>r?e:.9*e;for(let t=0;t<4;t++)l.push(`radial-gradient(at ${o[t]}, transparent, ${s} ${a(e.colorSplit[0])}%,
          transparent ${a(e.colorSplit[1])}%)`);return l.join(`,`);case`radial`:i=[50,...e.colorSplit,100],a=e=>r?.9*e:100-(100-e)/2;for(let e of i)l.push(`${c?t:`transparent`} ${a(e)}%`),c=!c;return`radial-gradient(${l.join(`,`)})`;case`spike`:return l.push(`transparent ${e.angles[0]-5}deg`),l.push(`${t}b0 ${e.angles[0]+5}deg`),l.push(`${t}b0 ${e.angles[1]-5}deg`),l.push(`transparent ${e.angles[1]+5}deg`),`conic-gradient(from 0deg at ${e.center[0]}% ${e.center[1]}%, ${l.join(`,`)})`;case`companion`:i=[0,30,330,360],s=[t,`transparent`,`transparent`,t];for(let e=0;e<4;e++)l.push(`${s[e]} ${i[e]}deg`);u.push(`conic-gradient(${l.join(`,`)})`),o=[`125% 125%`,`-25% 125%`],a=e=>r?.9*(e+10):e;for(let e=0;e<2;e++)u.push(`radial-gradient(at ${o[e]}, transparent, ${t} ${a(30)}%,
          transparent ${a(50)}%)`);return u.join(`,`);default:throw Error(`Unrecognized glyph border data`)}}var ww=r({name:`GlyphComponent`,components:{GlyphTooltip:xw},props:{glyph:{type:Object,required:!0},isInModal:{type:Boolean,required:!1,default:!1},isNew:{type:Boolean,required:!1,default:!1},isUnequipped:{type:Boolean,required:!1,default:!1},showSacrifice:{type:Boolean,required:!1,default:!1},ignoreModifiedLevel:{type:Boolean,required:!1,default:!1},realityGlyphBoost:{type:Decimal,required:!1,default:()=>new Decimal},isInventoryGlyph:{type:Boolean,required:!1,default:!1},isActiveGlyph:{type:Boolean,required:!1,default:!1},size:{type:String,required:!1,default:`5rem`},glowBlur:{type:String,required:!1,default:`1rem`},glowSpread:{type:String,required:!1,default:`0.2rem`},bottomPadding:{type:String,required:!1,default:`0.3rem`},textProportion:{type:Number,required:!1,default:.5},circular:{type:Boolean,required:!1,default:!1},draggable:{type:Boolean,required:!1,default:!1},flipTooltip:{type:Boolean,required:!1,default:!1}},data(){return{componentID:UIID.next(),isDragging:!1,suppressTooltip:!1,isTouched:!1,tooltipEnabled:!1,sacrificeReward:new Decimal,uncappedRefineReward:new Decimal,refineReward:new Decimal,displayLevel:new Decimal,tooltipLoaded:!1,logTotalSacrifice:new Decimal,realityColor:``}},computed:{hasTooltip(){return!!this.glyph.effects},typeConfig(){return GlyphInfo[this.glyph.type]},cosmeticConfig(){return CosmeticGlyphTypes[this.glyph.cosmetic??this.glyph.type]},isBlobHeart(){return this.$viewModel.theme===`S11`&&this.glyph.type===`companion`},symbol(){let e=this.glyph.symbol;return this.isBlobHeart?``:e||(this.$viewModel.theme===`S4`&&!this.glyph.cosmetic?GlyphInfo[this.glyph.type].cancerGlyphSymbol:this.cosmeticConfig.currentSymbol.symbol)},symbolBlur(){return this.isBlobHeart?!1:this.glyph.symbol?!GlyphAppearanceHandler.unblurredSymbols.includes(this.symbol):this.cosmeticConfig.currentSymbol.blur},zIndexStyle(){return{"z-index":this.isInModal?7:6}},colorObj(){let e;this.glyph.color&&(e=GlyphAppearanceHandler.getColorProps(this.glyph.color)),this.glyph.cosmetic&&(e=this.glyph.cosmetic===this.glyph.type&&this.glyph.type===`cursed`?GlyphAppearanceHandler.getBaseColor(!0):this.cosmeticConfig.currentColor);let t=this.isRealityGlyph&&this.realityColor?this.realityColor:this.cosmeticConfig.ignoreRarityColor?GlyphAppearanceHandler.getBorderColor(this.glyph.type):GlyphAppearanceHandler.getRarityColor(this.glyph.strength,this.glyph.type);return{border:e?.border??GlyphAppearanceHandler.getBorderColor(this.glyph.type),symbol:e?.border??t,bg:e?.bg??this.cosmeticConfig.currentColor.bg}},symbolColor(){return player.options.swapGlyphColors?this.colorObj.border:this.colorObj.symbol},borderColor(){return player.options.swapGlyphColors?this.colorObj.symbol:this.colorObj.border},bgColor(){return this.colorObj.bg},overStyle(){return{width:this.size,height:this.size,position:`absolute`,"background-color":`rgba(0, 0, 0, 0)`,"box-shadow":`0 0 ${this.glowBlur} calc(${this.glowSpread} + 0.1rem) ${this.borderColor} inset`,"border-radius":this.circular?`50%`:`0`}},outerStyle(){return{width:this.size,height:this.size,"background-color":this.borderColor,"box-shadow":`0 0 ${this.glowBlur} ${this.glowSpread} ${this.borderColor}`,"border-radius":this.circular?`50%`:`0`,"-webkit-user-drag":this.draggable?``:`none`}},innerStyle(){let e=this.symbolColor;return{width:`calc(${this.size} - 0.2rem)`,height:`calc(${this.size} - 0.2rem)`,"font-size":`calc( ${this.size} * ${this.textProportion} )`,color:e,"text-shadow":this.symbolBlur?`-0.04em 0.04em 0.08em ${e}`:void 0,"border-radius":this.circular?`50%`:`0`,"padding-bottom":this.bottomPadding,background:this.bgColor}},mouseEventHandlers(){let e=this.hasTooltip?{mouseenter:this.mouseEnter,"&mousemove":this.mouseMove,mouseleave:this.mouseLeave,mousedown:this.mouseDown,touchstart:this.touchStart,touchend:this.touchEnd}:{};return(this.hasTooltip||this.draggable)&&(e.touchmove=this.touchMove),e},isCurrentTooltip(){return this.$viewModel.tabs.reality.currentGlyphTooltip===this.componentID},tooltipDirectionClass(){let e=this.$viewModel.tabs.reality.glyphTooltipDirection;switch(this.flipTooltip&&(e+=1),e){case-1:return`l-glyph-tooltip--down-left`;case 0:return`l-glyph-tooltip--down-right`;case 1:return`l-glyph-tooltip--up-left`;case 2:return`l-glyph-tooltip--up-right`;default:return`l-glyph-tooltip--down-left`}},glyphEffects(){if(!this.glyph.effects)return{};let e=Object.values(GlyphInfo[this.glyph.type].effects().mapToObject(e=>e.intID,e=>e.intID)).nMin();return GlyphInfo[this.glyph.type].effects().filter(e=>this.glyph.effects.includes(e.id)).mapToObject(t=>t.intID-e,e=>e.id)},isRealityGlyph(){return this.glyph.type===`reality`},isCursedGlyph(){return this.glyph.type===`cursed`},isCompanionGlyph(){return this.glyph.type===`companion`},showGlyphEffectDots(){return player.options.showHintText.glyphEffectDots},displayedInfo(){if(!this.isInventoryGlyph||[`companion`,`cursed`].includes(this.glyph.type))return null;let e=player.options.showHintText;if(e.glyphInfoType===Lt.types.NONE||!e.showGlyphInfoByDefault&&!this.$viewModel.shiftDown)return null;let t=Lt.types;switch(e.glyphInfoType){case t.LEVEL:return this.updateDisplayLevel(),formatInt(this.displayLevel.eq(0)?this.glyph.level:this.displayLevel);case t.RARITY:return formatRarity(strengthToRarity(Pelle.isDoomed?Pelle.glyphStrength:this.glyph.strength));case t.SAC_VALUE:return format(this.sacrificeReward,2,2);case t.FILTER_SCORE:return format(AutoGlyphProcessor.filterValue(this.glyph),1,1);case t.CURRENT_REFINE:return`${format(this.refineReward,2,2)} ${this.symbol}`;case t.MAX_REFINE:return`${format(this.uncappedRefineReward,2,2)} ${this.symbol}`;default:throw Error(`Unrecognized Glyph info type in info text`)}},showBorders(){return player.options.glyphBorders}},watch:{logTotalSacrifice(){this.tooltipLoaded=!1,this.isCurrentTooltip&&this.showTooltip()}},created(){this.on$(GAME_EVENT.GLYPH_VISUAL_CHANGE,()=>{this.$recompute(`typeConfig`),this.$recompute(`cosmeticConfig`),this.$recompute(`innerStyle`),this.$recompute(`overrideColor`),this.$recompute(`showGlyphEffectDots`),this.$recompute(`displayedInfo`),this.$recompute(`showBorders`)}),this.on$(`tooltip-touched`,()=>this.hideTooltip()),this.on$(GAME_EVENT.TAB_CHANGED,()=>this.hideTooltip()),setTimeout(()=>this.tooltipEnabled=!0,10)},beforeDestroy(){this.isCurrentTooltip&&this.hideTooltip(),this.$viewModel.draggingUIID===this.componentID&&(this.$viewModel.draggingUIID=-1)},methods:{update(){this.logTotalSacrifice=GameCache.logTotalGlyphSacrifice.value,this.realityColor=player.reality.glyphs.cosmetics.colorMap.reality?null:GlyphAppearanceHandler.realityColor,this.sacrificeReward=GlyphSacrificeHandler.glyphSacrificeGain(this.glyph),this.uncappedRefineReward=GlyphInfo[this.glyph.type].hasAlchemyResource?GlyphSacrificeHandler.glyphRawRefinementGain(this.glyph):new Decimal,this.refineReward=GlyphInfo[this.glyph.type].hasAlchemyResource?GlyphSacrificeHandler.glyphRefinementGain(this.glyph):new Decimal,this.tooltipLoaded&&this.updateDisplayLevel()},updateDisplayLevel(){if(this.ignoreModifiedLevel){this.displayLevel=new Decimal;return}this.isActiveGlyph?this.displayLevel=getAdjustedGlyphLevel(this.glyph):this.isInventoryGlyph?this.displayLevel=getAdjustedGlyphLevel(this.glyph,new Decimal):this.displayLevel=this.glyph.level.add(GlyphInfo[this.glyph.type].isBasic?this.realityGlyphBoost:new Decimal)},hideTooltip(){this.tooltipLoaded=!1,this.$viewModel.tabs.reality.mouseoverGlyphInfo.type=``,this.$viewModel.tabs.reality.mouseoverGlyphInfo.inInventory=!1,this.$viewModel.tabs.reality.currentGlyphTooltip=-1},showTooltip(){if(!this.tooltipEnabled)return;Glyphs.removeVisualFlag(`unseen`,this.glyph),Glyphs.removeVisualFlag(`unequipped`,this.glyph),this.tooltipLoaded=!0,this.$viewModel.tabs.reality.mouseoverGlyphInfo.inInventory=!this.circular;let e=this.$viewModel.tabs.reality.mouseoverGlyphInfo;e.type=this.glyph.type,e.sacrificeValue=GlyphSacrificeHandler.glyphSacrificeGain(this.glyph),e.refineValue=GlyphSacrificeHandler.glyphRawRefinementGain(this.glyph),this.$viewModel.tabs.reality.currentGlyphTooltip=this.componentID,AutoGlyphProcessor.sacMode===AUTO_GLYPH_REJECT.SACRIFICE||AutoGlyphProcessor.sacMode===AUTO_GLYPH_REJECT.REFINE_TO_CAP&&this.refineReward.eq(new Decimal)?this.currentAction=`sacrifice`:this.currentAction=`refine`,this.scoreMode=AutoGlyphProcessor.scoreMode},moveTooltipTo(e,t){if(!this.$refs.tooltip)return;let n=this.$refs.tooltip.$el;if(!n)return;let r=document.body.getBoundingClientRect();n.style.left=`${e-r.left}px`,n.style.top=`${t-r.top}px`,this.$viewModel.tabs.reality.glyphTooltipDirection===1?t-n.offsetHeight<=0&&t+n.offsetHeight<r.height&&(this.$viewModel.tabs.reality.glyphTooltipDirection=-1):t+n.offsetHeight>=r.height&&(this.$viewModel.tabs.reality.glyphTooltipDirection=1)},mouseEnter(e){this.$viewModel.draggingUIID===-1&&(this.moveTooltipTo(e.clientX,e.clientY),this.showTooltip())},mouseLeave(){this.isCurrentTooltip&&this.hideTooltip()},mouseDown(){this.isTouched||this.hideTooltip()},mouseMove(e){this.isTouched||this.moveTooltipTo(e.clientX,e.clientY)},dragStart(e){this.hideTooltip(),this.isDragging=!0,this.suppressTooltip=!0,e.dataTransfer.setData(GLYPH_MIME_TYPE,this.glyph.id.toString()),e.dataTransfer.dropEffect=`move`;let t=this.$refs.over.getBoundingClientRect();e.dataTransfer.setDragImage(this.$refs.over,e.clientX-t.left,e.clientY-t.top),this.$viewModel.draggingUIID=this.componentID;let n=this.$viewModel.tabs.reality.draggingGlyphInfo;n.id=this.glyph.id,n.type=this.glyph.type,n.sacrificeValue=GlyphSacrificeHandler.glyphSacrificeGain(this.glyph)},dragEnd(){this.isDragging=!1,this.suppressTooltip=!1,this.$viewModel.scrollWindow=0;let e=this.$viewModel.tabs.reality.draggingGlyphInfo;e.id=-1,e.type=``,this.$viewModel.draggingUIID===this.componentID&&(this.$viewModel.draggingUIID=-1)},drag(e){if(e.screenX===0&&e.screenY===0){this.$viewModel.scrollWindow=0;return}e.clientY<100?this.$viewModel.scrollWindow=-1+.9*e.clientY/100:e.clientY>window.innerHeight-100?this.$viewModel.scrollWindow=1-.9*(window.innerHeight-e.clientY)/100:this.$viewModel.scrollWindow=0},touchStart(){this.isTouched=!0},touchEnd(e){this.isCurrentTooltip?(e.preventDefault(),this.hideTooltip()):this.suppressTooltip||(e.preventDefault(),this.showTooltip(),this.moveTooltipTo(e.changedTouches[0].clientX,e.changedTouches[0].clientY)),this.suppressTooltip=!1,this.isTouched=!1},touchMove(e){let t=e.changedTouches[0],n=this.$refs.over.getBoundingClientRect();(t.clientX<n.left||t.clientY<n.top||t.clientX>n.left+n.width||t.clientY>n.top+n.height)&&(this.suppressTooltip=!0),this.isDragging&&this.drag(t)},effectIconPos(e){let t=GlyphInfo[this.glyph.type].effects().length;t>6&&(t+=1);let n=Math.PI/(t/2)*(Number.parseInt(e,10)+t/8),r=.28*this.size.replace(`rem`,``),i=-r*Math.sin(n),a=r*(Math.cos(n)+.15);return{dx:i,dy:a}},glyphEffectDots(e){if([`companion`,`cursed`].includes(this.glyph.type))return{};let t=this.effectIconPos(e);return{position:`absolute`,width:`0.3rem`,height:`0.3rem`,"border-radius":`50%`,background:this.symbolColor,transform:`translate(${t.dx-.15*.3}rem, ${t.dy-.15*.3}rem)`,opacity:Theme.current().name===`S9`?0:.8}},glyphBorderStyle(){if(!this.showBorders)return null;let e;if(this.isCursedGlyph)e=Sw.cursed;else if(this.isCompanionGlyph)e=Sw.companion;else if(Sw[nV(this.glyph.strength).name.toLowerCase()]===void 0)return null;else e=Sw[nV(this.glyph.strength).name.toLowerCase()];let t=e.map(e=>Cw(e,this.borderColor,this.glyph,this.circular));return{position:`absolute`,left:`2%`,width:`96%`,height:`96%`,"border-radius":this.circular?`50%`:`0`,background:t.filter(Boolean).join(`,`)}}}}),Tw=D(ww,function(){var e=this,t=e._self._c;return e._self._setupProxy,t(`div`,e._g({class:[`l-glyph-component`,{"c-glyph-component--dragging":e.isDragging}],style:e.outerStyle,attrs:{draggable:e.draggable}},e.draggable?{dragstart:e.dragStart,dragend:e.dragEnd,drag:e.drag}:{}),[t(`div`,{ref:`glyph`,class:[`l-glyph-component`,`c-glyph-component`],style:e.innerStyle},[e._v(` `+e._s(e.symbol)+` `),e.$viewModel.shiftDown||e.showGlyphEffectDots?e._l(Object.keys(e.glyphEffects),function(n){return t(`div`,{key:n,style:e.glyphEffectDots(n)})}):e._e()],2),t(`div`,{style:e.glyphBorderStyle()}),e.hasTooltip&&e.tooltipLoaded?t(`GlyphTooltip`,e._b({directives:[{name:`show`,rawName:`v-show`,value:e.isCurrentTooltip,expression:`isCurrentTooltip`}],ref:`tooltip`,class:e.tooltipDirectionClass,style:e.zIndexStyle,attrs:{"sacrifice-reward":e.sacrificeReward,"refine-reward":e.refineReward,"uncapped-refine-reward":e.uncappedRefineReward,"current-action":e.currentAction,"score-mode":e.scoreMode,"show-deletion-text":e.showSacrifice,"display-level":e.displayLevel,component:e.componentID,"change-watcher":e.logTotalSacrifice}},`GlyphTooltip`,e.glyph,!1)):e._e(),e.isNew?t(`div`,{staticClass:`l-corner-icon l-new-glyph`},[e._v(` New! `)]):e.isUnequipped?t(`div`,{staticClass:`l-corner-icon l-unequipped-glyph fas fa-arrow-up-from-bracket`}):e._e(),e.displayedInfo?t(`div`,{staticClass:`l-glyph-info`},[e._v(` `+e._s(e.displayedInfo)+` `)]):e._e(),t(`div`,e._g({ref:`over`,style:e.overStyle,on:{click:[function(t){return!t.shiftKey||t.ctrlKey||t.altKey||t.metaKey?null:e.$emit(`shiftClicked`,e.glyph.id)},function(t){return!t.ctrlKey||!t.shiftKey||t.altKey||t.metaKey?null:e.$emit(`ctrlShiftClicked`,e.glyph.id)},function(t){return!t.metaKey||!t.shiftKey||t.ctrlKey||t.altKey?null:e.$emit(`ctrlShiftClicked`,e.glyph.id)},function(t){return t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:e.$emit(`clicked`,e.glyph.id)}]}},e.mouseEventHandlers))],1)},[],!1,null,`77ec7243`,null,null).exports,Ew=D({name:`RealityModal`,components:{PrimaryButton:L,ModalWrapperChoice:BC,GlyphComponent:Tw},data(){return{firstReality:!1,hasSpace:!0,hasChoice:!1,hasFilter:!1,glyphs:[],bestLevel:new Decimal,levelDifference:0,selectedGlyph:void 0,canRefresh:!1,level:new Decimal,simRealities:new Decimal,realityMachines:new Decimal,shardsGained:0,effarigUnlocked:!1,willAutoPurge:!1}},computed:{firstRealityText(){let e=timeDisplayNoDecimals(new Decimal(30*6e4));return`Reality will reset everything except Challenge records and anything under the General header on the
        Statistics tab. The first ${formatInt(13)} rows of Achievements are also reset,
        but you will automatically get one Achievement back every
        ${e} You will also gain Reality Machines based on your Eternity Points, a
        Glyph with a level based on your Eternity Points, Replicanti, and Dilated Time, a Perk Point to spend
        on quality of life upgrades, and unlock various upgrades.`},canSacrifice(){return RealityUpgrade(19).isEffectActive},warnText(){return this.hasChoice?this.hasFilter&&this.selectedGlyph===void 0?`If you do not choose a Glyph, one will be automatically selected using your Glyph filter.`:this.selectedGlyph===void 0?`You must select a Glyph in order to continue.`:null:`You currently only have a single option for new Glyphs every
          Reality. You can unlock the ability to choose from multiple Glyphs by canceling out of this modal and
          purchasing the START Perk.`},gained(){let e=[];return e.push(`${quantify(`Reality`,this.simRealities)}`),e.push(`${quantify(`Perk Point`,this.simRealities)}`),e.push(`${quantify(`Reality Machine`,this.realityMachines,2)}`),this.effarigUnlocked&&e.push(`${quantify(`Relic Shard`,this.shardsGained,2)}`),`You will gain ${makeEnumeration(e)}`},levelStats(){return`You will get a level ${formatInt(this.level)} Glyph on Reality, which is
        ${this.level.eq(this.bestLevel)?`equal to`:`
        ${quantifyInt(`level`,this.levelDifference)}
        ${this.level.gt(this.bestLevel)?`higher`:`lower`} than`} your best.`},confirmationToDisable(){return ConfirmationTypes.glyphSelection.isUnlocked()?`glyphSelection`:void 0},canConfirm(){return this.firstReality||this.selectedGlyph!==void 0||this.hasFilter}},created(){this.getGlyphs(),GlyphSelection.realityProps=getRealityProps(!1,!1)},methods:{update(){this.firstReality=player.realities.eq(0),this.hasChoice=Perk.firstPerk.isEffectActive,this.effarigUnlocked=TeresaUnlocks.effarig.canBeApplied,this.hasFilter=EffarigUnlock.glyphFilter.isUnlocked,this.level.copyFrom(gainedGlyphLevel().actualLevel),this.simRealities=simulatedRealityCount(!1).add(1),this.hasSpace=Decimal.fromNumber(GameCache.glyphInventorySpace.value).gte(this.simRealities);let e=MachineHandler.gainedRealityMachines.times(this.simRealities);if(this.realityMachines.copyFrom(e.clampMax(MachineHandler.distanceToRMCap)),this.shardsGained=simulatedRealityCount(!1).add(1).mul(Effarig.shardsGained),this.willAutoPurge=player.reality.autoAutoClean,!this.firstReality){for(let e=0;e<this.glyphs.length;++e){let t=this.glyphs[e],n=GlyphSelection.glyphList(GlyphSelection.choiceCount,gainedGlyphLevel(),{isChoosingGlyph:!1})[e];t.level!==n.level&&(t.level=n.level,t.effects=n.effects)}this.bestLevel.copyFrom(player.records.bestReality.glyphLevel),this.levelDifference=Decimal.abs(this.bestLevel.sub(this.level))}},glyphClass(e){return{"l-modal-glyph-selection__glyph":!0,"l-modal-glyph-selection__glyph--selected":this.selectedGlyph===e}},getGlyphs(){this.canRefresh=!0,this.glyphs=GlyphSelection.upcomingGlyphs},select(e){this.selectedGlyph=e},confirmModal(e){this.canConfirm&&(e&&this.emitClose(),startManualReality(e,this.selectedGlyph))}}},function(){var e=this,t=e._self._c;return t(`ModalWrapperChoice`,{attrs:{option:e.confirmationToDisable,"show-confirm":e.canConfirm},on:{confirm:function(t){return e.confirmModal(!1)}},scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` You are about to Reality `)]},proxy:!0},e.canSacrifice&&e.canConfirm?{key:`extra-buttons`,fn:function(){return[t(`PrimaryButton`,{staticClass:`o-primary-btn--width-medium c-modal-message__okay-btn`,on:{click:function(t){return e.confirmModal(!0)}}},[e._v(` Sacrifice `)])]},proxy:!0}:null],null,!0)},[e.firstReality?t(`div`,{staticClass:`c-modal-message__text`},[e._v(` `+e._s(e.firstRealityText)+` `)]):e._e(),t(`div`,{staticClass:`c-modal-message__text`},[e._v(` `+e._s(e.gained)+` `)]),e.firstReality?e._e():t(`div`,{staticClass:`l-glyph-selection__row`},e._l(e.glyphs,function(n,r){return t(`GlyphComponent`,{key:r,class:e.glyphClass(r),attrs:{glyph:n,"is-in-modal":!0,"ignore-modified-level":!0,"show-sacrifice":e.canSacrifice},nativeOn:{click:function(t){return e.select(r)}}})}),1),e.firstReality?e._e():t(`div`,[e._v(` `+e._s(e.levelStats)+` `),t(`br`),t(`b`,{staticClass:`o-warning`},[e._v(` `+e._s(e.warnText)+` `)])]),e.simRealities.gt(1)?t(`div`,[t(`br`),e._v(` After choosing this Glyph the game will simulate the rest of your Realities, `),t(`br`),e._v(` automatically choosing another `+e._s(e.quantify(`Glyph`,e.simRealities.sub(1)))+` based on your Glyph filter settings. `)]):e._e(),e.willAutoPurge?t(`div`,[t(`br`),e._v(` Auto-purge is currently enabled; your selected Glyph `),t(`br`),e._v(` may not appear in your inventory after it triggers. `)]):e._e(),e.hasSpace?e._e():t(`div`,{staticClass:`o-warning`},[e.simRealities.gt(1)?t(`span`,[e._v(` You will be simulating more Realities than you have open inventory space for; this may result in some Glyphs being Sacrificed. `)]):t(`span`,[e._v(` You do not have any free inventory space - your selected Glyph will be automatically `+e._s(e.canSacrifice?`Sacrificed`:`deleted`)+`! `)])]),e.confirmationToDisable?t(`div`,[t(`br`),e._v(` You can force this modal to appear (even if disabled) by Shift-clicking the Reality button. `)]):e._e()])},[],!1,null,`ccc612ea`,null,null).exports,Dw=D({name:`ReplicantiGalaxyModal`,components:{ModalWrapperChoice:BC},data(){return{replicanti:new Decimal,divideReplicanti:!1,canBeBought:0}},computed:{topLabel(){return`You are about to purchase ${quantifyInt(`Replicanti Galaxy`,this.canBeBought)}`},message(){return`A Replicanti Galaxy boosts Tickspeed the same way an Antimatter Galaxy does. However, it does not
        increase the cost of Antimatter Galaxies, nor is it affected by multipliers to Antimatter Galaxies specifically.
        It will ${this.divideReplicanti?`divide your Replicanti by ${format(Number.MAX_VALUE,2,2)} for each Replicanti Galaxy purchased
          (${format(this.replicanti,2,2)} to
          ${format(this.replicanti.divide(Decimal.pow(Number.MAX_VALUE,this.canBeBought)),2,2)})`:`reset your Replicanti to ${formatInt(1)}`}.`}},methods:{update(){this.replicanti.copyFrom(player.replicanti.amount),this.divideReplicanti=Achievement(126).isUnlocked,this.canBeBought=Replicanti.galaxies.gain,this.replicanti.lt(Number.MAX_VALUE)&&this.emitClose()},handleYesClick(){replicantiGalaxy(!1)}}},function(){var e=this,t=e._self._c;return t(`ModalWrapperChoice`,{attrs:{option:`replicantiGalaxy`},on:{confirm:e.handleYesClick},scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` `+e._s(e.topLabel)+` `)]},proxy:!0}])},[t(`div`,{staticClass:`c-modal-message__text`},[e._v(` `+e._s(e.message)+` `)])])},[],!1,null,null,null,null).exports,Ow=D({name:`ResetRealityModal`,components:{ModalWrapperChoice:BC},data(){return{isDoomed:!1,canReality:!1}},computed:{resetTerm(){return this.isDoomed?`Armageddon`:`Reality`}},methods:{update(){this.isDoomed=Pelle.isDoomed,this.canReality=isRealityAvailable()},handleYesClick(){beginProcessReality(getRealityProps(!0)),EventHub.ui.offAll(this)}}},function(){var e=this,t=e._self._c;return t(`ModalWrapperChoice`,{attrs:{option:`resetReality`},on:{confirm:e.handleYesClick},scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` You are about to reset your `+e._s(e.resetTerm)+` `)]},proxy:!0},{key:`confirm-text`,fn:function(){return[e._v(` Reset `)]},proxy:!0}])},[t(`div`,{staticClass:`c-modal-message__text`},[e._v(` This will reset you to the start of your `+e._s(e.resetTerm)+`, giving you no rewards from your progress in your current `+e._s(e.resetTerm)+`. `),t(`br`),t(`br`),e._v(` Are you sure you want to do this? `),e.canReality?t(`div`,{staticClass:`c-has-rewards`},[t(`br`),e._v(` You can currently complete a Reality for all its normal rewards, which you will not receive if you Reset here. To get rewards, use the "Make a new Reality" button. `)]):e._e(),t(`br`)])])},[],!1,null,`c99b7cf2`,null,null).exports,kw={name:`ModalOptionsToggleButton`,components:{PrimaryToggleButton:R},props:{value:{type:Boolean,required:!1,default:!1},text:{type:String,required:!0}},computed:{styleObject(){return{"background-color":this.value?`var(--color-good)`:`var(--color-gh-purple)`}}}},Aw=D(kw,function(){var e=this,t=e._self._c;return t(`PrimaryToggleButton`,{staticClass:`o-primary-btn--modal-option`,style:e.styleObject,attrs:{value:e.value,label:e.text},on:{input:e.emitInput}})},[],!1,null,null,null,null).exports,jw=D({name:`ModalWrapper`,components:{ModalCloseButton:IC},methods:{closeModal(){EventHub.dispatch(GAME_EVENT.CLOSE_MODAL)}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`c-modal__inner`},[t(`div`,{staticClass:`c-modal__header`},[t(`ModalCloseButton`,{on:{click:e.closeModal}}),e.$slots.header?t(`span`,{staticClass:`c-modal__title`},[e._t(`header`)],2):e._e()],1),e._t(`default`)],2)},[],!1,null,`0e6f17ed`,null,null).exports,Mw=D({name:`ModalWrapperOptions`,components:{ModalWrapper:jw}},function(){var e=this,t=e._self._c;return t(`ModalWrapper`,{staticClass:`c-modal-options l-modal-options`,scopedSlots:e._u([{key:`header`,fn:function(){return[e._t(`header`)]},proxy:!0}],null,!0)},[e._t(`default`)],2)},[],!1,null,null,null,null).exports,Nw={name:`PlusMinusButton`,props:{type:{type:String,required:!0}},computed:{iconClass(){return`fas fa-${this.type}`}}},Pw=D(Nw,function(){var e=this,t=e._self._c;return t(`div`,{directives:[{name:`repeating-click`,rawName:`v-repeating-click`,value:{delay:500},expression:`{ delay: 500 }`}],staticClass:`c-ad-slider__button`,on:{firstclick:function(t){return e.$emit(`click`)},repeatclick:function(t){return e.$emit(`click`)}}},[t(`div`,{class:e.iconClass})])},[],!1,null,`4c04fe92`,null,null).exports,Fw=(function(){let e=typeof window<`u`&&window.devicePixelRatio||1;return t=>Math.round(t*e)/e})(),Iw={name:`SliderComponent`,components:{PlusMinusButton:Pw},props:{width:{type:String,default:`auto`},height:{type:String,default:`6px`},data:{type:Array,default:null},dotSize:{type:[String,Number],default:`16px`},dotWidth:{type:String,required:!1},dotHeight:{type:String,required:!1},min:{type:Number,default:0},max:{type:Number,default:100},interval:{type:Number,default:1},show:{type:Boolean,default:!0},disabled:{type:[Boolean,Array],default:!1},piecewise:{type:Boolean,default:!1},tooltip:{type:[String,Boolean],default:`always`},eventType:{type:String,default:`auto`},direction:{type:String,default:`horizontal`},reverse:{type:Boolean,default:!1},lazy:{type:Boolean,default:!1},clickable:{type:Boolean,default:!0},speed:{type:Number,default:.5},realTime:{type:Boolean,default:!1},stopPropagation:{type:Boolean,default:!1},value:{type:[String,Number,Array,Object],default:0},piecewiseLabel:{type:Boolean,default:!1},debug:{type:Boolean,default:!0},fixed:{type:Boolean,default:!1},minRange:{type:Number},maxRange:{type:Number},processDraggable:{type:Boolean,default:!1},useKeyboard:{type:Boolean,default:!1},actionsKeyboard:{type:Array,default(){return[e=>e-1,e=>e+1]}},piecewiseFilter:{type:Function},tooltipMerge:{type:Boolean,default:!0},startAnimation:{type:Boolean,default:!1},enableCross:{type:Boolean,default:!0},valueInDot:{type:Boolean,default:!1},plusMinusButtons:{type:Boolean,default:!1},sliderStyle:[Array,Object,Function],focusStyle:[Array,Object,Function],tooltipDir:[Array,String],xformatter:[String,Function],mergeFormatter:[String,Function],piecewiseStyle:Object,disabledStyle:Object,piecewiseActiveStyle:Object,processStyle:Object,processClass:String,bgStyle:Object,bgClass:String,tooltipStyle:[Array,Object,Function],disabledDotStyle:[Array,Object,Function],labelStyle:Object,labelActiveStyle:Object,dotClass:[String,Array]},data(){return{flag:!1,dragFlag:!1,crossFlag:!1,keydownFlag:null,focusFlag:!1,processFlag:!1,processSign:null,size:0,fixedValue:0,focusSlider:0,currentValue:0,currentSlider:0,isComponentExists:!0,isMounted:!1,dotAxialSizePx:1}},computed:{tooltipFormatHelper(){return this.mergeFormatter?this.mergeFormatting(this.val[0],this.val[1]):this.xformatter?this.val[0]===this.val[1]?this.formatting(this.val[0]):this.formatting(this.val[0])+`-`+this.formatting(this.val[1]):this.val[0]===this.val[1]?this.val[0]:this.val[0]+`-`+this.val[1]},dotWidthVal(){return this.dotWidth||this.dotSize},dotHeightVal(){return this.dotHeight||this.dotSize},flowDirection(){return`l-ad-slider--${this.direction+(this.reverse?`-reverse`:``)}`},tooltipMergedPosition(){if(!this.isMounted)return{};let e=this.tooltipDirection[0];if(this.$refs.dot0){let t={};return t[e]=`-${this.dotAxialSizePx/2-this.size/2+9}px`,t.left=`50%`,t}},tooltipDirection(){let e=this.tooltipDir||(this.direction===`vertical`?`left`:`top`);return Array.isArray(e)?this.isRange?e:e[1]:this.isRange?[e,e]:e},tooltipStatus(){return this.tooltip===`hover`&&this.flag?`ad-slider-always`:this.tooltip?`ad-slider-${this.tooltip}`:``},tooltipClass(){return[`ad-slider-tooltip-${this.tooltipDirection}`,`ad-slider-tooltip`]},disabledArray(){return Array.isArray(this.disabled)?this.disabled:[this.disabled,this.disabled]},boolDisabled(){return this.disabledArray.every(e=>e===!0)},isDisabled(){return this.eventType===`none`?!0:this.boolDisabled},disabledClass(){return this.boolDisabled?`l-ad-slider--disabled`:``},stateClass(){return{"ad-slider-state-process-drag":this.processFlag,"ad-slider-state-drag":this.flag&&!this.processFlag&&!this.keydownFlag,"ad-slider-state-focus":this.focusFlag}},isRange(){return Array.isArray(this.value)},slider(){return this.isRange?[this.$refs.dot0,this.$refs.dot1]:[this.$refs.dot0]},minimum(){return this.data?0:this.min},val:{get(){return this.data?this.isRange?[this.data[this.currentValue[0]],this.data[this.currentValue[1]]]:this.data[this.currentValue]:this.currentValue},set(e){if(this.data)if(this.isRange){let t=this.data.indexOf(e[0]),n=this.data.indexOf(e[1]);t>-1&&n>-1&&(this.currentValue=[t,n])}else{let t=this.data.indexOf(e);t>-1&&(this.currentValue=t)}else this.currentValue=e}},currentIndex(){return this.isRange?this.data?this.currentValue:[this.getIndexByValue(this.currentValue[0]),this.getIndexByValue(this.currentValue[1])]:this.getIndexByValue(this.currentValue)},indexRange(){return this.isRange?this.currentIndex:[0,this.currentIndex]},maximum(){return this.data?this.data.length-1:this.max},multiple(){let e=`${this.interval}`.split(`.`)[1];return e?10**e.length:1},spacing(){return this.data?1:this.interval},total(){return this.data?this.data.length-1:(Math.floor((this.maximum-this.minimum)*this.multiple)%(this.interval*this.multiple)!==0&&this.printError(`Prop[interval] is illegal, Please make sure that the interval can be divisible`),(this.maximum-this.minimum)/this.interval)},usableSize(){return this.size-this.dotAxialSizePx},gap(){return this.usableSize/this.total},position(){return this.isRange?[(this.currentValue[0]-this.minimum)/this.spacing*this.gap+this.dotAxialSizePx/2,(this.currentValue[1]-this.minimum)/this.spacing*this.gap+this.dotAxialSizePx/2]:(this.currentValue-this.minimum)/this.spacing*this.gap+this.dotAxialSizePx/2},isFixed(){return this.fixed||this.minRange},limit(){return this.isRange?this.isFixed?[[this.dotAxialSizePx/2,this.dotAxialSizePx/2+(this.total-this.fixedValue)*this.gap],[this.fixedValue*this.gap+this.dotAxialSizePx/2,this.size-this.dotAxialSizePx/2]]:[[this.dotAxialSizePx/2,this.position[1]],[this.position[0],this.size-this.dotAxialSizePx/2]]:[this.dotAxialSizePx/2,this.size-this.dotAxialSizePx/2]},valueLimit(){return this.isRange?this.isFixed?[[this.minimum,this.maximum-this.fixedValue*(this.spacing*this.multiple)/this.multiple],[this.minimum+this.fixedValue*(this.spacing*this.multiple)/this.multiple,this.maximum]]:[[this.minimum,this.currentValue[1]],[this.currentValue[0],this.maximum]]:[this.minimum,this.maximum]},idleSlider(){return this.currentSlider===0?1:0},wrapStyles(){let e=this.direction===`vertical`?{height:this.height}:{width:this.width};return this.plusMinusButtons&&(e[this.direction===`vertical`?`margin-top`:`margin-right`]=`0.5rem`,e[this.direction===`vertical`?`margin-bottom`:`margin-left`]=`0.5rem`),e},sliderStyles(){return Array.isArray(this.sliderStyle)?this.isRange?this.sliderStyle:this.sliderStyle[1]:typeof this.sliderStyle==`function`?this.sliderStyle(this.val,this.currentIndex):this.isRange?[this.sliderStyle,this.sliderStyle]:this.sliderStyle},focusStyles(){return Array.isArray(this.focusStyle)?this.isRange?this.focusStyle:this.focusStyle[1]:typeof this.focusStyle==`function`?this.focusStyle(this.val,this.currentIndex):this.isRange?[this.focusStyle,this.focusStyle]:this.focusStyle},disabledDotStyles(){let e=this.disabledDotStyle;if(Array.isArray(e))return e;if(typeof e==`function`){let t=e(this.val,this.currentIndex);return Array.isArray(t)?t:[t,t]}return e?[e,e]:[{backgroundColor:`#ccc`},{backgroundColor:`#ccc`}]},tooltipStyles(){return Array.isArray(this.tooltipStyle)?this.isRange?this.tooltipStyle:this.tooltipStyle[1]:typeof this.tooltipStyle==`function`?this.tooltipStyle(this.val,this.currentIndex):this.isRange?[this.tooltipStyle,this.tooltipStyle]:this.tooltipStyle},elemStyles(){return this.direction===`vertical`?{width:this.width,height:`100%`,position:`relative`}:{height:this.height,position:`relative`}},draggableStyle(){return{cursor:this.boolDisabled?`default`:`pointer`}},dotStyles(){let e={width:this.dotWidthVal,height:this.dotHeightVal,position:`absolute`};return this.direction===`vertical`?e.left=`50%`:e.top=`50%`,e},piecewiseDotStyle(){return{width:this.width,height:this.height}},piecewiseDotWrap(){if(!this.piecewise&&!this.piecewiseLabel)return!1;let e=[];for(let t=0;t<=this.total;t++){let n=this.direction===`vertical`?{bottom:`${this.gap*t-this.usableSize/2}px`,left:0}:{left:`${this.gap*t-this.usableSize/2}px`,top:0},r=this.reverse?this.total-t:t,i=this.data?this.data[r]:this.spacing*r+this.min;this.piecewiseFilter&&!this.piecewiseFilter({index:r,label:i})||e.push({style:n,index:r,label:this.xformatter?this.formatting(i):i})}return e}},watch:{value(e){this.flag||this.setValue(e,!0)},max(e){if(e<this.min)return this.printError(`The maximum value can not be less than the minimum value.`);let t=this.limitValue(this.val);this.setValue(t),this.refresh()},min(e){if(e>this.max)return this.printError(`The minimum value can not be greater than the maximum value.`);let t=this.limitValue(this.val);this.setValue(t),this.refresh()},show(e){e&&!this.size&&this.$nextTick(()=>{this.refresh()})},fixed(){this.computedFixedValue()},minRange(){this.computedFixedValue()},reverse(){this.$refs.process.style.cssText=``,this.refresh()}},mounted(){if(this.isComponentExists=!0,typeof window>`u`||typeof document>`u`)return this.printError(`window or document is undefined, can not be initialization.`);this.$nextTick(()=>{this.isComponentExists&&(this.getStaticData(),this.setValue(this.limitValue(this.value),!0,this.startAnimation?this.speed:0),this.bindEvents(),this.isRange&&this.tooltipMerge&&!this.startAnimation&&this.$nextTick(()=>{this.handleOverlapTooltip()}))}),this.isMounted=!0},beforeDestroy(){this.isComponentExists=!1,this.unbindEvents()},methods:{bindEvents(){document.addEventListener(`touchmove`,this.moving,{passive:!1}),document.addEventListener(`touchend`,this.moveEnd,{passive:!1}),document.addEventListener(`mousedown`,this.blurSlider),document.addEventListener(`mousemove`,this.moving),document.addEventListener(`mouseup`,this.moveEnd),document.addEventListener(`mouseleave`,this.moveEnd),document.addEventListener(`keydown`,this.handleKeydown),document.addEventListener(`keyup`,this.handleKeyup),window.addEventListener(`resize`,this.refresh),this.isRange&&this.tooltipMerge&&(this.$refs.dot0.addEventListener(`transitionend`,this.handleOverlapTooltip),this.$refs.dot1.addEventListener(`transitionend`,this.handleOverlapTooltip))},unbindEvents(){document.removeEventListener(`touchmove`,this.moving),document.removeEventListener(`touchend`,this.moveEnd),document.removeEventListener(`mousedown`,this.blurSlider),document.removeEventListener(`mousemove`,this.moving),document.removeEventListener(`mouseup`,this.moveEnd),document.removeEventListener(`mouseleave`,this.moveEnd),document.removeEventListener(`keydown`,this.handleKeydown),document.removeEventListener(`keyup`,this.handleKeyup),window.removeEventListener(`resize`,this.refresh),this.isRange&&this.tooltipMerge&&(this.$refs.dot0.removeEventListener(`transitionend`,this.handleOverlapTooltip),this.$refs.dot1.removeEventListener(`transitionend`,this.handleOverlapTooltip))},handleKeydown(e){if(!this.useKeyboard||!this.focusFlag)return!1;switch(e.keyCode){case 37:case 40:e.preventDefault(),this.keydownFlag=!0,this.flag=!0,this.changeFocusSlider(this.actionsKeyboard[0]);break;case 38:case 39:e.preventDefault(),this.keydownFlag=!0,this.flag=!0,this.changeFocusSlider(this.actionsKeyboard[1]);break}},handleKeyup(){this.keydownFlag&&(this.keydownFlag=!1,this.flag=!1)},changeFocusSlider(e){if(this.isRange){let t=this.currentIndex.map((t,n)=>{if(n===this.focusSlider||this.fixed){let r=e(t),i=this.fixed?this.valueLimit[n]:[0,this.total];if(r<=i[1]&&r>=i[0])return r}return t});t[0]>t[1]&&(this.focusSlider=this.focusSlider===0?1:0,t=t.toReversed()),this.setIndex(t)}else this.setIndex(e(this.currentIndex))},blurSlider(e){let t=this.isRange?this.$refs[`dot${this.focusSlider}`]:this.$refs.dot;if(!t||t===e.target||t.contains(e.target))return!1;this.focusFlag=!1},formatting(e){return typeof this.xformatter==`string`?this.xformatter.replace(/\{value\}/,e):this.xformatter(e)},mergeFormatting(e,t){return typeof this.mergeFormatter==`string`?this.mergeFormatter.replaceAll(/\{(value1|value2)\}/g,(n,r)=>r===`value1`?e:t):this.mergeFormatter(e,t)},getPos(e){this.realTime&&this.getStaticData();let t=this.$refs.elem.getBoundingClientRect();return this.direction===`vertical`?this.reverse?e.clientY-t.top:this.size-(e.clientY-t.top):this.reverse?this.size-(e.clientX-t.left):e.clientX-t.left},processClick(e){this.fixed&&e.stopPropagation()},wrapClick(e){if(this.isDisabled||!this.clickable||this.processFlag||this.dragFlag)return!1;let t=this.getPos(e);if(this.isRange){if(this.disabledArray.every(e=>e===!1))this.currentSlider=t>(this.position[1]-this.position[0])/2+this.position[0]?1:0;else if(this.disabledArray[0]){if(t<this.position[0])return!1;this.currentSlider=1}else if(this.disabledArray[1]){if(t>this.position[1])return!1;this.currentSlider=0}}if(this.disabledArray[this.currentSlider])return!1;if(this.setValueOnPos(t),this.isRange&&this.tooltipMerge){let e=setInterval(()=>this.handleOverlapTooltip(),16.7);setTimeout(()=>window.clearInterval(e),this.speed*1e3)}},moveStart(e,t=0,n){if(this.disabledArray[t])return!1;if(this.stopPropagation&&e.stopPropagation(),this.isRange){if(this.currentSlider=t,n){if(!this.processDraggable)return!1;this.processFlag=!0,this.processSign={pos:this.position,start:this.getPos(e.targetTouches&&e.targetTouches[0]?e.targetTouches[0]:e)}}!this.enableCross&&this.val[0]===this.val[1]&&(this.crossFlag=!0)}!n&&this.useKeyboard&&(this.focusFlag=!0,this.focusSlider=t),this.flag=!0,this.$emit(`drag-start`,this)},moving(e){if(this.stopPropagation&&e.stopPropagation(),!this.flag)return!1;e.preventDefault(),e.targetTouches&&e.targetTouches[0]&&(e=e.targetTouches[0]),this.processFlag?(this.currentSlider=0,this.setValueOnPos(this.processSign.pos[0]+this.getPos(e)-this.processSign.start,!0),this.currentSlider=1,this.setValueOnPos(this.processSign.pos[1]+this.getPos(e)-this.processSign.start,!0)):(this.dragFlag=!0,this.setValueOnPos(this.getPos(e),!0)),this.isRange&&this.tooltipMerge&&this.handleOverlapTooltip()},moveEnd(e){if(this.stopPropagation&&e.stopPropagation(),this.flag)this.$emit(`drag-end`,this),this.lazy&&this.isDiff(this.val,this.value)&&this.syncValue();else return!1;this.flag=!1,window.setTimeout(()=>{this.crossFlag=!1,this.dragFlag=!1,this.processFlag=!1},0),this.setPosition()},setValueOnPos(e,t){let n=this.isRange?this.limit[this.currentSlider]:this.limit,r=this.isRange?this.valueLimit[this.currentSlider]:this.valueLimit,i=Math.round((e-this.dotAxialSizePx/2)/this.gap);if(e>=n[0]&&e<=n[1]){let n=this.getValueByIndex(i);this.setTransform(e),this.setCurrentValue(n,t),this.isRange&&(this.fixed||this.isLessRange(e,i))&&(this.setTransform(e+this.fixedValue*this.gap*(this.currentSlider===0?1:-1),!0),this.setCurrentValue((n*this.multiple+this.fixedValue*this.spacing*this.multiple*(this.currentSlider===0?1:-1))/this.multiple,t,!0))}else{let a=e<n[0]?0:1,o=a===0?1:0;this.setTransform(n[a]),this.setCurrentValue(r[a]),this.isRange&&(this.fixed||this.isLessRange(e,i))?(this.setTransform(this.limit[this.idleSlider][a],!0),this.setCurrentValue(this.valueLimit[this.idleSlider][a],t,!0)):this.isRange&&(this.enableCross||this.crossFlag)&&!this.isFixed&&!this.disabledArray[a]&&this.currentSlider===o&&(this.focusSlider=a,this.currentSlider=a)}this.crossFlag=!1},isLessRange(e,t){if(!this.isRange||!this.minRange&&!this.maxRange)return!1;let n=this.currentSlider===0?this.currentIndex[1]-t:t-this.currentIndex[0];return this.minRange&&n<=this.minRange?(this.fixedValue=this.minRange,!0):this.maxRange&&n>=this.maxRange?(this.fixedValue=this.maxRange,!0):(this.computedFixedValue(),!1)},isDiff(e,t){return Object.prototype.toString.call(e)===Object.prototype.toString.call(t)?Array.isArray(e)&&e.length===t.length?e.some((e,n)=>e!==t[n]):e!==t:!0},setCurrentValue(e,t,n){let r=n?this.idleSlider:this.currentSlider;if(e<this.minimum||e>this.maximum)return!1;this.isRange?this.isDiff(this.currentValue[r],e)&&(this.currentValue.splice(r,1,e),(!this.lazy||!this.flag)&&this.syncValue()):this.isDiff(this.currentValue,e)&&(this.currentValue=e,(!this.lazy||!this.flag)&&this.syncValue()),t||this.setPosition()},getValueByIndex(e){return(this.spacing*this.multiple*e+this.minimum*this.multiple)/this.multiple},getIndexByValue(e){return Math.round((e-this.minimum)*this.multiple)/(this.spacing*this.multiple)},setIndex(e){if(Array.isArray(e)&&this.isRange){let t=this.data?[this.data[e[0]],this.data[e[1]]]:[this.getValueByIndex(e[0]),this.getValueByIndex(e[1])];this.setValue(t)}else e=this.getValueByIndex(e),this.isRange&&(this.currentSlider=e>(this.currentValue[1]-this.currentValue[0])/2+this.currentValue[0]?1:0),this.setCurrentValue(e)},increment(e){if(this.boolDisabled)return;let t=this.getValue()+e*this.interval;t>this.max||t<this.min||this.setValue(t)},setValue(e,t,n){if(this.isDiff(this.val,e)){let n=this.limitValue(e);this.val=this.isRange?n.concat():n,this.computedFixedValue(),this.syncValue(t)}this.$nextTick(()=>this.setPosition(n))},computedFixedValue(){if(!this.isFixed)return this.fixedValue=0,!1;this.fixedValue=Math.max(this.fixed?this.currentIndex[1]-this.currentIndex[0]:0,this.minRange||0)},setPosition(e){this.flag||this.setTransitionTime(e===void 0?this.speed:e),this.isRange?(this.setTransform(this.position[0],this.currentSlider===1),this.setTransform(this.position[1],this.currentSlider===0)):this.setTransform(this.position),this.flag||this.setTransitionTime(0)},setTransform(e,t){let n=t?this.idleSlider:this.currentSlider,r=Fw((this.direction===`vertical`?this.dotAxialSizePx/2-e:e-this.dotAxialSizePx/2)*(this.reverse?-1:1)),i=this.direction===`vertical`?`translate(-50%, ${r}px)`:`translate(${r}px, -50%)`,a=this.fixed?`${this.fixedValue*this.gap}px`:`${n===0?this.position[1]-e:e-this.position[0]}px`,o=this.fixed?`${n===0?e:e-this.fixedValue*this.gap}px`:`${n===0?e:this.position[0]}px`;this.slider[n].style.transform=i,this.slider[n].style.WebkitTransform=i,this.slider[n].style.msTransform=i,this.isRange?this.direction===`vertical`?(this.$refs.process.style.height=a,this.$refs.process.style[this.reverse?`top`:`bottom`]=o):(this.$refs.process.style.width=a,this.$refs.process.style[this.reverse?`right`:`left`]=o):this.direction===`vertical`?(this.$refs.process.style.height=`${e}px`,this.$refs.process.style[this.reverse?`top`:`bottom`]=0):(this.$refs.process.style.width=`${e}px`,this.$refs.process.style[this.reverse?`right`:`left`]=0)},setTransitionTime(e){e||this.$refs.process.offsetWidth;for(let t=0;t<this.slider.length;t++)this.slider[t].style.transitionDuration=`${e}s`,this.slider[t].style.WebkitTransitionDuration=`${e}s`;this.isRange,this.$refs.process.style.transitionDuration=`${e}s`,this.$refs.process.style.WebkitTransitionDuration=`${e}s`},limitValue(e){if(this.data)return e;let t=t=>t<this.min?(this.printError(`The value of the slider is ${e}, the minimum value is ${this.min}, the value of this slider can not be less than the minimum value`),this.min):t>this.max?(this.printError(`The value of the slider is ${e}, the maximum value is ${this.max}, the value of this slider can not be greater than the maximum value`),this.max):t;return this.isRange?e.map(e=>t(e)):t(e)},isActive(e){return e>=this.indexRange[0]&&e<=this.indexRange[1]},syncValue(e){let t=this.isRange?this.val.concat():this.val;this.$emit(`input`,t),this.keydownFlag&&this.$emit(`on-keypress`,t),e||this.$emit(`callback`,t)},getValue(){return this.val},getIndex(){return this.currentIndex},getStaticData(){this.$refs.elem&&(this.size=this.direction===`vertical`?this.$refs.elem.offsetHeight:this.$refs.elem.offsetWidth,this.dotAxialSizePx=this.direction===`vertical`?this.$refs.dot0.clientHeight:this.$refs.dot0.clientWidth)},refresh(){this.$refs.elem&&(this.getStaticData(),this.computedFixedValue(),this.setPosition(0))},printError(e){this.debug&&console.error(`[VueSlider error]: ${e}`)},handleOverlapTooltip(){let e=this.tooltipDirection[0]===this.tooltipDirection[1];if(this.isRange&&e){let e=this.reverse?this.$refs.tooltip1:this.$refs.tooltip0,t=this.reverse?this.$refs.tooltip0:this.$refs.tooltip1,n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),i=n.right,a=r.left,o=n.top,s=r.top+r.height,c=this.direction===`horizontal`&&i>a,l=this.direction===`vertical`&&s>o;c||l?this.handleDisplayMergedTooltip(!0):this.handleDisplayMergedTooltip(!1)}},handleDisplayMergedTooltip(e){let t=this.$refs.tooltip0,n=this.$refs.tooltip1,r=this.$refs.process.querySelectorAll(`.vue-merged-tooltip`)[0];e?(t.style.visibility=`hidden`,n.style.visibility=`hidden`,r.style.visibility=`visible`):(t.style.visibility=`visible`,n.style.visibility=`visible`,r.style.visibility=`hidden`)},dotContents(){return Notations.current.name===`Blind`||Theme.current().name===`S9`?``:this.valueInDot?Math.round(this.getValue()):``}}},Lw=D(Iw,function(){var e=this,t=e._self._c;return t(`div`,{directives:[{name:`show`,rawName:`v-show`,value:e.show,expression:`show`}],class:[`l-ad-slider`,e.flowDirection,e.disabledClass,{"l-ad-slider--has-label":e.piecewiseLabel}]},[e.plusMinusButtons?t(`PlusMinusButton`,{attrs:{type:`minus`},on:{click:function(t){return e.increment(-1)}}}):e._e(),t(`div`,{ref:`wrap`,class:[`l-ad-slider__wrap`,e.stateClass],style:[e.wrapStyles,e.boolDisabled?e.disabledStyle:null],on:{click:e.wrapClick}},[t(`div`,{ref:`elem`,class:[`l-ad-slider__bg`,`c-ad-slider__bg`,e.bgClass],style:[e.elemStyles,e.bgStyle,e.draggableStyle],attrs:{"aria-hidden":`true`},on:{mousedown:function(t){return e.moveStart(t,0,!0)},touchstart:function(t){return e.moveStart(t,0,!0)}}},[e.isRange?[t(`div`,{key:`dot0`,ref:`dot0`,class:[e.tooltipStatus,`l-ad-slider__dot`,`c-ad-slider__dot`,{"l-ad-slider__dot--focus":e.focusFlag&&e.focusSlider===0,"l-ad-slider__dot--dragging":e.flag&&e.currentSlider===0,"l-ad-slider__dot--disabled":!e.boolDisabled&&e.disabledArray[0]}],style:e.dotStyles,on:{mousedown:e.moveStart,touchstart:e.moveStart}},[t(`div`,{class:[`l-ad-slider__dot-handle`,`c-ad-slider__dot-handle`,e.dotClass],style:[!e.boolDisabled&&e.disabledArray[0]?e.disabledDotStyles[0]:null,e.sliderStyles[0],e.focusFlag&&e.focusSlider===0?e.focusStyles[0]:null]}),t(`div`,{ref:`tooltip0`,class:[`ad-slider-tooltip-`+e.tooltipDirection[0],`ad-slider-tooltip-wrap`]},[t(`span`,{staticClass:`ad-slider-tooltip`,style:e.tooltipStyles[0]},[e._v(e._s(e.xformatter?e.formatting(e.val[0]):e.val[0]))])])]),t(`div`,{key:`dot1`,ref:`dot1`,class:[e.tooltipStatus,`l-ad-slider__dot`,`c-ad-slider__dot`,{"l-ad-slider__dot--focus":e.focusFlag&&e.focusSlider===1,"l-ad-slider__dot--dragging":e.flag&&e.currentSlider===1,"l-ad-slider__dot--disabled":!e.boolDisabled&&e.disabledArray[1]}],style:e.dotStyles,on:{mousedown:function(t){return e.moveStart(t,1)},touchstart:function(t){return e.moveStart(t,1)}}},[t(`div`,{class:[`l-ad-slider__dot-handle`,`c-ad-slider__dot-handle`,e.dotClass],style:[!e.boolDisabled&&e.disabledArray[1]?e.disabledDotStyles[1]:null,e.sliderStyles[1],e.focusFlag&&e.focusSlider===1?e.focusStyles[1]:null]}),t(`div`,{ref:`tooltip1`,class:[`ad-slider-tooltip-`+e.tooltipDirection[1],`ad-slider-tooltip-wrap`]},[t(`span`,{staticClass:`ad-slider-tooltip`,style:e.tooltipStyles[1]},[e._v(e._s(e.xformatter?e.formatting(e.val[1]):e.val[1]))])])])]:[t(`div`,{key:`dot0`,ref:`dot0`,class:[e.tooltipStatus,`l-ad-slider__dot`,`c-ad-slider__dot`,{"l-ad-slider__dot--focus":e.focusFlag&&e.focusSlider===0,"l-ad-slider__dot--dragging":e.flag&&e.currentSlider===0}],style:e.dotStyles,on:{mousedown:e.moveStart,touchstart:e.moveStart}},[t(`div`,{class:[`l-ad-slider__dot-handle`,`c-ad-slider__dot-handle`,e.dotClass],style:[e.sliderStyles,e.focusFlag&&e.focusSlider===0?e.focusStyles:null]},[e._v(` `+e._s(e.dotContents(0))+` `)]),t(`div`,{class:[`ad-slider-tooltip-`+e.tooltipDirection,`ad-slider-tooltip-wrap`]},[t(`span`,{staticClass:`ad-slider-tooltip`,style:e.tooltipStyles},[e._v(e._s(e.xformatter?e.formatting(e.val):e.val))])])])],t(`ul`,{staticClass:`ad-slider-piecewise`},e._l(e.piecewiseDotWrap,function(n,r){return t(`li`,{key:r,staticClass:`ad-slider-piecewise-item`,style:[e.piecewiseDotStyle,n.style]},[e.piecewise?t(`span`,{staticClass:`ad-slider-piecewise-dot`,style:[e.piecewiseStyle,e.isActive(n.index)?e.piecewiseActiveStyle:null]}):e._e(),e.piecewiseLabel?t(`span`,{staticClass:`ad-slider-piecewise-label`,style:[e.labelStyle,e.isActive(n.index)?e.labelActiveStyle:null]},[e._v(` `+e._s(n.label)+` `)]):e._e()])}),0),t(`div`,{ref:`process`,class:[`l-ad-slider__process`,`c-ad-slider__process`,{"ad-slider-process-draggable":e.isRange&&e.processDraggable},e.processClass],style:[e.elemStyles,e.bgStyle,e.draggableStyle],on:{click:e.processClick}},[t(`div`,{ref:`mergedTooltip`,class:[`vue-merged-tooltip`,`ad-slider-tooltip-`+e.tooltipDirection[0],`ad-slider-tooltip-wrap`],style:e.tooltipMergedPosition},[t(`span`,{staticClass:`ad-slider-tooltip`,style:e.tooltipStyles},[e._v(` `+e._s(e.tooltipFormatHelper)+` `)])])])],2)]),e.plusMinusButtons?t(`PlusMinusButton`,{attrs:{type:`plus`},on:{click:function(t){return e.increment(1)}}}):e._e()],1)},[],!1,null,null,null,null).exports,Rw=D({name:`AnimationOptionsModal`,components:{ModalOptionsToggleButton:Aw,ModalWrapperOptions:Mw,SliderComponent:Lw},data(){return{infinityUnlocked:!1,eternityUnlocked:!1,dilationUnlocked:!1,tachyonsUnlocked:!1,realityUnlocked:!1,animatedThemeUnlocked:!1,bigCrunch:!1,eternity:!1,dilation:!1,tachyonParticles:!1,reality:!1,background:!1,blobSnowflakes:16,isS11Active:!1,isBlackHoleUnlocked:!1,blobHole:!1,isS11Unlocked:!1}},computed:{sliderProps(){return{min:1,max:500,interval:1,width:`100%`,tooltip:!1}},fullCompletion(){return player.records.fullGameCompletions>0}},watch:{bigCrunch(e){player.options.animations.bigCrunch=e},eternity(e){player.options.animations.eternity=e},dilation(e){player.options.animations.dilation=e},tachyonParticles(e){player.options.animations.tachyonParticles=e},reality(e){player.options.animations.reality=e},background(e){player.options.animations.background=e},blobSnowflakes(e){player.options.animations.blobSnowflakes=Number.parseInt(e,10)},blobHole(e){player.options.animations.blobHole=e}},methods:{update(){let e=PlayerProgress.current;this.infinityUnlocked=this.fullCompletion||e.isInfinityUnlocked,this.eternityUnlocked=this.fullCompletion||e.isEternityUnlocked,this.realityUnlocked=this.fullCompletion||e.isRealityUnlocked,this.dilationUnlocked=this.realityUnlocked||Achievement(136).canBeApplied,this.tachyonsUnlocked=this.realityUnlocked||Currency.tachyonParticles.gt(0),this.animatedThemeUnlocked=Theme.animatedThemeUnlocked,this.isS11Active=Theme.currentName()===`S11`,this.isS11Unlocked=Themes.available().map(e=>e.name).includes(`S11`),this.isBlackHoleUnlocked=BlackHoles.areUnlocked;let t=player.options.animations;this.bigCrunch=t.bigCrunch,this.eternity=t.eternity,this.dilation=t.dilation,this.tachyonParticles=t.tachyonParticles,this.reality=t.reality,this.background=t.background,this.blobSnowflakes=t.blobSnowflakes,this.blobHole=t.blobHole},adjustSliderValue(e){this.blobSnowflakes=e,player.options.blobSnowflakes=this.blobSnowflakes}}},function(){var e=this,t=e._self._c;return t(`ModalWrapperOptions`,{staticClass:`c-modal-options__large`,scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` Animation Options `)]},proxy:!0}])},[t(`div`,{staticClass:`c-modal-options__button-container`},[e.infinityUnlocked?t(`ModalOptionsToggleButton`,{attrs:{text:`Big Crunch:`},model:{value:e.bigCrunch,callback:function(t){e.bigCrunch=t},expression:`bigCrunch`}}):e._e(),e.eternityUnlocked?t(`ModalOptionsToggleButton`,{attrs:{text:`Eternity:`},model:{value:e.eternity,callback:function(t){e.eternity=t},expression:`eternity`}}):e._e(),e.dilationUnlocked?t(`ModalOptionsToggleButton`,{attrs:{text:`Dilation:`},model:{value:e.dilation,callback:function(t){e.dilation=t},expression:`dilation`}}):e._e(),e.tachyonsUnlocked?t(`ModalOptionsToggleButton`,{attrs:{text:`Tachyon particles:`},model:{value:e.tachyonParticles,callback:function(t){e.tachyonParticles=t},expression:`tachyonParticles`}}):e._e(),e.realityUnlocked?t(`ModalOptionsToggleButton`,{attrs:{text:`Reality:`},model:{value:e.reality,callback:function(t){e.reality=t},expression:`reality`}}):e._e(),e.isS11Unlocked&&e.isBlackHoleUnlocked?t(`ModalOptionsToggleButton`,{attrs:{text:`Always use Blobhole:`},model:{value:e.blobHole,callback:function(t){e.blobHole=t},expression:`blobHole`}}):e._e(),e.isS11Active?t(`div`,[e.animatedThemeUnlocked?t(`ModalOptionsToggleButton`,{attrs:{onclick:`Themes.find(Theme.currentName()).set();`,text:`Blobsnow:`},model:{value:e.background,callback:function(t){e.background=t},expression:`background`}}):e._e()],1):t(`div`,[e.animatedThemeUnlocked?t(`ModalOptionsToggleButton`,{attrs:{onclick:`Themes.find(Theme.currentName()).set();`,text:`Background:`},model:{value:e.background,callback:function(t){e.background=t},expression:`background`}}):e._e()],1),e.isS11Active?t(`div`,{staticClass:`c-blobflake-slider o-primary-btn o-primary-btn--modal-option o-primary-btn--slider`},[t(`b`,[e._v(e._s(e.quantifyInt(`Blobflake`,parseInt(e.blobSnowflakes))))]),t(`SliderComponent`,e._b({staticClass:`o-primary-btn--slider__slider`,attrs:{value:e.blobSnowflakes},on:{input:function(t){return e.adjustSliderValue(t)}}},`SliderComponent`,e.sliderProps,!1))],1):e._e()],1)])},[],!1,null,`db3ae945`,null,null).exports,zw={name:`AwayProgressOptionsEntry`,components:{ModalOptionsToggleButton:Aw},props:{name:{type:String,required:!0}},data(){return{setting:!1,isVisible:!1}},computed:{type(){return AwayProgressTypes.all[this.name]},text(){return`${this.type.formatName}:`}},watch:{setting(e){this.type.option=e}},methods:{update(){let e=this.type;this.setting=e.option,this.isVisible=e.isUnlocked()}}},Bw={name:`AwayProgressOptionsModal`,components:{AwayProgressOptionsEntry:D(zw,function(){var e=this,t=e._self._c;return e.isVisible?t(`ModalOptionsToggleButton`,{attrs:{text:e.text},model:{value:e.setting,callback:function(t){e.setting=t},expression:`setting`}}):e._e()},[],!1,null,null,null,null).exports,ModalWrapperOptions:Mw},computed:{all(){return AwayProgressTypes.showOption}}},Vw=D(Bw,function(){var e=this,t=e._self._c;return t(`ModalWrapperOptions`,{staticClass:`l-wrapper`,scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` Away Progress Options `)]},proxy:!0}])},[t(`div`,{staticClass:`c-modal-options__button-container`},e._l(e.all,function(e){return t(`AwayProgressOptionsEntry`,{key:e,attrs:{name:e}})}),1),e._v(` Note: Selected resources will only show if they've increased. `)])},[],!1,null,`67da4dd8`,null,null).exports,Hw={name:`BackupEntry`,components:{PrimaryButton:L},props:{slotData:{type:Object,required:!0}},data(){return{currTime:0}},computed:{save(){return GameStorage.loadFromBackup(this.slotData.id)},progressStr(){if(!this.save)return`(Empty)`;let e=[this.save.celestials.pelle.realityShards,this.save.reality.iMCap,this.save.reality.realityMachines,this.save.eternityPoints,this.save.infinityPoints,this.save.antimatter],t=[`Reality Shards`,`Imaginary Machine Cap`,`Reality Machines`,`Eternity Points`,`Infinity Points`,`Antimatter`];for(let n=0;n<e.length;n++){let r=new Decimal(e[n]);if(r.gt(0))return`${t[n]}: ${formatPostBreak(r,2)}`}return`No resources`},slotType(){let e=this.slotData.intervalStr?.();switch(this.slotData.type){case us.ONLINE:return`Saves every ${e} online`;case us.OFFLINE:return`Saves after ${e} offline`;case us.RESERVE:return`Pre-loading save`;default:throw Error(`Unrecognized backup save type`)}},lastSaved(){let e=GameStorage.lastBackupTimes[this.slotData.id]?.date??0;return e?`Last saved: ${TimeSpan.fromMilliseconds(new Decimal(this.currTime-e))} ago`:`Slot not currently in use`}},methods:{update(){this.currTime=Date.now()},load(){if(!this.save)return;Modal.hide();let e=this.save;GameStorage.saveToReserveSlot(),GameStorage.ignoreBackupTimer=!0,GameStorage.offlineEnabled=player.options.loadBackupWithoutOffline?!1:void 0,GameStorage.oldBackupTimer=player.backupTimer,GameStorage.loadPlayerObject(e),GameUI.notify.info(`Game loaded from backup slot #${this.slotData.id}`),GameStorage.loadBackupTimes(),GameStorage.ignoreBackupTimer=!1,GameStorage.offlineEnabled=void 0,GameStorage.resetBackupTimer(),GameStorage.save(!0)}}},Uw=D(Hw,function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`c-bordered-entry`},[t(`h3`,[e._v(`Slot #`+e._s(e.slotData.id)+`:`)]),t(`span`,[e._v(e._s(e.progressStr))]),t(`span`,[e._v(` `+e._s(e.slotType)+` `)]),t(`span`,{staticClass:`c-fixed-height`},[e._v(e._s(e.lastSaved))]),t(`PrimaryButton`,{staticClass:`o-primary-btn--width-medium`,class:{"o-primary-btn--disabled":!e.save},on:{click:function(t){return e.load()}}},[e._v(` Load `)])],1)},[],!1,null,`6efcde5d`,null,null).exports,Ww=D({name:`BackupWindowModal`,components:{ModalWrapper:jw,BackupEntry:Uw,PrimaryButton:L},data(){return{nextSave:0,ignoreOffline:!1}},computed:{backupSlots:()=>ds,deleteText:()=>`clearing your browser cookies`},watch:{ignoreOffline(e){player.options.loadBackupWithoutOffline=e}},methods:{update(){this.nextSave=Object.values(GameStorage.lastBackupTimes).map(e=>e&&e.backupTimer).sum(),this.ignoreOffline=player.options.loadBackupWithoutOffline},offlineOptionClass(){return{"c-modal__confirmation-toggle__checkbox":!0,"c-modal__confirmation-toggle__checkbox--active":this.ignoreOffline}},toggleOffline(){this.ignoreOffline=!this.ignoreOffline},importAsFile(e){if(e.target.files.length===0)return;let t=new FileReader;t.onload=function(){GameStorage.importBackupsFromFile(t.result)},t.readAsText(e.target.files[0])}}},function(){var e=this,t=e._self._c;return t(`ModalWrapper`,{scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` Automatic Backup Saves `)]},proxy:!0}])},[t(`div`,{staticClass:`c-info c-modal--short`},[e._v(` The game makes automatic backups based on time you have spent online or offline. Timers for online backups only run when the game is open, and offline backups only save to the slot with the longest applicable timer. Additionally, your current save is saved into the last slot any time a backup from here is loaded. `),t(`div`,{staticClass:`c-modal__confirmation-toggle`,on:{click:e.toggleOffline}},[t(`div`,{class:e.offlineOptionClass()},[e.ignoreOffline?t(`span`,{staticClass:`fas fa-check`}):e._e()]),t(`span`,{staticClass:`c-modal__confirmation-toggle__text`},[e._v(` Load with offline progress disabled `)])]),t(`div`,{staticClass:`c-entry-container`},e._l(e.backupSlots,function(n){return t(`BackupEntry`,{key:e.nextSave+n.id,staticClass:`l-backup-entry`,attrs:{"slot-data":n}})}),1),e._v(` These backups are still stored in the same place as your game save and can still be lost if you do anything external to the game which would delete your save itself, such as `+e._s(e.deleteText)+`. You can import/export all backups at once as files, using these buttons: `),t(`div`,{staticClass:`c-backup-file-ops`},[t(`PrimaryButton`,{staticClass:`o-btn-file-ops`,attrs:{onclick:`GameStorage.exportBackupsAsFile()`}},[e._v(` Export as file `)]),t(`PrimaryButton`,{staticClass:`o-btn-file-ops`},[t(`input`,{staticClass:`c-file-import`,attrs:{type:`file`,accept:`.txt`},on:{change:e.importAsFile}}),t(`label`,{attrs:{for:`file`}},[e._v(`Import from file`)])])],1),e._v(` Each of your three save slots has its own separate set of backups. `)])])},[],!1,null,`698c88b2`,null,null).exports,Gw={name:`ConfirmationOptionsEntry`,components:{ModalOptionsToggleButton:Aw},props:{index:{type:Number,required:!0}},data(){return{isUnlocked:!1,option:!1}},computed:{entry(){return ConfirmationTypes.index[this.index]},name(){return`${this.entry.name}:`},styleObject(){return{"background-color":this.option?`var(--color-good)`:`var(--color-gh-purple)`}}},watch:{option(e){this.entry.option=e}},created(){this.option=this.entry.option},methods:{update(){this.isUnlocked=this.entry.isUnlocked()}}},Kw=D(Gw,function(){var e=this,t=e._self._c;return e.isUnlocked?t(`ModalOptionsToggleButton`,{style:e.styleObject,attrs:{text:e.name},model:{value:e.option,callback:function(t){e.option=t},expression:`option`}}):e._e()},[],!1,null,null,null,null).exports,qw=D({name:`ConfirmationOptionsModal`,components:{ModalWrapperOptions:Mw,ConfirmationOptionsEntry:Kw},computed:{count(){return ConfirmationTypes.index.length},noConfirmations(){return ConfirmationTypes.index.every(e=>!e.isUnlocked())}}},function(){var e=this,t=e._self._c;return t(`ModalWrapperOptions`,{staticClass:`c-modal-options__large`,scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` Confirmation Options `)]},proxy:!0}])},[t(`div`,{staticClass:`c-modal-options__button-container`},[e.noConfirmations?t(`span`,[e._v(` You do not have anything that requires confirmation, but if you did it would appear here. `)]):e._e(),e._l(e.count,function(e){return t(`ConfirmationOptionsEntry`,{key:e,attrs:{index:e-1}})})],2)])},[],!1,null,null,null,null).exports,Jw=D({name:`CosmeticSetDropdown`,computed:{lockedSets(){return GlyphAppearanceHandler.lockedSets.map(e=>GameDatabase.reality.glyphCosmeticSets[e])}},methods:{select(e){GlyphAppearanceHandler.setInModal=e,this.$parent.openRequest=!1}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-select-theme`},[t(`div`,{staticClass:`l-select-theme__inner`},e._l(e.lockedSets,function(n){return t(`div`,{key:n.id,staticClass:`o-primary-btn l-select-theme__item c-select-theme__item`,on:{click:function(t){return e.select(n)}}},[e._v(` `+e._s(n.name)+` `)])}),0)])},[],!1,null,null,null,null).exports,Yw=D({name:`CosmeticSetChoiceModal`,components:{ModalWrapperChoice:BC,ExpandingControlBox:Pt,CosmeticSetDropdown:Jw,GlyphComponent:Tw},data(){return{initialSet:``,currentSet:``}},computed:{lockedSets(){return GlyphAppearanceHandler.lockedSets},cosmeticTypes(){return CosmeticGlyphTypes.list.filter(e=>e.isCosmetic&&e.isUnlocked).map(e=>e.id)},setName(){return this.currentSet?.name??`None Selected`},setContents(){let e=[];return this.symbols&&e.push(quantify(`symbol`,this.symbols.length,0,0,e=>e)),this.colors&&e.push(quantify(`color scheme`,this.colors.length,0,0,e=>e)),e.join(` and `)},symbols(){return this.currentSet.symbol},colors(){return this.currentSet.color},glyphIconProps(){return{size:`3rem`,"glow-blur":`0.3rem`,"glow-spread":`0.1rem`,"text-proportion":.66}}},created(){this.initialSet=GlyphAppearanceHandler.chosenFromModal,GlyphAppearanceHandler.setInModal=this.initialSet},methods:{update(){this.currentSet=GlyphAppearanceHandler.setInModal},chooseSet(){GlyphAppearanceHandler.chosenFromModal=this.currentSet},cancelSet(){GlyphAppearanceHandler.chosenFromModal=this.initialSet,this.emitClose()},fakeGlyph(e){return{type:`power`,strength:1,color:e}}}},function(){var e=this,t=e._self._c;return t(`ModalWrapperChoice`,{attrs:{"cancel-fn":e.cancelSet},on:{confirm:e.chooseSet},scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` Choose a Glyph Cosmetic Set `)]},proxy:!0}])},[t(`div`,{staticClass:`c-center`},[t(`ExpandingControlBox`,{staticClass:`o-primary-btn c-dropdown-btn`,scopedSlots:e._u([{key:`header`,fn:function(){return[t(`div`,{staticClass:`c-dropdown-header`},[e._v(` ▼ Available Sets ▼ `),t(`br`),e._v(` `+e._s(e.setName)+` `)])]},proxy:!0},{key:`dropdown`,fn:function(){return[t(`CosmeticSetDropdown`)]},proxy:!0}])}),e.currentSet?t(`div`,[e._v(` The "`+e._s(e.currentSet.name)+`" Set contains the following `+e._s(e.setContents)+`: `),t(`br`),e._l(e.symbols,function(n){return t(`span`,{key:n,staticClass:`o-single-symbol`},[e._v(` `+e._s(n)+` `)])}),t(`br`),e._l(e.colors,function(n){return t(`span`,{key:n,staticClass:`o-single-glyph`},[t(`GlyphComponent`,e._b({attrs:{glyph:e.fakeGlyph(n)}},`GlyphComponent`,e.glyphIconProps,!1))],1)})],2):e._e()],1)])},[],!1,null,`fe25906a`,null,null).exports,Xw={name:`GlyphCustomizationSlidingWindow`,props:{type:{type:String,required:!0},isSymbol:{type:Boolean,required:!0},options:{type:Array,required:!0},glyphId:{type:Number,required:!1,default:-1}},data(){return{isActive:!1,selected:``,leftmostIndex:0,realityColor:``,darkKeySwap:!1}},computed:{isSingleGlyph(){return this.glyphId!==-1},attrString(){return this.isSymbol?`symbol`:`color`},typeObject(){return CosmeticGlyphTypes},defaultOption(){if(this.realityColor)return this.realityColor;let e=this.typeObject[this.type],t=`${this.isSingleGlyph?`current`:`default`}${this.attrString.capitalize()}`;return this.isSymbol?e[t].symbol:e[t].border},canScroll(){return this.options.length>this.windowSize},windowSize(){return 17}},created(){this.updateSelected()},methods:{update(){this.isSingleGlyph?this.isActive=!Glyphs.findById(this.glyphId).cosmetic:this.isActive=player.reality.glyphs.cosmetics.active,this.type===`reality`&&!this.isSymbol&&(this.realityColor=GlyphAppearanceHandler.realityColor),this.darkKeySwap=player.options.glyphBG},select(e){if(!(!this.isSingleGlyph&&!this.isActive)){if(this.isSingleGlyph){let t=Glyphs.findById(this.glyphId);t[this.attrString]=e,this.active||(t.cosmetic=void 0)}else player.reality.glyphs.cosmetics[`${this.attrString}Map`][this.type]=e;this.updateSelected(),EventHub.dispatch(GAME_EVENT.GLYPH_VISUAL_CHANGE)}},updateSelected(){this.isSingleGlyph?this.selected=Glyphs.findById(this.glyphId)[this.attrString]:this.selected=this.isSymbol?this.typeObject[this.type].currentSymbol.symbol:this.typeObject[this.type].currentColor.str},containerClassObject(){return{"c-all-options":!0,"o-option--inactive":!this.isActive}},defaultOptionClassObject(){let e=this.isSingleGlyph?void 0:this.defaultOption;return{"o-symbol":this.isSymbol,"o-color":!this.isSymbol,"o-clickable":this.isActive,"o-option--inactive":this.isSymbol&&e!==this.selected}},optionClassObject(e){return{"o-symbol":this.isSymbol,"o-color":!this.isSymbol,"o-clickable":this.isActive,"o-option--inactive":this.isSymbol&&e!==this.selected}},boxStyle(e){if(this.isSymbol||!e)return{};let t=GlyphAppearanceHandler.getColorProps(e);return{background:t.bg,color:this.invertBW(t.bg),"box-shadow":`0 0 0.4rem 0.1rem ${t.border}`}},windowStyle(){return{transform:`translate(${2-2.5*this.leftmostIndex}rem)`,"transition-duration":`0.3s`}},leftClass(){return{"o-arrow o-arrow--left":!0,"o-arrow--disabled":this.leftmostIndex===0||!this.canScroll}},rightClass(){return{"o-arrow o-arrow--right":!0,"o-arrow--disabled":this.leftmostIndex===this.options.length-this.windowSize||!this.canScroll}},slideWindow(e){this.canScroll&&(this.leftmostIndex=Math.clamp(this.leftmostIndex+e,0,this.options.length-this.windowSize))},optionChar(e){return this.isSymbol?e:e===this.selected||!this.selected&&e===this.defaultOption?`✓`:``},invertBW(e){return e===`black`?`white`:`black`}}},Zw={name:`GlyphCustomizationSingleType`,components:{GlyphCustomizationSlidingWindow:D(Xw,function(){var e=this,t=e._self._c;return t(`div`,[e.options.length>0?t(`div`,{class:e.containerClassObject()},[t(`div`,{staticClass:`o-default-option`},[t(`div`,{key:`default`+e.darkKeySwap,class:e.defaultOptionClassObject(),style:e.boxStyle(e.defaultOption),on:{click:function(t){return e.select(void 0)}}},[e._v(` `+e._s(e.optionChar(e.defaultOption))+` `)])]),t(`div`,{staticClass:`c-extra-options`},[t(`div`,{class:e.leftClass(),on:{click:function(t){return e.slideWindow(-5)}}},[e._v(` ⇐ `)]),t(`div`,{class:e.rightClass(),on:{click:function(t){return e.slideWindow(5)}}},[e._v(` ⇒ `)]),t(`div`,{staticClass:`c-sliding-window`,style:e.windowStyle()},e._l(e.options,function(n){return t(`div`,{key:n[0]+n[1]},[t(`div`,{staticClass:`c-single-set`},e._l(n,function(n){return t(`div`,{key:n,class:e.optionClassObject(n),style:e.boxStyle(n),on:{click:function(t){return e.select(n)}}},[e._v(` `+e._s(e.optionChar(n))+` `)])}),0)])}),0)])]):t(`div`,{staticClass:`c-no-options`},[e._v(` You have no custom options for changing Glyph `+e._s(e.attrString)+`s. `)])])},[],!1,null,`45d6e8ec`,null,null).exports},props:{type:{type:String,required:!0},glyphId:{type:Number,required:!1,default:-1}},computed:{name(){return this.type.capitalize()},symbols(){return GlyphAppearanceHandler.availableSymbols},colors(){return GlyphAppearanceHandler.availableColors}}},Qw=D(Zw,function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`c-glyph-customization-entry`},[e.glyphId===-1?t(`span`,{staticClass:`c-name`},[e._v(` Appearance Options for `+e._s(e.name)+` Glyphs `)]):e._e(),e.type===`companion`?t(`div`,[e._v(` Companion Glyphs cannot have their symbol modified. `)]):t(`GlyphCustomizationSlidingWindow`,{attrs:{type:e.type,"is-symbol":!0,options:e.symbols,"glyph-id":e.glyphId}}),t(`GlyphCustomizationSlidingWindow`,{attrs:{type:e.type,"is-symbol":!1,options:e.colors,"glyph-id":e.glyphId}})],1)},[],!1,null,`bb85047a`,null,null).exports,$w=D({name:`GlyphCustomization`,components:{GlyphCustomizationSingleType:Qw,PrimaryButton:L,PrimaryToggleButton:R,GlyphComponent:Tw},data(){return{enabled:!1,defaultKeySwap:!1,selectedIndex:0}},computed:{cosmeticTypes(){let e=CosmeticGlyphTypes.list.filter(e=>e.canCustomize).map(e=>e.id).slice(5);return[`power`,`infinity`,`replication`,`time`,`dilation`].concat(e)},glyphIconProps(){return{size:`2.5rem`,"glow-blur":`0.3rem`,"glow-spread":`0.1rem`,"text-proportion":.7}},hasCustomSets(){return GlyphAppearanceHandler.unlockedSets.length>0},hasSpecialTypes(){return GlyphAppearanceHandler.availableTypes.length>0}},watch:{enabled(e){player.reality.glyphs.cosmetics.active=e,EventHub.dispatch(GAME_EVENT.GLYPH_VISUAL_CHANGE)}},methods:{update(){this.enabled=player.reality.glyphs.cosmetics.active,this.defaultKeySwap=!0},resetAll(){let e=player.reality.glyphs.cosmetics;e.symbolMap={},e.colorMap={},this.defaultKeySwap=!1,EventHub.dispatch(GAME_EVENT.GLYPH_VISUAL_CHANGE)},resetSingle(){let e=player.reality.glyphs.cosmetics,t=this.cosmeticTypes[this.selectedIndex];e.symbolMap[t]=void 0,e.colorMap[t]=void 0,this.defaultKeySwap=!1,EventHub.dispatch(GAME_EVENT.GLYPH_VISUAL_CHANGE)},fakeGlyph(e){let t=`power`;return e===`reality`&&(t=`reality`),e===`cursed`&&(t=`cursed`),{type:t,strength:1,cosmetic:e}},typeClass(e){return{"c-single-type":!0,"o-disabled-cosmetics":!this.enabled,"c-type-current":this.selectedIndex===e,"c-type-other":this.selectedIndex!==e}},resetIndividual(){for(let e of Glyphs.allGlyphs)e.fixedCosmetic||(e.cosmetic=void 0);this.defaultKeySwap=!1,EventHub.dispatch(GAME_EVENT.GLYPH_VISUAL_CHANGE)}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`c-glyph-customization-group`},[t(`b`,[e._v(`Custom Glyph Appearance`)]),t(`PrimaryToggleButton`,{staticClass:`o-primary-btn--subtab-option`,attrs:{on:`Enabled`,off:`Disabled`},model:{value:e.enabled,callback:function(t){e.enabled=t},expression:`enabled`}}),t(`br`),e.hasCustomSets?t(`div`,[e._v(` Reset Appearances to Default: `),t(`PrimaryButton`,{staticClass:`o-primary-btn--subtab-option`,class:{"o-primary-btn--disabled":!e.enabled},on:{click:e.resetAll}},[e._v(` All Types `)]),t(`PrimaryButton`,{staticClass:`o-primary-btn--subtab-option`,class:{"o-primary-btn--disabled":!e.enabled},on:{click:e.resetSingle}},[e._v(` This Type `)]),t(`br`),t(`i`,[e._v(`This will not reset any individually-modified Glyphs.`)]),t(`br`),t(`br`),e._v(` Glyph Type: `),t(`br`),t(`div`,{staticClass:`c-type-selection`},e._l(e.cosmeticTypes,function(n,r){return t(`div`,{key:n,class:e.typeClass(r),on:{click:function(t){e.selectedIndex=r}}},[t(`GlyphComponent`,e._b({directives:[{name:`tooltip`,rawName:`v-tooltip`,value:n.capitalize(),expression:`type.capitalize()`}],attrs:{glyph:e.fakeGlyph(n)}},`GlyphComponent`,e.glyphIconProps,!1))],1)}),0),t(`GlyphCustomizationSingleType`,{key:e.selectedIndex+e.enabled+e.defaultKeySwap,attrs:{type:e.cosmeticTypes[e.selectedIndex]}}),e._v(` Note: Some options may cause very poor color contrast or readability on certain themes with certain Glyph types. `)],1):t(`div`,[e._v(` You currently have no available options for changing the default appearance of your Glyphs. To unlock some, visit the Shop Tab or beat the game. `),t(`br`),t(`br`),e.hasSpecialTypes?t(`span`,[e._v(` Enabling this setting will allow you to change individual Glyphs to special cosmetic types you have unlocked. `)]):t(`span`,[e._v(` Enabling or disabling this option will currently do nothing. `)])]),t(`PrimaryButton`,{staticClass:`o-primary-btn--subtab-option`,on:{click:e.resetIndividual}},[e._v(` Reset all individual Glyph cosmetics `)])],1)},[],!1,null,`d03b5279`,null,null).exports,eT=D({name:`GlyphDisplayOptionsModal`,components:{ExpandingControlBox:Pt,ModalOptionsToggleButton:Aw,ModalWrapperOptions:Mw,SelectGlyphInfoDropdown:Rt,GlyphCustomization:$w},data(){return{newGlyphs:!1,showUnequippedGlyphIcon:!1,glyphEffectDots:!1,glyphBG:0,glyphInfoType:0,showGlyphInfoByDefault:!1,glyphBorders:!1,highContrastRarity:!1,swapGlyphColors:!1}},computed:{infoLabel(){return Lt.labels[this.glyphInfoType]},glyphBGStr(){switch(this.glyphBG){case GLYPH_BG_SETTING.AUTO:return`Auto`;case GLYPH_BG_SETTING.LIGHT:return`Light`;case GLYPH_BG_SETTING.DARK:return`Dark`;default:throw Error(`Unrecognized Glyph BG setting`)}}},watch:{newGlyphs(e){player.options.showNewGlyphIcon=e,EventHub.dispatch(GAME_EVENT.GLYPH_VISUAL_CHANGE)},showUnequippedGlyphIcon(e){player.options.showUnequippedGlyphIcon=e,EventHub.dispatch(GAME_EVENT.GLYPH_VISUAL_CHANGE)},glyphEffectDots(e){player.options.showHintText.glyphEffectDots=e,EventHub.dispatch(GAME_EVENT.GLYPH_VISUAL_CHANGE)},showGlyphInfoByDefault(e){player.options.showHintText.showGlyphInfoByDefault=e,EventHub.dispatch(GAME_EVENT.GLYPH_VISUAL_CHANGE)},glyphBorders(e){player.options.glyphBorders=e,EventHub.dispatch(GAME_EVENT.GLYPH_VISUAL_CHANGE)},highContrastRarity(e){player.options.highContrastRarity=e,EventHub.dispatch(GAME_EVENT.GLYPH_VISUAL_CHANGE)},swapGlyphColors(e){player.options.swapGlyphColors=e,EventHub.dispatch(GAME_EVENT.GLYPH_VISUAL_CHANGE)}},methods:{update(){let e=player.options;this.newGlyphs=e.showNewGlyphIcon,this.showUnequippedGlyphIcon=e.showUnequippedGlyphIcon,this.glyphEffectDots=e.showHintText.glyphEffectDots,this.glyphBG=player.options.glyphBG,this.glyphInfoType=e.showHintText.glyphInfoType,this.showGlyphInfoByDefault=e.showHintText.showGlyphInfoByDefault,this.glyphBorders=e.glyphBorders,this.highContrastRarity=e.highContrastRarity,this.swapGlyphColors=e.swapGlyphColors},noEffectStyle(){return this.glyphInfoType===0?{"background-color":`var(--color-disabled)`}:null},cycleBG(){player.options.glyphBG=(player.options.glyphBG+1)%Object.keys(GLYPH_BG_SETTING).length,EventHub.dispatch(GAME_EVENT.GLYPH_VISUAL_CHANGE)}}},function(){var e=this,t=e._self._c;return t(`ModalWrapperOptions`,{staticClass:`c-modal-options__glyph`,scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` Glyph Display Options `)]},proxy:!0}])},[t(`div`,{staticClass:`c-glyph-visual-options c-modal--short`},[t(`div`,{staticClass:`c-modal-options__button-container`},[t(`ModalOptionsToggleButton`,{attrs:{text:`New Glyph identifier:`},model:{value:e.newGlyphs,callback:function(t){e.newGlyphs=t},expression:`newGlyphs`}}),t(`ModalOptionsToggleButton`,{attrs:{text:`Unequipped Glyph identifier:`},model:{value:e.showUnequippedGlyphIcon,callback:function(t){e.showUnequippedGlyphIcon=t},expression:`showUnequippedGlyphIcon`}}),t(`ModalOptionsToggleButton`,{attrs:{text:`Always show Glyph effect dots:`},model:{value:e.glyphEffectDots,callback:function(t){e.glyphEffectDots=t},expression:`glyphEffectDots`}}),t(`ModalOptionsToggleButton`,{attrs:{text:`Fancy Glyph borders:`},model:{value:e.glyphBorders,callback:function(t){e.glyphBorders=t},expression:`glyphBorders`}}),t(`button`,{staticClass:`o-primary-btn o-primary-btn--modal-option`,on:{click:function(t){return e.cycleBG()}}},[e._v(` Glyph BG color: `+e._s(e.glyphBGStr)+` `)]),t(`ModalOptionsToggleButton`,{style:e.noEffectStyle(),attrs:{text:`Always show Glyph Info:`},model:{value:e.showGlyphInfoByDefault,callback:function(t){e.showGlyphInfoByDefault=t},expression:`showGlyphInfoByDefault`}}),t(`ModalOptionsToggleButton`,{attrs:{text:`High-contrast rarity colors:`},model:{value:e.highContrastRarity,callback:function(t){e.highContrastRarity=t},expression:`highContrastRarity`}}),t(`ModalOptionsToggleButton`,{attrs:{text:`Swap border and symbol colors:`},model:{value:e.swapGlyphColors,callback:function(t){e.swapGlyphColors=t},expression:`swapGlyphColors`}}),t(`ExpandingControlBox`,{staticClass:`o-primary-btn c-dropdown-btn`,scopedSlots:e._u([{key:`header`,fn:function(){return[t(`div`,{staticClass:`c-dropdown-header`},[e._v(` ▼ Additional Glyph Info: ▼ `),t(`br`),e._v(` `+e._s(e.infoLabel)+` `)])]},proxy:!0},{key:`dropdown`,fn:function(){return[t(`SelectGlyphInfoDropdown`)]},proxy:!0}])})],1),t(`GlyphCustomization`)],1)])},[],!1,null,`391c3c81`,null,null).exports,tT={name:`HiddenSubtabsButton`,props:{subtab:{type:Object,required:!0},tab:{type:Object,required:!0},changeEnabled:{type:Boolean,required:!0}},data(){return{hidable:!1,hidden:!1}},computed:{isCurrentSubtab(){return this.tab.id===Tabs.current.id&&this.subtab.id===Tabs.current._currentSubtab.id},classObject(){return{"c-hide-modal-tab-button":!0,"c-hide-modal-button--active":!this.hidden,"c-hide-modal-button--inactive":this.hidden,"c-hide-modal-button--always-visible":!this.hidable||this.isCurrentSubtab,[`c-hide-modal-tab-button--${this.tab.key}`]:!this.isCurrentSubtab}},isModernUI(){return this.$viewModel.newUI}},methods:{update(){this.hidable=this.subtab.hidable,this.hidden=this.subtab.isHidden&&this.hidable},toggleVisibility(){this.changeEnabled&&this.subtab.toggleVisibility()}}},nT={name:`HiddenTabGroup`,components:{HiddenSubtabsButton:D(tT,function(){var e=this,t=e._self._c;return t(`div`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:e.hidable?e.isCurrentSubtab?`You cannot hide the tab you are on`:``:`Options tabs cannot be hidden`,expression:`hidable ? isCurrentSubtab ? 'You cannot hide the tab you are on' : '' : 'Options tabs cannot be hidden'`}],class:e.classObject,on:{click:e.toggleVisibility}},[t(`div`,{staticClass:`l-hide-modal-button`},[e.isModernUI?t(`div`,{staticClass:`l-hide-modal-button__subtab-icon`,domProps:{innerHTML:e._s(e.subtab.symbol)}}):e._e(),t(`div`,{staticClass:`l-hide-modal-button__subtab-name`},[e._v(` `+e._s(e.subtab.name)+` `)])])])},[],!1,null,`c020e5ce`,null,null).exports},props:{tab:{type:Object,required:!0},changeEnabled:{type:Boolean,required:!0}},data(){return{isVisible:!1,isHidable:!1,isHidden:!1,unlockedSubtabs:[]}},computed:{tabName(){return this.tab.name},subtabs(){return this.tab.subtabs},isCurrentTab(){return this.tab.id===Tabs.current.id},alwaysVisible(){return!this.isHidable||this.isCurrentTab},rowClass(){return{"c-hide-modal-all-subtab-container":!0,"l-hide-modal-subtab-container":!0,"c-hidden-tabs-background__visible":!this.isHidden,"c-hidden-tabs-background__hidden":this.isHidden,"c-hidden-tabs-background__always-visible":this.alwaysVisible}},rowVisibleIndicatorClass(){return{"c-indicator-icon":!0,fas:!0,"fa-check":!this.isHidden,"fa-times":this.isHidden,"fa-exclamation":this.alwaysVisible}},rowVisibleIndicatorTooltip(){return this.isHidden?`Click to unhide tab`:this.alwaysVisible?`This tab cannot be hidden`:`Click to hide tab`}},methods:{update(){let e=this.tab;this.isVisible=e.isUnlocked,this.isHidable=e.hidable,this.isHidden=e.isHidden&&this.isHidable,this.unlockedSubtabs=this.subtabs.filter(e=>e.isUnlocked)},toggleVisibility(){if(this.changeEnabled)if(this.tab.isHidden&&this.unlockedSubtabs.every(e=>e.isHidden)){for(let e of this.unlockedSubtabs)e.toggleVisibility();this.tab.unhideTab()}else this.tab.toggleVisibility()}}},rT={name:`HiddenTabsModal`,components:{HiddenTabGroup:D(nT,function(){var e=this,t=e._self._c;return e.isVisible?t(`div`,{class:e.rowClass,on:{click:function(t){return t.target===t.currentTarget?e.toggleVisibility.apply(null,arguments):null}}},[e._l(e.unlockedSubtabs,function(n,r){return t(`HiddenSubtabsButton`,{key:r,attrs:{subtab:n,tab:e.tab,"change-enabled":e.changeEnabled}})}),t(`div`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:e.rowVisibleIndicatorTooltip,expression:`rowVisibleIndicatorTooltip`}],class:e.rowVisibleIndicatorClass,on:{click:e.toggleVisibility}})],2):e._e()},[],!1,null,`5b3316e6`,null,null).exports,ModalWrapperOptions:Mw,PrimaryButton:L},data(){return{isEnslaved:!1,isAlmostEnd:!1}},computed:{tabs:()=>Tabs.currentUIFormat},methods:{update(){this.isEnslaved=Enslaved.isRunning,this.isAlmostEnd=Pelle.hasGalaxyGenerator},showAllTabs(){for(let e of this.tabs){e.unhideTab();for(let t of e.subtabs)t.unhideTab()}}}},iT=D(rT,function(){var e=this,t=e._self._c;return t(`ModalWrapperOptions`,{staticClass:`l-wrapper`,scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` Modify Visible Tabs `)]},proxy:!0}])},[t(`div`,{staticClass:`c-modal--short`},[e._v(` Click a button to toggle showing a tab on/off. `),t(`br`),e._v(` Some tabs cannot be hidden, and you cannot hide your current tab. `),t(`br`),e._v(` Unhiding a tab in which all subtabs are hidden will also unhide all subtabs, and hiding all subtabs will also hide the tab. `),t(`br`),e.isAlmostEnd?t(`div`,[e._v(` You cannot hide your tabs after unlocking the Galaxy Generator. `)]):e._e(),e.isEnslaved?t(`div`,[t(`br`),t(`i`,[e._v(`You must... see everywhere...`)]),t(`br`),e._v(` (You cannot hide your tabs within this Reality) `)]):e._e(),t(`PrimaryButton`,{on:{click:e.showAllTabs}},[e._v(` Show all tabs `)]),e._l(e.tabs,function(n,r){return t(`HiddenTabGroup`,{key:r,staticClass:`l-hide-modal-tab-container`,attrs:{tab:n,"change-enabled":!e.isEnslaved&&!e.isAlmostEnd}})})],2)])},[],!1,null,`b4c0b3f4`,null,null).exports,aT=D({name:`HotkeysModal`,components:{ModalWrapper:jw},data(){return{updateIndicies:[],visible:[],timeStudyUnlocked:!1,glyphSacUnlocked:!1,isElectron:!1}},computed:{moreShiftKeyInfo(){let e=[];this.timeStudyUnlocked&&(e.push(`while buying Time Studies to buy all up until that point`),e.push(`to save Time Study Trees`)),this.glyphSacUnlocked&&e.push(`to purge Glyphs`);let t=makeEnumeration(e);return t===``?``:`You can hold Shift ${t}.`},hotkeyCount(){return shortcuts.length},shortcutNames(){return shortcuts.map(e=>e.name)},shortcutKeys(){return shortcuts.map(e=>e.keys.map(e=>this.format(e)))}},created(){for(let e=0;e<this.hotkeyCount;e++){let t=shortcuts[e].visible;typeof t==`function`?this.updateIndicies.push(e):this.visible[e]=t}},methods:{update(){for(let e of this.updateIndicies)this.$set(this.visible,e,shortcuts[e].visible());this.timeStudyUnlocked=PlayerProgress.current.isEternityUnlocked,this.glyphSacUnlocked=RealityUpgrade(19).isBought;try{this.isElectron=ElectronRuntime.isActive}catch{this.isElectron=!1}},format(e){switch(e){case`mod`:return`CTRL/⌘`;default:return e.toUpperCase()}}}},function(){var e=this,t=e._self._c;return t(`ModalWrapper`,{scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` Hotkey List `)]},proxy:!0}])},[t(`span`,{staticClass:`c-modal-hotkeys l-modal-hotkeys`},[t(`div`,{staticClass:`l-modal-hotkeys__column`},[t(`div`,{staticClass:`l-modal-hotkeys-row`},[t(`span`,{staticClass:`c-modal-hotkeys-row__name l-modal-hotkeys-row__name`},[e._v(`Buy 1 Dimension`)]),t(`kbd`,[e._v(`SHIFT`)]),t(`kbd`,[e._v(`1`)]),e._v(`-`),t(`kbd`,[e._v(`SHIFT`)]),t(`kbd`,[e._v(`8`)])]),t(`div`,{staticClass:`l-modal-hotkeys-row`},[t(`span`,{staticClass:`c-modal-hotkeys-row__name l-modal-hotkeys-row__name`},[e._v(`Buy 10 Dimensions`)]),t(`kbd`,[e._v(`1`)]),e._v(`-`),t(`kbd`,[e._v(`8`)])]),e._l(e.hotkeyCount,function(n){return t(`div`,{key:n},[e.visible[n-1]?t(`span`,{staticClass:`l-modal-hotkeys-row`},[t(`span`,{staticClass:`c-modal-hotkeys-row__name l-modal-hotkeys-row__name`},[e._v(e._s(e.shortcutNames[n-1]))]),e._l(e.shortcutKeys[n-1],function(n,r){return t(`kbd`,{key:r},[e._v(` `+e._s(n)+` `)])})],2):e._e()])})],2),t(`div`,{staticClass:`l-modal-hotkeys__column l-modal-hotkeys__column--right`},[t(`div`,{staticClass:`l-modal-hotkeys-row`},[t(`span`,{staticClass:`c-modal-hotkeys-row__name l-modal-hotkeys-row__name`},[e._v(`Modifier Key`)]),t(`kbd`,[e._v(`SHIFT`)])]),t(`span`,{staticClass:`c-modal-hotkeys__shift-description`},[e._v(` Shift is a modifier key that shows additional information on certain things and adjusts the function of certain buttons. `),t(`br`),e._v(` `+e._s(e.moreShiftKeyInfo)+` `)]),t(`br`),t(`div`,{staticClass:`l-modal-hotkeys-row`},[t(`span`,{staticClass:`c-modal-hotkeys-row__name l-modal-hotkeys-row__name`},[e._v(`Autobuyer Controls`)]),t(`kbd`,[e._v(`ALT`)])]),t(`span`,{staticClass:`c-modal-hotkeys__shift-description`},[e._v(` Alt is a modifier key that, when pressed in conjunction with any key that has a corresponding autobuyer, will toggle said autobuyer. `),t(`br`),e._v(` When pressing both Alt and Shift, you can toggle buying singles or buying max for the Antimatter Dimension and Tickspeed Autobuyers instead. `)]),t(`br`),t(`div`,{staticClass:`l-modal-hotkeys-row`},[t(`span`,{staticClass:`c-modal-hotkeys-row__name l-modal-hotkeys-row__name`},[e._v(`Tab Movement`)]),t(`div`,[t(`kbd`,[e._v(`←`)]),t(`kbd`,[e._v(`↓`)]),t(`kbd`,[e._v(`↑`)]),t(`kbd`,[e._v(`→`)])])]),t(`span`,{staticClass:`c-modal-hotkeys__shift-description`},[e._v(` Using the Arrow Keys will cycle you through the game's pages. The Up and Down arrows cycle you through tabs, and the Left and Right arrows cycle you through that tab's subtabs. `)]),t(`br`),t(`div`,{staticClass:`l-modal-hotkeys-row`},[t(`span`,{staticClass:`c-modal-hotkeys-row__name l-modal-hotkeys-row__name`},[e._v(`Numpad Support`)])]),t(`span`,{staticClass:`c-modal-hotkeys__shift-description`},[e._v(` Due to technical reasons, pressing a numpad key will purchase 10 of a Dimension if possible, but pressing a numpad key with `),t(`kbd`,[e._v(`SHIFT`)]),e._v(` will not buy a single Dimension. It may instead, depending on your device, cause the page to scroll or change game tabs. `),t(`kbd`,[e._v(`ALT`)]),e._v(` will still work as expected. `)]),e.isElectron?[t(`br`),t(`div`,{staticClass:`l-modal-hotkeys-row`},[t(`span`,{staticClass:`c-modal-hotkeys-row__name l-modal-hotkeys-row__name`},[e._v(`Window Zoom`)]),t(`kbd`,[e._v(`-`)]),t(`kbd`,[e._v(`0`)]),t(`kbd`,[e._v(`+`)])]),t(`span`,{staticClass:`c-modal-hotkeys__shift-description`},[e._v(` To adjust zoom level, hold `),t(`kbd`,[e._v(`ctrl`)]),e._v(` and press either `),t(`kbd`,[e._v(`-`)]),e._v(` or `),t(`kbd`,[e._v(`+`)]),e._v(` to decrease or increase zoom. `),t(`kbd`,[e._v(`ctrl`)]),t(`kbd`,[e._v(`0`)]),e._v(` will reset zoom to 100%. `)]),t(`br`),t(`div`,{staticClass:`l-modal-hotkeys-row`},[t(`span`,{staticClass:`c-modal-hotkeys-row__name l-modal-hotkeys-row__name`},[e._v(`Fullscreen`)]),t(`kbd`,[e._v(`F10`)])]),t(`span`,{staticClass:`c-modal-hotkeys__shift-description`},[e._v(` To enter or exit fullscreen, press `),t(`kbd`,[e._v(`F10`)]),e._v(`. `)])]:e._e()],2)])])},[],!1,null,`591c8342`,null,null).exports,oT=D({name:`InfoDisplayOptionsModal`,components:{ModalOptionsToggleButton:Aw,ModalWrapperOptions:Mw},data(){return{infinityUnlocked:!1,eternityUnlocked:!1,realityUnlocked:!1,alchemyUnlocked:!1,showPercentage:!1,achievements:!1,achievementUnlockStates:!1,challenges:!1,studies:!1,glyphEffectDots:!1,realityUpgrades:!1,perks:!1,alchemy:!1}},computed:{fullCompletion(){return player.records.fullGameCompletions>0}},watch:{showPercentage(e){player.options.showHintText.showPercentage=e},achievements(e){player.options.showHintText.achievements=e},achievementUnlockStates(e){player.options.showHintText.achievementUnlockStates=e},challenges(e){player.options.showHintText.challenges=e},studies(e){player.options.showHintText.studies=e},glyphEffectDots(e){player.options.showHintText.glyphEffectDots=e},realityUpgrades(e){player.options.showHintText.realityUpgrades=e},perks(e){player.options.showHintText.perks=e},alchemy(e){player.options.showHintText.alchemy=e}},methods:{update(){let e=PlayerProgress.current;this.infinityUnlocked=this.fullCompletion||e.isInfinityUnlocked,this.eternityUnlocked=this.fullCompletion||e.isEternityUnlocked,this.realityUnlocked=this.fullCompletion||e.isRealityUnlocked,this.alchemyUnlocked=this.fullCompletion||Ra.unlocks.effarigUnlock.canBeApplied;let t=player.options.showHintText;this.showPercentage=t.showPercentage,this.achievements=t.achievements,this.achievementUnlockStates=t.achievementUnlockStates,this.challenges=t.challenges,this.studies=t.studies,this.glyphEffectDots=t.glyphEffectDots,this.realityUpgrades=t.realityUpgrades,this.perks=t.perks,this.alchemy=t.alchemy}}},function(){var e=this,t=e._self._c;return t(`ModalWrapperOptions`,{staticClass:`c-modal-options__large`,scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` Info Display Options `)]},proxy:!0}])},[t(`div`,{staticClass:`c-modal-options__button-container`},[t(`ModalOptionsToggleButton`,{attrs:{text:`Show % gain:`},model:{value:e.showPercentage,callback:function(t){e.showPercentage=t},expression:`showPercentage`}}),t(`ModalOptionsToggleButton`,{attrs:{text:`Achievement IDs:`},model:{value:e.achievements,callback:function(t){e.achievements=t},expression:`achievements`}}),t(`ModalOptionsToggleButton`,{attrs:{text:`Achievement unlock state indicators:`},model:{value:e.achievementUnlockStates,callback:function(t){e.achievementUnlockStates=t},expression:`achievementUnlockStates`}}),e.infinityUnlocked?t(`ModalOptionsToggleButton`,{attrs:{text:`Challenge IDs:`},model:{value:e.challenges,callback:function(t){e.challenges=t},expression:`challenges`}}):e._e(),e.eternityUnlocked?t(`ModalOptionsToggleButton`,{attrs:{text:`Time Study IDs:`},model:{value:e.studies,callback:function(t){e.studies=t},expression:`studies`}}):e._e(),e.realityUnlocked?t(`ModalOptionsToggleButton`,{attrs:{text:`Glyph effect dots:`},model:{value:e.glyphEffectDots,callback:function(t){e.glyphEffectDots=t},expression:`glyphEffectDots`}}):e._e(),e.realityUnlocked?t(`ModalOptionsToggleButton`,{attrs:{text:`Reality Upgrade names:`},model:{value:e.realityUpgrades,callback:function(t){e.realityUpgrades=t},expression:`realityUpgrades`}}):e._e(),e.realityUnlocked?t(`ModalOptionsToggleButton`,{attrs:{text:`Perk IDs:`},model:{value:e.perks,callback:function(t){e.perks=t},expression:`perks`}}):e._e(),e.alchemyUnlocked?t(`ModalOptionsToggleButton`,{attrs:{text:`Alchemy resource amounts:`},model:{value:e.alchemy,callback:function(t){e.alchemy=t},expression:`alchemy`}}):e._e()],1),e._v(` Note: All types of additional info above will always display when holding shift. `)])},[],!1,null,null,null,null).exports,sT=D({name:`NewsOptionsModal`,components:{ModalOptionsToggleButton:Aw,ModalWrapperOptions:Mw,PrimaryButton:L,SliderComponent:Lw},data(){return{enabled:!1,repeatBuffer:40,AIChance:0,speed:1,includeAnimated:!1}},computed:{newsOnOffLabel(){return`News: ${this.enabled?`On`:`Off`}`},sliderPropsRepeatBuffer(){return{min:0,max:80,interval:1,width:`98%`,tooltip:!1}},sliderPropsAIChance(){return{min:0,max:1,interval:.01,width:`98%`,tooltip:!1}},sliderPropsSpeed(){return{min:.5,max:2,interval:.01,width:`98%`,tooltip:!1}}},watch:{type(e){player.options.news.type=e},repeatBuffer(e){player.options.news.repeatBuffer=Number.parseInt(e,10)},AIChance(e){player.options.news.AIChance=Number.parseFloat(e,10)},speed(e){player.options.news.speed=Number.parseFloat(e,10)},includeAnimated(e){player.options.news.includeAnimated=e}},methods:{update(){let e=player.options.news;this.enabled=e.enabled,this.repeatBuffer=e.repeatBuffer,this.AIChance=e.AIChance,this.speed=e.speed,this.includeAnimated=e.includeAnimated},adjustSliderValueRepeatBuffer(e){this.repeatBuffer=e,player.options.repeatBuffer=this.repeatBuffer},adjustSliderValueAIChance(e){this.AIChance=e,player.options.AIChance=this.AIChance},adjustSliderValueSpeed(e){this.speed=e,player.options.speed=this.speed}}},function(){var e=this,t=e._self._c;return t(`ModalWrapperOptions`,{scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` News Options `)]},proxy:!0}])},[t(`PrimaryButton`,{staticClass:`o-primary-btn o-primary-btn--option-wide`,attrs:{onclick:`GameOptions.toggleNews()`}},[e._v(` `+e._s(e.newsOnOffLabel)+` `)]),t(`div`,{staticClass:`o-primary-btn o-primary-btn--option-wide o-primary-btn--slider`},[t(`b`,[e._v(e._s(e.formatInt(parseInt(e.repeatBuffer)))+` message repeat buffer`)]),t(`SliderComponent`,e._b({staticClass:`o-primary-btn--slider__slider`,attrs:{value:e.repeatBuffer},on:{input:function(t){return e.adjustSliderValueRepeatBuffer(t)}}},`SliderComponent`,e.sliderPropsRepeatBuffer,!1))],1),t(`div`,{staticClass:`o-primary-btn o-primary-btn--option-wide o-primary-btn--slider`},[t(`b`,[e._v(e._s(e.formatPercents(parseFloat(e.AIChance)))+` AI messages`)]),t(`SliderComponent`,e._b({staticClass:`o-primary-btn--slider__slider`,attrs:{value:e.AIChance},on:{input:function(t){return e.adjustSliderValueAIChance(t)}}},`SliderComponent`,e.sliderPropsAIChance,!1))],1),t(`div`,{staticClass:`o-primary-btn o-primary-btn--option-wide o-primary-btn--slider`},[t(`b`,[e._v(e._s(e.formatPercents(parseFloat(e.speed)))+` scroll speed`)]),t(`SliderComponent`,e._b({staticClass:`o-primary-btn--slider__slider`,attrs:{value:e.speed},on:{input:function(t){return e.adjustSliderValueSpeed(t)}}},`SliderComponent`,e.sliderPropsSpeed,!1))],1),t(`ModalOptionsToggleButton`,{staticClass:`o-primary-btn o-primary-btn--option-wide`,attrs:{text:`Animation Effects:`},model:{value:e.includeAnimated,callback:function(t){e.includeAnimated=t},expression:`includeAnimated`}})],1)},[],!1,null,null,null,null).exports,cT=r({name:`NotationModal`,components:{ModalWrapper:jw,SliderComponent:Lw},data(){return{commaDigits:0,notationDigits:0}},computed:{sampleNums(){let e=[];for(let t=4;t<16;t++)e.push(Decimal.pow10(`123456789012345`.slice(0,t)));return e},sliderProps(){return{min:3,max:15,interval:1,width:`100%`,tooltip:!1}}},watch:{commaDigits(e){player.options.notationDigits.comma=e,Da.exponentCommas.min=10**e},notationDigits(e){player.options.notationDigits.notation=e,Da.exponentCommas.max=10**e}},created(){let e=player.options.notationDigits;this.commaDigits=e.comma,this.notationDigits=e.notation},methods:{update(){let e=player.options.notationDigits;this.commaDigits=e.comma,this.notationDigits=e.notation},adjustSliderComma(e){this.commaDigits=e,player.options.notationDigits.comma=e,e>this.notationDigits&&this.adjustSliderNotation(e)},adjustSliderNotation(e){this.notationDigits=e,player.options.notationDigits.notation=e,e<this.commaDigits&&this.adjustSliderComma(e)}}}),lT=D(cT,function(){var e=this,t=e._self._c;return e._self._setupProxy,t(`ModalWrapper`,{scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` Exponent Notation Settings `)]},proxy:!0}])},[e._v(` You can adjust what your numbers look like when very large. With small values, the exponent will be directly displayed with no additional formatting. Larger values will have commas inserted into the exponent for clarity, and the largest values will apply notation formatting to the exponent in order to shorten it. You can adjust the two thresholds between these regions below: `),t(`br`),t(`br`),t(`div`,{staticClass:`c-single-slider`},[t(`b`,{staticClass:`o-digit-text`},[e._v(`Minimum for commas in exponent: `+e._s(e.formatInt(e.commaDigits))+` digits`)]),t(`SliderComponent`,e._b({staticClass:`o-primary-btn--slider__slider o-slider`,attrs:{value:e.commaDigits},on:{input:function(t){return e.adjustSliderComma(t)}}},`SliderComponent`,e.sliderProps,!1))],1),t(`div`,{staticClass:`c-single-slider`},[t(`b`,{staticClass:`o-digit-text`},[e._v(`Minimum for notation in exponent: `+e._s(e.formatInt(e.notationDigits))+` digits`)]),t(`SliderComponent`,e._b({staticClass:`o-primary-btn--slider__slider o-slider`,attrs:{value:e.notationDigits},on:{input:function(t){return e.adjustSliderNotation(t)}}},`SliderComponent`,e.sliderProps,!1))],1),t(`br`),e._v(` Sample numbers for exponent formatting: `),t(`div`,{staticClass:`c-sample-numbers`},e._l(e.sampleNums,function(n,r){return t(`span`,{key:r,staticClass:`o-single-number`},[e._v(` `+e._s(e.formatPostBreak(n))+` `)])}),0),t(`br`),e._v(` Note: The interface is generally optimized for Scientific notation with settings of `+e._s(e.formatInt(5))+` and `+e._s(e.formatInt(9))+` digits. Some text may look odd or overflow out of boxes if you differ significantly from these values. Additionally, these settings might not cause any visual changes when using certain notations. `)])},[],!1,null,`9f7522c3`,null,null).exports,uT=D({name:`PreferredTreeModal`,components:{ModalWrapperChoice:BC},data(){return{dimensionPath:null,pacePath:null}},computed:{dimensionOptions(){return{Antimatter:TIME_STUDY_PATH.ANTIMATTER_DIM,Infinity:TIME_STUDY_PATH.INFINITY_DIM,Time:TIME_STUDY_PATH.TIME_DIM}},paceOptions(){return{Active:TIME_STUDY_PATH.ACTIVE,Passive:TIME_STUDY_PATH.PASSIVE,Idle:TIME_STUDY_PATH.IDLE}},usePriority(){return TimeStudy.preferredPaths.dimension.usePriority}},created(){this.dimensionPath=[...TimeStudy.preferredPaths.dimension.path],this.pacePath=TimeStudy.preferredPaths.pace.path},methods:{isPreferred(e){return this.paceOptions[e]===this.pacePath||this.dimensionPath.indexOf(this.dimensionOptions[e])+1},select(e){this.dimensionOptions[e]&&((!this.usePriority||this.dimensionPath.length>1)&&this.dimensionPath.shift(),this.dimensionPath.includes(this.dimensionOptions[e])||this.dimensionPath.push(this.dimensionOptions[e])),this.paceOptions[e]&&(this.pacePath=this.paceOptions[e])},confirmPrefs(){TimeStudy.preferredPaths.dimension.path=this.dimensionPath,TimeStudy.preferredPaths.pace.path=this.pacePath},classList(e){let t=this.isPreferred(e);return[`o-time-study-selection-btn`,`o-time-study-${{Antimatter:`antimatter-dim`,Infinity:`infinity-dim`,Time:`time-dim`,Active:`active`,Passive:`passive`,Idle:`idle`}[e]}--${t?`bought`:`available`}`,`o-time-study--${t?`bought`:`available`}`]}}},function(){var e=this,t=e._self._c;return t(`ModalWrapperChoice`,{on:{confirm:e.confirmPrefs}},[t(`h2`,[e._v(`Dimension Split Preference`)]),t(`div`,{staticClass:`l-modal-split-preferences`},e._l(e.dimensionOptions,function(n,r){return t(`button`,{key:r,class:e.classList(r),on:{click:function(t){return e.select(r)}}},[e.isPreferred(r)?t(`div`,{staticClass:`l-dim-path-priority o-dim-path-priority`},[e._v(` `+e._s(e.isPreferred(r))+` `)]):e._e(),t(`div`,[e._v(` `+e._s(r)+` `)])])}),0),t(`br`),t(`h2`,[e._v(`Pace Split Preference`)]),t(`div`,{staticClass:`l-modal-split-preferences`},e._l(e.paceOptions,function(n,r){return t(`button`,{key:r,class:e.classList(r),on:{click:function(t){return e.select(r)}}},[t(`div`,[e._v(` `+e._s(r)+` `)])])}),0)])},[],!1,null,null,null,null).exports,dT={name:`SingleGlyphAppearanceModal`,components:{ModalWrapperOptions:Mw,GlyphCustomizationSingleType:Qw,PrimaryButton:L},props:{glyphId:{type:Number,required:!0}},data(){return{defaultKeySwap:!1}},computed:{glyphType(){return Glyphs.findById(this.glyphId).type},cosmeticTypes(){return GlyphAppearanceHandler.availableTypes},glyph(){return Glyphs.findById(this.glyphId)}},created(){EventHub.logic.on(GAME_EVENT.GLYPH_VISUAL_CHANGE,()=>{this.$recompute(`glyph`),this.defaultKeySwap||this.emitClose()})},methods:{update(){this.defaultKeySwap=!0},setType(e){e&&this.glyph.fixedCosmetic||(this.glyph.color=void 0,this.glyph.symbol=void 0,this.glyph.fixedCosmetic?this.glyph.cosmetic=this.glyph.fixedCosmetic:this.glyph.cosmetic=e,this.defaultKeySwap=!1,EventHub.dispatch(GAME_EVENT.GLYPH_VISUAL_CHANGE))},cosmeticTypeClass(e){return{"o-primary-btn--subtab-option":!0,"o-active-type":e===this.glyph.cosmetic}}}},fT=D(dT,function(){var e=this,t=e._self._c;return t(`ModalWrapperOptions`,{staticClass:`c-modal-options__large`,scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` Modifying Single Glyph Appearance `)]},proxy:!0}])},[t(`PrimaryButton`,{staticClass:`o-primary-btn--subtab-option`,on:{click:function(t){return e.setType(void 0)}}},[e._v(` Reset this Glyph's appearance `)]),t(`GlyphCustomizationSingleType`,{key:e.defaultKeySwap,attrs:{type:e.glyphType,"glyph-id":e.glyphId}}),e.cosmeticTypes&&e.glyph.fixedCosmetic?t(`div`,[e._v(` This Glyph's Cosmetic Type cannot be changed! `)]):e.cosmeticTypes?t(`div`,{staticClass:`c-special-type`},[e._v(` Apply Special Cosmetic Type: `),e._l(e.cosmeticTypes,function(n){return t(`PrimaryButton`,{key:n,class:e.cosmeticTypeClass(n),on:{click:function(t){return e.setType(n)}}},[e._v(` `+e._s(n.capitalize())+` `)])})],2):e._e()],1)},[],!1,null,`1b6c0b62`,null,null).exports,pT=D({name:`DeleteCompanionGlyphModal`,components:{PrimaryButton:L},data(){return{messageIndex:0}},computed:{message(){switch(this.messageIndex){case 0:return`Are you sure you want to get rid of your Companion Glyph?`;case 1:return`You will not receive any cake.`;case 2:return`This is permanent! You will not get another Companion Glyph!`;case 3:return`You deleted your faithful Companion Glyph more quickly than any
                        other test subject on record. Congratulations.`;default:return`Invalid message index`}}},methods:{handleLeftButtonClick(){this.messageIndex<2?this.handleYesClick():this.handleNoClick()},handleRightButtonClick(){this.messageIndex>=2?this.handleYesClick():this.handleNoClick()},handleYesClick(){this.messageIndex++,this.messageIndex===3&&this.deleteCompanion()},handleNoClick(){this.messageIndex=0,this.emitClose()},deleteCompanion(){let e=player.reality.glyphs.inventory.filter(e=>e.type===`companion`)[0];Glyphs.removeFromInventory(e)}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`c-modal-message l-modal-content--centered`},[t(`div`,{staticClass:`c-modal-message__text`},[e._v(` `+e._s(e.message)+` `)]),e.messageIndex<3?t(`div`,[t(`PrimaryButton`,{staticClass:`o-primary-btn--width-medium c-modal-message__okay-btn`,on:{click:e.handleLeftButtonClick}},[e._v(` `+e._s(e.messageIndex<2?`Delete`:`Cancel`)+` `)]),t(`PrimaryButton`,{staticClass:`o-primary-btn--width-medium c-modal-message__okay-btn`,on:{click:e.handleRightButtonClick}},[e._v(` `+e._s(e.messageIndex>=2?`Delete`:`Cancel`)+` `)])],1):t(`div`,[t(`PrimaryButton`,{staticClass:`o-primary-btn--width-medium c-modal-message__okay-btn`,on:{click:e.handleNoClick}},[e._v(` Thank you `)])],1)])},[],!1,null,null,null,null).exports,mT={name:`DeleteGlyphModal`,components:{ModalWrapperChoice:BC},props:{idx:{type:Number,required:!0}},data(){return{confirmedDelete:!1}},computed:{glyph(){return Glyphs.findByInventoryIndex(this.idx)}},methods:{update(){let e=Glyphs.findByInventoryIndex(this.idx);this.glyph!==e&&!this.confirmedDelete&&(this.emitClose(),Modal.message.show(`The selected Glyph changed position or was otherwise changed!`))},handleYesClick(){this.confirmedDelete=!0,Glyphs.removeFromInventory(this.glyph)}}},hT=D(mT,function(){var e=this,t=e._self._c;return t(`ModalWrapperChoice`,{on:{confirm:e.handleYesClick},scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` You are about to delete a Glyph `)]},proxy:!0}])},[t(`div`,{staticClass:`c-modal-message__text`},[e._v(` Deleting a Glyph will remove the Glyph from your inventory! `),t(`div`,{staticClass:`c-modal-hard-reset-danger`},[e._v(` There is no benefit in deleting a Glyph before you have unlocked Glyph Sacrifice! `)])])])},[],!1,null,null,null,null).exports,gT=D({name:`PurgeAllRejectedGlyphsModal`,components:{ModalWrapperChoice:BC},data(){return{isRefining:!1}},computed:{refiningOrSacrificing(){return this.isRefining?`Refine`:`Sacrifice`},topLabel(){return`You are about to ${this.refiningOrSacrificing} all rejected Glyphs`},message(){let e=AutoGlyphProcessor.hasNegativeEffectScore()?` Note that some of your Effect Filter scores are negative, which may cause you to lose some Glyphs
          you normally want to keep.`:``;return`Are you sure you want to ${this.refiningOrSacrificing} all rejected Glyphs? This will remove
        all Glyphs that would be rejected by your current Glyph Filter settings.${e}`},extraMessage(){return this.glyphsDeleted===0?`This will remove no Glyphs.`:this.glyphsDeleted===this.glyphsTotal?`This will remove all your Glyphs.`:`This process will remove ${this.glyphsDeleted}/${this.glyphsTotal} Glyphs.`},glyphsTotal(){return Glyphs.inventory.filter(e=>e!==null).length},glyphsDeleted(){return Glyphs.deleteAllRejected(!1)}},methods:{update(){this.isRefining=GlyphSacrificeHandler.isRefining},handleYesClick(){Glyphs.deleteAllRejected(!0)}}},function(){var e=this,t=e._self._c;return t(`ModalWrapperChoice`,{attrs:{option:`sacrificeAll`},on:{confirm:e.handleYesClick},scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` `+e._s(e.topLabel)+` `)]},proxy:!0}])},[t(`div`,{staticClass:`c-modal-message__text`},[e._v(` `+e._s(e.message)+` `)]),t(`br`),t(`div`,{staticClass:`c-modal-hard-reset-danger`},[e._v(` `+e._s(e.extraMessage)+` `)])])},[],!1,null,null,null,null).exports,_T=D({name:`PurgeAllUnprotectedGlyphsModal`,components:{ModalWrapperChoice:BC},data(){return{isRefining:!1,isSacrificing:!1}},computed:{refiningSacrificingOrDeleting(){return this.isRefining?`Refine`:this.isSacrificing?`Sacrifice`:`delete`},topLabel(){return`You are about to ${this.refiningSacrificingOrDeleting} all unprotected Glyphs`},message(){return`Are you sure you want to ${this.refiningSacrificingOrDeleting} all unprotected Glyphs
        in your inventory?`},extraMessage(){return this.glyphsDeleted===0?`This will ${this.refiningSacrificingOrDeleting} no Glyphs.`:this.glyphsDeleted===this.glyphsTotal?`This will ${this.refiningSacrificingOrDeleting} all your Glyphs.`:`This will ${this.refiningSacrificingOrDeleting} 
        ${formatInt(this.glyphsDeleted)}/${formatInt(this.glyphsTotal)} of your Glyphs.`},glyphsTotal(){return Glyphs.inventory.filter(e=>e!==null).length},glyphsDeleted(){return Glyphs.autoClean(0,!1)}},methods:{update(){this.isRefining=GlyphSacrificeHandler.isRefining,this.isSacrificing=GlyphSacrificeHandler.canSacrifice},handleYesClick(){Glyphs.deleteAllUnprotected()}}},function(){var e=this,t=e._self._c;return t(`ModalWrapperChoice`,{attrs:{option:`sacrificeAll`},on:{confirm:e.handleYesClick},scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` `+e._s(e.topLabel)+` `)]},proxy:!0}])},[t(`div`,{staticClass:`c-modal-message__text`},[e._v(` `+e._s(e.message)+` `)]),t(`br`),t(`div`,{staticClass:`c-modal-hard-reset-danger`},[e._v(` `+e._s(e.extraMessage)+` `)])])},[],!1,null,null,null,null).exports,vT={name:`PurgeGlyphModal`,components:{ModalWrapperChoice:BC},props:{harsh:{type:Boolean,required:!0}},computed:{threshold(){return this.harsh?1:5},extraMessage(){return this.glyphsDeleted===0?`This will Purge no Glyphs.`:this.glyphsDeleted===this.glyphsTotal?`This will Purge all your Glyphs.`:`${this.harsh?`Harsh Purging`:`Purging`} will delete
        ${formatInt(this.glyphsDeleted)}/${formatInt(this.glyphsTotal)}
      of your Glyphs.`},explanation(){return this.harsh?`Harsh Purging deletes Glyphs that are strictly worse than any other Glyph in your
        inventory. For example, if a Glyph has all the same effects as another Glyph, but the values
        of ALL of the effects are worse, then it will be deleted.`:`Purging deletes Glyphs that are strictly worse than other Glyphs, while keeping enough to equip a full
        set with those effects. This behaves like Harsh Purge, except that regular Purge will not delete any given
        Glyph unless it finds five Glyphs which are better (instead of only one).`},topLabel(){return`You are about to ${this.harsh?`Harsh Purge`:`Purge`} your Glyphs`},glyphsTotal(){return Glyphs.inventory.filter(e=>e!==null).length},glyphsDeleted(){return Glyphs.autoClean(this.threshold,!1)}},methods:{handleYesClick(){Glyphs.autoClean(this.threshold,!0)}}},yT=D(vT,function(){var e=this,t=e._self._c;return t(`ModalWrapperChoice`,{attrs:{option:`autoClean`},on:{confirm:e.handleYesClick},scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` `+e._s(e.topLabel)+` `)]},proxy:!0}])},[t(`div`,{staticClass:`c-modal-message__text`},[e._v(` This could delete Glyphs in your inventory that are good enough that you might want to use them later. Purging will Purge Glyphs based on your Purge mode. Are you sure you want to do this? `),t(`br`),t(`br`),e._v(` `+e._s(e.explanation)+` `)]),t(`br`),t(`div`,{staticClass:`c-modal-hard-reset-danger`},[e._v(` `+e._s(e.extraMessage)+` `)])])},[],!1,null,null,null,null).exports,bT={name:`RefineGlyphModal`,components:{ModalWrapperChoice:BC},props:{idx:{type:Number,required:!0}},data(){return{resourceAmount:new Decimal,resourceUnlocked:!1,gain:new Decimal,after:new Decimal,cap:new Decimal,confirmedRefine:!1}},computed:{glyph(){return Glyphs.findByInventoryIndex(this.idx)},resource(){return GlyphSacrificeHandler.glyphAlchemyResource(this.glyph)},resourceName(){return this.resource.name}},methods:{update(){let e=this.resource;this.resourceAmount.copyFrom(e.amount),this.resourceUnlocked=e.isUnlocked,this.gain.copyFrom(GlyphSacrificeHandler.glyphRefinementGain(this.glyph)),this.cap.copyFrom(GlyphSacrificeHandler.glyphEffectiveCap(this.glyph)),this.after=this.resourceAmount.add(this.gain);let t=Glyphs.findByInventoryIndex(this.idx);this.glyph!==t&&!this.confirmedRefine&&(this.emitClose(),Modal.message.show(`The selected Glyph changed position or was otherwise changed!`))},handleYesClick(){this.confirmedRefine=!0,GlyphSacrificeHandler.refineGlyph(this.glyph)}}},xT=D(bT,function(){var e=this,t=e._self._c;return t(`ModalWrapperChoice`,{attrs:{option:`glyphRefine`},on:{confirm:e.handleYesClick},scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` You are about to refine a Glyph `)]},proxy:!0}])},[e.resourceUnlocked?t(`div`,{staticClass:`c-modal-message__text`},[e._v(` Refining a Glyph will remove the Glyph from your inventory, and in return, you will increase your `+e._s(e.resourceName)+` Alchemy resource from `+e._s(e.format(e.resourceAmount,2,2))+` to `+e._s(e.format(e.after,2,2))+`. This Glyph can raise your `+e._s(e.resourceName)+` resource to at most `+e._s(e.format(e.cap,2,2))+`. `)]):t(`div`,{staticClass:`c-modal-message__text`},[e._v(` You cannot gain any `+e._s(e.resourceName)+` alchemy resource because you have not unlocked this Glyph's resource yet. You can still refine it anyway, but nothing will happen. Consider sacrificing the Glyph instead. `)])])},[],!1,null,null,null,null).exports,ST={name:`SacrificeGlyphModal`,components:{ModalWrapperChoice:BC},props:{idx:{type:Number,required:!0}},data(){return{currentGlyphSacrifice:0,gain:0,confirmedSacrifice:!1}},computed:{glyph(){return Glyphs.findByInventoryIndex(this.idx)},message(){return`Do you really want to sacrifice this Glyph? Your total power of sacrificed ${this.glyph.type}
      Glyphs will increase from ${format(this.currentGlyphSacrifice,2,2)} to
      ${format(this.currentGlyphSacrifice+this.gain,2,2)}.`}},methods:{update(){this.currentGlyphSacrifice=player.reality.glyphs.sac[this.glyph.type],this.gain=GlyphSacrificeHandler.glyphSacrificeGain(this.glyph);let e=Glyphs.findByInventoryIndex(this.idx);this.glyph!==e&&!this.confirmedSacrifice&&(this.emitClose(),Modal.message.show(`The selected Glyph changed position or was otherwise changed!`))},handleYesClick(){this.confirmedSacrifice=!0,GlyphSacrificeHandler.sacrificeGlyph(this.glyph,!0)}}},CT=D(ST,function(){var e=this,t=e._self._c;return t(`ModalWrapperChoice`,{attrs:{option:`glyphSacrifice`},on:{confirm:e.handleYesClick},scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` You are about to sacrifice a Glyph `)]},proxy:!0}])},[t(`div`,{staticClass:`c-modal-message__text`},[e._v(` `+e._s(e.message)+` `)])])},[],!1,null,null,null,null).exports,wT={name:`AutobuyerIntervalLabel`,props:{autobuyer:{type:Object,required:!1,default:null},intervalIn:{type:Number,required:!1,default:null},bulkIn:{type:Number,required:!1,default:null}},data(){return{interval:0,bulk:0,isShowingBulk:!1}},computed:{intervalText(){return this.interval<player.options.updateRate&&this.autobuyer.name!==`Infinity`?`Instant`:`${format(TimeSpan.fromMilliseconds(new Decimal(this.interval)).totalSeconds,2,2)} seconds`},bulkText(){return`Current bulk: ${Number.isFinite(this.bulk)?formatX(this.bulk,2):`Unlimited`}`}},methods:{update(){let e=this.autobuyer;this.interval=(this.intervalIn||e?.interval)??0,this.bulk=this.bulkIn??(e.hasUnlimitedBulk?1/0:e.bulk),this.isShowingBulk=this.bulk!==0&&Number.isFinite(this.bulk)}}},TT=D(wT,function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`c-autobuyer-box__small-text`},[e._v(` Current interval: `+e._s(e.intervalText)+` `),e.isShowingBulk?t(`span`,[t(`br`),e._v(` `+e._s(e.bulkText)+` `)]):e._e()])},[],!1,null,`1074cc49`,null,null).exports,ET={name:`AutobuyerBox`,components:{AutobuyerIntervalLabel:TT},props:{autobuyer:{type:Object,required:!0},name:{type:String,required:!0},showInterval:{type:Boolean,required:!1,default:!1},isModal:{type:Boolean,required:!1,default:!1}},data(){return{isUnlocked:!1,isActive:!1,globalToggle:!1,canBeBought:!1,isUnlockable:!1,antimatterCost:new Decimal,isBought:!1,antimatter:new Decimal,currMode:0,nextValue:0,nextTime:0}},computed:{autobuyerBuyBoxClass(){return{"c-autobuyer-buy-box":!0,"o-primary-btn":!0,"o-primary-btn--enabled":this.isUnlockable,"o-primary-btn--disabled":!this.isUnlockable}},autobuyerBoxRowClass(){return{"c-autobuyer-box-row":!0,"c-autobuyer-box-row__modal":this.isModal}},autobuyerToggleClass(){return this.globalToggle?this.isActive?`fas fa-check`:`fas fa-times`:this.isActive?`fas fa-pause`:`fas fa-times`},autobuyerStateClass(){return this.globalToggle?{"o-autobuyer-toggle-checkbox__label":!0,"o-autobuyer-toggle-checkbox__label-modal":this.isModal,"o-autobuyer-toggle-checkbox__label--active":this.isActive,"o-autobuyer-toggle-checkbox__label--disabled":!this.globalToggle}:{"o-autobuyer-toggle-checkbox__label":!0,"o-autobuyer-toggle-checkbox__label-modal":this.isModal,"o-autobuyer-toggle-checkbox__label--active-paused":this.isActive,"o-autobuyer-toggle-checkbox__label--deactive-paused":!this.isActive,"o-autobuyer-toggle-checkbox__label--disabled":!this.globalToggle}},showEternity(){return PlayerProgress.eternityUnlocked()?`this Eternity`:``},isShowingStateInfo(){return this.isActive&&[`Infinity`,`Eternity`].includes(this.autobuyer.name)&&this.currMode!==0},extraInfo(){switch(this.currMode){case AUTO_ETERNITY_MODE.TIME:return this.nextTime>0?`Will trigger in ${TimeSpan.fromSeconds(new Decimal(this.nextTime)).toStringShort()}`:`Will trigger ASAP`;case AUTO_ETERNITY_MODE.X_HIGHEST:default:return`Will trigger at ${format(this.nextValue,2)} ${this.autobuyer.name===`Infinity`?`IP`:`EP`}`}}},watch:{isActive(e){this.autobuyer.isActive=e}},methods:{update(){let e=this.autobuyer;this.isUnlocked=e.isUnlocked,this.isActive=e.isActive,this.globalToggle=player.auto.autobuyersOn,this.canBeBought=e.canBeBought,this.isUnlockable=e.canUnlockSlowVersion,this.antimatterCost=e.antimatterCost,this.isBought=e.isBought,this.antimatter.copyFrom(player.records.thisEternity.maxAM),this.currMode=e.mode,this.isShowingStateInfo&&(this.nextValue=new Decimal(e.highestPrevPrestige).times(e.xHighest),this.nextTime=e.timeToNextTick)},toggle(){this.isActive=!this.isActive},purchase(){this.autobuyer.purchase(),TabNotification.newAutobuyer.clearTrigger(),GameCache.cheapestAntimatterAutobuyer.invalidate()}}},DT=D(ET,function(){var e=this,t=e._self._c;return e.isUnlocked||e.isBought?t(`div`,{class:e.autobuyerBoxRowClass},[t(`div`,{staticClass:`l-autobuyer-box__header`},[e._v(` `+e._s(e.name)+` `),e.showInterval?t(`AutobuyerIntervalLabel`,{attrs:{autobuyer:e.autobuyer}}):e._e(),e.isShowingStateInfo?t(`div`,[e._v(` `+e._s(e.extraInfo)+` `)]):e._e()],1),t(`div`,{staticClass:`c-autobuyer-box-row__intervalSlot`},[e._t(`intervalSlot`)],2),t(`div`,{staticClass:`c-autobuyer-box-row__toggleSlot`},[e._t(`toggleSlot`)],2),t(`div`,{staticClass:`c-autobuyer-box-row__checkboxSlot`},[e._t(`checkboxSlot`)],2),t(`div`,{staticClass:`c-autobuyer-box-row__optionSlot`},[e._t(`optionSlot`)],2),t(`div`,{staticClass:`l-autobuyer-box__footer`,on:{click:e.toggle}},[t(`label`,{class:e.autobuyerStateClass},[t(`span`,{class:e.autobuyerToggleClass})]),t(`input`,{attrs:{disabled:!e.globalToggle,name:e.name,type:`checkbox`},domProps:{checked:e.isActive&&e.globalToggle}})])]):e.canBeBought?t(`div`,{class:e.autobuyerBuyBoxClass,on:{click:e.purchase}},[e._v(` `+e._s(e.name)+` `),t(`br`),e._v(` Requirement: `+e._s(e.format(e.antimatterCost))+` Total Antimatter `+e._s(e.showEternity)+` `)]):e._e()},[],!1,null,`61d678bd`,null,null).exports,OT={name:`AutobuyerDropdownEntry`,props:{autobuyer:{type:Object,required:!0},modes:{type:Array,required:!0},modeNameFn:{type:Function,required:!0}},data(){return{mode:0}},methods:{update(){this.mode=this.autobuyer.mode},changeMode(e){this.autobuyer.mode=e,this.mode=e,this.$parent.openRequest=!1}}},kT=D(OT,function(){var e=this,t=e._self._c;return t(`div`,e._l(e.modes,function(n){return t(`div`,{key:n,staticClass:`o-primary-btn c-autobuyer-box__mode-select l-autobuyer-choice`,attrs:{value:n},on:{click:function(t){return e.changeMode(n)}}},[e._v(` `+e._s(e.modeNameFn(n))+` `)])}),0)},[],!1,null,`132c5973`,null,null).exports,AT={name:`AutobuyerIntervalButton`,props:{autobuyer:{type:Object,required:!0}},data(){return{cost:0,isMaxed:!1,isUpgradeable:!1,isAffordable:!1,prob:new Decimal(.4)}},computed:{classObject(){return{"o-autobuyer-btn":!0,"l-autobuyer-box__button":!0,"o-autobuyer-btn--unavailable":!this.isAffordable}}},methods:{update(){this.cost=this.autobuyer.cost,this.isMaxed=this.autobuyer.hasMaxedInterval,this.isUpgradeable=this.autobuyer.canBeUpgraded,this.isAffordable=Currency.infinityPoints.gte(this.cost)},upgradeInterval(){this.autobuyer.upgradeInterval()}}},jT=D(AT,function(){var e=this,t=e._self._c;return!e.isMaxed&&e.isUpgradeable?t(`button`,{class:e.classObject,on:{click:e.upgradeInterval}},[e._v(` `+e._s(e.formatPercents(e.prob))+` smaller interval `),t(`br`),e._v(` Cost: `+e._s(e.format(e.cost,2))+` IP `)]):e.isMaxed?e._e():t(`button`,{staticClass:`o-autobuyer-btn l-autobuyer-box__button o-autobuyer-btn--unavailable`},[e._v(` Complete the challenge to upgrade interval `)])},[],!1,null,`31fb6864`,null,null).exports,MT={name:`BigCrunchAutobuyerBox`,components:{AutobuyerBox:DT,AutobuyerIntervalButton:jT,AutobuyerInput:F,ExpandingControlBox:Pt,AutobuyerDropdownEntry:kT},props:{isModal:{type:Boolean,required:!1,default:!1}},data(){return{isDoomed:!1,postBreak:!1,hasMaxedInterval:!1,mode:AUTO_CRUNCH_MODE.AMOUNT,hasAdditionalModes:!1,increaseWithMult:!0}},computed:{autobuyer:()=>Autobuyer.bigCrunch,modes:()=>[AUTO_CRUNCH_MODE.AMOUNT,AUTO_CRUNCH_MODE.TIME,AUTO_CRUNCH_MODE.X_HIGHEST],amountMode:()=>AUTO_ETERNITY_MODE.AMOUNT},watch:{increaseWithMult(e){this.autobuyer.increaseWithMult=e}},methods:{update(){this.isDoomed=Pelle.isDoomed,this.postBreak=player.break,this.hasMaxedInterval=this.autobuyer.hasMaxedInterval,this.mode=this.autobuyer.mode,this.hasAdditionalModes=this.autobuyer.hasAdditionalModes,this.increaseWithMult=this.autobuyer.increaseWithMult},modeProps(e){switch(e){case AUTO_CRUNCH_MODE.AMOUNT:return{title:`Big Crunch at X IP`,input:{property:`amount`,type:`decimal`}};case AUTO_CRUNCH_MODE.TIME:return{title:`Seconds between Crunches`,input:{property:`time`,type:`float`}};case AUTO_CRUNCH_MODE.X_HIGHEST:return{title:`X times highest IP`,input:{property:`xHighest`,type:`decimal`}}}throw Error(`Unknown Auto Crunch mode`)},modeName(e){return this.modeProps(e).title}}},NT=D(MT,function(){var e=this,t=e._self._c;return t(`AutobuyerBox`,{attrs:{autobuyer:e.autobuyer,"show-interval":!e.postBreak,"is-modal":e.isModal,name:`Automatic Big Crunch`},scopedSlots:e._u([e.hasMaxedInterval?e.postBreak?{key:`intervalSlot`,fn:function(){return[e.hasAdditionalModes?t(`ExpandingControlBox`,{attrs:{"auto-close":!0},scopedSlots:e._u([{key:`header`,fn:function(){return[t(`div`,{staticClass:`o-primary-btn c-autobuyer-box__mode-select c-autobuyer-box__mode-select-header`},[e._v(` ▼ Current Setting: ▼ `),t(`br`),e._v(` `+e._s(e.modeName(e.mode))+` `)])]},proxy:!0},{key:`dropdown`,fn:function(){return[t(`AutobuyerDropdownEntry`,{attrs:{autobuyer:e.autobuyer,modes:e.modes,"mode-name-fn":e.modeName}})]},proxy:!0}],null,!1,2761615181)}):t(`span`,[e._v(` `+e._s(e.modeProps(e.mode).title)+`: `)])]},proxy:!0}:null:{key:`intervalSlot`,fn:function(){return[t(`AutobuyerIntervalButton`,{attrs:{autobuyer:e.autobuyer}})]},proxy:!0},e.postBreak?{key:`toggleSlot`,fn:function(){return[t(`AutobuyerInput`,e._b({key:e.mode,attrs:{autobuyer:e.autobuyer}},`AutobuyerInput`,e.modeProps(e.mode).input,!1))]},proxy:!0}:null,e.postBreak&&e.mode===e.amountMode?{key:`checkboxSlot`,fn:function(){return[t(`label`,{staticClass:`o-autobuyer-toggle-checkbox o-clickable`},[t(`input`,{directives:[{name:`model`,rawName:`v-model`,value:e.increaseWithMult,expression:`increaseWithMult`}],staticClass:`o-clickable`,attrs:{type:`checkbox`},domProps:{checked:Array.isArray(e.increaseWithMult)?e._i(e.increaseWithMult,null)>-1:e.increaseWithMult},on:{change:function(t){var n=e.increaseWithMult,r=t.target,i=!!r.checked;if(Array.isArray(n)){var a=null,o=e._i(n,a);r.checked?o<0&&(e.increaseWithMult=n.concat([a])):o>-1&&(e.increaseWithMult=n.slice(0,o).concat(n.slice(o+1)))}else e.increaseWithMult=i}}}),e._v(` Dynamic amount `)])]},proxy:!0}:null],null,!0)})},[],!1,null,`a54f316a`,null,null).exports,PT={name:`DimensionBoostAutobuyerBox`,components:{AutobuyerBox:DT,AutobuyerIntervalButton:jT,AutobuyerInput:F},props:{isModal:{type:Boolean,required:!1,default:!1}},data(){return{hasMaxedInterval:!1,limitDimBoosts:!1,limitUntilGalaxies:!1,isBuyMaxUnlocked:!1}},computed:{autobuyer:()=>Autobuyer.dimboost},watch:{limitDimBoosts(e){this.autobuyer.limitDimBoosts=e},limitUntilGalaxies(e){this.autobuyer.limitUntilGalaxies=e}},methods:{update(){let e=this.autobuyer;this.hasMaxedInterval=e.hasMaxedInterval,this.isBuyMaxUnlocked=e.isBuyMaxUnlocked,this.limitDimBoosts=e.limitDimBoosts,this.limitUntilGalaxies=e.limitUntilGalaxies}}},FT=D(PT,function(){var e=this,t=e._self._c;return t(`AutobuyerBox`,{attrs:{autobuyer:e.autobuyer,"is-modal":e.isModal,"show-interval":!e.isBuyMaxUnlocked,name:`Automatic Dimension Boosts`},scopedSlots:e._u([e.hasMaxedInterval?e.isBuyMaxUnlocked?{key:`intervalSlot`,fn:function(){return[t(`div`,{staticClass:`c-autobuyer-box__small-text`},[t(`br`),e._v(` Activates every X seconds: `)]),t(`AutobuyerInput`,{attrs:{autobuyer:e.autobuyer,type:`float`,property:`buyMaxInterval`}})]},proxy:!0}:null:{key:`intervalSlot`,fn:function(){return[t(`AutobuyerIntervalButton`,{attrs:{autobuyer:e.autobuyer}})]},proxy:!0},e.isBuyMaxUnlocked?null:{key:`checkboxSlot`,fn:function(){return[t(`label`,{staticClass:`o-autobuyer-toggle-checkbox c-autobuyer-box__small-text l-top-margin o-clickable`},[t(`input`,{directives:[{name:`model`,rawName:`v-model`,value:e.limitDimBoosts,expression:`limitDimBoosts`}],staticClass:`o-clickable`,attrs:{type:`checkbox`},domProps:{checked:Array.isArray(e.limitDimBoosts)?e._i(e.limitDimBoosts,null)>-1:e.limitDimBoosts},on:{change:function(t){var n=e.limitDimBoosts,r=t.target,i=!!r.checked;if(Array.isArray(n)){var a=null,o=e._i(n,a);r.checked?o<0&&(e.limitDimBoosts=n.concat([a])):o>-1&&(e.limitDimBoosts=n.slice(0,o).concat(n.slice(o+1)))}else e.limitDimBoosts=i}}}),e._v(` Limit Dimension Boosts to: `)]),t(`AutobuyerInput`,{attrs:{autobuyer:e.autobuyer,type:`decimal`,property:`maxDimBoosts`}})]},proxy:!0},{key:`toggleSlot`,fn:function(){return[t(`label`,{staticClass:`o-autobuyer-toggle-checkbox c-autobuyer-box__small-text l-autobuyer-text-area o-clickable`},[t(`input`,{directives:[{name:`model`,rawName:`v-model`,value:e.limitUntilGalaxies,expression:`limitUntilGalaxies`}],staticClass:`o-clickable`,attrs:{type:`checkbox`},domProps:{checked:Array.isArray(e.limitUntilGalaxies)?e._i(e.limitUntilGalaxies,null)>-1:e.limitUntilGalaxies},on:{change:function(t){var n=e.limitUntilGalaxies,r=t.target,i=!!r.checked;if(Array.isArray(n)){var a=null,o=e._i(n,a);r.checked?o<0&&(e.limitUntilGalaxies=n.concat([a])):o>-1&&(e.limitUntilGalaxies=n.slice(0,o).concat(n.slice(o+1)))}else e.limitUntilGalaxies=i}}}),e.isBuyMaxUnlocked?t(`span`,[e._v(` Only Dimboost to unlock new`),t(`br`),e._v(` Dimensions until X Galaxies: `)]):t(`span`,[e._v(` Galaxies required to always`),t(`br`),e._v(` Dimboost, ignoring the limit: `)])]),t(`AutobuyerInput`,{attrs:{autobuyer:e.autobuyer,type:`decimal`,property:`galaxies`}})]},proxy:!0}],null,!0)})},[],!1,null,`5681d111`,null,null).exports,IT={name:`EternityAutobuyerBox`,components:{AutobuyerBox:DT,AutobuyerInput:F,ExpandingControlBox:Pt,AutobuyerDropdownEntry:kT},props:{isModal:{type:Boolean,required:!1,default:!1}},data(){return{isDoomed:!1,mode:AUTO_ETERNITY_MODE.AMOUNT,hasAdditionalModes:!1,increaseWithMult:!0}},computed:{autobuyer:()=>Autobuyer.eternity,modes:()=>[AUTO_ETERNITY_MODE.AMOUNT,AUTO_ETERNITY_MODE.TIME,AUTO_ETERNITY_MODE.X_HIGHEST],amountMode:()=>AUTO_ETERNITY_MODE.AMOUNT},watch:{increaseWithMult(e){this.autobuyer.increaseWithMult=e}},methods:{update(){this.isDoomed=Pelle.isDoomed,this.mode=this.autobuyer.mode,this.hasAdditionalModes=this.autobuyer.hasAdditionalModes,this.increaseWithMult=this.autobuyer.increaseWithMult},modeProps(e){switch(e){case AUTO_ETERNITY_MODE.AMOUNT:return{title:`Eternity at X EP`,input:{property:`amount`,type:`decimal`}};case AUTO_ETERNITY_MODE.TIME:return{title:`Seconds between Eternities`,input:{property:`time`,type:`float`}};case AUTO_ETERNITY_MODE.X_HIGHEST:return{title:`X times highest EP`,input:{property:`xHighest`,type:`decimal`}}}throw Error(`Unknown Auto Eternity mode`)},modeName(e){return this.modeProps(e).title}}},LT=D(IT,function(){var e=this,t=e._self._c;return t(`AutobuyerBox`,{attrs:{autobuyer:e.autobuyer,"is-modal":e.isModal,name:`Automatic Eternity`},scopedSlots:e._u([{key:`intervalSlot`,fn:function(){return[e.hasAdditionalModes?t(`ExpandingControlBox`,{attrs:{"auto-close":!0},scopedSlots:e._u([{key:`header`,fn:function(){return[t(`div`,{staticClass:`o-primary-btn c-autobuyer-box__mode-select c-autobuyer-box__mode-select-header`},[e._v(` ▼ Current Setting: ▼ `),t(`br`),e._v(` `+e._s(e.modeName(e.mode))+` `)])]},proxy:!0},{key:`dropdown`,fn:function(){return[t(`AutobuyerDropdownEntry`,{attrs:{autobuyer:e.autobuyer,modes:e.modes,"mode-name-fn":e.modeName}})]},proxy:!0}],null,!1,2761615181)}):t(`span`,[e._v(e._s(e.modeProps(e.mode).title)+`:`)])]},proxy:!0},{key:`toggleSlot`,fn:function(){return[t(`AutobuyerInput`,e._b({key:e.mode,attrs:{autobuyer:e.autobuyer}},`AutobuyerInput`,e.modeProps(e.mode).input,!1))]},proxy:!0},e.mode===e.amountMode?{key:`checkboxSlot`,fn:function(){return[t(`label`,{staticClass:`o-autobuyer-toggle-checkbox o-clickable`},[t(`input`,{directives:[{name:`model`,rawName:`v-model`,value:e.increaseWithMult,expression:`increaseWithMult`}],staticClass:`o-clickable`,attrs:{type:`checkbox`},domProps:{checked:Array.isArray(e.increaseWithMult)?e._i(e.increaseWithMult,null)>-1:e.increaseWithMult},on:{change:function(t){var n=e.increaseWithMult,r=t.target,i=!!r.checked;if(Array.isArray(n)){var a=null,o=e._i(n,a);r.checked?o<0&&(e.increaseWithMult=n.concat([a])):o>-1&&(e.increaseWithMult=n.slice(0,o).concat(n.slice(o+1)))}else e.increaseWithMult=i}}}),e._v(` Dynamic amount `)])]},proxy:!0}:null],null,!0)})},[],!1,null,`2ee9f639`,null,null).exports,RT={name:`GalaxyAutobuyerBox`,components:{AutobuyerBox:DT,AutobuyerIntervalButton:jT,AutobuyerInput:F},props:{isModal:{type:Boolean,required:!1,default:!1}},data(){return{hasMaxedInterval:!1,limitGalaxies:!1,isBuyMaxUnlocked:!1,buyMax:!1}},computed:{autobuyer:()=>Autobuyer.galaxy,limitGalaxiesSlot(){return this.hasMaxedInterval&&!this.isBuyMaxUnlocked?`intervalSlot`:`toggleSlot`}},watch:{limitGalaxies(e){this.autobuyer.limitGalaxies=e}},methods:{update(){this.hasMaxedInterval=this.autobuyer.hasMaxedInterval,this.isBuyMaxUnlocked=this.autobuyer.isBuyMaxUnlocked,this.limitGalaxies=this.autobuyer.limitGalaxies}}},zT=D(RT,function(){var e=this,t=e._self._c;return t(`AutobuyerBox`,{attrs:{autobuyer:e.autobuyer,"is-modal":e.isModal,name:`Automatic Antimatter Galaxies`,"show-interval":!e.isBuyMaxUnlocked},scopedSlots:e._u([e.hasMaxedInterval?e.isBuyMaxUnlocked?{key:`intervalSlot`,fn:function(){return[t(`div`,{staticClass:`c-autobuyer-box__small-text`},[e._v(` Activates every X seconds: `)]),t(`AutobuyerInput`,{attrs:{autobuyer:e.autobuyer,type:`float`,property:`buyMaxInterval`}})]},proxy:!0}:null:{key:`intervalSlot`,fn:function(){return[t(`AutobuyerIntervalButton`,{attrs:{autobuyer:e.autobuyer}})]},proxy:!0},{key:e.limitGalaxiesSlot,fn:function(){return[t(`label`,{staticClass:`o-autobuyer-toggle-checkbox c-autobuyer-box__small-text o-clickable`},[t(`input`,{directives:[{name:`model`,rawName:`v-model`,value:e.limitGalaxies,expression:`limitGalaxies`}],staticClass:`o-clickable`,attrs:{type:`checkbox`},domProps:{checked:Array.isArray(e.limitGalaxies)?e._i(e.limitGalaxies,null)>-1:e.limitGalaxies},on:{change:function(t){var n=e.limitGalaxies,r=t.target,i=!!r.checked;if(Array.isArray(n)){var a=null,o=e._i(n,a);r.checked?o<0&&(e.limitGalaxies=n.concat([a])):o>-1&&(e.limitGalaxies=n.slice(0,o).concat(n.slice(o+1)))}else e.limitGalaxies=i}}}),e._v(` Limit Antimatter Galaxies to: `)]),t(`AutobuyerInput`,{attrs:{autobuyer:e.autobuyer,type:`decimal`,property:`maxGalaxies`}})]},proxy:!0}],null,!0)})},[],!1,null,`f636cdb9`,null,null).exports,BT={name:`RealityAutobuyerBox`,components:{AutobuyerBox:DT,AutobuyerInput:F,ExpandingControlBox:Pt,AutobuyerDropdownEntry:kT},props:{isModal:{type:Boolean,required:!1,default:!1}},data(){return{mode:AUTO_REALITY_MODE.RM,levelCap:0,isOverCap:!1,hasAlternateInputs:!1}},computed:{autobuyer:()=>Autobuyer.reality,hasRelicMode:()=>TeresaUnlocks.effarig.canBeApplied,modes(){let e=[AUTO_REALITY_MODE.RM,AUTO_REALITY_MODE.GLYPH,AUTO_REALITY_MODE.EITHER,AUTO_REALITY_MODE.BOTH,AUTO_REALITY_MODE.TIME];return this.hasRelicMode&&e.push(AUTO_REALITY_MODE.RELIC_SHARD),e}},methods:{update(){this.mode=this.autobuyer.mode,this.levelCap=Glyphs.levelCap,this.isOverCap=this.levelCap.lt(this.autobuyer.glyph),this.hasAlternateInputs=Autobuyer.reality.mode>AUTO_REALITY_MODE.BOTH},modeName(e){switch(e){case AUTO_REALITY_MODE.RM:return`Reality Machines`;case AUTO_REALITY_MODE.GLYPH:return`Glyph level`;case AUTO_REALITY_MODE.EITHER:return`RM OR Level`;case AUTO_REALITY_MODE.BOTH:return`RM AND Level`;case AUTO_REALITY_MODE.TIME:return`Real-time seconds`;case AUTO_REALITY_MODE.RELIC_SHARD:return`Relic Shards`}throw Error(`Unknown Auto Reality mode`)}}},VT=D(BT,function(){var e=this,t=e._self._c;return t(`AutobuyerBox`,{attrs:{autobuyer:e.autobuyer,"is-modal":e.isModal,name:`Automatic Reality`},scopedSlots:e._u([{key:`intervalSlot`,fn:function(){return[t(`ExpandingControlBox`,{attrs:{"auto-close":!0},scopedSlots:e._u([{key:`header`,fn:function(){return[t(`div`,{staticClass:`o-primary-btn c-autobuyer-box__mode-select c-autobuyer-box__mode-select-header`},[e._v(` ▼ Current Setting: ▼ `),t(`br`),e._v(` `+e._s(e.modeName(e.mode))+` `)])]},proxy:!0},{key:`dropdown`,fn:function(){return[t(`AutobuyerDropdownEntry`,{attrs:{autobuyer:e.autobuyer,modes:e.modes,"mode-name-fn":e.modeName}})]},proxy:!0}])})]},proxy:!0},{key:`toggleSlot`,fn:function(){return[e.hasAlternateInputs?t(`div`,[e._v(` Target Time (seconds): `)]):t(`div`,[e._v(` Target Reality Machines: `)]),t(`AutobuyerInput`,{attrs:{autobuyer:e.autobuyer,type:e.hasAlternateInputs?`float`:`decimal`,property:e.hasAlternateInputs?`time`:`rm`}})]},proxy:!0},{key:`checkboxSlot`,fn:function(){return[e.hasAlternateInputs&&e.hasRelicMode?t(`div`,[e._v(` Target Relic Shards: `)]):t(`div`,[e._v(` Target Glyph level: `)]),t(`AutobuyerInput`,{attrs:{autobuyer:e.autobuyer,type:(e.hasAlternateInputs&&e.hasRelicMode,`decimal`),property:e.hasAlternateInputs&&e.hasRelicMode?`shard`:`glyph`}}),e.isOverCap?t(`div`,[e._v(` Autobuyer will trigger at the Glyph level cap of `+e._s(e.formatInt(e.levelCap))+`. `)]):e._e()]},proxy:!0}])})},[],!1,null,`fcf8d4f2`,null,null).exports,HT=D({name:`AutobuyerEditModal`,components:{BigCrunchAutobuyerBox:NT,DimensionBoostAutobuyerBox:FT,EternityAutobuyerBox:LT,GalaxyAutobuyerBox:zT,ModalWrapper:jw,RealityAutobuyerBox:VT},computed:{header(){return`Edit Autobuyers`},message(){return Autobuyers.hasAutobuyersForEditModal?`Using this modal, you can edit various values inside your autobuyers.`:`You currently have no autobuyers which could be shown here.`}}},function(){var e=this,t=e._self._c;return t(`ModalWrapper`,{scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` `+e._s(e.header)+` `)]},proxy:!0}])},[t(`div`,{staticClass:`c-modal-message__text-fit`},[t(`span`,[e._v(` `+e._s(e.message)+` `)])]),t(`RealityAutobuyerBox`,{staticClass:`c-reality-pos`,attrs:{"is-modal":``}}),t(`EternityAutobuyerBox`,{staticClass:`c-eternity-pos`,attrs:{"is-modal":``}}),t(`BigCrunchAutobuyerBox`,{staticClass:`c-infinity-pos`,attrs:{"is-modal":``}}),t(`GalaxyAutobuyerBox`,{attrs:{"is-modal":``}}),t(`DimensionBoostAutobuyerBox`,{attrs:{"is-modal":``}})],1)},[],!1,null,`e607d314`,null,null).exports,UT={name:`AutomatorScriptTemplate`,components:{ModalWrapper:jw},props:{warnings:{type:Function,required:!0},name:{type:String,required:!0},description:{type:String,required:!0},inputs:{type:Array,required:!0}},data(){return{templateInputs:{},buttonTextStrings:[],invalidInputCount:0,templateProps:null,currentPreset:``,isBlock:!1}},computed:{presets:()=>player.timestudy.presets,params:()=>GameDatabase.reality.automator.templates.paramTypes,validWarnings(){return this.invalidInputCount===0?this.warnings().concat(this.templateScript?.warnings):this.warnings()},templateScript(){return this.invalidInputCount===0?new ScriptTemplate(this.templateProps,this.name):null}},created(){for(let e of this.inputs){let t=this.paramTypeObject(e.type).boolDisplay;t?(this.$set(this.templateInputs,e.name,!1),this.buttonTextStrings[e.name]=t[1]):(this.$set(this.templateInputs,e.name,``),this.invalidInputCount++)}},methods:{update(){this.isBlock=player.reality.automator.type===AUTOMATOR_TYPE.BLOCK},paramTypeObject(e){return this.params.find(t=>t.name===e)},isValid(e){let t=this.paramTypeObject(e.type);return t.isValidString?t.isValidString(this.templateInputs[e.name]):!0},validityClass(e){return e.name===`treeStudies`&&this.currentPreset!==``?`c-automator-template-textbox--preset`:this.isValid(e)?void 0:`c-automator-template-textbox--invalid`},loadPreset(e,t){this.templateInputs.treeStudies=e?`NAME ${e}`:`ID ${t}`,this.updateTemplateProps()},loadCurrent(){this.templateInputs.treeStudies=GameCache.currentStudyTree.value.exportString,this.updateTemplateProps()},updateTemplateProps(){this.templateProps={},this.invalidInputCount=0;for(let e of this.inputs){let t=this.paramTypeObject(e.type),n=e=>t.map?t.map(e):e;this.templateProps[e.name]=n(this.templateInputs[e.name]),this.isValid(e)||this.invalidInputCount++}let e=this.templateProps.treeStudies.match(/^NAME (.{1,4})$/u),t=this.templateProps.treeStudies.match(/^ID (\d)$/u);if(e){let t=e?e[1]:``;this.currentPreset=this.presets.find(e=>e.name===t).name}else if(t){let e=t?t[1]:``;this.currentPreset=this.presets.some((t,n)=>n===e-1)?e:``}this.templateProps.treePreset=this.currentPreset===``?null:this.currentPreset},updateButton(e){this.templateInputs[e.name]=!this.templateInputs[e.name];let t=this.paramTypeObject(e.type).boolDisplay;this.buttonTextStrings[e.name]=t[this.templateInputs[e.name]?0:1],this.updateTemplateProps()},copyAndClose(){if(this.isBlock){let e={name:`Template: ${this.name}`,blocks:b(this.templateScript.script).blocks};AutomatorData.blockTemplates.push(e),GameUI.notify.info(`Custom template block created`)}else copyToClipboard(this.templateScript.script),GameUI.notify.info(`Template copied to clipboard`);this.emitClose()}}},WT=D(UT,function(){var e=this,t=e._self._c;return t(`ModalWrapper`,{staticClass:`c-automator-template-container`,scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` `+e._s(e.name)+` Template `)]},proxy:!0}])},[t(`div`,{staticClass:`c-automator-template-description`},[e._v(` `+e._s(e.description)+` `)]),t(`div`,{staticClass:`c-automator-template-inputs`},[t(`b`,[e._v(`Required Information:`)]),t(`br`),e._v(` Use a preset Study Tree: `),e._l(e.presets,function(n,r){return t(`button`,{key:n.name,staticClass:`o-primary-btn o-load-preset-button-margin`,on:{click:function(t){return e.loadPreset(n.name,r+1)}}},[e._v(` `+e._s(n.name?n.name:r+1)+` `)])}),t(`button`,{staticClass:`o-primary-btn o-load-preset-button-margin`,on:{click:e.loadCurrent}},[t(`i`,[e._v(`Current Tree`)])]),e._l(e.inputs,function(n){return t(`div`,{key:n.name,staticClass:`c-automator-template-entry`},[e._v(` `+e._s(n.prompt)+`: `),e.paramTypeObject(n.type).boolDisplay?t(`span`,[t(`button`,{staticClass:`o-primary-btn`,on:{click:function(t){return e.updateButton(n)}}},[e._v(` `+e._s(e.buttonTextStrings[n.name])+` `)])]):t(`span`,[t(`input`,{directives:[{name:`model`,rawName:`v-model`,value:e.templateInputs[n.name],expression:`templateInputs[input.name]`}],ref:`templateInputs[input.name]`,refInFor:!0,staticClass:`c-automator-template-textbox`,class:e.validityClass(n),attrs:{type:`text`},domProps:{value:e.templateInputs[n.name]},on:{input:[function(t){t.target.composing||e.$set(e.templateInputs,n.name,t.target.value)},e.updateTemplateProps]}})])])})],2),t(`div`,{staticClass:`c-automator-template-warnings`},[t(`b`,[e._v(`Possible things to consider:`)]),e.validWarnings.length===0?t(`div`,[e._v(` (If something seems wrong with the template inputs, it will show up here) `)]):t(`div`,e._l(e.validWarnings,function(n){return t(`div`,{key:n,staticClass:`c-automator-template-entry`},[e._v(` `+e._s(n)+` `)])}),0),t(`br`),t(`br`)]),e.invalidInputCount===0?t(`button`,{staticClass:`o-primary-btn`,on:{click:e.copyAndClose}},[e._v(` `+e._s(e.isBlock?`Create custom template block`:`Copy this template to your clipboard`)+` and close this modal `)]):t(`button`,{staticClass:`o-primary-btn o-primary-btn--disabled`},[e._v(` Cannot generate template (You have `+e._s(e.quantifyInt(`invalid input`,e.invalidInputCount))+`) `)])])},[],!1,null,`2143c053`,null,null).exports,GT={name:`AwayProgressEntry`,props:{name:{type:String,required:!0},playerBefore:{type:Object,required:!0},playerAfter:{type:Object,required:!0}},data(){return{removed:!1}},computed:{item(){return AwayProgressTypes.all[this.name]},before(){return this.item.navigateTo(this.playerBefore)},after(){return this.item.navigateTo(this.playerAfter)},formatBefore(){return this.formatPseudo(this.before)},formatAfter(){return this.formatPseudo(this.after)},classObject(){return{[this.item.classObject]:!this.removed,"c-modal-away-progress__disabled":this.removed}},formattedName(){return this.item.formatName},increased(){if(this.formatAfter===this.formatBefore)return!1;let e=this.before,t=this.after;return t instanceof Decimal?t.gt(e):t>e},show(){if(!this.item.appearsInAwayModal)return!1;let e=this.increased&&this.item.option&&this.item.isUnlocked();return e&&this.$emit(`something-happened`),e},isBlackHole(){return this.item.name.includes(`BlackHole`)},formatBlackHoleActivations(){let e=this.after.sub(this.before);return quantifyInt(`time`,e)},isVeryLarge(){return this.isBlackHole?!1:Decimal.gt(this.before,Decimal.pow10(1e9))}},methods:{formatPseudo(e){if(e===void 0)return``;if(this.isVeryLarge)return format(Decimal.floor(e.max(1).log10()));if(Decimal.lt(e,1e9)){let t=new Decimal(e);return formatInt(t.floor())}return format(e,2,2)},hideEntry(){this.removed=!this.removed,this.item.option=!this.item.option}}},KT={name:`AwayProgressModal`,components:{AwayProgressEntry:D(GT,function(){var e=this,t=e._self._c;return e.show?t(`div`,{class:e.classObject,on:{click:e.hideEntry}},[e.isBlackHole?t(`span`,[e._v(` Your `),t(`b`,[e._v(e._s(e.formattedName))]),e._v(` activated `+e._s(e.formatBlackHoleActivations)+` `)]):t(`span`,[t(`b`,[e._v(e._s(e.formattedName))]),e.isVeryLarge?t(`i`,[e._v(` exponent`)]):e._e(),e._v(` increased from `+e._s(e.formatBefore)+` to `+e._s(e.formatAfter)+` `)])]):e._e()},[],!1,null,`fb6a5e8f`,null,null).exports,ModalWrapper:jw},props:{playerBefore:{type:Object,required:!0},playerAfter:{type:Object,required:!0},seconds:{type:Number,required:!0}},data(){return{somethingHappened:!1}},computed:{nothingHappened(){return Theme.current().name===`S9`},offlineStats(){return AwayProgressTypes.appearsInAwayModal},headerText(){let e=TimeSpan.fromSeconds(new Decimal(this.seconds)).toString();return this.nothingHappened||!this.somethingHappened?`While you were away for ${e}... Nothing happened.`:`While you were away for ${e}: `}},mounted(){this.$nextTick(()=>{(this.nothingHappened||!this.somethingHappened)&&SecretAchievement(36).unlock()})}},qT=D(KT,function(){var e=this,t=e._self._c;return t(`ModalWrapper`,{staticClass:`c-modal-away-progress`},[t(`div`,{staticClass:`c-modal-away-progress__header`},[e._v(` `+e._s(e.headerText)+` `)]),e.nothingHappened?e._e():t(`div`,{staticClass:`c-modal-away-progress__resources c-modal--short`},e._l(e.offlineStats,function(n){return t(`AwayProgressEntry`,{key:n,attrs:{name:n,"player-before":e.playerBefore,"player-after":e.playerAfter},on:{"something-happened":function(t){e.somethingHappened=!0}}})}),1),!e.nothingHappened&&e.somethingHappened?t(`span`,[e._v(`Note: Click an entry to hide it in the future.`)]):e._e()])},[],!1,null,`09d51f7a`,null,null).exports,JT=D({name:`BreakInfinityModal`,components:{ModalWrapperChoice:BC},computed:{message(){let e=formatPostBreak(Number.MAX_VALUE,2);return`Breaking Infinity will allow you to gain antimatter past ${e}${PlayerProgress.eternityUnlocked()?`.`:`, and allow you to read numbers past ${e}.`}
        Dimensions and Tickspeed Upgrades will scale in cost faster after ${e} antimatter.
        You will gain additional Infinity Points on Big Crunch based on antimatter produced over ${e}.\
        ${EternityMilestone.keepAutobuyers.isReached?``:`
It will also unlock Break Infinity Upgrades and max        all Normal Challenge Autobuyers.`}`.split(`
`)}},methods:{handleYesClick(){breakInfinity()}}},function(){var e=this,t=e._self._c;return t(`ModalWrapperChoice`,{attrs:{"show-cancel":!1},on:{confirm:e.handleYesClick},scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` You are Breaking Infinity `)]},proxy:!0},{key:`confirm-text`,fn:function(){return[e._v(` Break `)]},proxy:!0}])},[t(`div`,{staticClass:`c-modal-message__text`},e._l(e.message,function(n,r){return t(`span`,{key:r},[e._v(` `+e._s(n)+` `),t(`br`)])}),0)])},[],!1,null,null,null,null).exports,YT={name:`CatchupEntry`,props:{info:{type:Object,required:!0}},data(){return{focusedResourceId:-1,tabToOpen:String}},computed:{config(){return this.info.config},hasDedicatedH2p(){return this.config.openH2pEntry!==void 0}},methods:{isFocusedResource(e){if(this.focusedResourceId=e.id,this.focusedResourceId===-1)return!0;let t=GameDatabase.catchupResources[this.focusedResourceId].name;return t===e.name?this.tabToOpen=t:!0},showHowTo(){ui.view.h2pForcedTab=GameDatabase.h2p.tabs.filter(e=>e.alias===(this.hasDedicatedH2p?this.config.openH2pEntry:this.tabToOpen))[0],Modal.h2p.show()}}},XT={name:`CatchupGroup`,components:{CatchupEntry:D(YT,function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`c-modal-catchup-entry`},[t(`span`,{staticClass:`c-resource-name`,attrs:{info:e.info,"is-focused":e.isFocusedResource(e.info)},on:{click:e.showHowTo}},[t(`span`,{staticClass:`c-underline`},[e._v(e._s(e.info.name))]),e._v(`: `),t(`i`,{staticClass:`fas fa-question-circle`})]),e._v(` `+e._s(e.info.description)+` `)])},[],!1,null,`1dee61fe`,null,null).exports},props:{group:{type:Number,required:!0},name:{type:String,required:!0}},data(){return{collapsed:!0}},computed:{shownResources(){return Ax.all.filter(e=>e.requiredStage===this.group)},dropDownIconClass(){return this.collapsed?`far fa-plus-square`:`far fa-minus-square`}}},ZT={name:`CatchupModal`,components:{CatchupGroup:D(XT,function(){var e=this,t=e._self._c;return e.shownResources.length===0?e._e():t(`div`,[t(`span`,{staticClass:`o-catchup-group-title`,on:{click:function(t){e.collapsed=!e.collapsed}}},[t(`i`,{class:e.dropDownIconClass}),e._v(` `+e._s(e.name)+` `)]),e.collapsed?e._e():t(`div`,e._l(e.shownResources,function(e,n){return t(`CatchupEntry`,{key:n,staticClass:`l-left`,attrs:{info:e}})}),1)])},[],!1,null,`b72eb5c1`,null,null).exports,PrimaryButton:L},props:{diff:{type:Number,required:!0}},computed:{progressStage:()=>jx.getProgressStage(player).id,suggestedResource(){return Ox(this.progressStage).suggestedResource},timeString(){return this.diff?`It has been ${TimeSpan.fromMilliseconds(new Decimal(this.diff)).toString()} since you last loaded up the game.`:null},titleText(){return this.diff?`Content Catch-up`:`Content Summary`}},methods:{stageName(e){return Ox(e).name}}},QT=D(ZT,function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`c-modal-away-progress`},[t(`div`,{staticClass:`c-modal-away-progress__header`},[e._v(` `+e._s(e.titleText)+` `)]),t(`div`,[e._v(` `+e._s(e.timeString)+` If you need a refresher, here is a quick summary of all the content you have unlocked so far from the beginning of the game, separated into different stages of progression. These are only very brief descriptions; you can check the related How To Play entries by clicking the contents title or `),t(`i`,{staticClass:`fas fa-question-circle`}),e._v(` icons to view more detailed information. `)]),t(`div`,{staticClass:`l-catchup-group-container`,style:{height:`${Math.clamp(3*e.progressStage+5,15,35)}rem`}},e._l(e.progressStage,function(n){return t(`CatchupGroup`,{key:n,attrs:{group:n,name:e.stageName(n)}})}),1),t(`span`,{staticClass:`c-suggestion-text`},[e._v(` Based on your current progression, it will probably be useful to try to increase your `+e._s(e.suggestedResource)+`. `)]),t(`div`,{staticClass:`l-confirm-padding`},[t(`PrimaryButton`,{on:{click:e.emitClose}},[e._v(` Confirm `)])],1)])},[],!1,null,`add57b38`,null,null).exports,$T=D({name:`ChangelogModal`,components:{ModalCloseButton:IC},data(){return{entryId:0}},computed:{shownEntry:{get(){return GameDatabase.changelog[this.entryId]},set(e){this.entryId=e.id}},entries(){return GameDatabase.changelog}},methods:{setShownEntry(e){this.shownEntry=e,this.$refs.changelogBody.scrollTop=0},formatDate(e){return e.map(e=>Math.log10(e)>=2?e:`0${e}`.slice(-2)).join(`-`)}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-changelog-modal`},[t(`ModalCloseButton`,{on:{click:e.emitClose}}),e._m(0),t(`div`,{staticClass:`l-changelog-container`},[t(`div`,{staticClass:`l-changelog-search-tab`},[t(`div`,{staticClass:`l-changelog-tab-list`},e._l(e.entries,function(n){return t(`div`,{key:n.id,staticClass:`o-changelog-tab-button`,class:{"o-changelog-tab-button--selected":n===e.shownEntry},on:{click:function(t){return e.setShownEntry(n)}}},[e._v(` `+e._s(e.formatDate(n.date))+` `)])}),0)]),t(`div`,{staticClass:`l-changelog-info`},[t(`div`,{staticClass:`c-changelog-body--title`},[e._v(` `+e._s(e.formatDate(e.shownEntry.date))),e.shownEntry.name?t(`span`,[e._v(`: "`+e._s(e.shownEntry.name)+`" update`)]):e._e()]),t(`div`,{ref:`changelogBody`,staticClass:`l-changelog-body c-changelog-body`,domProps:{innerHTML:e._s(e.shownEntry.info)}})])])],1)},[function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-changelog-header`},[t(`div`,{staticClass:`c-changelog-title`},[e._v(` Changelog `)])])}],!1,null,`fe921801`,null,null).exports,eE=D({name:`ChangeNameModal`,components:{ModalWrapperChoice:BC},data(){return{input:``,actualName:``}},created(){this.input=player.speedrun.name,this.actualName=Speedrun.generateName(this.input)},mounted(){this.$refs.input.select()},methods:{updateName(){this.actualName=Speedrun.generateName(this.input)},confirmChange(){player.speedrun.name=this.actualName,this.emitClose()}}},function(){var e=this,t=e._self._c;return t(`ModalWrapperChoice`,{on:{confirm:e.confirmChange},scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` Change your Speedrun Player Name `)]},proxy:!0},{key:`confirm-text`,fn:function(){return[e._v(` Change Name `)]},proxy:!0}])},[t(`input`,{directives:[{name:`model`,rawName:`v-model`,value:e.input,expression:`input`}],ref:`input`,staticClass:`c-modal-input c-modal-import__input`,attrs:{type:`text`},domProps:{value:e.input},on:{keyup:[e.updateName,function(t){return!t.type.indexOf(`key`)&&e._k(t.keyCode,`enter`,13,t.key,`Enter`)?null:e.confirmChange.apply(null,arguments)},function(t){return!t.type.indexOf(`key`)&&e._k(t.keyCode,`esc`,27,t.key,[`Esc`,`Escape`])?null:e.emitClose.apply(null,arguments)}],input:function(t){t.target.composing||(e.input=t.target.value)}}}),t(`i`,[e._v(` This can no longer be changed once the timer starts, and there is a limit of `+e._s(e.formatInt(40))+` characters. `)]),t(`div`,[e._v(` Your new name will be `+e._s(e.actualName)+` `)])])},[],!1,null,null,null,null).exports,tE=D({name:`ClearConstantsModal`,components:{ModalWrapperChoice:BC},data(){return{constantCount:0}},methods:{update(){this.constantCount=Object.keys(player.reality.automator.constants).length,this.constantCount===0&&this.emitClose()},deleteConstants(){player.reality.automator.constants={},player.reality.automator.constantSortOrder=[]}}},function(){var e=this,t=e._self._c;return t(`ModalWrapperChoice`,{on:{confirm:e.deleteConstants},scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` Deleting Automator Constants `)]},proxy:!0},{key:`confirm-text`,fn:function(){return[e._v(` Delete All `)]},proxy:!0}])},[t(`div`,{staticClass:`c-modal-message__text`},[e._v(` Are you sure you wish to delete all of your currently-defined automator constants? `),t(`br`),t(`span`,{staticClass:`l-lost-text`},[e._v(` This will irreversibly delete `+e._s(e.quantify(`constant`,e.constantCount))+`! `)])])])},[],!1,null,`9838020f`,null,null).exports,nE={name:`CreditsDisplay`,props:{isModal:{type:Boolean,required:!1,default:!1}},computed:{people(){return GameDatabase.credits.people},roles(){return GameDatabase.credits.roles},isS12EndDisplay(){return this.$viewModel.theme===`S12`&&!this.isModal}},methods:{relevantPeople(e){return this.people.filter(t=>typeof t.roles==`number`?t.roles===e:t.roles.includes(e)).sort((e,t)=>e.name.localeCompare(t.name))}}},rE=D(nE,function(){var e=this,t=e._self._c;return t(`div`,{class:{"c-credits-s12-end":e.isS12EndDisplay}},[e.isModal?e._e():t(`h1`,{staticClass:`c-credits-header`},[e._v(` Antimatter Dimensions `)]),e._l(e.roles.count,function(n){return t(`div`,{key:n},[t(`h2`,{staticClass:`c-credits-section`},[e._v(` `+e._s(e.pluralize(e.roles[n],e.relevantPeople(n).length))+` `)]),t(`div`,{class:{"l-credits--bulk":e.relevantPeople(n).length>10}},e._l(e.relevantPeople(n),function(n){return t(`div`,{key:n.name,staticClass:`c-credit-entry`},[e._v(` `+e._s(n.name)+` `),n.name2?t(`span`,[e._v(` (`+e._s(n.name2)+`) `)]):e._e()])}),0)])}),t(`br`),t(`br`),t(`br`),t(`br`),t(`br`),t(`br`),t(`br`),t(`br`),t(`br`),t(`h1`,{staticClass:`c-credits-header`},[e._v(` Thank you so much for playing! `)])],2)},[],!1,null,`145034e9`,null,null).exports,iE=D({name:`CreditsModal`,components:{CreditsDisplay:rE,ModalWrapper:jw}},function(){var e=this,t=e._self._c;return t(`ModalWrapper`,{staticClass:`l-credits-modal c-credits-modal`,scopedSlots:e._u([{key:`header`,fn:function(){return[t(`h1`,{staticClass:`c-game-header__antimatter`},[e._v(` Antimatter Dimensions `)])]},proxy:!0}])},[t(`div`,{staticClass:`c-credits-modal__body`},[t(`CreditsDisplay`,{attrs:{"is-modal":!0}})],1)])},[],!1,null,`c76340a8`,null,null).exports,aE={name:`DeleteAutomatorScriptModal`,components:{ModalWrapperChoice:BC},props:{scriptID:{type:[String,Number],required:!0}},methods:{handleYesClick(){let e=this.scriptID,t=AutomatorBackend.state.topLevelScript;AutomatorBackend.deleteScript(e);let n=Object.values(player.reality.automator.scripts).map(e=>({id:e.id,name:e.name}));AutomatorBackend.isOn&&t!==e?player.reality.automator.state.editorScript=t:player.reality.automator.state.editorScript=n[0].id,AutomatorData.clearUndoData(),EventHub.dispatch(GAME_EVENT.AUTOMATOR_SAVE_CHANGED)}}},oE=D(aE,function(){var e=this,t=e._self._c;return t(`ModalWrapperChoice`,{on:{confirm:e.handleYesClick},scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` Delete this script `)]},proxy:!0},{key:`confirm-text`,fn:function(){return[e._v(` Delete `)]},proxy:!0}])},[t(`div`,{staticClass:`c-modal-message__text`},[e._v(` Please confirm your desire to delete this Automator script. `)])])},[],!1,null,null,null,null).exports,sE=D({name:`EnslavedHintsModal`,components:{ModalWrapper:jw,PrimaryButton:L},data(){return{currentStored:new Decimal(0),nextHintCost:new Decimal(0),canGetHint:!1,shownEntries:[],realityHintsLeft:0,glyphHintsLeft:0,hints:0}},computed:{hintCost(){return`${quantify(`year`,TimeSpan.fromMilliseconds(this.nextHintCost).totalYears,2)}`},formattedStored(){return`${quantify(`year`,TimeSpan.fromMilliseconds(this.currentStored).totalYears,2)}`},hasProgress(e){return this.progressEntries.some(t=>t.id===e)},timeEstimate(){if(this.currentStore.gte(this.nextHintCost))return``;let e=(Enslaved.isStoringGameTime?Enslaved.currentBlackHoleStoreAmountPerMs:getGameSpeedupFactor()).mul(1e3),t=this.currentStored.div(e),n=this.nextHintCost.div(e),r=TimeSpan.fromYears(new Decimal(1e40)).totalMilliseconds.sub(this.currentStored).div(e);if(TimeSpan.fromSeconds(r).totalDays.gt(this.hints))return`${TimeSpan.fromSeconds(r).toStringShort(!0)}`;let i=Decimal.pow(3,1/86400),a=Decimal.ln(i).mul(Decimal.pow(i,t)).mul(n),o=decimalProductLog(a).div(Decimal.ln(i).sub(t));return`${TimeSpan.fromSeconds(o).toStringShort(!0)}`}},methods:{update(){this.currentStored.copyFrom(player.celestials.enslaved.stored),this.nextHintCost=Enslaved.nextHintCost,this.canGetHint=this.currentStored.gte(this.nextHintCost),this.shownEntries=[],this.realityHintsLeft=EnslavedProgress.all.length;for(let e of EnslavedProgress.all)e.hasHint&&(this.shownEntries.push([!1,e]),this.realityHintsLeft--);let e=player.celestials.enslaved.glyphHintsGiven;for(let t=0;t<e;t++)this.shownEntries.push([!0,GameDatabase.celestials.enslaved.glyphHints[t]]);this.glyphHintsLeft=GameDatabase.celestials.enslaved.glyphHints.length-e,this.hints=Enslaved.hintCostIncreases},giveRealityHint(e){e<=0||!Enslaved.spendTimeForHint()||EnslavedProgress.all.filter(e=>!e.hasHint).randomElement().unlock()},giveGlyphHint(e){e<=0||!Enslaved.spendTimeForHint()||player.celestials.enslaved.glyphHintsGiven++}}},function(){var e=this,t=e._self._c;return t(`ModalWrapper`,{scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` Cracks in The Nameless Ones' Reality `)]},proxy:!0}])},[t(`div`,{staticClass:`c-enslaved-hint-modal c-modal--short`},[t(`div`,[e._v(` This Reality seems to be resisting your efforts to complete it. So far you have done the following: `)]),t(`br`),e._l(e.shownEntries,function(n,r){return t(`div`,{key:r},[n[0]?t(`div`,[t(`i`,{staticClass:`fa-solid fa-shapes`}),e._v(` `),t(`b`,[e._v(`Glyph hint:`)]),t(`br`),e._v(` `+e._s(n[1])+` `)]):t(`div`,[n[1].hasHint&&!n[1].hasProgress?t(`span`,[t(`i`,{staticClass:`c-icon-wrapper fas fa-question-circle`}),t(`b`,[e._v(`You have not figured out what this hint means yet.`)])]):t(`span`,[t(`i`,{staticClass:`c-icon-wrapper fa-solid fa-house-crack`}),t(`b`,[e._v(`You have exposed a crack in the Reality:`)])]),t(`br`),e._v(` - `+e._s(n[1].hintInfo)+` `),t(`br`),e._v(` - `+e._s(n[1].hasProgress?n[1].completedInfo:`?????`)+` `)]),t(`br`)])}),e.realityHintsLeft+e.glyphHintsLeft>0?t(`div`,[e._v(` You can spend some time looking for some more cracks in the Reality, but every hint you spend Stored Time on will increase the Stored Time needed for the next by a factor of `+e._s(e.formatInt(3))+`. This cost bump will gradually go away over `+e._s(e.formatInt(24))+` hours and figuring out what the hint means will immediately divide the cost by `+e._s(e.formatInt(2))+`. The cost can't be reduced below `+e._s(e.format(1e40))+` years. `),t(`br`),t(`br`),e._v(` The next hint will cost `+e._s(e.hintCost)+` of Stored Time. You currently have `+e._s(e.formattedStored)+`. `),e.currentStored.lt(e.nextHintCost)?t(`span`,[e._v(` You will reach this if you charge your Black Hole for `+e._s(e.timeEstimate)+`. `)]):e._e(),t(`br`),t(`br`),t(`PrimaryButton`,{staticClass:`l-enslaved-hint-button`,attrs:{enabled:e.realityHintsLeft>0&&e.canGetHint},on:{click:function(t){return e.giveRealityHint(e.realityHintsLeft)}}},[e._v(` Get a hint about the Reality itself (`+e._s(e.formatInt(e.realityHintsLeft))+` left) `)]),t(`br`),t(`PrimaryButton`,{staticClass:`l-enslaved-hint-button`,attrs:{enabled:e.glyphHintsLeft>0&&e.canGetHint},on:{click:function(t){return e.giveGlyphHint(e.glyphHintsLeft)}}},[e._v(` Get a hint on what Glyphs to use (`+e._s(e.formatInt(e.glyphHintsLeft))+` left) `)])],1):t(`div`,[t(`b`,[e._v(`There are no more hints left!`)])])],2)])},[],!1,null,`f5d7bf68`,null,null).exports,cE={music:{adjective:{high:`Melodic`,mid:`Chordal`,low:`Tuned`},noun:`Music`}},lE={...j};for(let e in j)j.glyphTypes.includes(e)||delete lE[e];for(let e in lE){let t=j[e];cE[t.id]={adjective:t.adjective??{high:``,mid:``,low:``},noun:t.noun??``}}var uE={name:`GlyphSetName`,props:{glyphSet:{type:Array,required:!0},forceColor:{type:Boolean,required:!1,default:!1}},data(){let e=[{type:`music`,perc:0,adjOrder:3}];for(let t in lE){let n=j[t];e.push({type:n.id,perc:0,adjOrder:n.adjNounImportance??777})}return{isColored:!0,glyphTypeList:e,sortedGlyphs:[],slotCount:0}},computed:{isDoomed:()=>Pelle.isDoomed,setName(){if(this.sortGlyphList(),this.sortedGlyphs.length===0)return`Void`;if(this.sortedGlyphs.length===1)return this.singletonName;let e,t;this.sortedGlyphs.some(e=>e.adjOrder===1)?(e=this.sortedGlyphs.filter(e=>e.adjOrder!==1),t=this.basicTypePhrase):(e=[...this.sortedGlyphs],t=this.getNoun(e.pop()));let n=[];for(let t of e)n.push(this.getAdjective(t));return`${n.join(` `)} ${t}`},basicTypePhrase(){let e=this.sortedGlyphs.filter(e=>j[e.type].isBasic&&e.perc!==0);switch(e.length){case 1:return cE[e[0].type].noun;case 2:return e[0].perc===e[1].perc?[this.getAdjective(e[0]),this.getAdjective(e[1]),`Mixture`].join(` `):`${this.getAdjective(e[1])} ${this.getNoun(e[0])}`;case 3:return e[0].perc>e[1].perc?[this.getAdjective(e[1]),this.getAdjective(e[2]),this.getNoun(e[0])].join(` `):e[0].perc===e[2].perc?`Mixed Irregularity`:[this.getAdjective(e[0]),this.getAdjective(e[1]),this.getAdjective(e[2]),`Irregularity`].join(` `);case 4:return e[0].perc===e[1].perc?`Irregular Jumble`:`${this.getAdjective(e[0])} Jumble`;case 5:return`Royal Flush`;default:throw Error(`Unexpected glyph set configuration in GlyphSetName`)}},singletonName(){if(this.sortedGlyphs[0].type===`effarig`)return cE.effarig.noun[this.getEffarigProp()];let e={...j};for(let t in j)j.glyphTypes.includes(t)?j[t].maxEquipped!==1&&delete e[t]:delete e[t];let t=Object.keys(e);for(let e of t)if(this.sortedGlyphs[0].type===e)return cE[e].noun;let n=cE[this.sortedGlyphs[0].type].noun,r=this.sortedGlyphs[0].perc;return this.isDoomed?`Doomed ${n}`:r===100?`Full ${n}`:r>=75?`Strengthened ${n}`:r>=40?`Partial ${n}`:`Weak ${n}`},mainGlyphName(){if(this.sortedGlyphs.length===0)return{id:`none`,currentColor:{border:`#888888`}};if(this.calculateGlyphPercent(`cursed`))return CosmeticGlyphTypes.cursed;if(this.calculateGlyphPercent(`companion`))return CosmeticGlyphTypes.companion;if(this.calculateGlyphPercent(`reality`))return CosmeticGlyphTypes.reality;if(this.calculateGlyphPercent(`music`)>=50)return CosmeticGlyphTypes.music;let e=this.sortedGlyphs.filter(e=>e.adjOrder===1)[0];return e?.perc>=50?CosmeticGlyphTypes[e.type]:this.calculateGlyphPercent(`effarig`)?CosmeticGlyphTypes.effarig:CosmeticGlyphTypes[e.type]},textColor(){return this.isDoomed&&this.glyphSet.length===1?`var(--color-pelle--base)`:this.mainGlyphName.id===`cursed`?`var(--color-celestials)`:this.mainGlyphName.id===`music`?CosmeticGlyphTypes.music.currentColor.border:this.sortedGlyphs.length>=3&&this.sortedGlyphs[0].perc<=30?`#C46200`:this.mainGlyphName.currentColor.border},textStyle(){return this.$recompute(`mainGlyphName`),!this.isColored&&!this.forceColor?{}:{color:this.textColor,"text-shadow":`-1px 1px 1px var(--color-text-base), 1px 1px 1px var(--color-text-base),
                        -1px -1px 1px var(--color-text-base), 1px -1px 1px var(--color-text-base),
                        0 0 3px ${this.textColor}`,animation:this.mainGlyphName.id===`reality`?`a-reality-glyph-description-cycle 10s infinite`:void 0}}},created(){this.on$(GAME_EVENT.GLYPHS_CHANGED,this.sortGlyphList),this.sortGlyphList()},methods:{update(){this.isColored=player.options.glyphTextColors,this.slotCount=Math.max(Glyphs.activeSlotCount,this.glyphSet.length)},getEffarigProp(){let e=this.glyphSet.some(e=>e.effects.includes(`effarigrm`)),t=this.glyphSet.some(e=>e.effects.includes(`effariglevel`));return e&&t?`both`:e?`rm`:t?`glyph`:`none`},calculateGlyphPercent(e){let t=this.slotCount?100/this.slotCount:0;if(e===`music`)return this.glyphSet.filter(e=>Glyphs.isMusicGlyph(e)).length*t;if(e===void 0)return 0;let n=e===`music`?1:j[e].maxEquipped??this.slotCount??1;return this.glyphSet.filter(t=>t.type===e).length*t*(this.slotCount/n??0)},sortGlyphList(){this.$recompute(`textColor`),this.glyphTypeList.forEach(e=>e.perc=this.calculateGlyphPercent(e.type)),this.sortedGlyphs=this.glyphTypeList.filter(e=>e.perc!==0);let e=e=>100*e.adjOrder+e.perc+e.type.codePointAt(0)/1e3;this.sortedGlyphs.sort((t,n)=>e(n)-e(t))},getAdjective(e){if(e.type===`effarig`)return cE.effarig.adjective[this.getEffarigProp()];let t=e=>e>=60?`high`:e>=40?`mid`:`low`,n=cE[e.type].adjective;return typeof n==`string`?n:n[t(e.perc)]},getNoun(e){return e.type===`effarig`?cE.effarig.noun[this.getEffarigProp()]:cE[e.type].noun}}},dE=D(uE,function(){var e=this,t=e._self._c;return t(`div`,[t(`span`,{staticClass:`c-current-glyph-effects__header`,style:e.textStyle},[e._v(` `+e._s(e.setName)+` `)])])},[],!1,null,null,null,null).exports,fE={name:`GlyphSetPreview`,components:{GlyphComponent:Tw,GlyphSetName:dE},props:{text:{type:String,required:!1,default:``},textHidden:{type:Boolean,required:!1,default:!1},glyphs:{type:Array,required:!0},ignoreModifiedLevel:{type:Boolean,required:!1,default:!1},flipTooltip:{type:Boolean,required:!1,default:!1},isInModal:{type:Boolean,required:!1,default:!1},showName:{type:Boolean,required:!1,default:!0},forceNameColor:{type:Boolean,required:!1,default:!0},showSacrifice:{type:Boolean,required:!1,default:!1},noneText:{type:String,required:!1,default:`(No Glyphs equipped)`},sort:{type:Boolean,required:!1,default:!0}},data(){return{realityGlyphBoost:new Decimal}},computed:{orderedGlyphs(){if(!this.sort)return this.glyphs;let e=j.glyphTypes,t=Glyphs.copyForRecords(this.glyphs);return t.sort((t,n)=>e.indexOf(t.type)-e.indexOf(n.type)),t}},watch:{glyphs(){this.$recompute(`orderedGlyphs`)}},methods:{update(){let e=this.glyphs.filter(e=>e?.type===`reality`);e.length>0?this.realityGlyphBoost=e.reduce((e,t)=>e.add(GlyphEffects.realityglyphlevel.effect(t.level))):this.realityGlyphBoost=new Decimal},showModal(){this.isInModal||Modal.glyphShowcasePanel.show({name:this.text,glyphSet:this.glyphs,closeEvent:GAME_EVENT.GLYPH_SET_SAVE_CHANGE,displaySacrifice:this.showSacrifice})},glyphIds(){return this.glyphs.map(e=>e.id).reduce(Number.sumReducer)}}},pE=D(fE,function(){var e=this,t=e._self._c;return t(`div`,[e.text&&!e.textHidden?t(`span`,[e._v(` `+e._s(e.text)+` `),t(`br`)]):e._e(),e.glyphs.length===0?t(`span`,[e.showName?t(`GlyphSetName`,{attrs:{"glyph-set":e.glyphs,"force-color":e.forceNameColor}}):e._e(),e._v(` `+e._s(e.noneText)+` `)],1):t(`span`,{class:{"l-glyph-set-preview":!e.isInModal},on:{click:e.showModal}},[e.showName?t(`GlyphSetName`,{key:e.glyphIds(),attrs:{"glyph-set":e.glyphs,"force-color":e.forceNameColor}}):e._e(),e._l(e.orderedGlyphs,function(n,r){return t(`GlyphComponent`,{key:r,staticClass:`l-preview`,attrs:{glyph:n,"show-sacrifice":e.showSacrifice,draggable:!1,circular:!0,"ignore-modified-level":e.ignoreModifiedLevel,"reality-glyph-boost":e.realityGlyphBoost,"flip-tooltip":e.flipTooltip,"is-in-modal":e.isInModal,size:`3rem`,"text-proportion":.5,"glow-blur":`0.2rem`,"glow-spread":`0.1rem`}})})],2)])},[],!1,null,`77f8c9e8`,null,null).exports,mE={name:`GlyphSetSaveDeleteModal`,components:{ModalWrapperChoice:BC,GlyphSetPreview:pE},props:{glyphSetId:{type:Number,required:!0}},data(){return{glyphSet:[]}},methods:{update(){this.glyphSet=structuredClone(Glyphs.copyForRecords(player.reality.glyphs.sets[this.glyphSetId].glyphs))},handleYesClick(){player.reality.glyphs.sets[this.glyphSetId].glyphs=[],EventHub.dispatch(GAME_EVENT.GLYPH_SET_SAVE_CHANGE)}}},hE=D(mE,function(){var e=this,t=e._self._c;return t(`ModalWrapperChoice`,{attrs:{option:`deleteGlyphSetSave`},on:{confirm:e.handleYesClick},scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` Delete this Glyph Set `)]},proxy:!0},{key:`confirm-text`,fn:function(){return[e._v(` Delete `)]},proxy:!0}])},[t(`div`,{staticClass:`c-modal-message__text`},[e._v(` Please confirm your desire to delete this Glyph Set: `),t(`GlyphSetPreview`,{attrs:{"is-in-modal":!0,glyphs:e.glyphSet}}),e._v(` This will not affect your actual Glyphs, only the saved preset. `)],1)])},[],!1,null,null,null,null).exports,gE={name:`GlyphShowcasePanelEntry`,components:{GlyphComponent:Tw},props:{idx:{type:Number,required:!0},glyph:{type:Object,required:!0},showLevel:{type:Boolean,required:!0},realityGlyphBoost:{type:Decimal,default:new Decimal},maxGlyphEffects:{type:Number,required:!0},showSacrifice:{type:Boolean,required:!0}},data(){return{canSacrifice:!1}},computed:{type(){return this.glyph.type},typeCapitalized(){return this.type.capitalize()},level(){return this.glyph.level},effectiveLevel(){return getAdjustedGlyphLevel(this.glyph,this.realityGlyphBoost,!0)},isLevelCapped(){return this.effectiveLevel&&this.effectiveLevel.lt(this.level)},isLevelBoosted(){return this.effectiveLevel&&this.effectiveLevel.gt(this.level)},levelText(){if(this.type===`companion`)return``;let e=this.isLevelCapped?`<i class='fas fa-sort-down'></i>`:this.isLevelBoosted?`<i class='fas fa-sort-up'></i>`:``;return`<span style="color: ${this.isLevelCapped?`#ff4444`:this.isLevelBoosted?`#44FF44`:`var(--color-text);`}">
                  ${e}${formatInt(this.effectiveLevel)}${e}
                  </span>`},typeStyle(){return{color:GlyphAppearanceHandler.getBorderColor(this.type),"font-weight":`bold`,"text-shadow":this.type===`cursed`?`0.05rem 0.05rem var(--color-text)`:void 0,animation:this.type===`reality`?`a-reality-glyph-description-cycle 10s infinite`:void 0}},rarityStyle(){return{color:CosmeticGlyphTypes[this.glyph.type].ignoreRarityColor?GlyphAppearanceHandler.getBorderColor(this.type):getRarity(this.glyph.strength)[Theme.current().isDark()?`darkColor`:`lightColor`],"font-weight":`bold`}},effectStyle(){return{"font-size":`${this.type===`effarig`?1:1.2}rem`,height:this.glyphEffectListHeight(this.maxGlyphEffects)}},glyphEffectList(){let e=GlyphEffects;return getGlyphEffectValuesFromArray(this.glyph.effects,this.effectiveLevel,this.glyph.strength,this.type).map(t=>this.formatEffectString(e[t.id],t.value)).filter(e=>e!==`undefined`)},rarityPercent(){return this.glyph.type===`companion`||this.glyph.type===`cursed`?``:formatRarity(strengthToRarity(this.glyph.strength))}},methods:{update(){this.canSacrifice=GlyphSacrificeHandler.canSacrifice},glyphEffectListHeight(e){return[`3rem`,`6rem`,`8rem`,`11rem`][e-1]},formatEffectString(e,t){let n=e.shortDesc,r=e.formatSingleEffect?e.formatSingleEffect(t):e.formatEffect(t),i=e.conversion?e.formatSecondaryEffect(e.conversion(t)):``;return{text:`${n}`.replace(`{value}`,r).replace(`{value2}`,i),isPelleDisabled:e.isDisabledByDoomed}},clickGlyph(e){Glyphs.isMusicGlyph(e)&&new Audio(`audio/note${GlyphInfo.glyphTypes.indexOf(e.type)+1}.mp3`).play()}}},_E=D(gE,function(){var e=this,t=e._self._c;return t(`div`,[t(`div`,{staticClass:`c-glyph-choice-icon`},[t(`span`,{style:e.typeStyle},[e._v(e._s(e.typeCapitalized))]),e.showLevel?t(`div`,{domProps:{innerHTML:e._s(e.levelText)}}):e._e(),t(`GlyphComponent`,{key:e.idx,staticClass:`c-glyph-component-container`,attrs:{glyph:e.glyph,"show-sacrifice":e.showSacrifice&&e.canSacrifice,draggable:!1,circular:!0,"ignore-modified-level":!1,"reality-glyph-boost":e.realityGlyphBoost,"is-in-modal":!0,size:`4rem`,"text-proportion":.5,"glow-blur":`0.4rem`,"glow-spread":`0.1rem`},on:{clicked:function(t){return e.clickGlyph(e.glyph)}}}),t(`div`,{style:e.rarityStyle},[e._v(` `+e._s(e.rarityPercent)+` `)])],1),t(`div`,{staticClass:`c-glyph-choice-effect-list`,style:e.effectStyle},e._l(e.glyphEffectList,function(n,r){return t(`div`,{key:r,class:{"o-pelle-disabled":n.isPelleDisabled}},[e._v(` `+e._s(n.text)+` `)])}),0)])},[],!1,null,`55fad80a`,null,null).exports,vE={name:`GlyphShowcasePanelModal`,components:{GlyphSetName:dE,ModalWrapper:jw,GlyphShowcasePanelEntry:_E},props:{name:{type:String,required:!0},glyphSet:{type:Array,required:!0},isGlyphSelection:{type:Boolean,default:!1},showSetName:{type:Boolean,default:!0},displaySacrifice:{type:Boolean,default:!0}},data(){return{glyphs:[],gainedLevel:new Decimal,canSacrifice:!1,realityGlyphBoost:new Decimal}},computed:{maxGlyphEffects(){let e=1;for(let t of this.glyphs)e=Math.max(getGlyphEffectsFromArray(t.effects).length,e);return e},containerClass(){return{"c-glyph-choice-container":!0,"c-glyph-choice-container-single":this.glyphs.length===1}}},methods:{update(){this.glyphs=this.isGlyphSelection?GlyphSelection.glyphList(GlyphSelection.choiceCount,gainedGlyphLevel(),{isChoosingGlyph:!1}):this.glyphSet.filter(e=>e),this.sortGlyphs(),this.gainedLevel=gainedGlyphLevel().actualLevel;let e=this.glyphs.filter(e=>e.type===`reality`)[0];this.realityGlyphBoost=e?GlyphEffects.realityglyphlevel.effect(e.level):new Decimal},sortGlyphs(){let e=[`reality`,`effarig`,`power`,`infinity`,`replication`,`time`,`dilation`,`cursed`,`companion`];this.glyphs.sort((t,n)=>e.indexOf(t.type)-e.indexOf(n.type))}}},yE=D(vE,function(){var e=this,t=e._self._c;return t(`ModalWrapper`,{scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` `+e._s(e.name)+` `)]},proxy:!0}])},[e.isGlyphSelection?t(`div`,[e._v(` Projected Glyph Level: `+e._s(e.formatInt(e.gainedLevel))+` `)]):e._e(),e.showSetName?t(`GlyphSetName`,{attrs:{"glyph-set":e.glyphs,"force-color":!0}}):e._e(),t(`div`,{class:e.containerClass},e._l(e.glyphs,function(n,r){return t(`GlyphShowcasePanelEntry`,{key:r,staticClass:`c-glyph-choice-single-glyph`,attrs:{idx:r,glyph:n,"show-level":!e.isGlyphSelection,"reality-glyph-boost":e.realityGlyphBoost,"max-glyph-effects":e.maxGlyphEffects,"show-sacrifice":e.displaySacrifice}})}),1)],1)},[],!1,null,`4867dcb6`,null,null).exports,bE=D({name:`H2PModal`,components:{ModalCloseButton:IC},data(){return{tabId:0,searchValue:``}},computed:{activeTab:{get(){return GameDatabase.h2p.tabs[this.tabId]},set(e){this.tabId=e.id}},matchingTabs(){return GameDatabase.h2p.search(this.searchValue).filter(e=>e.tab.isUnlocked())},topThreshold(){return Math.min(this.matchingTabs[Math.min(this.matchingTabs.length-1,4)].relevance+.01,.5)}},created(){let e=GameDatabase.h2p.tabs.filter(e=>e.isUnlocked()),t=this.$viewModel.tab,n=`${t}/${this.$viewModel.subtab}`,r=e.find(e=>e.tab===n||e.tab===t);this.activeTab=ui.view.h2pForcedTab||r||e[0],ui.view.h2pForcedTab=void 0,Tutorial.emphasizeH2P()&&(this.activeTab=GameDatabase.h2p.tabs[0])},mounted(){this.$refs.input.select()},methods:{setActiveTab(e){this.activeTab=e,document.querySelector(`#h2p-body`).scrollTop=0},isFirstIrrelevant(e){let t=this.matchingTabs,n=t[e],r=t[e-1];return e>0&&n.relevance>=this.topThreshold&&r.relevance<this.topThreshold}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-h2p-modal`},[t(`ModalCloseButton`,{on:{click:e.emitClose}}),e._m(0),t(`div`,{staticClass:`l-h2p-container`},[t(`div`,{staticClass:`l-h2p-search-tab`},[t(`input`,{directives:[{name:`model`,rawName:`v-model`,value:e.searchValue,expression:`searchValue`}],ref:`input`,staticClass:`c-h2p-search-bar`,attrs:{placeholder:`Type to search...`},domProps:{value:e.searchValue},on:{keyup:function(t){return!t.type.indexOf(`key`)&&e._k(t.keyCode,`esc`,27,t.key,[`Esc`,`Escape`])?null:e.emitClose.apply(null,arguments)},input:function(t){t.target.composing||(e.searchValue=t.target.value)}}}),t(`div`,{staticClass:`l-h2p-tab-list`},e._l(e.matchingTabs,function(n,r){return t(`div`,{key:n.tab.name,staticClass:`o-h2p-tab-button`,class:{"o-h2p-tab-button--selected":n.tab===e.activeTab,"o-h2p-tab-button--relevant":n.relevance<e.topThreshold,"o-h2p-tab-button--first-irrelevant":e.isFirstIrrelevant(r)},on:{click:function(t){return e.setActiveTab(n.tab)}}},[e._v(` `+e._s(n.tab.alias)+` `)])}),0)]),t(`div`,{staticClass:`l-h2p-info`},[t(`div`,{staticClass:`c-h2p-body--title`},[e._v(` `+e._s(e.activeTab.name)+` `)]),t(`div`,{staticClass:`l-h2p-body c-h2p-body`,attrs:{id:`h2p-body`},domProps:{innerHTML:e._s(e.activeTab.info())}})])])],1)},[function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-h2p-header`},[t(`div`,{staticClass:`c-h2p-title`},[e._v(` How To Play `)])])}],!1,null,`ff8bee78`,null,null).exports,xE=D({name:`ImportAutomatorDataModal`,components:{ModalWrapperChoice:BC},data(){return{input:``,isValid:!1,hasExtraData:!1,scriptName:``,lineCount:0,scriptContent:``,hasErrors:!1,importedPresets:[],importedConstants:[],ignorePresets:!1,ignoreConstants:!1}},computed:{hasPresets(){return(this.importedPresets?.length??0)!==0},hasConstants(){return(this.importedConstants?.length??0)!==0},isImportingExtraData(){let e=this.willOverwriteConstant||this.constantCountAfterImport>this.currentConstants,t=this.importedPresets?!this.ignorePresets:!1,n=this.importedConstants?!this.ignoreConstants&&e:!1;return this.isValid&&this.hasExtraData&&(t||n)},currentPresets:()=>player.timestudy.presets,currentConstants:()=>Object.keys(player.reality.automator.constants),maxConstantCount(){return AutomatorData.MAX_ALLOWED_CONSTANT_COUNT},overwrittenPresetCount(){let e=0;for(let t of this.importedPresets){let n=this.currentPresets[t.id];!(n.name===``&&n.studies===``)&&(n.name!==t.name||n.studies!==t.studies)&&e++}return e},willOverwriteConstant(){if(!this.hasExtraData)return!1;let e=new Set;for(let t of this.currentConstants)e.add(t);for(let t of this.importedConstants)if(e.has(t.key)&&player.reality.automator.constants[t.key]!==t.value)return!0;return!1},constantCountAfterImport(){if(!this.hasExtraData)return this.currentConstants.length;let e=new Set;for(let t of this.currentConstants)e.add(t);for(let t of this.importedConstants)e.add(t.key);return e.size},extraConstants(){return this.constantCountAfterImport-this.maxConstantCount},presetButtonText(){return this.ignorePresets?`Will Ignore Presets`:`Will Import Presets`},constantButtonText(){return this.ignoreConstants?`Will Ignore Constants`:`Will Import Constants`}},mounted(){this.$refs.input.select()},methods:{update(){let e=AutomatorBackend.parseFullScriptData(this.input);if(e?this.hasExtraData=!0:(e=AutomatorBackend.parseScriptContents(this.input),this.hasExtraData=!1),!e){this.isValid=!1;return}this.scriptName=e.name,this.scriptContent=e.content,this.importedPresets=e.presets,this.importedConstants=e.constants,this.lineCount=this.scriptContent.split(`
`).length,this.hasErrors=_(this.scriptContent),this.isValid=!0},importSave(){this.isValid&&(this.hasExtraData?AutomatorBackend.importFullScriptData(this.input,{presets:this.ignorePresets,constants:this.ignoreConstants}):AutomatorBackend.importScriptContents(this.input),this.emitClose())}}},function(){var e=this,t=e._self._c;return t(`ModalWrapperChoice`,{attrs:{"show-cancel":!e.isValid,"show-confirm":e.isValid},on:{confirm:e.importSave},scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` Import Automator Script Data `)]},proxy:!0},{key:`confirm-text`,fn:function(){return[e._v(` Import `)]},proxy:!0}])},[e._v(` This will create a new Automator script at the end of your list. `),e.isImportingExtraData?t(`span`,[e._v(`This will also import additional data related to the script.`)]):e._e(),t(`input`,{directives:[{name:`model`,rawName:`v-model`,value:e.input,expression:`input`}],ref:`input`,staticClass:`c-modal-input c-modal-import__input`,attrs:{type:`text`},domProps:{value:e.input},on:{keyup:[function(t){return!t.type.indexOf(`key`)&&e._k(t.keyCode,`enter`,13,t.key,`Enter`)?null:e.importSave.apply(null,arguments)},function(t){return!t.type.indexOf(`key`)&&e._k(t.keyCode,`esc`,27,t.key,[`Esc`,`Escape`])?null:e.emitClose.apply(null,arguments)}],input:function(t){t.target.composing||(e.input=t.target.value)}}}),e.isValid?t(`div`,[e._v(` Script name: `+e._s(e.scriptName)+` `),t(`br`),e._v(` Line count: `+e._s(e.lineCount)+` `),e.hasPresets?t(`div`,[t(`br`),e._v(` Study Presets: `),e._l(e.importedPresets,function(n,r){return t(`span`,{key:r,staticClass:`c-import-data-name`},[n.name?t(`span`,[e._v(`"`+e._s(n.name)+`" (slot `+e._s(n.id+1)+`)`)]):t(`span`,[e._v(`Preset slot #`+e._s(n.id+1))])])}),!e.ignorePresets&&e.overwrittenPresetCount>0?t(`div`,{staticClass:`l-has-errors`},[e._v(` `+e._s(e.formatInt(e.overwrittenPresetCount))+` of your existing presets will be overwritten by imported presets! `)]):e._e(),t(`br`),t(`button`,{staticClass:`o-primary-btn`,on:{click:function(t){e.ignorePresets=!e.ignorePresets}}},[e._v(` `+e._s(e.presetButtonText)+` `)])],2):e._e(),e.hasConstants?t(`div`,[t(`br`),e._v(` Constants: `),e._l(e.importedConstants,function(n,r){return t(`span`,{key:r+10,staticClass:`c-import-data-name`},[e._v(` "`+e._s(n.key)+`" `)])}),!e.ignoreConstants&&(e.willOverwriteConstant||e.extraConstants>0)?t(`div`,{staticClass:`l-has-errors`},[e.willOverwriteConstant?t(`span`,[e._v(`Some of your existing constants will be overwritten!`)]):e._e(),e.willOverwriteConstant&&e.extraConstants>0?t(`br`):e._e(),e.extraConstants>0?t(`span`,[e._v(` `+e._s(e.quantifyInt(`constant`,e.extraConstants))+` will not be imported due to the `+e._s(e.maxConstantCount)+` constant limit. `)]):e._e()]):e._e(),t(`br`),t(`button`,{staticClass:`o-primary-btn`,on:{click:function(t){e.ignoreConstants=!e.ignoreConstants}}},[e._v(` `+e._s(e.constantButtonText)+` `)])],2):e._e(),t(`br`),e.hasErrors?t(`div`,{staticClass:`l-has-errors`},[e._v(` This script has errors which need to be fixed before it can be run! `)]):e._e(),e.hasErrors&&e.isImportingExtraData?t(`div`,[t(`i`,[e._v(`Some errors may be fixed with the additional data being imported.`)])]):e._e()]):e.input.length===0?e._e():t(`div`,[e._v(` Invalid Automator data string `)])])},[],!1,null,`5899bf97`,null,null).exports,SE={name:`ImportFilterSingleType`,props:{type:{type:String,required:!0},currSettings:{type:Object,required:!0},newSettings:{type:Object,required:!0}},computed:{settingsChanged(){return JSON.stringify(this.currSettings)!==JSON.stringify(this.newSettings)},symbol(){return GlyphInfo[this.type].regularGlyphSymbol},capitalized(){return`${this.type.charAt(0).toUpperCase()}${this.type.slice(1)}`},rarityStr(){return this.changedValue(this.currSettings.rarity,this.newSettings.rarity,e=>formatPercents(e/100))},effectStr(){return this.changedValue(this.currSettings.effectCount,this.newSettings.effectCount,formatInt)},scoreStr(){return this.changedValue(this.currSettings.score,this.newSettings.score,formatInt)},effectData(){let e=[];for(let t=0;t<this.currSettings.effectScores.length;t++){let n=AutoGlyphProcessor.bitmaskIndexOffset(this.type)+t;e.push({bitmaskIndex:n,oldReq:(this.currSettings.specifiedMask&1<<n)!=0,newReq:(this.newSettings.specifiedMask&1<<n)!=0,oldScore:this.currSettings.effectScores[t],newScore:this.newSettings.effectScores[t]})}return e}},methods:{changedValue(e,t,n){return e===t?n(e):`${n(e)}➜${n(t)}`},effectScoreStr(e){let t=(e,t)=>`${e?`✔`:`✘`}${formatInt(t)}`,n=t(e.oldReq,e.oldScore),r=t(e.newReq,e.newScore);return e.oldScore===e.newScore?n:`${n}➜${r}`},topLevelClassObject(e){return{"o-cell":!0,"o-cell--changed":this.currSettings[e]!==this.newSettings[e]}},effectClassObject(e){return{"o-cell":!0,"o-cell--changed":e.oldReq!==e.newReq||e.oldScore!==e.newScore}},getEffectDesc(e){return GlyphEffects.all.find(t=>t.bitmaskIndex===e.bitmaskIndex&&t.isGenerated).genericDesc}}},CE=D(SE,function(){var e=this,t=e._self._c;return t(`div`,[e._v(` `+e._s(e.symbol)+`: `),e.settingsChanged?t(`span`,[t(`span`,{staticClass:`c-single-row`},[t(`span`,{staticClass:`c-rarity`,class:e.topLevelClassObject(`rarity`),attrs:{"ach-tooltip":`Setting for Rarity Threshold and Specified Effect`}},[e._v(` `+e._s(e.rarityStr)+` `)]),t(`span`,{staticClass:`c-effects-count`,class:e.topLevelClassObject(`effectCount`),attrs:{"ach-tooltip":`Number of effects in Specified Effect`}},[e._v(` Minimum Effects: `+e._s(e.effectStr)+` `)]),t(`span`,{staticClass:`c-target-score`,class:e.topLevelClassObject(`score`),attrs:{"ach-tooltip":`Threshold for Effect Score`}},[e._v(` Score: `+e._s(e.scoreStr)+` `)])]),t(`br`),t(`span`,{staticClass:`c-single-row`},e._l(e.effectData.slice(0,4),function(n){return t(`span`,{key:n.bitmaskIndex,staticClass:`c-single-score`,class:e.effectClassObject(n),attrs:{"ach-tooltip":e.getEffectDesc(n)}},[e._v(` `+e._s(e.effectScoreStr(n))+` `)])}),0),e.effectData.length>4?t(`span`,{staticClass:`c-single-row c-second-row`},[t(`br`),e._l(e.effectData.slice(4),function(n){return t(`span`,{key:n.bitmaskIndex,staticClass:`c-single-score o-cell`,class:e.effectClassObject(n),attrs:{"ach-tooltip":e.getEffectDesc(n)}},[e._v(` `+e._s(e.effectScoreStr(n))+` `)])})],2):e._e()]):t(`span`,[e._v(` (No changes) `)])])},[],!1,null,`e968891e`,null,null).exports,wE=D({name:`ImportFilterModal`,components:{ModalWrapperChoice:BC,PrimaryButton:L,ImportFilterSingleType:CE},data(){return{currentSettings:{},input:``}},computed:{inputIsValid(){let e;try{return e=GameSaveSerializer.decodeText(this.input,`glyph filter`),e.length>0&&e.match(/^[0-9,.|/-]*$/u)!==null}catch{return!1}},parsedSettings(){if(!this.inputIsValid)return null;let e=GameSaveSerializer.decodeText(this.input,`glyph filter`).split(`|`),t={},n=3;for(let r of j.alchemyGlyphTypes){if(!r)continue;let i=e[n].split(`,`);t[r]={rarity:Number(i[0]),score:Number(i[1]),effectCount:Number(i[2]),specifiedMask:Number(i[3]),effectScores:i[4].split(`/`).map(e=>Number(e))},n++}return{select:Number(e[0]),simple:Number(e[1]),trash:Number(e[2]),types:t}},selectStr(){return this.changedValue(this.parsedSettings.select,this.currentSettings.select,e=>AutoGlyphProcessor.filterModeName(e))},basicCountStr(){return this.changedValue(this.parsedSettings.simple,this.currentSettings.simple,formatInt)},trashStr(){return this.changedValue(this.parsedSettings.trash,this.currentSettings.trash,e=>AutoGlyphProcessor.trashModeDesc(e))},availableTypes(){return j.alchemyGlyphTypes.filter(e=>j[e.type].isGenerated&&j[e.type].generationRequirement)},settingTooltipText(){return`Mouseover each box for more details. ✔ and ✘ symbols denote an effect
        selected/unselected for Specified Effect mode.`}},mounted(){this.$refs.input.select()},methods:{update(){this.currentSettings=structuredClone(player.reality.glyphs.filter)},changedValue(e,t,n){return e===t?`(No change)`:`${n(e)} ➜ ${n(t)}`},importFilter(){this.parsedSettings!==null&&(this.emitClose(),player.reality.glyphs.filter=this.parsedSettings)}}},function(){var e=this,t=e._self._c;return t(`ModalWrapperChoice`,{attrs:{"show-cancel":!e.inputIsValid,"show-confirm":!1},scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` Import Glyph filter settings `)]},proxy:!0}])},[e._v(` Note: Importing Glyph filter options will overwrite settings `),t(`br`),e._v(` in all filter modes, not just the currently-selected one. `),t(`input`,{directives:[{name:`model`,rawName:`v-model`,value:e.input,expression:`input`}],ref:`input`,staticClass:`c-modal-input c-modal-import__input`,attrs:{type:`text`},domProps:{value:e.input},on:{keyup:[function(t){return!t.type.indexOf(`key`)&&e._k(t.keyCode,`enter`,13,t.key,`Enter`)?null:e.importSave.apply(null,arguments)},function(t){return!t.type.indexOf(`key`)&&e._k(t.keyCode,`esc`,27,t.key,[`Esc`,`Escape`])?null:e.emitClose.apply(null,arguments)}],input:function(t){t.target.composing||(e.input=t.target.value)}}}),t(`div`,{staticClass:`c-modal-import__save-info`},[e.input?e.inputIsValid?t(`div`,[t(`b`,[e._v(`Selection mode:`)]),e._v(` `+e._s(e.selectStr)+` `),t(`br`),t(`b`,[e._v(`Effect Count ("Number of Effects"):`)]),e._v(` `+e._s(e.basicCountStr)+` `),t(`br`),t(`b`,[e._v(`Rejected Glyphs:`)]),e._v(` `+e._s(e.trashStr)+` `),t(`br`),t(`u`,[t(`b`,[e._v(`Type-specific Settings`)])]),e._v(` `),t(`span`,{attrs:{"ach-tooltip":e.settingTooltipText}},[t(`i`,{staticClass:`fas fa-question-circle`})]),t(`br`),e._l(e.availableTypes,function(n){return t(`ImportFilterSingleType`,{key:n,staticClass:`c-single-type`,attrs:{type:n,"curr-settings":e.currentSettings.types[n],"new-settings":e.parsedSettings.types[n]}})})],2):t(`div`,[e._v(` Not a valid Glyph filter string `)]):t(`div`)]),e.inputIsValid?t(`PrimaryButton`,{staticClass:`o-primary-btn--width-medium c-modal-message__okay-btn c-modal__confirm-btn`,on:{click:e.importFilter}},[e._v(` Import `)]):e._e()],1)},[],!1,null,`8bb97384`,null,null).exports,TE={IMPORTED:0,LOCAL:1,IGNORED:2},EE=D({name:`ImportSaveModal`,components:{ModalWrapperChoice:BC,PrimaryButton:L},data(){return{input:``,offlineImport:TE.IMPORTED}},computed:{saveCheckString(){let e=GameSaveSerializer.deserialize(this.input),t=GameStorage.checkPlayerObject(e);return t.length>300?`${t.slice(0,297)}...`:t},player(){return this.saveCheckString===``?GameSaveSerializer.deserialize(this.input):void 0},progress(){return PlayerProgress.of(this.player)},fileName(){return this.player.options.saveFileName},antimatter(){return this.player.antimatter},infinities(){return this.player.infinities},hasInput(){return this.input!==``},inputIsValid(){return this.inputIsValidSave||this.inputIsSecret},inputIsValidSave(){return this.player!==void 0},inputIsSecret(){return isSecretImport(this.input)||Theme.isSecretTheme(this.input)},isFromFuture(){return this.player.lastUpdate>Date.now()},lastOpened(){let e=Date.now()-this.player.lastUpdate;return this.isFromFuture?`This save is from ${TimeSpan.fromMilliseconds(new Decimal(-e)).toString()} in the future.`:`This save was last opened ${TimeSpan.fromMilliseconds(new Decimal(e)).toString()} ago.`},offlineType(){switch(this.updateOfflineSettings(),this.offlineImport){case TE.IMPORTED:return`Using imported save settings`;case TE.LOCAL:return`Using existing save settings`;case TE.IGNORED:return`Will not simulate offline time`;default:throw Error(`Unrecognized offline progress setting for importing`)}},offlineDetails(){if(this.offlineImport===TE.IGNORED)return`Save will be imported without offline progress.`;if(!GameStorage.offlineEnabled)return`This setting will not apply any offline progress after importing.`;if(this.isFromFuture)return`Offline progress cannot be simulated due to an inconsistent system clock time.`;let e=Date.now()-this.player.lastUpdate,t=GameStorage.maxOfflineTicks(e);return`After importing, will simulate ${formatInt(t)} ticks of duration
        ${TimeSpan.fromMilliseconds(new Decimal(e/t)).toStringShort()} each.`},willLoseCosmetics(){let e=player.reality.glyphs.cosmetics.unlockedFromNG,t=this.player.reality?.glyphs.cosmetics?.unlockedFromNG??[];return e.some(e=>!t.includes(e)).length>0},willLoseSpeedrun(){return player.speedrun.isUnlocked&&!this.player.speedrun?.isUnlocked}},mounted(){this.$refs.input.select()},destroyed(){GameStorage.offlineEnabled=void 0,GameStorage.offlineTicks=void 0},methods:{changeOfflineSetting(){this.offlineImport=(this.offlineImport+1)%3},updateOfflineSettings(){switch(this.offlineImport){case TE.IMPORTED:GameStorage.offlineEnabled=this.player.options.offlineProgress??!0,GameStorage.offlineTicks=this.player.options.offlineTicks??1e5;break;case TE.LOCAL:GameStorage.offlineEnabled=player.options.offlineProgress,GameStorage.offlineTicks=player.options.offlineTicks;break;case TE.IGNORED:GameStorage.offlineEnabled=!1;break}},importSave(){this.inputIsValid&&(this.emitClose(),GameStorage.import(this.input))}}},function(){var e=this,t=e._self._c;return t(`ModalWrapperChoice`,{attrs:{"show-cancel":!e.inputIsValid,"show-confirm":!1},scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` Input your save `)]},proxy:!0}])},[t(`input`,{directives:[{name:`model`,rawName:`v-model`,value:e.input,expression:`input`}],ref:`input`,staticClass:`c-modal-input c-modal-import__input`,attrs:{type:`text`},domProps:{value:e.input},on:{keyup:[function(t){return!t.type.indexOf(`key`)&&e._k(t.keyCode,`enter`,13,t.key,`Enter`)?null:e.importSave.apply(null,arguments)},function(t){return!t.type.indexOf(`key`)&&e._k(t.keyCode,`esc`,27,t.key,[`Esc`,`Escape`])?null:e.emitClose.apply(null,arguments)}],input:function(t){t.target.composing||(e.input=t.target.value)}}}),t(`div`,{staticClass:`c-modal-import__save-info`},[e.inputIsSecret?t(`div`,[e._v(` ??? `)]):e.inputIsValidSave?[e.fileName?t(`div`,[e._v(` File name: `+e._s(e.fileName)+` `)]):e._e(),t(`div`,[e._v(`Antimatter: `+e._s(e.formatPostBreak(e.antimatter,2,1)))]),e.progress.isInfinityUnlocked?t(`div`,[e._v(` Infinities: `+e._s(e.formatPostBreak(e.infinities,2))+` `)]):e._e(),e.progress.isEternityUnlocked?t(`div`,[e._v(` Eternities: `+e._s(e.formatPostBreak(e.player.eternities,2))+` `)]):e._e(),e.progress.isRealityUnlocked?t(`div`,[e._v(` Realities: `+e._s(e.formatPostBreak(e.player.realities,2))+` `)]):e._e(),e.progress.hasFullCompletion?t(`div`,[e._v(` Full game completions: `+e._s(e.formatInt(e.player.records.fullGameCompletions))+` `)]):e._e(),t(`div`,{staticClass:`c-modal-import__warning`},[e._v(` (Your current save file will be overwritten!) `)]),t(`br`),t(`div`,[e._v(` `+e._s(e.lastOpened)+` `),t(`div`,{staticClass:`o-primary-btn`,on:{click:e.changeOfflineSetting}},[e._v(` Offline Progress: `+e._s(e.offlineType)+` `)]),t(`span`,{domProps:{innerHTML:e._s(e.offlineDetails)}})])]:e.hasInput?t(`div`,[e._v(` Not a valid save: `),t(`br`),e._v(` `+e._s(e.saveCheckString)+` `)]):e._e(),e.player?t(`div`,{staticClass:`c-modal-hard-reset-danger`},[e.willLoseCosmetics?t(`div`,[t(`br`),e._v(` Glyph cosmetic sets from completing the game are tied to your save. `),t(`br`),e._v(` Importing this save will cause you to lose some sets. `)]):e._e(),e.willLoseSpeedrun?t(`div`,[t(`br`),e._v(` You will lose the ability to do a Speedrun, as this save does not have it unlocked. `)]):e._e()]):e._e()],2),e.inputIsValid?t(`PrimaryButton`,{staticClass:`o-primary-btn--width-medium c-modal-message__okay-btn c-modal__confirm-btn`,on:{click:e.importSave}},[e._v(` Import `)]):e._e()],1)},[],!1,null,null,null,null).exports,DE=D({name:`ImportTimeStudyConstants`,components:{ModalWrapperChoice:BC},data(){return{constantNames:[],willImport:[]}},computed:{presets:()=>player.timestudy.presets.filter(e=>e.studies!==``),names(){return this.presets.map((e,t)=>`TSPreset${t+1}__${e.name.replaceAll(/[^a-zA-Z_0-9]/gu,`_`)}`)}},methods:{update(){this.constantNames=[...player.reality.automator.constantSortOrder],this.updateImportStatus()},importConstants(){for(let e=0;e<this.presets.length;e++)AutomatorBackend.modifyConstant(this.names[e],this.presets[e].studies)},hasConflict(e){return this.constantNames.includes(e)},updateImportStatus(){let e=AutomatorData.MAX_ALLOWED_CONSTANT_COUNT-this.constantNames.length;this.willImport=[];for(let t=0;t<this.names.length;t++)this.hasConflict(this.names[t])?this.willImport.push(!0):e>0?(this.willImport.push(!0),e--):this.willImport.push(!1)},missedImports(){return this.willImport.countWhere(e=>!e)},shortenString(e){return e.length<55?e:`${e.slice(0,12)}...${e.slice(-40)}`}}},function(){var e=this,t=e._self._c;return t(`ModalWrapperChoice`,{on:{confirm:e.importConstants},scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` Importing Time Study Presets as Constants `)]},proxy:!0},{key:`confirm-text`,fn:function(){return[e._v(` Import All `)]},proxy:!0}])},[t(`div`,{staticClass:`c-modal-message__text`},[e._v(` Confirming this modal will import all of your saved Time Study presets as new Automator constants. Below are all the valid presets which will be imported, with the beginning and end of their contained studies shown. Some names may be changed due to restrictions on constant name formatting. `),t(`br`),t(`br`),e._l(e.presets.length,function(n){return t(`div`,{key:n,class:{"l-not-imported":!e.willImport[n-1]}},[e._v(` Name: `+e._s(e.presets[n-1].name)+` ➜ `),t(`b`,[e._v(e._s(e.names[n-1]))]),t(`br`),e._v(` `+e._s(e.shortenString(e.presets[n-1].studies))+` `),e.hasConflict(e.names[n-1])?t(`span`,{staticClass:`l-warn-text`},[t(`br`),e._v(` This will overwrite an existing constant! `)]):e._e(),t(`br`),t(`br`)])}),e.missedImports()>0?t(`div`,{staticClass:`l-warn-text`},[e._v(` `+e._s(e.quantify(`preset`,e.missedImports()))+` in this list cannot be imported due to the limit on constant count. `)]):e._e()],2)])},[],!1,null,`f2bc7de8`,null,null).exports;function OE(e){xn()?Cn(e):window.open(e,`_blank`).focus()}var kE={name:`InformationModalButton`,props:{name:{type:String,required:!0},icon:{type:String,required:!0},link:{type:String,required:!1,default:null},showModal:{type:String,required:!1,default:null}},methods:{openAssociatedModal(){Modal[this.showModal].show()},openLink(){OE(this.link)}}},AE=D(kE,function(){var e=this,t=e._self._c;return t(`span`,{staticClass:`c-socials--icon__wrapper`,attrs:{"ach-tooltip":e.name}},[e.link?t(`a`,{staticClass:`c-socials--icon`,on:{click:e.openLink}},[t(`i`,{class:e.icon})]):t(`a`,{staticClass:`c-socials--icon`,on:{click:e.openAssociatedModal}},[t(`i`,{class:e.icon})])])},[],!1,null,`421fd1bd`,null,null).exports,jE=D({name:`InformationModal`,components:{ModalCloseButton:IC,InformationModalButton:AE}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-information-modal c-information-modal`},[t(`ModalCloseButton`,{on:{click:e.emitClose}}),e._m(0),e._m(1),t(`div`,{staticClass:`l-socials`},[t(`InformationModalButton`,{attrs:{name:`GitHub repository`,icon:`fa-brands fa-github`,link:`https://github.com/IvarK/AntimatterDimensionsSourceCode`}}),t(`InformationModalButton`,{attrs:{name:`r/AntimatterDimensions`,icon:`fa-brands fa-reddit-alien`,link:`https://www.reddit.com/r/AntimatterDimensions/`}}),t(`InformationModalButton`,{attrs:{name:`Antimatter Dimensions Discord Server`,icon:`fa-brands fa-discord`,link:`https://discord.gg/ST9NaXa`}}),t(`InformationModalButton`,{attrs:{name:`Antimatter Dimensions on Google Play`,icon:`fa-brands fa-google-play`,link:`https://play.google.com/store/apps/details?id=kajfosz.antimatterdimensions`}}),t(`InformationModalButton`,{attrs:{name:`Antimatter Dimensions on Steam`,icon:`fa-brands fa-steam`,link:`https://store.steampowered.com/app/1399720/Antimatter_Dimensions/`}}),t(`InformationModalButton`,{attrs:{name:`Credits`,icon:`fa-solid fa-users`,"show-modal":`credits`}}),t(`InformationModalButton`,{attrs:{name:`Game Changelog`,icon:`fa-solid fa-file-lines`,"show-modal":`changelog`}})],1)],1)},[function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-h2p-header`},[t(`div`,{staticClass:`c-h2p-title`},[e._v(` About the game `)])])},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`c-info-body`},[e._v(` Antimatter Dimensions is an Idle Incremental game created by Finnish developer Hevipelle. Originating as a solo project in 2016, it was expanded upon by a large team of developers and testers from then on. `),t(`br`),t(`br`),e._v(` The game has unfolding gameplay and multiple prestige layers. The "How to Play" button contains useful information about progressing. `)])}],!1,null,`6abe1396`,null,null).exports,ME={name:`LoadGameEntry`,components:{PrimaryButton:L},props:{saveId:{type:Number,required:!0}},data(){let e=GameStorage.saves[this.saveId];return{antimatter:new Decimal(e?e.antimatter||e.money:10),fileName:e?e.options.saveFileName:``}},computed:{isSelected(){return GameStorage.currentSlot===this.saveId}},methods:{load(){GameStorage.loadSlot(this.saveId)},formatAntimatter(e){return formatPostBreak(e,2,1)},update(){this.isSelected&&this.antimatter.copyFrom(Currency.antimatter)}}},NE=D(ME,function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-modal-options__save-record`},[t(`h3`,[e._v(`Save #`+e._s(e.saveId+1)+`:`),e.isSelected?t(`span`,[e._v(` (selected)`)]):e._e()]),e.fileName?t(`span`,[e._v(`File name: `+e._s(e.fileName))]):e._e(),t(`span`,[e._v(`Antimatter: `+e._s(e.formatAntimatter(e.antimatter)))]),t(`PrimaryButton`,{staticClass:`o-primary-btn--width-medium`,on:{click:e.load}},[e._v(` Load `)])],1)},[],!1,null,null,null,null).exports,PE=D({name:`LoadGameModal`,components:{ModalWrapperOptions:Mw,LoadGameEntry:NE}},function(){var e=this,t=e._self._c;return t(`ModalWrapperOptions`,{scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` Save Selection `)]},proxy:!0}])},e._l(3,function(e){return t(`LoadGameEntry`,{key:e,staticClass:`c-entry-border`,attrs:{"save-id":e-1}})}),1)},[],!1,null,`d47f891b`,null,null).exports,FE=D({name:`ModifySeedModal`,components:{ModalWrapper:jw,PrimaryButton:L},data(){return{mode:0,inputSeed:``,seedText:``,convertedInput:!1,seedValue:0}},computed:{choiceEnum:()=>SPEEDRUN_SEED_STATE,officialSeed:()=>Speedrun.officialFixedSeed},created(){this.seedValue=player.speedrun.initialSeed,this.inputSeed=`${player.speedrun.initialSeed}`,this.convertedInput=!1},methods:{update(){this.mode=player.speedrun.seedSelection,this.seedText=Speedrun.seedModeText()},handleSeedInput(){if(/^-?\d+$/gu.test(this.inputSeed)){let e=Number(this.inputSeed);this.seedValue=Math.abs(e)>9e15?this.hashStringToSeed(this.inputSeed):Number(this.inputSeed)}else this.seedValue=this.hashStringToSeed(this.inputSeed);this.convertedInput=this.seedValue!==Number(this.inputSeed),this.seedValue===0?this.setMode(this.choiceEnum.FIXED):this.setMode(this.choiceEnum.PLAYER,this.seedValue)},setMode(e,t){e===this.choiceEnum.PLAYER&&this.seedValue===0||Speedrun.modifySeed(e,Number.parseInt(t,10))},buttonClass(e){return{"o-primary-btn--subtab-option":!0,"o-selected":e===this.mode}},hashStringToSeed(e){let t=17977308,n=3735928559^t,r=1103547991^t;for(let t=0,i;t<e.length;t++)i=e.codePointAt(t),n=Math.imul(n^i,2654435761),r=Math.imul(r^i,1597334677);return n=Math.imul(n^n>>>16,2246822507)^Math.imul(r^r>>>13,3266489909),r=Math.imul(r^r>>>16,2246822507)^Math.imul(n^n>>>13,3266489909),4294967296*(2097151&r)+(n>>>0)}}},function(){var e=this,t=e._self._c;return t(`ModalWrapper`,{scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` Modifying Glyph RNG Seed `)]},proxy:!0}])},[t(`div`,[e._v(` All Glyph options beyond the first Reality for an entire playthrough are randomly determined from the very beginning, based on the value of an initial seed number. The role of this seed is that it chooses a single, `),t(`i`,[e._v(`particular`)]),e._v(` set of Glyph options for your playthrough. If you or anyone else chooses the same seed in a different run, you will get the same options for Glyphs. `),t(`br`),t(`br`),e._v(` You can switch between these three options any point before you generate your first Glyph. `),t(`br`),e._v(` Current Setting: `),t(`b`,[e._v(e._s(e.seedText))]),t(`br`),t(`br`),t(`PrimaryButton`,{class:e.buttonClass(e.choiceEnum.FIXED),on:{click:function(t){return e.setMode(e.choiceEnum.FIXED)}}},[e._v(` Official Preset Seed `)]),t(`br`),e._v(` This is the default option which chooses the seed `),t(`b`,[e._v(e._s(e.officialSeed))]),e._v(`. Anyone who chooses to not modify the seed at all will get these Glyph options. `),t(`br`),t(`br`),t(`PrimaryButton`,{class:e.buttonClass(e.choiceEnum.RANDOM),on:{click:function(t){return e.setMode(e.choiceEnum.RANDOM)}}},[e._v(` Randomized Seed `)]),t(`br`),e._v(` This selects a completely randomized seed value, producing Glyph options which are very likely to be different from anyone else's playthrough unless they intentionally choose the same value. `),t(`br`),t(`br`),t(`PrimaryButton`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:e.seedValue===0?`Input seed cannot be zero!`:``,expression:`seedValue === 0 ? 'Input seed cannot be zero!' : ''`}],class:e.buttonClass(e.choiceEnum.PLAYER),on:{click:function(t){return e.setMode(e.choiceEnum.PLAYER,e.seedValue)}}},[e._v(` Player-selected Seed: `)]),t(`input`,{directives:[{name:`model`,rawName:`v-model`,value:e.inputSeed,expression:`inputSeed`}],ref:`inputSeed`,staticClass:`c-modal-input`,attrs:{type:`text`},domProps:{value:e.inputSeed},on:{input:[function(t){t.target.composing||(e.inputSeed=t.target.value)},function(t){return e.handleSeedInput()}]}}),t(`br`),e._v(` This option sets your seed to the value you type into the text box. `),t(`br`),e.seedValue===0?t(`span`,[e._v(` Your current input `+e._s(e.convertedInput?`converts to`:`is equal to`)+` `),t(`b`,[e._v(`0`)]),e._v(`; the seed will default to Official Preset. `)]):t(`span`,[e._v(` Your current input will be `+e._s(e.convertedInput?`converted to`:`used as`)+` the number `),t(`b`,[e._v(e._s(e.seedValue))]),e._v(`. `)]),t(`br`),e._v(` For technical reasons, this value must be must be non-zero to be accepted. `)],1)])},[],!1,null,`390c84d6`,null,null).exports,IE=D({name:`PelleEffectsModal`,components:{PrimaryButton:L,ModalWrapper:jw},computed:{nerfs(){return[`Anything unlocked through a Pelle upgrade cannot be unlocked normally`,`All pre-Doomed IP and EP multipliers are disabled`,`IP generation based on fastest infinity speed is disabled`,`All pre-Doomed Replicanti speed multipliers are disabled`,`Replicanti slows down more drastically above ${format(Number.MAX_VALUE,2)}`,`Most Eternity Challenges are harder`,`All Galaxies are only ${formatPercents(.5)} as effective`,`Antimatter Dimension multiplier is divided by ${formatInt(10)}`,`Achievement multiplier and many achievement rewards are disabled`,`All Infinity and Eternity multipliers and generation are disabled`,`Black Holes are disabled`,`Reality Upgrade "Temporal Transcendence" is disabled`,`All rewards which increase your starting resources except Achievement 21 are disabled`,`All rewards which prevent resources from being reset are disabled`,`Perk rewards which reduce unlock costs have been disabled, excluding the ECR group`,`Automatic Infinity and Eternity Challenges are disabled`,`All Dimension and pre-Infinity Autobuyers are disabled until reacquired through Pelle`,`The Time Theorem Autobuyer is disabled`,`All Automation related to Time Dilation or later is disabled`,`Eternity Upgrade to Time Dimensions based on days played is based on this Armageddon time`,`All pre-Doomed Dilated Time multipliers are disabled except the ${formatX(2)} buyable`,`All Tachyon Particle multipliers are disabled`,`All pre-Doomed Time Theorem generation effects are disabled except the Dilation upgrade`,`Glyph equipping is disabled until reacquired`,`Glyph levels are lowered and rarity is set to ${formatPercents(0)}`,`Effects from Glyph Sacrifice, Alteration, and Alchemy are all disabled`,`You cannot enter any other Celestial Realities`,`Music Glyphs cannot be bought`,`All rewards from Effarig are disabled`,`All features related to storing time are disabled`,`All rewards from V are disabled`,`The Teresa Level ${formatInt(1)} effect from Ra is disabled`,`Infinity Upgrades cannot be charged`,`Triad Studies and Space Theorems are disabled`,`Imaginary Upgrades are disabled excluding those relating to DMD's and Celestial unlocks`,`Continuum and Singularity rewards are disabled`]}}},function(){var e=this,t=e._self._c;return t(`ModalWrapper`,{scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` List of disabled and nerfed effects in Doomed `)]},proxy:!0}])},[t(`div`,{staticClass:`pelle-effects-container`},e._l(e.nerfs,function(n,r){return t(`p`,{key:r},[e._v(` `+e._s(n)+` `)])}),0),t(`PrimaryButton`,{staticClass:`o-primary-btn--width-medium c-modal-message__okay-btn c-modal__confirm-btn`,on:{click:e.emitClose}},[e._v(` Okay `)])],1)},[],!1,null,`27c4b2f4`,null,null).exports,LE=D({name:`RealityGlyphCreationModal`,components:{ModalWrapper:jw,PrimaryButton:L},data(){return{isDoomed:!1,realityGlyphLevel:new Decimal,possibleEffects:[]}},methods:{update(){this.isDoomed=Pelle.isDoomed,this.realityGlyphLevel.copyFrom(AlchemyResource.reality.effectValue);let e=GlyphEffects.all.filter(e=>e.glyphTypes.includes(`reality`)).sort((e,t)=>e.intID-t.intID),t=e.map(e=>e.intID).min();this.possibleEffects=e.map(e=>[realityGlyphEffectLevelThresholds[e.intID-t],e.id])},createRealityGlyph(){if(GameCache.glyphInventorySpace.value===0){Modal.message.show(`No available inventory space; Sacrifice some Glyphs to free up space.`,{closeEvent:GAME_EVENT.GLYPHS_CHANGED});return}Glyphs.addToInventory(GlyphGenerator.realityGlyph()),AlchemyResource.reality.amount=new Decimal,player.reality.glyphs.createdRealityGlyph=!0,this.emitClose()},formatGlyphEffect(e){if(this.realityGlyphLevel.lt(e[0]))return`(Requires Glyph level ${formatInt(e[0])})`;let t=GlyphEffects[e[1]],n=t.effect(this.realityGlyphLevel,rarityToStrength(100));return t.singleDesc.replace(`{value}`,t.formatEffect(n))}}},function(){var e=this,t=e._self._c;return t(`ModalWrapper`,{scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` Reality Glyph Creation `)]},proxy:!0}])},[t(`div`,{staticClass:`c-reality-glyph-creation`},[t(`div`,[e._v(` Create a level `+e._s(e.formatInt(e.realityGlyphLevel))+` Reality Glyph. Rarity will always be `+e._s(e.formatPercents(1))+` and level scales on your current Reality Resource amount (which is all consumed). All other Alchemy Resources will be unaffected. Reality Glyphs have unique effects, some of which are only available with higher level Glyphs. Reality Glyphs can also be sacrificed to increase all Memory Chunk gain. Like Effarig Glyphs, you cannot equip more than one at the same time. `)]),t(`div`,{staticClass:`o-available-effects-container`},[t(`div`,{staticClass:`o-available-effects`},[e._v(` Available Effects: `)]),e._l(e.possibleEffects,function(n,r){return t(`div`,{key:r},[e._v(` `+e._s(e.formatGlyphEffect(n))+` `)])})],2),e.isDoomed?t(`PrimaryButton`,{attrs:{enabled:!1}},[e._v(` You cannot create Reality Glyphs while Doomed `)]):e.realityGlyphLevel.neq(0)?t(`PrimaryButton`,{on:{click:e.createRealityGlyph}},[e._v(` Create a Reality Glyph! `)]):t(`PrimaryButton`,{attrs:{enabled:!1}},[e._v(` Reality Glyph level must be higher than `+e._s(e.formatInt(0))+` `)])],1)])},[],!1,null,`6b310700`,null,null).exports,RE={name:`ReplaceGlyphModal`,components:{ModalWrapperChoice:BC},props:{targetSlot:{type:Number,required:!0},inventoryIndex:{type:Number,required:!0}},data(){return{target:0,idx:0,isDoomed:!1}},computed:{resetTerm(){return this.isDoomed?`Armageddon`:`Reality`}},methods:{update(){this.target=this.targetSlot,this.idx=this.inventoryIndex,this.glyph=Glyphs.findByInventoryIndex(this.idx),this.isDoomed=Pelle.isDoomed},handleYesClick(){Glyphs.swapIntoActive(this.glyph,this.targetSlot)}}},zE=D(RE,function(){var e=this,t=e._self._c;return t(`ModalWrapperChoice`,{attrs:{option:`glyphReplace`},on:{confirm:e.handleYesClick},scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` You are about to replace a Glyph `)]},proxy:!0}])},[e._v(` Replacing a Glyph will restart this `+e._s(e.resetTerm)+`. `)])},[],!1,null,null,null,null).exports,BE=D({name:`SacrificeModal`,components:{ModalWrapperChoice:BC},data(){return{currentMultiplier:new Decimal,nextMultiplier:new Decimal}},computed:{message(){return Achievement(118).isUnlocked&&!Pelle.isDoomed?`Dimensional Sacrifice will give you a boost to the 8th Antimatter Dimension based on the amount of
          1st Antimatter Dimensions you had at the time of Sacrificing.`:`Dimensional Sacrifice will remove all of your 1st through 7th Antimatter Dimensions
        (with the cost and multiplier unchanged), for a boost to the 8th Antimatter Dimension based on the total
        amount of 1st Antimatter Dimensions sacrificed. It will take time to regain production.`},multiplierText(){return`Multiplier is currently ${formatX(this.currentMultiplier,2,2)} and will increase to
        ${formatX(this.nextMultiplier,2,2)} on Dimensional Sacrifice.`}},methods:{update(){this.currentMultiplier.copyFrom(Sacrifice.totalBoost),this.nextMultiplier.copyFrom(Sacrifice.nextBoost.times(Sacrifice.totalBoost))},handleYesClick(){sacrificeReset()}}},function(){var e=this,t=e._self._c;return t(`ModalWrapperChoice`,{attrs:{option:`sacrifice`},on:{confirm:e.handleYesClick},scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` Dimensional Sacrifice `)]},proxy:!0}])},[t(`div`,{staticClass:`c-modal-message__text`},[e._v(` `+e._s(e.message)+` `)]),t(`br`),t(`div`,{staticClass:`c-modal-message__text`},[e._v(` `+e._s(e.multiplierText)+` `),t(`br`)])])},[],!1,null,null,null,null).exports,VE={name:`SingularityMilestoneComponent`,props:{milestone:{type:Object,required:!0},suppressGlow:{type:Boolean,default:!1}},data:()=>({isMaxed:!1,progressToNext:``,remainingSingularities:new Decimal,description:``,effectDisplay:``,isUnique:!1,nextEffectDisplay:``,start:new Decimal,completions:new Decimal,limit:0,milestoneMode:!1,singularitiesPerCondense:new Decimal,baseCondenseTime:new Decimal,currentCondenseTime:new Decimal,autoCondenseDelay:new Decimal,lastCheckedMilestones:new Decimal,autoSingActive:!1}),computed:{barStyle(){return{width:this.isMaxed?void 0:this.progressToNext}},barClass(){return{"c-laitela-milestone__progress":!0,"c-laitela-milestone-mask":!0,"c-laitela-milestone--completed":this.isMaxed}},containerClass(){return{"c-laitela-milestone":!0,"o-laitela-milestone--glow":!this.suppressGlow&&this.milestone.previousGoal.gt(this.lastCheckedMilestones)}},upgradeDirectionIcon(){switch(this.milestone.config.upgradeDirection){case ee.SELF_BOOST:return`<b>ᛝ</b>`;case ee.BOOSTS_MAIN:return`<i class="fas fa-arrows-alt"></i>`;case ee.BOOSTS_LAITELA:return`<i class="fas fa-compress-arrows-alt"></i>`;default:throw Error(`Unspecified Lai'tela upgrade direction in singularity milestone`)}},maxCompletions(){return this.isUnique?1:this.limit},completionsDisplay(){let e=Number.isFinite(this.limit)?formatInt(this.maxCompletions):`∞`;return`${formatInt(this.completions)}/${e} ${pluralize(`completion`,this.completions)}`},progressDisplay(){let e=this.remainingSingularities.div(this.singularitiesPerCondense),t,n,r;switch(this.milestoneMode){case SINGULARITY_MILESTONE_RESOURCE.SINGULARITIES:return`In ${quantify(`Singularity`,this.remainingSingularities,2)}`;case SINGULARITY_MILESTONE_RESOURCE.CONDENSE_COUNT:return`Condense ${quantify(`time`,e,2,2)}`;case SINGULARITY_MILESTONE_RESOURCE.MANUAL_TIME:return t=Decimal.clampMin(0,this.currentCondenseTime),n=Decimal.ceil(e.sub(1)).mul(this.baseCondenseTime),`In ${TimeSpan.fromSeconds(new Decimal(t.add(n))).toStringShort()} (manual)`;case SINGULARITY_MILESTONE_RESOURCE.AUTO_TIME:return t=Decimal.clampMin(0,this.currentCondenseTime.add(this.autoCondenseDelay)),n=Decimal.ceil(e.sub(1)).mul(this.baseCondenseTime.add(this.autoCondenseDelay)),r=`In ${TimeSpan.fromSeconds(new Decimal(t.add(n))).toStringShort()}`,this.autoSingActive?r:`Auto-Singularity is OFF`;default:throw Error(`Unrecognized Singularity Milestone mode`)}},isDoomed:()=>Pelle.isDoomed},methods:{update(){this.autoSingActive=player.auto.singularity.isActive,this.isMaxed=this.milestone.isMaxed,this.progressToNext=this.milestone.progressToNext,this.remainingSingularities.copyFrom(this.milestone.remainingSingularities),this.description=this.milestone.description,this.effectDisplay=this.milestone.effectDisplay,this.isUnique=this.milestone.isUnique,!this.isUnique&&!this.isMaxed&&(this.nextEffectDisplay=this.milestone.nextEffectDisplay),this.completions.copyFrom(this.milestone.completions),this.limit=this.milestone.limit,this.milestoneMode=player.celestials.laitela.singularitySorting.displayResource,this.singularitiesPerCondense.copyFrom(Singularity.singularitiesGained),this.baseCondenseTime.copyFrom(Singularity.timePerCondense),this.currentCondenseTime.copyFrom(Singularity.timeUntilCap),this.autoCondenseDelay.copyFrom(Singularity.timeDelayFromAuto),this.lastCheckedMilestones.copyFrom(player.celestials.laitela.lastCheckedMilestones),this.isMetro=Theme.current().isMetro}}},HE=D(VE,function(){var e=this,t=e._self._c;return t(`div`,{class:e.containerClass},[!e.isMetro&&!e.isMaxed?t(`div`,{staticClass:`c-laitela-milestone--bar-border-fix`}):e._e(),t(`div`,{class:e.barClass,style:e.barStyle}),t(`span`,{class:{"o-pelle-disabled":e.isDoomed}},[e.isMaxed?e._e():t(`b`,[e._v(` `+e._s(e.progressDisplay)+` `)]),t(`p`,[t(`span`,{domProps:{innerHTML:e._s(e.upgradeDirectionIcon)}}),e._v(` `+e._s(e.description)+` `)]),t(`b`,[e._v(` `+e._s(e.effectDisplay)+` `),!e.isUnique&&!e.isMaxed?t(`span`,[e._v(`➜ `+e._s(e.nextEffectDisplay))]):e._e()]),t(`div`,{staticClass:`c-laitela-milestone__completions`},[e._v(` `+e._s(e.completionsDisplay)+` `)])])])},[],!1,null,`fc8b4c96`,null,null).exports,UE=D({name:`SingularityMilestonesModal`,components:{SingularityMilestoneComponent:HE,ModalWrapper:jw},data(){return{milestones:[],resourceVal:0,sortVal:0,completedVal:0,orderVal:0,milestoneGlow:!1}},computed:{resourceStr(){return[`Singularity Count`,`Condense Count`,`Manual Time`,`Auto Time`][this.resourceVal]},sortStr(){return[`Singularities needed`,`Current Completions`,`Progress to full completion`,`Final Singularities`,`Most Recent`][this.sortVal]},completedStr(){return[`First`,`Last`,`Don't move`][this.completedVal]},orderStr(){return[`Ascending`,`Descending`][this.orderVal]}},watch:{resourceVal(e){player.celestials.laitela.singularitySorting.displayResource=e},sortVal(e){player.celestials.laitela.singularitySorting.sortResource=e},completedVal(e){player.celestials.laitela.singularitySorting.showCompleted=e},orderVal(e){player.celestials.laitela.singularitySorting.sortOrder=e},milestoneGlow(e){player.celestials.laitela.milestoneGlow=e}},beforeDestroy(){player.celestials.laitela.lastCheckedMilestones=Currency.singularities.value},methods:{update(){this.milestones=SingularityMilestones.sortedForCompletions(!0);let e=player.celestials.laitela.singularitySorting;this.resourceVal=e.displayResource,this.sortVal=e.sortResource,this.completedVal=e.showCompleted,this.orderVal=e.sortOrder,this.milestoneGlow=player.celestials.laitela.milestoneGlow},cycleButton(e){let t=player.celestials.laitela.singularitySorting,n;switch(e){case 0:n=Object.keys(SINGULARITY_MILESTONE_RESOURCE).length,t.displayResource=(t.displayResource+1)%n;break;case 1:n=Object.keys(SINGULARITY_MILESTONE_SORT).length,t.sortResource=(t.sortResource+1)%n;break;case 2:n=Object.keys(COMPLETED_MILESTONES).length,t.showCompleted=(t.showCompleted+1)%n;break;case 3:n=Object.keys(SORT_ORDER).length,t.sortOrder=(t.sortOrder+1)%n;break;default:throw Error(`Unrecognized Singularity milestone sorting button`)}},glowOptionClass(){return{"c-modal__confirmation-toggle__checkbox":!0,"c-modal__confirmation-toggle__checkbox--active":this.milestoneGlow}},toggleGlow(){this.milestoneGlow=!this.milestoneGlow}}},function(){var e=this,t=e._self._c;return t(`ModalWrapper`,{scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` Singularity Milestones `)]},proxy:!0}])},[t(`div`,{staticClass:`c-modal__confirmation-toggle`,on:{click:e.toggleGlow}},[t(`div`,{class:e.glowOptionClass()},[e.milestoneGlow?t(`span`,{staticClass:`fas fa-check`}):e._e()]),t(`span`,{staticClass:`c-modal__confirmation-toggle__text`},[e._v(` Make button glow when new milestones have been reached `)])]),t(`div`,{staticClass:`l-singularity-milestone-modal-container-outer`},[t(`div`,{staticClass:`l-singularity-milestone-modal-container-inner`},e._l(e.milestones,function(e){return t(`SingularityMilestoneComponent`,{key:e.id,attrs:{milestone:e}})}),1)]),t(`div`,{staticClass:`l-singularity-milestone-sort-container`},[t(`button`,{staticClass:`c-singularity-milestone-modal-sort-button`,on:{click:function(t){return e.cycleButton(0)}}},[e._v(` To Milestone: `),t(`br`),e._v(` `+e._s(e.resourceStr)+` `)]),t(`button`,{staticClass:`c-singularity-milestone-modal-sort-button`,on:{click:function(t){return e.cycleButton(1)}}},[e._v(` Sort by: `),t(`br`),e._v(` `+e._s(e.sortStr)+` `)]),t(`button`,{staticClass:`c-singularity-milestone-modal-sort-button`,on:{click:function(t){return e.cycleButton(2)}}},[e._v(` Completed Milestones: `),t(`br`),e._v(` `+e._s(e.completedStr)+` `)]),t(`button`,{staticClass:`c-singularity-milestone-modal-sort-button`,on:{click:function(t){return e.cycleButton(3)}}},[e._v(` Sort Order: `),t(`br`),e._v(` `+e._s(e.orderStr)+` `)])])])},[],!1,null,null,null,null).exports,WE=D({name:`SpeedrunModeModal`,components:{PrimaryButton:L,ModalWrapperChoice:BC},data(){return{onInfoPage:!0,name:``,confirmPhrase:``}},computed:{willStartRun(){return this.confirmPhrase===`Gotta Go Fast!`}},methods:{nextPage(){this.onInfoPage=!1},startRun(){this.willStartRun&&(this.emitClose(),Speedrun.prepareSave(Speedrun.generateName(this.name)))}}},function(){var e=this,t=e._self._c;return t(`ModalWrapperChoice`,{attrs:{"show-cancel":!e.onInfoPage&&!e.willStartRun,"show-confirm":!e.onInfoPage&&e.willStartRun,"confirm-class":`o-primary-btn--width-medium c-modal-hard-reset-btn c-modal__confirm-btn`},on:{confirm:e.startRun},scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` Entering Speedrun Mode `)]},proxy:!0},{key:`confirm`,fn:function(){return[e._v(` Start Run! `)]},proxy:!0},{key:`cancel`,fn:function(){return[e._v(` Cancel `)]},proxy:!0}])},[e.onInfoPage?t(`div`,{staticClass:`c-modal-message__text`},[e._v(` This will start a save with additional statistics tracking for when you reach certain points of the game. These will be visible in the bottom-right of the screen and on a dedicated subtab of Statistics. `),t(`br`),t(`br`),e._v(` Almost all animations and confirmations are disabled by default, but you can change any of these settings before you reach their required progression. When you begin the run, the game remains paused until your antimatter changes, allowing you to configure all your settings before starting. In order to avoid having to wait for a long time before actually starting an optimized run, a few achievements are given for free. `),t(`br`),t(`br`),t(`i`,[e._v(` There is no additional content in Speedrun Mode. `)]),t(`br`),t(`br`),t(`PrimaryButton`,{staticClass:`o-primary-btn--width-medium c-modal-hard-reset-btn c-modal__confirm-btn`,on:{click:e.nextPage}},[e._v(` Continue `)])],1):t(`div`,{staticClass:`c-modal-message__text`},[e._v(` You can type in text below to name your speedrun save. This will have no effects on gameplay and only identifies this particular save as yours. If no name is given, a random name will be generated instead. This name can be changed by clicking your name in the speedrun info box, as long as the timer has not started yet. `),t(`input`,{directives:[{name:`model`,rawName:`v-model`,value:e.name,expression:`name`}],ref:`name`,staticClass:`c-modal-input c-modal-hard-reset__input`,attrs:{type:`text`},domProps:{value:e.name},on:{keyup:function(t){return!t.type.indexOf(`key`)&&e._k(t.keyCode,`esc`,27,t.key,[`Esc`,`Escape`])?null:e.emitClose.apply(null,arguments)},input:function(t){t.target.composing||(e.name=t.target.value)}}}),t(`br`),t(`br`),e._v(` Speedrun saves can be imported and exported like regular saves. Importing a speedrun save will mark it as a Segmented run, as importing and exporting allows for optimization of individual segments of the game. Without importing, saves will remain as Single-segment runs. `),t(`br`),t(`br`),e._v(` You can modify the Glyph RNG seed in the Options tab before starting your run, if desired. `),t(`br`),t(`br`),t(`div`,{staticClass:`c-modal-hard-reset-danger`},[e._v(` Starting a speedrun will reset your save to the beginning of the game. Some things will remain, such as full-game completion stats, visual settings, automator scripts, and Glyph cosmetics, but otherwise it will be as if you had just finished the entire game and chose to restart at the credits screen. Type in "Gotta Go Fast!" below to confirm and (re)start the run. `)]),t(`input`,{directives:[{name:`model`,rawName:`v-model`,value:e.confirmPhrase,expression:`confirmPhrase`}],ref:`confirmPhrase`,staticClass:`c-modal-input c-modal-hard-reset__input`,attrs:{type:`text`},domProps:{value:e.confirmPhrase},on:{keyup:function(t){return!t.type.indexOf(`key`)&&e._k(t.keyCode,`esc`,27,t.key,[`Esc`,`Escape`])?null:e.emitClose.apply(null,arguments)},input:function(t){t.target.composing||(e.confirmPhrase=t.target.value)}}})])])},[],!1,null,null,null,null).exports,GE={name:`StudyStringLine`,props:{tree:{type:Object,required:!0},intoEmpty:{type:Boolean,required:!0}},computed:{importDestString(){return this.intoEmpty?`into an empty Tree`:`with your current Tree`}},methods:{formatTheoremCost(e,t){let n=`${formatWithCommas(e)} TT`,r=`${formatWithCommas(t)} ST`;return t===0?n:`${n} + ${r}`}}},KE=D(GE,function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-modal-import-tree__tree-info-line`},[e.tree.timeTheorems===0&&e.tree.spaceTheorems===0?t(`div`,[t(`i`,[e._v(`Importing this `+e._s(e.importDestString)+` will not purchase any new Time Studies.`)])]):t(`div`,[e._v(` Importing `+e._s(e.importDestString)+` will purchase: `),t(`br`),e._v(` `+e._s(e.tree.newStudies)+` (Cost: `+e._s(e.formatTheoremCost(e.tree.timeTheorems,e.tree.spaceTheorems))+`) `)]),t(`br`)])},[],!1,null,null,null,null).exports,qE={name:`PseudoTimeStudyButton`,props:{setup:{type:Object,required:!0},forceIsBought:{type:Number,default:1},isNewFromImport:{type:Boolean,default:!1}},data(){return{isUseless:!1,doomedRealityStudy:!1,isBought:!1}},computed:{study(){return this.setup.study},styleObject(){return{top:`${this.setup.top}rem`,left:`${this.setup.left}rem`}},classObject(){return{"o-pseudo-time-study":!0,"l-time-study":!0,"c-pelle-useless":this.isUseless,"c-pelle-useless--bought":this.isUseless&&this.isBought,"c-pelle-useless--unavailable":this.isUseless&&!this.isBought,"o-pseudo-time-study--small":this.setup.isSmall,"o-time-study--unavailable":!this.isBought&&!this.isUseless,"o-time-study--bought":this.isBought&&!this.isUseless,"o-time-study--new-import":this.isNewFromImport&&!this.isBought}},pathClass(){switch(this.study.type){case TIME_STUDY_TYPE.NORMAL:switch(this.setup.path){case TIME_STUDY_PATH.ANTIMATTER_DIM:return`o-time-study-antimatter-dim`;case TIME_STUDY_PATH.INFINITY_DIM:return`o-time-study-infinity-dim`;case TIME_STUDY_PATH.TIME_DIM:return`o-time-study-time-dim`;case TIME_STUDY_PATH.ACTIVE:return`o-time-study-active`;case TIME_STUDY_PATH.PASSIVE:return`o-time-study-passive`;case TIME_STUDY_PATH.IDLE:return`o-time-study-idle`;case TIME_STUDY_PATH.LIGHT:return`o-time-study-light`;case TIME_STUDY_PATH.DARK:return`o-time-study-dark`;default:return`o-time-study-normal`}case TIME_STUDY_TYPE.ETERNITY_CHALLENGE:return`o-time-study-eternity-challenge`;case TIME_STUDY_TYPE.DILATION:return this.study.id===6?`o-time-study-reality`:`o-time-study-dilation`;case TIME_STUDY_TYPE.TRIAD:return`o-time-study-triad`}return``},studyClass(){return this.isUseless?``:`${this.pathClass}--${this.isBought?`bought`:`unavailable`}`},studyString(){switch(this.study.type){case TIME_STUDY_TYPE.NORMAL:case TIME_STUDY_TYPE.TRIAD:return`${this.study.id}`;case TIME_STUDY_TYPE.ETERNITY_CHALLENGE:return`EC${this.study.id}`}return``}},methods:{update(){let e=this.study;this.isUseless=Pelle.uselessTimeStudies.includes(this.study.id)&&Pelle.isDoomed,this.isBought=QE.getState(this.forceIsBought,e.isBought),this.doomedRealityStudy=e.type===TIME_STUDY_TYPE.DILATION&&e.id===6&&Pelle.isDoomed}}},JE=D(qE,function(){var e=this,t=e._self._c;return t(`button`,{class:[e.classObject,e.studyClass],style:e.styleObject},[e._v(` `+e._s(e.studyString)+` `)])},[],!1,null,`85e2c11a`,null,null).exports;function YE(e){switch(e.path){case TIME_STUDY_PATH.ANTIMATTER_DIM:return`o-time-study-connection--antimatter-dim`;case TIME_STUDY_PATH.INFINITY_DIM:return`o-time-study-connection--infinity-dim`;case TIME_STUDY_PATH.TIME_DIM:return`o-time-study-connection--time-dim`;case TIME_STUDY_PATH.ACTIVE:return`o-time-study-connection--active`;case TIME_STUDY_PATH.PASSIVE:return`o-time-study-connection--passive`;case TIME_STUDY_PATH.IDLE:return`o-time-study-connection--idle`;default:return}}var XE=r({name:`PseudoTimeStudyConnection`,props:{setup:{type:Object,required:!0},forceIsBought:{type:Number,default:1}},data(){return{isOverridden:!1,isBought:!1}},computed:{classObject(){let e={"o-time-study-connection":!0,"o-time-study-connection--bought":this.isBought},t,n=this.setup.connection,r=n.from,i=n.to;switch(i.type){case TIME_STUDY_TYPE.NORMAL:t=YE(i)||YE(r);break;case TIME_STUDY_TYPE.ETERNITY_CHALLENGE:t=`o-time-study-connection--eternity-challenge`;break;case TIME_STUDY_TYPE.DILATION:t=`o-time-study-connection--dilation`;break}return t!==void 0&&(e[t]=!0),e}},methods:{update(){this.isOverridden=this.setup.connection.isOverridden,this.isBought=QE.getState(this.forceIsBought,this.setup.isBought)},percents(e){return`${e*100}%`}}}),ZE=D(XE,function(){var e=this,t=e._self._c;return e._self._setupProxy,e.isOverridden?e._e():t(`line`,{class:e.classObject,attrs:{x1:e.percents(e.setup.x1),y1:e.percents(e.setup.y1),x2:e.percents(e.setup.x2),y2:e.percents(e.setup.y2)}})},[],!1,null,`247747fc`,null,null).exports;const QE={notBought:0,unspecified:1,bought:2,getState(e,t){switch(e){case this.notBought:return!1;case this.unspecified:return t;case this.bought:return!0}return t}};var $E={name:`TimeStudiesTab`,components:{PseudoTimeStudyButton:JE,PseudoTimeStudyConnection:ZE},props:{disregardCurrentStudies:{type:Boolean,default:!1},newStudies:{required:!0,validator:e=>Array.isArray(e)||e===void 0},showPreview:{type:Boolean,default:!0}},data(){return{layoutType:ae.NORMAL,vLevel:0,renderedStudyCount:0,isEnslaved:!1,delayTimer:0}},computed:{layout(){return ce.create(this.layoutType,.15)},studies(){return this.layout.studies},connections(){return this.layout.connections},treeStyleObject(){return{width:`${this.layout.width}rem`,height:`${this.layout.height}rem`}},respecClassObject(){return{"o-primary-btn--subtab-option":!0,"o-primary-btn--respec-active":this.respec}}},watch:{vLevel(){this.$recompute(`layout`)}},methods:{update(){this.layoutType=ae.current,this.vLevel=Ra.pets.v.level,this.isEnslaved=Enslaved.isRunning||Date.now()-this.delayTimer<1e3},studyComponent(e){switch(e.type){case TIME_STUDY_TYPE.NORMAL:return NormalTimeStudy;case TIME_STUDY_TYPE.ETERNITY_CHALLENGE:return ECTimeStudy;case TIME_STUDY_TYPE.DILATION:return DilationTimeStudy;case TIME_STUDY_TYPE.TRIAD:return TriadTimeStudy}throw TypeError(`Unknown Time Study type`)},studyString(e){switch(e.type){case TIME_STUDY_TYPE.NORMAL:case TIME_STUDY_TYPE.TRIAD:return`${e.id}`;case TIME_STUDY_TYPE.ETERNITY_CHALLENGE:return`EC${e.id}`}return`Dilation Study`},getStudyForceBoughtState(e){return this.disregardCurrentStudies?this.newStudies.includes(e)?QE.bought:QE.notBought:QE.unspecified},getConnectionForceBoughtState(e){return this.disregardCurrentStudies?this.newStudies.includes(this.studyString(e.connection.to))&&this.newStudies.includes(this.studyString(e.connection.from))?QE.bought:QE.notBought:QE.unspecified}}},eD=D($E,function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-study-string-preview__tree--wrapper`},[e.showPreview?t(`div`,{staticClass:`l-time-study-tree l-study-string-preview__tree`,style:e.treeStyleObject},[e._l(e.studies,function(n){return t(`PseudoTimeStudyButton`,{key:n.study.type.toString()+n.study.id.toString(),attrs:{setup:n,"force-is-bought":e.getStudyForceBoughtState(e.studyString(n.study)),"is-new-from-import":!e.disregardCurrentStudies&&e.newStudies.includes(e.studyString(n.study))}})}),t(`svg`,{staticClass:`l-time-study-connection`,style:e.treeStyleObject},e._l(e.connections,function(n,r){return t(`PseudoTimeStudyConnection`,{key:`connection`+r,attrs:{"force-is-bought":e.getConnectionForceBoughtState(n),setup:n}})}),1)],2):t(`span`,{staticClass:`c-unavailable-warning`},[e._v(` Preview Unavailable `)])])},[],!1,null,`f1f4f285`,null,null).exports,tD={name:`StudyTreeInfo`,props:{headerText:{type:String,required:!0},treeStatus:{type:Object,required:!0}}},nD=D(tD,function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`c-tree-info`},[t(`span`,{staticClass:`l-tree-info-header`,domProps:{innerHTML:e._s(e.headerText)}}),e.treeStatus.firstPaths?t(`div`,{staticClass:`l-modal-import-tree__tree-info-line`},[e._v(` Dimension Split: `+e._s(e.treeStatus.firstPaths)+` `)]):e._e(),e.treeStatus.secondPaths?t(`div`,{staticClass:`l-modal-import-tree__tree-info-line`},[e._v(` Pace Split: `+e._s(e.treeStatus.secondPaths)+` `)]):e._e(),e.treeStatus.ec>0?t(`div`,{staticClass:`l-modal-import-tree__tree-info-line`},[e._v(` Eternity Challenge: `+e._s(e.treeStatus.ec)+` `+e._s(e.treeStatus.startEC?`(will start)`:``)+` `)]):e._e()])},[],!1,null,`98fa4662`,null,null).exports,rD=e(Tx()),iD=``,aD={name:`StudyStringModal`,components:{ModalWrapperChoice:BC,StudyStringLine:KE,PrimaryButton:L,StudyStringPreview:eD,StudyTreeInfo:nD},props:{id:{type:Number,required:!0},deleting:{type:Boolean,required:!1,default:!1}},data(){return{input:``,name:``,respecAndLoad:!1,canEternity:!1}},computed:{isImporting(){return this.id===-1},importedTree(){if(!this.inputIsValidTree)return{};let e=new TimeStudyTree(this.truncatedInput),t=e.purchasedStudies.map(e=>this.studyString(e));return{timeTheorems:e.spentTheorems[0],spaceTheorems:e.spentTheorems[1],newStudies:makeEnumeration(t),newStudiesArray:t,invalidStudies:e.invalidStudies,firstPaths:makeEnumeration(e.dimensionPaths),secondPaths:makeEnumeration(e.pacePaths),ec:e.ec,startEC:e.startEC,hasInfo:makeEnumeration(e.dimensionPaths)||e.ec>0}},combinedTree(){if(!this.inputIsValidTree)return{};let e=GameCache.currentStudyTree.value,t=this.combinedTreeObject,n=t.purchasedStudies.filter(t=>!e.purchasedStudies.includes(t)).map(e=>this.studyString(e)),r=TimeStudyTree.getECFromString(this.truncatedInput),i=t.startEC,a=[0,r].includes(player.challenge.eternity.current),o=t.ec!==r;return{timeTheorems:t.spentTheorems[0].sub(e.spentTheorems[0]),spaceTheorems:t.spentTheorems[1]-e.spentTheorems[1],newStudies:makeEnumeration(n),newStudiesArray:n,firstPaths:makeEnumeration(t.dimensionPaths),secondPaths:makeEnumeration(t.pacePaths),ec:t.ec,startEC:i&&a&&!o,hasInfo:makeEnumeration(t.dimensionPaths)||t.ec>0}},combinedTreeObject(){let e=new TimeStudyTree;return e.attemptBuyArray(TimeStudyTree.currentStudies,!1),e.attemptBuyArray(e.parseStudyImport(this.truncatedInput),!0),e},modalTitle(){return this.deleting?`Deleting Study Preset "${this.name}"`:this.isImporting?`Input your tree`:`Editing Study Preset "${this.name}"`},invalidMessage(){if(!this.inputIsValidTree||this.importedTree.invalidStudies.length===0)return null;let e=`#${this.truncatedInput}#`;e.length>300&&(e=`${e.slice(0,297)}...`);for(let t of this.importedTree.invalidStudies){let n=`${t}`.match(/(EC)?(\d+)/u),r=Number.parseInt(n[2],10);switch(n[1]){case`EC`:e=e.replaceAll(RegExp(`\\|(${r})`,`gu`),`|<span style="color: var(--color-bad);">$1</span>`);break;default:e=e.replaceAll(RegExp(`(\\D)(${r})(\\D)`,`gu`),`$1<span style="color: var(--color-bad);">$2</span>$3`);break}}return`Your import string has invalid study IDs: ${e.replaceAll(`#`,``).replaceAll(`,`,`, `)}
        <br><br>`},truncatedInput(){return TimeStudyTree.truncateInput(this.input)},hasInput(){return this.truncatedInput!==``},inputIsValid(){return this.inputIsValidTree||this.inputIsSecret},inputIsValidTree(){return TimeStudyTree.isValidImportString(this.truncatedInput)},inputIsSecret(){return[`08b819f253b684773e876df530f95dcb85d2fb052046fa16ec321c65f3330608`,`bb450c2a3869bae412ed0b4304dc229521fc69f0fdcc95b3b61460aaf5658fc4`].includes((0,rD.sha512_256)(this.input.toLowerCase()))},confirmText(){return this.deleting?`Delete`:this.isImporting?`Import`:`Save`}},watch:{input(e){iD=e}},created(){let e=player.timestudy.presets[this.id];this.input=e?e.studies:iD,this.name=e?e.name:``},mounted(){this.$refs.input.select()},methods:{update(){this.canEternity=Player.canEternity},confirm(){if(this.deleting)this.deletePreset();else if(this.isImporting){if(this.respecAndLoad&&Player.canEternity){player.respec=!0;let e=new TimeStudyTree(this.truncatedInput);animateAndEternity(()=>TimeStudyTree.commitToGameState(e.purchasedStudies,!1,e.startEC));return}this.importTree()}else this.savePreset()},convertInputShorthands(){this.input=TimeStudyTree.formatStudyList(this.input)},importTree(){this.inputIsValid&&(this.inputIsSecret&&SecretAchievement(37).unlock(),iD=``,this.emitClose(),TimeStudyTree.commitToGameState(this.combinedTreeObject.purchasedStudies,!1,this.combinedTree.startEC))},savePreset(){this.inputIsValid&&(player.timestudy.presets[this.id].studies=this.input,GameUI.notify.eternity(`Study Tree ${this.name} successfully edited.`),this.emitClose())},deletePreset(){let e=player.timestudy.presets[this.id].name,t=e?`Study preset "${e}"`:`Study preset`;player.timestudy.presets[this.id].studies=``,player.timestudy.presets[this.id].name=``,GameUI.notify.eternity(`${t} deleted from slot ${this.id+1}`)},studyString(e){return e instanceof ECTimeStudyState?`EC${e.id}`:`${e.id}`}}},oD=D(aD,function(){var e=this,t=e._self._c;return t(`ModalWrapperChoice`,{staticClass:`c-modal-import-tree`,attrs:{"show-cancel":!e.inputIsValid,"show-confirm":e.inputIsValid},on:{confirm:e.confirm},scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` `+e._s(e.modalTitle)+` `)]},proxy:!0},{key:`confirm-text`,fn:function(){return[e._v(` `+e._s(e.confirmText)+` `)]},proxy:!0}])},[t(`input`,{directives:[{name:`model`,rawName:`v-model`,value:e.input,expression:`input`}],ref:`input`,staticClass:`c-modal-input c-modal-import-tree__input`,class:{"l-delete-input":e.deleting},attrs:{type:`text`,maxlength:`1500`,disabled:e.deleting},domProps:{value:e.input},on:{keyup:[function(t){return!t.type.indexOf(`key`)&&e._k(t.keyCode,`enter`,13,t.key,`Enter`)?null:e.confirm.apply(null,arguments)},function(t){return!t.type.indexOf(`key`)&&e._k(t.keyCode,`esc`,27,t.key,[`Esc`,`Escape`])?null:e.emitClose.apply(null,arguments)}],input:function(t){t.target.composing||(e.input=t.target.value)}}}),t(`div`,{staticClass:`c-two-column`},[t(`div`,{staticClass:`c-study-info l-modal-import-tree__tree-info`},[e.inputIsSecret?t(`div`,[e._v(` ??? `)]):e.inputIsValidTree?[e.invalidMessage?t(`div`,{staticClass:`l-modal-import-tree__tree-info-line`,domProps:{innerHTML:e._s(e.invalidMessage)}}):e._e(),e.isImporting?t(`StudyStringLine`,{attrs:{tree:e.combinedTree,"into-empty":!1}}):e._e(),t(`StudyStringLine`,{attrs:{tree:e.importedTree,"into-empty":!0}}),e.deleting&&e.importedTree.hasInfo?t(`StudyTreeInfo`,{attrs:{"header-text":`Study Preset contains:`,"tree-status":e.importedTree}}):e._e(),!e.deleting&&!e.isImporting&&e.importedTree.hasInfo?t(`StudyTreeInfo`,{attrs:{"header-text":`Status after loading with <b>no studies</b>:`,"tree-status":e.importedTree}}):e._e(),!e.deleting&&e.combinedTree.hasInfo?t(`StudyTreeInfo`,{attrs:{"header-text":`Status after loading with <b>current tree</b>:`,"tree-status":e.combinedTree}}):e._e()]:e._e(),!e.deleting&&!e.inputIsValidTree&&e.hasInput?t(`div`,[e._v(` Not a valid tree `)]):e._e()],2),t(`div`,{staticClass:`c-study-preview`},[t(`StudyStringPreview`,{attrs:{"show-preview":e.inputIsValidTree,"new-studies":!e.isImporting||e.canEternity&&e.respecAndLoad?e.importedTree.newStudiesArray:e.combinedTree.newStudiesArray,"disregard-current-studies":!e.isImporting||e.canEternity&&e.respecAndLoad}})],1)]),!e.isImporting&&e.inputIsValidTree?t(`div`,[t(`br`),e.deleting?e._e():t(`PrimaryButton`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:`This will format the study preset text, for example, changing 'a,b,c|d' to 'a, b, c | d'.`,expression:`'This will format the study preset text, for example, changing \\'a,b,c|d\\' to \\'a, b, c | d\\'.'`}],on:{click:e.convertInputShorthands}},[e._v(` Format Preset Text `)])],1):e._e(),e.isImporting?t(`span`,[t(`br`),t(`div`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:e.canEternity?``:`You are currently unable to eternity, so this will only do a normal load.`,expression:`canEternity ? '' : 'You are currently unable to eternity, so this will only do a normal load.'`}],staticClass:`c-modal__confirmation-toggle`,on:{click:function(t){e.respecAndLoad=!e.respecAndLoad}}},[t(`div`,{class:{"c-modal__confirmation-toggle__checkbox":!0,"c-modal__confirmation-toggle__checkbox--active":e.respecAndLoad}},[e.respecAndLoad?t(`span`,{staticClass:`fas fa-check`}):e._e()]),t(`span`,{staticClass:`c-modal__confirmation-toggle__text`},[e._v(` Also respec tree and eternity `),e.canEternity?e._e():t(`span`,{staticClass:`c-modal__confirmation-toggle__warning`},[e._v(` ! `)])])])]):e._e()])},[],!1,null,`10546829`,null,null).exports,sD={name:`SwitchAutomatorEditorModal`,components:{ModalWrapperChoice:BC},props:{callback:{type:Function,required:!1,default:()=>({})},lostBlocks:{type:Number,required:!1,default:0}},data(){return{errorCount:0,isCurrentlyBlocks:!1}},computed:{currentScriptID:{get(){return this.$viewModel.tabs.reality.automator.editorScriptID},set(e){this.$viewModel.tabs.reality.automator.editorScriptID=e}},otherMode(){return this.isCurrentlyBlocks?`Text`:`Block`}},methods:{update(){this.errorCount=AutomatorData.currentErrors().length,this.isCurrentlyBlocks=player.reality.automator.type===AUTOMATOR_TYPE.BLOCK},toggleAutomatorMode(){AutomatorBackend.changeModes(this.currentScriptID),this.callback?.()}}},cD=D(sD,function(){var e=this,t=e._self._c;return t(`ModalWrapperChoice`,{attrs:{option:`switchAutomatorMode`},on:{confirm:e.toggleAutomatorMode},scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` Change Automator to `+e._s(e.otherMode)+` editor `)]},proxy:!0},{key:`confirm-text`,fn:function(){return[e._v(` Change Modes `)]},proxy:!0}])},[t(`div`,{staticClass:`c-modal-message__text`},[e._v(` This will stop your current script if it is running! `),e.errorCount?t(`div`,[t(`br`),e._v(` Your script has some errors which may not get converted properly to `+e._s(e.otherMode)+` mode. Continuing on will make the Automator attempt to parse these lines anyway, although some information may get lost or not be converted properly. `)]):e._e(),e.lostBlocks?t(`b`,[t(`br`),e._v(` Warning: Your script also currently has some lines which cannot interpreted as particular commands. These lines will end up being deleted since there is no block they can be converted into. If an error occurs at the start of a loop or IF, this may end up deleting large portions of your script! `),t(`span`,{staticClass:`l-lost-text`},[e._v(` Changing editor modes right now will cause `+e._s(e.quantifyInt(`line`,e.lostBlocks))+` of code to be irreversibly lost! `)])]):e._e(),t(`br`),t(`span`,{staticClass:`l-lost-text`},[e._v(` Hiding this confirmation is not recommended, as it may cause parts of scripts to be immediately and irreversibly lost if your script has errors when attempting to switch modes. `)]),t(`br`),t(`br`),e._v(` Are you sure you want to change to the `+e._s(e.otherMode)+` editor? `)])])},[],!1,null,`b212d754`,null,null).exports,lD=D({name:`UiChoiceModal`,components:{ModalWrapperChoice:BC},computed:{listEntries(){return[`Many more game events now have animations. If these impact your performance or gameplay, they can be
        disabled in the Visual Options tab.`,`New confirmation windows have replaced the default Javascript alert windows. These can be disabled in the
        Gameplay Options tab.`,`The game now also has a new sleek layout which was designed with more Modern design practices in mind.`]}},methods:{handleYesClick(){GameOptions.toggleUI()}}},function(){var e=this,t=e._self._c;return t(`ModalWrapperChoice`,{on:{confirm:e.handleYesClick},scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` Visual Changes `)]},proxy:!0},{key:`cancel-text`,fn:function(){return[e._v(` Remain `)]},proxy:!0},{key:`confirm-text`,fn:function(){return[e._v(` Swap `)]},proxy:!0}])},[t(`div`,{staticClass:`c-modal-message__text`},[e._v(` We noticed that you've loaded an old save; a few visual changes have been made since older versions of the game: `),t(`br`),t(`br`),t(`div`,{staticClass:`c-visual-change-list`},e._l(e.listEntries,function(n,r){return t(`div`,{key:r,staticClass:`c-visual-change-list-entry`},[t(`b`,[e._v(`•`)]),e._v(` `+e._s(n)+` `)])}),0),t(`br`),t(`br`),e._v(` You can change between the Classic UI which older versions of the game used and the newer Modern UI in the Visual Options tab at any time. Would you like to swap to the Modern UI now? `)])])},[],!1,null,`05538b3e`,null,null).exports,uD=D({name:`UndoGlyphModal`,components:{ModalWrapperChoice:BC},data(){return{showStoredGameTime:!1}},methods:{update(){this.showStoredGameTime=Enslaved.isUnlocked},realityInvalidate(){this.emitClose(),Modal.message.show(`Glyph Undo can only undo with a Reality!`,{closeEvent:GAME_EVENT.REALITY_RESET_AFTER})},handleYesClick(){this.emitClose(),Glyphs.undo()}}},function(){var e=this,t=e._self._c;return t(`ModalWrapperChoice`,{attrs:{option:`glyphUndo`},on:{confirm:e.handleYesClick},scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` You are about to undo equipping a Glyph `)]},proxy:!0}])},[t(`div`,{staticClass:`c-modal-message__text c-text-wrapper`},[e._v(` The last equipped Glyph will be removed. Reality will be reset, but some things will be restored to what they were when it was equipped: `),t(`br`),t(`div`,{staticClass:`c-text-wrapper`},[t(`br`),e._v(`- Antimatter, Infinity Points, and Eternity Points `),t(`br`),e._v(`- Dilation Upgrades, Tachyon Particles, and Dilated Time `),t(`br`),e._v(`- Time Theorems and Eternity Challenge completions `),t(`br`),e._v(`- Time Dimension and Reality unlocks `),t(`br`),e._v(`- Time in current Infinity/Eternity/Reality `),e.showStoredGameTime?t(`span`,[t(`br`),e._v(`- Stored game time`)]):e._e()]),t(`br`),e._v(` Note that if you invalidate special requirements for certain things (such as the achievement for completing a Reality without producing antimatter), they will remain invalid even after undoing. In those cases, you will need to complete the conditions in a single Reality without using undo. `)])])},[],!1,null,`e257315f`,null,null).exports,dD={name:`UpgradeMechanicLockModal`,components:{ModalWrapperChoice:BC},props:{upgrade:{type:Object,required:!0},isImaginary:{type:Boolean,required:!0},specialLockText:{type:String,required:!1,default:null}},computed:{upgradeStr(){return this.isImaginary?`Imaginary Upgrade`:`Reality Upgrade`},lockEvent(){return this.specialLockText??this.upgrade.lockEvent}},methods:{disableLock(){this.upgrade.setMechanicLock(!1)}}},fD=D(dD,function(){var e=this,t=e._self._c;return t(`ModalWrapperChoice`,{on:{confirm:e.disableLock},scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` `+e._s(e.upgradeStr)+` Condition Lock `)]},proxy:!0},{key:`confirm-text`,fn:function(){return[e._v(` Disable Lock `)]},proxy:!0}])},[t(`div`,{staticClass:`c-modal-message__text`},[e._v(` Are you sure you wish to `+e._s(e.lockEvent)+`? Doing this right now will cause you to `),t(`span`,{staticClass:`l-emphasis`},[e._v(` fail the requirement for the `+e._s(e.upgradeStr)+` "`+e._s(e.upgrade.name)+`" `)]),t(`span`,{attrs:{"ach-tooltip":e.upgrade.requirement}},[t(`i`,{staticClass:`fas fa-question-circle`})]),t(`br`),t(`br`),e._v(` Selecting "Cancel" will close this modal with no effect, while selecting "Disable Lock" will disable the requirement check for this upgrade and prevent this message from reappearing unless you turn it back on. `),t(`br`),t(`br`),e._v(` Neither of these options will perform the action you just attempted, so you will need to try again. `)])])},[],!1,null,`d318a3b8`,null,null).exports,pD={entries:[{name:`FE000000`,link:`https://dan-simon.github.io/misc/fe000000/`,image:`game--hex-game.png`},{name:`Trimps`,link:`https://trimps.github.io/`,image:`game--trimps.png`},{name:`Mine Defense`,link:`http://scholtek.com/minedefense`,image:`game--mine-defense.png`},{name:`Wizard and Minion Idle`,link:`https://www.kongregate.com/games/Oninou/wami`,image:`game--wami.png`},{name:`Anti-Idle`,link:`https://www.kongregate.com/games/Tukkun/anti-idle-the-game`,image:`game--anti-idle.png`},{name:`Synergism`,link:`https://synergism.cc/`,image:`game--synergism.png`},{name:`Universal Paperclips`,link:`https://www.decisionproblem.com/paperclips/`,image:`game--universal-paperclips.png`},{name:`Monies 2`,link:`https://sneekxy.nmtechgroup.com/monies2/`,image:`game--monies2.png`},{name:`The First Alkahistorian`,link:`https://nagshell.github.io/elemental-inception-incremental/`,image:`game--alkahistorian.png`},{name:`Melvor Idle`,link:`https://melvoridle.com/`,image:`game--melvor-idle.svg`}],selected:-1},mD=!1,hD=D({name:`S12Games`,data(){return{S12Games:pD}},mounted(){document.body.addEventListener(`click`,this.clearSelected)},beforeDestroy(){document.body.removeEventListener(`click`,this.clearSelected),this.clearSelected()},methods:{clearSelected(){mD||(pD.selected=-1)},handleClick(e){pD.selected===e?window.open(pD.entries[e].link):(pD.selected=e,mD=!0,setTimeout(()=>mD=!1,0))}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`c-s12-games-container`},e._l(e.S12Games.entries,function(n,r){return t(`div`,{key:n.name,staticClass:`c-s12-game`,class:{"c-s12-game--selected":e.S12Games.selected===r},on:{click:function(t){return e.handleClick(r)}}},[t(`div`,{staticClass:`c-s12-game__inner`},[t(`img`,{staticClass:`c-s12-game__img`,attrs:{src:`images/s12/${n.image}`}}),t(`div`,{staticClass:`c-s12-game__text`},[e._v(` `+e._s(n.name)+` `)])])])}),0)},[],!1,null,`cba80203`,null,null).exports,gD=D({name:`S12GamesModal`,components:{ModalWrapper:jw,S12GameEntries:hD},data(){return{S12Games:pD}},methods:{update(){this.$viewModel.theme!==`S12`&&EventHub.dispatch(GAME_EVENT.CLOSE_MODAL)}}},function(){var e=this,t=e._self._c;return t(`ModalWrapper`,{staticClass:`c-modal-s12-games`},[t(`div`,{staticClass:`c-modal__title`},[e._v(` Games `)]),t(`S12GameEntries`),t(`div`,{staticClass:`c-modal-s12-games__magnified-display`},[e.S12Games.selected===-1?e._e():[t(`img`,{staticClass:`c-modal-s12-games__magnified-display__img`,attrs:{src:`images/s12/${e.S12Games.entries[e.S12Games.selected].image}`}}),t(`b`,{staticClass:`c-modal-s12-games__magnified-display__text`},[e._v(` `+e._s(e.S12Games.entries[e.S12Games.selected].name)+` `)])]],2)],1)},[],!1,null,`5bb0be53`,null,null).exports,_D=r({name:`NGPlusChoiceModal`,components:{ModalWrapperChoice:BC},methods:{loadWithNGPlus(){}}}),vD=D(_D,function(){var e=this,t=e._self._c;return e._self._setupProxy,t(`ModalWrapperChoice`,{attrs:{option:`ngPlusMode`},on:{confirm:e.loadWithNGPlus},scopedSlots:e._u([{key:`header`,fn:function(){return[e._v(` NG+ Features `)]},proxy:!0},{key:`confirm-text`,fn:function(){return[e._v(` Yeah `)]},proxy:!0}])},[t(`div`,{staticClass:`c-modal-message__text`},[e._v(` You can load this save with NG+ features enabled allowing you to skip most of the pre-NG+3 boring sections but this will result in spoilers if you haven't played before. `),t(`br`),e._v(` Do you want to enable NG+ mode? `)])])},[],!1,null,`40b68242`,null,null).exports,yD=0,Q=class e{constructor(e,t=0,n){this._component=e,this._modalConfig={},this._priority=t,this._closeEvent=n}applyCloseListeners(e){let t=[GAME_EVENT.DIMBOOST_AFTER,GAME_EVENT.GALAXY_RESET_AFTER,GAME_EVENT.BIG_CRUNCH_AFTER,GAME_EVENT.ETERNITY_RESET_AFTER,GAME_EVENT.REALITY_RESET_AFTER],n=!1;for(let r of t)r===e&&(n=!0),n&&EventHub.ui.on(r,()=>this.removeFromQueue(),this._component);n||EventHub.ui.on(e,()=>this.removeFromQueue(),this._component)}show(t){GameUI.initialized&&(this._uniqueID=yD++,this._props={...t},this._closeEvent&&this.applyCloseListeners(this._closeEvent),t?.closeEvent&&this.applyCloseListeners(t.closeEvent),ui.view.modal.queue.unshift(this),e.sortModalQueue())}get isOpen(){return ui.view.modal.current===this}get component(){return this._component}get props(){return this._props}get priority(){return this._priority}removeFromQueue(){EventHub.ui.offAll(this._component),ui.view.modal.queue=ui.view.modal.queue.filter(e=>e._uniqueID!==this._uniqueID),ui.view.modal.queue.length===0?ui.view.modal.current=void 0:ui.view.modal.current=ui.view.modal.queue[0]}static sortModalQueue(){let e=ui.view.modal.queue;e.sort((e,t)=>t.priority-e.priority);let t=[...new Set(e)];ui.view.modal.queue=t,ui.view.modal.current=t[0]}static hide(){GameUI.initialized&&(ui.view.modal.queue.shift(),ui.view.modal.queue.length===0?ui.view.modal.current=void 0:ui.view.modal.current=ui.view.modal.queue[0],ui.view.modal.cloudConflict=[])}static hideAll(){if(GameUI.initialized){for(;ui.view.modal.queue.length>0;)ui.view.modal.queue[0].hide?ui.view.modal.queue[0].hide():e.hide();ui.view.modal.current=void 0}}static get isOpen(){return ui.view.modal.current instanceof this}},bD=class extends Q{show(e){super.show({id:e})}},xD=class extends Q{show(e){super.show({diff:e})}};Q.startEternityChallenge=new bD(JC),Q.startInfinityChallenge=new bD(XC),Q.startNormalChallenge=new bD($C),Q.catchup=new xD(QT,-1),Q.dimensionBoost=new Q(sw,1,GAME_EVENT.DIMBOOST_AFTER),Q.antimatterGalaxy=new Q(tw,1,GAME_EVENT.GALAXY_RESET_AFTER),Q.bigCrunch=new Q(aw,1,GAME_EVENT.BIG_CRUNCH_AFTER),Q.exitChallenge=new Q(gw,1,GAME_EVENT.REALITY_RESET_AFTER),Q.replicantiGalaxy=new Q(Dw,1,GAME_EVENT.ETERNITY_RESET_AFTER),Q.eternity=new Q(mw,1,GAME_EVENT.ETERNITY_RESET_AFTER),Q.enterDilation=new Q(pw,1,GAME_EVENT.REALITY_RESET_AFTER),Q.exitDilation=new Q(_w,1,GAME_EVENT.REALITY_RESET_AFTER),Q.reality=new Q(Ew,1,GAME_EVENT.REALITY_RESET_AFTER),Q.resetReality=new Q(Ow,1,GAME_EVENT.REALITY_RESET_AFTER),Q.celestials=new Q(dw,1),Q.hardReset=new Q(vw,1),Q.backupWindows=new Q(Ww,1),Q.enterSpeedrun=new Q(WE),Q.modifySeed=new Q(FE),Q.changeName=new Q(eE),Q.armageddon=new Q(nw,1),Q.confirmationOptions=new Q(qw),Q.infoDisplayOptions=new Q(oT),Q.awayProgressOptions=new Q(Vw),Q.glyphDisplayOptions=new Q(eT),Q.cosmeticSetChoice=new Q(Yw),Q.singleGlyphAppearance=new Q(fT),Q.hotkeys=new Q(aT),Q.newsOptions=new Q(sT),Q.animationOptions=new Q(Rw),Q.hiddenTabs=new Q(iT),Q.preferredTree=new Q(uT),Q.notation=new Q(lT),Q.upgradeLock=new Q(fD,1),Q.deleteCompanion=new Q(pT,1),Q.glyphDelete=new Q(hT,1,GAME_EVENT.GLYPHS_CHANGED),Q.glyphPurge=new Q(yT,1,GAME_EVENT.GLYPHS_CHANGED),Q.glyphSacrifice=new Q(CT,1,GAME_EVENT.GLYPHS_CHANGED),Q.glyphRefine=new Q(xT,1,GAME_EVENT.GLYPHS_CHANGED),Q.deleteAllUnprotectedGlyphs=new Q(_T,1,GAME_EVENT.GLYPHS_CHANGED),Q.deleteAllRejectedGlyphs=new Q(gT,1,GAME_EVENT.GLYPHS_CHANGED),Q.glyphShowcasePanel=new Q(yE),Q.glyphUndo=new Q(uD,1,GAME_EVENT.REALITY_RESET_AFTER),Q.glyphReplace=new Q(zE,1,GAME_EVENT.REALITY_RESET_AFTER),Q.enslavedHints=new Q(sE),Q.realityGlyph=new Q(LE),Q.glyphSetSaveDelete=new Q(hE),Q.uiChoice=new Q(lD),Q.h2p=new Q(bE),Q.information=new Q(jE),Q.credits=new Q(iE,1),Q.changelog=new Q($T,1),Q.awayProgress=new Q(qT),Q.loadGame=new Q(PE),Q.import=new Q(EE),Q.importFilter=new Q(wE),Q.importScriptData=new Q(xE),Q.automatorScriptDelete=new Q(oE),Q.automatorScriptTemplate=new Q(WT),Q.switchAutomatorEditorMode=new Q(cD),Q.clearAutomatorConstants=new Q(tE),Q.importTSConstants=new Q(DE),Q.autobuyerEditModal=new Q(HT),Q.studyString=new Q(oD),Q.singularityMilestones=new Q(UE),Q.pelleEffects=new Q(IE),Q.sacrifice=new Q(BE,1,GAME_EVENT.DIMBOOST_AFTER),Q.breakInfinity=new Q(JT,1,GAME_EVENT.ETERNITY_RESET_AFTER),Q.s12Games=new Q(gD);function SD(e){let t={realTimePlayed:0,totalAntimatter:new Decimal(0),infinities:new Decimal(0),eternities:new Decimal(0),realities:0,infinityPoints:new Decimal(0),eternityPoints:new Decimal(0),realityMachines:new Decimal(0),imaginaryMachines:new Decimal(0),dilatedTime:new Decimal(0),bestLevel:0,pelleAM:new Decimal(0),remnants:0,realityShards:new Decimal(0),pelleLore:0,saveName:``,compositeProgress:0};return t.realTimePlayed=e.records?.realTimePlayed??100*e.totalTimePlayed,t.totalAntimatter.copyFrom(new Decimal(e.records?.totalAntimatter)),t.infinities.copyFrom(new Decimal(e.infinities)),t.eternities.copyFrom(new Decimal(e.eternities)),t.realities=e.realities??0,t.infinityPoints.copyFrom(new Decimal(e.infinityPoints)),t.eternityPoints.copyFrom(new Decimal(e.eternityPoints)),t.realityMachines.copyFrom(new Decimal(e.reality?.realityMachines)),t.imaginaryMachines.copyFrom(new Decimal(e.reality?.imaginaryMachines)),t.dilatedTime.copyFrom(new Decimal(e.records?.thisReality.maxDT??e.dilation?.dilatedTime??0)),t.bestLevel=e.records?.bestReality.glyphLevel??0,t.pelleAM.copyFrom(new Decimal(e.celestials?.pelle.records.totalAntimatter)),t.remnants=e.celestials?.pelle.remnants??0,t.realityShards.copyFrom(new Decimal(e.celestials?.pelle.realityShards)),t.pelleLore=e.celestials?.pelle.quoteBits??0,t.saveName=e.options?.saveFileName??``,t.compositeProgress=jx.getCompositeProgress(e),t}Q.cloudSaveConflict=new Q(KC),Q.cloudLoadConflict=new Q(GC),Q.cloudInvalidData=new Q(HC),Q.addCloudConflict=function(e,t,n,r,i){Q.hide(),ui.view.modal.cloudConflict={saveId:e,saveComparison:t,cloud:SD(n),local:SD(r),onAccept:i}},Q.addImportConflict=function(e,t){Q.hide(),ui.view.modal.cloudConflict={importingSave:SD(e),currentSave:SD(t)}},Q.message=new class extends Q{show(e,t={},n=0){if(GameUI.initialized){if(this.currPriority===void 0)this.currPriority=n;else if(n<this.currPriority)return;super.show(),this.message=e,this.callback=t.callback,this.closeButton=t.closeButton??!1,EventHub.ui.offAll(this._component),t.closeEvent&&this.applyCloseListeners(t.closeEvent)}}hide(){EventHub.ui.offAll(this._component),this.currPriority=void 0,Q.hide()}}(ZC,2),Q.ngPlusMode=new Q(vD);var CD=e(Tx());const wD=function(e,t){this.name=e,this.isDark=function(){return this.isDefault()||e===`S12`?player.options.newUI:t.isDark},this.isMetro=t.isMetro,this.isAnimated=t.isAnimated,this.isSecret=t.isSecret,this.isDefault=function(){return e===`Normal`},this.isAvailable=function(){return this.isSecret?player.secretUnlocks.themes.some(t=>t.match(/^S[0-9]*/u)[0]===e):!0},this.displayName=function(){return!this.isSecret||!this.isAvailable()?e:player.secretUnlocks.themes.find(t=>t.match(/^S[0-9]*/u)[0]===e).replace(/^S[0-9]*/u,``)},this.set=function(){document.body.classList.remove(...document.body.classList),document.body.classList.add(this.cssClass()),this.isMetro&&document.body.classList.add(`s-base--metro`),this.isDark()&&document.body.classList.add(`s-base--dark`),this.isAnimated&&player.options.animations.background?document.querySelector(`#background-animations`).style.display=`block`:document.querySelector(`#background-animations`).style.display=`none`,player.options.newUI?player.options.themeModern=e:player.options.themeClassic=e,ui.view.theme=e,window.getSelection().removeAllRanges(),PerkNetwork.forceNetworkRemake()},this.cssClass=function(){return`t-${this.name.replaceAll(/\s+/gu,`-`).toLowerCase()}`}};wD.currentName=function(){return player.options.newUI?player.options.themeModern:player.options.themeClassic},wD.current=function(){return TD.find(wD.currentName())},wD.set=function(e){let t=TD.find(e);return t.set(),t},wD.secretThemeIndex=function(e){let t=[`ef853879b60fa6755d9599fd756c94d112f987c0cd596abf48b08f33af5ff537`,`078570d37e6ffbf06e079e07c3c7987814e03436d00a17230ef5f24b1cb93290`,`a3d64c3d1e1749b60b2b3dba10ed5ae9425300e9600ca05bcbafe4df6c69941f`,`530fac71cc0b151b24d966493a6f4a0817921b37e4d3e593439e624c214ab2b2`,`cb72e4a679254df5f99110dc7a93924628b916d2e069e3ad206db92068cb0883`,`c8fac64da08d674123c32c936b14115ab384fe556fd24e431eb184a8dde21137`,`da3b3c152083f0c70245f104f06331497b97b52ac80edec05e26a33ee704cae7`,`1bbc0800145e72dfea5bfb218eba824c52510488b3a05ee88feaaa6683322d19`,`dba8336cd3224649d07952b00045a6ec3c8df277aa8a0a0e3e7c2aaa77f1fbb9`,`73de8a7f9efa1cbffc80a8effc9891a799127cd204b3a8b023bea8f513ed4753`,`f3a71114261b4af6517a53f89bf0c6b56bb81b6f0e931d0e0d71249eb196628c`,`1248689171faaa0abb68279199a8d2eb232dba10d2dacb79a705f680b6862c0e`],n=(0,CD.sha512_256)(e.toUpperCase());return t.indexOf(n)},wD.isSecretTheme=function(e){return wD.secretThemeIndex(e)!==-1},wD.animatedThemeUnlocked=function(){return TD.all.some(e=>e.isAvailable&&e.isAnimated)},wD.tryUnlock=function(e){let t=wD.secretThemeIndex(e);if(t===-1)return!1;let n=`S${t+1}`,r=n+e.capitalize(),i=player.secretUnlocks.themes.has(r);return player.secretUnlocks.themes.add(r),wD.set(n),SecretAchievement(25).unlock(),i||(GameUI.notify.success(`You have unlocked the ${e.capitalize()} theme!`,5e3),wD.current().isAnimated&&setTimeout(Modal.message.show(`This secret theme has animations. If they are giving you performance issues,
        you can turn them off in the Options/Visual tab to reduce lag.`),100)),!0},wD.create=function(e,t){let n={isDark:t.dark,isMetro:t.metro,isAnimated:t.animated,isSecret:t.secret};return new wD(e,n)};const TD={all:[wD.create(`Normal`,{}),wD.create(`Metro`,{metro:!0}),wD.create(`Dark`,{dark:!0}),wD.create(`Dark Metro`,{dark:!0,metro:!0}),wD.create(`Inverted`,{}),wD.create(`Inverted Metro`,{metro:!0}),wD.create(`AMOLED`,{dark:!0}),wD.create(`AMOLED Metro`,{dark:!0,metro:!0}),wD.create(`S1`,{animated:!0,secret:!0}),wD.create(`S2`,{secret:!0}),wD.create(`S3`,{secret:!0}),wD.create(`S4`,{secret:!0}),wD.create(`S5`,{secret:!0}),wD.create(`S6`,{dark:!0,animated:!0,secret:!0}),wD.create(`S7`,{metro:!0,secret:!0}),wD.create(`S8`,{metro:!0,secret:!0}),wD.create(`S9`,{secret:!0}),wD.create(`S10`,{dark:!0,metro:!0,animated:!0,secret:!0}),wD.create(`S11`,{dark:!0,animated:!0,secret:!0}),wD.create(`S12`,{secret:!0})],available(){return TD.all.filter(e=>e.isAvailable())},find(e){return TD.all.find(t=>t.name===e)}};var ED=e(Tx()),DD=class{static toggleNews(){player.options.news.enabled=!player.options.news.enabled,ui.view.news=player.options.news.enabled,GameStorage.save()}static toggleUI(){player.options.newUI=!player.options.newUI,ui.view.newUI=player.options.newUI,Themes.find(Theme.currentName()).set(),Tn.updateZoom(),GameStorage.save()}static cloudSave(){Cloud.saveCheck(!0)}static cloudLoad(){Cloud.loadCheck()}static logout(){Cloud.logout()}static refreshUpdateRate(){player.options.updateRate===200&&SecretAchievement(31).unlock(),GameIntervals.gameLoop.restart()}static refreshAutosaveInterval(){GameIntervals.save.restart()}},OD=[`80b7fdc794f5dfc944da6a445a3f21a2d0f7c974d044f2ea25713037e96af9e3`,`857876556a230da15fe1bb6f410ca8dbc9274de47c1a847c2281a7103dd2c274`,`be88e62eb68758cd7381104977c0d3d5d81e19c72a848f0d79d1963c1e39221f`,`c784c9c0a82b5f3c13884842fa6e6a8f5aed994ef401e6476c30b1adfe439b22`,`4c948c46d4c551932ed6f056c7b22aa8023af115975123fe6ef2949775632802`];function kD(e){let t=(0,ED.sha512_256)(e.replaceAll(/\s/gu,``).toUpperCase());return OD.indexOf(t)}function AD(e){return kD(e)!==-1}function jD(e){switch(kD(e)){case 0:return fw.display(`a-barrel-roll`,5),SecretAchievement(15).unlock(),!0;case 1:return SecretAchievement(14).unlock(),!0;case 2:return SecretAchievement(37).unlock(),!0;case 3:return player.records.fullGameCompletions>0?Speedrun.unlock():GameUI.notify.error(`Complete the game at least once first!`,15e3),!0;case 4:return SecretAchievement(33).unlock(),!0;default:return!1}}function MD(e){"@babel/helpers - typeof";return MD=typeof Symbol==`function`&&typeof Symbol.iterator==`symbol`?function(e){return typeof e}:function(e){return e&&typeof Symbol==`function`&&e.constructor===Symbol&&e!==Symbol.prototype?`symbol`:typeof e},MD(e)}function ND(e,t){if(MD(e)!=`object`||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||`default`);if(MD(r)!=`object`)return r;throw TypeError(`@@toPrimitive must return a primitive value.`)}return(t===`string`?String:Number)(e)}function PD(e){var t=ND(e,`string`);return MD(t)==`symbol`?t:t+``}function FD(e,t,n){return(t=PD(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ID(e,t){if(!(e instanceof t))throw TypeError(`Cannot call a class as a function`)}function LD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,`value`in r&&(r.writable=!0),Object.defineProperty(e,PD(r.key),r)}}function RD(e,t,n){return t&&LD(e.prototype,t),n&&LD(e,n),Object.defineProperty(e,`prototype`,{writable:!1}),e}
/**!
* @fileOverview Kickass library to create and place poppers near their reference elements.
* @version 1.16.1
* @license
* Copyright (c) 2016 Federico Zivolo and contributors
*
* Permission is hereby granted, free of charge, to any person obtaining a copy
* of this software and associated documentation files (the "Software"), to deal
* in the Software without restriction, including without limitation the rights
* to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
* copies of the Software, and to permit persons to whom the Software is
* furnished to do so, subject to the following conditions:
*
* The above copyright notice and this permission notice shall be included in all
* copies or substantial portions of the Software.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
* IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
* FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
* AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
* LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
* OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
* SOFTWARE.
*/
var zD=typeof window<`u`&&typeof document<`u`&&typeof navigator<`u`,BD=function(){for(var e=[`Edge`,`Trident`,`Firefox`],t=0;t<e.length;t+=1)if(zD&&navigator.userAgent.indexOf(e[t])>=0)return 1;return 0}();function VD(e){var t=!1;return function(){t||(t=!0,window.Promise.resolve().then(function(){t=!1,e()}))}}function HD(e){var t=!1;return function(){t||(t=!0,setTimeout(function(){t=!1,e()},BD))}}var UD=zD&&window.Promise?VD:HD;function WD(e){return e&&{}.toString.call(e)===`[object Function]`}function GD(e,t){if(e.nodeType!==1)return[];var n=e.ownerDocument.defaultView.getComputedStyle(e,null);return t?n[t]:n}function KD(e){return e.nodeName===`HTML`?e:e.parentNode||e.host}function qD(e){if(!e)return document.body;switch(e.nodeName){case`HTML`:case`BODY`:return e.ownerDocument.body;case`#document`:return e.body}var t=GD(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/(auto|scroll|overlay)/.test(n+i+r)?e:qD(KD(e))}function JD(e){return e&&e.referenceNode?e.referenceNode:e}var YD=zD&&!!(window.MSInputMethodContext&&document.documentMode),XD=zD&&/MSIE 10/.test(navigator.userAgent);function ZD(e){return e===11?YD:e===10?XD:YD||XD}function QD(e){if(!e)return document.documentElement;for(var t=ZD(10)?document.body:null,n=e.offsetParent||null;n===t&&e.nextElementSibling;)n=(e=e.nextElementSibling).offsetParent;var r=n&&n.nodeName;return!r||r===`BODY`||r===`HTML`?e?e.ownerDocument.documentElement:document.documentElement:[`TH`,`TD`,`TABLE`].indexOf(n.nodeName)!==-1&&GD(n,`position`)===`static`?QD(n):n}function $D(e){var t=e.nodeName;return t===`BODY`?!1:t===`HTML`||QD(e.firstElementChild)===e}function eO(e){return e.parentNode===null?e:eO(e.parentNode)}function tO(e,t){if(!e||!e.nodeType||!t||!t.nodeType)return document.documentElement;var n=e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING,r=n?e:t,i=n?t:e,a=document.createRange();a.setStart(r,0),a.setEnd(i,0);var o=a.commonAncestorContainer;if(e!==o&&t!==o||r.contains(i))return $D(o)?o:QD(o);var s=eO(e);return s.host?tO(s.host,t):tO(e,eO(t).host)}function nO(e){var t=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:`top`)===`top`?`scrollTop`:`scrollLeft`,n=e.nodeName;if(n===`BODY`||n===`HTML`){var r=e.ownerDocument.documentElement;return(e.ownerDocument.scrollingElement||r)[t]}return e[t]}function rO(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=nO(t,`top`),i=nO(t,`left`),a=n?-1:1;return e.top+=r*a,e.bottom+=r*a,e.left+=i*a,e.right+=i*a,e}function iO(e,t){var n=t===`x`?`Left`:`Top`,r=n===`Left`?`Right`:`Bottom`;return parseFloat(e[`border`+n+`Width`])+parseFloat(e[`border`+r+`Width`])}function aO(e,t,n,r){return Math.max(t[`offset`+e],t[`scroll`+e],n[`client`+e],n[`offset`+e],n[`scroll`+e],ZD(10)?parseInt(n[`offset`+e])+parseInt(r[`margin`+(e===`Height`?`Top`:`Left`)])+parseInt(r[`margin`+(e===`Height`?`Bottom`:`Right`)]):0)}function oO(e){var t=e.body,n=e.documentElement,r=ZD(10)&&getComputedStyle(n);return{height:aO(`Height`,t,n,r),width:aO(`Width`,t,n,r)}}var sO=function(e,t){if(!(e instanceof t))throw TypeError(`Cannot call a class as a function`)},cO=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,`value`in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),lO=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},uO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function dO(e){return uO({},e,{right:e.left+e.width,bottom:e.top+e.height})}function fO(e){var t={};try{if(ZD(10)){t=e.getBoundingClientRect();var n=nO(e,`top`),r=nO(e,`left`);t.top+=n,t.left+=r,t.bottom+=n,t.right+=r}else t=e.getBoundingClientRect()}catch{}var i={left:t.left,top:t.top,width:t.right-t.left,height:t.bottom-t.top},a=e.nodeName===`HTML`?oO(e.ownerDocument):{},o=a.width||e.clientWidth||i.width,s=a.height||e.clientHeight||i.height,c=e.offsetWidth-o,l=e.offsetHeight-s;if(c||l){var u=GD(e);c-=iO(u,`x`),l-=iO(u,`y`),i.width-=c,i.height-=l}return dO(i)}function pO(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=ZD(10),i=t.nodeName===`HTML`,a=fO(e),o=fO(t),s=qD(e),c=GD(t),l=parseFloat(c.borderTopWidth),u=parseFloat(c.borderLeftWidth);n&&i&&(o.top=Math.max(o.top,0),o.left=Math.max(o.left,0));var d=dO({top:a.top-o.top-l,left:a.left-o.left-u,width:a.width,height:a.height});if(d.marginTop=0,d.marginLeft=0,!r&&i){var f=parseFloat(c.marginTop),p=parseFloat(c.marginLeft);d.top-=l-f,d.bottom-=l-f,d.left-=u-p,d.right-=u-p,d.marginTop=f,d.marginLeft=p}return(r&&!n?t.contains(s):t===s&&s.nodeName!==`BODY`)&&(d=rO(d,t)),d}function mO(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=e.ownerDocument.documentElement,r=pO(e,n),i=Math.max(n.clientWidth,window.innerWidth||0),a=Math.max(n.clientHeight,window.innerHeight||0),o=t?0:nO(n),s=t?0:nO(n,`left`),c={top:o-r.top+r.marginTop,left:s-r.left+r.marginLeft,width:i,height:a};return dO(c)}function hO(e){var t=e.nodeName;if(t===`BODY`||t===`HTML`)return!1;if(GD(e,`position`)===`fixed`)return!0;var n=KD(e);return n?hO(n):!1}function gO(e){if(!e||!e.parentElement||ZD())return document.documentElement;for(var t=e.parentElement;t&&GD(t,`transform`)===`none`;)t=t.parentElement;return t||document.documentElement}function _O(e,t,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,a={top:0,left:0},o=i?gO(e):tO(e,JD(t));if(r===`viewport`)a=mO(o,i);else{var s=void 0;r===`scrollParent`?(s=qD(KD(t)),s.nodeName===`BODY`&&(s=e.ownerDocument.documentElement)):s=r===`window`?e.ownerDocument.documentElement:r;var c=pO(s,o,i);if(s.nodeName===`HTML`&&!hO(o)){var l=oO(e.ownerDocument),u=l.height,d=l.width;a.top+=c.top-c.marginTop,a.bottom=u+c.top,a.left+=c.left-c.marginLeft,a.right=d+c.left}else a=c}n||=0;var f=typeof n==`number`;return a.left+=f?n:n.left||0,a.top+=f?n:n.top||0,a.right-=f?n:n.right||0,a.bottom-=f?n:n.bottom||0,a}function vO(e){var t=e.width,n=e.height;return t*n}function yO(e,t,n,r,i){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0;if(e.indexOf(`auto`)===-1)return e;var o=_O(n,r,a,i),s={top:{width:o.width,height:t.top-o.top},right:{width:o.right-t.right,height:o.height},bottom:{width:o.width,height:o.bottom-t.bottom},left:{width:t.left-o.left,height:o.height}},c=Object.keys(s).map(function(e){return uO({key:e},s[e],{area:vO(s[e])})}).sort(function(e,t){return t.area-e.area}),l=c.filter(function(e){var t=e.width,r=e.height;return t>=n.clientWidth&&r>=n.clientHeight}),u=l.length>0?l[0].key:c[0].key,d=e.split(`-`)[1];return u+(d?`-`+d:``)}function bO(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,i=r?gO(t):tO(t,JD(n));return pO(n,i,r)}function xO(e){var t=e.ownerDocument.defaultView.getComputedStyle(e),n=parseFloat(t.marginTop||0)+parseFloat(t.marginBottom||0),r=parseFloat(t.marginLeft||0)+parseFloat(t.marginRight||0);return{width:e.offsetWidth+r,height:e.offsetHeight+n}}function SO(e){var t={left:`right`,right:`left`,bottom:`top`,top:`bottom`};return e.replace(/left|right|bottom|top/g,function(e){return t[e]})}function CO(e,t,n){n=n.split(`-`)[0];var r=xO(e),i={width:r.width,height:r.height},a=[`right`,`left`].indexOf(n)!==-1,o=a?`top`:`left`,s=a?`left`:`top`,c=a?`height`:`width`,l=a?`width`:`height`;return i[o]=t[o]+t[c]/2-r[c]/2,n===s?i[s]=t[s]-r[l]:i[s]=t[SO(s)],i}function wO(e,t){return Array.prototype.find?e.find(t):e.filter(t)[0]}function TO(e,t,n){if(Array.prototype.findIndex)return e.findIndex(function(e){return e[t]===n});var r=wO(e,function(e){return e[t]===n});return e.indexOf(r)}function EO(e,t,n){return(n===void 0?e:e.slice(0,TO(e,`name`,n))).forEach(function(e){e.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var n=e.function||e.fn;e.enabled&&WD(n)&&(t.offsets.popper=dO(t.offsets.popper),t.offsets.reference=dO(t.offsets.reference),t=n(t,e))}),t}function DO(){if(!this.state.isDestroyed){var e={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};e.offsets.reference=bO(this.state,this.popper,this.reference,this.options.positionFixed),e.placement=yO(this.options.placement,e.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),e.originalPlacement=e.placement,e.positionFixed=this.options.positionFixed,e.offsets.popper=CO(this.popper,e.offsets.reference,e.placement),e.offsets.popper.position=this.options.positionFixed?`fixed`:`absolute`,e=EO(this.modifiers,e),this.state.isCreated?this.options.onUpdate(e):(this.state.isCreated=!0,this.options.onCreate(e))}}function OO(e,t){return e.some(function(e){var n=e.name;return e.enabled&&n===t})}function kO(e){for(var t=[!1,`ms`,`Webkit`,`Moz`,`O`],n=e.charAt(0).toUpperCase()+e.slice(1),r=0;r<t.length;r++){var i=t[r],a=i?``+i+n:e;if(document.body.style[a]!==void 0)return a}return null}function AO(){return this.state.isDestroyed=!0,OO(this.modifiers,`applyStyle`)&&(this.popper.removeAttribute(`x-placement`),this.popper.style.position=``,this.popper.style.top=``,this.popper.style.left=``,this.popper.style.right=``,this.popper.style.bottom=``,this.popper.style.willChange=``,this.popper.style[kO(`transform`)]=``),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function jO(e){var t=e.ownerDocument;return t?t.defaultView:window}function MO(e,t,n,r){var i=e.nodeName===`BODY`,a=i?e.ownerDocument.defaultView:e;a.addEventListener(t,n,{passive:!0}),i||MO(qD(a.parentNode),t,n,r),r.push(a)}function NO(e,t,n,r){n.updateBound=r,jO(e).addEventListener(`resize`,n.updateBound,{passive:!0});var i=qD(e);return MO(i,`scroll`,n.updateBound,n.scrollParents),n.scrollElement=i,n.eventsEnabled=!0,n}function PO(){this.state.eventsEnabled||(this.state=NO(this.reference,this.options,this.state,this.scheduleUpdate))}function FO(e,t){return jO(e).removeEventListener(`resize`,t.updateBound),t.scrollParents.forEach(function(e){e.removeEventListener(`scroll`,t.updateBound)}),t.updateBound=null,t.scrollParents=[],t.scrollElement=null,t.eventsEnabled=!1,t}function IO(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=FO(this.reference,this.state))}function LO(e){return e!==``&&!isNaN(parseFloat(e))&&isFinite(e)}function RO(e,t){Object.keys(t).forEach(function(n){var r=``;[`width`,`height`,`top`,`right`,`bottom`,`left`].indexOf(n)!==-1&&LO(t[n])&&(r=`px`),e.style[n]=t[n]+r})}function zO(e,t){Object.keys(t).forEach(function(n){t[n]===!1?e.removeAttribute(n):e.setAttribute(n,t[n])})}function BO(e){return RO(e.instance.popper,e.styles),zO(e.instance.popper,e.attributes),e.arrowElement&&Object.keys(e.arrowStyles).length&&RO(e.arrowElement,e.arrowStyles),e}function VO(e,t,n,r,i){var a=bO(i,t,e,n.positionFixed),o=yO(n.placement,a,t,e,n.modifiers.flip.boundariesElement,n.modifiers.flip.padding);return t.setAttribute(`x-placement`,o),RO(t,{position:n.positionFixed?`fixed`:`absolute`}),n}function HO(e,t){var n=e.offsets,r=n.popper,i=n.reference,a=Math.round,o=Math.floor,s=function(e){return e},c=a(i.width),l=a(r.width),u=[`left`,`right`].indexOf(e.placement)!==-1,d=e.placement.indexOf(`-`)!==-1,f=c%2==l%2,p=c%2==1&&l%2==1,m=t?u||d||f?a:o:s,h=t?a:s;return{left:m(p&&!d&&t?r.left-1:r.left),top:h(r.top),bottom:h(r.bottom),right:m(r.right)}}var UO=zD&&/Firefox/i.test(navigator.userAgent);function WO(e,t){var n=t.x,r=t.y,i=e.offsets.popper,a=wO(e.instance.modifiers,function(e){return e.name===`applyStyle`}).gpuAcceleration;a!==void 0&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var o=a===void 0?t.gpuAcceleration:a,s=QD(e.instance.popper),c=fO(s),l={position:i.position},u=HO(e,window.devicePixelRatio<2||!UO),d=n===`bottom`?`top`:`bottom`,f=r===`right`?`left`:`right`,p=kO(`transform`),m=void 0,h=void 0;if(h=d===`bottom`?s.nodeName===`HTML`?-s.clientHeight+u.bottom:-c.height+u.bottom:u.top,m=f===`right`?s.nodeName===`HTML`?-s.clientWidth+u.right:-c.width+u.right:u.left,o&&p)l[p]=`translate3d(`+m+`px, `+h+`px, 0)`,l[d]=0,l[f]=0,l.willChange=`transform`;else{var g=d===`bottom`?-1:1,_=f===`right`?-1:1;l[d]=h*g,l[f]=m*_,l.willChange=d+`, `+f}var v={"x-placement":e.placement};return e.attributes=uO({},v,e.attributes),e.styles=uO({},l,e.styles),e.arrowStyles=uO({},e.offsets.arrow,e.arrowStyles),e}function GO(e,t,n){var r=wO(e,function(e){return e.name===t}),i=!!r&&e.some(function(e){return e.name===n&&e.enabled&&e.order<r.order});if(!i){var a="`"+t+"`",o="`"+n+"`";console.warn(o+` modifier is required by `+a+` modifier in order to work, be sure to include it before `+a+`!`)}return i}function KO(e,t){var n;if(!GO(e.instance.modifiers,`arrow`,`keepTogether`))return e;var r=t.element;if(typeof r==`string`){if(r=e.instance.popper.querySelector(r),!r)return e}else if(!e.instance.popper.contains(r))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),e;var i=e.placement.split(`-`)[0],a=e.offsets,o=a.popper,s=a.reference,c=[`left`,`right`].indexOf(i)!==-1,l=c?`height`:`width`,u=c?`Top`:`Left`,d=u.toLowerCase(),f=c?`left`:`top`,p=c?`bottom`:`right`,m=xO(r)[l];s[p]-m<o[d]&&(e.offsets.popper[d]-=o[d]-(s[p]-m)),s[d]+m>o[p]&&(e.offsets.popper[d]+=s[d]+m-o[p]),e.offsets.popper=dO(e.offsets.popper);var h=s[d]+s[l]/2-m/2,g=GD(e.instance.popper),_=parseFloat(g[`margin`+u]),v=parseFloat(g[`border`+u+`Width`]),y=h-e.offsets.popper[d]-_-v;return y=Math.max(Math.min(o[l]-m,y),0),e.arrowElement=r,e.offsets.arrow=(n={},lO(n,d,Math.round(y)),lO(n,f,``),n),e}function qO(e){return e===`end`?`start`:e===`start`?`end`:e}var JO=[`auto-start`,`auto`,`auto-end`,`top-start`,`top`,`top-end`,`right-start`,`right`,`right-end`,`bottom-end`,`bottom`,`bottom-start`,`left-end`,`left`,`left-start`],YO=JO.slice(3);function XO(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=YO.indexOf(e),r=YO.slice(n+1).concat(YO.slice(0,n));return t?r.reverse():r}var ZO={FLIP:`flip`,CLOCKWISE:`clockwise`,COUNTERCLOCKWISE:`counterclockwise`};function QO(e,t){if(OO(e.instance.modifiers,`inner`)||e.flipped&&e.placement===e.originalPlacement)return e;var n=_O(e.instance.popper,e.instance.reference,t.padding,t.boundariesElement,e.positionFixed),r=e.placement.split(`-`)[0],i=SO(r),a=e.placement.split(`-`)[1]||``,o=[];switch(t.behavior){case ZO.FLIP:o=[r,i];break;case ZO.CLOCKWISE:o=XO(r);break;case ZO.COUNTERCLOCKWISE:o=XO(r,!0);break;default:o=t.behavior}return o.forEach(function(s,c){if(r!==s||o.length===c+1)return e;r=e.placement.split(`-`)[0],i=SO(r);var l=e.offsets.popper,u=e.offsets.reference,d=Math.floor,f=r===`left`&&d(l.right)>d(u.left)||r===`right`&&d(l.left)<d(u.right)||r===`top`&&d(l.bottom)>d(u.top)||r===`bottom`&&d(l.top)<d(u.bottom),p=d(l.left)<d(n.left),m=d(l.right)>d(n.right),h=d(l.top)<d(n.top),g=d(l.bottom)>d(n.bottom),_=r===`left`&&p||r===`right`&&m||r===`top`&&h||r===`bottom`&&g,v=[`top`,`bottom`].indexOf(r)!==-1,y=!!t.flipVariations&&(v&&a===`start`&&p||v&&a===`end`&&m||!v&&a===`start`&&h||!v&&a===`end`&&g),b=!!t.flipVariationsByContent&&(v&&a===`start`&&m||v&&a===`end`&&p||!v&&a===`start`&&g||!v&&a===`end`&&h),x=y||b;(f||_||x)&&(e.flipped=!0,(f||_)&&(r=o[c+1]),x&&(a=qO(a)),e.placement=r+(a?`-`+a:``),e.offsets.popper=uO({},e.offsets.popper,CO(e.instance.popper,e.offsets.reference,e.placement)),e=EO(e.instance.modifiers,e,`flip`))}),e}function $O(e){var t=e.offsets,n=t.popper,r=t.reference,i=e.placement.split(`-`)[0],a=Math.floor,o=[`top`,`bottom`].indexOf(i)!==-1,s=o?`right`:`bottom`,c=o?`left`:`top`,l=o?`width`:`height`;return n[s]<a(r[c])&&(e.offsets.popper[c]=a(r[c])-n[l]),n[c]>a(r[s])&&(e.offsets.popper[c]=a(r[s])),e}function ek(e,t,n,r){var i=e.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),a=+i[1],o=i[2];if(!a)return e;if(o.indexOf(`%`)===0){var s=void 0;switch(o){case`%p`:s=n;break;case`%`:case`%r`:default:s=r}return dO(s)[t]/100*a}else if(o===`vh`||o===`vw`){var c=void 0;return c=o===`vh`?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0),c/100*a}else return a}function tk(e,t,n,r){var i=[0,0],a=[`right`,`left`].indexOf(r)!==-1,o=e.split(/(\+|\-)/).map(function(e){return e.trim()}),s=o.indexOf(wO(o,function(e){return e.search(/,|\s/)!==-1}));o[s]&&o[s].indexOf(`,`)===-1&&console.warn(`Offsets separated by white space(s) are deprecated, use a comma (,) instead.`);var c=/\s*,\s*|\s+/,l=s===-1?[o]:[o.slice(0,s).concat([o[s].split(c)[0]]),[o[s].split(c)[1]].concat(o.slice(s+1))];return l=l.map(function(e,r){var i=(r===1?!a:a)?`height`:`width`,o=!1;return e.reduce(function(e,t){return e[e.length-1]===``&&[`+`,`-`].indexOf(t)!==-1?(e[e.length-1]=t,o=!0,e):o?(e[e.length-1]+=t,o=!1,e):e.concat(t)},[]).map(function(e){return ek(e,i,t,n)})}),l.forEach(function(e,t){e.forEach(function(n,r){LO(n)&&(i[t]+=n*(e[r-1]===`-`?-1:1))})}),i}function nk(e,t){var n=t.offset,r=e.placement,i=e.offsets,a=i.popper,o=i.reference,s=r.split(`-`)[0],c=void 0;return c=LO(+n)?[+n,0]:tk(n,a,o,s),s===`left`?(a.top+=c[0],a.left-=c[1]):s===`right`?(a.top+=c[0],a.left+=c[1]):s===`top`?(a.left+=c[0],a.top-=c[1]):s===`bottom`&&(a.left+=c[0],a.top+=c[1]),e.popper=a,e}function rk(e,t){var n=t.boundariesElement||QD(e.instance.popper);e.instance.reference===n&&(n=QD(n));var r=kO(`transform`),i=e.instance.popper.style,a=i.top,o=i.left,s=i[r];i.top=``,i.left=``,i[r]=``;var c=_O(e.instance.popper,e.instance.reference,t.padding,n,e.positionFixed);i.top=a,i.left=o,i[r]=s,t.boundaries=c;var l=t.priority,u=e.offsets.popper,d={primary:function(e){var n=u[e];return u[e]<c[e]&&!t.escapeWithReference&&(n=Math.max(u[e],c[e])),lO({},e,n)},secondary:function(e){var n=e===`right`?`left`:`top`,r=u[n];return u[e]>c[e]&&!t.escapeWithReference&&(r=Math.min(u[n],c[e]-(e===`right`?u.width:u.height))),lO({},n,r)}};return l.forEach(function(e){var t=[`left`,`top`].indexOf(e)===-1?`secondary`:`primary`;u=uO({},u,d[t](e))}),e.offsets.popper=u,e}function ik(e){var t=e.placement,n=t.split(`-`)[0],r=t.split(`-`)[1];if(r){var i=e.offsets,a=i.reference,o=i.popper,s=[`bottom`,`top`].indexOf(n)!==-1,c=s?`left`:`top`,l=s?`width`:`height`,u={start:lO({},c,a[c]),end:lO({},c,a[c]+a[l]-o[l])};e.offsets.popper=uO({},o,u[r])}return e}function ak(e){if(!GO(e.instance.modifiers,`hide`,`preventOverflow`))return e;var t=e.offsets.reference,n=wO(e.instance.modifiers,function(e){return e.name===`preventOverflow`}).boundaries;if(t.bottom<n.top||t.left>n.right||t.top>n.bottom||t.right<n.left){if(e.hide===!0)return e;e.hide=!0,e.attributes[`x-out-of-boundaries`]=``}else{if(e.hide===!1)return e;e.hide=!1,e.attributes[`x-out-of-boundaries`]=!1}return e}function ok(e){var t=e.placement,n=t.split(`-`)[0],r=e.offsets,i=r.popper,a=r.reference,o=[`left`,`right`].indexOf(n)!==-1,s=[`top`,`left`].indexOf(n)===-1;return i[o?`left`:`top`]=a[n]-(s?i[o?`width`:`height`]:0),e.placement=SO(t),e.offsets.popper=dO(i),e}var sk={placement:`bottom`,positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:ik},offset:{order:200,enabled:!0,fn:nk,offset:0},preventOverflow:{order:300,enabled:!0,fn:rk,priority:[`left`,`right`,`top`,`bottom`],padding:5,boundariesElement:`scrollParent`},keepTogether:{order:400,enabled:!0,fn:$O},arrow:{order:500,enabled:!0,fn:KO,element:`[x-arrow]`},flip:{order:600,enabled:!0,fn:QO,behavior:`flip`,padding:5,boundariesElement:`viewport`,flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:ok},hide:{order:800,enabled:!0,fn:ak},computeStyle:{order:850,enabled:!0,fn:WO,gpuAcceleration:!0,x:`bottom`,y:`right`},applyStyle:{order:900,enabled:!0,fn:BO,onLoad:VO,gpuAcceleration:void 0}}},ck=function(){function e(t,n){var r=this,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};sO(this,e),this.scheduleUpdate=function(){return requestAnimationFrame(r.update)},this.update=UD(this.update.bind(this)),this.options=uO({},e.Defaults,i),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=t&&t.jquery?t[0]:t,this.popper=n&&n.jquery?n[0]:n,this.options.modifiers={},Object.keys(uO({},e.Defaults.modifiers,i.modifiers)).forEach(function(t){r.options.modifiers[t]=uO({},e.Defaults.modifiers[t]||{},i.modifiers?i.modifiers[t]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(e){return uO({name:e},r.options.modifiers[e])}).sort(function(e,t){return e.order-t.order}),this.modifiers.forEach(function(e){e.enabled&&WD(e.onLoad)&&e.onLoad(r.reference,r.popper,r.options,e,r.state)}),this.update();var a=this.options.eventsEnabled;a&&this.enableEventListeners(),this.state.eventsEnabled=a}return cO(e,[{key:`update`,value:function(){return DO.call(this)}},{key:`destroy`,value:function(){return AO.call(this)}},{key:`enableEventListeners`,value:function(){return PO.call(this)}},{key:`disableEventListeners`,value:function(){return IO.call(this)}}]),e}();ck.Utils=(typeof window<`u`?window:global).PopperUtils,ck.placements=JO,ck.Defaults=sk;var lk=ck,uk=n(((exports,t)=>{function n(){this.__data__=[],this.size=0}t.exports=n})),dk=n(((exports,t)=>{function n(e,t){return e===t||e!==e&&t!==t}t.exports=n})),fk=n(((exports,t)=>{var n=dk();function r(e,t){for(var r=e.length;r--;)if(n(e[r][0],t))return r;return-1}t.exports=r})),pk=n(((exports,t)=>{var n=fk(),r=Array.prototype.splice;function i(e){var t=this.__data__,i=n(t,e);if(i<0)return!1;var a=t.length-1;return i==a?t.pop():r.call(t,i,1),--this.size,!0}t.exports=i})),mk=n(((exports,t)=>{var n=fk();function r(e){var t=this.__data__,r=n(t,e);return r<0?void 0:t[r][1]}t.exports=r})),hk=n(((exports,t)=>{var n=fk();function r(e){return n(this.__data__,e)>-1}t.exports=r})),gk=n(((exports,t)=>{var n=fk();function r(e,t){var r=this.__data__,i=n(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this}t.exports=r})),_k=n(((exports,t)=>{var n=uk(),r=pk(),i=mk(),a=hk(),o=gk();function s(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=n,s.prototype.delete=r,s.prototype.get=i,s.prototype.has=a,s.prototype.set=o,t.exports=s})),vk=n(((exports,t)=>{var n=_k();function r(){this.__data__=new n,this.size=0}t.exports=r})),yk=n(((exports,t)=>{function n(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}t.exports=n})),bk=n(((exports,t)=>{function n(e){return this.__data__.get(e)}t.exports=n})),xk=n(((exports,t)=>{function n(e){return this.__data__.has(e)}t.exports=n})),Sk=n(((exports,t)=>{t.exports=typeof global==`object`&&global&&global.Object===Object&&global})),Ck=n(((exports,t)=>{var n=Sk(),r=typeof self==`object`&&self&&self.Object===Object&&self;t.exports=n||r||Function(`return this`)()})),wk=n(((exports,t)=>{t.exports=Ck().Symbol})),Tk=n(((exports,t)=>{var n=wk(),r=Object.prototype,i=r.hasOwnProperty,a=r.toString,o=n?n.toStringTag:void 0;function s(e){var t=i.call(e,o),n=e[o];try{e[o]=void 0;var r=!0}catch{}var s=a.call(e);return r&&(t?e[o]=n:delete e[o]),s}t.exports=s})),Ek=n(((exports,t)=>{var n=Object.prototype.toString;function r(e){return n.call(e)}t.exports=r})),Dk=n(((exports,t)=>{var n=wk(),r=Tk(),i=Ek(),a=`[object Null]`,o=`[object Undefined]`,s=n?n.toStringTag:void 0;function c(e){return e==null?e===void 0?o:a:s&&s in Object(e)?r(e):i(e)}t.exports=c})),Ok=n(((exports,t)=>{function n(e){var t=typeof e;return e!=null&&(t==`object`||t==`function`)}t.exports=n})),kk=n(((exports,t)=>{var n=Dk(),r=Ok();function i(e){if(!r(e))return!1;var t=n(e);return t==`[object Function]`||t==`[object GeneratorFunction]`||t==`[object AsyncFunction]`||t==`[object Proxy]`}t.exports=i})),Ak=n(((exports,t)=>{t.exports=Ck()[`__core-js_shared__`]})),jk=n(((exports,t)=>{var n=Ak(),r=function(){var e=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||``);return e?`Symbol(src)_1.`+e:``}();function i(e){return!!r&&r in e}t.exports=i})),Mk=n(((exports,t)=>{var n=Function.prototype.toString;function r(e){if(e!=null){try{return n.call(e)}catch{}try{return e+``}catch{}}return``}t.exports=r})),Nk=n(((exports,t)=>{var n=kk(),r=jk(),i=Ok(),a=Mk(),o=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,c=Function.prototype,l=Object.prototype,u=c.toString,d=l.hasOwnProperty,f=RegExp(`^`+u.call(d).replace(o,`\\$&`).replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,`$1.*?`)+`$`);function p(e){return!i(e)||r(e)?!1:(n(e)?f:s).test(a(e))}t.exports=p})),Pk=n(((exports,t)=>{function n(e,t){return e?.[t]}t.exports=n})),Fk=n(((exports,t)=>{var n=Nk(),r=Pk();function i(e,t){var i=r(e,t);return n(i)?i:void 0}t.exports=i})),Ik=n(((exports,t)=>{var n=Fk(),r=Ck();t.exports=n(r,`Map`)})),Lk=n(((exports,t)=>{t.exports=Fk()(Object,`create`)})),Rk=n(((exports,t)=>{var n=Lk();function r(){this.__data__=n?n(null):{},this.size=0}t.exports=r})),zk=n(((exports,t)=>{function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}t.exports=n})),Bk=n(((exports,t)=>{var n=Lk(),r=Object.prototype.hasOwnProperty;function i(e){var t=this.__data__;if(n){var i=t[e];return i===`__lodash_hash_undefined__`?void 0:i}return r.call(t,e)?t[e]:void 0}t.exports=i})),Vk=n(((exports,t)=>{var n=Lk(),r=Object.prototype.hasOwnProperty;function i(e){var t=this.__data__;return n?t[e]!==void 0:r.call(t,e)}t.exports=i})),Hk=n(((exports,t)=>{var n=Lk(),r=`__lodash_hash_undefined__`;function i(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=n&&t===void 0?r:t,this}t.exports=i})),Uk=n(((exports,t)=>{var n=Rk(),r=zk(),i=Bk(),a=Vk(),o=Hk();function s(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=n,s.prototype.delete=r,s.prototype.get=i,s.prototype.has=a,s.prototype.set=o,t.exports=s})),Wk=n(((exports,t)=>{var n=Uk(),r=_k(),i=Ik();function a(){this.size=0,this.__data__={hash:new n,map:new(i||r),string:new n}}t.exports=a})),Gk=n(((exports,t)=>{function n(e){var t=typeof e;return t==`string`||t==`number`||t==`symbol`||t==`boolean`?e!==`__proto__`:e===null}t.exports=n})),Kk=n(((exports,t)=>{var n=Gk();function r(e,t){var r=e.__data__;return n(t)?r[typeof t==`string`?`string`:`hash`]:r.map}t.exports=r})),qk=n(((exports,t)=>{var n=Kk();function r(e){var t=n(this,e).delete(e);return this.size-=t?1:0,t}t.exports=r})),Jk=n(((exports,t)=>{var n=Kk();function r(e){return n(this,e).get(e)}t.exports=r})),Yk=n(((exports,t)=>{var n=Kk();function r(e){return n(this,e).has(e)}t.exports=r})),Xk=n(((exports,t)=>{var n=Kk();function r(e,t){var r=n(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this}t.exports=r})),Zk=n(((exports,t)=>{var n=Wk(),r=qk(),i=Jk(),a=Yk(),o=Xk();function s(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=n,s.prototype.delete=r,s.prototype.get=i,s.prototype.has=a,s.prototype.set=o,t.exports=s})),Qk=n(((exports,t)=>{var n=_k(),r=Ik(),i=Zk();function a(e,t){var a=this.__data__;if(a instanceof n){var o=a.__data__;if(!r||o.length<199)return o.push([e,t]),this.size=++a.size,this;a=this.__data__=new i(o)}return a.set(e,t),this.size=a.size,this}t.exports=a})),$k=n(((exports,t)=>{var n=_k(),r=vk(),i=yk(),a=bk(),o=xk(),s=Qk();function c(e){this.size=(this.__data__=new n(e)).size}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=a,c.prototype.has=o,c.prototype.set=s,t.exports=c})),eA=n(((exports,t)=>{var n=`__lodash_hash_undefined__`;function r(e){return this.__data__.set(e,n),this}t.exports=r})),tA=n(((exports,t)=>{function n(e){return this.__data__.has(e)}t.exports=n})),nA=n(((exports,t)=>{var n=Zk(),r=eA(),i=tA();function a(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new n;++t<r;)this.add(e[t])}a.prototype.add=a.prototype.push=r,a.prototype.has=i,t.exports=a})),rA=n(((exports,t)=>{function n(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}t.exports=n})),iA=n(((exports,t)=>{function n(e,t){return e.has(t)}t.exports=n})),aA=n(((exports,t)=>{var n=nA(),r=rA(),i=iA();function a(e,t,a,o,s,c){var l=a&1,u=e.length,d=t.length;if(u!=d&&!(l&&d>u))return!1;var f=c.get(e),p=c.get(t);if(f&&p)return f==t&&p==e;var m=-1,h=!0,g=a&2?new n:void 0;for(c.set(e,t),c.set(t,e);++m<u;){var _=e[m],v=t[m];if(o)var y=l?o(v,_,m,t,e,c):o(_,v,m,e,t,c);if(y!==void 0){if(y)continue;h=!1;break}if(g){if(!r(t,function(e,t){if(!i(g,t)&&(_===e||s(_,e,a,o,c)))return g.push(t)})){h=!1;break}}else if(!(_===v||s(_,v,a,o,c))){h=!1;break}}return c.delete(e),c.delete(t),h}t.exports=a})),oA=n(((exports,t)=>{t.exports=Ck().Uint8Array})),sA=n(((exports,t)=>{function n(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}t.exports=n})),cA=n(((exports,t)=>{function n(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}t.exports=n})),lA=n(((exports,t)=>{var n=wk(),r=oA(),i=dk(),a=aA(),o=sA(),s=cA(),c=`[object Boolean]`,l=`[object Date]`,u=`[object Error]`,d=`[object Map]`,f=`[object Number]`,p=`[object RegExp]`,m=`[object Set]`,h=`[object String]`,g=`[object Symbol]`,_=`[object ArrayBuffer]`,v=`[object DataView]`,y=n?n.prototype:void 0,b=y?y.valueOf:void 0;function x(e,t,n,y,x,S,C){switch(n){case v:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case _:return!(e.byteLength!=t.byteLength||!S(new r(e),new r(t)));case c:case l:case f:return i(+e,+t);case u:return e.name==t.name&&e.message==t.message;case p:case h:return e==t+``;case d:var w=o;case m:var T=y&1;if(w||=s,e.size!=t.size&&!T)return!1;var E=C.get(e);if(E)return E==t;y|=2,C.set(e,t);var D=a(w(e),w(t),y,x,S,C);return C.delete(e),D;case g:if(b)return b.call(e)==b.call(t)}return!1}t.exports=x})),uA=n(((exports,t)=>{function n(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}t.exports=n})),dA=n(((exports,t)=>{t.exports=Array.isArray})),fA=n(((exports,t)=>{var n=uA(),r=dA();function i(e,t,i){var a=t(e);return r(e)?a:n(a,i(e))}t.exports=i})),pA=n(((exports,t)=>{function n(e,t){for(var n=-1,r=e==null?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}t.exports=n})),mA=n(((exports,t)=>{function n(){return[]}t.exports=n})),hA=n(((exports,t)=>{var n=pA(),r=mA(),i=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols;t.exports=a?function(e){return e==null?[]:(e=Object(e),n(a(e),function(t){return i.call(e,t)}))}:r})),gA=n(((exports,t)=>{function n(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}t.exports=n})),_A=n(((exports,t)=>{function n(e){return typeof e==`object`&&!!e}t.exports=n})),vA=n(((exports,t)=>{var n=Dk(),r=_A();function i(e){return r(e)&&n(e)==`[object Arguments]`}t.exports=i})),yA=n(((exports,t)=>{var n=vA(),r=_A(),i=Object.prototype,a=i.hasOwnProperty,o=i.propertyIsEnumerable;t.exports=n(function(){return arguments}())?n:function(e){return r(e)&&a.call(e,`callee`)&&!o.call(e,`callee`)}})),bA=n(((exports,t)=>{function n(){return!1}t.exports=n})),xA=n(((exports,t)=>{var n=Ck(),r=bA(),i=typeof exports==`object`&&exports&&!exports.nodeType&&exports,a=i&&typeof t==`object`&&t&&!t.nodeType&&t,o=a&&a.exports===i?n.Buffer:void 0;t.exports=(o?o.isBuffer:void 0)||r})),SA=n(((exports,t)=>{var n=9007199254740991,r=/^(?:0|[1-9]\d*)$/;function i(e,t){var i=typeof e;return t??=n,!!t&&(i==`number`||i!=`symbol`&&r.test(e))&&e>-1&&e%1==0&&e<t}t.exports=i})),CA=n(((exports,t)=>{function n(e){return typeof e==`number`&&e>-1&&e%1==0&&e<=9007199254740991}t.exports=n})),wA=n(((exports,t)=>{var n=Dk(),r=CA(),i=_A(),a=`[object Arguments]`,o=`[object Array]`,s=`[object Boolean]`,c=`[object Date]`,l=`[object Error]`,u=`[object Function]`,d=`[object Map]`,f=`[object Number]`,p=`[object Object]`,m=`[object RegExp]`,h=`[object Set]`,g=`[object String]`,_=`[object WeakMap]`,v=`[object ArrayBuffer]`,y=`[object DataView]`,b=`[object Float32Array]`,x=`[object Float64Array]`,S=`[object Int8Array]`,C=`[object Int16Array]`,w=`[object Int32Array]`,T=`[object Uint8Array]`,E=`[object Uint8ClampedArray]`,D=`[object Uint16Array]`,O=`[object Uint32Array]`,k={};k[b]=k[x]=k[S]=k[C]=k[w]=k[T]=k[E]=k[D]=k[O]=!0,k[a]=k[o]=k[v]=k[s]=k[y]=k[c]=k[l]=k[u]=k[d]=k[f]=k[p]=k[m]=k[h]=k[g]=k[_]=!1;function A(e){return i(e)&&r(e.length)&&!!k[n(e)]}t.exports=A})),TA=n(((exports,t)=>{function n(e){return function(t){return e(t)}}t.exports=n})),EA=n(((exports,t)=>{var n=Sk(),r=typeof exports==`object`&&exports&&!exports.nodeType&&exports,i=r&&typeof t==`object`&&t&&!t.nodeType&&t,a=i&&i.exports===r&&n.process;t.exports=function(){try{return i&&i.require&&i.require(`util`).types||a&&a.binding&&a.binding(`util`)}catch{}}()})),DA=n(((exports,t)=>{var n=wA(),r=TA(),i=EA(),a=i&&i.isTypedArray;t.exports=a?r(a):n})),OA=n(((exports,t)=>{var n=gA(),r=yA(),i=dA(),a=xA(),o=SA(),s=DA(),c=Object.prototype.hasOwnProperty;function l(e,t){var l=i(e),u=!l&&r(e),d=!l&&!u&&a(e),f=!l&&!u&&!d&&s(e),p=l||u||d||f,m=p?n(e.length,String):[],h=m.length;for(var g in e)(t||c.call(e,g))&&!(p&&(g==`length`||d&&(g==`offset`||g==`parent`)||f&&(g==`buffer`||g==`byteLength`||g==`byteOffset`)||o(g,h)))&&m.push(g);return m}t.exports=l})),kA=n(((exports,t)=>{var n=Object.prototype;function r(e){var t=e&&e.constructor,r=typeof t==`function`&&t.prototype||n;return e===r}t.exports=r})),AA=n(((exports,t)=>{function n(e,t){return function(n){return e(t(n))}}t.exports=n})),jA=n(((exports,t)=>{t.exports=AA()(Object.keys,Object)})),MA=n(((exports,t)=>{var n=kA(),r=jA(),i=Object.prototype.hasOwnProperty;function a(e){if(!n(e))return r(e);var t=[];for(var a in Object(e))i.call(e,a)&&a!=`constructor`&&t.push(a);return t}t.exports=a})),NA=n(((exports,t)=>{var n=kk(),r=CA();function i(e){return e!=null&&r(e.length)&&!n(e)}t.exports=i})),PA=n(((exports,t)=>{var n=OA(),r=MA(),i=NA();function a(e){return i(e)?n(e):r(e)}t.exports=a})),FA=n(((exports,t)=>{var n=fA(),r=hA(),i=PA();function a(e){return n(e,i,r)}t.exports=a})),IA=n(((exports,t)=>{var n=FA(),r=Object.prototype.hasOwnProperty;function i(e,t,i,a,o,s){var c=i&1,l=n(e),u=l.length,d=n(t),f=d.length;if(u!=f&&!c)return!1;for(var p=u;p--;){var m=l[p];if(!(c?m in t:r.call(t,m)))return!1}var h=s.get(e),g=s.get(t);if(h&&g)return h==t&&g==e;var _=!0;s.set(e,t),s.set(t,e);for(var v=c;++p<u;){m=l[p];var y=e[m],b=t[m];if(a)var x=c?a(b,y,m,t,e,s):a(y,b,m,e,t,s);if(!(x===void 0?y===b||o(y,b,i,a,s):x)){_=!1;break}v||=m==`constructor`}if(_&&!v){var S=e.constructor,C=t.constructor;S!=C&&`constructor`in e&&`constructor`in t&&!(typeof S==`function`&&S instanceof S&&typeof C==`function`&&C instanceof C)&&(_=!1)}return s.delete(e),s.delete(t),_}t.exports=i})),LA=n(((exports,t)=>{var n=Fk(),r=Ck();t.exports=n(r,`DataView`)})),RA=n(((exports,t)=>{var n=Fk(),r=Ck();t.exports=n(r,`Promise`)})),zA=n(((exports,t)=>{var n=Fk(),r=Ck();t.exports=n(r,`Set`)})),BA=n(((exports,t)=>{var n=Fk(),r=Ck();t.exports=n(r,`WeakMap`)})),VA=n(((exports,t)=>{var n=LA(),r=Ik(),i=RA(),a=zA(),o=BA(),s=Dk(),c=Mk(),l=`[object Map]`,u=`[object Promise]`,d=`[object Set]`,f=`[object WeakMap]`,p=`[object DataView]`,m=c(n),h=c(r),g=c(i),_=c(a),v=c(o),y=s;(n&&y(new n(new ArrayBuffer(1)))!=`[object DataView]`||r&&y(new r)!=`[object Map]`||i&&y(i.resolve())!=`[object Promise]`||a&&y(new a)!=`[object Set]`||o&&y(new o)!=`[object WeakMap]`)&&(y=function(e){var t=s(e),n=t==`[object Object]`?e.constructor:void 0,r=n?c(n):``;if(r)switch(r){case m:return p;case h:return l;case g:return u;case _:return d;case v:return f}return t}),t.exports=y})),HA=n(((exports,t)=>{var n=$k(),r=aA(),i=lA(),a=IA(),o=VA(),s=dA(),c=xA(),l=DA(),u=`[object Array]`,d=`[object Object]`,f=Object.prototype.hasOwnProperty;function p(e,t,p,m,h,g){var _=s(e),v=s(t),y=_?u:o(e),b=v?u:o(t);y=y==`[object Arguments]`?d:y,b=b==`[object Arguments]`?d:b;var x=y==d,S=b==d,C=y==b;if(C&&c(e)){if(!c(t))return!1;_=!0,x=!1}if(C&&!x)return g||=new n,_||l(e)?r(e,t,p,m,h,g):i(e,t,y,p,m,h,g);if(!(p&1)){var w=x&&f.call(e,`__wrapped__`),T=S&&f.call(t,`__wrapped__`);if(w||T){var E=w?e.value():e,D=T?t.value():t;return g||=new n,h(E,D,p,m,g)}}return C?(g||=new n,a(e,t,p,m,h,g)):!1}t.exports=p})),UA=n(((exports,t)=>{var n=HA(),r=_A();function i(e,t,a,o,s){return e===t?!0:e==null||t==null||!r(e)&&!r(t)?e!==e&&t!==t:n(e,t,a,o,i,s)}t.exports=i})),WA=e(n(((exports,t)=>{var n=UA();function r(e,t){return n(e,t)}t.exports=r}))());function GA(){var e=window.navigator.userAgent,t=e.indexOf(`MSIE `);if(t>0)return parseInt(e.substring(t+5,e.indexOf(`.`,t)),10);if(e.indexOf(`Trident/`)>0){var n=e.indexOf(`rv:`);return parseInt(e.substring(n+3,e.indexOf(`.`,n)),10)}var r=e.indexOf(`Edge/`);return r>0?parseInt(e.substring(r+5,e.indexOf(`.`,r)),10):-1}var KA;function qA(){qA.init||(qA.init=!0,KA=GA()!==-1)}var JA={name:`ResizeObserver`,props:{emitOnMount:{type:Boolean,default:!1},ignoreWidth:{type:Boolean,default:!1},ignoreHeight:{type:Boolean,default:!1}},mounted:function(){var e=this;qA(),this.$nextTick(function(){e._w=e.$el.offsetWidth,e._h=e.$el.offsetHeight,e.emitOnMount&&e.emitSize()});var t=document.createElement(`object`);this._resizeObject=t,t.setAttribute(`aria-hidden`,`true`),t.setAttribute(`tabindex`,-1),t.onload=this.addResizeHandlers,t.type=`text/html`,KA&&this.$el.appendChild(t),t.data=`about:blank`,KA||this.$el.appendChild(t)},beforeDestroy:function(){this.removeResizeHandlers()},methods:{compareAndNotify:function(){(!this.ignoreWidth&&this._w!==this.$el.offsetWidth||!this.ignoreHeight&&this._h!==this.$el.offsetHeight)&&(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitSize())},emitSize:function(){this.$emit(`notify`,{width:this._w,height:this._h})},addResizeHandlers:function(){this._resizeObject.contentDocument.defaultView.addEventListener(`resize`,this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers:function(){this._resizeObject&&this._resizeObject.onload&&(!KA&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener(`resize`,this.compareAndNotify),this.$el.removeChild(this._resizeObject),this._resizeObject.onload=null,this._resizeObject=null)}}};function YA(e,t,n,r,i,a,o,s,c,l){typeof o!=`boolean`&&(c=s,s=o,o=!1);var u=typeof n==`function`?n.options:n;e&&e.render&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,i&&(u.functional=!0)),r&&(u._scopeId=r);var d;if(a?(d=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!e&&typeof __VUE_SSR_CONTEXT__<`u`&&(e=__VUE_SSR_CONTEXT__),t&&t.call(this,c(e)),e&&e._registeredComponents&&e._registeredComponents.add(a)},u._ssrRegister=d):t&&(d=o?function(e){t.call(this,l(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,s(e))}),d)if(u.functional){var f=u.render;u.render=function(e,t){return d.call(t),f(e,t)}}else{var p=u.beforeCreate;u.beforeCreate=p?[].concat(p,d):[d]}return n}var XA=JA,ZA=function(){var e=this,t=e.$createElement;return(e._self._c||t)(`div`,{staticClass:`resize-observer`,attrs:{tabindex:`-1`}})},QA=[];ZA._withStripped=!0;var $A=YA({render:ZA,staticRenderFns:QA},void 0,XA,`data-v-8859cc6c`,!1,void 0,!1,void 0,void 0,void 0);function ej(e){e.component(`resize-observer`,$A),e.component(`ResizeObserver`,$A)}var tj={version:`1.0.1`,install:ej},nj=null;typeof window<`u`?nj=window.Vue:typeof global<`u`&&(nj=global.Vue),nj&&nj.use(tj);var rj=n(((exports,t)=>{var n=Fk();t.exports=function(){try{var e=n(Object,`defineProperty`);return e({},``,{}),e}catch{}}()})),ij=n(((exports,t)=>{var n=rj();function r(e,t,r){t==`__proto__`&&n?n(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}t.exports=r})),aj=n(((exports,t)=>{var n=ij(),r=dk();function i(e,t,i){(i!==void 0&&!r(e[t],i)||i===void 0&&!(t in e))&&n(e,t,i)}t.exports=i})),oj=n(((exports,t)=>{function n(e){return function(t,n,r){for(var i=-1,a=Object(t),o=r(t),s=o.length;s--;){var c=o[e?s:++i];if(n(a[c],c,a)===!1)break}return t}}t.exports=n})),sj=n(((exports,t)=>{t.exports=oj()()})),cj=n(((exports,t)=>{var n=Ck(),r=typeof exports==`object`&&exports&&!exports.nodeType&&exports,i=r&&typeof t==`object`&&t&&!t.nodeType&&t,a=i&&i.exports===r?n.Buffer:void 0,o=a?a.allocUnsafe:void 0;function s(e,t){if(t)return e.slice();var n=e.length,r=o?o(n):new e.constructor(n);return e.copy(r),r}t.exports=s})),lj=n(((exports,t)=>{var n=oA();function r(e){var t=new e.constructor(e.byteLength);return new n(t).set(new n(e)),t}t.exports=r})),uj=n(((exports,t)=>{var n=lj();function r(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}t.exports=r})),dj=n(((exports,t)=>{function n(e,t){var n=-1,r=e.length;for(t||=Array(r);++n<r;)t[n]=e[n];return t}t.exports=n})),fj=n(((exports,t)=>{var n=Ok(),r=Object.create;t.exports=function(){function e(){}return function(t){if(!n(t))return{};if(r)return r(t);e.prototype=t;var i=new e;return e.prototype=void 0,i}}()})),pj=n(((exports,t)=>{t.exports=AA()(Object.getPrototypeOf,Object)})),mj=n(((exports,t)=>{var n=fj(),r=pj(),i=kA();function a(e){return typeof e.constructor==`function`&&!i(e)?n(r(e)):{}}t.exports=a})),hj=n(((exports,t)=>{var n=NA(),r=_A();function i(e){return r(e)&&n(e)}t.exports=i})),gj=n(((exports,t)=>{var n=Dk(),r=pj(),i=_A(),a=Function.prototype,o=Object.prototype,s=a.toString,c=o.hasOwnProperty,l=s.call(Object);function u(e){if(!i(e)||n(e)!=`[object Object]`)return!1;var t=r(e);if(t===null)return!0;var a=c.call(t,`constructor`)&&t.constructor;return typeof a==`function`&&a instanceof a&&s.call(a)==l}t.exports=u})),_j=n(((exports,t)=>{function n(e,t){if(!(t===`constructor`&&typeof e[t]==`function`)&&t!=`__proto__`)return e[t]}t.exports=n})),vj=n(((exports,t)=>{var n=ij(),r=dk(),i=Object.prototype.hasOwnProperty;function a(e,t,a){var o=e[t];(!(i.call(e,t)&&r(o,a))||a===void 0&&!(t in e))&&n(e,t,a)}t.exports=a})),yj=n(((exports,t)=>{var n=vj(),r=ij();function i(e,t,i,a){var o=!i;i||={};for(var s=-1,c=t.length;++s<c;){var l=t[s],u=a?a(i[l],e[l],l,i,e):void 0;u===void 0&&(u=e[l]),o?r(i,l,u):n(i,l,u)}return i}t.exports=i})),bj=n(((exports,t)=>{function n(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}t.exports=n})),xj=n(((exports,t)=>{var n=Ok(),r=kA(),i=bj(),a=Object.prototype.hasOwnProperty;function o(e){if(!n(e))return i(e);var t=r(e),o=[];for(var s in e)s==`constructor`&&(t||!a.call(e,s))||o.push(s);return o}t.exports=o})),Sj=n(((exports,t)=>{var n=OA(),r=xj(),i=NA();function a(e){return i(e)?n(e,!0):r(e)}t.exports=a})),Cj=n(((exports,t)=>{var n=yj(),r=Sj();function i(e){return n(e,r(e))}t.exports=i})),wj=n(((exports,t)=>{var n=aj(),r=cj(),i=uj(),a=dj(),o=mj(),s=yA(),c=dA(),l=hj(),u=xA(),d=kk(),f=Ok(),p=gj(),m=DA(),h=_j(),g=Cj();function _(e,t,_,v,y,b,x){var S=h(e,_),C=h(t,_),w=x.get(C);if(w){n(e,_,w);return}var T=b?b(S,C,_+``,e,t,x):void 0,E=T===void 0;if(E){var D=c(C),O=!D&&u(C),k=!D&&!O&&m(C);T=C,D||O||k?c(S)?T=S:l(S)?T=a(S):O?(E=!1,T=r(C,!0)):k?(E=!1,T=i(C,!0)):T=[]:p(C)||s(C)?(T=S,s(S)?T=g(S):(!f(S)||d(S))&&(T=o(C))):E=!1}E&&(x.set(C,T),y(T,C,v,b,x),x.delete(C)),n(e,_,T)}t.exports=_})),Tj=n(((exports,t)=>{var n=$k(),r=aj(),i=sj(),a=wj(),o=Ok(),s=Sj(),c=_j();function l(e,t,u,d,f){e!==t&&i(t,function(i,s){if(f||=new n,o(i))a(e,t,s,u,l,d,f);else{var p=d?d(c(e,s),i,s+``,e,t,f):void 0;p===void 0&&(p=i),r(e,s,p)}},s)}t.exports=l})),Ej=n(((exports,t)=>{function n(e){return e}t.exports=n})),Dj=n(((exports,t)=>{function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}t.exports=n})),Oj=n(((exports,t)=>{var n=Dj(),r=Math.max;function i(e,t,i){return t=r(t===void 0?e.length-1:t,0),function(){for(var a=arguments,o=-1,s=r(a.length-t,0),c=Array(s);++o<s;)c[o]=a[t+o];o=-1;for(var l=Array(t+1);++o<t;)l[o]=a[o];return l[t]=i(c),n(e,this,l)}}t.exports=i})),kj=n(((exports,t)=>{function n(e){return function(){return e}}t.exports=n})),Aj=n(((exports,t)=>{var n=kj(),r=rj(),i=Ej();t.exports=r?function(e,t){return r(e,`toString`,{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:i})),jj=n(((exports,t)=>{var n=Date.now;function r(e){var t=0,r=0;return function(){var i=n(),a=16-(i-r);if(r=i,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}t.exports=r})),Mj=n(((exports,t)=>{var n=Aj();t.exports=jj()(n)})),Nj=n(((exports,t)=>{var n=Ej(),r=Oj(),i=Mj();function a(e,t){return i(r(e,t,n),e+``)}t.exports=a})),Pj=n(((exports,t)=>{var n=dk(),r=NA(),i=SA(),a=Ok();function o(e,t,o){if(!a(o))return!1;var s=typeof t;return(s==`number`?r(o)&&i(t,o.length):s==`string`&&t in o)?n(o[t],e):!1}t.exports=o})),Fj=n(((exports,t)=>{var n=Nj(),r=Pj();function i(e){return n(function(t,n){var i=-1,a=n.length,o=a>1?n[a-1]:void 0,s=a>2?n[2]:void 0;for(o=e.length>3&&typeof o==`function`?(a--,o):void 0,s&&r(n[0],n[1],s)&&(o=a<3?void 0:o,a=1),t=Object(t);++i<a;){var c=n[i];c&&e(t,c,i,o)}return t})}t.exports=i})),Ij=e(n(((exports,t)=>{var n=Tj();t.exports=Fj()(function(e,t,r){n(e,t,r)})}))()),Lj=function(){};typeof window<`u`&&(Lj=window.SVGAnimatedString);function Rj(e){return typeof e==`string`&&(e=e.split(` `)),e}function zj(e,t){var n=Rj(t),r=e.className instanceof Lj?Rj(e.className.baseVal):Rj(e.className);n.forEach(function(e){r.indexOf(e)===-1&&r.push(e)}),e instanceof SVGElement?e.setAttribute(`class`,r.join(` `)):e.className=r.join(` `)}function Bj(e,t){var n=Rj(t),r=e.className instanceof Lj?Rj(e.className.baseVal):Rj(e.className);n.forEach(function(e){var t=r.indexOf(e);t!==-1&&r.splice(t,1)}),e instanceof SVGElement?e.setAttribute(`class`,r.join(` `)):e.className=r.join(` `)}var Vj=!1;if(typeof window<`u`){Vj=!1;try{var Hj=Object.defineProperty({},`passive`,{get:function(){Vj=!0}});window.addEventListener(`test`,null,Hj)}catch{}}function Uj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Wj(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]==null?{}:arguments[t];t%2?Uj(Object(n),!0).forEach(function(t){FD(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uj(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Gj={container:!1,delay:0,html:!1,placement:`top`,title:``,template:`<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>`,trigger:`hover focus`,offset:0},Kj=[],qj=function(){function e(t,n){var r=this;ID(this,e),FD(this,`_events`,[]),FD(this,`_setTooltipNodeEvent`,function(e,t,n,i){var a=e.relatedreference||e.toElement||e.relatedTarget;return r._tooltipNode.contains(a)?(r._tooltipNode.addEventListener(e.type,function n(a){var o=a.relatedreference||a.toElement||a.relatedTarget;r._tooltipNode.removeEventListener(e.type,n),t.contains(o)||r._scheduleHide(t,i.delay,i,a)}),!0):!1}),n=Wj(Wj({},Gj),n),t.jquery&&(t=t[0]),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.reference=t,this.options=n,this._isOpen=!1,this._init()}return RD(e,[{key:`show`,value:function(){this._show(this.reference,this.options)}},{key:`hide`,value:function(){this._hide()}},{key:`dispose`,value:function(){this._dispose()}},{key:`toggle`,value:function(){return this._isOpen?this.hide():this.show()}},{key:`setClasses`,value:function(e){this._classes=e}},{key:`setContent`,value:function(e){this.options.title=e,this._tooltipNode&&this._setContent(e,this.options)}},{key:`setOptions`,value:function(e){var t=!1,n=e&&e.classes||aM.options.defaultClass;(0,WA.default)(this._classes,n)||(this.setClasses(n),t=!0),e=$j(e);var r=!1,i=!1;for(var a in(this.options.offset!==e.offset||this.options.placement!==e.placement)&&(r=!0),(this.options.template!==e.template||this.options.trigger!==e.trigger||this.options.container!==e.container||t)&&(i=!0),e)this.options[a]=e[a];if(this._tooltipNode)if(i){var o=this._isOpen;this.dispose(),this._init(),o&&this.show()}else r&&this.popperInstance.update()}},{key:`_init`,value:function(){var e=typeof this.options.trigger==`string`?this.options.trigger.split(` `):[];this._isDisposed=!1,this._enableDocumentTouch=e.indexOf(`manual`)===-1,e=e.filter(function(e){return[`click`,`hover`,`focus`].indexOf(e)!==-1}),this._setEventListeners(this.reference,e,this.options),this.$_originalTitle=this.reference.getAttribute(`title`),this.reference.removeAttribute(`title`),this.reference.setAttribute(`data-original-title`,this.$_originalTitle)}},{key:`_create`,value:function(e,t){var n=this,r=window.document.createElement(`div`);r.innerHTML=t.trim();var i=r.childNodes[0];return i.id=this.options.ariaId||`tooltip_${Math.random().toString(36).substr(2,10)}`,i.setAttribute(`aria-hidden`,`true`),this.options.autoHide&&this.options.trigger.indexOf(`hover`)!==-1&&(i.addEventListener(`mouseenter`,function(t){return n._scheduleHide(e,n.options.delay,n.options,t)}),i.addEventListener(`click`,function(t){return n._scheduleHide(e,n.options.delay,n.options,t)})),i}},{key:`_setContent`,value:function(e,t){var n=this;this.asyncContent=!1,this._applyContent(e,t).then(function(){n.popperInstance&&n.popperInstance.update()})}},{key:`_applyContent`,value:function(e,t){var n=this;return new Promise(function(r,i){var a=t.html,o=n._tooltipNode;if(o){var s=o.querySelector(n.options.innerSelector);if(e.nodeType===1){if(a){for(;s.firstChild;)s.removeChild(s.firstChild);s.appendChild(e)}}else if(typeof e==`function`){var c=e();c&&typeof c.then==`function`?(n.asyncContent=!0,t.loadingClass&&zj(o,t.loadingClass),t.loadingContent&&n._applyContent(t.loadingContent,t),c.then(function(e){return t.loadingClass&&Bj(o,t.loadingClass),n._applyContent(e,t)}).then(r).catch(i)):n._applyContent(c,t).then(r).catch(i);return}else a?s.innerHTML=e:s.innerText=e;r()}})}},{key:`_show`,value:function(e,t){if(!(t&&typeof t.container==`string`&&!document.querySelector(t.container))){clearTimeout(this._disposeTimer),t=Object.assign({},t),delete t.offset;var n=!0;this._tooltipNode&&(zj(this._tooltipNode,this._classes),n=!1);var r=this._ensureShown(e,t);return n&&this._tooltipNode&&zj(this._tooltipNode,this._classes),zj(e,[`v-tooltip-open`]),r}}},{key:`_ensureShown`,value:function(e,t){var n=this;if(this._isOpen)return this;if(this._isOpen=!0,Kj.push(this),this._tooltipNode)return this._tooltipNode.style.display=``,this._tooltipNode.setAttribute(`aria-hidden`,`false`),this.popperInstance.enableEventListeners(),this.popperInstance.update(),this.asyncContent&&this._setContent(t.title,t),this;var r=e.getAttribute(`title`)||t.title;if(!r)return this;var i=this._create(e,t.template);this._tooltipNode=i,e.setAttribute(`aria-describedby`,i.id);var a=this._findContainer(t.container,e);this._append(i,a);var o=Wj(Wj({},t.popperOptions),{},{placement:t.placement});return o.modifiers=Wj(Wj({},o.modifiers),{},{arrow:{element:this.options.arrowSelector}}),t.boundariesElement&&(o.modifiers.preventOverflow={boundariesElement:t.boundariesElement}),this.popperInstance=new lk(e,i,o),this._setContent(r,t),requestAnimationFrame(function(){!n._isDisposed&&n.popperInstance?(n.popperInstance.update(),requestAnimationFrame(function(){n._isDisposed?n.dispose():n._isOpen&&i.setAttribute(`aria-hidden`,`false`)})):n.dispose()}),this}},{key:`_noLongerOpen`,value:function(){var e=Kj.indexOf(this);e!==-1&&Kj.splice(e,1)}},{key:`_hide`,value:function(){var e=this;if(!this._isOpen)return this;this._isOpen=!1,this._noLongerOpen(),this._tooltipNode.style.display=`none`,this._tooltipNode.setAttribute(`aria-hidden`,`true`),this.popperInstance&&this.popperInstance.disableEventListeners(),clearTimeout(this._disposeTimer);var t=aM.options.disposeTimeout;return t!==null&&(this._disposeTimer=setTimeout(function(){e._tooltipNode&&(e._tooltipNode.removeEventListener(`mouseenter`,e.hide),e._tooltipNode.removeEventListener(`click`,e.hide),e._removeTooltipNode())},t)),Bj(this.reference,[`v-tooltip-open`]),this}},{key:`_removeTooltipNode`,value:function(){if(this._tooltipNode){var e=this._tooltipNode.parentNode;e&&(e.removeChild(this._tooltipNode),this.reference.removeAttribute(`aria-describedby`)),this._tooltipNode=null}}},{key:`_dispose`,value:function(){var e=this;return this._isDisposed=!0,this.reference.removeAttribute(`data-original-title`),this.$_originalTitle&&this.reference.setAttribute(`title`,this.$_originalTitle),this._events.forEach(function(t){var n=t.func,r=t.event;e.reference.removeEventListener(r,n)}),this._events=[],this._tooltipNode?(this._hide(),this._tooltipNode.removeEventListener(`mouseenter`,this.hide),this._tooltipNode.removeEventListener(`click`,this.hide),this.popperInstance.destroy(),this.popperInstance.options.removeOnDestroy||this._removeTooltipNode()):this._noLongerOpen(),this}},{key:`_findContainer`,value:function(e,t){return typeof e==`string`?e=window.document.querySelector(e):e===!1&&(e=t.parentNode),e}},{key:`_append`,value:function(e,t){t.appendChild(e)}},{key:`_setEventListeners`,value:function(e,t,n){var r=this,i=[],a=[];t.forEach(function(e){switch(e){case`hover`:i.push(`mouseenter`),a.push(`mouseleave`),r.options.hideOnTargetClick&&a.push(`click`);break;case`focus`:i.push(`focus`),a.push(`blur`),r.options.hideOnTargetClick&&a.push(`click`);break;case`click`:i.push(`click`),a.push(`click`);break}}),i.forEach(function(t){var i=function(t){r._isOpen!==!0&&(t.usedByTooltip=!0,r._scheduleShow(e,n.delay,n,t))};r._events.push({event:t,func:i}),e.addEventListener(t,i)}),a.forEach(function(t){var i=function(t){t.usedByTooltip!==!0&&r._scheduleHide(e,n.delay,n,t)};r._events.push({event:t,func:i}),e.addEventListener(t,i)})}},{key:`_onDocumentTouch`,value:function(e){this._enableDocumentTouch&&this._scheduleHide(this.reference,this.options.delay,this.options,e)}},{key:`_scheduleShow`,value:function(e,t,n){var r=this,i=t&&t.show||t||0;clearTimeout(this._scheduleTimer),this._scheduleTimer=window.setTimeout(function(){return r._show(e,n)},i)}},{key:`_scheduleHide`,value:function(e,t,n,r){var i=this,a=t&&t.hide||t||0;clearTimeout(this._scheduleTimer),this._scheduleTimer=window.setTimeout(function(){i._isOpen!==!1&&i._tooltipNode.ownerDocument.body.contains(i._tooltipNode)&&(r.type===`mouseleave`&&i._setTooltipNodeEvent(r,e,t,n)||i._hide(e,n))},a)}}]),e}();typeof document<`u`&&document.addEventListener(`touchstart`,function(e){for(var t=0;t<Kj.length;t++)Kj[t]._onDocumentTouch(e)},Vj?{passive:!0,capture:!0}:!0);function Jj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Yj(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]==null?{}:arguments[t];t%2?Jj(Object(n),!0).forEach(function(t){FD(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jj(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Xj={enabled:!0},Zj=[`top`,`top-start`,`top-end`,`right`,`right-start`,`right-end`,`bottom`,`bottom-start`,`bottom-end`,`left`,`left-start`,`left-end`],Qj={defaultPlacement:`top`,defaultClass:`vue-tooltip-theme`,defaultTargetClass:`has-tooltip`,defaultHtml:!0,defaultTemplate:`<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>`,defaultArrowSelector:`.tooltip-arrow, .tooltip__arrow`,defaultInnerSelector:`.tooltip-inner, .tooltip__inner`,defaultDelay:0,defaultTrigger:`hover focus`,defaultOffset:0,defaultContainer:`body`,defaultBoundariesElement:void 0,defaultPopperOptions:{},defaultLoadingClass:`tooltip-loading`,defaultLoadingContent:`...`,autoHide:!0,defaultHideOnTargetClick:!0,disposeTimeout:5e3,popover:{defaultPlacement:`bottom`,defaultClass:`vue-popover-theme`,defaultBaseClass:`tooltip popover`,defaultWrapperClass:`wrapper`,defaultInnerClass:`tooltip-inner popover-inner`,defaultArrowClass:`tooltip-arrow popover-arrow`,defaultOpenClass:`open`,defaultDelay:0,defaultTrigger:`click`,defaultOffset:0,defaultContainer:`body`,defaultBoundariesElement:void 0,defaultPopperOptions:{},defaultAutoHide:!0,defaultHandleResize:!0}};function $j(e){var t={placement:e.placement===void 0?aM.options.defaultPlacement:e.placement,delay:e.delay===void 0?aM.options.defaultDelay:e.delay,html:e.html===void 0?aM.options.defaultHtml:e.html,template:e.template===void 0?aM.options.defaultTemplate:e.template,arrowSelector:e.arrowSelector===void 0?aM.options.defaultArrowSelector:e.arrowSelector,innerSelector:e.innerSelector===void 0?aM.options.defaultInnerSelector:e.innerSelector,trigger:e.trigger===void 0?aM.options.defaultTrigger:e.trigger,offset:e.offset===void 0?aM.options.defaultOffset:e.offset,container:e.container===void 0?aM.options.defaultContainer:e.container,boundariesElement:e.boundariesElement===void 0?aM.options.defaultBoundariesElement:e.boundariesElement,autoHide:e.autoHide===void 0?aM.options.autoHide:e.autoHide,hideOnTargetClick:e.hideOnTargetClick===void 0?aM.options.defaultHideOnTargetClick:e.hideOnTargetClick,loadingClass:e.loadingClass===void 0?aM.options.defaultLoadingClass:e.loadingClass,loadingContent:e.loadingContent===void 0?aM.options.defaultLoadingContent:e.loadingContent,popperOptions:Yj({},e.popperOptions===void 0?aM.options.defaultPopperOptions:e.popperOptions)};if(t.offset){var n=MD(t.offset),r=t.offset;(n===`number`||n===`string`&&r.indexOf(`,`)===-1)&&(r=`0, ${r}`),t.popperOptions.modifiers||(t.popperOptions.modifiers={}),t.popperOptions.modifiers.offset={offset:r}}return t.trigger&&t.trigger.indexOf(`click`)!==-1&&(t.hideOnTargetClick=!1),t}function eM(e,t){for(var n=e.placement,r=0;r<Zj.length;r++){var i=Zj[r];t[i]&&(n=i)}return n}function tM(e){var t=MD(e);return t===`string`?e:e&&t===`object`?e.content:!1}function nM(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=tM(t),i=t.classes===void 0?aM.options.defaultClass:t.classes,a=Yj({title:r},$j(Yj(Yj({},MD(t)===`object`?t:{}),{},{placement:eM(t,n)}))),o=e._tooltip=new qj(e,a);o.setClasses(i),o._vueEl=e;var s=t.targetClasses===void 0?aM.options.defaultTargetClass:t.targetClasses;return e._tooltipTargetClasses=s,zj(e,s),o}function rM(e){e._tooltip&&(e._tooltip.dispose(),delete e._tooltip,delete e._tooltipOldShow),e._tooltipTargetClasses&&(Bj(e,e._tooltipTargetClasses),delete e._tooltipTargetClasses)}function iM(e,t){var n=t.value;t.oldValue;var r=t.modifiers,i=tM(n);if(!i||!Xj.enabled)rM(e);else{var a;e._tooltip?(a=e._tooltip,a.setContent(i),a.setOptions(Yj(Yj({},n),{},{placement:eM(n,r)}))):a=nM(e,n,r),n.show!==void 0&&n.show!==e._tooltipOldShow&&(e._tooltipOldShow=n.show,n.show?a.show():a.hide())}}var aM={options:Qj,bind:iM,update:iM,unbind:function(e){rM(e)}};function oM(e){e.addEventListener(`click`,cM),e.addEventListener(`touchstart`,lM,Vj?{passive:!0}:!1)}function sM(e){e.removeEventListener(`click`,cM),e.removeEventListener(`touchstart`,lM),e.removeEventListener(`touchend`,uM),e.removeEventListener(`touchcancel`,dM)}function cM(e){var t=e.currentTarget;e.closePopover=!t.$_vclosepopover_touch,e.closeAllPopover=t.$_closePopoverModifiers&&!!t.$_closePopoverModifiers.all}function lM(e){if(e.changedTouches.length===1){var t=e.currentTarget;t.$_vclosepopover_touch=!0,t.$_vclosepopover_touchPoint=e.changedTouches[0],t.addEventListener(`touchend`,uM),t.addEventListener(`touchcancel`,dM)}}function uM(e){var t=e.currentTarget;if(t.$_vclosepopover_touch=!1,e.changedTouches.length===1){var n=e.changedTouches[0],r=t.$_vclosepopover_touchPoint;e.closePopover=Math.abs(n.screenY-r.screenY)<20&&Math.abs(n.screenX-r.screenX)<20,e.closeAllPopover=t.$_closePopoverModifiers&&!!t.$_closePopoverModifiers.all}}function dM(e){var t=e.currentTarget;t.$_vclosepopover_touch=!1}var fM={bind:function(e,t){var n=t.value;e.$_closePopoverModifiers=t.modifiers,(n===void 0||n)&&oM(e)},update:function(e,t){var n=t.value,r=t.oldValue;e.$_closePopoverModifiers=t.modifiers,n!==r&&(n===void 0||n?oM(e):sM(e))},unbind:function(e){sM(e)}};function pM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function mM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]==null?{}:arguments[t];t%2?pM(Object(n),!0).forEach(function(t){FD(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pM(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function hM(e){var t=aM.options.popover[e];return t===void 0?aM.options[e]:t}var gM=!1;typeof window<`u`&&typeof navigator<`u`&&(gM=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream);var _M=[],vM=function(){};typeof window<`u`&&(vM=window.Element);var yM={name:`VPopover`,components:{ResizeObserver:$A},props:{open:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},placement:{type:String,default:function(){return hM(`defaultPlacement`)}},delay:{type:[String,Number,Object],default:function(){return hM(`defaultDelay`)}},offset:{type:[String,Number],default:function(){return hM(`defaultOffset`)}},trigger:{type:String,default:function(){return hM(`defaultTrigger`)}},container:{type:[String,Object,vM,Boolean],default:function(){return hM(`defaultContainer`)}},boundariesElement:{type:[String,vM],default:function(){return hM(`defaultBoundariesElement`)}},popperOptions:{type:Object,default:function(){return hM(`defaultPopperOptions`)}},popoverClass:{type:[String,Array],default:function(){return hM(`defaultClass`)}},popoverBaseClass:{type:[String,Array],default:function(){return aM.options.popover.defaultBaseClass}},popoverInnerClass:{type:[String,Array],default:function(){return aM.options.popover.defaultInnerClass}},popoverWrapperClass:{type:[String,Array],default:function(){return aM.options.popover.defaultWrapperClass}},popoverArrowClass:{type:[String,Array],default:function(){return aM.options.popover.defaultArrowClass}},autoHide:{type:Boolean,default:function(){return aM.options.popover.defaultAutoHide}},handleResize:{type:Boolean,default:function(){return aM.options.popover.defaultHandleResize}},openGroup:{type:String,default:null},openClass:{type:[String,Array],default:function(){return aM.options.popover.defaultOpenClass}},ariaId:{default:null}},data:function(){return{isOpen:!1,id:Math.random().toString(36).substr(2,10)}},computed:{cssClass:function(){return FD({},this.openClass,this.isOpen)},popoverId:function(){return`popover_${this.ariaId==null?this.id:this.ariaId}`}},watch:{open:function(e){e?this.show():this.hide()},disabled:function(e,t){e!==t&&(e?this.hide():this.open&&this.show())},container:function(e){if(this.isOpen&&this.popperInstance){var t=this.$refs.popover,n=this.$refs.trigger,r=this.$_findContainer(this.container,n);if(!r){console.warn(`No container for popover`,this);return}r.appendChild(t),this.popperInstance.scheduleUpdate()}},trigger:function(e){this.$_removeEventListeners(),this.$_addEventListeners()},placement:function(e){var t=this;this.$_updatePopper(function(){t.popperInstance.options.placement=e})},offset:`$_restartPopper`,boundariesElement:`$_restartPopper`,popperOptions:{handler:`$_restartPopper`,deep:!0}},created:function(){this.$_isDisposed=!1,this.$_mounted=!1,this.$_events=[],this.$_preventOpen=!1},mounted:function(){var e=this.$refs.popover;e.parentNode&&e.parentNode.removeChild(e),this.$_init(),this.open&&this.show()},deactivated:function(){this.hide()},beforeDestroy:function(){this.dispose()},methods:{show:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.event;t.skipDelay;var r=t.force;(r!==void 0&&r||!this.disabled)&&(this.$_scheduleShow(n),this.$emit(`show`)),this.$emit(`update:open`,!0),this.$_beingShowed=!0,requestAnimationFrame(function(){e.$_beingShowed=!1})},hide:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.event;e.skipDelay,this.$_scheduleHide(t),this.$emit(`hide`),this.$emit(`update:open`,!1)},dispose:function(){if(this.$_isDisposed=!0,this.$_removeEventListeners(),this.hide({skipDelay:!0}),this.popperInstance&&(this.popperInstance.destroy(),!this.popperInstance.options.removeOnDestroy)){var e=this.$refs.popover;e.parentNode&&e.parentNode.removeChild(e)}this.$_mounted=!1,this.popperInstance=null,this.isOpen=!1,this.$emit(`dispose`)},$_init:function(){this.trigger.indexOf(`manual`)===-1&&this.$_addEventListeners()},$_show:function(){var e=this,t=this.$refs.trigger,n=this.$refs.popover;if(clearTimeout(this.$_disposeTimer),!this.isOpen){if(this.popperInstance&&(this.isOpen=!0,this.popperInstance.enableEventListeners(),this.popperInstance.scheduleUpdate()),!this.$_mounted){var r=this.$_findContainer(this.container,t);if(!r){console.warn(`No container for popover`,this);return}r.appendChild(n),this.$_mounted=!0,this.isOpen=!1,this.popperInstance&&requestAnimationFrame(function(){e.hidden||(e.isOpen=!0)})}if(!this.popperInstance){var i=mM(mM({},this.popperOptions),{},{placement:this.placement});if(i.modifiers=mM(mM({},i.modifiers),{},{arrow:mM(mM({},i.modifiers&&i.modifiers.arrow),{},{element:this.$refs.arrow})}),this.offset){var a=this.$_getOffset();i.modifiers.offset=mM(mM({},i.modifiers&&i.modifiers.offset),{},{offset:a})}this.boundariesElement&&(i.modifiers.preventOverflow=mM(mM({},i.modifiers&&i.modifiers.preventOverflow),{},{boundariesElement:this.boundariesElement})),this.popperInstance=new lk(t,n,i),requestAnimationFrame(function(){if(e.hidden){e.hidden=!1,e.$_hide();return}!e.$_isDisposed&&e.popperInstance?(e.popperInstance.scheduleUpdate(),requestAnimationFrame(function(){if(e.hidden){e.hidden=!1,e.$_hide();return}e.$_isDisposed?e.dispose():e.isOpen=!0})):e.dispose()})}var o=this.openGroup;if(o)for(var s,c=0;c<_M.length;c++)s=_M[c],s.openGroup!==o&&(s.hide(),s.$emit(`close-group`));_M.push(this),this.$emit(`apply-show`)}},$_hide:function(){var e=this;if(this.isOpen){var t=_M.indexOf(this);t!==-1&&_M.splice(t,1),this.isOpen=!1,this.popperInstance&&this.popperInstance.disableEventListeners(),clearTimeout(this.$_disposeTimer);var n=aM.options.popover.disposeTimeout||aM.options.disposeTimeout;n!==null&&(this.$_disposeTimer=setTimeout(function(){var t=e.$refs.popover;t&&(t.parentNode&&t.parentNode.removeChild(t),e.$_mounted=!1)},n)),this.$emit(`apply-hide`)}},$_findContainer:function(e,t){return typeof e==`string`?e=window.document.querySelector(e):e===!1&&(e=t.parentNode),e},$_getOffset:function(){var e=MD(this.offset),t=this.offset;return(e===`number`||e===`string`&&t.indexOf(`,`)===-1)&&(t=`0, ${t}`),t},$_addEventListeners:function(){var e=this,t=this.$refs.trigger,n=[],r=[];(typeof this.trigger==`string`?this.trigger.split(` `).filter(function(e){return[`click`,`hover`,`focus`].indexOf(e)!==-1}):[]).forEach(function(e){switch(e){case`hover`:n.push(`mouseenter`),r.push(`mouseleave`);break;case`focus`:n.push(`focus`),r.push(`blur`);break;case`click`:n.push(`click`),r.push(`click`);break}}),n.forEach(function(n){var r=function(t){e.isOpen||(t.usedByTooltip=!0,!e.$_preventOpen&&e.show({event:t}),e.hidden=!1)};e.$_events.push({event:n,func:r}),t.addEventListener(n,r)}),r.forEach(function(n){var r=function(t){t.usedByTooltip||(e.hide({event:t}),e.hidden=!0)};e.$_events.push({event:n,func:r}),t.addEventListener(n,r)})},$_scheduleShow:function(){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(clearTimeout(this.$_scheduleTimer),e)this.$_show();else{var t=parseInt(this.delay&&this.delay.show||this.delay||0);this.$_scheduleTimer=setTimeout(this.$_show.bind(this),t)}},$_scheduleHide:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(clearTimeout(this.$_scheduleTimer),n)this.$_hide();else{var r=parseInt(this.delay&&this.delay.hide||this.delay||0);this.$_scheduleTimer=setTimeout(function(){e.isOpen&&(t&&t.type===`mouseleave`&&e.$_setTooltipNodeEvent(t)||e.$_hide())},r)}},$_setTooltipNodeEvent:function(e){var t=this,n=this.$refs.trigger,r=this.$refs.popover,i=e.relatedreference||e.toElement||e.relatedTarget;return r.contains(i)?(r.addEventListener(e.type,function i(a){var o=a.relatedreference||a.toElement||a.relatedTarget;r.removeEventListener(e.type,i),n.contains(o)||t.hide({event:a})}),!0):!1},$_removeEventListeners:function(){var e=this.$refs.trigger;this.$_events.forEach(function(t){var n=t.func,r=t.event;e.removeEventListener(r,n)}),this.$_events=[]},$_updatePopper:function(e){this.popperInstance&&(e(),this.isOpen&&this.popperInstance.scheduleUpdate())},$_restartPopper:function(){if(this.popperInstance){var e=this.isOpen;this.dispose(),this.$_isDisposed=!1,this.$_init(),e&&this.show({skipDelay:!0,force:!0})}},$_handleGlobalClose:function(e){var t=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this.$_beingShowed||(this.hide({event:e}),e.closePopover?this.$emit(`close-directive`):this.$emit(`auto-hide`),n&&(this.$_preventOpen=!0,setTimeout(function(){t.$_preventOpen=!1},300)))},$_handleResize:function(){this.isOpen&&this.popperInstance&&(this.popperInstance.scheduleUpdate(),this.$emit(`resize`))}}};typeof document<`u`&&typeof window<`u`&&(gM?document.addEventListener(`touchend`,xM,Vj?{passive:!0,capture:!0}:!0):window.addEventListener(`click`,bM,!0));function bM(e){SM(e)}function xM(e){SM(e,!0)}function SM(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=function(n){var r=_M[n];if(r.$refs.popover){var i=r.$refs.popover.contains(e.target);requestAnimationFrame(function(){(e.closeAllPopover||e.closePopover&&i||r.autoHide&&!i)&&r.$_handleGlobalClose(e,t)})}},r=0;r<_M.length;r++)n(r)}function CM(e,t,n,r,i,a,o,s,c,l){typeof o!=`boolean`&&(c=s,s=o,o=!1);let u=typeof n==`function`?n.options:n;e&&e.render&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,i&&(u.functional=!0)),r&&(u._scopeId=r);let d;if(a?(d=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!e&&typeof __VUE_SSR_CONTEXT__<`u`&&(e=__VUE_SSR_CONTEXT__),t&&t.call(this,c(e)),e&&e._registeredComponents&&e._registeredComponents.add(a)},u._ssrRegister=d):t&&(d=o?function(e){t.call(this,l(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,s(e))}),d)if(u.functional){let e=u.render;u.render=function(t,n){return d.call(n),e(t,n)}}else{let e=u.beforeCreate;u.beforeCreate=e?[].concat(e,d):[d]}return n}var wM=yM,TM=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(`div`,{staticClass:`v-popover`,class:e.cssClass},[n(`div`,{ref:`trigger`,staticClass:`trigger`,staticStyle:{display:`inline-block`},attrs:{"aria-describedby":e.isOpen?e.popoverId:void 0,tabindex:e.trigger.indexOf(`focus`)===-1?void 0:0}},[e._t(`default`)],2),e._v(` `),n(`div`,{ref:`popover`,class:[e.popoverBaseClass,e.popoverClass,e.cssClass],style:{visibility:e.isOpen?`visible`:`hidden`},attrs:{id:e.popoverId,"aria-hidden":e.isOpen?`false`:`true`,tabindex:e.autoHide?0:void 0},on:{keyup:function(t){if(!t.type.indexOf(`key`)&&e._k(t.keyCode,`esc`,27,t.key,[`Esc`,`Escape`]))return null;e.autoHide&&e.hide()}}},[n(`div`,{class:e.popoverWrapperClass},[n(`div`,{ref:`inner`,class:e.popoverInnerClass,staticStyle:{position:`relative`}},[n(`div`,[e._t(`popover`,null,{isOpen:e.isOpen})],2),e._v(` `),e.handleResize?n(`ResizeObserver`,{on:{notify:e.$_handleResize}}):e._e()],1),e._v(` `),n(`div`,{ref:`arrow`,class:e.popoverArrowClass})])])])},EM=[];TM._withStripped=!0;var DM=CM({render:TM,staticRenderFns:EM},void 0,wM,void 0,!1,void 0,!1,void 0,void 0,void 0);function OM(e,t){t===void 0&&(t={});var n=t.insertAt;if(!(!e||typeof document>`u`)){var r=document.head||document.getElementsByTagName(`head`)[0],i=document.createElement(`style`);i.type=`text/css`,n===`top`&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}OM(`.resize-observer[data-v-8859cc6c]{position:absolute;top:0;left:0;z-index:-1;width:100%;height:100%;border:none;background-color:transparent;pointer-events:none;display:block;overflow:hidden;opacity:0}.resize-observer[data-v-8859cc6c] object{display:block;position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden;pointer-events:none;z-index:-1}`);function kM(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!kM.installed){kM.installed=!0;var n={};(0,Ij.default)(n,Qj,t),AM.options=n,aM.options=n,e.directive(`tooltip`,aM),e.directive(`close-popover`,fM),e.component(`VPopover`,DM)}}var AM={install:kM,get enabled(){return Xj.enabled},set enabled(e){Xj.enabled=e}},jM=null;typeof window<`u`?jM=window.Vue:typeof global<`u`&&(jM=global.Vue),jM&&jM.use(AM);var MM=AM;function NM(e){"@babel/helpers - typeof";return NM=typeof Symbol==`function`&&typeof Symbol.iterator==`symbol`?function(e){return typeof e}:function(e){return e&&typeof Symbol==`function`&&e.constructor===Symbol&&e!==Symbol.prototype?`symbol`:typeof e},NM(e)}function PM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function FM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function IM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]==null?{}:arguments[t];t%2?FM(Object(n),!0).forEach(function(t){PM(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FM(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var LM=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(n,r){if(!(typeof document>`u`)){var i=document.head||document.getElementsByTagName(`head`)[0],a=document.createElement(`script`);if(a.async=!0,a.src=e,a.defer=t.defer,t.preconnectOrigin){var o=document.createElement(`link`);o.href=t.preconnectOrigin,o.rel=`preconnect`,i.appendChild(o)}i.appendChild(a),a.onload=n,a.onerror=r}})},RM=function(e){return typeof e==`function`},zM=function(e){return e&&NM(e)===`object`&&!Array.isArray(e)},BM=function e(t){var n=[...arguments].slice(1);if(!n.length)return t;var r=n.shift();if(!(!zM(t)||!zM(r))){for(var i in r)zM(r[i])?(t[i]||Object.assign(t,PM({},i,{})),e(t[i],r[i])):Object.assign(t,PM({},i,r[i]));return e.apply(void 0,[t].concat(n))}},VM=function(){return!(typeof window>`u`||typeof document>`u`)},HM=function(e){arguments.length>1&&arguments[1]!==void 0&&arguments[1]},UM=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return HM(`Missing "appName" property inside the plugin options.`,e.app_name==null),HM(`Missing "name" property in the route.`,e.screen_name==null),e};function WM(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:``,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:``,n=e.split(`/`),r=t.split(`/`);return n[0]===``&&t[t.length-1]===`/`&&n.shift(),r.join(`/`)+n.join(`/`)}var GM=function(){return{bootstrap:!0,onReady:null,onError:null,onBeforeTrack:null,onAfterTrack:null,pageTrackerTemplate:null,customResourceURL:`https://www.googletagmanager.com/gtag/js`,customPreconnectOrigin:`https://www.googletagmanager.com`,deferScriptLoad:!1,pageTrackerExcludedRoutes:[],pageTrackerEnabled:!0,enabled:!0,disableScriptLoad:!1,pageTrackerScreenviewEnabled:!1,appName:null,pageTrackerUseFullPath:!1,pageTrackerPrependBase:!0,pageTrackerSkipSamePath:!0,globalDataLayerName:`dataLayer`,globalObjectName:`gtag`,defaultGroupName:`default`,includes:null,config:{id:null,params:{send_page_view:!1}}}},KM={},qM=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=GM();KM=BM(t,e)},JM=function(){return KM},YM=(function(){var e,t=JM(),n=t.globalObjectName;!VM()||window[n]===void 0||(e=window)[n].apply(e,arguments)}),XM=(function(){var e=[...arguments],t=JM(),n=t.config,r=t.includes;YM.apply(void 0,[`config`,n.id].concat(e)),Array.isArray(r)&&r.forEach(function(t){YM.apply(void 0,[`config`,t.id].concat(e))})}),ZM=function(e,t){VM()&&(window[`ga-disable-${e}`]=t)},QM=(function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,t=JM(),n=t.config,r=t.includes;ZM(n.id,e),Array.isArray(r)&&r.forEach(function(t){return ZM(t.id,e)})}),$M=(function(){QM(!0)}),eN=(function(){QM(!1)}),tN,nN=function(e){tN=e},rN=function(){return tN},iN=(function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=JM(),r=n.includes,i=n.defaultGroupName;t.send_to==null&&Array.isArray(r)&&r.length&&(t.send_to=r.map(function(e){return e.id}).concat(i)),YM(`event`,e,t)}),aN=(function(e){if(VM()){var t;if(typeof e==`string`)t={page_path:e};else if(e.path||e.fullPath){var n=JM(),r=n.pageTrackerUseFullPath,i=n.pageTrackerPrependBase,a=rN(),o=a&&a.options.base,s=r?e.fullPath:e.path;t=IM(IM({},e.name&&{page_title:e.name}),{},{page_path:i?WM(s,o):s})}else t=e;t.page_location??=window.location.href,t.send_page_view??=!0,iN(`page_view`,t)}}),oN=(function(e){var t=JM(),n=t.appName;if(e){var r=typeof e==`string`?{screen_name:e}:e;r.app_name=r.app_name||n,iN(`screen_view`,r)}}),sN=Object.freeze({__proto__:null,query:YM,config:XM,optOut:$M,optIn:eN,pageview:aN,screenview:oN,exception:(function(){var e=[...arguments];iN.apply(void 0,[`exception`].concat(e))}),linker:(function(e){XM(`linker`,e)}),time:(function(e){iN(`timing_complete`,e)}),set:(function(){var e=[...arguments];YM.apply(void 0,[`set`].concat(e))}),refund:(function(){var e=[...arguments];iN.apply(void 0,[`refund`].concat(e))}),purchase:(function(e){iN(`purchase`,e)}),customMap:(function(e){XM({custom_map:e})}),event:iN}),cN=function(e){return e.$gtag=e.prototype.$gtag=sN},lN=(function(){if(VM()){var e=JM(),t=e.enabled,n=e.globalObjectName,r=e.globalDataLayerName;return window[n]??(window[r]=window[r]||[],window[n]=function(){window[r].push(arguments)}),window[n](`js`,new Date),t||$M(),window[n]}}),uN=function(e){return IM({send_page_view:!1},e)},dN=(function(){var e=JM(),t=e.config,n=e.includes;YM(`config`,t.id,uN(t.params)),Array.isArray(n)&&n.forEach(function(e){YM(`config`,e.id,uN(e.params))})}),fN=(function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=JM(),r=n.appName,i=n.pageTrackerTemplate,a=n.pageTrackerScreenviewEnabled;if(!(n.pageTrackerSkipSamePath&&e.path===t.path)){var o=e;if(RM(i)?o=i(e,t):a&&(o=UM({app_name:r,screen_name:e.name})),a){oN(o);return}aN(o)}}),pN=function(e){var t=JM(),n=t.pageTrackerExcludedRoutes;return n.includes(e.path)||n.includes(e.name)},mN=(function(){var e=JM(),t=e.onBeforeTrack,n=e.onAfterTrack,r=rN();r.onReady(function(){a.nextTick().then(function(){var e=r.currentRoute;dN(),!pN(e)&&fN(e)}),r.afterEach(function(e,r){a.nextTick().then(function(){pN(e)||(RM(t)&&t(e,r),fN(e,r),RM(n)&&n(e,r))})})})}),hN=(function(){var e=JM(),t=e.onReady,n=e.onError,r=e.globalObjectName,i=e.globalDataLayerName,a=e.config,o=e.customResourceURL,s=e.customPreconnectOrigin,c=e.deferScriptLoad,l=e.pageTrackerEnabled,u=e.disableScriptLoad,d=!!(l&&rN());if(lN(),d?mN():dN(),!u)return LM(`${o}?id=${a.id}&l=${i}`,{preconnectOrigin:s,defer:c}).then(function(){t&&t(window[r])}).catch(function(e){return n&&n(e),e})}),gN=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;cN(e),qM(t),nN(n),JM().bootstrap&&hN()},_N=class e{static initializeVars(){e._wasLongPress=!1,e._pressTimer=null,e._currentCancelHandler=null,e._currentTarget=null,e._pressCount=0}static addTo(t,n,r){if(!Object.hasOwn(r,`longPress`))throw Error(`Need to specify a longPress handler`);let i=t=>e._pressBegin(n,r.longPress,r.cancel,r.repeat,t);t.addEventListener(`mousedown`,i),t.addEventListener(`touchstart`,i),t.addEventListener(`mouseout`,e._cancelCurrentPress),t.addEventListener(`touchcancel`,e._cancelCurrentPress),t.addEventListener(`touchmove`,n=>{n.preventDefault();let r=n.changedTouches[0];t!==document.elementFromPoint(r.pageX,r.pageY)&&e._cancelCurrentPress()}),r.click?(t.addEventListener(`click`,t=>e._handleClick(t,r.click)),t.addEventListener(`touchend`,t=>e._handleTouchEnd(t,r.click))):(t.addEventListener(`click`,e._cancelCurrentPress),t.addEventListener(`touchend`,e._cancelCurrentPress))}static _cancelCurrentPress(t){e._currentCancelHandler&&=(e._currentCancelHandler(t),null),e._pressTimer!==null&&(clearTimeout(e._pressTimer),e._pressTimer=null),e._wasLongPress=!1,e._currentTarget=null}static _pressBegin(t,n,r,i,a){e._cancelCurrentPress(a),!(a.type===`click`&&a.button!==0)&&(++e._pressCount,e._currentCancelHandler=r,e._wasLongPress=!1,e._currentTarget=a.target,a.target.focus(),e._pressTimer=setTimeout(()=>{e._wasLongPress=!0,n(a),i?e._beginRepeat(i,n,a):(e._pressTimer=null,e._currentCancelHandler=null)},t))}static _beginRepeat(t,n,r){e._pressTimer=setTimeout(()=>{n(r),e._beginRepeat(t,n,r)},t)}static _handleClick(t,n){let r=e._wasLongPress;return t.button===0?(e._cancelCurrentPress(t),r?!1:n(t)):n(t)}static _handleTouchEnd(t,n){let r=e._currentTarget,i=e._wasLongPress;return e._cancelCurrentPress(t),!i&&r===t.target?n(t):!1}};_N.initializeVars();function vN(e){e.directive(`long-press`,{bind(e,t,n){let r=(e,t)=>{let r=n.data&&n.data.on;r&&r[e]&&r[e].fns(t)};_N.addTo(e,t.value.delay,{longPress:()=>r(`longpress`),cancel:()=>r(`longpresscancel`),click:()=>r(`longpressclick`)})}})}function yN(e){e.directive(`repeating-click`,{bind(e,t,n){let r=(e,t)=>{let r=n.data&&n.data.on;r&&r[e]&&r[e].fns(t)};_N.addTo(e,t.value.delay,{longPress:()=>r(`repeatclick`),click:()=>r(`firstclick`),repeat:250})}})}const bN=function(){let e=document.createElement(`div`);e.classList.add(`o-notification`);let t=`a-notification--enter`;function n(r,i,a=2e3){if(!GameUI.initialized){setTimeout(n,500,r,i,a);return}let o=e.cloneNode();o.textContent=r,o.classList.add(i,t),document.querySelector(`#notification-container`).append(o);let s=!1;function c(){s||(s=!0,o.classList.remove(t))}setTimeout(()=>c(),500);let l=!1;function u(){l||(l=!0,c(),o.classList.add(`a-notification--leave`),setTimeout(()=>o.remove(),500))}setTimeout(()=>u(),a),o.onclick=()=>u()}return{success:(e,t)=>n(e,`o-notification--success`,t),error:(e,t)=>n(e,`o-notification--error`,t),info:(e,t)=>n(e,`o-notification--info`,t),infinity:(e,t)=>n(e,`o-notification--infinity`,t),eternity:(e,t)=>n(e,`o-notification--eternity`,t),reality:(e,t)=>n(e,`o-notification--reality`,t),automator:(e,t)=>n(e,`o-notification--automator`,t),blackHole:(e,t)=>n(e,`o-notification--black-hole`,t),strike:(e,t)=>n(e,`o-notification--strike`,t),showBlackHoles:!0}}(),xN={view:{modal:{queue:[],current:void 0,cloudConflict:[],progressBar:void 0},quotes:{queue:[],current:void 0,history:void 0},tabs:{reality:{openGlyphWeights:!1,currentGlyphTooltip:-1,glyphTooltipDirection:1,draggingGlyphInfo:{id:0,type:``,sacrificeValue:0},mouseoverGlyphInfo:{id:0,type:``,sacrificeValue:0,refineValue:0,inInventory:!1},automator:{fullScreen:!1,editorScriptID:``,lines:[]}}},shiftDown:!1,theme:`Normal`,bigCrunch:!1,scrollWindow:0,draggingUIID:-1,currentContextMenu:null,tab:`dimensions`,subtab:`antimatter`,newUI:!1,news:!1,initialized:!1,tutorialState:0,tutorialActive:!0,h2pForcedTab:void 0},notationName:``,lnotationName:``,formatPreBreak:!1,lastClickTime:0};var SN={name:`BlobBackground`,props:{bounds:{type:Object,required:!0}},mounted(){this.drop()},methods:{drop(){let e=5+Math.random()*8,t=this.bounds,n={x:Math.random()*(t.x-60),y:60+Math.random()*(t.y-60)};this.$el.textContent=r(),this.$el.setAttribute(`x`,n.x),this.$el.setAttribute(`y`,n.y),this.$el.setAttribute(`font-size`,`${e}em`);function r(){let e=``.codePointAt(0)||65,t=[];for(let n=0;n<23;n++)t.push(String.fromCodePoint(e+n));return t[Math.floor(Math.random()*t.length)]}}}},CN=D(SN,function(){var e=this,t=e._self._c;return t(`text`,{staticClass:`o-blob-background`})},[],!1,null,`597b6f81`,null,null).exports,wN=n(((exports,t)=>{var n=n||(function(){var e=[];return{getAll:function(){return e},removeAll:function(){e=[]},add:function(t){e.push(t)},remove:function(t){var n=e.indexOf(t);n!==-1&&e.splice(n,1)},update:function(t,r){if(e.length===0)return!1;var i=0;for(t=t===void 0?n.now():t;i<e.length;)e[i].update(t)||r?i++:e.splice(i,1);return!0}}})();typeof window>`u`&&typeof process<`u`?n.now=function(){var e=process.hrtime();return e[0]*1e3+e[1]/1e6}:typeof window<`u`&&window.performance!==void 0&&window.performance.now!==void 0?n.now=window.performance.now.bind(window.performance):Date.now===void 0?n.now=function(){return new Date().getTime()}:n.now=Date.now,n.Tween=function(e){var t=e,r={},i={},a={},o=1e3,s=0,c,l=!1,u=!1,d=!1,f=0,p=null,m=n.Easing.Linear.None,h=n.Interpolation.Linear,g=[],_=null,v=!1,y=null,b=null,x=null;this.to=function(e,t){return i=e,t!==void 0&&(o=t),this},this.start=function(e){for(var o in n.add(this),u=!0,v=!1,p=e===void 0?n.now():e,p+=f,i){if(i[o]instanceof Array){if(i[o].length===0)continue;i[o]=[t[o]].concat(i[o])}if(t[o]===void 0)continue;r[o]=t[o],r[o]instanceof Array||(r[o]*=1),a[o]=r[o]||0}return this},this.stop=function(){return u?(n.remove(this),u=!1,x!==null&&x.call(t,t),this.stopChainedTweens(),this):this},this.end=function(){return this.update(p+o),this},this.stopChainedTweens=function(){for(var e=0,t=g.length;e<t;e++)g[e].stop()},this.delay=function(e){return f=e,this},this.repeat=function(e){return s=e,this},this.repeatDelay=function(e){return c=e,this},this.yoyo=function(e){return l=e,this},this.easing=function(e){return m=e,this},this.interpolation=function(e){return h=e,this},this.chain=function(){return g=arguments,this},this.onStart=function(e){return _=e,this},this.onUpdate=function(e){return y=e,this},this.onComplete=function(e){return b=e,this},this.onStop=function(e){return x=e,this},this.update=function(e){var n,u,x;if(e<p)return!0;for(n in v===!1&&(_!==null&&_.call(t,t),v=!0),u=(e-p)/o,u=u>1?1:u,x=m(u),i){if(r[n]===void 0)continue;var S=r[n]||0,C=i[n];C instanceof Array?t[n]=h(C,x):(typeof C==`string`&&(C=C.charAt(0)===`+`||C.charAt(0)===`-`?S+parseFloat(C):parseFloat(C)),typeof C==`number`&&(t[n]=S+(C-S)*x))}if(y!==null&&y.call(t,x),u===1)if(s>0){for(n in isFinite(s)&&s--,a){if(typeof i[n]==`string`&&(a[n]=a[n]+parseFloat(i[n])),l){var w=a[n];a[n]=i[n],i[n]=w}r[n]=a[n]}return l&&(d=!d),p=c===void 0?e+f:e+c,!0}else{b!==null&&b.call(t,t);for(var T=0,E=g.length;T<E;T++)g[T].start(p+o);return!1}return!0}},n.Easing={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return .5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return e===0?0:1024**(e-1)},Out:function(e){return e===1?1:1-2**(-10*e)},InOut:function(e){return e===0?0:e===1?1:(e*=2)<1?.5*1024**(e-1):.5*(-(2**(-10*(e-1)))+2)}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){return e===0?0:e===1?1:-(2**(10*(e-1)))*Math.sin((e-1.1)*5*Math.PI)},Out:function(e){return e===0?0:e===1?1:2**(-10*e)*Math.sin((e-.1)*5*Math.PI)+1},InOut:function(e){return e===0?0:e===1?1:(e*=2,e<1?-.5*2**(10*(e-1))*Math.sin((e-1.1)*5*Math.PI):.5*2**(-10*(e-1))*Math.sin((e-1.1)*5*Math.PI)+1)}},Back:{In:function(e){var t=1.70158;return e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},InOut:function(e){var t=1.70158*1.525;return(e*=2)<1?.5*(e*e*((t+1)*e-t)):.5*((e-=2)*e*((t+1)*e+t)+2)}},Bounce:{In:function(e){return 1-n.Easing.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?n.Easing.Bounce.In(e*2)*.5:n.Easing.Bounce.Out(e*2-1)*.5+.5}}},n.Interpolation={Linear:function(e,t){var r=e.length-1,i=r*t,a=Math.floor(i),o=n.Interpolation.Utils.Linear;return t<0?o(e[0],e[1],i):t>1?o(e[r],e[r-1],r-i):o(e[a],e[a+1>r?r:a+1],i-a)},Bezier:function(e,t){for(var r=0,i=e.length-1,a=Math.pow,o=n.Interpolation.Utils.Bernstein,s=0;s<=i;s++)r+=a(1-t,i-s)*a(t,s)*e[s]*o(i,s);return r},CatmullRom:function(e,t){var r=e.length-1,i=r*t,a=Math.floor(i),o=n.Interpolation.Utils.CatmullRom;return e[0]===e[r]?(t<0&&(a=Math.floor(i=r*(1+t))),o(e[(a-1+r)%r],e[a],e[(a+1)%r],e[(a+2)%r],i-a)):t<0?e[0]-(o(e[0],e[0],e[1],e[1],-i)-e[0]):t>1?e[r]-(o(e[r],e[r],e[r-1],e[r-1],i-r)-e[r]):o(e[a?a-1:0],e[a],e[r<a+1?r:a+1],e[r<a+2?r:a+2],i-a)},Utils:{Linear:function(e,t,n){return(t-e)*n+e},Bernstein:function(e,t){var r=n.Interpolation.Utils.Factorial;return r(e)/r(t)/r(e-t)},Factorial:(function(){var e=[1];return function(t){var n=1;if(e[t])return e[t];for(var r=t;r>1;r--)n*=r;return e[t]=n,n}})(),CatmullRom:function(e,t,n,r,i){var a=(n-e)*.5,o=(r-t)*.5,s=i*i,c=i*s;return(2*t-2*n+a+o)*c+(-3*t+3*n-2*a-o)*s+a*i+t}}},(function(r){typeof define==`function`&&define.amd?define([],function(){return n}):t!==void 0&&typeof exports==`object`?t.exports=n:r!==void 0&&(r.TWEEN=n)})(exports)})),TN=e(wN()),EN={name:`BlobSnowflake`,props:{bounds:{type:Object,required:!0}},mounted(){this.fly()},beforeDestroy(){for(let e of this.tweens)TN.default.remove(e)},methods:{fly(){let e=50+Math.random()*50,t=160+Math.random()*60,n=1e3+Math.random()*1e4,r=3e3+Math.random()*1e3,i=2+Math.random()*3,a=this.bounds,o={x:-300,y:-150},s=a.y+150,c=Math.random()-.5,l=new TN.default.Tween(o).to({x:`${c<0?`-`:`+`}${e}`},r).easing(TN.default.Easing.Sinusoidal.InOut),u=new TN.default.Tween(o).to({x:`${c<0?`+`:`-`}${e}`},r).easing(TN.default.Easing.Sinusoidal.InOut),d=new TN.default.Tween(o).to({y:`+${t}`},r).easing(TN.default.Easing.Linear.None).onUpdate(()=>{this.$el.setAttribute(`x`,o.x),this.$el.setAttribute(`y`,o.y),o.y>s&&(l.chain(f),u.chain(f),d.chain(p))}),f=new TN.default.Tween(o).to({x:120+Math.random()*(a.x-240)},0).chain(l).easing(TN.default.Easing.Linear.None),p=new TN.default.Tween(o).to({y:-150},0).easing(TN.default.Easing.Linear.None).chain(d).onUpdate(()=>{this.$el.textContent=m(),this.$el.setAttribute(`x`,o.x),this.$el.setAttribute(`y`,o.y),this.$el.setAttribute(`font-size`,`${i}em`),l.chain(u),u.chain(l),d.chain(d)});f.start(n),p.start(n),this.tweens=[l,u,d,f,p];function m(){let e=``.codePointAt(0)||65,t=[];for(let n=0;n<23;n++)t.push(String.fromCodePoint(e+n));return Math.random()<GameEnd.endState**2?``:t[Math.floor(Math.random()*t.length)]}}}},DN={name:`BlobSnowflakes`,components:{BlobSnowflake:D(EN,function(){var e=this,t=e._self._c;return t(`text`,{staticClass:`o-blob-snowflake`})},[],!1,null,`c87c7fad`,null,null).exports,BlobBackground:CN},data(){return{animateBackground:!1,count:0,initialized:!1,bounds:{x:0,y:0}}},mounted(){this.updateSize(),window.addEventListener(`resize`,this.updateSize),this.initialized=!0},destroyed(){window.removeEventListener(`resize`,this.updateSize)},methods:{update(){this.animateBackground=player.options.animations.background,this.count=player.options.animations.blobSnowflakes},updateSize(){this.bounds.x=document.documentElement.clientWidth,this.bounds.y=document.documentElement.clientHeight}}},ON=D(DN,function(){var e=this,t=e._self._c;return e.initialized?t(`div`,[e.animateBackground?t(`svg`,{staticClass:`c-blob-snowflake-container`},e._l(e.count,function(n){return t(`BlobSnowflake`,{key:n,attrs:{bounds:e.bounds}})}),1):t(`svg`,{staticClass:`c-blob-background-container`},e._l(e.count,function(n){return t(`BlobBackground`,{key:n,attrs:{bounds:e.bounds}})}),1)]):e._e()},[],!1,null,`1c771da6`,null,null).exports,kN=e(wN()),AN={name:`TachyonParticle`,props:{bounds:{type:Object,required:!0},isBlob:{type:Boolean,required:!0}},data(){return{blob:``}},mounted(){this.blob=``[Math.floor(Math.random()*25)],this.fly()},beforeDestroy(){kN.default.remove(this.tween)},methods:{fly(){let e=this.bounds,t={x:Math.random()*e.x,y:Math.random()*e.y},n=d(),r=this.isBlob?.5:0,i=1-r,a=1.5-r,o=i+Math.random()*(a-i),s=f(t,n,{x:0,y:0},e),c={x:t.x+n.x*s,y:t.y+n.y*s},l=Math.max(s/o,1),u=t;this.tween=new kN.default.Tween(u).to(c,l).onUpdate(()=>{this.$el.setAttribute(this.isBlob?`x`:`cx`,u.x),this.$el.setAttribute(this.isBlob?`y`:`cy`,u.y)}).easing(kN.default.Easing.Linear.None).onComplete(this.fly.bind(this)).start(tweenTime);function d(){let e=Math.random()*2*Math.PI;return{x:Math.cos(e),y:Math.sin(e)}}function f(e,t,n,r){let i={x:1/t.x,y:1/t.y},a=(n.x-e.x)*i.x,o=(r.x-e.x)*i.x,s=(n.y-e.y)*i.y,c=(r.y-e.y)*i.y;return Math.min(Math.max(a,o),Math.max(s,c))}}}},jN={name:`TachyonParticles`,components:{TachyonParticle:D(AN,function(){var e=this,t=e._self._c;return e.isBlob?t(`text`,{staticClass:`o-tachyon-particle`},[e._v(` `+e._s(e.blob)+` `)]):t(`circle`,{staticClass:`o-tachyon-particle`,attrs:{r:`2`}})},[],!1,null,`73346c87`,null,null).exports},data(){return{count:0,initialized:!1,bounds:{x:0,y:0},isBlob:!1}},mounted(){this.$nextTick(this.updateSize),window.addEventListener(`resize`,this.updateSize),this.initialized=!0},destroyed(){window.removeEventListener(`resize`,this.updateSize)},methods:{update(){this.count=Currency.tachyonParticles.value.gte(1)?Decimal.clampMin(Decimal.floor(Decimal.log10(Currency.tachyonParticles.value.max(10).log10()).mul(20)),1):0,this.isBlob=Theme.currentName()===`S11`},updateSize(){this.bounds.x=this.$el.clientWidth,this.bounds.y=this.$el.clientHeight}}},MN=D(jN,function(){var e=this,t=e._self._c;return e.initialized?t(`svg`,{staticClass:`c-tachyon-particle-container`},e._l(e.count,function(n){return t(`TachyonParticle`,{key:n,attrs:{bounds:e.bounds,"is-blob":e.isBlob}})}),1):e._e()},[],!1,null,`468449df`,null,null).exports,NN=D({name:`BackgroundAnimations`,components:{BlobSnowflakes:ON,TachyonParticles:MN},data(){return{blob:!1,animateTachyons:!1}},methods:{update(){this.blob=Theme.currentName()===`S11`,this.animateTachyons=player.options.animations.tachyonParticles&&Tabs.current[this.$viewModel.subtab].name===`Time Dilation`}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-background-animations`,attrs:{id:`ui-background-animations`}},[e.blob?t(`BlobSnowflakes`):e._e(),e.animateTachyons?t(`TachyonParticles`):e._e()],1)},[],!1,null,`f1db8bf3`,null,null).exports,PN=D({name:`BigCrunchButton`,data(){return{isModern:!1,smallCrunch:!1,shouldDisplay:!1}},methods:{update(){this.shouldDisplay=!player.break&&Player.canCrunch,this.shouldDisplay&&(this.isModern=player.options.newUI,this.smallCrunch=Time.bestInfinityRealTime.totalMinutes.lte(1))},handleClick(){PlayerProgress.infinityUnlocked()?bigCrunchResetRequest():Modal.bigCrunch.show()}}},function(){var e=this,t=e._self._c;return e.shouldDisplay?t(`span`,[e.isModern?t(`div`,[e.smallCrunch?e._e():t(`h3`,{staticClass:`l-spacing`},[e._v(` The world has collapsed due to excess antimatter. `)]),t(`button`,{class:{"btn-big-crunch":!0,"btn-big-crunch--small":e.smallCrunch},on:{click:e.handleClick}},[e._v(` Big Crunch `)])]):t(`div`,[t(`button`,{class:{"o-tab-btn":!0,"o-big-crunch-btn":!0,"l-old-ui__big-crunch-btn":!0,"l-old-ui__big-crunch-btn--overlay":e.smallCrunch},on:{click:e.handleClick}},[e._v(` Big Crunch `)]),e.smallCrunch?e._e():t(`div`,{staticClass:`o-emptiness`},[e._v(` The world has collapsed due to excess of antimatter. `)])])]):e._e()},[],!1,null,`18459e9c`,null,null).exports,FN={name:`HeaderBlackHoleStatusText`,props:{blackHole:{type:Object,required:!0}},data(){return{isUnlocked:!1,state:``}},computed:{id(){return this.blackHole.id}},methods:{update(){this.isUnlocked=this.blackHole.isUnlocked,this.state=this.blackHole.displayState}}},IN=D(FN,function(){var e=this,t=e._self._c;return e.isUnlocked?t(`span`,[e._v(` 🌀`+e._s(e.id)+`:`),t(`span`,{domProps:{innerHTML:e._s(e.state)}})]):e._e()},[],!1,null,`5191bbfb`,null,null).exports,LN=D({name:`HeaderBlackHole`,components:{PrimaryButton:L,PrimaryToggleButton:R,HeaderBlackHoleStatusText:IN},data(){return{canModifyBlackHoles:!1,displaySingle:!1,singleState:``,pauseText:``,canCharge:!1,isCharging:!1,storedTime:new Decimal,canAutoRelease:!1,isAutoReleasing:!1}},computed:{blackHoles:()=>BlackHoles.list,id(){return this.blackHole.id},dischargeText(){return`Discharge: ${timeDisplayShort(this.storedTime)}`},hasLongText(){return this.dischargeText.length>15}},watch:{isAutoReleasing(e){player.celestials.enslaved.isAutoReleasing=e}},methods:{update(){this.canModifyBlackHoles=BlackHoles.areUnlocked&&!Laitela.isRunning,this.displaySingle=BlackHoles.arePermanent,this.displaySingle&&(this.singleState=BlackHole(1).displayState),this.pauseText=this.pauseButtonText(),this.canCharge=Enslaved.isUnlocked,this.isCharging=Enslaved.isStoringGameTime,this.storedTime.copyFrom(player.celestials.enslaved.stored),this.canAutoRelease=Ra.unlocks.autoPulseTime.canBeApplied,this.isAutoReleasing=player.celestials.enslaved.isAutoReleasing},pauseButtonText(){if(BlackHoles.arePaused&&player.blackHoleNegative.lt(1))return`Uninvert BH`;if(BlackHoles.arePaused)return`Unpause BH`;let e=BlackHoles.unpauseAccelerationFactor;return e.lt(1)?`${formatPercents(new Decimal(e),1)} speed`:player.blackHoleNegative.lt(1)?`Invert BH`:`Pause BH`},timeDisplayShort(e){return timeDisplayShort(e)},chargingClassObject(){return{"o-primary-btn--buy-max c-primary-btn--black-hole-header":!0,"o-bh-charge-disabled":this.isAutoReleasing}}}},function(){var e=this,t=e._self._c;return e.canModifyBlackHoles?t(`span`,{staticClass:`c-black-hole-header`},[t(`PrimaryButton`,{staticClass:`o-primary-btn--buy-max c-primary-btn--black-hole-header`,attrs:{onclick:`BlackHoles.togglePause()`}},[e._v(` `+e._s(e.pauseText)+` `)]),e.canCharge?t(`span`,[t(`PrimaryButton`,{class:e.chargingClassObject(),attrs:{onclick:`Enslaved.toggleStoreBlackHole()`}},[e.isCharging?t(`span`,[e._v(` Stop Charging `)]):t(`span`,[e._v(` Charge `)])])],1):e._e(),e.displaySingle?t(`span`,{staticClass:`c-black-hole-status-text`,domProps:{innerHTML:e._s(`🌀:`+e.singleState)}}):t(`span`,e._l(e.blackHoles,function(e,n){return t(`HeaderBlackHoleStatusText`,{key:`state`+n,attrs:{"black-hole":e}})}),1),e.canCharge?t(`span`,[t(`PrimaryButton`,{staticClass:`o-discharge-btn c-primary-btn--black-hole-header`,class:{"o-small-discharge-text":e.hasLongText},attrs:{onclick:`Enslaved.useStoredTime(false)`}},[e._v(` `+e._s(e.dischargeText)+` `)])],1):e._e(),e.canAutoRelease?t(`span`,[t(`PrimaryToggleButton`,{staticClass:`o-primary-btn--buy-max c-primary-btn--black-hole-header`,attrs:{label:`Pulse:`},model:{value:e.isAutoReleasing,callback:function(t){e.isAutoReleasing=t},expression:`isAutoReleasing`}})],1):e._e()],1):e._e()},[],!1,null,`497f6349`,null,null).exports,RN=D({name:`FailableEcText`,data(){return{currentResource:new Decimal(0),maximumResource:new Decimal(0),currentEternityChallengeId:0}},computed:{textStyle(){if(this.maximumResource.eq(0))return{};let e=this.currentResource.div(this.maximumResource).toNumber(),t=Theme.current().isDark()&&Theme.current().name!==`S6`,n=t?2:1.5;return{color:`rgb(${[Math.round(Math.min(n*e,1)*255),Math.round(Math.min(n*(1-e),1)*255*(t?1:.7)),0].join(`,`)})`}},text(){return this.currentEternityChallengeId===4?`${formatInt(this.currentResource)} / ${formatInt(this.maximumResource)} Infinities used`:`${TimeSpan.fromSeconds(this.currentResource).toString()} /
        ${TimeSpan.fromSeconds(this.maximumResource).toString()} time spent`}},methods:{update(){EternityChallenge.current&&[4,12].includes(EternityChallenge.current.id)&&(this.currentEternityChallengeId=EternityChallenge.current.id,this.currentEternityChallengeId===4?this.currentResource.copyFrom(Currency.infinities):this.currentResource=new Decimal(Time.thisEternity.totalSeconds),this.maximumResource=new Decimal(EternityChallenge.current.config.restriction(EternityChallenge.current.completions)))}}},function(){var e=this,t=e._self._c;return t(`span`,[e._v(` - `),t(`span`,{style:e.textStyle},[e._v(e._s(e.text))])])},[],!1,null,`018dc2e8`,null,null).exports,zN=r({name:`HeaderChallengeDisplay`,components:{FailableEcText:RN,PrimaryButton:L},data(){return{activityTokens:[],infinityUnlocked:!1,showExit:!1,exitText:``,resetCelestial:!1,inPelle:!1}},computed:{parts(){function e(e,t,n){return{name:()=>`${t} Reality`,isActive:e=>e,activityToken:()=>e.isRunning,tabName:()=>n}}return[e(Teresa,`Teresa's`,`teresa`),e(Effarig,`Effarig's`,`effarig`),e(Enslaved,`The Nameless Ones'`,`enslaved`),e(V,`V's`,`v`),e(Ra,`Ra's`,`ra`),e(Laitela,`Lai'tela's`,`laitela`),{name:()=>`Time Dilation`,isActive:e=>e,activityToken:()=>player.dilation.active},{name:e=>`Quantum Challenge ${e}`,isActive:e=>e>0,activityToken:()=>player.challenge.quantum.current},{name:e=>`Eternity Challenge ${e}`,isActive:e=>e>0,activityToken:()=>player.challenge.eternity.current},{name:e=>`Infinity Challenge ${e}`,isActive:e=>e>0,activityToken:()=>player.challenge.infinity.current},{name:e=>`${NormalChallenge(e).config.name} Challenge`,isActive:e=>e>0,activityToken:()=>player.challenge.normal.current}]},activeChallengeNames(){let e=[];for(let t=0;t<this.activityTokens.length;t++){let n=this.activityTokens[t],r=this.parts[t];if(r.isActive(n))if(r.name(n).includes(`Eternity Challenge`)){let t=player.challenge.eternity.current,i=EternityChallenge(t).completions+1,a=``;a=Enslaved.isRunning&&t===1?`(${formatInt(i)}/???)`:i===6?`(already completed)`:`(${formatInt(i)}/${formatInt(5)})`,e.push(`${r.name(n)} ${a}`)}else e.push(r.name(n))}return e},isVisible(){return this.infinityUnlocked||this.activeChallengeNames.length>0},isInFailableEC(){return this.activeChallengeNames.some(e=>e.match(/Eternity Challenge (4|12)/gu))},challengeDisplay(){return this.inPelle&&this.activeChallengeNames.length>0?`${this.activeChallengeNames.join(` + `)} in a Doomed Reality. Good luck.`:this.inPelle?`a Doomed Reality. Good luck.`:this.activeChallengeNames.length===0?`the Antimatter Universe (no active challenges)`:this.activeChallengeNames.join(` + `)}},methods:{update(){this.infinityUnlocked=PlayerProgress.infinityUnlocked(),this.activityTokens=this.parts.map(e=>e.activityToken()),this.showExit=this.inPelle&&player.dilation.active?this.activeChallengeNames.length>1:this.activeChallengeNames.length>0,this.exitText=this.exitDisplay(),this.resetCelestial=player.options.retryCelestial,this.inPelle=Pelle.isDoomed},exitButtonClicked(){let e,t,n=Player.anyChallenge instanceof EternityChallengeState;if(player.dilation.active&&(!Player.isInAnyChallenge||n)){player.options.confirmations.dilation?Modal.exitDilation.show():startDilatedEternityRequest();return}Player.isInAnyChallenge?(e={chall:this.activeChallengeNames[this.activeChallengeNames.length-1].replace(/\W+\(.*\)/u,``),normal:n?`Eternity`:`Infinity`},t=()=>{let e=Player.anyChallenge;Player.anyChallenge.exit(!1),player.options.retryChallenge&&e.requestStart()}):(e={chall:this.activeChallengeNames[0],normal:`Reality`},t=()=>beginProcessReality(getRealityProps(!0))),player.options.confirmations.exitChallenge?Modal.exitChallenge.show({challengeName:e.chall,normalName:e.normal,hasHigherLayers:this.inPelle||this.activeChallengeNames.length>1,exitFn:t}):t()},textClicked(){if(this.activeChallengeNames.length===0)return;let e=``,t=``;for(let n=this.activityTokens.length-1;n>=0;n--){let r=this.activityTokens[n],i=this.parts[n];if(i.isActive(r)){e=i.name(r),t=i.tabName?.();break}}e.match(` Challenge$`)?Tab.challenges.normal.show(!0):e.match(`Infinity Challenge`)?Tab.challenges.infinity.show(!0):e.match(`Eternity Challenge`)?Tab.challenges.eternity.show(!0):player.dilation.active?Tab.eternity.dilation.show(!0):Tab.celestials[t].show(!0)},exitDisplay(){return Player.isInAnyChallenge?player.options.retryChallenge?`Retry Challenge`:`Exit Challenge`:player.dilation.active?`Exit Dilation`:this.resetCelestial?`Restart Reality`:`Exit Reality`},textClassObject(){return{"l-challenge-display":!0,"l-challenge-display--clickable":this.activeChallengeNames.length>0}}}}),BN=D(zN,function(){var e=this,t=e._self._c;return e._self._setupProxy,e.isVisible?t(`div`,{staticClass:`l-game-header__challenge-text`},[t(`span`,{class:e.textClassObject(),on:{click:e.textClicked}},[e._v(` You are currently in `+e._s(e.challengeDisplay)+` `)]),e.isInFailableEC?t(`FailableEcText`):e._e(),t(`span`,{staticClass:`l-padding-line`}),e.showExit?t(`PrimaryButton`,{on:{click:e.exitButtonClicked}},[e._v(` `+e._s(e.exitText)+` `)]):e._e()],1):e._e()},[],!1,null,`ce23e373`,null,null).exports,VN=D({name:`HeaderChallengeEffects`,data(){return{isInMatterChallenge:!1,matter:new Decimal(0),isChallengePowerVisible:!1,challengePower:``,isInEffarig:!1,effarigMultNerfText:``,effarigTickNerfText:``,isInLaitela:!1,laitelaTimer:0,laitelaEntropy:``,waitingforHint:!1,enslavedTimer:``}},computed:{enslavedText(){return`${Enslaved.displayName} are helping you look for cracks in their Reality -
        they can give you some advice in ${this.enslavedTimer}`}},methods:{update(){this.isInMatterChallenge=Player.isInMatterChallenge,this.isInMatterChallenge&&this.matter.copyFrom(Currency.matter),this.updateChallengePower(),this.isInEffarig=Effarig.isRunning,this.isInEffarig&&(this.effarigMultNerfText=`${formatPow(Effarig.nerfFactor(Currency.infinityPower.value).add(1).div(4),0,5)}`,this.effarigTickNerfText=`${formatPow(Effarig.nerfFactor(Currency.timeShards.value).add(7).div(10),0,5)}`),this.isInLaitela=Laitela.isRunning,this.isInLaitela&&(player.celestials.laitela.entropy.gt(0)?(this.laitelaEntropy=`${formatPercents(player.celestials.laitela.entropy,2,2)}`,this.laitelaTimer=Time.thisRealityRealTime.toStringShort()):(this.laitelaEntropy=`${formatPercents(1,2,2)}`,this.laitelaTimer=TimeSpan.fromSeconds(new Decimal(player.celestials.laitela.thisCompletion)).toStringShort())),this.waitingforHint=Enslaved.canTickHintTimer;let e=5*3600*1e3-player.celestials.enslaved.hintUnlockProgress;this.enslavedTimer=TimeSpan.fromMilliseconds(new Decimal(e/(Enslaved.isRunning?1:.4))).toStringShort()},updateChallengePower(){let e=NormalChallenge(2).isRunning,t=NormalChallenge(3).isRunning,n=InfinityChallenge(6).isRunning,r=InfinityChallenge(8).isRunning,i=e||t||n||r;if(this.isChallengePowerVisible=i,i){let i=[];e&&i.push(`Production: ${formatPercents(player.chall2Pow,2,2)}`),t&&i.push(`First dimension: ${formatX(player.chall3Pow,3,4)}`),n&&i.push(`Matter: Antimatter Dimensions /
          ${format(new Decimal(1).timesEffectOf(InfinityChallenge(6)),2,2)}`),r&&i.push(`Production: /
          ${format(new Decimal(1).timesEffectOf(InfinityChallenge(8)).reciprocal(),2,2)}`),this.challengePower=i.join(`, `)}}}},function(){var e=this,t=e._self._c;return t(`div`,[e.waitingforHint?t(`div`,[e._v(` `+e._s(e.enslavedText)+` `)]):e._e(),e.isInEffarig?t(`div`,[e._v(` Game speed and multipliers are Dilated `+e._s(e.effarigMultNerfText)+` `),t(`br`),e._v(` Tickspeed is Dilated `+e._s(e.effarigTickNerfText)+` `)]):e._e(),e.isInLaitela?t(`div`,[e._v(` Entropy: `+e._s(e.laitelaEntropy)+` (`+e._s(e.laitelaTimer)+`) `)]):e._e(),e.isInMatterChallenge?t(`div`,[e._v(` There is `+e._s(e.format(e.matter,2,1))+` matter. `)]):e._e(),e.isChallengePowerVisible?t(`div`,[e._v(` `+e._s(e.challengePower)+` `)]):e._e()])},[],!1,null,`2582f2a9`,null,null).exports,HN={name:`ArmageddonButton`,props:{isHeader:{type:Boolean,required:!1,default:!1}},data(){return{remnantsGain:new Decimal(0),realityShardGain:new Decimal(0),nextRealityShardGain:new Decimal(0),canArmageddon:!1}},computed:{remnants(){return format(this.remnantsGain,2,this.remnantsGain.gt(1)?0:2)},buttonClassObject(){return{"c-armageddon-button":!0,"l-armageddon-button":!this.isHeader,"l-reality-button":this.isHeader,"l-armageddon-button--header":this.isHeader,"c-armageddon-button--unavailable":!this.canArmageddon}}},methods:{update(){this.remnantsGain.copyFrom(Pelle.remnantsGain),this.realityShardGain.copyFrom(Pelle.realityShardGainPerSecond),this.nextRealityShardGain.copyFrom(Pelle.nextRealityShardGain),this.canArmageddon=Pelle.canArmageddon},manualArmageddon(){this.canArmageddon&&(player.options.confirmations.armageddon?Modal.armageddon.show():Pelle.armageddon(!0))}}},UN=D(HN,function(){var e=this,t=e._self._c;return t(`button`,{class:e.buttonClassObject,on:{click:e.manualArmageddon}},[e.isHeader?t(`span`,[e._v(`You cannot escape a Doomed Reality!`),t(`br`)]):e._e(),t(`span`,{staticClass:`c-remnant-gain-display`},[e._v(` Armageddon for `),t(`span`,{staticClass:`c-remnant-gain`},[e._v(e._s(e.remnants))]),e._v(` Remnants `)]),t(`br`),e._v(` Reality Shards `),t(`span`,{staticClass:`c-reality-shard-gain`},[e._v(e._s(e.format(e.realityShardGain,2,2)))]),e._v(`/s ➜ `),t(`span`,{staticClass:`c-reality-shard-gain`},[e._v(e._s(e.format(e.nextRealityShardGain,2,2)))]),e._v(`/s `)])},[],!1,null,`8cacde25`,null,null).exports,WN=D({name:`RealityCurrencyHeader`,data(){return{isDoomed:!1,currencyValue:new Decimal,currencyName:``}},methods:{update(){if(this.isDoomed=Pelle.isDoomed,this.isDoomed){let e=Currency.realityShards.value;this.currencyValue=format(e,2,2),this.currencyName=pluralize(`Reality Shard`,e)}else{let e=Currency.realityMachines.value,t=Currency.imaginaryMachines.value;this.currencyValue=formatMachines(e,t),this.currencyName=pluralize(`Reality Machine`,e)}},resourceClass(){return{"c-reality-tab__reality-machines":!0,"c-shard-color":this.isDoomed}}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`c-reality-currency`},[e._v(` You have `),t(`b`,{class:e.resourceClass()},[e._v(` `+e._s(e.currencyValue)+` `)]),e._v(` `+e._s(e.currencyName)+`. `)])},[],!1,null,`c5de1255`,null,null).exports,GN=D({name:`GameSpeedDisplay`,props:{},data(){return{baseSpeed:new Decimal,pulsedSpeed:new Decimal,hasSeenAlteredSpeed:!1,isStopped:!1,isEC12:!1,isPulsing:!1}},computed:{baseSpeedText(){if(this.isStopped)return`Stopped (storing real time)`;let e=this.formatNumber(this.baseSpeed);return this.isEC12?`${e} (fixed)`:`${e}`},pulseSpeedText(){return`${this.formatNumber(this.pulsedSpeed)}`},baseText(){return this.hasSeenAlteredSpeed?this.baseSpeed.eq(1)?`The game is running at normal speed.`:`Game speed is altered: ${this.baseSpeedText}`:null}},methods:{update(){this.baseSpeed=getGameSpeedupFactor(),this.pulsedSpeed=getGameSpeedupForDisplay(),this.hasSeenAlteredSpeed=PlayerProgress.seenAlteredSpeed(),this.isStopped=Enslaved.isStoringRealTime,this.isEC12=EternityChallenge(12).isRunning,this.isPulsing=this.baseSpeed.neq(this.pulsedSpeed)&&Enslaved.canRelease(!0)},formatNumber(e){return e.gte(.001)&&e.lt(1e4)&&e.neq(1)?format(e,3,3):e.lt(.001)?`${formatInt(1)} / ${format(Decimal.div(1,e),2)}`:`${format(e,2)}`}}},function(){var e=this,t=e._self._c;return t(`span`,{staticClass:`c-gamespeed`},[t(`span`,[e._v(` `+e._s(e.baseText)+` `)]),e.isPulsing?t(`span`,[e._v(`(`),t(`i`,{staticClass:`fas fa-expand-arrows-alt u-fa-padding`}),e._v(` `+e._s(e.pulseSpeedText)+`)`)]):e._e()])},[],!1,null,`3acf6c3f`,null,null).exports,KN=D({name:`HeaderTickspeedInfo`,components:{GameSpeedDisplay:GN},data(){return{mult:new Decimal(0),tickspeed:new Decimal(0),galaxyCount:new Decimal,purchasedTickspeed:new Decimal(0),freeTickspeed:new Decimal}},computed:{tickspeedDisplay(){return`Total Tickspeed: ${format(this.tickspeed,2,3)} / sec`},perUpgrade(){return InfinityChallenge(3).isRunning?`Tickspeed upgrades give
        ${formatX(this.galaxyCount.times(.005).add(1.05))} to all ADs`:`ADs produce ${formatX(this.mult.reciprocal(),2,3)} faster per Tickspeed upgrade`}},methods:{update(){this.mult.copyFrom(Tickspeed.multiplier),this.tickspeed.copyFrom(Tickspeed.perSecond),this.galaxyCount.copyFrom(player.galaxies),this.purchasedTickspeed.copyFrom(player.totalTickBought),this.freeTickspeed.copyFrom(FreeTickspeed.amount)}}},function(){var e=this,t=e._self._c;return t(`div`,[t(`br`),e._v(` `+e._s(e.perUpgrade)+` `),t(`br`),e._v(` `+e._s(e.tickspeedDisplay)+` `),t(`br`),t(`GameSpeedDisplay`)],1)},[],!1,null,`16c81911`,null,null).exports,qN=D({name:`RealityButton`,data(){return{canReality:!1,showSpecialEffect:!1,hasRealityStudy:!1,machinesGained:new Decimal,projectedRM:new Decimal,newIMCap:new Decimal,realityTime:new Decimal,glyphLevel:new Decimal,nextGlyphPercent:0,nextMachineEP:new Decimal,shardsGained:new Decimal,currentShardsRate:new Decimal,bestShardRate:new Decimal,bestShardRateVal:new Decimal,ppGained:new Decimal,celestialRunText:[``,``,``,``,``]}},computed:{formatMachinesGained(){return this.machinesGained.gt(0)?`Machines gained: ${format(this.machinesGained,2)}`:`No Machines gained`},formatMachineStats(){return!PlayerProgress.realityUnlocked()&&this.nextMachineEP.gt(`1e8000`)?`(Capped this Reality!)`:this.machinesGained.gt(0)&&this.machinesGained.lt(100)?`(Next at ${format(this.nextMachineEP,2)} EP)`:this.machinesGained.eq(0)&&this.newIMCap.eq(0)?`(Projected: ${format(this.projectedRM,2)} RM)`:this.newIMCap.neq(0)?`(iM Cap: ${formatMachines(0,this.newIMCap)})`:this.machinesGained.lt(Number.MAX_VALUE)?`(${format(this.machinesGained.divide(this.realityTime),2,2)} RM/min)`:``},formatGlyphLevel(){return this.glyphLevel.gte(1e4)?`Glyph level: ${formatInt(this.glyphLevel)}`:`Glyph level: ${formatInt(this.glyphLevel)} (${this.nextGlyphPercent} to next)`},showShardsRate(){return this.currentShardsRate},shardsGainedText(){return quantify(`Relic Shard`,this.shardsGained,2)},classObject(){return{"c-reality-button--unlocked":this.canReality,"c-reality-button--locked":!this.canReality,"c-reality-button--special":this.showSpecialEffect}}},methods:{percentToNextGlyphLevelText(){let e=getGlyphLevelInputs().actualLevel;e.isFinite()||(e=new Decimal);let t=this.glyphLevel.gt(1e3)?0:1;return`${formatPercents(e.sub(e.floor()).clampMax(.999),t)}`},update(){if(this.hasRealityStudy=TimeStudy.reality.isBought,this.canReality=isRealityAvailable(),this.showSpecialEffect=this.hasSpecialReward(),!this.canReality){this.shardsGained=new Decimal;return}function e(e){let t=Decimal.divide(e,MachineHandler.realityMachineMultiplier);if(t.lte(1))return Decimal.pow10(4e3);if(t.lte(10))return Decimal.pow10(t.add(26).mul(4e3).div(27));let n=Decimal.pow10(t.max(1).log10().div(3).add(1).mul(4e3));return!PlayerProgress.realityUnlocked()&&n.gte(`1e6000`)&&(n=n.div(`1e6000`).pow(4).times(`1e6000`)),n}let t=simulatedRealityCount(!1).add(1);this.projectedRM=MachineHandler.gainedRealityMachines.times(t).clampMax(MachineHandler.hardcapRM),this.newIMCap=MachineHandler.projectedIMCap,this.machinesGained=this.projectedRM.clampMax(MachineHandler.distanceToRMCap),this.realityTime.copyFrom(Time.thisRealityRealTime.totalMinutes),this.glyphLevel.copyFrom(gainedGlyphLevel().actualLevel),this.nextGlyphPercent=this.percentToNextGlyphLevelText(),this.nextMachineEP.copyFrom(e(this.machinesGained.plus(1))),this.ppGained.copyFrom(t),this.shardsGained.copyFrom(Effarig.shardsGained.mul(t)),this.currentShardsRate.copyFrom(this.shardsGained.div(Time.thisRealityRealTime.totalMinutes)),this.bestShardRate.copyFrom(t.mul(player.records.thisReality.bestRSmin)),this.bestShardRateVal.copyFrom(t.mul(player.records.thisReality.bestRSminVal));let n=this.formatScalingMultiplierText(`Glyph Sacrifice`,Teresa.runRewardMultiplier,Decimal.max(Teresa.runRewardMultiplier,Teresa.rewardMultiplier(Currency.antimatter.value))),r=this.formatThresholdText(Teresa.rewardMultiplier(Currency.antimatter.value).gt(Teresa.runRewardMultiplier),player.celestials.teresa.bestRunAM,`antimatter`);this.celestialRunText=[[Teresa.isRunning,n,r]]},handleClick(){this.canReality&&requestManualReality()},formatScalingMultiplierText(e,t,n){return`${e} ${formatX(t,2,2)} ➜ ${formatX(n,2,2)}`},formatThresholdText(e,t,n){return e?``:`(${format(t,2,2)} ${n} to improve)`},hasSpecialReward(){return Teresa.isRunning&&Teresa.rewardMultiplier(Currency.antimatter.value).gt(Teresa.runRewardMultiplier)?!0:Currency.eternityPoints.value.max(1).log10().gte(4e3)&&(Effarig.isRunning&&!EffarigUnlock.reality.isUnlocked||Enslaved.isRunning&&!Enslaved.isCompleted)}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-reality-button`},[t(`button`,{staticClass:`c-reality-button infotooltip`,class:e.classObject,on:{click:e.handleClick}},[t(`div`,{staticClass:`l-reality-button__contents`},[e.canReality?[t(`div`,{staticClass:`c-reality-button__header`},[e._v(` Make a new Reality `)]),t(`div`,[e._v(e._s(e.formatMachinesGained)+` `+e._s(e.formatMachineStats))]),t(`div`,[e._v(e._s(e.formatGlyphLevel))])]:e.hasRealityStudy?[t(`div`,[e._v(`Get `+e._s(e.format(`1e4000`))+` Eternity Points to unlock a new Reality`)])]:[t(`div`,[e._v(`Purchase the study in the Eternity tab to unlock a new Reality`)])],e.canReality?t(`div`,{staticClass:`infotooltiptext`},[t(`div`,[e._v(`Other resources gained:`)]),t(`div`,[e._v(e._s(e.quantifyInt(`Perk Point`,e.ppGained)))]),e.shardsGained.neq(0)?t(`div`,[e._v(` `+e._s(e.shardsGainedText)+` (`+e._s(e.format(e.currentShardsRate,2))+`/min) `),t(`br`),e._v(` Peak: `+e._s(e.format(e.bestShardRate,2))+`/min at `+e._s(e.format(e.bestShardRateVal,2))+` RS `)]):e._e(),e._l(e.celestialRunText,function(n,r){return t(`div`,{key:r},[n[0]?t(`span`,[e._v(` `+e._s(n[1])+` `),t(`br`),e._v(` `+e._s(n[2])+` `)]):e._e()])})],2):e._e()],2)])])},[],!1,null,`fa5f9cef`,null,null).exports,JN=r({name:`HeaderCenterContainer`,components:{HeaderTickspeedInfo:KN,RealityCurrencyHeader:WN,RealityButton:qN,ArmageddonButton:UN},data(){return{shouldDisplay:!0,isModern:!1,hasRealityButton:!1,isDoomed:!1,antimatter:new Decimal(0),antimatterPerSec:new Decimal(0)}},methods:{update(){this.shouldDisplay=player.break||!Player.canCrunch,this.shouldDisplay&&(this.isModern=player.options.newUI,this.isDoomed=Pelle.isDoomed,this.antimatter.copyFrom(Currency.antimatter),this.hasRealityButton=isRealityAvailable(),this.hasRealityButton||this.antimatterPerSec.copyFrom(Currency.antimatter.productionPerSecond))}}}),YN=D(JN,function(){var e=this,t=e._self._c;return e._self._setupProxy,e.shouldDisplay?t(`div`,{staticClass:`c-prestige-button-container`},[t(`span`,[e._v(`You have `),t(`span`,{staticClass:`c-game-header__antimatter`},[e._v(e._s(e.format(e.antimatter,2)))]),e._v(` antimatter `+e._s(e.formatGain(e.antimatter,e.antimatterPerSec,2,2)))]),e.hasRealityButton?t(`div`,{staticClass:`c-reality-container`},[t(`RealityCurrencyHeader`),e.isDoomed?t(`ArmageddonButton`,{attrs:{"is-header":!0}}):t(`RealityButton`)],1):t(`div`,[e._v(` You are getting `+e._s(e.format(e.antimatterPerSec,2))+` antimatter per second. `),t(`br`),t(`HeaderTickspeedInfo`)],1)]):e._e()},[],!1,null,`084ecc75`,null,null).exports,XN={name:`EternityButton`,data(){return{isVisible:!1,type:ZN.FIRST_TIME,gainedEP:new Decimal(0),currentEP:new Decimal(0),currentEPRate:new Decimal(0),peakEPRateVal:new Decimal(0),peakEPRate:new Decimal(0),currentTachyons:new Decimal(0),gainedTachyons:new Decimal(0),challengeCompletions:0,gainedCompletions:0,fullyCompleted:!1,failedRestriction:void 0,hasMoreCompletions:!1,nextGoalAt:new Decimal(0),canEternity:!1,eternityGoal:new Decimal(0),hover:!1,headerTextColored:!0,creditsClosed:!1,showEPRate:!1,isDilation:!1}},computed:{buttonClassObject(){return{"o-eternity-button":!this.isDilation,"o-eternity-button--dilation":this.isDilation,"o-eternity-button--unavailable":!this.canEternity,"o-pelle-disabled-pointer":this.creditsClosed}},rateThreshold:()=>1e40,amountStyle(){if(!this.headerTextColored||this.currentEP.lt(this.rateThreshold))return{"transition-duration":`0s`};if(this.hover)return{color:`black`,"transition-duration":`0.2s`};let e=getComputedStyle(document.body).getPropertyValue(`--color-text`).split(`#`)[1],t=[[255,0,0],[Number.parseInt(e.slice(0,2),16),Number.parseInt(e.slice(2,4),16),Number.parseInt(e.slice(4),16)],[0,255,0]],n=this.gainedEP.max(1).log10().div(this.currentEP.max(1).log10()),r=e=>{if(n.lt(.9))return t[0][e];if(n.lt(1)){let r=n.sub(.9).mul(10);return Decimal.round(new Decimal(1).sub(r).mul(t[0][e]).add(r.mul(t[1][e])))}if(n.lt(1.1)){let r=n.sub(1).mul(10);return Decimal.round(new Decimal(1).sub(r).mul(t[1][e]).add(r.mul(t[2][e])))}return t[2][e]};return{color:`rgb(${[r(0),r(1),r(2)].join(`,`)})`,"transition-duration":`0.2s`}},tachyonAmountStyle(){if(!this.headerTextColored||this.hover)return{"transition-duration":`0s`};let e=this.currentTachyons.eq(0)?this.gainedTachyons.eq(0)?0:1/0:this.gainedTachyons.div(this.currentTachyons).toNumber();return{color:`rgb(${[Math.round(Math.clampMax(1/e,1)*255),Math.round(Math.clampMax(e,1)*255),Math.round(Math.clampMax(e,1/e)*255)].join(`,`)})`}}},methods:{update(){if(this.isVisible=Player.canEternity||EternityMilestone.autoUnlockID.isReached||InfinityDimension(8).isUnlocked,this.isDilation=player.dilation.active,!this.isVisible)return;if(this.canEternity=Player.canEternity,this.eternityGoal.copyFrom(Player.eternityGoal),this.headerTextColored=player.options.headerTextColored,!this.canEternity){this.type=ZN.CANNOT_ETERNITY;return}if(!PlayerProgress.eternityUnlocked()){this.type=ZN.FIRST_TIME;return}if(EternityChallenge.isRunning){if(!Achievement(152).isUnlocked){this.type=ZN.CHALLENGE;return}this.type=ZN.CHALLENGE_RUPG,this.updateChallengeWithRUPG();return}let e=gainedEternityPoints();if(this.currentEP.copyFrom(Currency.eternityPoints),this.gainedEP.copyFrom(e),this.isDilation){this.type=ZN.DILATION,this.currentTachyons.copyFrom(Currency.tachyonParticles),this.gainedTachyons.copyFrom(getTachyonGain(!0));return}this.type=ZN.NORMAL,this.currentEPRate.copyFrom(e.dividedBy(TimeSpan.fromMilliseconds(player.records.thisEternity.realTime).totalMinutes)),this.peakEPRateVal.copyFrom(player.records.thisEternity.bestEPminVal),this.peakEPRate.copyFrom(player.records.thisEternity.bestEPmin),this.showEPRate=this.peakEPRate.lte(this.rateThreshold),this.creditsClosed=GameEnd.creditsEverClosed},updateChallengeWithRUPG(){let e=EternityChallenge.current;if(this.fullyCompleted=e.isFullyCompleted,this.fullyCompleted)return;let t=e.gainedCompletionStatus;this.gainedCompletions=t.gainedCompletions,this.failedRestriction=t.failedRestriction,this.hasMoreCompletions=t.hasMoreCompletions,this.nextGoalAt.copyFrom(t.nextGoalAt)}}},ZN={CANNOT_ETERNITY:-1,FIRST_TIME:0,NORMAL:1,CHALLENGE:2,DILATION:3,NORMAL_EXPLORE_NEW_CONTENT:4,DILATION_EXPLORE_NEW_CONTENT:5,CHALLENGE_RUPG:6},QN=D(XN,function(){var e=this,t=e._self._c;return e.isVisible?t(`button`,{staticClass:`o-prestige-button`,class:e.buttonClassObject,attrs:{onclick:`eternityResetRequest()`},on:{mouseover:function(t){e.hover=!0},mouseleave:function(t){e.hover=!1}}},[e.type===-1?[e._v(` Reach `+e._s(e.format(e.eternityGoal,2,2))+` `),t(`br`),e._v(` Infinity Points `)]:e.type===0?[e._v(` Other times await... I need to become Eternal `)]:e.type===1?[e._v(` Eternity for `),t(`span`,{style:e.amountStyle},[e._v(e._s(e.format(e.gainedEP,2)))]),e.showEPRate?t(`span`,[e._v(` EP`)]):t(`span`,[e._v(` Eternity `+e._s(e.pluralize(`Point`,e.gainedEP)))]),t(`br`),e.showEPRate?[e._v(` Current: `+e._s(e.format(e.currentEPRate,2,2))+` EP/min `),t(`br`),e._v(` Peak: `+e._s(e.format(e.peakEPRate,2,2))+` EP/min `),t(`br`),e._v(` at `+e._s(e.format(e.peakEPRateVal,2,2))+` EP `)]:e._e()]:e.type===2||e.type===6&&!e.canEternity?[e._v(` Other challenges await... I need to become Eternal `)]:e.type===3?[e._v(` Eternity for `),t(`span`,{style:e.tachyonAmountStyle},[e._v(e._s(e.format(e.gainedTachyons,2,1)))]),e._v(` `+e._s(e.pluralize(`Tachyon Particle`,e.gainedTachyons))+` `)]:e.type===4||e.type===5?[e.type===4?[e._v(` Eternity for `),t(`span`,{style:e.amountStyle},[e._v(e._s(e.format(e.gainedEP,2,2)))]),e._v(` EP `)]:[e._v(` Eternity for `),t(`span`,{style:e.tachyonAmountStyle},[e._v(e._s(e.format(e.gainedTachyons,2,1)))]),e._v(` TP `)],t(`br`),e._v(` You should explore a bit and look at new content before clicking me! `)]:e.type===6?[e._v(` Other challenges await... `),e.fullyCompleted?[t(`br`),e._v(` (This challenge is already fully completed) `)]:[t(`br`),e._v(` `+e._s(e.quantifyInt(`completion`,e.gainedCompletions))+` on Eternity `),e.failedRestriction?[t(`br`),e._v(` `+e._s(e.failedRestriction)+` `)]:e.hasMoreCompletions?[t(`br`),e._v(` Next goal at `+e._s(e.format(e.nextGoalAt))+` IP `)]:e._e()]]:e._e()],2):e._e()},[],!1,null,`66f487bb`,null,null).exports,$N=D({name:`UnlockInfinityDimButton`,data(){return{isVisible:!1,canUnlock:!1,hasIPUnlock:!0,amRequirement:new Decimal(0),ipRequirement:0}},computed:{text(){let e=`a new ${this.hasIPUnlock?`type of Dimension`:`Infinity Dimension`}.`;if(this.canUnlock)return`Unlock ${e}`;let t=format(this.amRequirement),n=format(this.ipRequirement);return this.hasIPUnlock?`Reach ${n} Infinity Points and ${t} antimatter to unlock ${e}`:`Reach ${t} antimatter to unlock ${e}`},buttonClassObject(){return{"o-prestige-button":!0,"o-infinity-button":!0,"o-infinity-button--unavailable":!this.canUnlock}}},methods:{update(){if(this.isVisible=player.break&&!InfinityDimension(8).isUnlocked&&!Player.canEternity&&!EternityMilestone.autoUnlockID.isReached,!this.isVisible)return;let e=InfinityDimensions.next();this.canUnlock=e.canUnlock,this.hasIPUnlock=e.hasIPUnlock,this.amRequirement=e.amRequirement,this.ipRequirement=e.ipRequirement},tryUnlockNextInfinityDimension(){InfinityDimensions.unlockNext()}}},function(){var e=this,t=e._self._c;return e.isVisible?t(`button`,{class:e.buttonClassObject,on:{click:e.tryUnlockNextInfinityDimension}},[e._v(` `+e._s(e.text)+` `)]):e._e()},[],!1,null,`bfc34706`,null,null).exports,eP=r({name:`HeaderEternityContainer`,components:{EternityButton:QN,UnlockInfinityDimButton:$N},data(){return{showContainer:!1,showEP:!1,showNextEP:!1,eternityPoints:new Decimal(0),nextEP:new Decimal(0)}},methods:{update(){this.showContainer=player.break||PlayerProgress.eternityUnlocked(),this.showEP=PlayerProgress.eternityUnlocked(),this.eternityPoints.copyFrom(Currency.eternityPoints.value.floor()),this.showNextEP=Player.canEternity&&player.records.thisReality.maxEP.lt(100)&&gainedEternityPoints().lt(100),this.showNextEP&&this.nextEP.copyFrom(requiredIPForEP(gainedEternityPoints().floor().toNumber()+1))}}}),tP=D(eP,function(){var e=this,t=e._self._c;return e._self._setupProxy,e.showContainer?t(`div`,{staticClass:`c-prestige-button-container`},[e.showEP?t(`div`,{staticClass:`c-eternity-points`},[e._v(` You have `),t(`span`,{staticClass:`c-game-header__ep-amount`},[e._v(e._s(e.format(e.eternityPoints,2)))]),e._v(` `+e._s(e.pluralize(`Eternity Point`,e.eternityPoints))+`. `),e.showNextEP?t(`span`,[e._v(`(Next EP at `+e._s(e.format(e.nextEP,1))+` IP)`)]):e._e()]):e._e(),t(`UnlockInfinityDimButton`),t(`EternityButton`)],1):e._e()},[],!1,null,`9f3a3945`,null,null).exports,nP={name:`HeaderInfinityContainer`,components:{BigCrunchButton:D({name:`BigCrunchButton`,data(){return{isVisible:!1,gainedIP:new Decimal(0),currentIPRate:new Decimal(0),peakIPRate:new Decimal(0),peakIPRateVal:new Decimal(0),currentIP:new Decimal(0),tesseractAffordable:!1,canCrunch:!1,infinityGoal:new Decimal(0),inAntimatterChallenge:!1,hover:!1,headerTextColored:!0,creditsClosed:!1,showIPRate:!1}},computed:{buttonClassObject(){return{"o-infinity-button--unavailable":!this.canCrunch,"o-pelle-disabled-pointer":this.creditsClosed}},rateThreshold:()=>5e11,amountStyle(){if(!this.headerTextColored||this.currentIP.lt(this.rateThreshold))return{"transition-duration":`0s`};if(this.hover)return{color:`black`,"transition-duration":`0.2s`};let e=getComputedStyle(document.body).getPropertyValue(`--color-text`).split(`#`)[1],t=[[255,0,0],[Number.parseInt(e.slice(0,2),16),Number.parseInt(e.slice(2,4),16),Number.parseInt(e.slice(4),16)],[0,255,0]],n=this.gainedIP.max(1).log10().div(this.currentIP.max(1).log10()),r=e=>{if(n.lt(.9))return t[0][e];if(n.lt(1)){let r=n.sub(.9).mul(10);return Decimal.round(new Decimal(1).sub(r).mul(t[0][e]).add(r.mul(t[1][e])))}if(n.lt(1.1)){let r=n.sub(1).mul(10);return Decimal.round(new Decimal(1).sub(r).mul(t[1][e]).add(r.mul(t[2][e])))}return t[2][e]};return{color:`rgb(${[r(0),r(1),r(2)].join(`,`)})`,"transition-duration":`0.2s`}}},methods:{update(){if(this.isVisible=player.break,this.tesseractAffordable=Tesseracts.canBuyTesseract,!this.isVisible)return;this.canCrunch=Player.canCrunch,this.infinityGoal.copyFrom(Player.infinityGoal),this.inAntimatterChallenge=Player.isInAntimatterChallenge,this.headerTextColored=player.options.headerTextColored,this.creditsClosed=GameEnd.creditsEverClosed;let e=gainedInfinityPoints();this.currentIP.copyFrom(Currency.infinityPoints),this.gainedIP.copyFrom(e),this.currentIPRate.copyFrom(e.div(Decimal.max(5e-4,Time.thisInfinityRealTime.totalMinutes))),this.peakIPRate.copyFrom(player.records.thisInfinity.bestIPmin),this.peakIPRateVal.copyFrom(player.records.thisInfinity.bestIPminVal),this.showIPRate=this.peakIPRate.lte(this.rateThreshold)},switchToInfinity(){Tab.dimensions.infinity.show(!0)},crunch(){Player.canCrunch&&manualBigCrunchResetRequest()}}},function(){var e=this,t=e._self._c;return e.isVisible&&!e.tesseractAffordable?t(`button`,{staticClass:`o-prestige-button o-infinity-button`,class:e.buttonClassObject,on:{click:e.crunch,mouseover:function(t){e.hover=!0},mouseleave:function(t){e.hover=!1}}},[e.canCrunch?e.inAntimatterChallenge?[e._v(` Big Crunch to `),t(`br`),e._v(` complete the challenge `)]:[e.showIPRate?e._e():t(`div`),t(`b`,[e._v(` Big Crunch for `),t(`span`,{style:e.amountStyle},[e._v(e._s(e.format(e.gainedIP,2)))]),e.showIPRate?t(`span`,[e._v(` IP`)]):t(`span`,[e._v(` Infinity `+e._s(e.pluralize(`Point`,e.gainedIP)))])]),e.showIPRate?[t(`br`),e._v(` Current: `+e._s(e.format(e.currentIPRate,2))+` IP/min `),t(`br`),e._v(` Peak: `+e._s(e.format(e.peakIPRate,2))+` IP/min `),t(`br`),e._v(` at `+e._s(e.format(e.peakIPRateVal,2))+` IP `)]:t(`div`)]:[e._v(` Reach `+e._s(e.format(e.infinityGoal,2,2))+` `),t(`br`),e._v(` antimatter `)]],2):e.tesseractAffordable?t(`button`,{staticClass:`o-prestige-button c-game-header__tesseract-available`,class:{"o-pelle-disabled-pointer":e.creditsClosed},on:{click:e.switchToInfinity}},[t(`b`,[e._v(` You have enough Infinity Points to buy a Tesseract `)])]):e._e()},[],!1,null,`d6e8f202`,null,null).exports},data(){return{showContainer:!1,infinityPoints:new Decimal(0),isTesseractUnlocked:!1,tesseractCost:new Decimal(0),tesseractText:``}},methods:{update(){this.showContainer=player.break||PlayerProgress.infinityUnlocked(),this.infinityPoints.copyFrom(Currency.infinityPoints.value.floor()),this.isTesseractUnlocked=Enslaved.isCompleted,this.tesseractCost=Tesseracts.nextCost,this.tesseractText=this.tesseractProgress()},tesseractProgress(){let e=this.infinityPoints.add(1).log10().div(this.tesseractCost.max(1).log10());return e.gt(1)?`<b>(${formatPercents(1)})</b>`:`(${formatPercents(e,2,2)})`}}},rP=D(nP,function(){var e=this,t=e._self._c;return e.showContainer?t(`div`,{staticClass:`c-prestige-button-container`},[t(`div`,{staticClass:`c-infinity-points`},[e._v(` You have `),t(`span`,{staticClass:`c-game-header__ip-amount`},[e._v(e._s(e.format(e.infinityPoints,2)))]),e._v(` `+e._s(e.pluralize(`Infinity Point`,e.infinityPoints))+`. `),e.isTesseractUnlocked?t(`span`,{domProps:{innerHTML:e._s(e.tesseractText)}}):e._e()]),t(`BigCrunchButton`)],1):e._e()},[],!1,null,`a3acaf41`,null,null).exports,iP=r({name:`QuantumButton`,data(){return{isVisible:!1,type:aP.FIRST_TIME,gainedQK:new Decimal(0),currentQK:new Decimal(0),currentQKRate:new Decimal(0),peakQKRateVal:new Decimal(0),peakQKRate:new Decimal(0),currentSpaceShards:new Decimal(0),gainedSpaceShards:new Decimal(0),canReset:!1,quantumGoal:{am:new Decimal(0),ma:new Decimal(0)},hover:!1,headerTextColored:!0,creditsClosed:!1,showQKRate:!1,isBigRip:!1}},computed:{buttonClassObject(){return{"o-quantum-button":!this.isBigRip,"o-quantum-button--big-rip":this.isBigRip,"o-quantum-button--unavailable":!this.canReset,"o-pelle-disabled-pointer":this.creditsClosed}},rateThreshold:()=>1e33,amountStyle(){if(!this.headerTextColored||this.currentQK.lt(this.rateThreshold))return{"transition-duration":`0s`};if(this.hover)return{color:`black`,"transition-duration":`0.2s`};let e=getComputedStyle(document.body).getPropertyValue(`--color-text`).split(`#`)[1],t=[[255,0,0],[Number.parseInt(e.slice(0,2),16),Number.parseInt(e.slice(2,4),16),Number.parseInt(e.slice(4),16)],[0,255,0]],n=this.gainedQK.max(1).log10().div(this.currentQK.max(1).log10()),r=e=>{if(n.lt(.9))return t[0][e];if(n.lt(1)){let r=n.sub(.9).mul(10);return Decimal.round(new Decimal(1).sub(r).mul(t[0][e]).add(r.mul(t[1][e])))}if(n.lt(1.1)){let r=n.sub(1).mul(10);return Decimal.round(new Decimal(1).sub(r).mul(t[1][e]).add(r.mul(t[2][e])))}return t[2][e]};return{color:`rgb(${[r(0),r(1),r(2)].join(`,`)})`,"transition-duration":`0.2s`}},tachyonAmountStyle(){if(!this.headerTextColored||this.hover)return{"transition-duration":`0s`};let e=this.currentSpaceShards.eq(0)?this.gainedSpaceShards.eq(0)?0:1/0:this.gainedSpaceShards.div(this.currentSpaceShards).toNumber();return{color:`rgb(${[Math.round(Math.clampMax(1/e,1)*255),Math.round(Math.clampMax(e,1)*255),Math.round(Math.clampMax(e,1/e)*255)].join(`,`)})`}}},methods:{update(){if(this.isVisible=Player.canStudyQuantum||PlayerProgress.quantumUnlocked(),this.isBigRip=player.quantum.bigRip.active,!this.isVisible)return;if(this.canStudyQuantum=Player.canStudyQuantum,this.quantumGoal.am.copyFrom(Player.quantumGoal.am),this.quantumGoal.ma.copyFrom(Player.quantumGoal.ma),this.headerTextColored=player.options.headerTextColored,this.canReset=canPerformQuantumReset()&&this.canStudyQuantum,!this.canReset){this.type=aP.CANNOT_RESET;return}if(!PlayerProgress.quantumUnlocked()){this.type=aP.FIRST_TIME;return}if(QuantumChallenge.isRunning){this.type=aP.CHALLENGE;return}let e=Quarks.gain;if(this.currentQK.copyFrom(Currency.quarks),this.gainedQK.copyFrom(e),this.isBigRip){this.type=aP.BIG_RIP,this.currentSpaceShards.copyFrom(Currency.spaceShards),this.gainedSpaceShards.copyFrom(getSpaceShardGain());return}this.type=aP.NORMAL,this.currentQKRate.copyFrom(e.dividedBy(TimeSpan.fromMilliseconds(player.records.thisQuantum.realTime).totalMinutes)),this.peakQKRateVal.copyFrom(player.records.thisQuantum.bestQKminVal),this.peakQKRate.copyFrom(player.records.thisQuantum.bestQKmin),this.showQKRate=this.peakQKRate.lte(this.rateThreshold),this.creditsClosed=GameEnd.creditsEverClosed}}}),aP={CANNOT_RESET:-1,FIRST_TIME:0,NORMAL:1,CHALLENGE:2,BIG_RIP:3},oP=D(iP,function(){var e=this,t=e._self._c;return e._self._setupProxy,e.isVisible?t(`button`,{staticClass:`o-prestige-button`,class:e.buttonClassObject,attrs:{onclick:`requestQuantumReset()`},on:{mouseover:function(t){e.hover=!0},mouseleave:function(t){e.hover=!1}}},[e.type===-1?[e._v(` Reach `+e._s(e.format(e.quantumGoal.ma,2,2))+` `),t(`br`),e._v(` Meta-Antimatter to study the Quantum layer `)]:e.type===0?[e._v(` We have enough to reform, we shall study the science of the Quantum layer! `)]:e.type===1?[e.showQKRate?t(`span`,[e._v(`Study for `)]):t(`span`,[e._v(`Study the Quantum layer for `)]),t(`span`,{style:e.amountStyle},[e._v(e._s(e.format(e.gainedQK,2)))]),e.showQKRate?t(`span`,[e._v(` QK`)]):t(`span`,[e._v(` `+e._s(e.pluralize(`Quark`,e.gainedQK)))]),t(`br`),e.showQKRate?[e._v(` Current: `+e._s(e.format(e.currentQKRate,2,2))+` QK/min `),t(`br`),e._v(` Peak: `+e._s(e.format(e.peakQKRate,2,2))+` QK/min at `+e._s(e.format(e.peakQKRateVal,2,2))+` QK `)]:e._e()]:e.type===2?[e._v(` The unseen has been detected, let's complete this challenging experiment! `)]:e.type===3?[e._v(` The pairing of these seems to be compatiable, let's study more of the combinations. `)]:e.type===4?[e._v(` Study the cosmological crisis for `),t(`span`,{style:e.tachyonAmountStyle},[e._v(e._s(e.format(e.gainedSpaceShards,2,1)))]),e._v(` `+e._s(e.pluralize(`Space Shard`,e.gainedSpaceShards))+` `)]:e._e()],2):e._e()},[],!1,null,`6af2e436`,null,null).exports,sP=r({name:`HeaderQuantumContainer`,components:{QuantumButton:oP},data(){return{showContainer:!1,showQK:!1,quarks:new Decimal(0)}},methods:{update(){this.showContainer=PlayerProgress.quantumUnlocked()||EternityChallenge(14).completions>1,this.showQK=PlayerProgress.quantumUnlocked(),this.quarks.copyFrom(Currency.quarks.value.floor())}}}),cP=D(sP,function(){var e=this,t=e._self._c;return e._self._setupProxy,e.showContainer?t(`div`,{staticClass:`c-prestige-button-container`},[e.showQK?t(`div`,{staticClass:`c-quarks`},[e._v(` You have `),t(`span`,{staticClass:`c-game-header__qk-amount`},[e._v(e._s(e.format(e.quarks,2)))]),e._v(` `+e._s(e.pluralize(`Quark`,e.quarks))+`. `)]):e._e(),t(`QuantumButton`)],1):e._e()},[],!1,null,`d67a8dc7`,null,null).exports,lP=r({name:`HeaderPrestigeGroup`,components:{HeaderCenterContainer:YN,HeaderEternityContainer:tP,HeaderQuantumContainer:cP,HeaderInfinityContainer:rP},data:()=>({extendedContainer:!1}),computed:{classObject(){return{"c-prestige-info-blocks":!this.extendedContainer,"c-prestige-info-blocks--extended":this.extendedContainer}},percentile(){return this.extendedContainer?`45%`:`0%`}},methods:{update(){this.extendedContainer=Player.canStudyQuantum||PlayerProgress.quantumUnlocked()}}}),uP=()=>{i((e,t)=>({"49e04a88":e.percentile}))},dP=lP.setup;lP.setup=dP?(e,t)=>(uP(),dP(e,t)):uP;var fP=D(lP,function(){var e=this,t=e._self._c;return e._self._setupProxy,t(`div`,{class:e.classObject},[t(`HeaderEternityContainer`,{staticClass:`l-game-header__eternity`}),t(`HeaderQuantumContainer`,{staticClass:`l-game-header__quantum`}),t(`HeaderInfinityContainer`,{staticClass:`l-game-header__infinity`}),t(`HeaderCenterContainer`,{staticClass:`l-game-header__center`})],1)},[],!1,null,`ff375549`,null,null).exports,pP=r({name:`GameHeader`,components:{HeaderChallengeDisplay:BN,HeaderChallengeEffects:VN,HeaderBlackHole:LN,HeaderPrestigeGroup:fP,GameSpeedDisplay:GN},data(){return{hasReality:!1}},methods:{update(){this.hasReality=PlayerProgress.realityUnlocked()}}}),mP=D(pP,function(){var e=this,t=e._self._c;return e._self._setupProxy,t(`div`,[t(`HeaderChallengeDisplay`),t(`HeaderChallengeEffects`),t(`HeaderPrestigeGroup`),e.hasReality?t(`GameSpeedDisplay`):e._e(),e.hasReality?t(`br`):e._e(),t(`HeaderBlackHole`)],1)},[],!1,null,`f67e525a`,null,null).exports,hP=D({name:`NewsTicker`,data(){return{enableAnimation:!1}},computed:{lineClass(){return this.enableAnimation?void 0:`c-disable-ticker-animation`}},beforeCreate(){this.recentTickers=[]},mounted(){document.addEventListener(`visibilitychange`,()=>this.restart.bind(this)),this.restart()},beforeDestroy(){this.clearTimeouts()},methods:{update(){this.currentNews?.dynamic&&(this.$refs.line.innerHTML=this.currentNews.text),this.enableAnimation=player.options.news.includeAnimated},restart(){if(!GameUI.initialized){setTimeout(this.restart.bind(this),100);return}this.clearTimeouts(),!document.hidden&&this.prepareNextMessage()},clearTimeouts(){clearTimeout(this.delayTimeout),clearTimeout(this.scrollTimeout)},prepareNextMessage(){let e=this.$refs.line;if(e===void 0)return;let t=e=>(e.unlocked??!0)&&!this.recentTickers.includes(e.id);if(nextNewsMessageId&&GameDatabase.news.some(e=>e.id===nextNewsMessageId))this.currentNews=GameDatabase.news.find(e=>e.id===nextNewsMessageId),nextNewsMessageId=void 0;else if(this.currentNews&&this.currentNews.id===`a236`)this.currentNews=GameDatabase.news.filter(e=>e.isAdvertising&&t(e)).randomElement();else{let e=Math.random()<player.options.news.AIChance;this.currentNews=GameDatabase.news.filter(t=>t.id.includes(`ai`)===e).filter(e=>t(e)).randomElement()}for(this.recentTickers.push(this.currentNews.id);this.recentTickers.length>player.options.news.repeatBuffer;)this.recentTickers.shift();this.currentNews.reset&&this.currentNews.reset(),e.innerHTML=this.currentNews.text,e.style[`transition-duration`]=`0ms`,this.currentNews?.id===`a244`||this.currentNews?.id===`ai63`?e.style.transform=`translateX(-100%)`:e.style.transform=`translateX(0)`,this.delayTimeout=setTimeout(this.scrollMessage.bind(this),1e3)},scrollMessage(){let e=this.$refs.line,t=player.options.news.speed*100,n=(this.$refs.ticker.clientWidth+e.clientWidth)/t;e.style[`transition-duration`]=`${n}s`,this.currentNews&&this.currentNews.id===`a244`?e.style.transform=`translateX(0)`:e.style.transform=`translateX(-100%)`,NewsHandler.addSeenNews(this.currentNews.id),NewsHandler.uniqueTickersSeen>=50&&Achievement(22).unlock(),this.scrollTimeout=setTimeout(this.prepareNextMessage.bind(this),n*1e3)},onLineClick(){if(this.currentNews.onClick===void 0)return;SecretAchievement(24).unlock();let e=this.currentNews.onClick();e!==void 0&&(this.$refs.line.innerHTML=e)}}},function(){var e=this,t=e._self._c;return t(`div`,{ref:`ticker`,staticClass:`c-news-ticker`},[t(`span`,{ref:`line`,staticClass:`c-news-line c-news-ticker__line`,class:e.lineClass,on:{click:e.onLineClick}})])},[],!1,null,null,null,null).exports,gP={name:`ClassicSubtabButton`,props:{subtab:{type:Object,required:!0},parentName:{type:String,required:!0}},data(){return{isAvailable:!1,hasNotification:!1,isCurrentSubtab:!1,tabName:``}},computed:{classObject(){return{"o-tab-btn":!0,"o-tab-btn--secondary":!0,"o-subtab-btn--active":this.isCurrentSubtab,"o-tab-btn--infinity":this.parentName===`Infinity`,"o-tab-btn--eternity":this.parentName===`Eternity`,"o-tab-btn--reality":this.parentName===`Reality`,"o-tab-btn--celestial":this.parentName===`Celestials`}}},methods:{update(){this.isAvailable=this.subtab.isAvailable,this.hasNotification=this.subtab.hasNotification,this.isCurrentSubtab=this.subtab.isOpen&&Theme.currentName()!==`S9`,this.tabName=Pelle.transitionText(this.subtab.name,this.subtab.name,Math.max(Math.min(GameEnd.endState-this.subtab.id%4/10,1),0))}}},_P={name:`ClassicSubtabBar`,components:{ClassicSubtabButton:D(gP,function(){var e=this,t=e._self._c;return e.isAvailable?t(`button`,{class:e.classObject,on:{click:function(t){return e.subtab.show(!0)}}},[e._v(` `+e._s(e.tabName)+` `),e.hasNotification?t(`div`,{staticClass:`fas fa-circle-exclamation l-notification-icon`}):e._e()]):e._e()},[],!1,null,`1b96fa1b`,null,null).exports},data(){return{isVisible:!1}},computed:{tab:()=>Tabs.current,subtabs(){return this.tab.subtabs}},methods:{update(){this.isVisible=this.subtabs.countWhere(e=>e.isAvailable)>1}}},vP=D(_P,function(){var e=this,t=e._self._c;return e.isVisible?t(`div`,{staticClass:`c-subtab-button-container`},e._l(e.subtabs,function(n,r){return t(`ClassicSubtabButton`,{key:r,attrs:{subtab:n,"parent-name":e.tab.name}})}),1):e._e()},[],!1,null,`8fa2fe37`,null,null).exports,yP={name:`ClassicTabButton`,props:{tab:{type:Object,required:!0},tabPosition:{type:Number,required:!0}},data(){return{isAvailable:!1,hasNotification:!1,tabName:``}},computed:{isCurrentTab(){return this.tab.isOpen&&Theme.currentName()!==`S9`}},methods:{update(){this.isAvailable=this.tab.isAvailable,this.hasNotification=this.tab.hasNotification,this.tabPosition<Pelle.endTabNames.length?this.tabName=Pelle.transitionText(this.tab.name,Pelle.endTabNames[this.tabPosition],Math.max(Math.min(GameEnd.endState-this.tab.id%4/10,1),0)):this.tabName=this.tab.name}}},bP={name:`ClassicTabBar`,components:{ClassicTabButton:D(yP,function(){var e=this,t=e._self._c;return e.isAvailable?t(`button`,{staticClass:`o-tab-btn`,class:[e.tab.config.UIClass,{"o-tab-btn--active":e.isCurrentTab}],on:{click:function(t){return e.tab.show(!0)}}},[e._v(` `+e._s(e.tabName)+` `),e.hasNotification?t(`div`,{staticClass:`fas fa-circle-exclamation l-notification-icon`}):e._e()]):e._e()},[],!1,null,`33b35359`,null,null).exports},computed:{tabs:()=>Tabs.oldUI}},xP=D(bP,function(){var e=this,t=e._self._c;return t(`div`,e._l(e.tabs,function(e,n){return t(`ClassicTabButton`,{key:n,attrs:{"tab-position":n,tab:e}})}),1)},[],!1,null,`735a4212`,null,null).exports,SP=D({name:`EternityPointsHeader`,data(){return{eternityPoints:new Decimal}},methods:{update(){this.eternityPoints.copyFrom(Currency.eternityPoints.value.floor())}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`c-eternity-tab__header`},[e._v(` You have `),t(`span`,{staticClass:`c-eternity-tab__eternity-points`},[e._v(e._s(e.format(e.eternityPoints,2)))]),e._v(` `+e._s(e.pluralize(`Eternity Point`,e.eternityPoints))+`. `)])},[],!1,null,`51f43e71`,null,null).exports,CP=D({name:`InfinityPointsHeader`,data(){return{infinityPoints:new Decimal,isVisible:!1}},methods:{update(){this.infinityPoints.copyFrom(Currency.infinityPoints),this.isVisible=PlayerProgress.infinityUnlocked()}}},function(){var e=this,t=e._self._c;return t(`div`,{directives:[{name:`show`,rawName:`v-show`,value:e.isVisible,expression:`isVisible`}],staticClass:`c-infinity-tab__header`},[e._v(` You have `),t(`span`,{staticClass:`c-infinity-tab__infinity-points`},[e._v(e._s(e.format(e.infinityPoints,2)))]),e._v(` `+e._s(e.pluralize(`Infinity Point`,e.infinityPoints))+`. `)])},[],!1,null,`76db2496`,null,null).exports,wP=r({name:`ClassicUi`,components:{GameHeader:mP,ClassicSubtabBar:vP,ClassicTabBar:xP,NewsTicker:hP,InfinityPointsHeader:CP,EternityPointsHeader:SP,BigCrunchButton:PN},data(){return{bigCrunch:!1,smallCrunch:!1,newGameKey:``}},computed:{tab:()=>Tabs.current,news(){return this.$viewModel.news}},methods:{update(){this.bigCrunch=!player.break&&Player.canCrunch&&Time.bestInfinityRealTime.totalMinutes.gt(1),this.newGameKey=Pelle.isDoomed}}}),TP=D(wP,function(){var e=this,t=e._self._c;return e._self._setupProxy,t(`div`,{key:e.newGameKey,staticClass:`container c-old-ui l-old-ui`,attrs:{id:`container`}},[t(`link`,{attrs:{rel:`stylesheet`,type:`text/css`,href:`styles/old-ui.css`}}),t(`BigCrunchButton`),e.bigCrunch?e._e():[e.news?t(`NewsTicker`,{staticClass:`l-old-ui__news-bar`}):e._e(),t(`GameHeader`,{staticClass:`l-old-ui__header`}),t(`ClassicTabBar`),e.tab.config.before?t(e.tab.config.before,{tag:`component`}):e._e(),t(`ClassicSubtabBar`),t(`div`,{staticClass:`l-old-ui__page`},[e._t(`default`)],2)]],2)},[],!1,null,`94f4b24d`,null,null).exports,EP={name:`CelestialQuoteBackground`,props:{celestialSymbols:{type:Array,required:!0},celestials:{type:Array,required:!0},primary:{type:Boolean,required:!0}},computed:{modalClass(){return{"l-modal-celestial-quote":!0}}},methods:{styleObject(e,t,n){let r=`var(--color-${e[0]}--base)`;return e[0]===`laitela`?{color:`var(--color-${e[0]}--accent)`,background:n?void 0:r,opacity:t*e[1]}:{color:r,opacity:t*e[1]}}}},DP={name:`CelestialQuoteLine`,components:{CelestialQuoteBackground:D(EP,function(){var e=this,t=e._self._c;return t(`div`,{class:e.modalClass},[e._l(e.celestials,function(n,r){return t(`span`,{key:r,staticClass:`c-modal-celestial-quote c-modal-celestial-quote__symbol`,style:e.styleObject(n,.2,!0),domProps:{innerHTML:e._s(e.celestialSymbols[r])}})}),e._l(e.celestials,function(n,r){return t(`span`,{key:r+10,staticClass:`c-modal-celestial-quote c-modal-celestial-quote__shadow`,style:e.styleObject(n,1,!1)})}),e._l(e.celestials,function(n,r){return t(`span`,{key:r+20,staticClass:`c-modal-celestial-quote c-modal-celestial-quote__text`,style:e.styleObject(n,1,!0)},[e._t(`default`)],2)})],2)},[],!1,null,`06384d34`,null,null).exports},props:{quote:{type:Object,required:!0},currentLine:{type:Number,required:!0},primary:{type:Boolean,required:!1,default:!1},leftVisible:{type:Boolean,required:!1,default:!1},rightVisible:{type:Boolean,required:!1,default:!1},closeVisible:{type:Boolean,required:!1,default:!1}},data(){return{message:``,celestialSymbols:[],celestials:[],celestialName:``}},computed:{line(){return this.quote.line(this.currentLine)},leftClass(){return{"c-modal-celestial-quote__arrow":!0,"c-modal-celestial-quote__arrow-left":!0,"c-modal-celestial-quote__arrow-invisible":!this.leftVisible,fas:!0,"fa-chevron-circle-left":!0}},rightClass(){return{"c-modal-celestial-quote__arrow":!0,"c-modal-celestial-quote__arrow-right":!0,"c-modal-celestial-quote__arrow-invisible":!this.rightVisible,fas:!0,"fa-chevron-circle-right":!0}}},methods:{update(){let e=this.line;this.celestialSymbols=e.celestialSymbols,this.message=e.line,this.celestials=e.celestials,this.celestialName=e.celestialName}}},OP=D(DP,function(){var e=this,t=e._self._c;return t(`CelestialQuoteBackground`,{attrs:{"celestial-symbols":e.celestialSymbols,celestials:e.celestials,primary:e.primary}},[e.line.showCelestialName?t(`span`,{staticClass:`c-modal-celestial-name`},[e._v(` `+e._s(e.celestialName)+` `)]):e._e(),t(`i`,{class:e.leftClass,on:{click:function(t){return e.$emit(`progress-in`,`left`)}}}),t(`span`,{staticClass:`l-modal-celestial-quote__text`},[e._v(` `+e._s(e.message)+` `)]),t(`i`,{class:e.rightClass,on:{click:function(t){return e.$emit(`progress-in`,`right`)}}}),e.closeVisible?t(`i`,{staticClass:`c-modal-celestial-quote__end fas fa-check-circle`,on:{click:e.emitClose}}):e._e()])},[],!1,null,`c081b961`,null,null).exports,kP={name:`CelestialQuoteHistoryDisplay`,components:{CelestialQuoteLine:OP},props:{quotes:{type:Array,required:!0}},data(){return{focusedQuoteId:0,unlockedQuotes:[],lastProgress:Date.now()}},computed:{name(){return this.unlockedQuotes[0].quote._celestial},focusedQuote(){return this.unlockedQuotes[this.focusedQuoteId]},currentQuoteLine(){return this.focusedQuote.currentLine},commonButtonClass(){let e=this.name===`laitela`&&!Theme.current().isDark();return{"fas c-modal-celestial-quote-history__arrow":!0,"o-dark-button":e,"o-light-button":!e}},upClass(){return{...this.commonButtonClass,"c-modal-celestial-quote-history__arrow-up fa-chevron-circle-up":!0,"c-modal-celestial-quote-history__arrow--disabled":this.focusedQuoteId<=0}},downClass(){return{...this.commonButtonClass,"c-modal-celestial-quote-history__arrow-down fa-chevron-circle-down":!0,"c-modal-celestial-quote-history__arrow--disabled":this.focusedQuoteId>=this.unlockedQuotes.length-1}},leftClass(){return{...this.commonButtonClass,"c-modal-celestial-quote-history__arrow-left fa-chevron-circle-left":!0,"c-modal-celestial-quote-history__arrow--disabled":this.currentQuoteLine<=0}},rightClass(){return{...this.commonButtonClass,"c-modal-celestial-quote-history__arrow-right fa-chevron-circle-right":!0,"c-modal-celestial-quote-history__arrow--disabled":this.currentQuoteLine>=this.focusedQuote.quote.totalLines-1}}},created(){this.unlockedQuotes=this.quotes.filter(e=>e.isUnlocked).map(e=>({quote:e,currentLine:0})),this.$nextTick(()=>{this.on$(GAME_EVENT.ARROW_KEY_PRESSED,e=>{switch(e[0]){case`up`:this.progressUp();break;case`down`:this.progressDown();break;case`left`:this.progressLeft();break;case`right`:this.progressRight();break}})})},methods:{isFocused(e,t){return this.focusedQuoteId===e&&this.currentQuoteLine===t},quoteStyle(e,t){let n=e===this.focusedQuoteId?1-(t!==this.currentQuoteLine)*.3:1-Math.abs(e-this.focusedQuoteId)/8,r=e===this.focusedQuoteId&&t!==this.currentQuoteLine?`translateX(${(t-this.currentQuoteLine)*110+Math.sign(t-this.currentQuoteLine)*20}%)`:``;return{top:`calc(50vh + ${AP(e-this.focusedQuoteId)*16}rem)`,transform:`translate(-50%, -50%) scale(${Math.max(n,0)}) ${r}`,opacity:Number(t===this.unlockedQuotes[e].currentLine||e===this.focusedQuoteId),visibility:t===this.unlockedQuotes[e].currentLine||e===this.focusedQuoteId?`visible`:`hidden`,"z-index":-Math.abs(e-this.focusedQuoteId)}},progressUp(){Date.now()-this.lastProgress<150||(this.focusedQuoteId=Math.max(0,this.focusedQuoteId-1),this.lastProgress=Date.now())},progressDown(){Date.now()-this.lastProgress<150||(this.focusedQuoteId=Math.min(this.unlockedQuotes.length-1,this.focusedQuoteId+1),this.lastProgress=Date.now())},progressLeft(){Date.now()-this.lastProgress<150||(this.focusedQuote.currentLine=Math.max(0,this.focusedQuote.currentLine-1),this.lastProgress=Date.now())},progressRight(){Date.now()-this.lastProgress<150||(this.focusedQuote.currentLine=Math.min(this.focusedQuote.quote.totalLines-1,this.focusedQuote.currentLine+1),this.lastProgress=Date.now())},close(){Quote.clearHistory()}}};function AP(e){return Math.sign(e)*Math.abs(e)**.4}var jP=D(kP,function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-modal-overlay c-modal-overlay`},[t(`i`,{staticClass:`c-modal-celestial-quote-history__close fas fa-circle-xmark o-light-button`,on:{click:e.close}}),t(`div`,{staticClass:`c-quote-history-modal__clickable-background`,on:{click:e.close}}),e._l(e.unlockedQuotes,function(n,r){return t(`div`,{key:r,on:{click:function(t){e.focusedQuoteId=r}}},e._l(n.quote.config.lines,function(i,a){return t(`div`,{key:a,on:{click:function(e){n.currentLine=a}}},[t(`CelestialQuoteLine`,{staticClass:`c-quote-overlay`,class:{"c-quote-overlay--background":!e.isFocused(r,a)},style:e.quoteStyle(r,a),attrs:{quote:n.quote,"current-line":a,primary:``}})],1)}),0)}),t(`div`,{staticClass:`c-quote-history-modal__controls`},[t(`i`,{class:e.upClass,on:{click:e.progressUp}}),t(`i`,{class:e.downClass,on:{click:e.progressDown}}),t(`i`,{class:e.leftClass,on:{click:e.progressLeft}}),t(`i`,{class:e.rightClass,on:{click:e.progressRight}})])],2)},[],!1,null,`c1067e3b`,null,null).exports,MP={name:`CelestialQuoteBasicInteractable`,components:{CelestialQuoteLine:OP},props:{quote:{type:Object,required:!0},isFocused:{type:Boolean,required:!1,default:!0},primary:{type:Boolean,required:!1,default:!1},leftVisible:{type:Boolean,required:!1,default:!0},rightVisible:{type:Boolean,required:!1,default:!0},closeVisible:{type:Boolean,required:!1,default:!0}},data(){return{index:0}},computed:{totalLines(){return this.quote.totalLines},currentLine:{get(){return this.index},set(e){this.index=Math.clamp(e,0,this.totalLines-1)}},isQuoteStart(){return this.currentLine===0},isQuoteEnd(){return this.currentLine===this.totalLines-1}},created(){this.$nextTick(()=>{this.on$(GAME_EVENT.ARROW_KEY_PRESSED,e=>this.progressIn(e[0])),this.on$(GAME_EVENT.ENTER_PRESSED,()=>{this.isQuoteEnd&&this.close()})})},methods:{progressIn(e){if(!this.isFocused)return!1;switch(e){case`left`:return this.currentLine--;case`right`:return this.currentLine++;default:return!1}},close(){this.isFocused&&(this.index=0,Quote.advanceQueue())}}},NP={name:`CelestialQuoteModal`,components:{CelestialQuoteLineBasicInteractable:D(MP,function(){var e=this,t=e._self._c;return t(`CelestialQuoteLine`,{attrs:{quote:e.quote,"current-line":e.currentLine,"left-visible":!e.isQuoteStart&&e.leftVisible,"right-visible":!e.isQuoteEnd&&e.rightVisible,"close-visible":e.isQuoteEnd&&e.closeVisible,primary:``},on:{close:e.close,"progress-in":e.progressIn}})},[],!1,null,null,null,null).exports},props:{quote:{type:Object,required:!0}}},PP=D(NP,function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-modal-overlay c-modal-overlay`},[t(`CelestialQuoteLineBasicInteractable`,{staticClass:`c-quote-overlay`,attrs:{quote:e.quote}})],1)},[],!1,null,`e50bfc92`,null,null).exports,FP=D({name:`CreditsContainer`,components:{CreditsDisplay:rE},data(){return{rolling:!1,scroll:0,audio:null,isMuted:!1}},computed:{creditStyles(){return{bottom:`${this.scroll}px`,display:this.rolling?`block`:`none`}},muteStyle(){return{top:`calc(${this.scroll+20}px - 100vh)`,display:this.rolling?`block`:`none`}},muteIconClass(){return this.isMuted?`fa-volume-xmark`:`fa-volume-high`},celestialDisplays(){return{teresa:Teresa.symbol,effarig:Effarig.symbol,enslaved:Enslaved.symbol,v:V.symbol,ra:Ra.symbol,laitela:Laitela.symbol,pelle:Pelle.symbol}}},watch:{rolling(e,t){GameEnd.creditsEverClosed||!t&&e&&this.audio===null&&(this.audio=new Audio(`audio/credits.mp3`),this.audio.play())}},created(){let e=player.options.updateRate;player.options.updateRate=33,GameOptions.refreshUpdateRate(),player.options.updateRate=e},methods:{update(){let e=(this.$refs.creditsDisplay?.offsetHeight||0)+innerHeight;this.rolling=GameEnd.endState>END_STATE_MARKERS.CREDITS_START,this.scroll=(Math.clampMax(GameEnd.endState,END_STATE_MARKERS.CREDITS_END)-END_STATE_MARKERS.CREDITS_START)/(END_STATE_MARKERS.SONG_END-END_STATE_MARKERS.CREDITS_START)*e,this.audio&&(this.audio.volume=this.isMuted?0:Math.clamp(GameEnd.endState-END_STATE_MARKERS.CREDITS_START,0,.3))}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`c-credits-container`,style:e.creditStyles},[t(`i`,{staticClass:`c-mute-button fa-solid`,class:e.muteIconClass,style:e.muteStyle,on:{click:function(t){e.isMuted=!e.isMuted}}}),e._l(e.celestialDisplays,function(n,r){return t(`div`,{key:r+`-end-credit-symbol-disp`,staticClass:`c-credits-cel-symbol`,class:`c-${r}-credits`,domProps:{innerHTML:e._s(n)}})}),t(`span`,{ref:`creditsDisplay`},[t(`CreditsDisplay`)],1)],2)},[],!1,null,`eef08c10`,null,null).exports,IP=D({name:`FadeAway`,data(){return{opacity:0}},methods:{update(){this.opacity=(GameEnd.endState-END_STATE_MARKERS.FADE_AWAY)/2}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`c-background-overlay`,style:{opacity:e.opacity,pointerEvents:e.opacity>1?`auto`:`none`}})},[],!1,null,`03228c6a`,null,null).exports,LP=D({name:`HowToPlay`,data(){return{hasTutorial:!1,isModern:!1}},computed:{h2pClassObject(){return{"o-tab-btn l-help-me":!0}},topMargin(){return{"margin-top":this.isModern?`4.5rem`:`1rem`}}},methods:{update(){this.hasTutorial=Tutorial.emphasizeH2P(),this.isModern=player.options.newUI},showH2P(){Modal.h2p.show()},showInfo(){Modal.information.show()}}},function(){var e=this,t=e._self._c;return t(`div`,[t(`div`,{class:e.h2pClassObject,style:e.topMargin,on:{click:e.showH2P}},[e._v(` ? `),e.hasTutorial?t(`div`,{staticClass:`h2p-tooltip`},[e._v(` Click for info `)]):e._e()]),e.hasTutorial?t(`div`,{staticClass:`h2p-tutorial--glow`,style:e.topMargin}):e._e(),t(`div`,{staticClass:`o-tab-btn l-information l-help-me`,on:{click:e.showInfo}},[e._v(` i `)])])},[],!1,null,`91f55f8d`,null,null).exports,RP={name:`OfflineSpeedupButton`,components:{PrimaryButton:L},props:{button:{type:Object,required:!0},progress:{type:Object,required:!0}},computed:{canBeClicked(){return this.button.condition(this.progress.current,this.progress.max)},buttonClass(){return{"o-primary-btn--width-medium":!0,"o-primary-btn--disabled":!this.canBeClicked}}},methods:{buttonClicked(){this.canBeClicked&&this.button.click()}}},zP={name:`ModalProgressBar`,components:{OfflineSpeedupButton:D(RP,function(){var e=this,t=e._self._c;return t(`PrimaryButton`,{class:e.buttonClass,on:{click:e.buttonClicked}},[e._v(` `+e._s(e.button.text)+` `)])},[],!1,null,null,null,null).exports},computed:{progress(){return this.$viewModel.modal.progressBar},foregroundStyle(){return{width:`${this.progress.current/this.progress.max*100}%`}},remainingTime(){let e=(Date.now()-this.progress.startTime)*(this.progress.max-this.progress.current)/this.progress.current;return TimeSpan.fromMilliseconds(new Decimal(e)).toStringShort()},buttons(){return this.progress.buttons||[]}}},BP=D(zP,function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-modal-overlay c-modal-overlay progress-bar-modal`},[t(`div`,{staticClass:`c-modal`},[t(`div`,{staticClass:`modal-progress-bar`},[t(`div`,{staticClass:`modal-progress-bar__label`},[e._v(` `+e._s(e.progress.label)+` `)]),t(`div`,[e._v(` `+e._s(e.progress.info)+` `)]),t(`div`,{staticClass:`modal-progress-bar__margin`},[t(`div`,[e._v(` `+e._s(e.progress.progressName)+`: `+e._s(e.formatInt(e.progress.current))+`/`+e._s(e.formatInt(e.progress.max))+` `)]),t(`div`,[e._v(` Remaining: `+e._s(e.remainingTime)+` `)]),t(`div`,{staticClass:`modal-progress-bar__hbox`},[t(`div`,{staticClass:`modal-progress-bar__bg`},[t(`div`,{staticClass:`modal-progress-bar__fg`,style:e.foregroundStyle})])])]),t(`div`,{staticClass:`modal-progress-bar__buttons`},e._l(e.buttons,function(n,r){return t(`OfflineSpeedupButton`,{key:r,attrs:{button:n,progress:e.progress}})}),1)])])])},[],!1,null,`90bd63b3`,null,null).exports,VP=D({name:`ModernSidebarCurrency`,data(){return{sidebarID:0,resourceName:``,resourceValue:new Decimal(0)}},computed:{resourceDB:()=>GameDatabase.sidebarResources,numDBEntries(){return this.resourceDB.length},resource(){return this.sidebarID===0?this.resourceDB.filter(e=>e.isAvailable()).sort((e,t)=>t.id-e.id)[0]:this.resourceDB.find(e=>e.id===this.sidebarID)},displayValue(){return this.resource.formatValue(this.resourceValue).replace(` + `,`+`)}},methods:{update(){this.sidebarID=player.options.sidebarResourceID,this.resourceName=this.resource.resourceName??this.resource.optionName,this.resourceValue.copyFrom(this.resource.value())},cycleResource(e){let t=this.sidebarID;for(this.sidebarID=(this.sidebarID+this.numDBEntries+e)%this.numDBEntries;this.sidebarID!==t&&!this.resource.isAvailable();)this.sidebarID=(this.sidebarID+this.numDBEntries+e)%this.numDBEntries;player.options.sidebarResourceID=this.sidebarID},containerClass(){return{"c-sidebar-resource":!0,"c-sidebar-resource-default":this.sidebarID===0}},styleObject(){let e=this.displayValue.length;return{transform:`scale(${e<10?1:10/e})`}}}},function(){var e=this,t=e._self._c;return t(`div`,{class:e.containerClass(),on:{click:[function(t){return t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:e.cycleResource(1)},function(t){return!t.shiftKey||t.ctrlKey||t.altKey||t.metaKey?null:e.cycleResource(-1)}]}},[t(`h2`,{class:e.resource.formatClass,style:e.styleObject()},[e._v(` `+e._s(e.displayValue)+` `)]),t(`div`,{staticClass:`c-sidebar-resource__information`},[t(`span`,{staticClass:`c-sidebar-resource__name`},[e._v(e._s(e.resourceName))])])])},[],!1,null,`c39eb84b`,null,null).exports,HP={name:`ModernTabButton`,props:{tab:{type:Object,required:!0},tabPosition:{type:Number,required:!0}},data(){return{isAvailable:!1,isHidden:!1,subtabVisibilities:[],showSubtabs:!1,hasNotification:!1,tabName:``}},computed:{classObject(){return{"o-tab-btn":!0,"o-tab-btn--modern-tabs":!0,"o-tab-btn--subtabs":this.showSubtabs,"o-tab-btn--active":this.isCurrentTab&&Theme.currentName()!==`S9`}},isCurrentTab(){return this.tab.isOpen}},methods:{update(){this.isAvailable=this.tab.isAvailable,this.isHidden=this.tab.isHidden,this.subtabVisibilities=this.tab.subtabs.map(e=>e.isAvailable),this.showSubtabs=this.isAvailable&&this.subtabVisibilities.length>0,this.hasNotification=this.tab.hasNotification,this.tabPosition<Pelle.endTabNames.length?this.tabName=Pelle.transitionText(this.tab.name,Pelle.endTabNames[this.tabPosition],Math.clamp(GameEnd.endState-this.tab.id%4/10,0,1)):this.tabName=this.tab.name},isCurrentSubtab(e){return player.options.lastOpenSubtab[this.tab.id]===e&&Theme.currentName()!==`S9`}}},UP=D(HP,function(){var e=this,t=e._self._c;return!e.isHidden&&e.isAvailable?t(`div`,{class:[e.classObject,e.tab.config.UIClass]},[t(`div`,{staticClass:`l-tab-btn-inner`,on:{click:function(t){return e.tab.show(!0)}}},[e._v(` `+e._s(e.tabName)+` `),e.hasNotification?t(`div`,{staticClass:`fas fa-circle-exclamation l-notification-icon`}):e._e()]),e.showSubtabs?t(`div`,{staticClass:`subtabs`},[e._l(e.tab.subtabs,function(n,r){return[e.subtabVisibilities[r]?t(`div`,{key:r,staticClass:`o-tab-btn o-tab-btn--subtab`,class:[e.tab.config.UIClass,{"o-subtab-btn--active":e.isCurrentSubtab(n.id)}],on:{click:function(e){return n.show(!0)}}},[t(`span`,{domProps:{innerHTML:e._s(n.symbol)}}),n.hasNotification?t(`div`,{staticClass:`fas fa-circle-exclamation l-notification-icon`}):e._e(),t(`div`,{staticClass:`o-subtab__tooltip`},[e._v(` `+e._s(n.name)+` `)])]):e._e()]})],2):e._e()]):e._e()},[],!1,null,`387d19da`,null,null).exports,WP=r({name:`ModernSidebar`,components:{ModernSidebarCurrency:VP,ModernTabButton:UP},data(){return{isHidden:!1,tabVisibilities:[]}},computed:{tabs:()=>Tabs.newUI},methods:{update(){this.isHidden=AutomatorData.isEditorFullscreen,this.tabVisibilities=[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0]}}}),GP=D(WP,function(){var e=this,t=e._self._c;return e._self._setupProxy,e.isHidden?e._e():t(`div`,{staticClass:`c-modern-sidebar`},[t(`ModernSidebarCurrency`),e._l(e.tabs,function(n,r){return[e.tabVisibilities[r]?t(`ModernTabButton`,{key:n.name,attrs:{tab:n,"tab-position":r}}):e._e()]})],2)},[],!1,null,`1f77ac94`,null,null).exports,KP=D({name:`NewGame`,data(){return{opacity:0,visible:!1,hasMoreCosmetics:!1,selectedSetName:``}},computed:{style(){return{opacity:this.opacity,visibility:this.visible?`visible`:`hidden`}}},methods:{update(){this.visible=GameEnd.endState>=END_STATE_MARKERS.SHOW_NEW_GAME&&!GameEnd.removeAdditionalEnd,this.opacity=(GameEnd.endState-END_STATE_MARKERS.SHOW_NEW_GAME)*2,this.hasMoreCosmetics=GlyphAppearanceHandler.lockedSets.length>0,this.selectedSetName=GlyphAppearanceHandler.chosenFromModal?.name??`None (will choose randomly)`},startNewGame(){NG.startNewGame()},openSelectionModal(){Modal.cosmeticSetChoice.show()}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`c-new-game-container`,style:e.style},[t(`h2`,[e._v(` Reset the entire game, but keep Automator Scripts, Study Presets, Secret Themes, Secret Achievements, Options, and Companion Glyph. `)]),t(`h3`,[e._v(`You can use the button in the top-right to view the game as it is right now.`)]),t(`div`,{staticClass:`c-new-game-button-container`},[t(`button`,{staticClass:`c-new-game-button`,on:{click:e.startNewGame}},[e._v(` Start over? `)])]),t(`br`),e.hasMoreCosmetics?t(`h3`,[e._v(` For completing the game, you also unlock a new cosmetic set of your choice for Glyphs. These are freely modifiable once you reach Reality again, but are purely visual and offer no gameplay bonuses. `),t(`br`),t(`button`,{staticClass:`c-new-game-button`,on:{click:e.openSelectionModal}},[e._v(` Choose Cosmetic Set `)]),t(`br`),t(`br`),e._v(` Selected Set: `+e._s(e.selectedSetName)+` `)]):t(`h3`,[e._v(` You have unlocked all Glyph cosmetic sets! `)]),t(`br`),t(`h3`,[e._v(` You can also import "speedrun" to start the game again with additional tracking for speedrunning purposes. `)])])},[],!1,null,`cb8fdd05`,null,null).exports,qP={name:`PopupModal`,props:{modal:{type:Object,required:!0}},data(){return{showModal:!1,positionStyle:{}}},created(){this.on$(GAME_EVENT.CLOSE_MODAL,this.hide)},mounted(){this.updatePositionStyles()},destroyed(){document.activeElement.blur()},methods:{update(){let e=this.showModal;this.showModal=GameEnd.endState<=END_STATE_MARKERS.INTERACTIVITY_DISABLED||this.modal.component.name===`CosmeticSetChoiceModal`,this.showModal!==e&&this.$nextTick(()=>this.updatePositionStyles()),this.updatePositionStyles()},updatePositionStyles(){if(!this.$refs.modal)return;if(!this.showModal||this.$viewModel.theme!==`S12`){this.positionStyle={};return}let e=this.$refs.modal.offsetWidth,t=this.$refs.modal.offsetHeight;this.positionStyle={left:`${Math.round(innerWidth/2-e/2)}px`,top:`${Math.round(innerHeight/2-t/2)}px`,transform:`none`}},hide(){this.modal.isOpen&&(this.modal.hide?this.modal.hide():Modal.hide())}}},JP=D(qP,function(){var e=this,t=e._self._c;return e.showModal?t(`div`,{ref:`modal`,staticClass:`c-modal l-modal`,style:e.positionStyle},[t(e.modal.component,e._b({tag:`component`,on:{close:e.hide}},`component`,e.modal.props,!1))],1):e._e()},[],!1,null,null,null,null).exports,YP=D({name:`SaveTimer`,data(){return{currentTime:0,cloudSaveEnabled:!1,lastLocalSave:0,lastCloudSave:0,showTimeSinceSave:!1,saveDisabled:!1}},computed:{timeString(){let e=timeDisplayShort(new Decimal(this.currentTime-this.lastLocalSave)),t=timeDisplayShort(new Decimal(this.currentTime-this.lastCloudSave));return this.cloudSaveEnabled?`${e} (local) | ${t} (cloud)`:e}},methods:{update(){this.currentTime=Date.now(),this.cloudSaveEnabled=player.options.cloudEnabled&&Cloud.loggedIn,this.lastLocalSave=GameStorage.lastSaveTime,this.lastCloudSave=GameStorage.lastCloudSave,this.showTimeSinceSave=player.options.showTimeSinceSave,this.saveDisabled=GameEnd.endState>=END_STATE_MARKERS.INTERACTIVITY_DISABLED},save(){GameStorage.save(!1,!0)}}},function(){var e=this,t=e._self._c;return e.showTimeSinceSave?t(`div`,{staticClass:`o-save-timer`,on:{click:e.save}},[e.saveDisabled?t(`b`,[e._v(`There is nothing left to save.`)]):t(`span`,[e._v(`Time since last save: `+e._s(e.timeString))])]):e._e()},[],!1,null,`9bfaf2af`,null,null).exports,XP=D({name:`SpectateGame`,components:{PrimaryButton:L},data(){return{showSpectate:Boolean}},methods:{update(){this.showSpectate=GameEnd.endState>=END_STATE_MARKERS.SPECTATE_GAME,this.endState=GameEnd.endState},swap(){GameEnd.creditsClosed=!GameEnd.creditsClosed,GameEnd.creditsEverClosed||(GameEnd.creditsEverClosed=!0)}}},function(){var e=this,t=e._self._c;return e.showSpectate?t(`div`,{key:e.endState},[t(`PrimaryButton`,{staticClass:`c-swap-button o-primary-btn--modal-close c-modal__close-btn tutorial--glow`,on:{click:e.swap}},[t(`i`,{staticClass:`fas fa-sync`})])],1):e._e()},[],!1,null,`1123f5af`,null,null).exports,ZP=D({name:`SpeedrunStatus`,data(){return{isActive:!1,isSegmented:!1,usedSTD:!1,hasStarted:!1,startDate:0,saveName:``,timePlayedStr:``,offlineProgress:!1,offlineFraction:0,mostRecent:{},isCollapsed:!1,timeSince:0,seedText:0,canModifySeed:!1,isComplete:!1}},computed:{statusText(){return this.isComplete?`<span style="color: var(--color-good)">Finished!</span>`:this.hasStarted?`<span style="color: var(--color-good)">Running!</span>`:`<span style="color: var(--color-bad)">Not Started Yet</span>`},segmentText(){return this.isSegmented?`Segmented Speedrun (imported save)`:`Single-segment Speedrun (no save import)`},iapText(){return this.usedSTD?`IAPs have been used`:`No IAPs Used`},offlineText(){let e=this.offlineProgress?`<span style="color: var(--color-good)">Enabled</span>`:`<span style="color: var(--color-bad)">Disabled</span>`,t=this.offlineFraction===0?`(No offline time used)`:`(${formatPercents(this.offlineFraction,2)} time spent offline)`;return`${e} ${t}`},collapseIcon(){return this.isCollapsed?`fas fa-expand-arrows-alt`:`fas fa-compress-arrows-alt`}},methods:{update(){let e=player.speedrun;this.isActive=e.isActive,this.canModifySeed=Speedrun.canModifySeed(),this.isActive&&(this.isSegmented=e.isSegmented,this.usedSTD=e.usedSTD,this.hasStarted=e.hasStarted,this.startDate=e.startDate,this.saveName=e.name,this.isCollapsed=e.hideInfo,this.isComplete=Achievement(188).isUnlocked,this.timePlayedStr=Time.realTimePlayed.toStringShort(),this.offlineProgress=player.options.offlineProgress,this.offlineFraction=e.offlineTimeUsed.div(player.records.realTimePlayed.clampMin(1)),this.mostRecent=Speedrun.mostRecentMilestone(),this.timeSince=Time.realTimePlayed.minus(TimeSpan.fromMilliseconds(new Decimal(e.records[this.mostRecent]??0))).toStringShort(),this.seedText=Speedrun.seedModeText())},milestoneName(e){let t=GameDatabase.speedrunMilestones;return e===0?`None`:t.find(t=>t.id===e).name},changeName(){this.hasStarted||Modal.changeName.show()},collapseText(){return this.isCollapsed?`Expand`:`Click to collapse Speedrun info`},toggleCollapse(){player.speedrun.hideInfo=!this.isCollapsed},openSeedModal(){this.canModifySeed&&Modal.modifySeed.show()}}},function(){var e=this,t=e._self._c;return e.isActive?t(`div`,{staticClass:`c-speedrun-status`},[e.isCollapsed?e._e():t(`div`,[t(`b`,[e._v(`Speedrun Status (`),t(`span`,{domProps:{innerHTML:e._s(e.statusText)}}),e._v(`)`)]),t(`br`),t(`span`,{class:{"c-speedrun-status--can-change":!e.hasStarted},on:{click:e.changeName}},[e._v(` Player Name: `+e._s(e.saveName)+` `)]),t(`br`),t(`i`,[e._v(e._s(e.segmentText))]),t(`br`),t(`i`,[e._v(e._s(e.iapText))]),t(`br`),t(`span`,{class:{"c-speedrun-status--can-change":e.canModifySeed},on:{click:function(t){return e.openSeedModal()}}},[e._v(e._s(e.seedText))]),t(`br`),e._v(` Total real playtime since start: `+e._s(e.timePlayedStr)+` `),t(`br`),e._v(` Offline Progress: `),t(`span`,{domProps:{innerHTML:e._s(e.offlineText)}}),t(`br`),e._v(` Most Recent Milestone: `+e._s(e.milestoneName(e.mostRecent))+` `),e.mostRecent?t(`span`,[e._v(`(`+e._s(e.timeSince)+` ago)`)]):e._e(),t(`br`)]),t(`div`,{staticClass:`c-speedrun-status--collapse`,on:{click:e.toggleCollapse}},[t(`i`,{class:e.collapseIcon}),e._v(` `+e._s(e.collapseText())+` `),t(`i`,{class:e.collapseIcon})])]):e._e()},[],!1,null,`0d23fe76`,null,null).exports,QP=r({name:`HoverMenu`,props:{saveslot:{type:Number,default:0}},data:()=>({componentID:UIID.next(),contextMenuHideTimer:null,contextMenuShowTimer:null}),computed:{contextMenuIsVisible(){return this.$viewModel.currentContextMenu===this.componentID},listeners(){return{...this.$listeners,touchstart:()=>this.startShowTimer(),mouseenter:()=>this.startShowTimer(),mouseleave:()=>this.startHideTimer()}}},methods:{startShowTimer(){this.stopHideTimer(),!(this.contextMenuIsVisible||this.contextMenuShowTimer)&&(this.contextMenuShowTimer=setTimeout(()=>{this.contextMenuShowTimer=null,this.showContextMenu()},250))},showContextMenu(){this.stopTimers(),this.$viewModel.currentContextMenu=this.componentID},startHideTimer(){this.stopShowTimer(),!(!this.contextMenuIsVisible||this.contextMenuHideTimer)&&(this.contextMenuHideTimer=setTimeout(()=>{this.contextMenuHideTimer=null,this.hideContextMenu()},500))},hideContextMenu(){this.stopTimers(),this.$viewModel.currentContextMenu===this.componentID&&(this.$viewModel.currentContextMenu=null)},toggleContextMenu(){this.contextMenuIsVisible?this.hideContextMenu():this.showContextMenu()},stopTimers(){this.stopHideTimer(),this.stopShowTimer()},stopHideTimer(){this.contextMenuHideTimer&&=(clearTimeout(this.contextMenuHideTimer),null)},stopShowTimer(){this.contextMenuShowTimer&&=(clearTimeout(this.contextMenuShowTimer),null)}}}),$P={name:`TimeStudySaveLoadButton`,components:{HoverMenu:D(QP,function(){var e=this,t=e._self._c;return e._self._setupProxy,t(`div`,e._g({staticClass:`hover-menu__wrapper`,on:{contextmenu:function(t){return t.preventDefault(),e.toggleContextMenu.apply(null,arguments)}}},e.listeners),[e._t(`object`),e.contextMenuIsVisible?e._t(`menu`):e._e()],2)},[],!1,null,`96944180`,null,null).exports},props:{saveslot:{type:Number,required:!0}},data(){return{name:``,displayName:``,canEternity:!1}},computed:{preset(){return player.timestudy.presets[this.saveslot-1]}},methods:{update(){this.name=player.timestudy.presets[this.saveslot-1].name,this.displayName=this.name===``?this.saveslot:this.name,this.canEternity=Player.canEternity},nicknameBlur(e){let t=e.target.value.slice(0,4).trim();this.isASCII(t)&&(player.timestudy.presets.map(e=>e.name).includes(t)||(this.preset.name=t,this.name=this.preset.name))},hideContextMenu(){this.$viewModel.currentContextMenu=null},isASCII(e){return!/[^\u0000-\u00FF]/u.test(e)},save(){this.hideContextMenu(),this.preset.studies=GameCache.currentStudyTree.value.exportString;let e=this.name?`Study preset "${this.name}"`:`Study preset`;GameUI.notify.eternity(`${e} saved in slot ${this.saveslot}`)},load(){if(this.hideContextMenu(),this.preset.studies){let e=new TimeStudyTree;e.attemptBuyArray(TimeStudyTree.currentStudies,!1),e.attemptBuyArray(e.parseStudyImport(this.preset.studies),!0),TimeStudyTree.commitToGameState(e.purchasedStudies,!1,e.startEC);let t=this.name?`Study preset "${this.name}"`:`Study preset`;GameUI.notify.eternity(`${t} loaded from slot ${this.saveslot}`)}else Modal.message.show(`This Time Study list currently contains no Time Studies.`)},respecAndLoad(){if(Player.canEternity){player.respec=!0;let e=new TimeStudyTree;e.attemptBuyArray(e.parseStudyImport(this.preset.studies)),animateAndEternity(()=>TimeStudyTree.commitToGameState(e.purchasedStudies,!1,e.startEC))}},deletePreset(){this.hideContextMenu(),this.preset.studies?Modal.studyString.show({id:this.saveslot-1,deleting:!0}):Modal.message.show(`This Time Study list currently contains no Time Studies.`)},handleExport(){this.hideContextMenu(),copyToClipboard(this.preset.studies);let e=this.name?`Study preset "${this.name}"`:`Study preset`;GameUI.notify.eternity(`${e} exported from slot ${this.saveslot} to your clipboard`)},edit(){Modal.studyString.show({id:this.saveslot-1})}}},eF=D($P,function(){var e=this,t=e._self._c;return t(`HoverMenu`,{staticClass:`l-tt-save-load-btn__wrapper`,scopedSlots:e._u([{key:`object`,fn:function(){return[t(`button`,{staticClass:`l-tt-save-load-btn c-tt-buy-button c-tt-buy-button--unlocked`,on:{click:[function(t){return!t.shiftKey||t.ctrlKey||t.altKey||t.metaKey?null:e.save.apply(null,arguments)},function(t){return t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:e.load.apply(null,arguments)}]}},[e._v(` `+e._s(e.displayName)+` `)])]},proxy:!0},{key:`menu`,fn:function(){return[t(`div`,{staticClass:`l-tt-save-load-btn__menu c-tt-save-load-btn__menu`},[t(`span`,{attrs:{"ach-tooltip":`Set a custom name (up to 4 ASCII characters)`}},[t(`input`,{staticClass:`l-tt-save-load-btn__menu-rename c-tt-save-load-btn__menu-rename`,attrs:{type:`text`,size:`4`,maxlength:`4`},domProps:{value:e.name},on:{keyup:function(t){return!t.type.indexOf(`key`)&&e._k(t.keyCode,`esc`,27,t.key,[`Esc`,`Escape`])?null:e.hideContextMenu.apply(null,arguments)},blur:e.nicknameBlur}})]),t(`div`,{staticClass:`l-tt-save-load-btn__menu-item c-tt-save-load-btn__menu-item`,on:{click:e.edit}},[e._v(` Edit `)]),t(`div`,{staticClass:`l-tt-save-load-btn__menu-item c-tt-save-load-btn__menu-item`,on:{click:e.handleExport}},[e._v(` Export `)]),t(`div`,{staticClass:`l-tt-save-load-btn__menu-item c-tt-save-load-btn__menu-item`,on:{click:e.save}},[e._v(` Save `)]),t(`div`,{staticClass:`l-tt-save-load-btn__menu-item`},[t(`div`,{staticClass:`c-tt-save-load-btn__menu-item`,on:{click:e.load}},[e._v(` Load `)]),t(`div`,{staticClass:`c-tt-save-load-btn__menu-item__hover-options`},[t(`div`,{class:{"c-tt-save-load-btn__menu-item__hover-option":!0,"c-tt-save-load-btn__menu-item__hover-option--disabled":!e.canEternity},on:{click:e.respecAndLoad}},[e._v(` Respec and Load `)])])]),t(`div`,{staticClass:`l-tt-save-load-btn__menu-item c-tt-save-load-btn__menu-item`,on:{click:e.deletePreset}},[e._v(` Delete `)])])]},proxy:!0}])})},[],!1,null,`c5080b0f`,null,null).exports,tF={props:{budget:Decimal,cost:Decimal,formatCost:{type:Function,required:!0},action:{type:Function,required:!0}},data(){return{isLocked:!1}},computed:{isEnabled(){return this.isLocked?!1:this.budget.gte(this.cost)},enabledClass(){return!this.isEnabled||this.isLocked?`c-tt-buy-button--locked`:`c-tt-buy-button--unlocked`}},methods:{update(){this.isLocked=player.eternities.eq(0)}}},nF=D(tF,function(){var e=this,t=e._self._c;return t(`button`,{staticClass:`l-tt-buy-button c-tt-buy-button`,class:e.enabledClass,on:{click:e.action}},[e._v(` `+e._s(e.isLocked?`Requires an Eternity to unlock`:e.formatCost(e.cost))+` `)])},[],!1,null,null,null,null).exports,rF=r({name:`TimeTheoremShop`,components:{PrimaryToggleButton:R,TimeTheoremBuyButton:nF,TimeStudySaveLoadButton:eF},data(){return{theoremAmount:new Decimal,theoremGeneration:new Decimal,totalTimeTheorems:new Decimal,shopMinimized:!1,minimizeAvailable:!1,hasTTAutobuyer:!1,isAutobuyerOn:!1,budget:{am:new Decimal,ip:new Decimal,ep:new Decimal},costs:{am:new Decimal,ip:new Decimal,ep:new Decimal},showST:!1,STamount:0,hasTTGen:!1,showTTGen:!1,invertTTgenDisplay:!1}},computed:{minimized(){return this.minimizeAvailable&&this.shopMinimized},formatTimeTheoremType(){return this.theoremAmount.gte(1e6)?format:!(Teresa.isRunning||Enslaved.isRunning)&&getAdjustedGlyphEffect(`dilationTTgen`).gt(0)&&!DilationUpgrade.ttGenerator.isBought?formatFloat:formatInt},TTgenRateText(){return this.theoremGeneration.lt(1/3600)?`one TT every ${TimeSpan.fromSeconds(this.theoremGeneration.reciprocal()).toStringShort(!1)}`:this.theoremGeneration.lt(.1)?`${format(this.theoremGeneration.times(3600),2,2)} TT/hour`:`${format(this.theoremGeneration,2,2)} TT/sec`},totalTimeTheoremText(){return`${quantify(`total Time Theorem`,this.totalTimeTheorems,2,2,this.formatTimeTheoremType)}`},minimizeArrowStyle(){return{transform:this.minimized?`rotate(-180deg)`:``,transition:`all 0.25s ease-out`}},saveLoadText(){return this.$viewModel.shiftDown?`Save:`:`Load:`},shopBottomRowHeightStyle(){return{height:this.hasTTAutobuyer?`6.7rem`:`4.4rem`}}},watch:{isAutobuyerOn(e){Autobuyer.timeTheorem.isActive=e},invertTTgenDisplay(e){player.options.invertTTgenDisplay=e}},methods:{minimize(){player.timestudy.shopMinimized=!player.timestudy.shopMinimized},formatAM(e){return`${format(e)} AM`},buyWithAM(){TimeTheorems.buyOne(!1,`am`)},formatIP(e){return`${format(e)} IP`},buyWithIP(){TimeTheorems.buyOne(!1,`ip`)},formatEP(e){return`${format(e,2,0)} EP`},buyWithEP(){TimeTheorems.buyOne(!1,`ep`)},buyMaxTheorems(){TimeTheorems.buyMax(!1)},update(){this.theoremAmount.copyFrom(Currency.timeTheorems),this.theoremGeneration.copyFrom(getTTPerSecond().times(getGameSpeedupForDisplay())),this.totalTimeTheorems.copyFrom(Currency.timeTheorems.max),this.shopMinimized=player.timestudy.shopMinimized,this.hasTTAutobuyer=Autobuyer.timeTheorem.isUnlocked,this.isAutobuyerOn=Autobuyer.timeTheorem.isActive,this.minimizeAvailable=DilationUpgrade.ttGenerator.isBought||this.hasTTAutobuyer;let e=this.budget;e.am.copyFrom(TimeTheoremPurchaseType.am.currency),e.ip.copyFrom(TimeTheoremPurchaseType.ip.currency),e.ep.copyFrom(TimeTheoremPurchaseType.ep.currency);let t=this.costs;t.am.copyFrom(TimeTheoremPurchaseType.am.cost),t.ip.copyFrom(TimeTheoremPurchaseType.ip.cost),t.ep.copyFrom(TimeTheoremPurchaseType.ep.cost),this.showST=V.spaceTheorems>0&&!Pelle.isDoomed,this.STamount=V.availableST,this.hasTTGen=this.theoremGeneration.gt(0),this.showTTGen=this.hasTTGen&&ui.view.shiftDown===this.invertTTgenDisplay,this.invertTTgenDisplay=player.options.invertTTgenDisplay},toggleTTgen(){this.invertTTgenDisplay=!this.invertTTgenDisplay}}}),iF=D(rF,function(){var e=this,t=e._self._c;return e._self._setupProxy,t(`div`,{staticClass:`time-theorem-buttons`},[t(`div`,{staticClass:`ttshop-container ttshop-background`},[t(`div`,{staticClass:`ttbuttons-row ttbuttons-top-row`,attrs:{"data-role":`page`}},[e._m(0),t(`p`,{staticClass:`timetheorems`},[t(`span`,{staticClass:`c-tt-amount`},[e._v(` `+e._s(e.quantify(`Time Theorem`,e.theoremAmount,2,0,e.formatTimeTheoremType))+` `)]),e.showST?t(`span`,[t(`br`),e._v(` `+e._s(e.quantifyInt(`Space Theorem`,e.STamount))+` `)]):e._e()]),t(`div`,{staticClass:`l-load-tree-area`},[t(`div`,{staticClass:`l-tree-load-button-wrapper`},[t(`span`,{staticClass:`c-ttshop__save-load-text`},[e._v(e._s(e.saveLoadText))]),e._l(6,function(e){return t(`TimeStudySaveLoadButton`,{key:e,attrs:{saveslot:e}})})],2),t(`div`,{staticClass:`tt-gen-container`},[e.hasTTGen?t(`span`,{staticClass:`checkbox-margin`,attrs:{"ach-tooltip":`This shows TT generation by default and total TT if you hold shift.
              Check this box to swap this behavior.`}},[t(`input`,{directives:[{name:`model`,rawName:`v-model`,value:e.invertTTgenDisplay,expression:`invertTTgenDisplay`}],staticClass:`o-clickable`,attrs:{type:`checkbox`},domProps:{value:e.invertTTgenDisplay,checked:Array.isArray(e.invertTTgenDisplay)?e._i(e.invertTTgenDisplay,e.invertTTgenDisplay)>-1:e.invertTTgenDisplay},on:{input:function(t){return e.toggleTTgen()},change:function(t){var n=e.invertTTgenDisplay,r=t.target,i=!!r.checked;if(Array.isArray(n)){var a=e.invertTTgenDisplay,o=e._i(n,a);r.checked?o<0&&(e.invertTTgenDisplay=n.concat([a])):o>-1&&(e.invertTTgenDisplay=n.slice(0,o).concat(n.slice(o+1)))}else e.invertTTgenDisplay=i}}})]):e._e(),e.showTTGen?t(`span`,[e._v(` You are gaining `+e._s(e.TTgenRateText)+`. `)]):t(`span`,[e._v(` You have `+e._s(e.totalTimeTheoremText)+`. `)])])])]),e.minimized?t(`div`,{staticClass:`ttbuttons-row ttbuttons-bottom-row-hide`}):t(`div`,{staticClass:`ttbuttons-row`,style:e.shopBottomRowHeightStyle},[t(`TimeTheoremBuyButton`,{attrs:{budget:e.budget.am,cost:e.costs.am,"format-cost":e.formatAM,action:e.buyWithAM}}),t(`TimeTheoremBuyButton`,{attrs:{budget:e.budget.ip,cost:e.costs.ip,"format-cost":e.formatIP,action:e.buyWithIP}}),t(`TimeTheoremBuyButton`,{attrs:{budget:e.budget.ep,cost:e.costs.ep,"format-cost":e.formatEP,action:e.buyWithEP}}),t(`div`,{staticClass:`l-tt-buy-max-vbox`},[e.minimized?e._e():t(`button`,{staticClass:`o-tt-top-row-button c-tt-buy-button c-tt-buy-button--unlocked`,on:{click:e.buyMaxTheorems}},[e._v(` Buy max `)]),!e.minimized&&e.hasTTAutobuyer?t(`PrimaryToggleButton`,{staticClass:`o-tt-autobuyer-button c-tt-buy-button c-tt-buy-button--unlocked`,attrs:{label:`Auto:`},model:{value:e.isAutobuyerOn,callback:function(t){e.isAutobuyerOn=t},expression:`isAutobuyerOn`}}):e._e()],1)],1)]),e.minimizeAvailable?t(`button`,{staticClass:`ttshop-minimize-btn ttshop-background`,on:{click:e.minimize}},[t(`span`,{staticClass:`minimize-arrow`,style:e.minimizeArrowStyle},[e._v(`▼`)])]):e._e()])},[function(){var e=this,t=e._self._c;return e._self._setupProxy,t(`button`,{staticClass:`l-tt-save-load-btn c-tt-buy-button c-tt-buy-button--unlocked`,attrs:{onClick:`Modal.preferredTree.show()`}},[t(`i`,{staticClass:`fas fa-cog`})])}],!1,null,`9c11cf21`,null,null).exports,aF=r({name:`GameUiComponentFixed`,components:{HowToPlay:LP,TimeTheoremShop:iF,ModernSidebar:GP,SaveTimer:YP,SpeedrunStatus:ZP,PopupModal:JP,ModalProgressBar:BP,CelestialQuoteModal:PP,CelestialQuoteHistoryDisplay:jP,FadeAway:IP,CreditsContainer:FP,SpectateGame:XP,NewGame:KP},data(){return{ending:!1}},computed:{view(){return this.$viewModel},hideIfMatoFullscreen(){return{visibility:ui.view.tabs.reality.automator.fullScreen?`hidden`:`visible`}}},methods:{update(){this.ending=GameEnd.endState>=END_STATE_MARKERS.FADE_AWAY&&!GameEnd.creditsClosed}}}),oF=D(aF,function(){var e=this,t=e._self._c;return e._self._setupProxy,t(`div`,{staticClass:`c-game-ui--fixed`,attrs:{id:`ui-fixed`}},[t(`div`,{staticClass:`l-notification-container`,attrs:{id:`notification-container`}}),t(`HowToPlay`,{style:e.hideIfMatoFullscreen}),e.view.subtab===`studies`||e.view.subtab===`masteryStudies`?t(`TimeTheoremShop`,{staticClass:`l-time-studies-tab__tt-shop`}):e._e(),e.view.newUI&&e.view.theme!==`S12`?t(`ModernSidebar`,{style:e.hideIfMatoFullscreen}):e._e(),t(`SaveTimer`,{style:e.hideIfMatoFullscreen}),t(`SpeedrunStatus`,{style:e.hideIfMatoFullscreen}),e.view.theme===`S12`?e._e():[e.view.modal.progressBar?t(`ModalProgressBar`):e.view.quotes.current?t(`CelestialQuoteModal`,{attrs:{quote:e.view.quotes.current}}):e.view.quotes.history?t(`CelestialQuoteHistoryDisplay`,{attrs:{quotes:e.view.quotes.history}}):e.view.modal.current?t(`PopupModal`,{attrs:{modal:e.view.modal.current}}):e._e(),e.view.modal.progressBar?t(`ModalProgressBar`):e._e(),e.ending?t(`FadeAway`):e._e(),e.ending?t(`CreditsContainer`):e._e(),e.ending?t(`NewGame`):e._e(),t(`SpectateGame`)]],2)},[],!1,null,`9f6e9361`,null,null).exports,sF=r({name:`ModernUi`,components:{BigCrunchButton:PN,HeaderChallengeDisplay:BN,HeaderChallengeEffects:VN,NewsTicker:hP,HeaderBlackHole:LN,HeaderPrestigeGroup:fP,GameSpeedDisplay:GN},data(){return{bigCrunch:!1,hasReality:!1,newGameKey:``}},computed:{news(){return this.$viewModel.news},topMargin(){return this.$viewModel.news?``:`margin-top: 3.9rem`}},methods:{update(){this.bigCrunch=!player.break&&Player.canCrunch&&Time.bestInfinityRealTime.totalMinutes.gt(1),this.hasReality=PlayerProgress.realityUnlocked(),this.newGameKey=Pelle.isDoomed},handleClick(){PlayerProgress.infinityUnlocked()?manualBigCrunchResetRequest():Modal.bigCrunch.show()}}}),cF=D(sF,function(){var e=this,t=e._self._c;return e._self._setupProxy,t(`div`,{attrs:{id:`page`}},[t(`link`,{attrs:{rel:`stylesheet`,type:`text/css`,href:`styles/new-ui-styles.css`}}),t(`div`,{key:e.newGameKey,staticClass:`game-container`,style:e.topMargin},[e.news?t(`NewsTicker`):e._e(),t(`BigCrunchButton`),e.bigCrunch?e._e():t(`div`,{staticClass:`tab-container`},[t(`HeaderPrestigeGroup`),t(`div`,{staticClass:`information-header`},[t(`HeaderChallengeDisplay`),t(`HeaderChallengeEffects`),e.hasReality?t(`GameSpeedDisplay`):e._e(),e.hasReality?t(`br`):e._e(),t(`HeaderBlackHole`)],1),e._t(`default`)],2)],1)])},[],!1,null,`fb826c2d`,null,null).exports,lF={entries:[{name:`Windows Media Player`,action(){let e=[`https://www.youtube.com/watch?v=dQw4w9WgXcQ`,`https://youtu.be/rP42C-4zL3w?t=2`,`https://www.youtube.com/watch?v=fTaWKbD3UK8`,`https://www.youtube.com/watch?v=fLbP6qpI1YI`];window.open(e[Math.floor(Math.random()*e.length)])},image:`desktop--windows-media-player.png`},{name:`Discord`,action(){window.open(`https://discord.gg/ST9NaXa`)},image:`desktop--discord-logo.png`},{name:`Games`,action(){Modal.s12Games.show()},image:`desktop--games.png`}],selected:-1},uF=!1,dF=D({name:`DesktopIcons`,data(){return{DesktopIcons:lF}},mounted(){document.body.addEventListener(`click`,this.clearSelected)},beforeDestroy(){document.body.removeEventListener(`click`,this.clearSelected),this.clearSelected()},methods:{clearSelected(){uF||(lF.selected=-1)},handleClick(e){lF.selected===e?lF.entries[e].action():(lF.selected=e,uF=!0,setTimeout(()=>uF=!1,0))}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`c-s12-desktop-icons-container`},e._l(e.DesktopIcons.entries,function(n,r){return t(`div`,{key:n.name,staticClass:`c-s12-desktop-icon`,class:{"c-s12-desktop-icon--selected":e.DesktopIcons.selected===r},on:{click:function(t){return e.handleClick(r)}}},[t(`div`,{staticClass:`c-s12-desktop-icon__inner`},[t(`img`,{staticClass:`c-s12-desktop-icon__img`,attrs:{src:`images/s12/${n.image}`}}),t(`div`,{staticClass:`c-s12-desktop-icon__text`},[e._v(` `+e._s(n.name)+` `)])])])}),0)},[],!1,null,`3362f37c`,null,null).exports,fF;const pF={isMinimised:!1,tabs:{hoveringTab:void 0,setHoveringTab(e){this.hoveringTab=e.id,clearTimeout(fF)},unsetHoveringTab(e=!1){if(e){this.hoveringTab=void 0;return}fF=setTimeout(()=>this.hoveringTab=void 0,1e3)},tabButtonPositions:[]}};var mF=D({name:`S12Ui`,components:{BigCrunchButton:PN,HeaderChallengeDisplay:BN,HeaderChallengeEffects:VN,NewsTicker:hP,HeaderBlackHole:LN,HeaderPrestigeGroup:fP,GameSpeedDisplay:GN,GameUiComponentFixed:oF,BackgroundAnimations:NN},data(){return{bigCrunch:!1,hasReality:!1,newGameKey:``,tabName:``,S12Windows:pF}},computed:{news(){return this.$viewModel.news},topPadding(){return this.$viewModel.news?``:`padding-top: 3.9rem`},isOldUi(){return!this.$viewModel.newUI}},methods:{update(){this.bigCrunch=!player.break&&Player.canCrunch&&Time.bestInfinityRealTime.totalMinutes.gt(1),this.hasReality=PlayerProgress.realityUnlocked(),this.newGameKey=Pelle.isDoomed,this.tabName=Tabs.current[this.$viewModel.subtab].name}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`c-s12-window__outer`,class:e.S12Windows.isMinimised?`c-s12-window__outer--minimised`:``,attrs:{id:`page`}},[t(`link`,{attrs:{rel:`stylesheet`,type:`text/css`,href:e.isOldUi?`styles/old-ui.css`:`styles/new-ui-styles.css`}}),t(`span`,{staticClass:`c-s12-close-button`,on:{click:function(t){e.S12Windows.isMinimised=!0}}}),t(`span`,{staticClass:`c-modal__title`},[e._v(` `+e._s(e.tabName)+` `)]),t(`div`,{key:e.newGameKey,staticClass:`game-container c-s12-window__inner`,class:e.isOldUi?`c-old-ui l-old-ui`:``,style:e.topPadding},[t(`GameUiComponentFixed`),t(`BackgroundAnimations`),t(`div`,{staticClass:`c-s12-window__content-container`},[e.news?t(`NewsTicker`):e._e(),t(`BigCrunchButton`),e.bigCrunch?e._e():t(`div`,{staticClass:`tab-container`},[t(`HeaderPrestigeGroup`),t(`div`,{staticClass:`information-header`},[t(`HeaderChallengeDisplay`),t(`HeaderChallengeEffects`),e.hasReality?t(`GameSpeedDisplay`):e._e(),e.hasReality?t(`br`):e._e(),t(`HeaderBlackHole`)],1),e._t(`default`)],2)],1)],1)])},[],!1,null,`2db9e4c1`,null,null).exports,hF={name:`S12Subtabs`,props:{tab:{type:Object,required:!0}},data(){return{isAvailable:!0,isHidden:!1,subtabVisibilities:[],tabName:``,S12Windows:pF,windowWidth:0,left:`0px`,useCompact:!1}},methods:{update(){this.isAvailable=this.tab.isAvailable,this.isHidden=this.tab.isHidden,this.subtabVisibilities=this.tab.subtabs.map(e=>e.isAvailable),this.windowWidth=window.innerWidth,this.useCompact=this.subtabVisibilities.reduce((e,t)=>e+t)*180>window.innerWidth-10,this.left=this.getSubtabsPosition()},isCurrentSubtab(e){return player.options.lastOpenSubtab[this.tab.id]===e&&!pF.isMinimised},getSubtabsPosition(){if(!this.$refs.subtabs)return`0px`;let e=pF.tabs.tabButtonPositions[this.tab.id],t=5+this.$refs.subtabs.offsetWidth/2,n=this.windowWidth-t;return this.isAvailable,this.isHidden,`${Math.clamp(e,t,n)}px`}}},gF=D(hF,function(){var e=this,t=e._self._c;return t(`div`,{ref:`subtabs`,staticClass:`c-s12-subtabs`,class:{"c-s12-subtabs--show":e.S12Windows.tabs.hoveringTab===e.tab.id,"c-s12-subtabs--compact":e.useCompact},style:{left:e.left},on:{mouseenter:function(t){return e.S12Windows.tabs.setHoveringTab(e.tab)},mouseleave:function(t){return e.S12Windows.tabs.unsetHoveringTab()}}},[e._l(e.tab.subtabs,function(n,r){return[e.subtabVisibilities[r]?t(`div`,{key:r,staticClass:`c-s12-subtab-btn`,class:{"c-s12-subtab-btn--active":e.isCurrentSubtab(n.id)},on:{click:function(t){n.show(!0),e.S12Windows.isMinimised=!1,e.S12Windows.tabs.unsetHoveringTab(!0)}}},[t(`span`,{staticClass:`c-s12-subtab-btn__text`},[e.useCompact?t(`span`,{staticClass:`c-s12-subtab-btn__symbol--small`,domProps:{innerHTML:e._s(n.symbol)}}):e._e(),e._v(` `+e._s(n.name)+` `)]),e.useCompact?e._e():t(`span`,{staticClass:`c-s12-subtab-btn__symbol`,domProps:{innerHTML:e._s(n.symbol)}}),n.hasNotification?t(`div`,{staticClass:`fas fa-circle-exclamation l-notification-icon`}):e._e()]):e._e()]})],2)},[],!1,null,`b6ed341a`,null,null).exports,_F={name:`TaskbarIcon`,props:{tab:{type:Object,required:!0},tabPosition:{type:Number,required:!0}},data(){return{isAvailable:!0,isHidden:!1,hasNotification:!1,tabName:``,S12Windows:pF}},computed:{isCurrentTab(){return this.tab.isOpen&&!pF.isMinimised}},methods:{update(){this.isAvailable=this.tab.isAvailable,this.isHidden=this.tab.isHidden,this.hasNotification=this.tab.hasNotification,this.tabPosition<Pelle.endTabNames.length?this.tabName=Pelle.transitionText(this.tab.name,Pelle.endTabNames[this.tabPosition],Math.clamp(GameEnd.endState-this.tab.id%4/10,0,1)):this.tabName=this.tab.name,pF.tabs.tabButtonPositions[this.tab.id]=this.getSubtabsPosition()},getSubtabsPosition(){return this.$refs.taskbarIcon?this.$refs.taskbarIcon.offsetLeft+this.$refs.taskbarIcon.offsetWidth/2:`0px`}}},vF=D(_F,function(){var e=this,t=e._self._c;return t(`div`,{ref:`taskbarIcon`,class:{"c-taskbar-icon":!0,"c-taskbar-icon--active":e.isCurrentTab},attrs:{title:e.tab.name},on:{mouseenter:function(t){return e.S12Windows.tabs.setHoveringTab(e.tab)},mouseleave:function(t){return e.S12Windows.tabs.unsetHoveringTab()},click:function(t){e.tab.show(!0),e.S12Windows.isMinimised=!1,e.S12Windows.tabs.unsetHoveringTab(!0)}}},[t(`img`,{staticClass:`c-taskbar-icon__image`,attrs:{src:`images/s12/${e.tab.key}.png`}}),e.hasNotification?t(`div`,{staticClass:`fas fa-circle-exclamation l-notification-icon`}):e._e()])},[],!1,null,`fb949d47`,null,null).exports,yF=`/NG-plus-3/images/s12/win7-start-menu-inactive.png`,bF=new Audio(`audio/s12-startup.mp3`),xF=D({name:`S12Taskbar`,components:{TaskbarIcon:vF,S12Subtabs:gF},data(){return{isHidden:!1,tabVisibilities:[],S12Windows:pF,startupSound:bF}},computed:{tabs:()=>Tabs.newUI},methods:{update(){this.isHidden=AutomatorData.isEditorFullscreen,this.tabVisibilities=Tabs.newUI.map(e=>!e.isHidden&&e.isAvailable)}}},function(){var e=this,t=e._self._c;return e.isHidden?e._e():t(`span`,[t(`div`,{staticClass:`c-taskbar`},[t(`img`,{staticClass:`c-start-icon`,attrs:{src:yF},on:{click:function(t){return e.startupSound.play()}}}),e._l(e.tabs,function(n,r){return[e.tabVisibilities[r]?t(`TaskbarIcon`,{key:n.name,attrs:{tab:n,"tab-position":r}}):e._e()]}),t(`div`,{staticClass:`c-s12-show-desktop`,on:{click:function(t){e.S12Windows.isMinimised=!0}}})],2),e._l(e.tabs,function(n,r){return[e.tabVisibilities[r]?t(`S12Subtabs`,{key:n.name,attrs:{tab:n}}):e._e()]})],2)},[],!1,null,`6ddda152`,null,null).exports,SF=D({name:`S12UiFixed`,components:{PopupModal:JP,ModalProgressBar:BP,CelestialQuoteModal:PP,CelestialQuoteHistoryDisplay:jP,FadeAway:IP,CreditsContainer:FP,SpectateGame:XP,NewGame:KP,S12Taskbar:xF},data(){return{ending:!1}},computed:{view(){return this.$viewModel}},methods:{update(){this.ending=GameEnd.endState>=END_STATE_MARKERS.FADE_AWAY&&!GameEnd.creditsClosed}}},function(){var e=this,t=e._self._c;return t(`span`,[t(`div`,{staticClass:`c-game-ui--fixed`},[e.view.modal.progressBar?t(`ModalProgressBar`):e.view.quotes.current?t(`CelestialQuoteModal`,{attrs:{quote:e.view.quotes.current}}):e.view.quotes.history?t(`CelestialQuoteHistoryDisplay`,{attrs:{quotes:e.view.quotes.history}}):e.view.modal.current?t(`PopupModal`,{attrs:{modal:e.view.modal.current}}):e._e(),e.ending?t(`FadeAway`):e._e(),e.ending?t(`CreditsContainer`):e._e(),e.ending?t(`NewGame`):e._e(),t(`SpectateGame`)],1),t(`S12Taskbar`)],1)},[],!1,null,`a5ce9d1c`,null,null).exports,CF=class{constructor(e,t,n=0){this._resources=AlchemyResources.all.filter(t=>t.config.tier===e).sort((e,t)=>e.config.uiOrder-t.config.uiOrder),this._radius=t,this._angleOffset=n}get radius(){return this._radius}get nodes(){let e=[],t=Math.PI_2/this._resources.length,n=this._angleOffset;for(let r of this._resources)e.push({resource:r,x:this._radius*Math.sin(n),y:this._radius*Math.cos(n)}),n+=t;return e}},wF=class{constructor(){this.orbits=[new CF(1,4,-Math.PI/3),new CF(2,3),new CF(3,2,Math.PI/3),new CF(4,1,-Math.PI/6),new CF(5,0)];let e=[];for(let t of this.orbits.map(e=>e.nodes))e.push(...t);let t=Decimal.max(e.map(e=>Math.abs(e.x)).max(),e.map(e=>Math.abs(e.y)).max()).toNumber()*2;for(let n of e)n.x=(n.x/t+.5)*100,n.y=(n.y/t+.5)*100;let n=[];for(let t of AlchemyReactions.all.compact()){let r=e.find(e=>e.resource===t.product),i=t.reagents.map(t=>e.find(e=>e.resource===t.resource));for(let e of i)n.push({reaction:t,reagent:e,product:r})}this.reactionArrows=n,this.nodes=e,this.size=t}},TF={name:`AlchemyResourceArc`,props:{resource:{type:Object,required:!0},classObject:{type:Object,required:!0}},data(){return{fillFraction:0}},computed:{spinnerTransform(){return{transform:`rotate(${this.fillFraction*360}deg)`,background:this.fillFraction===1?`#ff9800`:void 0}},fillerTransform(){return{opacity:this.fillFraction>.5?1:0,background:this.fillFraction===1?`#ff9800`:void 0}},maskTransform(){return{opacity:this.fillFraction>.5?0:1}}},methods:{update(){this.fillFraction=this.resource.fillFraction}}},EF=D(TF,function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`o-alchemy-resource-arc-wrapper`},[t(`div`,{staticClass:`o-alchemy-resource-arc-spinner o-alchemy-resource-arc-circle`,style:e.spinnerTransform}),t(`div`,{staticClass:`o-alchemy-resource-arc-filler o-alchemy-resource-arc-circle`,style:e.fillerTransform}),t(`div`,{staticClass:`o-alchemy-resource-arc-mask`,style:e.maskTransform}),t(`div`,{staticClass:`o-alchemy-node-mask`,class:e.classObject},[e._v(` `+e._s(e.resource.symbol)+` `)])])},[],!1,null,`1407354e`,null,null).exports,DF={name:`AlchemyCircleNode`,components:{HintText:me,AlchemyResourceArc:EF},props:{node:{type:Object,required:!0},isFocused:{type:Boolean,required:!1,default:!1}},data(){return{isReactionActive:!1,amount:new Decimal,flow:new Decimal,isUnlocked:!1}},computed:{resource(){return this.node.resource},isBaseResource(){return this.resource.isBaseResource},layoutStyle(){let e=Decimal.clamp(Decimal.sqrt(Decimal.abs(this.flow)).mul(.7),0,1).toNumber();return{left:`${this.node.x}%`,top:`${this.node.y}%`,"box-shadow":`0 0 0.3rem 0.3rem
          rgba(${this.flow.gt(0)?`156, 204, 101`:`204, 102, 102`}, ${e})`}},classObject(){return{"o-alchemy-node--base":this.isBaseResource,"o-alchemy-node--active":this.isReactionActive,"o-alchemy-node--unfocused":!this.isFocused,"o-alchemy-node--locked":!this.isUnlocked}},hintClassObject(){return this.isFocused?void 0:`o-hint-text--alchemy-node--unfocused`}},methods:{update(){this.isReactionActive=!Pelle.isDoomed&&!this.isBaseResource&&this.node.resource.reaction.isActive,this.amount.copyFrom(this.resource.amount),this.flow.copyFrom(new Decimal(this.resource.flow)),this.isUnlocked=this.resource.isUnlocked}}},OF=D(DF,function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`o-alchemy-node`,class:e.classObject,style:e.layoutStyle,on:{mouseenter:function(t){return e.$emit(`mouseenter`)},mouseleave:function(t){return e.$emit(`mouseleave`)},click:e.emitClick}},[t(`AlchemyResourceArc`,{attrs:{resource:e.resource,"class-object":e.classObject}}),e.isUnlocked?t(`span`,[t(`HintText`,{staticClass:`o-hint-text--alchemy-node l-hint-text--alchemy-node`,class:e.hintClassObject,attrs:{type:`alchemy`}},[e._v(` `+e._s(e.formatInt(e.amount))+` `)])],1):e._e()],1)},[],!1,null,`b96730b0`,null,null).exports,kF={name:`AlchemyResourceInfo`,components:{EffectDisplay:c},props:{resource:{type:Object,required:!0}},data(){return{amount:new Decimal,cap:new Decimal,capped:!1,flow:new Decimal,isReactionActive:!1,reactionProduction:new Decimal,isUnlocked:!1,unlockRequirement:``}},computed:{classObject(){return{"c-alchemy-resource-info":!0,"c-alchemy-resource-info--locked":!this.isUnlocked}},reaction(){return this.resource.reaction},isBaseResource(){return this.resource.isBaseResource},reactionText(){return this.resource===AlchemyResource.reality?this.realityReactionText:`${this.reaction.reagents.map(e=>`${format(e.cost)}${e.resource.symbol}`).join(` + `)} ➜ ${format(this.reactionProduction,2,2)}${this.resource.symbol}`},realityReactionText(){return`${this.reaction.reagents.map(e=>e.resource.symbol).join(` + `)} ➜ ${this.resource.symbol}`},effectConfig(){let e=this.resource;return{effect:()=>e.effectValue,formatEffect:e.config.formatEffect}},resourceAmount(){return formatFloat(this.amount,1)},resourceCap(){return formatFloat(this.cap,1)},formattedFlow(){let e=this.flow.gte(0)?`+`:`-`;if(Decimal.abs(this.flow).lt(.01))return`None`;let t=`${e}${format(Decimal.abs(this.flow),2,2)}/sec`;return`<span style="color:#${this.flow.gt(0)?`9CCC65`:`CC6666`}">${t}</span>`},isDoomed:()=>Pelle.isDoomed},methods:{update(){let e=this.resource;this.amount.copyFrom(e.amount),this.cap.copyFrom(e.cap),this.capped=e.capped,this.flow.copyFrom(new Decimal(e.flow)),this.isUnlocked=e.isUnlocked,this.unlockRequirement=e.lockText,this.isBaseResource||(this.isReactionActive=!this.isDoomed&&this.reaction.isActive,this.reactionProduction.copyFrom(this.reaction.reactionProduction))}}},AF=D(kF,function(){var e=this,t=e._self._c;return e.isUnlocked?t(`div`,{class:e.classObject},[t(`span`,{staticClass:`c-alchemy-resource-info__title`},[e._v(` `+e._s(e.resource.symbol)+` `+e._s(e.resource.name)+` `+e._s(e.resource.symbol)+` `)]),e.isDoomed?t(`span`,[e._v(` Destroyed by Pelle `)]):t(`span`,[e._v(` `+e._s(e.capped?`Capped`:`Current`)+`: `+e._s(e.resourceAmount)+`/`+e._s(e.resourceCap)+` (Recent change: `),t(`span`,{domProps:{innerHTML:e._s(e.formattedFlow)}}),e._v(`) `)]),e.isBaseResource?t(`span`,[e._v(`Base Resource`)]):t(`span`,[e._v(`Reaction: `+e._s(e.isReactionActive?`Active`:`Inactive`)+` (`+e._s(e.reactionText)+`)`)]),t(`span`,{class:{"o-pelle-disabled":e.isDoomed}},[t(`EffectDisplay`,{attrs:{label:`Effect`,config:e.effectConfig}})],1)]):t(`div`,{class:e.classObject},[e._v(` Unlock requirement: `+e._s(e.unlockRequirement)+` `)])},[],!1,null,`3eba222a`,null,null).exports,jF=D({name:`AlchemyTab`,components:{PrimaryButton:L,AlchemyCircleNode:OF,AlchemyResourceInfo:AF},data(){return{infoResourceId:0,focusedResourceId:-1,reactionsAvailable:!1,realityCreationVisible:!1,animationTimer:0,alchemyCap:0,capFactor:new Decimal,createdRealityGlyph:!1,allReactionsDisabled:!1,realityAmount:0}},computed:{resources:()=>AlchemyResources.all,layout:()=>new wF,sizeMultiplier:()=>5,infoResource(){return this.resources[this.infoResourceId]},circleStyle(){let e=this.layout.size*this.sizeMultiplier;return{width:`${e}rem`,height:`${e}rem`,opacity:this.isDoomed?.8:1}},orbitClass(){return this.focusedResourceId===-1||this.isDoomed?void 0:`o-alchemy-orbit--unfocused`},realityGlyphCreationClass(){return{"o-primary-btn--subtab-option":!0,"tutorial--glow":!this.createdRealityGlyph}},reactions(){return AlchemyReactions.all.compact().filter(e=>e.product.isUnlocked)},isDoomed(){return Pelle.isDoomed},pelleSymbol(){return Pelle.symbol}},methods:{update(){this.reactionsAvailable=structuredClone(AlchemyResources.all.some(e=>!e.isBaseResource&&e.isUnlocked).length>0),this.realityCreationVisible=Ra.pets.effarig.level===25,this.animationTimer+=35,this.alchemyCap=Ra.alchemyResourceCap,this.capFactor=new Decimal(GlyphSacrificeHandler.glyphRefinementEfficiency).recip(),this.createdRealityGlyph=player.reality.glyphs.createdRealityGlyph,this.allReactionsDisabled=this.reactions.every(e=>!e.isActive),this.realityAmount=structuredClone(AlchemyResource.reality.amount.max(1e200).toNumber())},orbitSize(e){let t=this.layout.orbits.map(e=>e.radius).nMax(),n=Decimal.clampMax(e.radius,1e100);return n=n.toNumber(),`${n/t*50}%`},handleMouseEnter(e){this.infoResourceId=e.resource.id,e.resource.isUnlocked&&(this.focusedResourceId=e.resource.id)},handleMouseLeave(){this.focusedResourceId=-1},handleClick(e){let t=e.resource;if(t.isUnlocked){if(this.infoResourceId!==t.id){this.infoResourceId=t.id,this.focusedResourceId=t.id;return}t.isBaseResource||(t.reaction.isActive=!t.reaction.isActive,GameUI.update())}},isUnlocked(e){return e.product.resource.isUnlocked&&e.reagent.resource.isUnlocked},isCapped(e){let t=e.reagent.resource,n=e.product.resource;return n.amount.gt(0)&&n.amount.lte(t.amount)||n.amount.gte(n.cap)},isLessThanRequired(e){return e.product.resource.amount.gt(0)&&Decimal.lt(e.reagent.cost,e.reagent.resource.cap)},isActiveReaction(e){return e.reaction.isActive&&!this.isDoomed},isFocusedReaction(e){return this.isDoomed?!1:this.isUnlocked(e)&&(e.product.resource.id===this.focusedResourceId||e.reagent.resource.id===this.focusedResourceId)},isDisplayed(e){return this.isUnlocked(e)&&(this.isActiveReaction(e)||this.isFocusedReaction(e))},isFocusedNode(e){if(this.focusedResourceId===-1||this.isDoomed)return!0;let t=this.resources[this.focusedResourceId];return t===e.resource?!0:t.reaction?.reagents.some(t=>t.resource===e.resource)||e.resource.reaction?.reagents.some(e=>e.resource===t)},reactionArrowPositions(e){if(!this.isDisplayed(e)||this.isCapped(e))return;let t=e.reagent.x,n=e.reagent.y,r=e.product.x,i=e.product.y,a=Math.sqrt((r-t)**2+(i-n)**2),o=a*40,s=this.animationTimer%o/o,c=Math.max(0,s+2/a),l=Math.min(1,s-2/a);return{x1:`${t*(1-c)+r*c}%`,y1:`${n*(1-c)+i*c}%`,x2:`${t*(1-l)+r*l}%`,y2:`${n*(1-l)+i*l}%`}},reactionArrowPaths(e){return{x1:`${e.reagent.x}%`,y1:`${e.reagent.y}%`,x2:`${e.product.x}%`,y2:`${e.product.y}%`}},reactionPathClass(e){return{"o-alchemy-reaction-path":this.isUnlocked(e),"o-alchemy-reaction-path--capped":this.isCapped(e)&&this.isDisplayed(e),"o-alchemy-reaction-path--less-than-required":this.isLessThanRequired(e)&&this.isDisplayed(e),"o-alchemy-reaction-path--focused":!this.isCapped(e)&&this.isFocusedReaction(e),"o-alchemy-reaction-path--not-focused":!this.isFocusedReaction(e)&&this.focusedResourceId!==-1,"o-alchemy-reaction-path--doomed":this.isDoomed}},reactionArrowClass(e){return{"o-alchemy-reaction-arrow":!this.isCapped(e)&&this.isDisplayed(e),"o-alchemy-reaction-arrow--focused":this.isFocusedReaction(e)}},showAlchemyHowTo(){ui.view.h2pForcedTab=GameDatabase.h2p.tabs.filter(e=>e.name===`Glyph Alchemy`)[0],Modal.h2p.show()},toggleAllReactions(){let e=this.allReactionsDisabled;for(let t of this.reactions)t.isActive=e},nodeClass(e){let t=e.resource;return{"o-clickable":t.isUnlocked&&!t.isBaseResource&&!this.isDoomed}}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-ra-alchemy-tab`},[t(`div`,{staticClass:`c-subtab-option-container`},[t(`PrimaryButton`,{staticClass:`o-primary-btn--subtab-option`,on:{click:e.showAlchemyHowTo}},[e._v(` Click for alchemy info `)]),e.isDoomed?e._e():t(`PrimaryButton`,{staticClass:`o-primary-btn--subtab-option`,on:{click:e.toggleAllReactions}},[e._v(` `+e._s(e.allReactionsDisabled?`Enable`:`Disable`)+` all reactions `)]),e.realityCreationVisible?t(`PrimaryButton`,{class:e.realityGlyphCreationClass,attrs:{onclick:`Modal.realityGlyph.show()`}},[e._v(` View Reality Glyph creation `)]):e._e()],1),t(`AlchemyResourceInfo`,{key:e.infoResourceId,attrs:{resource:e.infoResource}}),t(`br`),e._v(` Glyphs can now be refined using your Glyph filter in the Glyphs tab. `),t(`br`),e._v(` When refining a Glyph, it will only give you resources up to a cap of `+e._s(e.formatX(e.capFactor))+` its highest refinement value. `),e.reactionsAvailable?t(`span`,[e._v(` Reactions trigger once every time you Reality, unaffected by amplification from stored real time. `)]):e._e(),t(`div`,{staticClass:`l-alchemy-circle`,style:e.circleStyle},[e.isDoomed?t(`span`,{staticClass:`c-pelle-symbol-overlay`,domProps:{innerHTML:e._s(e.pelleSymbol)}}):e._e(),t(`svg`,{staticClass:`l-alchemy-orbit-canvas`},e._l(e.layout.orbits,function(n,r){return t(`circle`,{key:r,staticClass:`o-alchemy-orbit`,class:e.orbitClass,attrs:{cx:`50%`,cy:`50%`,r:e.orbitSize(n)}})}),0),e._l(e.layout.nodes,function(n,r){return t(`AlchemyCircleNode`,{key:r,class:e.nodeClass(n),attrs:{node:n,"is-focused":e.isFocusedNode(n)},on:{mouseenter:function(t){return e.handleMouseEnter(n)},mouseleave:e.handleMouseLeave,click:function(t){return e.handleClick(n)}}})}),t(`svg`,{staticClass:`l-alchemy-arrow-canvas`},[e._l(e.layout.reactionArrows,function(n,r){return t(`line`,e._b({key:`arrow-`+r+e.realityAmount,class:e.reactionPathClass(n)},`line`,e.reactionArrowPaths(n),!1))}),e._l(e.layout.reactionArrows,function(n,r){return t(`line`,e._b({key:`arrow2-`+r+e.realityAmount,class:e.reactionArrowClass(n)},`line`,e.reactionArrowPositions(n),!1))})],2)],2)],1)},[],!1,null,`403d29cb`,null,null).exports,MF=D({name:`AntimatterDimensionProgressBar`,data(){return{fill:new Decimal(0),tooltip:``,displayPercents:``}},computed:{progressBarStyle(){return{width:`${this.fill.times(100).toNumber().toFixed(2)}%`}}},methods:{update(){this.displayPercents=formatPercents(this.fill,2);let e=(e,t,n)=>{this.fill=Decimal.min(e.clampMin(1).pLog10().div(Decimal.log10(t)),1),this.tooltip=n},t=(e,t,n)=>{this.fill=Decimal.min(e.div(t),1),this.tooltip=n};if(Player.isInAntimatterChallenge||EternityChallenge.isRunning||player.dilation.active||QuantumChallenge.isRunning||Laitela.isRunning)if(Player.isInAntimatterChallenge)e(Currency.antimatter.value,Player.antimatterChallenge.goal,`Percentage to Challenge goal`);else if(EternityChallenge.isRunning)if(Perk.studyECBulk.isBought){let t=new Decimal(EternityChallenge.current.gainedCompletionStatus.nextGoalAt);t?e(Currency.infinityPoints.value,t,`Percentage to next Challenge completion`):e(Currency.infinityPoints.value,new Decimal(10),`This Challenge is already fully completed!`)}else e(Currency.infinityPoints.value,Player.eternityGoal,`Percentage to Eternity Challenge goal`);else player.dilation.active?player.dilation.lastEP.gt(0)?e(Currency.antimatter.value,getTachyonReq(),`Percentage to gain more TP in Dilation`):e(Currency.infinityPoints.value,Player.eternityGoal,`Percentage to Eternity in Dilation`):QuantumChallenge.isRunning?e(Currency.antimatter.value,Player.quantumGoal.am,`Percentage to Quantum Challenge goal`):e(Decimal.pow10(player.celestials.laitela.entropy),new Decimal(10),`Percentage to Destabilized Reality`);else if(Pelle.isDoomed)PelleRifts.recursion.milestones[2].canBeApplied||GalaxyGenerator.spentGalaxies.gt(0)?e(Currency.infinityPoints.value,Tesseracts.nextCost,`Percentage to next Tesseract`):PelleStrikes.dilation.hasStrike?e(Currency.eternityPoints.value,o.E4000,`Percentage to Galaxy Generator`):PelleStrikes.ECs.hasStrike?t(Decimal.min(Currency.timeTheorems.max.div(12900),1).add(Decimal.min(EternityChallenges.completions/60,1)).div(2),1,`Percentage to fifth Strike`):PelleStrikes.eternity.hasStrike?t(Currency.timeTheorems.max,new Decimal(115),`Percentage to fourth Strike`):PelleStrikes.powerGalaxies.hasStrike?e(Currency.infinityPoints.value,Player.eternityGoal,`Percentage to third Strike`):PelleStrikes.infinity.hasStrike?player.break?e(Currency.infinityPoints.value,new Decimal(5e11),`Percentage to second Strike`):e(Currency.antimatter.value,new Decimal(Number.MAX_VALUE),`Percentage to Infinity`):e(Currency.antimatter.value,new Decimal(Number.MAX_VALUE),`Percentage to first Strike`);else if(Enslaved.isCompleted)e(Currency.infinityPoints.value,Tesseracts.nextCost,`Percentage to next Tesseract`);else if(PlayerProgress.dilationUnlocked())e(Currency.metaAntimatter.value,Player.quantumGoal.ma,`Percentage to Quantum`);else if(InfinityDimension(8).isUnlocked)e(Currency.infinityPoints.value,Player.eternityGoal,`Percentage to Eternity`);else if(player.break){let t=`Percentage to unlock a new ${InfinityDimensions.next().hasIPUnlock?`type of Dimension`:`Infinity Dimension`}`,n=InfinityDimensions.next();n.ipRequirementReached?e(player.records.thisEternity.maxAM,n.amRequirement,t):e(player.infinityPoints,n.ipRequirement,t)}else e(Currency.antimatter.value,new Decimal(Number.MAX_VALUE),`Percentage to Infinity`)}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`c-progress-bar`},[t(`div`,{staticClass:`c-progress-bar__fill`,style:e.progressBarStyle},[t(`span`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:e.tooltip,expression:`tooltip`}],staticClass:`c-progress-bar__percents`},[e._v(` `+e._s(e.displayPercents)+` `)])])])},[],!1,null,null,null,null).exports,NF={name:`ClassicAntimatterDimensionRow`,components:{GenericDimensionRowText:he,PrimaryButton:L},props:{tier:{type:Number,required:!0}},data(){return{end:!1,isUnlocked:!1,isCapped:!1,multiplier:new Decimal(0),amount:new Decimal(0),bought:new Decimal(0),boughtBefore10:new Decimal(0),rateOfChange:new Decimal(0),singleCost:new Decimal(0),until10Cost:new Decimal(0),isAffordable:!1,isAffordableUntil10:!1,isContinuumActive:!1,continuumValue:0,isShown:!1,isCostsAD:!1,formattedAmount:null,hasTutorial:!1}},computed:{isDoomed:()=>Pelle.isDoomed,name(){return`${AntimatterDimension(this.tier).shortDisplayName} Antimatter Dimension`},singleText(){if(this.isCapped)return`Capped`;let e=this.showCostTitle(this.singleCost)?`Cost: `:``,t=this.isCostsAD?`${this.costUnit}`:`AM`;return`${e} ${format(this.singleCost)} ${t}`},until10Text(){if(this.isCapped)return`Shattered by Nameless`;if(this.isContinuumActive)return`Continuum: ${this.continuumString}`;let e=`Until ${formatInt(10)},${this.showCostTitle(this.until10Cost)?` Cost`:``}`,t=this.isCostsAD?`${this.costUnit}`:`AM`;return`${e} ${format(this.until10Cost)} ${t}`},continuumString(){return formatFloat(this.continuumValue,2)},showRow(){return this.isShown||this.isUnlocked||this.amount.gt(0)},boughtTooltip(){return this.isCapped?`Nameless prevents the purchase of more than ${format(1)} 8th Antimatter Dimension`:this.isContinuumActive?`Continuum produces all your Antimatter Dimensions`:`Purchased ${quantifyInt(`time`,this.bought)}`},costUnit(){return`${AntimatterDimension(this.tier-2).shortDisplayName} AD`},buySingleClass(){return{"o-primary-btn--buy-ad o-primary-btn--buy-single-ad c-dim-tooltip-container":!0,"l-dim-row-small-text":this.isLongText(this.singleText)||!this.showCostTitle(this.singleCost)}},buyTenClass(){return{"o-primary-btn--buy-ad o-primary-btn--buy-dim c-dim-tooltip-container":!0,"o-primary-btn--buy-10-ad":!this.isContinuumActive,"o-primary-btn--continuum-ad o-continuum":this.isContinuumActive,"l-dim-row-small-text":this.isLongText(this.until10Text)&&!this.isContinuumActive}}},methods:{update(){let e=this.tier;if(e===8&&this.isDoomed&&(this.formattedAmount=formatInt(this.amount)),e>DimBoost.maxDimensionsUnlockable)return;let t=AntimatterDimension(e);this.isUnlocked=t.isAvailableForPurchase,this.isCapped=e===8&&Enslaved.isRunning&&t.bought.gte(1),this.multiplier.copyFrom(t.multiplier),this.amount.copyFrom(t.totalAmount),this.bought.copyFrom(t.bought),this.boughtBefore10.copyFrom(t.boughtBefore10),this.singleCost.copyFrom(t.cost),this.until10Cost.copyFrom(t.costUntil10),this.rateOfChange.copyFrom(t.rateOfChange),this.isAffordable=t.isAffordable,this.isAffordableUntil10=t.isAffordableUntil10,this.isContinuumActive=Laitela.continuumActive,this.isContinuumActive&&(this.continuumValue=t.continuumValue),this.isShown=DimBoost.totalBoosts.gt(0)&&DimBoost.totalBoosts.add(3).gte(e)||PlayerProgress.infinityUnlocked(),this.isCostsAD=NormalChallenge(6).isRunning&&e>2&&!this.isContinuumActive,this.hasTutorial=e===1&&Tutorial.isActive(TUTORIAL_STATE.DIM1)||e===2&&Tutorial.isActive(TUTORIAL_STATE.DIM2)},buySingle(){this.isContinuumActive||buyOneDimension(this.tier)},buyUntil10(){this.isContinuumActive||buyManyDimension(this.tier)},showCostTitle(e){return e.max(1).log10().lte(1e6)},isLongText(e){return e.length>20},tutorialClass(){return{"l-glow-container":!0,"tutorial--glow":this.isAffordable&&this.hasTutorial}}}},PF=D(NF,function(){var e=this,t=e._self._c;return t(`div`,{directives:[{name:`show`,rawName:`v-show`,value:e.showRow,expression:`showRow`}],staticClass:`c-dimension-row c-antimatter-dim-row l-dimension-single-row`,class:{"c-dim-row--not-reached":!e.isUnlocked}},[t(`GenericDimensionRowText`,{attrs:{tier:e.tier,name:e.name,"multiplier-text":e.formatX(e.multiplier,2,2),amount:e.amount,rate:e.rateOfChange}}),t(`div`,{staticClass:`l-dim-row-multi-button-container`},[e.isContinuumActive?e._e():t(`PrimaryButton`,{class:e.buySingleClass,attrs:{enabled:e.isAffordable&&!e.isCapped&&e.isUnlocked},on:{click:e.buySingle}},[t(`div`,{class:e.tutorialClass()},[e._v(` `+e._s(e.singleText)+` `)]),t(`div`,{staticClass:`c-dim-purchase-count-tooltip`},[e._v(` `+e._s(e.boughtTooltip)+` `)]),e.hasTutorial?t(`div`,{staticClass:`fas fa-circle-exclamation l-notification-icon`}):e._e()]),t(`PrimaryButton`,{class:e.buyTenClass,attrs:{enabled:(e.isAffordableUntil10||e.isContinuumActive)&&!e.isCapped&&e.isUnlocked},on:{click:e.buyUntil10}},[e._v(` `+e._s(e.until10Text)+` `),t(`div`,{staticClass:`c-dim-purchase-count-tooltip`},[e._v(` `+e._s(e.boughtTooltip)+` `)])])],1)],1)},[],!1,null,`b663ba3c`,null,null).exports,FF=D({name:`ClassicAntimatterDimensionsTabHeader`,components:{PrimaryButton:L},data(){return{isSacrificeUnlocked:!1,isSacrificeAffordable:!1,currentSacrifice:new Decimal(0),sacrificeBoost:new Decimal(0),disabledCondition:``,isFullyAutomated:!1}},computed:{sacrificeTooltip(){return this.isFullyAutomated?`Sacrifice Autobuyer is enabled and Achievement 118 is unlocked and active`:`Boosts 8th Antimatter Dimension by ${formatX(this.sacrificeBoost,2,2)}`}},methods:{update(){let e=Sacrifice.isVisible;this.isSacrificeUnlocked=e,e&&(this.isSacrificeAffordable=Sacrifice.canSacrifice,this.isFullyAutomated=Autobuyer.sacrifice.isActive&&Achievement(118).isEffectActive&&(this.isSacrificeAffordable||Sacrifice.nextBoost.lte(1)),this.currentSacrifice.copyFrom(Sacrifice.totalBoost),this.sacrificeBoost.copyFrom(Sacrifice.nextBoost),this.disabledCondition=Sacrifice.disabledCondition)},sacrifice(){sacrificeBtnClick()},maxAll(){maxAll()}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-antimatter-dim-tab__header`},[t(`PrimaryButton`,{directives:[{name:`show`,rawName:`v-show`,value:e.isSacrificeUnlocked,expression:`isSacrificeUnlocked`},{name:`tooltip`,rawName:`v-tooltip`,value:e.sacrificeTooltip,expression:`sacrificeTooltip`}],staticClass:`o-primary-btn--sacrifice`,attrs:{enabled:e.isSacrificeAffordable&&!e.isFullyAutomated},on:{click:e.sacrifice}},[e.isSacrificeAffordable?t(`span`,[e._v(`Dimensional Sacrifice (`+e._s(e.formatX(e.sacrificeBoost,2,2))+`)`)]):e.isFullyAutomated?t(`span`,[e._v(` Dimensional Sacrifice is Automated (Achievement 118) `)]):t(`span`,[e._v(`Dimensional Sacrifice Disabled (`+e._s(e.disabledCondition)+`)`)])]),t(`PrimaryButton`,{staticClass:`o-primary-btn--buy-max`,on:{click:e.maxAll}},[e._v(` Max all (M) `)])],1)},[],!1,null,null,null,null).exports,IF=r({name:`ClassicAntimatterGalaxyRow`,components:{PrimaryButton:L},data(){return{type:GALAXY_TYPE.NORMAL,galaxies:{normal:new Decimal,replicanti:new Decimal,dilation:new Decimal},requirement:{tier:1,amount:new Decimal},canBeBought:!1,lockText:null,canBulkBuy:!1,creditsClosed:!1,scalingStart:{distant:new Decimal(0),remote:new Decimal(0),obscure:new Decimal(0),invisible:new Decimal(0),ethereal:new Decimal(0)},hasTutorial:!1}},computed:{isDoomed:()=>Pelle.isDoomed,dimName(){return AntimatterDimension(this.requirement.tier).displayName},buttonText(){if(this.lockText!==null)return this.lockText;let e=[];return!Achievement(111).isUnlocked&&!EternityMilestone.noADReset.isReached&&e.push(`Dimensions`),!Achievement(143).isUnlocked&&!EternityMilestone.noADReset.isReached&&e.push(`Dimension Boosts`),e.length===0?`Increase the power of Tickspeed upgrades`:`Reset your ${makeEnumeration(e)} to increase the power of Tickspeed upgrades`},sumText(){let e=[Decimal.max(this.galaxies.normal,0)];this.galaxies.replicanti.gt(0)&&e.push(this.galaxies.replicanti),this.galaxies.dilation.gt(0)&&e.push(this.galaxies.dilation);let t=e.map(this.formatGalaxies).join(` + `);return e.length>=2?`${t} = ${this.formatGalaxies(e.sum())}`:t},typeName(){switch(this.type){case GALAXY_TYPE.NORMAL:return`Antimatter Galaxies`;case GALAXY_TYPE.DISTANT:return`Distant Antimatter Galaxies`;case GALAXY_TYPE.REMOTE:return`Remote Antimatter Galaxies`;case GALAXY_TYPE.OBSCURE:return`Obscure Antimatter Galaxies`;case GALAXY_TYPE.INVISIBLE:return`Invisible Antimatter Galaxies`;case GALAXY_TYPE.ETHEREAL:return`Ethereal Antimatter Galaxies`}return`Antimatter Galaxies`},hasIncreasedScaling(){return this.type!==GALAXY_TYPE.NORMAL},costScalingText(){if(this.type===GALAXY_TYPE.NORMAL)return;if(this.type===GALAXY_TYPE.DISTANT)return`Each Galaxy is more expensive past ${quantifyInt(`Galaxy`,this.scalingStart.distant)}`;let e=[{type:`distant`,function:`quadratic`,amount:this.scalingStart.distant},{type:`remote`,function:`exponential`,amount:this.scalingStart.remote}];return this.type===GALAXY_TYPE.OBSCURE&&e.push({type:`obscure`,function:`polynomial`,amount:this.scalingStart.obscure}),this.type===GALAXY_TYPE.INVISIBLE&&e.push({type:`invisible`,function:`dilative`,amount:this.scalingStart.invisible}),this.type===GALAXY_TYPE.ETHEREAL&&e.push({type:`ethereal`,function:`exponential`,amount:this.scalingStart.ethereal}),`Increased Galaxy cost scaling: ${e.sort((e,t)=>e.amount.compare(t.amount)).map(e=>`${e.function} scaling past ${this.formatGalaxies(e.amount)} (${e.type})`).join(`, `).capitalize()}`},classObject(){return{"o-primary-btn--galaxy l-dim-row__prestige-button":!0,"tutorial--glow":this.canBeBought&&this.hasTutorial,"o-pelle-disabled-pointer":this.creditsClosed}}},methods:{update(){this.type=Galaxy.type,this.scalingStart.distant.copyFrom(Galaxy.scalingStart[GALAXY_TYPE.DISTANT]),this.scalingStart.remote.copyFrom(Galaxy.scalingStart[GALAXY_TYPE.REMOTE]),this.scalingStart.obscure.copyFrom(Galaxy.scalingStart[GALAXY_TYPE.OBSCURE]),this.scalingStart.invisible.copyFrom(Galaxy.scalingStart[GALAXY_TYPE.INVISIBLE]),this.scalingStart.ethereal.copyFrom(Galaxy.scalingStart[GALAXY_TYPE.ETHEREAL]),this.galaxies.normal.copyFrom(player.galaxies.add(GalaxyGenerator.galaxies)),this.galaxies.replicanti.copyFrom(Replicanti.galaxies.total),this.galaxies.dilation.copyFrom(player.dilation.totalTachyonGalaxies);let e=Galaxy.requirement;this.requirement.amount.copyFrom(e.amount),this.requirement.tier=e.tier,this.canBeBought=e.isSatisfied&&Galaxy.canBeBought,this.lockText=Galaxy.lockText,this.canBulkBuy=EternityMilestone.autobuyMaxGalaxies.isReached,this.creditsClosed=GameEnd.creditsEverClosed,this.hasTutorial=Tutorial.isActive(TUTORIAL_STATE.GALAXY)},buyGalaxy(e){this.canBeBought&&manualRequestGalaxyReset(this.canBulkBuy&&e)},formatGalaxies(e){return e.gt(1e8)?format(e,2):formatInt(e)}}}),LF=D(IF,function(){var e=this,t=e._self._c;return e._self._setupProxy,t(`div`,{staticClass:`c-dimension-row c-antimatter-dim-row c-antimatter-prestige-row`},[t(`div`,{staticClass:`l-dim-row__prestige-text c-dim-row__label c-dim-row__label--amount l-text-wrapper`},[e._v(` `+e._s(e.typeName)+` (`+e._s(e.sumText)+`): requires `+e._s(e.formatInt(e.requirement.amount))+` `+e._s(e.dimName)+` Dimensions `),t(`div`,{staticClass:`l-scaling-text-wrapper`},[e._v(` `+e._s(e.hasIncreasedScaling?e.costScalingText:``)+` `)])]),t(`PrimaryButton`,{class:e.classObject,attrs:{enabled:e.canBeBought},on:{click:[function(t){return t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:e.buyGalaxy(!0)},function(t){return!t.shiftKey||t.ctrlKey||t.altKey||t.metaKey?null:e.buyGalaxy(!1)}]}},[e._v(` `+e._s(e.buttonText)+` `),e.hasTutorial?t(`div`,{staticClass:`fas fa-circle-exclamation l-notification-icon`}):e._e()])],1)},[],!1,null,`a6d07402`,null,null).exports,RF=r({name:`ClassicDimensionBoostRow`,components:{PrimaryButton:L},data(){return{requirement:{tier:1,amount:new Decimal},isBuyable:!1,purchasedBoosts:new Decimal,imaginaryBoosts:new Decimal,lockText:null,unlockedByBoost:null,creditsClosed:!1,requirementText:null,hasTutorial:!1,supersonicScalingStart:new Decimal(0)}},computed:{isDoomed:()=>Pelle.isDoomed,dimName(){return AntimatterDimension(this.requirement.tier).displayName},boostCountText(){if(this.requirementText)return this.requirementText;let e=[this.purchasedBoosts];this.imaginaryBoosts.neq(0)&&e.push(this.imaginaryBoosts);let t=e.map(formatInt).join(` + `);return e.length>=2?`${t} = ${formatInt(e.sum())}`:t},dimBoostName(){return this.purchasedBoosts.lt(5)?`Shift`:this.purchasedBoosts.gte(this.supersonicScalingStart)?`Supersonic`:`Boost`},classObject(){return{"o-primary-btn--dimboost l-dim-row__prestige-button":!0,"tutorial--glow":this.isBuyable&&this.hasTutorial,"o-pelle-disabled-pointer":this.creditsClosed}}},methods:{update(){let e=DimBoost.requirement;this.requirement.tier=e.tier,this.requirement.amount.copyFrom(e.amount),this.isBuyable=e.isSatisfied&&DimBoost.canBeBought,this.purchasedBoosts.copyFrom(DimBoost.purchasedBoosts),this.imaginaryBoosts.copyFrom(DimBoost.imaginaryBoosts),this.lockText=DimBoost.lockText,this.unlockedByBoost=DimBoost.unlockedByBoost,this.creditsClosed=GameEnd.creditsClosed,this.isDoomed&&(this.requirementText=formatInt(this.purchasedBoosts)),this.hasTutorial=Tutorial.isActive(TUTORIAL_STATE.DIMBOOST),this.supersonicScalingStart.copyFrom(DimBoost.supersonicScalingStart)},dimensionBoost(e){!DimBoost.requirement.isSatisfied||!DimBoost.canBeBought||manualRequestDimensionBoost(e)}}}),zF=D(RF,function(){var e=this,t=e._self._c;return e._self._setupProxy,t(`div`,{staticClass:`c-dimension-row c-antimatter-dim-row c-antimatter-prestige-row`},[t(`div`,{staticClass:`l-dim-row__prestige-text c-dim-row__label c-dim-row__label--amount`},[e._v(` Dimension `+e._s(e.dimBoostName)+` (`+e._s(e.boostCountText)+`): requires `+e._s(e.formatInt(e.requirement.amount))+` `+e._s(e.dimName)+` Dimensions `)]),t(`PrimaryButton`,{class:e.classObject,attrs:{enabled:e.isBuyable},on:{click:[function(t){return t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:e.dimensionBoost(!0)},function(t){return!t.shiftKey||t.ctrlKey||t.altKey||t.metaKey?null:e.dimensionBoost(!1)}]}},[e._v(` `+e._s(e.unlockedByBoost)+` `),e.hasTutorial?t(`div`,{staticClass:`fas fa-circle-exclamation l-notification-icon`}):e._e()])],1)},[],!1,null,`3db6a677`,null,null).exports,BF=r({name:`TickspeedRow`,data(){return{purchasedTickspeed:new Decimal(0),freeTickspeed:new Decimal(0),isVisible:!1,mult:new Decimal(0),cost:new Decimal(0),isAffordable:!1,tickspeed:new Decimal(0),gameSpeedMult:1,galaxyCount:new Decimal,isContinuumActive:!1,continuumValue:0,hasTutorial:!1,isEC9:!1}},computed:{classObject(){return{"l-tickspeed-container":!0,"l-tickspeed-container--hidden":!this.isVisible}},multiplierDisplay(){if(InfinityChallenge(3).isRunning)return`Multiply all Antimatter Dimensions by
        ${formatX(this.galaxyCount.times(.005).add(1.05))}`;let e=this.mult;return`${formatX(e.reciprocal(),2,3)} faster / upgrade.`},tickspeedDisplay(){return`Tickspeed: ${format(this.tickspeed,2,3)} / sec`},continuumString(){return formatFloat(this.continuumValue,2)},upgradeCount(){let e=this.purchasedTickspeed;return this.freeTickspeed?e.eq(0)||this.isContinuumActive?`${formatInt(this.freeTickspeed,3)} Free Upgrades`:`${formatInt(e,3)} Purchased + ${formatInt(this.freeTickspeed,3)} Free`:quantifyInt(`Purchased Upgrade`,e)}},methods:{update(){this.purchasedTickspeed.copyFrom(player.totalTickBought),this.freeTickspeed.copyFrom(FreeTickspeed.amount),this.isEC9=EternityChallenge(9).isRunning,this.isVisible=Tickspeed.isUnlocked||this.isEC9,this.isVisible&&(this.mult.copyFrom(Tickspeed.multiplier),this.cost.copyFrom(Tickspeed.cost),this.isAffordable=Tickspeed.isAvailableForPurchase&&Tickspeed.isAffordable,this.tickspeed.copyFrom(Tickspeed.perSecond),this.gameSpeedMult=getGameSpeedupForDisplay(),this.galaxyCount.copyFrom(player.galaxies),this.isContinuumActive=Laitela.continuumActive,this.isContinuumActive&&(this.continuumValue=Tickspeed.continuumValue),this.hasTutorial=Tutorial.isActive(TUTORIAL_STATE.TICKSPEED))},buttonClass(){return{"o-primary-btn":!0,"tickspeed-btn":!0,"o-primary-btn--disabled":!this.isAffordable&&!this.isContinuumActive,"o-non-clickable o-continuum":this.isContinuumActive,"tutorial--glow":this.isAffordable&&this.hasTutorial}}}}),VF=D(BF,function(){var e=this,t=e._self._c;return e._self._setupProxy,t(`div`,{class:e.classObject},[t(`div`,{staticClass:`tickspeed-buttons`},[t(`button`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:e.upgradeCount,expression:`upgradeCount`}],class:e.buttonClass(),attrs:{onclick:`buyTickSpeed()`}},[e.isContinuumActive?t(`span`,[e._v(` Tickspeed Continuum: `+e._s(e.continuumString)+` `)]):e.isEC9?t(`span`,[e._v(` Tickspeed Unpurchasable (EC 9) `)]):t(`span`,[e._v(` Tickspeed Cost: `+e._s(e.format(e.cost))+` `)]),e.hasTutorial?t(`div`,{staticClass:`fas fa-circle-exclamation l-notification-icon`}):e._e()]),e.isContinuumActive?e._e():t(`button`,{staticClass:`o-primary-btn tickspeed-max-btn`,class:{"o-primary-btn--disabled":!e.isAffordable&&!e.isContinuumActive},attrs:{onclick:`buyMaxTickSpeed()`}},[e._v(` Buy Max `)])])])},[],!1,null,`71baf948`,null,null).exports,HF=D({name:`ClassicAntimatterDimensionsTab`,components:{PrimaryButton:L,AntimatterDimensionRow:PF,AntimatterDimensionsTabHeader:FF,AntimatterGalaxyRow:LF,DimensionBoostRow:zF,AntimatterDimensionProgressBar:MF,TickspeedRow:VF},data(){return{hasDimensionBoosts:!1,isQuickResetAvailable:!1,isSacrificeUnlocked:!1,buy10Mult:new Decimal(0),currentSacrifice:new Decimal(0),hasRealityButton:!1,multiplierText:``}},methods:{update(){this.hasDimensionBoosts=player.dimensionBoosts.gt(0),this.isQuickResetAvailable=Player.isInAntimatterChallenge&&Player.antimatterChallenge.isQuickResettable,this.isSacrificeUnlocked=Sacrifice.isVisible,this.buy10Mult.copyFrom(AntimatterDimensions.buyTenMultiplier),this.currentSacrifice.copyFrom(Sacrifice.totalBoost),this.hasRealityButton=!1;let e=this.isSacrificeUnlocked?` | Dimensional Sacrifice multiplier: ${formatX(this.currentSacrifice,2,2)}`:``;this.multiplierText=`Buy 10 Dimension purchase multiplier: ${formatX(this.buy10Mult,2,2)}${e}`},quickReset(){softReset(-1,!0,!0)}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-old-ui-antimatter-dim-tab`},[t(`AntimatterDimensionsTabHeader`),e._v(` `+e._s(e.multiplierText)+` `),t(`TickspeedRow`),t(`div`,{staticClass:`l-dimensions-container`},[e._l(8,function(e){return t(`AntimatterDimensionRow`,{key:e,attrs:{tier:e}})}),t(`DimensionBoostRow`),t(`AntimatterGalaxyRow`)],2),e.isQuickResetAvailable?t(`PrimaryButton`,{staticClass:`o-primary-btn--quick-reset`,on:{click:e.quickReset}},[e._v(` Perform a Dimension Boost reset `),e.hasDimensionBoosts?t(`span`,[e._v(` but lose a Dimension Boost`)]):t(`span`,[e._v(` for no gain`)])]):e._e(),t(`div`,{staticClass:`l-flex`}),t(`AntimatterDimensionProgressBar`,{staticClass:`l-antimatter-dim-tab__progress_bar`})],1)},[],!1,null,`270f4388`,null,null).exports,UF=r({name:`ModernAntimatterDimensionRow`,components:{GenericDimensionRowText:he},props:{tier:{type:Number,required:!0}},data(){return{isUnlocked:!1,isCapped:!1,multiplier:new Decimal(0),amount:new Decimal(0),bought:new Decimal(0),boughtBefore10:new Decimal(0),rateOfChange:new Decimal(0),singleCost:new Decimal(0),until10Cost:new Decimal(0),isAffordable:!1,buyUntil10:!0,howManyCanBuy:new Decimal(0),isContinuumActive:!1,continuumValue:new Decimal(0),isShown:!1,isCostsAD:!1,hasTutorial:!1}},computed:{isDoomed:()=>Pelle.isDoomed,name(){return`${AntimatterDimension(this.tier).shortDisplayName} Antimatter Dimension`},costDisplay(){return this.buyUntil10?format(this.until10Cost):format(this.singleCost)},continuumString(){return formatFloat(this.continuumValue,2)},showRow(){return this.isShown||this.isUnlocked||this.amount.gt(0)},boughtTooltip(){return this.isCapped?`Nameless prevents the purchase of more than ${format(1)} 8th Antimatter Dimension`:this.isContinuumActive?`Continuum produces all your Antimatter Dimensions`:`Purchased ${quantifyInt(`time`,this.bought)}`},costUnit(){return`${AntimatterDimension(this.tier-2).shortDisplayName} AD`},buttonPrefix(){return this.isUnlocked?this.isCapped?`Shattered by Nameless`:this.isContinuumActive?`Continuum: `:`Buy ${formatInt(this.howManyCanBuy)}`:`Locked`},buttonValue(){if(this.isCapped)return``;if(this.isContinuumActive)return this.continuumString;let e=this.showCostTitle(this.buyUntil10?this.until10Cost:this.singleCost)?`Cost: `:``,t=this.isCostsAD?this.costUnit:`AM`;return`${e}${this.costDisplay} ${t}`},hasLongText(){return this.buttonValue.length>20}},methods:{update(){let e=this.tier;if(e>DimBoost.maxDimensionsUnlockable&&!this.isDoomed)return;let t=AntimatterDimension(e);this.isUnlocked=t.isAvailableForPurchase;let n=player.buyUntil10;this.isCapped=e===8&&Enslaved.isRunning&&t.bought.gte(1),this.multiplier.copyFrom(AntimatterDimension(e).multiplier),this.amount.copyFrom(t.totalAmount),this.bought.copyFrom(t.bought),this.boughtBefore10.copyFrom(t.boughtBefore10),this.howManyCanBuy.copyFrom(n?t.howManyCanBuy:Decimal.min(t.howManyCanBuy,1)),this.singleCost.copyFrom(t.cost),this.until10Cost.copyFrom(t.cost.times(Decimal.max(t.howManyCanBuy,1))),this.rateOfChange.copyFrom(t.rateOfChange),this.isAffordable=t.isAffordable,this.buyUntil10=n,this.isContinuumActive=Laitela.continuumActive,this.isContinuumActive&&this.continuumValue.copyFrom(t.continuumValue),this.isShown=DimBoost.totalBoosts.gt(0)&&DimBoost.totalBoosts.add(3).gte(e)||PlayerProgress.infinityUnlocked(),this.isCostsAD=NormalChallenge(6).isRunning&&e>2&&!this.isContinuumActive,this.hasTutorial=e===1&&Tutorial.isActive(TUTORIAL_STATE.DIM1)||e===2&&Tutorial.isActive(TUTORIAL_STATE.DIM2)},buy(){this.isContinuumActive||(this.howManyCanBuy.eq(1)?buyOneDimension(this.tier):buyAsManyAsYouCanBuy(this.tier))},showCostTitle(e){return e.lt(`1e1000000`)},buttonClass(){return{"o-primary-btn o-primary-btn--new":!0,"o-primary-btn--disabled":!this.isAffordable&&!this.isContinuumActive||!this.isUnlocked||this.isCapped,"o-non-clickable o-continuum":this.isContinuumActive}},buttonTextClass(){return{"button-content l-modern-buy-ad-text":!0,"tutorial--glow":this.isAffordable&&this.hasTutorial}}}}),WF=D(UF,function(){var e=this,t=e._self._c;return e._self._setupProxy,t(`div`,{directives:[{name:`show`,rawName:`v-show`,value:e.showRow,expression:`showRow`}],staticClass:`c-dimension-row l-dimension-row-antimatter-dim c-antimatter-dim-row l-dimension-single-row`,class:{"c-dim-row--not-reached":!e.isUnlocked}},[t(`GenericDimensionRowText`,{attrs:{tier:e.tier,name:e.name,"multiplier-text":e.formatX(e.multiplier,2,2),amount:e.amount,rate:e.rateOfChange}}),t(`div`,{staticClass:`l-dim-row-multi-button-container c-modern-dim-tooltip-container`},[t(`div`,{staticClass:`c-modern-dim-purchase-count-tooltip`},[e._v(` `+e._s(e.boughtTooltip)+` `)]),t(`button`,{class:e.buttonClass(),on:{click:e.buy}},[t(`div`,{class:e.buttonTextClass()},[t(`div`,[e._v(` `+e._s(e.buttonPrefix)+` `)]),t(`div`,{class:{"l-dim-row-small-text":e.hasLongText}},[e._v(` `+e._s(e.buttonValue)+` `)]),e.hasTutorial?t(`div`,{staticClass:`fas fa-circle-exclamation l-notification-icon`}):e._e()]),!e.isContinuumActive&&e.isUnlocked&&!e.isCapped?t(`div`,{staticClass:`fill`},[t(`div`,{staticClass:`fill-purchased`,style:{width:e.boughtBefore10.toNumber()*10+`%`}}),t(`div`,{staticClass:`fill-possible`,style:{width:e.howManyCanBuy.toNumber()*10+`%`}})]):e._e()])])],1)},[],!1,null,`71667cc2`,null,null).exports,GF=D({name:`ModernAntimatterGalaxyRow`,data(){return{type:GALAXY_TYPE.NORMAL,galaxies:{normal:new Decimal,replicanti:new Decimal,dilation:new Decimal},requirement:{tier:1,amount:0},canBeBought:!1,lockText:null,canBulkBuy:!1,creditsClosed:!1,scalingStart:{distant:new Decimal(0),remote:new Decimal(0),obscure:new Decimal(0),invisible:new Decimal(0),ethereal:new Decimal(0)},hasTutorial:!1}},computed:{isDoomed:()=>Pelle.isDoomed,dimName(){return AntimatterDimension(this.requirement.tier).shortDisplayName},buttonText(){if(this.lockText!==null)return this.lockText;let e=[];return!Achievement(111).isUnlocked&&!EternityMilestone.noADReset.isReached&&e.push(`Dimensions`),!Achievement(143).isUnlocked&&!EternityMilestone.noADReset.isReached&&e.push(`Dimension Boosts`),e.length===0?`Increase the power of Tickspeed upgrades`:`Reset your ${makeEnumeration(e)} to increase the power of Tickspeed upgrades`},sumText(){let e=[Decimal.max(this.galaxies.normal,0)];this.galaxies.replicanti.gt(0)&&e.push(this.galaxies.replicanti),this.galaxies.dilation.gt(0)&&e.push(this.galaxies.dilation);let t=e.map(this.formatGalaxies).join(` + `);return e.length>=2?`${t} = ${this.formatGalaxies(e.sum())}`:t},typeName(){switch(this.type){case GALAXY_TYPE.NORMAL:return`Antimatter Galaxies`;case GALAXY_TYPE.DISTANT:return`Distant Antimatter Galaxies`;case GALAXY_TYPE.REMOTE:return`Remote Antimatter Galaxies`;case GALAXY_TYPE.OBSCURE:return`Obscure Antimatter Galaxies`;case GALAXY_TYPE.INVISIBLE:return`Invisible Antimatter Galaxies`;case GALAXY_TYPE.ETHEREAL:return`Ethereal Antimatter Galaxies`}return`Antimatter Galaxies`},hasIncreasedScaling(){return this.type!==GALAXY_TYPE.NORMAL},costScalingText(){if(this.type===GALAXY_TYPE.NORMAL)return;if(this.type===GALAXY_TYPE.DISTANT)return`Each Galaxy is more expensive past ${quantifyInt(`Galaxy`,this.scalingStart.distant)}`;let e=[{type:`distant`,function:`quadratic`,amount:this.scalingStart.distant},{type:`remote`,function:`exponential`,amount:this.scalingStart.remote}];return this.type>=GALAXY_TYPE.OBSCURE&&e.push({type:`obscure`,function:`polynomial`,amount:this.scalingStart.obscure}),this.type>=GALAXY_TYPE.INVISIBLE&&e.push({type:`invisible`,function:`dilative`,amount:this.scalingStart.invisible}),this.type>=GALAXY_TYPE.ETHEREAL&&e.push({type:`ethereal`,function:`exponential`,amount:this.scalingStart.ethereal}),`Increased Galaxy cost scaling: ${e.sort((e,t)=>e.amount.compare(t.amount)).map(e=>`${e.function} scaling past ${this.formatGalaxies(e.amount)} (${e.type})`).join(`, `).capitalize()}`},classObject(){return{"o-primary-btn o-primary-btn--new o-primary-btn--dimension-reset":!0,"tutorial--glow":this.canBeBought&&this.hasTutorial,"o-primary-btn--disabled":!this.canBeBought,"o-pelle-disabled-pointer":this.creditsClosed}}},methods:{update(){this.type=Galaxy.type,this.scalingStart.distant.copyFrom(Galaxy.scalingStart[GALAXY_TYPE.DISTANT]),this.scalingStart.remote.copyFrom(Galaxy.scalingStart[GALAXY_TYPE.REMOTE]),this.scalingStart.obscure.copyFrom(Galaxy.scalingStart[GALAXY_TYPE.OBSCURE]),this.scalingStart.invisible.copyFrom(Galaxy.scalingStart[GALAXY_TYPE.INVISIBLE]),this.scalingStart.ethereal.copyFrom(Galaxy.scalingStart[GALAXY_TYPE.ETHEREAL]),this.galaxies.normal.copyFrom(player.galaxies.add(GalaxyGenerator.galaxies)),this.galaxies.replicanti.copyFrom(Replicanti.galaxies.total),this.galaxies.dilation.copyFrom(player.dilation.totalTachyonGalaxies);let e=Galaxy.requirement;this.requirement.amount=e.amount,this.requirement.tier=e.tier,this.canBeBought=e.isSatisfied&&Galaxy.canBeBought,this.lockText=Galaxy.lockText,this.canBulkBuy=EternityMilestone.autobuyMaxGalaxies.isReached,this.creditsClosed=GameEnd.creditsEverClosed,this.hasTutorial=Tutorial.isActive(TUTORIAL_STATE.GALAXY)},buyGalaxy(e){this.canBeBought&&manualRequestGalaxyReset(this.canBulkBuy&&e)},formatGalaxies(e){return e.gt(1e8)?format(e,2):formatInt(e)}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`reset-container galaxy`},[t(`h4`,[e._v(e._s(e.typeName)+` (`+e._s(e.sumText)+`)`)]),t(`span`,[e._v(`Requires: `+e._s(e.formatInt(e.requirement.amount))+` `+e._s(e.dimName)+` Antimatter D`)]),e.hasIncreasedScaling?t(`span`,[e._v(e._s(e.costScalingText))]):e._e(),t(`button`,{class:e.classObject,on:{click:[function(t){return t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:e.buyGalaxy(!0)},function(t){return!t.shiftKey||t.ctrlKey||t.altKey||t.metaKey?null:e.buyGalaxy(!1)}]}},[e._v(` `+e._s(e.buttonText)+` `),e.hasTutorial?t(`div`,{staticClass:`fas fa-circle-exclamation l-notification-icon`}):e._e()])])},[],!1,null,null,null,null).exports,KF=D({name:`ModernDimensionBoostRow`,data(){return{requirement:{tier:1,amount:new Decimal},isBuyable:!1,purchasedBoosts:new Decimal,imaginaryBoosts:new Decimal,lockText:null,unlockedByBoost:null,creditsClosed:!1,requirementText:null,hasTutorial:!1,supersonicScalingStart:new Decimal(0)}},computed:{isDoomed:()=>Pelle.isDoomed,dimName(){return AntimatterDimension(this.requirement.tier).shortDisplayName},boostCountText(){if(this.requirementText)return this.requirementText;let e=[this.purchasedBoosts];this.imaginaryBoosts.neq(0)&&e.push(this.imaginaryBoosts);let t=e.map(formatInt).join(` + `);return e.length>=2?`${t} = ${formatInt(e.sum())}`:t},classObject(){return{"o-primary-btn o-primary-btn--new o-primary-btn--dimension-reset":!0,"tutorial--glow":this.isBuyable&&this.hasTutorial,"o-primary-btn--disabled":!this.isBuyable,"o-pelle-disabled-pointer":this.creditsClosed}},dimBoostName(){return this.purchasedBoosts.lt(5)?`Shift`:this.purchasedBoosts.gte(this.supersonicScalingStart)?`Supersonic`:`Boost`}},methods:{update(){let e=DimBoost.requirement;this.requirement.tier=e.tier,this.requirement.amount.copyFrom(e.amount),this.isBuyable=e.isSatisfied&&DimBoost.canBeBought,this.purchasedBoosts.copyFrom(DimBoost.purchasedBoosts),this.imaginaryBoosts.copyFrom(DimBoost.imaginaryBoosts),this.lockText=DimBoost.lockText,this.unlockedByBoost=DimBoost.unlockedByBoost,this.creditsClosed=GameEnd.creditsEverClosed,this.isDoomed&&(this.requirementText=formatInt(this.purchasedBoosts)),this.hasTutorial=Tutorial.isActive(TUTORIAL_STATE.DIMBOOST),this.supersonicScalingStart.copyFrom(DimBoost.supersonicScalingStart)},dimensionBoost(e){!DimBoost.requirement.isSatisfied||!DimBoost.canBeBought||manualRequestDimensionBoost(e)}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`reset-container dimboost`},[t(`h4`,[e._v(`Dimension `+e._s(e.dimBoostName)+` (`+e._s(e.boostCountText)+`)`)]),t(`span`,[e._v(`Requires: `+e._s(e.formatInt(e.requirement.amount))+` `+e._s(e.dimName)+` Antimatter D`)]),t(`button`,{class:e.classObject,on:{click:[function(t){return t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:e.dimensionBoost(!0)},function(t){return!t.shiftKey||t.ctrlKey||t.altKey||t.metaKey?null:e.dimensionBoost(!1)}]}},[e._v(` `+e._s(e.unlockedByBoost)+` `),e.hasTutorial?t(`div`,{staticClass:`fas fa-circle-exclamation l-notification-icon`}):e._e()])])},[],!1,null,null,null,null).exports,qF=r({name:`ModernAntimatterDimensionsTab`,components:{PrimaryButton:L,AntimatterDimensionProgressBar:MF,AntimatterDimensionRow:WF,AntimatterGalaxyRow:GF,DimensionBoostRow:KF,TickspeedRow:VF},data(){return{hasDimensionBoosts:!1,buyUntil10:!0,isSacrificeUnlocked:!1,isSacrificeAffordable:!1,buy10Mult:new Decimal(0),currentSacrifice:new Decimal(0),sacrificeBoost:new Decimal(0),disabledCondition:``,isQuickResetAvailable:!1,hasContinuum:!1,isContinuumActive:!1,multiplierText:``,isFullyAutomated:!1}},computed:{sacrificeTooltip(){return this.isFullyAutomated?`Sacrifice Autobuyer is enabled and Achievement 118 is unlocked and active`:`Boosts 8th Antimatter Dimension by ${formatX(this.sacrificeBoost,2,2)}`}},methods:{maxAll(){maxAll()},sacrifice(){sacrificeBtnClick()},changeBuyMode(){if(!this.hasContinuum){player.buyUntil10=!player.buyUntil10;return}if(this.isContinuumActive)Laitela.setContinuum(!1),player.buyUntil10=!0;else if(player.buyUntil10)player.buyUntil10=!1;else{if(ImaginaryUpgrade(21).isLockingMechanics&&player.auto.disableContinuum){ImaginaryUpgrade(21).tryShowWarningModal();return}Laitela.setContinuum(!0)}},getUntil10Display(){return this.isContinuumActive?`Continuum`:this.buyUntil10?`Until 10`:`Buy 1`},update(){this.hasDimensionBoosts=player.dimensionBoosts.gt(0),this.buyUntil10=player.buyUntil10,this.hasContinuum=Laitela.continuumUnlocked,this.isContinuumActive=Laitela.continuumActive,this.isQuickResetAvailable=Player.isInAntimatterChallenge&&Player.antimatterChallenge.isQuickResettable;let e=Sacrifice.isVisible;if(this.isSacrificeUnlocked=e,this.buy10Mult.copyFrom(AntimatterDimensions.buyTenMultiplier),this.multiplierText=`Buy 10 Dimension purchase multiplier: ${formatX(this.buy10Mult,2,2)}`,!e)return;this.isSacrificeAffordable=Sacrifice.canSacrifice,this.isFullyAutomated=Autobuyer.sacrifice.isActive&&Achievement(118).isEffectActive&&(this.isSacrificeAffordable||Sacrifice.nextBoost.lte(1)),this.currentSacrifice.copyFrom(Sacrifice.totalBoost),this.sacrificeBoost.copyFrom(Sacrifice.nextBoost),this.disabledCondition=Sacrifice.disabledCondition;let t=this.isSacrificeUnlocked?` | Dimensional Sacrifice multiplier: ${formatX(this.currentSacrifice,2,2)}`:``;this.multiplierText+=t}}}),JF=D(qF,function(){var e=this,t=e._self._c;return e._self._setupProxy,t(`div`,{staticClass:`l-antimatter-dim-tab`},[t(`div`,{staticClass:`modes-container`},[t(`button`,{staticClass:`o-primary-btn l-button-container`,on:{click:e.changeBuyMode}},[e._v(` `+e._s(e.getUntil10Display())+` `)]),t(`PrimaryButton`,{directives:[{name:`show`,rawName:`v-show`,value:e.isSacrificeUnlocked,expression:`isSacrificeUnlocked`},{name:`tooltip`,rawName:`v-tooltip`,value:e.sacrificeTooltip,expression:`sacrificeTooltip`}],staticClass:`o-primary-btn--sacrifice`,attrs:{enabled:e.isSacrificeAffordable&&!e.isFullyAutomated},on:{click:e.sacrifice}},[e.isSacrificeAffordable?t(`span`,[e._v(`Dimensional Sacrifice (`+e._s(e.formatX(e.sacrificeBoost,2,2))+`)`)]):e.isFullyAutomated?t(`span`,[e._v(` Dimensional Sacrifice is Automated (Achievement 118) `)]):t(`span`,[e._v(`Dimensional Sacrifice Disabled (`+e._s(e.disabledCondition)+`)`)])]),t(`button`,{staticClass:`o-primary-btn l-button-container`,on:{click:e.maxAll}},[e._v(` Max All (M) `)])],1),t(`span`,[e._v(e._s(e.multiplierText))]),t(`TickspeedRow`),t(`div`,{staticClass:`l-dimensions-container`},e._l(8,function(e){return t(`AntimatterDimensionRow`,{key:e,attrs:{tier:e}})}),1),t(`div`,{staticClass:`resets-container`},[t(`DimensionBoostRow`),e.isQuickResetAvailable?t(`PrimaryButton`,{staticClass:`o-primary-btn--quick-reset`,attrs:{onclick:`softReset(-1, true, true)`}},[e._v(` Perform a Dimension Boost reset `),e.hasDimensionBoosts?t(`span`,[e._v(` but lose a Dimension Boost`)]):t(`span`,[e._v(` for no gain`)])]):e._e(),t(`AntimatterGalaxyRow`)],1),t(`AntimatterDimensionProgressBar`)],1)},[],!1,null,`ed03af52`,null,null).exports,YF=r({name:`AntimatterDimensionsTab`,components:{ClassicAntimatterDimensionsTab:HF,ModernAntimatterDimensionsTab:JF},computed:{activeComponent(){return this.$viewModel.newUI?`ModernAntimatterDimensionsTab`:`ClassicAntimatterDimensionsTab`}}}),XF=D(YF,function(){var e=this,t=e._self._c;return e._self._setupProxy,t(e.activeComponent,{tag:`component`})},[],!1,null,null,null,null).exports,ZF=r({name:`AutobuyerToggles`,components:{PrimaryButton:L,PrimaryToggleButton:R},data(){return{isDoomed:!1,autobuyersOn:!1,showContinuum:!1,disableContinuum:!1,allAutobuyersDisabled:!1}},watch:{autobuyersOn(e){player.auto.autobuyersOn=e},disableContinuum(e){if(ImaginaryUpgrade(21).isLockingMechanics&&!e){ImaginaryUpgrade(21).tryShowWarningModal();return}Laitela.setContinuum(!e)}},methods:{update(){this.isDoomed=Pelle.isDoomed,this.autobuyersOn=player.auto.autobuyersOn,this.showContinuum=!0,this.disableContinuum=player.auto.disableContinuum,this.allAutobuyersDisabled=Autobuyers.unlocked.every(e=>!e.isActive)},toggleAllAutobuyers(){for(let e of Autobuyers.unlocked)e.isActive=this.allAutobuyersDisabled}}}),QF=D(ZF,function(){var e=this,t=e._self._c;return e._self._setupProxy,t(`div`,{staticClass:`c-subtab-option-container`},[t(`PrimaryToggleButton`,{staticClass:`o-primary-btn--subtab-option`,attrs:{on:`Pause autobuyers`,off:`Resume autobuyers`},model:{value:e.autobuyersOn,callback:function(t){e.autobuyersOn=t},expression:`autobuyersOn`}}),t(`PrimaryButton`,{staticClass:`o-primary-btn--subtab-option`,on:{click:function(t){return e.toggleAllAutobuyers()}}},[e._v(` `+e._s(e.allAutobuyersDisabled?`Enable`:`Disable`)+` all autobuyers `)]),e.isDoomed?t(`span`,[e.showContinuum?t(`PrimaryButton`,{staticClass:`o-primary-btn--subtab-option`},[e._v(` Continuum is disabled `)]):e._e()],1):t(`span`,[e.showContinuum?t(`PrimaryToggleButton`,{staticClass:`o-primary-btn--subtab-option`,attrs:{on:`Enable Continuum`,off:`Disable Continuum`},model:{value:e.disableContinuum,callback:function(t){e.disableContinuum=t},expression:`disableContinuum`}}):e._e()],1)],1)},[],!1,null,`b455a2be`,null,null).exports,$F={name:`DimensionBulkButton`,props:{autobuyer:{type:Object,required:!0}},data(){return{hasMaxedInterval:!1,hasMaxedBulk:!1,isUnlocked:!1,bulkUnlimited:!1,bulk:1,cost:1,isAffordable:!1}},computed:{bulkDisplay(){if(this.hasMaxedBulk)return`${formatX(this.bulk,2,0)} bulk buy (capped)`;let e=Math.min(this.bulk*2,this.autobuyer.bulkCap);return`${formatX(this.bulk,2,0)} ➜ ${formatX(e,2,0)} bulk buy`},classObject(){return{"o-autobuyer-btn":!0,"o-autobuyer-btn--unavailable":!this.isAffordable&&!this.hasMaxedBulk,"o-non-clickable":this.hasMaxedBulk}}},methods:{update(){let e=this.autobuyer;this.hasMaxedInterval=e.hasMaxedInterval,this.isUnlocked=e.isUnlocked,this.hasMaxedBulk=e.hasMaxedBulk,this.bulkUnlimited=e.hasUnlimitedBulk,this.bulk=e.bulk,this.cost=e.cost,this.isAffordable=Currency.infinityPoints.gte(this.cost)},upgradeBulk(){this.autobuyer.upgradeBulk()}}},eI={name:`DimensionAutobuyerBox`,components:{DimensionBulkButton:D($F,function(){var e=this,t=e._self._c;return e.hasMaxedInterval&&!e.bulkUnlimited&&e.isUnlocked?t(`button`,{class:e.classObject,on:{click:e.upgradeBulk}},[t(`span`,[e._v(e._s(e.bulkDisplay))]),e.hasMaxedBulk?e._e():[t(`br`),t(`span`,[e._v(`Cost: `+e._s(e.format(e.cost,2,0))+` IP`)])]],2):e.hasMaxedInterval&&!e.bulkUnlimited?t(`button`,{staticClass:`o-autobuyer-btn l-autobuyer-box__button o-autobuyer-btn--unavailable`},[e._v(` Complete the challenge to upgrade bulk `)]):e._e()},[],!1,null,`e2968b66`,null,null).exports,AutobuyerBox:DT,AutobuyerIntervalButton:jT},props:{tier:{type:Number,required:!0}},data(){return{mode:AUTOBUYER_MODE.BUY_SINGLE}},computed:{autobuyer(){return Autobuyer.antimatterDimension(this.tier)},name(){return`${AntimatterDimension(this.tier).shortDisplayName} Dimension Autobuyer`},modeDisplay(){switch(this.mode){case AUTOBUYER_MODE.BUY_SINGLE:return`Buys singles`;case AUTOBUYER_MODE.BUY_10:return`Buys max`}throw Error(`Unknown Dimension Autobuyer mode`)}},methods:{update(){this.mode=this.autobuyer.mode},toggleMode(){this.autobuyer.toggleMode(),this.update()}}},tI=D(eI,function(){var e=this,t=e._self._c;return t(`AutobuyerBox`,{attrs:{autobuyer:e.autobuyer,name:e.name,"show-interval":``},scopedSlots:e._u([{key:`intervalSlot`,fn:function(){return[t(`DimensionBulkButton`,{attrs:{autobuyer:e.autobuyer}}),t(`AutobuyerIntervalButton`,{attrs:{autobuyer:e.autobuyer}})]},proxy:!0},{key:`toggleSlot`,fn:function(){return[t(`button`,{staticClass:`o-autobuyer-btn`,on:{click:e.toggleMode}},[e._v(` `+e._s(e.modeDisplay)+` `)])]},proxy:!0}])})},[],!1,null,`d568b419`,null,null).exports,nI=D({name:`OpenModalHotkeysButton`,methods:{handleClick(){Modal.hotkeys.show()}}},function(){var e=this,t=e._self._c;return t(`p`,{staticClass:`c-options-tab__hotkeys-link`,on:{click:e.handleClick}},[e._v(` Press `),t(`kbd`,[e._v(`?`)]),e._v(` to open the hotkey list. `)])},[],!1,null,null,null,null).exports,rI={name:`AutobuyerToggleLabel`,props:{isActive:Boolean,isDisabled:Boolean,name:{type:String,required:!0}},computed:{autobuyerToggleClass(){return this.isDisabled?this.isActive?`fas fa-pause`:`fas fa-times`:this.isActive?`fas fa-check`:`fas fa-times`},autobuyerStateClass(){return this.isDisabled?{"o-autobuyer-toggle-checkbox__label":!0,"o-autobuyer-toggle-checkbox__label--active-paused":this.isActive,"o-autobuyer-toggle-checkbox__label--deactive-paused":!this.isActive,"o-autobuyer-toggle-checkbox__label--disabled":this.isDisabled}:{"o-autobuyer-toggle-checkbox__label":!0,"o-autobuyer-toggle-checkbox__label--active":this.isActive,"o-autobuyer-toggle-checkbox__label--disabled":this.isDisabled}}}},iI=D(rI,function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-autobuyer-box__footer`,on:{click:e.emitClick}},[t(`label`,{class:e.autobuyerStateClass},[t(`span`,{class:e.autobuyerToggleClass})]),t(`input`,{attrs:{disabled:e.isDisabled,name:e.name,type:`checkbox`},domProps:{checked:e.isActive&&!e.isDisabled}})])},[],!1,null,`3a486b82`,null,null).exports,aI={name:`AutobuyerGroupToggleLabel`,components:{AutobuyerToggleLabel:iI},props:{isActive:Boolean,name:{type:String,required:!0}},data(){return{isDisabled:!1}},methods:{update(){this.isDisabled=!player.auto.autobuyersOn}}},oI=D(aI,function(){var e=this,t=e._self._c;return t(`AutobuyerToggleLabel`,{attrs:{"is-active":e.isActive,"is-disabled":e.isDisabled,name:e.name},on:{click:e.emitClick}})},[],!1,null,`1fa007f1`,null,null).exports,sI={name:`AutobuyerModeButton`,props:{autobuyer:{type:Object,required:!0}},data(){return{mode:AUTOBUYER_MODE.BUY_SINGLE}},computed:{modeDisplay(){switch(this.mode){case AUTOBUYER_MODE.BUY_SINGLE:return`Buys singles`;case AUTOBUYER_MODE.BUY_10:return`Buys max`}throw Error(`Unknown Dimension Autobuyer mode`)}},methods:{update(){this.mode=this.autobuyer.mode},toggleMode(){this.autobuyer.toggleMode(),this.update()}}},cI=D(sI,function(){var e=this,t=e._self._c;return t(`button`,{staticClass:`o-autobuyer-btn o-autobuyer-btn--tiny`,on:{click:e.toggleMode}},[e._v(` `+e._s(e.modeDisplay)+` `)])},[],!1,null,`38e67b8d`,null,null).exports,lI={name:`AutobuyerSingleToggleLabel`,components:{AutobuyerToggleLabel:iI},props:{autobuyer:{type:Object,required:!0},parentDisabled:Boolean},data(){return{isActive:!1,isDisabled:!1}},computed:{name(){return this.autobuyer.name}},methods:{update(){this.isActive=this.autobuyer.isActive,this.isDisabled=!player.auto.autobuyersOn||this.parentDisabled},toggle(){this.autobuyer.toggle()}}},uI=D(lI,function(){var e=this,t=e._self._c;return t(`AutobuyerToggleLabel`,{attrs:{"is-active":e.isActive,"is-disabled":e.isDisabled,name:e.name},on:{click:e.toggle}})},[],!1,null,`6e66e06b`,null,null).exports,dI={name:`SingleAutobuyerInRow`,components:{AutobuyerSingleToggleLabel:uI,AutobuyerIntervalLabel:TT,AutobuyerModeButton:cI},props:{autobuyer:{type:Object,required:!0},showIndividual:Boolean,parentDisabled:Boolean},data(){return{isVisible:!1}},computed:{name(){return this.autobuyer.name},hasMode(){return this.autobuyer.mode!==void 0}},methods:{update(){let e=this.autobuyer;this.isVisible=e.isUnlocked||e.isBought}}},fI=D(dI,function(){var e=this,t=e._self._c;return e.isVisible?t(`span`,{staticClass:`c-autobuyer-box-slot`},[t(`AutobuyerSingleToggleLabel`,{attrs:{autobuyer:e.autobuyer,"parent-disabled":e.parentDisabled}}),e._v(` `+e._s(e.name)+` `),e.showIndividual?t(`AutobuyerIntervalLabel`,{attrs:{autobuyer:e.autobuyer}}):e._e(),e.hasMode?t(`AutobuyerModeButton`,{attrs:{autobuyer:e.autobuyer}}):e._e()],1):e._e()},[],!1,null,`f3c9f40e`,null,null).exports,pI={name:`MultipleAutobuyersBox`,components:{AutobuyerIntervalLabel:TT,AutobuyerGroupToggleLabel:oI,SingleAutobuyerInRow:fI},props:{type:{type:Function,required:!0}},data(){return{continuumActive:!1,anyUnlocked:!1,displayLabelAsGroup:!1,parentActive:!1}},computed:{autobuyers(){return this.type.zeroIndexed},name(){return this.type.groupName},entryCount(){return this.type.entryCount},rowCount(){return Math.ceil(this.entryCount/8)},entryCountPerRow(){return this.rowCount===1?this.entryCount:5},boxSize(){return`flex: 1 0 ${100/this.entryCountPerRow-1}%`},isADBox(){return this.name===Autobuyer.antimatterDimension.groupName},showAutobuyers(){return this.isADBox?this.anyUnlocked&&this.displayLabelAsGroup:this.anyUnlocked}},methods:{update(){this.continuumActive=Laitela.continuumActive;let e=this.type;this.anyUnlocked=e.anyUnlocked,this.displayLabelAsGroup=(e.allMaxedInterval??!0)&&(e.allUnlimitedBulk??!0),this.parentActive=e.isActive},toggleGroup(){this.type.toggle()}}},mI=D(pI,function(){var e=this,t=e._self._c;return e.showAutobuyers&&!(e.isADBox&&e.continuumActive)?t(`span`,{staticClass:`c-autobuyer-box-row`},[t(`AutobuyerGroupToggleLabel`,{attrs:{"is-active":e.parentActive,name:e.name},on:{click:e.toggleGroup}}),t(`div`,{staticClass:`l-autobuyer-box__title`},[e._v(` `+e._s(e.name)),t(`br`),e._v(`Autobuyers `),e.displayLabelAsGroup?t(`AutobuyerIntervalLabel`,{attrs:{autobuyer:e.autobuyers[0]}}):e._e()],1),t(`div`,{staticClass:`l-autobuyer-box__autobuyers`},[e._l(e.autobuyers,function(n,r){return[t(`SingleAutobuyerInRow`,{key:r,staticClass:`l-autobuyer-box__autobuyers-internal`,style:e.boxSize,attrs:{autobuyer:n,"show-individual":!e.displayLabelAsGroup,"parent-disabled":!e.parentActive}}),r%e.entryCountPerRow===e.entryCountPerRow?t(`br`,{key:r}):e._e()]})],2)],1):e.isADBox&&e.continuumActive?t(`span`,{staticClass:`c-autobuyer-box-row`},[e._v(` Continuum replaces your Antimatter Dimension and Tickspeed Autobuyers, as your production multipliers `),t(`br`),e._v(` now automatically and continuously scale based on how many purchases you would have had otherwise. `)]):e._e()},[],!1,null,`459f490b`,null,null).exports,hI={name:`SingleAutobuyerBox`,components:{AutobuyerSingleToggleLabel:uI,AutobuyerIntervalLabel:TT,AutobuyerInput:F},props:{autobuyer:{type:Object,required:!0}},data(){return{isUnlocked:!1,isHiddenSacrifice:!1}},computed:{name(){return this.autobuyer.name},isSacrifice(){return this.name===`Dimensional Sacrifice`}},methods:{update(){this.isUnlocked=this.autobuyer.isUnlocked,this.isHiddenSacrifice=this.isSacrifice&&Achievement(118).canBeApplied}}},gI={name:`MultipleSingleAutobuyersGroup`,components:{SingleAutobuyerBox:D(hI,function(){var e=this,t=e._self._c;return e.isUnlocked?t(`span`,{staticClass:`c-autobuyer-box-row`},[t(`AutobuyerSingleToggleLabel`,{attrs:{autobuyer:e.autobuyer}}),t(`div`,[e._v(` `+e._s(e.name)+` `),t(`AutobuyerIntervalLabel`,{attrs:{autobuyer:e.autobuyer}}),e.isHiddenSacrifice?t(`b`,{staticClass:`c-autobuyer-box__small-text`},[e._v(` Automatic (Achievement 118) `)]):e.autobuyer.hasInput?t(`span`,{staticClass:`c-autobuyer-box__small-text`},[e._v(` Multiplier: `),t(`AutobuyerInput`,{staticClass:`c-small-autobuyer-input`,attrs:{autobuyer:e.autobuyer,type:e.autobuyer.inputType,property:e.autobuyer.inputEntry}})],1):e._e()],1)],1):e._e()},[],!1,null,`6cf5de11`,null,null).exports},computed:{singles(){return Autobuyers.display[1]},entryCount(){return this.singles.length},rowCount(){return Math.ceil(this.entryCount/4)},entryCountPerRow(){return this.rowCount===1?this.entryCount:4},boxSize(){return`flex: 1 0 ${100/this.entryCountPerRow-2}%`}}},_I=D(gI,function(){var e=this,t=e._self._c;return t(`span`,{staticClass:`l-autobuyer-singlet-group`},[e._l(e.singles,function(n,r){return[t(`SingleAutobuyerBox`,{key:r,style:e.boxSize,attrs:{autobuyer:n}}),r%e.entryCountPerRow===e.entryCountPerRow?t(`br`,{key:r}):e._e()]})],2)},[],!1,null,`47332f28`,null,null).exports,vI=D({name:`SimpleAutobuyersMultiBox`,components:{MultipleAutobuyersBox:mI,MultipleSingleAutobuyersGroup:_I},computed:{multiple(){return Autobuyers.display[0]}}},function(){var e=this,t=e._self._c;return t(`span`,{staticClass:`l-autobuyers-tab`},[e._l(e.multiple,function(e,n){return t(`MultipleAutobuyersBox`,{key:n,attrs:{type:e}})}),t(`MultipleSingleAutobuyersGroup`)],2)},[],!1,null,`70e257ef`,null,null).exports,yI=D({name:`TickspeedAutobuyerBox`,components:{AutobuyerBox:DT,AutobuyerIntervalButton:jT},data(){return{mode:AUTOBUYER_MODE.BUY_SINGLE,isUnlocked:!1}},computed:{autobuyer:()=>Autobuyer.tickspeed,modeDisplay(){switch(this.mode){case AUTOBUYER_MODE.BUY_SINGLE:return`Buys singles`;case AUTOBUYER_MODE.BUY_MAX:return`Buys max`}throw Error(`Unknown tickspeed autobuyer mode`)}},methods:{update(){this.mode=this.autobuyer.mode,this.isUnlocked=this.autobuyer.isUnlocked},toggleMode(){this.autobuyer.toggleMode(),this.update()}}},function(){var e=this,t=e._self._c;return t(`AutobuyerBox`,{attrs:{autobuyer:e.autobuyer,name:`Tickspeed Autobuyer`,"show-interval":``},scopedSlots:e._u([{key:`intervalSlot`,fn:function(){return[t(`AutobuyerIntervalButton`,{attrs:{autobuyer:e.autobuyer}})]},proxy:!0},{key:`toggleSlot`,fn:function(){return[e.isUnlocked?t(`button`,{staticClass:`o-autobuyer-btn`,on:{click:e.toggleMode}},[e._v(` `+e._s(e.modeDisplay)+` `)]):t(`button`,{staticClass:`o-autobuyer-btn o-autobuyer-btn--unavailable`},[e._v(` Complete the challenge to change mode `)])]},proxy:!0}])})},[],!1,null,`0e05cd02`,null,null).exports,bI=r({name:`AutobuyersTab`,components:{AutobuyerToggles:QF,OpenModalHotkeysButton:nI,RealityAutobuyerBox:VT,EternityAutobuyerBox:LT,BigCrunchAutobuyerBox:NT,GalaxyAutobuyerBox:zT,DimensionBoostAutobuyerBox:FT,TickspeedAutobuyerBox:yI,DimensionAutobuyerBox:tI,SimpleAutobuyersMultiBox:vI},data(){return{hasInfinity:!1,hasContinuum:!1,displayADAutobuyersIndividually:!1,hasInstant:!1}},computed:{hasSeenGamespeedAlteringEffects(){return PlayerProgress.seenAlteredSpeed()},gameTickLength(){return`${formatInt(player.options.updateRate)} ms`}},methods:{update(){this.hasInfinity=PlayerProgress.infinityUnlocked(),this.hasContinuum=Laitela.continuumActive,this.checkADAutoStatus()},checkADAutoStatus(){let e=Autobuyer.antimatterDimension;if(Pelle.isDoomed){this.displayADAutobuyersIndividually=!e.zeroIndexed.filter(e=>e.isUnlocked).every(e=>e.hasUnlimitedBulk&&e.hasMaxedInterval);return}this.hasInstant=e.hasInstant,this.displayADAutobuyersIndividually=!e.collapseDisplay}}}),xI=D(bI,function(){var e=this,t=e._self._c;return e._self._setupProxy,t(`div`,{staticClass:`l-autobuyers-tab`},[t(`AutobuyerToggles`),t(`OpenModalHotkeysButton`),e.hasSeenGamespeedAlteringEffects?t(`div`,[e._v(` Autobuyer intervals and time-based settings are always `),t(`b`,[e._v(`real time`)]),e._v(` and therefore `),t(`br`),e._v(` unaffected by anything which may alter how fast the game itself is running. `),t(`br`),t(`br`)]):e._e(),e.hasInfinity?e._e():t(`div`,[e._v(` Challenges for upgrading autobuyers are unlocked by reaching Infinity. `)]),t(`b`,[e._v(`Autobuyers with no displayed bulk have unlimited bulk by default.`)]),t(`b`,[e._v(` Antimatter Dimension Autobuyers can have their bulk upgraded once interval is below `+e._s(e.formatInt(100))+` ms. `)]),e.hasInstant?t(`b`,[e._v(`Autobuyers with "Instant" interval will trigger every game tick (`+e._s(e.gameTickLength)+`).`)]):e._e(),t(`RealityAutobuyerBox`,{staticClass:`c-reality-pos`}),t(`EternityAutobuyerBox`,{staticClass:`c-eternity-pos`}),t(`BigCrunchAutobuyerBox`,{staticClass:`c-infinity-pos`}),t(`GalaxyAutobuyerBox`),t(`DimensionBoostAutobuyerBox`),e.hasContinuum?e._e():t(`TickspeedAutobuyerBox`),e.displayADAutobuyersIndividually?e._l(8,function(e){return t(`DimensionAutobuyerBox`,{key:e,attrs:{tier:e}})}):e._e(),t(`SimpleAutobuyersMultiBox`)],2)},[],!1,null,`3fa70e05`,null,null).exports,SI=e(n(((exports,t)=>{(function(n,r){typeof exports==`object`&&typeof t==`object`?t.exports=r():typeof define==`function`&&define.amd?define(`SplitPane`,[],r):typeof exports==`object`?exports.SplitPane=r():n.SplitPane=r()})(exports,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,`a`,n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=`/dist/`,t(t.s=7)}([function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push(`@media `+n[2]+`{`+n[1]+`}`):e.push(n[1])}return e.join(``)},e.i=function(t,n){typeof t==`string`&&(t=[[null,t,``]]);for(var r={},i=0;i<this.length;i++){var a=this[i][0];typeof a==`number`&&(r[a]=!0)}for(i=0;i<t.length;i++){var o=t[i];typeof o[0]==`number`&&r[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]=`(`+o[2]+`) and (`+n+`)`),e.push(o))}},e}},function(e,t){e.exports=function(e,t,n,r){var i,a=e||={},o=typeof e.default;o!==`object`&&o!==`function`||(i=e,a=e.default);var s=typeof a==`function`?a.options:a;if(t&&(s.render=t.render,s.staticRenderFns=t.staticRenderFns),n&&(s._scopeId=n),r){var c=Object.create(s.computed||null);Object.keys(r).forEach(function(e){var t=r[e];c[e]=function(){return t}}),s.computed=c}return{esModule:i,exports:a,options:s}}},function(e,t,n){function r(e){for(var t=0;t<e.length;t++){var n=e[t],r=u[n.id];if(r){r.refs++;for(var i=0;i<r.parts.length;i++)r.parts[i](n.parts[i]);for(;i<n.parts.length;i++)r.parts.push(a(n.parts[i]));r.parts.length>n.parts.length&&(r.parts.length=n.parts.length)}else{for(var o=[],i=0;i<n.parts.length;i++)o.push(a(n.parts[i]));u[n.id]={id:n.id,refs:1,parts:o}}}}function i(){var e=document.createElement(`style`);return e.type=`text/css`,d.appendChild(e),e}function a(e){var t,n,r=document.querySelector(`style[data-vue-ssr-id~="`+e.id+`"]`);if(r){if(m)return h;r.parentNode.removeChild(r)}if(g){var a=p++;r=f||=i(),t=o.bind(null,r,a,!1),n=o.bind(null,r,a,!0)}else r=i(),t=s.bind(null,r),n=function(){r.parentNode.removeChild(r)};return t(e),function(r){if(r){if(r.css===e.css&&r.media===e.media&&r.sourceMap===e.sourceMap)return;t(e=r)}else n()}}function o(e,t,n,r){var i=n?``:r.css;if(e.styleSheet)e.styleSheet.cssText=_(t,i);else{var a=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function s(e,t){var n=t.css,r=t.media,i=t.sourceMap;if(r&&e.setAttribute(`media`,r),i&&(n+=`
/*# sourceURL=`+i.sources[0]+` */`,n+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+` */`),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var c=typeof document<`u`;if(typeof DEBUG<`u`&&DEBUG&&!c)throw Error(`vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.`);var l=n(19),u={},d=c&&(document.head||document.getElementsByTagName(`head`)[0]),f=null,p=0,m=!1,h=function(){},g=typeof navigator<`u`&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());e.exports=function(e,t,n){m=n;var i=l(e,t);return r(i),function(t){for(var n=[],a=0;a<i.length;a++){var o=i[a],s=u[o.id];s.refs--,n.push(s)}t?(i=l(e,t),r(i)):i=[];for(var a=0;a<n.length;a++){var s=n[a];if(s.refs===0){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete u[s.id]}}}};var _=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join(`
`)}}()},function(e,t,n){n(17),e.exports=n(1)(n(4),n(14),`data-v-566a42b8`,null).exports},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,`__esModule`,{value:!0});var i=n(12),a=r(i),o=n(11),s=r(o);t.default={name:`splitPane`,components:{Resizer:a.default,Pane:s.default},props:{minPercent:{type:Number,default:10},defaultPercent:{type:Number,default:50},split:{validator:function(e){return[`vertical`,`horizontal`].indexOf(e)>=0},required:!0},className:String},computed:{userSelect:function(){return this.active?`none`:``},cursor:function(){return this.active?this.split===`vertical`?`col-resize`:`row-resize`:``}},watch:{defaultPercent:function(e,t){this.percent=e}},data:function(){return{active:!1,hasMoved:!1,height:null,percent:this.defaultPercent,type:this.split===`vertical`?`width`:`height`,resizeType:this.split===`vertical`?`left`:`top`}},methods:{onClick:function(){this.hasMoved||(this.percent=50,this.$emit(`resize`,this.percent))},onMouseDown:function(){this.active=!0,this.hasMoved=!1},onMouseUp:function(){this.active=!1},onMouseMove:function(e){if(e.buttons!==0&&e.which!==0||(this.active=!1),this.active){var t=0,n=e.currentTarget;if(this.split===`vertical`)for(;n;)t+=n.offsetLeft,n=n.offsetParent;else for(;n;)t+=n.offsetTop,n=n.offsetParent;var r=this.split===`vertical`?e.pageX:e.pageY,i=this.split===`vertical`?e.currentTarget.offsetWidth:e.currentTarget.offsetHeight,a=Math.floor((r-t)/i*1e4)/100;a>this.minPercent&&a<100-this.minPercent&&(this.percent=a),this.$emit(`resize`,this.percent),this.hasMoved=!0}}}}},function(e,t,n){Object.defineProperty(t,`__esModule`,{value:!0}),t.default={name:`Pane`,props:{className:String},data:function(){return{classes:[this.$parent.split,this.className].join(` `),percent:50}}}},function(e,t,n){Object.defineProperty(t,`__esModule`,{value:!0}),t.default={props:{split:{validator:function(e){return[`vertical`,`horizontal`].indexOf(e)>=0},required:!0},className:String},computed:{classes:function(){return[`splitter-pane-resizer`,this.split,this.className].join(` `)}}}},function(e,t,n){Object.defineProperty(t,`__esModule`,{value:!0});var r=n(3),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=i.default,typeof window<`u`&&window.Vue&&window.Vue.component(`split-pane`,i.default)},function(e,t,n){t=e.exports=n(0)(),t.push([e.i,`.splitter-pane-resizer[data-v-212fa2a4]{box-sizing:border-box;background:#000;position:absolute;opacity:.2;z-index:1;background-clip:padding-box}.splitter-pane-resizer.horizontal[data-v-212fa2a4]{height:11px;margin:-5px 0;border-top:5px solid hsla(0,0%,100%,0);border-bottom:5px solid hsla(0,0%,100%,0);cursor:row-resize;width:100%}.splitter-pane-resizer.vertical[data-v-212fa2a4]{width:11px;height:100%;margin-left:-5px;border-left:5px solid hsla(0,0%,100%,0);border-right:5px solid hsla(0,0%,100%,0);cursor:col-resize}`,``])},function(e,t,n){t=e.exports=n(0)(),t.push([e.i,`.clearfix[data-v-566a42b8]:after{visibility:hidden;display:block;font-size:0;content:" ";clear:both;height:0}.vue-splitter-container[data-v-566a42b8]{height:100%;position:relative}.vue-splitter-container-mask[data-v-566a42b8]{z-index:9999;width:100%;height:100%;position:absolute;top:0;left:0}`,``])},function(e,t,n){t=e.exports=n(0)(),t.push([e.i,`.splitter-pane.vertical.splitter-paneL[data-v-815c801c]{position:absolute;left:0;height:100%;padding-right:3px}.splitter-pane.vertical.splitter-paneR[data-v-815c801c]{position:absolute;right:0;height:100%;padding-left:3px}.splitter-pane.horizontal.splitter-paneL[data-v-815c801c]{position:absolute;top:0;width:100%}.splitter-pane.horizontal.splitter-paneR[data-v-815c801c]{position:absolute;bottom:0;width:100%;padding-top:3px}`,``])},function(e,t,n){n(18),e.exports=n(1)(n(5),n(15),`data-v-815c801c`,null).exports},function(e,t,n){n(16),e.exports=n(1)(n(6),n(13),`data-v-212fa2a4`,null).exports},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)(`div`,{class:e.classes})},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e,t,n,r=this,i=r.$createElement,a=r._self._c||i;return a(`div`,{staticClass:`vue-splitter-container clearfix`,style:{cursor:r.cursor,userSelect:r.userSelect},on:{mouseup:r.onMouseUp,mousemove:r.onMouseMove}},[a(`pane`,{staticClass:`splitter-pane splitter-paneL`,style:(e={},e[r.type]=r.percent+`%`,e),attrs:{split:r.split}},[r._t(`paneL`)],2),r._v(` `),a(`resizer`,{style:(t={},t[r.resizeType]=r.percent+`%`,t),attrs:{className:r.className,split:r.split},nativeOn:{mousedown:function(e){return r.onMouseDown(e)},click:function(e){return r.onClick(e)}}}),r._v(` `),a(`pane`,{staticClass:`splitter-pane splitter-paneR`,style:(n={},n[r.type]=100-r.percent+`%`,n),attrs:{split:r.split}},[r._t(`paneR`)],2),r._v(` `),r.active?a(`div`,{staticClass:`vue-splitter-container-mask`}):r._e()],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)(`div`,{class:e.classes},[e._t(`default`)],2)},staticRenderFns:[]}},function(e,t,n){var r=n(8);typeof r==`string`&&(r=[[e.i,r,``]]),r.locals&&(e.exports=r.locals),n(2)(`a82a4610`,r,!0)},function(e,t,n){var r=n(9);typeof r==`string`&&(r=[[e.i,r,``]]),r.locals&&(e.exports=r.locals),n(2)(`033d59ad`,r,!0)},function(e,t,n){var r=n(10);typeof r==`string`&&(r=[[e.i,r,``]]),r.locals&&(e.exports=r.locals),n(2)(`6816c93c`,r,!0)},function(e,t){e.exports=function(e,t){for(var n=[],r={},i=0;i<t.length;i++){var a=t[i],o=a[0],s=a[1],c=a[2],l=a[3],u={id:e+`:`+i,css:s,media:c,sourceMap:l};r[o]?r[o].parts.push(u):n.push(r[o]={id:o,parts:[u]})}return n}}])})}))()),CI=D({name:`AutomatorModeSwitch`,data(){return{automatorType:0}},computed:{currentScriptID:{get(){return this.$viewModel.tabs.reality.automator.editorScriptID},set(e){this.$viewModel.tabs.reality.automator.editorScriptID=e}},currentScriptContent(){return player.reality.automator.scripts[this.currentScriptID].content},currentScript(){return CodeMirror.Doc(this.currentScriptContent,`automato`).getValue()},isTextAutomator(){return this.automatorType===AUTOMATOR_TYPE.TEXT},automatorModeTooltip(){return this.automatorType===AUTOMATOR_TYPE.BLOCK?`Switch to the text editor`:`Switch to the block editor`},tutorialClass(){return{"tutorial--glow":ui.view.tutorialState===TUTORIAL_STATE.AUTOMATOR&&ui.view.tutorialActive}}},created(){this.on$(GAME_EVENT.GAME_LOAD,()=>this.onGameLoad()),this.on$(GAME_EVENT.AUTOMATOR_SAVE_CHANGED,()=>this.onGameLoad()),this.updateCurrentScriptID()},methods:{update(){this.automatorType=player.reality.automator.type},onGameLoad(){this.updateCurrentScriptID()},updateCurrentScriptID(){let e=player.reality.automator.scripts;this.currentScriptID=player.reality.automator.state.editorScript,e[this.currentScriptID]===void 0&&(this.currentScriptID=Object.keys(e)[0],player.reality.automator.state.editorScript=this.currentScriptID,AutomatorData.clearUndoData()),BlockAutomator.hasUnparsableCommands(this.currentScript)&&player.reality.automator.type===AUTOMATOR_TYPE.BLOCK&&(Modal.message.show(`Some script commands were unrecognizable - defaulting to text editor.`),AutomatorBackend.changeModes(this.currentScriptID)),this.$nextTick(()=>BlockAutomator.updateEditor(this.currentScript))},toggleAutomatorMode(){let e=player.reality.automator.scripts[this.currentScriptID].content,t=this.automatorType===AUTOMATOR_TYPE.TEXT&&(BlockAutomator.hasUnparsableCommands(e)||AutomatorData.currentErrors().length>0);if(player.options.confirmations.switchAutomatorMode&&(t||AutomatorBackend.isRunning)){let t=b(e),n=this.automatorType===AUTOMATOR_TYPE.TEXT?t.validatedBlocks-t.visitedBlocks:0;Modal.switchAutomatorEditorMode.show({callBack:()=>this.$recompute(`currentScriptContent`),lostBlocks:n})}else AutomatorBackend.changeModes(this.currentScriptID);AutomatorData.clearUndoData()}}},function(){var e=this,t=e._self._c;return t(`button`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:{content:e.automatorModeTooltip,hideOnTargetClick:!1},expression:`{
    content: automatorModeTooltip,
    hideOnTargetClick: false
  }`}],class:{"c-slider-toggle-button":!0,"c-slider-toggle-button--right":e.isTextAutomator,...e.tutorialClass},on:{click:e.toggleAutomatorMode}},[t(`i`,{staticClass:`fas fa-cubes`}),t(`i`,{staticClass:`fas fa-code`})])},[],!1,null,`efbb89d2`,null,null).exports,wI=D({name:`AutomatorControls`,components:{AutomatorButton:_t,AutomatorModeSwitch:CI},data(){return{isRunning:!1,isPaused:!1,repeatOn:!1,justCompleted:!1,forceRestartOn:!1,followExecution:!1,hasErrors:!1,currentLine:0,statusName:``,editingName:``,editingDifferentScript:!1,currentChars:0,hasUndo:!1,hasRedo:!1}},computed:{fullScreen(){return this.$viewModel.tabs.reality.automator.fullScreen},currentScriptID(){return this.$viewModel.tabs.reality.automator.editorScriptID},playTooltip(){return this.isPaused?`Resume Automator execution`:this.isRunning?`Pause Automator execution`:`Start Automator`},playButtonClass(){return{"c-automator__button--active":this.isRunning,"fa-play":!this.isRunning&&!this.isPaused,"fa-pause":this.isRunning,"fa-eject":this.isPaused}},statusText(){let e=Math.clampMin(Math.ceil(Math.log10(AutomatorBackend.currentScriptLength+1)),1),t=`0000${this.currentLine}`;return t=t.slice(t.length-e),this.isPaused?`Paused: "${this.statusName}" (Resumes on Line ${t})`:this.isRunning?`Running: "${this.statusName}" (Line ${t})`:this.hasErrors?`Stopped: "${this.statusName}" has errors (Cannot run)`:`Stopped: Will start running "${this.statusName}"`},maxScriptChars(){return AutomatorData.MAX_ALLOWED_SCRIPT_CHARACTERS}},methods:{update(){this.isRunning=AutomatorBackend.isRunning,this.isPaused=AutomatorBackend.isOn&&!this.isRunning,this.repeatOn=AutomatorBackend.state.repeat,this.justCompleted=AutomatorBackend.hasJustCompleted,this.forceRestartOn=AutomatorBackend.state.forceRestart,this.followExecution=AutomatorBackend.state.followExecution,this.hasErrors=AutomatorData.currentErrors().length>0,this.currentLine=AutomatorBackend.currentLineNumber,this.statusName=this.isPaused||this.isRunning?AutomatorBackend.scriptName:AutomatorBackend.currentEditingScript.name,this.duplicateStatus=AutomatorBackend.hasDuplicateName(this.statusName),this.editingDifferentScript=(this.isRunning||this.isPaused)&&AutomatorBackend.currentEditingScript.id!==AutomatorBackend.currentRunningScript.id,this.currentChars=AutomatorData.singleScriptCharacters(),this.hasUndo=AutomatorData.undoBuffer.length>0,this.hasRedo=AutomatorData.redoBuffer.length>0},rewind:()=>AutomatorBackend.restart(),play(){if(this.hasErrors){AutomatorBackend.mode=AUTOMATOR_MODE.PAUSED;return}if(this.isRunning){AutomatorBackend.pause();return}player.reality.automator.type===AUTOMATOR_TYPE.BLOCK&&this.$emit(`automatorplay`),AutomatorBackend.isOn?AutomatorBackend.mode=AUTOMATOR_MODE.RUN:AutomatorBackend.start(this.currentScriptID)},stop:()=>AutomatorBackend.stop(),step(){AutomatorBackend.isOn?AutomatorBackend.mode=AUTOMATOR_MODE.SINGLE_STEP:AutomatorBackend.start(this.currentScriptID,AUTOMATOR_MODE.SINGLE_STEP)},repeat:()=>AutomatorBackend.toggleRepeat(),restart:()=>AutomatorBackend.toggleForceRestart(),follow:()=>AutomatorBackend.toggleFollowExecution(),undo:()=>AutomatorData.undoScriptEdit(),redo:()=>AutomatorData.redoScriptEdit()}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`c-automator__controls l-automator__controls`},[t(`div`,{staticClass:`c-automator-control-row l-automator-button-row`},[t(`div`,{staticClass:`c-button-group`},[t(`AutomatorButton`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:`Rewind Automator to the first command`,expression:`'Rewind Automator to the first command'`}],staticClass:`fa-fast-backward`,on:{click:e.rewind}}),t(`AutomatorButton`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:{content:e.playTooltip,hideOnTargetClick:!1},expression:`{
          content: playTooltip,
          hideOnTargetClick: false
        }`}],class:e.playButtonClass,on:{click:e.play}}),t(`AutomatorButton`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:`Stop Automator and reset position`,expression:`'Stop Automator and reset position'`}],staticClass:`fa-stop`,on:{click:e.stop}}),t(`AutomatorButton`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:`Step forward one line`,expression:`'Step forward one line'`}],staticClass:`fa-step-forward`,on:{click:e.step}}),t(`AutomatorButton`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:`Restart script automatically when it reaches the end`,expression:`'Restart script automatically when it reaches the end'`}],staticClass:`fa-sync-alt`,class:{"c-automator__button--active":e.repeatOn},on:{click:e.repeat}}),t(`AutomatorButton`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:`Automatically restart the active script when finishing or restarting a Reality`,expression:`'Automatically restart the active script when finishing or restarting a Reality'`}],staticClass:`fa-reply`,class:{"c-automator__button--active":e.forceRestartOn},on:{click:e.restart}}),t(`AutomatorButton`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:`Scroll Automator to follow current line`,expression:`'Scroll Automator to follow current line'`}],staticClass:`fa-indent`,class:{"c-automator__button--active":e.followExecution},on:{click:e.follow}}),e.fullScreen?t(`span`,{staticClass:`c-automator__status-text c-automator__status-text--small`,class:{"c-automator__status-text--error":e.currentChars>e.maxScriptChars}},[e._v(` This script: `+e._s(e.formatInt(e.currentChars))+`/`+e._s(e.formatInt(e.maxScriptChars))+` `)]):e._e()],1),t(`div`,{staticClass:`c-button-group`},[t(`AutomatorButton`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:`Undo`,expression:`'Undo'`}],staticClass:`fa-arrow-rotate-left`,class:{"c-automator__button--inactive":!e.hasUndo},on:{click:e.undo}}),t(`AutomatorButton`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:`Redo`,expression:`'Redo'`}],staticClass:`fa-arrow-rotate-right`,class:{"c-automator__button--inactive":!e.hasRedo},on:{click:e.redo}}),t(`AutomatorModeSwitch`)],1)]),t(`div`,{staticClass:`l-automator-button-row`},[e.duplicateStatus?t(`span`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:`More than one script has this name!`,expression:`'More than one script has this name!'`}],staticClass:`fas fa-exclamation-triangle c-automator__status-text c-automator__status-text--error`}):e._e(),e.editingDifferentScript?t(`span`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:`The automator is running a different script than the editor is showing`,expression:`'The automator is running a different script than the editor is showing'`}],staticClass:`fas fa-circle-exclamation c-automator__status-text c-automator__status-text--warning`}):e._e(),e.justCompleted?t(`span`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:`The automator completed running the previous script`,expression:`'The automator completed running the previous script'`}],staticClass:`fas fa-circle-check c-automator__status-text`}):e._e(),t(`span`,{staticClass:`c-automator__status-text`,class:{"c-automator__status-text--error":e.hasErrors&&!(e.isRunning||e.isPaused)}},[e._v(` `+e._s(e.statusText)+` `)])])])},[],!1,null,`f14e7100`,null,null).exports,TI=D({name:`AutomatorEditor`,components:{AutomatorBlockEditor:T,AutomatorTextEditor:k,AutomatorControls:wI},data(){return{automatorType:0}},computed:{currentScriptID:{get(){return this.$viewModel.tabs.reality.automator.editorScriptID},set(e){this.$viewModel.tabs.reality.automator.editorScriptID=e}},currentScriptContent(){return player.reality.automator.scripts[this.currentScriptID].content},currentScript(){return CodeMirror.Doc(this.currentScriptContent,`automato`).getValue()},isTextAutomator(){return this.automatorType===AUTOMATOR_TYPE.TEXT}},created(){this.on$(GAME_EVENT.GAME_LOAD,()=>this.onGameLoad()),this.on$(GAME_EVENT.AUTOMATOR_SAVE_CHANGED,()=>this.onGameLoad()),this.updateCurrentScriptID()},methods:{update(){this.automatorType=player.reality.automator.type,!AutomatorBackend.isOn&&AutomatorTextUI.editor&&AutomatorData.needsRecompile&&AutomatorTextUI.editor.performLint()},onGameLoad(){this.updateCurrentScriptID()},updateCurrentScriptID(){let e=player.reality.automator.scripts;if(this.currentScriptID=player.reality.automator.state.editorScript,e[this.currentScriptID]===void 0&&(this.currentScriptID=Number(Object.keys(e)[0]),player.reality.automator.state.editorScript=this.currentScriptID,AutomatorData.clearUndoData()),BlockAutomator.hasUnparsableCommands(this.currentScript)&&player.reality.automator.type===AUTOMATOR_TYPE.BLOCK){Modal.message.show(`Some incomplete blocks were unrecognizable - defaulting to text editor.`);let e=AutomatorData.currentScriptText();AutomatorBackend.changeModes(this.currentScriptID),player.reality.automator.scripts[this.currentScriptID].content=e,this.automatorType=AUTOMATOR_TYPE.TEXT}this.$nextTick(()=>BlockAutomator.updateEditor(this.currentScript))}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-automator-pane`},[t(`AutomatorControls`),e.isTextAutomator?t(`AutomatorTextEditor`,{attrs:{"current-script-id":e.currentScriptID}}):e._e(),e.isTextAutomator?e._e():t(`AutomatorBlockEditor`)],1)},[],!1,null,`d9c3a144`,null,null).exports,EI=D({name:`AutomatorPointsList`,data(){return{totalPoints:0}},computed:{pointsForAutomator:()=>AutomatorPoints.pointsForAutomator,fromPerks:()=>AutomatorPoints.pointsFromPerks,fromUpgrades:()=>AutomatorPoints.pointsFromUpgrades,perkSources:()=>AutomatorPoints.perks,upgradeSources:()=>AutomatorPoints.upgrades,otherSources:()=>GameDatabase.reality.automator.otherAutomatorPoints,automatorInterval:()=>AutomatorBackend.currentInterval},methods:{update(){this.totalPoints=AutomatorPoints.totalPoints},textColor(e){return{color:e?`var(--color-good)`:`var(--color-bad)`}}}},function(){var e=this,t=e._self._c;return t(`div`,[t(`div`,{staticClass:`l-header`},[e._v(` You have `+e._s(e.formatInt(e.totalPoints))+` / `+e._s(e.formatInt(e.pointsForAutomator))+` Automator Points towards unlocking the Automator. `),t(`br`),e._v(` You gain Automator Points from the following sources: `)]),t(`div`,{staticClass:`l-automator-points-list-container`},[t(`div`,{staticClass:`l-automator-points-list-side-col c-automator-points-list-col`},[t(`span`,{staticClass:`c-automator-points-list-symbol fas fa-project-diagram`}),t(`span`,{staticClass:`c-automator-points-list-ap--large`},[e._v(e._s(e.formatInt(e.fromPerks))+` AP`)]),t(`span`,{staticClass:`l-large-text`},[e._v(` Perks `)]),e._l(e.perkSources,function(n){return t(`div`,{key:n.id,staticClass:`c-automator-points-list-single-entry`,style:e.textColor(n.isBought)},[t(`span`,{staticClass:`c-automator-points-list-perk-label`},[e._v(e._s(n.label))]),e._v(` - `+e._s(n.shortDescription)+` `),t(`span`,{staticClass:`c-automator-points-list-ap`},[e._v(e._s(e.formatInt(n.automatorPoints))+` AP`)])])})],2),t(`div`,{staticClass:`l-automator-points-list-center-col`},e._l(e.otherSources,function(n){return t(`div`,{key:n.name,staticClass:`c-automator-points-list-cell`},[t(`span`,{staticClass:`c-automator-points-list-ap--large`},[e._v(e._s(e.formatInt(n.automatorPoints()))+` AP`)]),t(`span`,{staticClass:`l-large-text`},[e._v(` `+e._s(n.name)+` `)]),t(`br`),t(`br`),t(`span`,{style:e.textColor(n.automatorPoints()>0)},[e._v(` `+e._s(n.shortDescription())+` `)]),t(`span`,{staticClass:`c-automator-points-list-symbol`,domProps:{innerHTML:e._s(n.symbol)}})])}),0),t(`div`,{staticClass:`l-automator-points-list-side-col c-automator-points-list-col`},[t(`span`,{staticClass:`c-automator-points-list-symbol fas fa-arrow-up`}),t(`span`,{staticClass:`c-automator-points-list-ap--large`},[e._v(e._s(e.formatInt(e.fromUpgrades))+` AP`)]),t(`span`,{staticClass:`l-large-text`},[e._v(` Reality Upgrades `)]),e._l(e.upgradeSources,function(n){return t(`div`,{key:n.id,staticClass:`c-automator-points-list-single-entry l-upgrade-list`,style:e.textColor(n.isBought)},[t(`b`,[e._v(e._s(n.name))]),t(`span`,{staticClass:`c-automator-points-list-ap`},[e._v(e._s(e.formatInt(n.automatorPoints))+` AP`)]),t(`br`),e._v(` `+e._s(n.shortDescription)+` `)])})],2)]),t(`br`),t(`div`,[e._v(` The Automator allows (amongst other things) buying full Time Study Trees, entering Eternity Challenges, or starting Dilation. `),t(`br`),e._v(` It can also force prestige events on certain conditions independently from your Autobuyers or modify some of your Autobuyer settings. `),t(`br`),e._v(` The speed of the Automator gradually increases as you get more Realities. If unlocked right now, it would run `+e._s(e.format(e.automatorInterval,2,2))+` commands per real-time second. `)])])},[],!1,null,`2e9d232d`,null,null).exports,DI={name:`AutomatorTab`,components:{SplitPane:SI.default,AutomatorEditor:TI,AutomatorPointsList:EI,AutomatorDocs:It},data(){return{automatorUnlocked:!1,interval:0,currentChars:0,totalChars:0,withinLimit:!1}},computed:{fullScreen(){return this.$viewModel.tabs.reality.automator.fullScreen},tabClass(){if(this.fullScreen)return`c-automator-tab--full-screen`},fullScreenIconClass(){return this.fullScreen?`fa-compress-arrows-alt`:`fa-expand-arrows-alt`},automatorSpeed(){return quantify(`command`,Decimal.div(1e3,this.interval),2,2)},intervalText(){let e=`Each Reality makes it run ${formatPercents(.006,1)} faster, up to a maximum of
        ${formatInt(1e3)} per second.`;return this.interval===1?`The Automator is running at max speed (${formatInt(1e3)} commands per real-time second).`:`The Automator is running ${this.automatorSpeed} per real-time second.
          ${e}`},maxScriptChars(){return AutomatorData.MAX_ALLOWED_SCRIPT_CHARACTERS},maxTotalChars(){return AutomatorData.MAX_ALLOWED_TOTAL_CHARACTERS}},methods:{update(){this.automatorUnlocked=Player.automatorUnlocked,this.interval=AutomatorBackend.currentInterval,this.currentChars=AutomatorData.singleScriptCharacters(),this.totalChars=AutomatorData.totalScriptCharacters(),this.withinLimit=AutomatorData.isWithinLimit()}}},OI=D(DI,function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`c-automator-tab l-automator-tab`,class:e.tabClass},[e.automatorUnlocked?t(`div`,[t(`div`,[e._v(` `+e._s(e.intervalText)+` `)]),t(`span`,{class:{"c-overlimit":e.currentChars>e.maxScriptChars}},[e._v(` This script: `+e._s(e.formatInt(e.currentChars))+` / `+e._s(e.formatInt(e.maxScriptChars))+` `)]),e._v(` | `),t(`span`,{class:{"c-overlimit":e.totalChars>e.maxTotalChars}},[e._v(` Across all scripts: `+e._s(e.formatInt(e.totalChars))+` / `+e._s(e.formatInt(e.maxTotalChars))+` `)]),t(`br`),e.withinLimit?e._e():t(`span`,{staticClass:`c-overlimit`},[e._v(` (Your changes will not be saved due to being over a character limit!) `)]),t(`div`,{staticClass:`c-automator-split-pane`},[t(`SplitPane`,{attrs:{"min-percent":44,"default-percent":50,split:`vertical`},scopedSlots:e._u([{key:`paneL`,fn:function(){return[t(`AutomatorEditor`)]},proxy:!0},{key:`paneR`,fn:function(){return[t(`AutomatorDocs`)]},proxy:!0}],null,!1,3115218829)})],1)]):t(`AutomatorPointsList`)],1)},[],!1,null,`95e20661`,null,null).exports;const kI=function(){let e=1.5,t;function n(e,t){let n=t;for(let r=0;r<20;r++)n=t+e*Math.sin(n);return n}class r{draw(e){e.beginPath(),e.lineWidth=2*this.size,this.performDraw(e),e.stroke()}performDraw(e){}static calculatePosition(e,t){return{x:e*Math.sin(2*Math.PI*t),y:e*Math.cos(2*Math.PI*t)}}}class i extends r{constructor(){super(),this.angle=0,this.distance=0,this.size=e}update(e,t,r){let i=n(t,2*Math.PI*e/r),a=100*(1-t*Math.cos(i)),o=2*Math.atan(Math.sqrt((1+t)/(1-t)*Math.tan(i/2)**2));Math.tan(i/2)<0&&(o*=-1),this.distance=a,this.angle=o/(2*Math.PI)}performDraw(t){let{x:n,y:i}=r.calculatePosition(this.distance,this.angle);t.arc(n+200,i+200,e,0,2*Math.PI),t.strokeStyle=`rgb(0, 0, 255)`}}class a extends r{constructor(e){super(),this.size=e}performDraw(e){let t=e.createRadialGradient(200,200,0,200,200,this.size*2);BlackHoles.areNegative?(t.addColorStop(0,`rgba(255, 255, 255, 1)`),t.addColorStop(.85,`rgba(190, 190, 190, 1)`),t.addColorStop(.87,`rgba(170, 170, 170, 1)`),t.addColorStop(1,`rgba(135, 135, 135, 0)`)):(t.addColorStop(0,`rgba(0, 0, 0, 1)`),t.addColorStop(.9,`rgba(0, 0, 0, 1)`),t.addColorStop(.92,`rgba(100, 100, 100, 1)`),t.addColorStop(1,`rgba(100, 100, 100, 0)`)),e.fillStyle=t,e.fillRect(0,0,400,400),e.strokeStyle=`black`}}class o extends r{constructor(){super(),this.size=.5,this.respawn()}respawn(){this.distance=o.randomDistance(),this.lastDistance=this.distance,this.preLastDistance=this.distance,this.angle=Math.random(),this.lastAngle=this.angle,this.preLastAngle=this.angle,this.respawnTick=!0,this.isInside=BlackHoles.areNegative,this.blob=``[Math.floor(Math.random()*25)],this.isBlob=Theme.currentName()===`S11`||player.options.animations.blobHole}static randomDistance(){return BlackHoles.areNegative?(1.97*Math.random()+.03)*t:t+.5*100*Math.random()*(BlackHole(1).isActive?2:1)}update(e,n){let r=1.5*Math.min((Math.max(n,2)/2)**3,5)*Math.min(e,16)/1e3;this.isInside||(this.preLastAngle=this.lastAngle,this.lastAngle=this.angle,this.angle=(this.angle+20*r*Math.PI*this.distance**-1.5)%1),this.preLastDistance=this.lastDistance,this.lastDistance=this.distance;let i=1+.3*r*(this.distance/t)**-2;if(BlackHoles.areNegative?this.distance*=i:this.distance/=i,this.distance>2.74645*t&&BlackHoles.areNegative)this.respawn();else if(this.distance<.01*t&&!BlackHoles.areNegative){this.respawn();return}this.isInside=this.distance<=t*.865,this.respawnTick=!1}performDraw(e){if(this.drawTrail(e),!BlackHole(1).isActive){e.strokeStyle=`rgb(127, 127, 127)`;return}let{distance:n}=this;if(n>t){let r=Math.floor(127*(n-t)/100);e.strokeStyle=`rgb(${135-r}, ${r}, ${r})`}n<=t&&(e.strokeStyle=`rgb(${Math.floor(255*Math.sqrt(n/t))}, 0, 0)`)}drawTrail(e){if(this.isInside&&!BlackHole(2).isActive)return;let{x:t,y:n}=r.calculatePosition(this.distance,this.angle);if(this.respawnTick||!BlackHole(1).isActive){e.arc(t+200,n+200,this.size,0,2*Math.PI),this.isBlob&&this.drawAndRotateBlob(e,t,n);return}let i=this.isInside?this.angle:this.preLastAngle,{x:a,y:o}=r.calculatePosition(this.preLastDistance,i);e.lineCap=`round`,this.isBlob?this.drawAndRotateBlob(e,t,n):(e.lineWidth*=1,e.moveTo(t+200,n+200),e.lineTo(a+200,o+200))}drawAndRotateBlob(e,n,r){if(e.textAlign=`center`,e.fillStyle=`orange`,this.distance<=t){let n=this.distance/t,r=18*Math.sqrt(n);e.fillStyle=`rgba(255, ${165*n**2}, 0, ${n*2})`,e.font=`${r}px Typewriter`}else e.font=`18px Typewriter`;e.save(),e.translate(n+200,r+200),e.rotate(-this.angle*Math.PI*2+Math.PI),e.fillText(this.blob,0,0),e.restore()}}return class{constructor(r){this.context=r,this.planet=new i,this.period=BlackHole(1).cycleLength;let s=(1-2**-2)/(1-BlackHole(1).power.toNumber()**-2),c=.5,l=2*Math.PI*BlackHole(1).duration.div(this.period).clampMax(.9).toNumber();for(let e=0;e<1e3;e++){let e=n(c,l);c=(s-1)/(s*Math.cos(e)-1)}this.eccentricity=c,t=100*(1-c)*(1-BlackHole(1).power.toNumber()**-2),this.hole=new a((t-e)/2),this.particles=Array.range(0,120).map(()=>new o),this.frameRequest=requestAnimationFrame(e=>this.update(e))}update(e){if(this.frameRequest=requestAnimationFrame(e=>this.update(e)),e===void 0||this.lastFrame===void 0){this.lastFrame=e;return}let n=e-this.lastFrame;this.lastFrame=e,this.planet.update(this.totalPhase().toNumber(),this.eccentricity,this.period.toNumber()),this.context.clearRect(0,0,400,400),this.hole.draw(this.context);for(let e of this.particles)e.draw(this.context);if(BlackHoles.arePaused&&!BlackHoles.areNegative)return;let r=1/Math.sqrt(1-t/this.planet.distance);for(let e of this.particles)e.update(n,r)}totalPhase(){let e=BlackHole(1);return e.isActive?e.phase.sub(e.duration.div(2)).add(this.period).mod(this.period):e.phase.add(e.duration.div(2))}unmount(){cancelAnimationFrame(this.frameRequest)}}}();var AI=D({name:`BlackHoleChargingSliders`,components:{SliderComponent:Lw},data(){return{isNegativeBHUnlocked:!1,isInverted:!1,isLaitela:!1,negativeSlider:0,negativeBHDivisor:1,maxNegativeBlackHole:300,isDisabled:!1}},computed:{infoTooltip(){return this.isLaitela?`The physics of this Reality do not allow Black Hole Inversion`:`Black Hole must be paused to activate Inversion`},reqLockText(){return`Inversion strength cannot be modified due to Lock for
        "${ImaginaryUpgrade(24).name}"`}},methods:{update(){this.isNegativeBHUnlocked=V.isFlipped&&BlackHoles.arePermanent,this.isInverted=BlackHoles.areNegative,this.isLaitela=dC.isRunning,this.negativeSlider=Decimal.log10(player.blackHoleNegative).toNumber(),this.negativeBHDivisor=Decimal.pow(10,this.negativeSlider);let e=player.requirementChecks.reality.slowestBH.lte(1e-300);this.isDisabled=ImaginaryUpgrade(24).isLockingMechanics&&Ra.isRunning&&e},adjustSliderNegative(e){this.negativeSlider=-e,player.blackHoleNegative=Decimal.pow10(-this.negativeSlider),player.requirementChecks.reality.slowestBH=Decimal.max(player.requirementChecks.reality.slowestBH,player.blackHoleNegative)},sliderProps(e){return{min:0,max:e?this.maxNegativeBlackHole:990,interval:1,width:`55rem`,tooltip:!1}}}},function(){var e=this,t=e._self._c;return t(`div`,[e.isNegativeBHUnlocked?t(`div`,{staticClass:`l-black-hole-sliders`},[t(`b`,[e._v(` Inverted Black Hole divides game speed by `+e._s(e.format(e.negativeBHDivisor,2,2))+`. (Currently `+e._s(e.isInverted?`active`:`inactive`)),e.negativeSlider!==0&&!e.isInverted?t(`span`,{attrs:{"ach-tooltip":e.infoTooltip}},[t(`i`,{staticClass:`fas fa-question-circle l-margin-left`})]):e._e(),e._v(`) `)]),e.isDisabled?t(`div`,{staticClass:`l-lock-text`},[e._v(` `+e._s(e.reqLockText)+` `)]):t(`SliderComponent`,e._b({attrs:{value:Math.min(e.maxNegativeBlackHole,Math.abs(e.negativeSlider))},on:{input:function(t){return e.adjustSliderNegative(t)}}},`SliderComponent`,e.sliderProps(!0),!1)),t(`br`),e._v(` Inverting the Black Hole only affects its own speedup, no other upgrades or effects, although it will also indirectly affect the Effarig Game speed power effect. `)],1):e._e()])},[],!1,null,`8057ba48`,null,null).exports,jI={name:`BlackHoleStateRow`,props:{blackHole:{type:Object,required:!0}},data(){return{isUnlocked:!1,isPermanent:!1,isActive:!1,isCharged:!1,nextChange:``,state:``}},computed:{description(){return this.blackHole.description(!0)},id(){return this.blackHole.id}},methods:{update(){let{blackHole:e}=this;this.isUnlocked=e.isUnlocked,this.isUnlocked&&(this.isPermanent=e.isPermanent,this.isActive=e.isActive,this.isCharged=e.isCharged,this.nextChange=TimeSpan.fromSeconds(new Decimal(e.timeWithPreviousActiveToNextStateChange)).toStringShort(),this.state=e.displayState)}}},MI=D(jI,function(){var e=this,t=e._self._c;return e.isUnlocked?t(`h3`,[e._v(` `+e._s(e.description)+` State: `),e.isPermanent?[e._v(` Permanently Active `)]:e.isActive?[e._v(` Active (`+e._s(e.nextChange)+` remaining) `)]:e.id===2&&e.isCharged?[e._v(` Charged (Activates with Black Hole 1, `+e._s(e.nextChange)+` remaining) `)]:[e._v(` Inactive (Activation in `+e._s(e.nextChange)+`) `)]],2):e._e()},[],!1,null,`d1136e22`,null,null).exports,NI=D({name:`BlackHoleUnlockButton`,data(){return{canBeUnlocked:!1}},computed:{classObject(){return{"c-reality-upgrade-btn--unavailable":!this.canBeUnlocked}}},methods:{update(){this.canBeUnlocked=BlackHoles.canBeUnlocked},unlock(){BlackHoles.unlock(),this.$emit(`blackholeunlock`)}}},function(){var e=this,t=e._self._c;return t(`button`,{staticClass:`l-reality-upgrade-btn c-reality-upgrade-btn c-reality-upgrade-btn--black-hole-unlock`,class:e.classObject,on:{click:e.unlock}},[e._v(` Unleash the Black Hole `),t(`br`),e._v(` Cost: `+e._s(e.formatInt(100))+` Reality Machines `)])},[],!1,null,`6dc53649`,null,null).exports,PI={name:`BlackHoleUpgradeButton`,components:{PrimaryToggleButton:R,DescriptionDisplay:u,EffectDisplay:c,CostDisplay:pe},props:{config:{type:Object,required:!0}},data(){return{isAffordable:!1,isCapped:!1,isAutoUnlocked:!1,isAutobuyerOn:!1}},computed:{effectConfig(){let{config:e}=this;return{effect:()=>e.upgrade.value,formatEffect:t=>e.formatEffect(t)}},costConfig(){let{config:e}=this;return{cost:()=>e.upgrade.cost,formatCost:e=>format(e,2,0)}},classObject(){return{"c-reality-upgrade-btn--unavailable":!this.isAffordable}}},watch:{isAutobuyerOn(e){Autobuyer.blackHolePower(this.config.upgrade.id).isActive=e}},methods:{update(){this.isCapped=this.config.upgrade.value===0,this.isAffordable=this.config.upgrade.isAffordable&&!this.isCapped;let e=this.config.upgrade.hasAutobuyer,t=Autobuyer.blackHolePower(this.config.upgrade.id);this.isAutoUnlocked=e&&t.isUnlocked,this.isAutobuyerOn=e&&t.isActive}}},FI={name:`BlackHoleUpgradeRow`,components:{BlackHoleUpgradeButton:D(PI,function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-spoon-btn-group`},[t(`button`,{staticClass:`l-reality-upgrade-btn c-reality-upgrade-btn`,class:e.classObject,on:{click:function(t){return e.config.upgrade.purchase()}}},[t(`DescriptionDisplay`,{attrs:{config:e.config}}),t(`EffectDisplay`,{attrs:{config:e.effectConfig,label:e.config.effectTitle}}),e.isCapped?e._e():t(`CostDisplay`,{attrs:{config:e.costConfig,name:`Reality Machine`}})],1),e.isAutoUnlocked?t(`PrimaryToggleButton`,{staticClass:`l--spoon-btn-group__little-spoon-reality-btn o-primary-btn--reality-upgrade-toggle`,attrs:{label:`Auto:`},model:{value:e.isAutobuyerOn,callback:function(t){e.isAutobuyerOn=t},expression:`isAutobuyerOn`}}):e._e()],1)},[],!1,null,`f6feb152`,null,null).exports},props:{blackHole:{type:Object,required:!0}},data(){return{isUnlocked:!1,isPermanent:!1,intervalVal:0,durationVal:0}},computed:{blackHoleDescription(){return this.blackHole.description(!1)},intervalConfig(){return{upgrade:this.blackHole.intervalUpgrade,description:()=>`Reduce ${this.blackHoleDescription}'s inactive time by ${formatPercents(.2)}`,effectTitle:`Current interval`,formatEffect:()=>`${TimeSpan.fromSeconds(new Decimal(this.blackHole.rawInterval)).toStringShort(!1)}`}},powerConfig(){return{upgrade:this.blackHole.powerUpgrade,description:()=>`Make ${this.blackHoleDescription} ${formatPercents(.35)} stronger`,effectTitle:`Current power`,formatEffect:e=>`${formatX(e,2,2)}`}},durationConfig(){return{upgrade:this.blackHole.durationUpgrade,description:()=>`Extend ${this.blackHoleDescription}'s duration by ${formatPercents(.3)}`,effectTitle:`Current duration`,formatEffect:()=>`${TimeSpan.fromSeconds(new Decimal(this.blackHole.duration)).toStringShort(!1)}`}}},methods:{update(){let e=this.blackHole;this.isUnlocked=e.isUnlocked,this.isPermanent=e.isPermanent,this.intervalVal=e.rawInterval,this.durationVal=e.duration}}},II={name:`BlackHoleTab`,components:{BlackHoleUpgradeRow:D(FI,function(){var e=this,t=e._self._c;return e.isUnlocked?t(`div`,{staticClass:`l-black-hole-upgrade-grid__row`},[e.isPermanent?e._e():t(`BlackHoleUpgradeButton`,{key:e.intervalVal.toNumber(),attrs:{config:e.intervalConfig}}),t(`BlackHoleUpgradeButton`,{attrs:{config:e.powerConfig}}),e.isPermanent?e._e():t(`BlackHoleUpgradeButton`,{key:e.durationVal.toNumber(),attrs:{config:e.durationConfig}})],1):e._e()},[],!1,null,`9b1d66d9`,null,null).exports,BlackHoleStateRow:MI,BlackHoleChargingSliders:AI,BlackHoleUnlockButton:NI},data(){return{isDoomed:!1,isUnlocked:!1,isPaused:!1,isEnslaved:!1,isLaitela:!1,pauseMode:0,detailedBH2:``,isPermanent:!1,hasBH2:!1,blackHoleUptime:[],stateChange:``}},computed:{blackHoles:()=>BlackHoles.list,pauseModeString(){switch(this.pauseMode){case BLACK_HOLE_PAUSE_MODE.NO_PAUSE:return`Do not pause`;case BLACK_HOLE_PAUSE_MODE.PAUSE_BEFORE_BH1:return this.hasBH2?`Before BH1`:`Before activation`;case BLACK_HOLE_PAUSE_MODE.PAUSE_BEFORE_BH2:return`Before BH2`;default:throw Error(`Unrecognized BH offline pausing mode`)}}},mounted(){this.startAnimation()},destroyed(){this.animation&&this.animation.unmount()},methods:{update(){this.isDoomed=Pelle.isDoomed,this.isUnlocked=BlackHoles.areUnlocked,this.isPaused=BlackHoles.arePaused,this.isEnslaved&&!Enslaved.isRunning&&(this.animation&&this.animation.unmount(),this.startAnimation()),this.isEnslaved=Enslaved.isRunning,this.isLaitela=Laitela.isRunning,this.isPermanent=BlackHoles.arePermanent,this.pauseMode=player.blackHoleAutoPauseMode,this.hasBH2=BlackHole(2).isUnlocked,this.blackHoleUptime=[BlackHole(1).duration.div(BlackHole(1).cycleLength),BlackHole(2).duration.div(BlackHole(2).cycleLength)],this.detailedBH2=this.bh2Status(),player.blackHoleNegative.lt(1)&&!this.isLaitela?this.stateChange=this.isPaused?`Uninvert`:`Invert`:this.stateChange=this.isPaused?`Unpause`:`Pause`},bh2Status(){let e=BlackHole(1).timeWithPreviousActiveToNextStateChange,t=BlackHole(2).timeWithPreviousActiveToNextStateChange;if(BlackHole(1).isActive&&BlackHole(2).isActive){let n=e.clampMax(t);return`Black Hole 2 is active for the next ${TimeSpan.fromSeconds(n).toStringShort()}!`}if(BlackHole(1).isActive&&t.lt(e)){let n=e.sub(t).clampMax(BlackHole(2).duration);return`Black Hole 2 will activate before Black Hole 1 deactivates,
          for ${TimeSpan.fromSeconds(new Decimal(n)).toStringShort()}`}if(BlackHole(1).isActive||t.gt(BlackHole(1).duration)){let n=BlackHole(1).isActive?t.sub(e).div(BlackHole(1).duration).floor().add(1):t.div(BlackHole(1).duration).floor();return`Black Hole 2 will activate after ${quantifyInt(`more active cycle`,n)} of Black Hole 1.`}if(BlackHole(2).isCharged){let e=Decimal.min(BlackHole(1).duration,t);return`Black Hole 2 will activate with Black Hole 1,
          for ${TimeSpan.fromSeconds(e).toStringShort()}.`}let n=Decimal.min(BlackHole(1).duration.sub(t,BlackHole(2).duration));return`Black Hole 2 will activate ${TimeSpan.fromSeconds(t).toStringShort()} after
        Black Hole 1, for ${TimeSpan.fromSeconds(n).toStringShort()}.`},togglePause(){BlackHoles.togglePause(),BlackHoles.arePaused&&(player.celestials.enslaved.isAutoReleasing=!1),this.update()},changePauseMode(){let e;switch(this.pauseMode){case BLACK_HOLE_PAUSE_MODE.NO_PAUSE:e=BlackHole(1).isPermanent?2:1;break;case BLACK_HOLE_PAUSE_MODE.PAUSE_BEFORE_BH1:e=this.hasBH2?1:2;break;case BLACK_HOLE_PAUSE_MODE.PAUSE_BEFORE_BH2:e=1;break;default:throw Error(`Unrecognized BH offline pausing mode`)}player.blackHoleAutoPauseMode=(this.pauseMode+e)%Object.values(BLACK_HOLE_PAUSE_MODE).length},startAnimation(){setTimeout(()=>{this.$refs.canvas&&(this.animation=new kI(this.$refs.canvas.getContext(`2d`)))},1)},gridStyle(){return this.isPermanent?`l-black-hole-upgrade-permanent`:`l-black-hole-upgrade-grid`}}},LI=D(II,function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-black-hole-tab`},[e.isEnslaved||e.isDoomed?t(`div`,{staticClass:`c-black-hole-disabled-description`},[e.isEnslaved?t(`i`,[e._v(` You must... seek... other methods... `),t(`br`)]):e._e(),e._v(` The physics of this Reality do not allow the existence of Black Holes. `)]):e.isUnlocked?[t(`div`,{staticClass:`c-subtab-option-container`},[t(`button`,{staticClass:`o-primary-btn o-primary-btn--subtab-option`,on:{click:e.togglePause}},[e._v(` `+e._s(e.stateChange)+` Black Hole `)]),e.isPermanent?e._e():t(`button`,{staticClass:`o-primary-btn o-primary-btn--subtab-option l-auto-pause-button`,on:{click:e.changePauseMode}},[e._v(` Auto-pause: `+e._s(e.pauseModeString)+` `)])]),t(`canvas`,{ref:`canvas`,staticClass:`c-black-hole-canvas`,attrs:{width:`400`,height:`400`}}),t(`div`,{staticClass:`l-black-hole-upgrade-grid`},[e._l(e.blackHoles,function(e,n){return t(`BlackHoleStateRow`,{key:`state`+n,attrs:{"black-hole":e}})}),e.hasBH2&&!e.isPermanent?t(`span`,[t(`b`,[e._v(e._s(e.detailedBH2))]),t(`br`),e._v(` The timer for Black Hole 2 only advances while Black Hole 1 is active. `),t(`br`),e._v(` Upgrades affect the internal timer; the header shows real time until next activation. `)]):e._e(),t(`br`),e.isPermanent?e._e():t(`div`,[e._v(` Black holes become permanently active when they are active for more than `+e._s(e.formatPercents(.9999,2))+` of the time. `),t(`br`),e._v(` Active time percent: `+e._s(e.formatPercents(e.blackHoleUptime[0],3))+` `),e.hasBH2?t(`span`,[e._v(`and `+e._s(e.formatPercents(e.blackHoleUptime[1],3)))]):e._e()]),e.isLaitela?e._e():t(`BlackHoleChargingSliders`,{staticClass:`l-enslaved-shop-container`})],2),t(`div`,{class:e.gridStyle()},e._l(e.blackHoles,function(e,n){return t(`BlackHoleUpgradeRow`,{key:`upgrades`+n,attrs:{"black-hole":e}})}),1)]:t(`div`,{staticClass:`l-pre-unlock-text`},[t(`BlackHoleUnlockButton`,{on:{blackholeunlock:e.startAnimation}}),e._v(` The Black Hole makes the entire game run significantly faster for a short period of time. `),t(`br`),e._v(` Starts at `+e._s(e.formatX(180))+` faster for `+e._s(e.formatInt(10))+` seconds, once per hour. `),t(`br`),t(`br`),e._v(` Unlocking the Black Hole also gives `+e._s(e.formatInt(10))+` Automator Points. `)],1)],2)},[],!1,null,`6d5b02f5`,null,null).exports,RI=D({name:`BreakInfinityButton`,data(){return{isBroken:!1,isUnlocked:!1,isEnslaved:!1}},computed:{classObject(){return{"o-infinity-upgrade-btn":!0,"o-infinity-upgrade-btn--color-2":!0,"o-infinity-upgrade-btn--available":this.isUnlocked,"o-infinity-upgrade-btn--unavailable":!this.isUnlocked,"o-infinity-upgrade-btn--feel-eternity":this.isEnslaved,"o-infinity-upgrade-btn--unclickable":this.isBroken&&!this.isEnslaved}},tooltip(){if(this.isEnslaved)return`...eons stacked on eons stacked on eons stacked on eons stacked on ...`},text(){return this.isEnslaved?`FEEL ETERNITY`:this.isBroken?`INFINITY IS BROKEN`:`BREAK INFINITY`}},methods:{update(){this.isBroken=player.break,this.isUnlocked=Autobuyer.bigCrunch.hasMaxedInterval,this.isEnslaved=Enslaved.isRunning},clicked(){this.isEnslaved?Enslaved.feelEternity():!this.isBroken&&this.isUnlocked&&Modal.breakInfinity.show()}}},function(){var e=this,t=e._self._c;return t(`button`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:e.tooltip,expression:`tooltip`}],class:e.classObject,on:{click:e.clicked}},[e._v(` `+e._s(e.text)+` `)])},[],!1,null,`c955f982`,null,null).exports,zI=r({name:`InfinityUpgradeButton`,components:{DescriptionDisplay:u,EffectDisplay:c,CostDisplay:pe},props:{upgrade:{type:Object,required:!0}},data(){return{showWorstChallenge:!1,worstChallengeString:``,isUseless:!1,canBeBought:!1,chargePossible:!1,canBeCharged:!1,isBought:!1,isCharged:!1,isDisabled:!1,showingCharged:!1,hasTS31:!1,ts31Effect:new Decimal(0)}},computed:{isBasedOnInfinities(){return/(18|27|36|45)Mult/u.test(this.upgrade.id)||this.upgrade.id===`infinitiedMult`},shiftDown(){return ui.view.shiftDown},showChargedEffect(){return this.chargePossible&&(this.isCharged||this.showingCharged||this.shiftDown)},config(){let e=this.upgrade.config;return this.showChargedEffect?e.charged:e},classObject(){return{"o-infinity-upgrade-btn":!0,"o-infinity-upgrade-btn--bought":!this.isUseless&&this.isBought,"o-infinity-upgrade-btn--available":!this.isUseless&&!this.isBought&&this.canBeBought,"o-infinity-upgrade-btn--unavailable":!this.isUseless&&!this.isBought&&!this.canBeBought,"o-infinity-upgrade-btn--useless":this.isUseless,"o-pelle-disabled":this.isUseless,"o-infinity-upgrade-btn--chargeable":!this.isCharged&&this.chargePossible&&(this.showingCharged||this.shiftDown),"o-infinity-upgrade-btn--charged":this.isCharged,"o-pelle-disabled-pointer":this.isUseless}},isImprovedByTS31(){return this.hasTS31&&this.isBasedOnInfinities&&!this.showChargedEffect}},methods:{update(){let e=this.upgrade;if(this.isBought=e.isBought||e.isCapped,this.chargePossible=Ra.unlocks.chargedInfinityUpgrades.canBeApplied&&e.hasChargeEffect&&!Pelle.isDoomed,this.canBeBought=e.canBeBought,this.canBeCharged=e.canCharge,this.isCharged=e.isCharged,this.isDisabled=e.config.isDisabled&&e.config.isDisabled(e.config.effect()),this.isUseless=Pelle.uselessInfinityUpgrades.includes(e.id)&&Pelle.isDoomed,this.hasTS31=TimeStudy(31).canBeApplied,!this.isDisabled&&this.isImprovedByTS31&&(this.ts31Effect=Decimal.pow(e.config.effect(),4)),e.id!==`challengeMult`)return;this.showWorstChallenge=e.effectValue!==e.cap&&player.challenge.normal.bestTimes.sum().lt(Number.MAX_VALUE);let t=GameCache.worstChallengeTime.value;this.worstChallengeString=`(Challenge ${2+player.challenge.normal.bestTimes.indexOf(t)}: ${timeDisplayShort(t)})`}}}),BI=D(zI,function(){var e=this,t=e._self._c;return e._self._setupProxy,t(`button`,{class:e.classObject,on:{mouseenter:function(t){e.showingCharged=e.canBeCharged},mouseleave:function(t){e.showingCharged=!1},click:function(t){return e.upgrade.purchase()}}},[t(`span`,{class:{"o-pelle-disabled":e.isUseless}},[t(`DescriptionDisplay`,{attrs:{config:e.config}}),e.showWorstChallenge?t(`span`,[t(`br`),e._v(` `+e._s(e.worstChallengeString)+` `)]):e._e(),e.isDisabled?e._e():t(`EffectDisplay`,{attrs:{br:``,config:e.config}}),!e.isDisabled&&e.isImprovedByTS31?[t(`br`),e._v(` After TS31: `+e._s(e.formatX(e.ts31Effect,2,2))+` `)]:e._e()],2),e.isBought?e._e():t(`CostDisplay`,{attrs:{br:``,config:e.config,name:`Infinity Point`}}),e._t(`default`)],2)},[],!1,null,`7192e986`,null,null).exports,VI=D({name:`BreakInfinityTab`,components:{BreakInfinityButton:RI,InfinityUpgradeButton:BI},data(){return{isUnlocked:!1}},computed:{grid(){return[[BreakInfinityUpgrade.totalAMMult,BreakInfinityUpgrade.currentAMMult,BreakInfinityUpgrade.galaxyBoost],[BreakInfinityUpgrade.infinitiedMult,BreakInfinityUpgrade.achievementMult,BreakInfinityUpgrade.slowestChallengeMult],[BreakInfinityUpgrade.infinitiedGen,BreakInfinityUpgrade.autobuyMaxDimboosts,BreakInfinityUpgrade.autobuyerSpeed],[BreakInfinityUpgrade.tickspeedCostMult,BreakInfinityUpgrade.dimCostMult,BreakInfinityUpgrade.ipGen]]}},methods:{update(){this.isUnlocked=Autobuyer.bigCrunch.hasMaxedInterval},btnClassObject(e){return{"l-infinity-upgrade-grid__cell":!0,"o-infinity-upgrade-btn--multiplier":e===3}},timeDisplayShort(e){return timeDisplayShort(e)}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-break-infinity-tab`},[e.isUnlocked?e._e():t(`div`,[e._v(` Reduce the interval of Automatic Big Crunch Autobuyer to `+e._s(e.format(.1,1,1))+` seconds to unlock Break Infinity. `)]),t(`BreakInfinityButton`,{staticClass:`l-break-infinity-tab__break-btn`}),e.isUnlocked?t(`div`,{staticClass:`l-break-infinity-upgrade-grid l-break-infinity-tab__grid`},e._l(e.grid,function(n,r){return t(`div`,{key:r,staticClass:`l-break-infinity-upgrade-grid__row`},e._l(n,function(n){return t(`InfinityUpgradeButton`,{key:n.id,class:e.btnClassObject(r),attrs:{upgrade:n}})}),1)}),0):e._e()],1)},[],!1,null,`2922322d`,null,null).exports,HI=n(((exports,t)=>{t.exports=(function(){var e=``,t,n,r,i=[],a={passive:!0},o={passive:!1};window.addEventListener?(t=`addEventListener`,n=`removeEventListener`):(t=`attachEvent`,n=`detachEvent`,e=`on`),r=`onwheel`in document.createElement(`div`)?`wheel`:document.onmousewheel===void 0?`DOMMouseScroll`:`mousewheel`;function s(e,t){var n=function(e){!e&&(e=window.event);var n={originalEvent:e,target:e.target||e.srcElement,type:`wheel`,deltaMode:e.type==`MozMousePixelScroll`?0:1,deltaX:0,delatZ:0,preventDefault:function(){e.preventDefault?e.preventDefault():e.returnValue=!1}};return r==`mousewheel`?(n.deltaY=-1/40*e.wheelDelta,e.wheelDeltaX&&(n.deltaX=-1/40*e.wheelDeltaX)):n.deltaY=e.detail,t(n)};return i.push({element:e,fn:n}),n}function c(e){for(var t=0;t<i.length;t++)if(i[t].element===e)return i[t].fn;return function(){}}function l(e){for(var t=0;t<i.length;t++)if(i[t].element===e)return i.splice(t,1)}function u(n,i,c,l){var u=r===`wheel`?c:s(n,c);n[t](e+i,u,l?a:o)}function d(t,i,s,u){var d=r===`wheel`?s:c(t);t[n](e+i,d,u?a:o),l(t)}function f(e,t,n){u(e,r,t,n),r==`DOMMouseScroll`&&u(e,`MozMousePixelScroll`,t,n)}function p(e,t,n){d(e,r,t,n),r==`DOMMouseScroll`&&d(e,`MozMousePixelScroll`,t,n)}return{on:f,off:p}})()})),UI=n(((exports,t)=>{t.exports={extend:function(e,t){for(var n in e||={},t)this.isObject(t[n])?e[n]=this.extend(e[n],t[n]):e[n]=t[n];return e},isElement:function(e){return e instanceof HTMLElement||e instanceof SVGElement||e instanceof SVGSVGElement||e&&typeof e==`object`&&!!e&&e.nodeType===1&&typeof e.nodeName==`string`},isObject:function(e){return Object.prototype.toString.call(e)===`[object Object]`},isNumber:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},getSvg:function(e){var t,n;if(this.isElement(e))t=e;else if(typeof e==`string`||e instanceof String){if(t=document.querySelector(e),!t)throw Error(`Provided selector did not find any elements. Selector: `+e)}else throw Error(`Provided selector is not an HTML object nor String`);if(t.tagName.toLowerCase()===`svg`)n=t;else if(t.tagName.toLowerCase()===`object`)n=t.contentDocument.documentElement;else if(t.tagName.toLowerCase()===`embed`)n=t.getSVGDocument().documentElement;else throw t.tagName.toLowerCase()===`img`?Error(`Cannot script an SVG in an "img" element. Please use an "object" element or an in-line SVG.`):Error(`Cannot get SVG.`);return n},proxy:function(e,t){return function(){return e.apply(t,arguments)}},getType:function(e){return Object.prototype.toString.apply(e).replace(/^\[object\s/,``).replace(/\]$/,``)},mouseAndTouchNormalize:function(e,t){if(e.clientX===void 0||e.clientX===null)if(e.clientX=0,e.clientY=0,e.touches!==void 0&&e.touches.length){if(e.touches[0].clientX!==void 0)e.clientX=e.touches[0].clientX,e.clientY=e.touches[0].clientY;else if(e.touches[0].pageX!==void 0){var n=t.getBoundingClientRect();e.clientX=e.touches[0].pageX-n.left,e.clientY=e.touches[0].pageY-n.top}}else e.originalEvent!==void 0&&e.originalEvent.clientX!==void 0&&(e.clientX=e.originalEvent.clientX,e.clientY=e.originalEvent.clientY)},isDblClick:function(e,t){if(e.detail===2)return!0;if(t!=null){var n=e.timeStamp-t.timeStamp,r=Math.sqrt((e.clientX-t.clientX)**2+(e.clientY-t.clientY)**2);return n<250&&r<10}return!1},now:Date.now||function(){return new Date().getTime()},throttle:function(e,t,n){var r=this,i,a,o,s=null,c=0;n||={};var l=function(){c=n.leading===!1?0:r.now(),s=null,o=e.apply(i,a),s||(i=a=null)};return function(){var u=r.now();!c&&n.leading===!1&&(c=u);var d=t-(u-c);return i=this,a=arguments,d<=0||d>t?(clearTimeout(s),s=null,c=u,o=e.apply(i,a),s||(i=a=null)):!s&&n.trailing!==!1&&(s=setTimeout(l,d)),o}},createRequestAnimationFrame:function(e){var t=null;return e!==`auto`&&e<60&&e>1&&(t=Math.floor(1e3/e)),t===null?window.requestAnimationFrame||n(33):n(t)}};function n(e){return function(t){window.setTimeout(t,e)}}})),WI=n(((exports,t)=>{var n=UI(),r=`unknown`;document.documentMode&&(r=`ie`),t.exports={svgNS:`http://www.w3.org/2000/svg`,xmlNS:`http://www.w3.org/XML/1998/namespace`,xmlnsNS:`http://www.w3.org/2000/xmlns/`,xlinkNS:`http://www.w3.org/1999/xlink`,evNS:`http://www.w3.org/2001/xml-events`,getBoundingClientRectNormalized:function(e){if(e.clientWidth&&e.clientHeight)return{width:e.clientWidth,height:e.clientHeight};if(e.getBoundingClientRect())return e.getBoundingClientRect();throw Error(`Cannot get BoundingClientRect for SVG.`)},getOrCreateViewport:function(e,t){var r=null;if(r=n.isElement(t)?t:e.querySelector(t),!r){var i=Array.prototype.slice.call(e.childNodes||e.children).filter(function(e){return e.nodeName!==`defs`&&e.nodeName!==`#text`});i.length===1&&i[0].nodeName===`g`&&i[0].getAttribute(`transform`)===null&&(r=i[0])}if(!r){var a=`viewport-`+new Date().toISOString().replace(/\D/g,``);r=document.createElementNS(this.svgNS,`g`),r.setAttribute(`id`,a);var o=e.childNodes||e.children;if(o&&o.length>0)for(var s=o.length;s>0;s--)o[o.length-s].nodeName!==`defs`&&r.appendChild(o[o.length-s]);e.appendChild(r)}var c=[];return r.getAttribute(`class`)&&(c=r.getAttribute(`class`).split(` `)),~c.indexOf(`svg-pan-zoom_viewport`)||(c.push(`svg-pan-zoom_viewport`),r.setAttribute(`class`,c.join(` `))),r},setupSvgAttributes:function(e){if(e.setAttribute(`xmlns`,this.svgNS),e.setAttributeNS(this.xmlnsNS,`xmlns:xlink`,this.xlinkNS),e.setAttributeNS(this.xmlnsNS,`xmlns:ev`,this.evNS),e.parentNode!==null){var t=e.getAttribute(`style`)||``;t.toLowerCase().indexOf(`overflow`)===-1&&e.setAttribute(`style`,`overflow: hidden; `+t)}},internetExplorerRedisplayInterval:300,refreshDefsGlobal:n.throttle(function(){for(var e=document.querySelectorAll(`defs`),t=e.length,n=0;n<t;n++){var r=e[n];r.parentNode.insertBefore(r,r)}},exports?exports.internetExplorerRedisplayInterval:null),setCTM:function(e,t,n){var i=this,a=`matrix(`+t.a+`,`+t.b+`,`+t.c+`,`+t.d+`,`+t.e+`,`+t.f+`)`;e.setAttributeNS(null,`transform`,a),`transform`in e.style?e.style.transform=a:`-ms-transform`in e.style?e.style[`-ms-transform`]=a:`-webkit-transform`in e.style&&(e.style[`-webkit-transform`]=a),r===`ie`&&n&&(n.parentNode.insertBefore(n,n),window.setTimeout(function(){i.refreshDefsGlobal()},i.internetExplorerRedisplayInterval))},getEventPoint:function(e,t){var r=t.createSVGPoint();return n.mouseAndTouchNormalize(e,t),r.x=e.clientX,r.y=e.clientY,r},getSvgCenterPoint:function(e,t,n){return this.createSVGPoint(e,t/2,n/2)},createSVGPoint:function(e,t,n){var r=e.createSVGPoint();return r.x=t,r.y=n,r}}})),GI=n(((exports,t)=>{var n=WI();t.exports={enable:function(e){var t=e.svg.querySelector(`defs`);if(t||(t=document.createElementNS(n.svgNS,`defs`),e.svg.appendChild(t)),!t.querySelector(`style#svg-pan-zoom-controls-styles`)){var r=document.createElementNS(n.svgNS,`style`);r.setAttribute(`id`,`svg-pan-zoom-controls-styles`),r.setAttribute(`type`,`text/css`),r.textContent=`.svg-pan-zoom-control { cursor: pointer; fill: black; fill-opacity: 0.333; } .svg-pan-zoom-control:hover { fill-opacity: 0.8; } .svg-pan-zoom-control-background { fill: white; fill-opacity: 0.5; } .svg-pan-zoom-control-background { fill-opacity: 0.8; }`,t.appendChild(r)}var i=document.createElementNS(n.svgNS,`g`);i.setAttribute(`id`,`svg-pan-zoom-controls`),i.setAttribute(`transform`,`translate(`+(e.width-70)+` `+(e.height-76)+`) scale(0.75)`),i.setAttribute(`class`,`svg-pan-zoom-control`),i.appendChild(this._createZoomIn(e)),i.appendChild(this._createZoomReset(e)),i.appendChild(this._createZoomOut(e)),e.svg.appendChild(i),e.controlIcons=i},_createZoomIn:function(e){var t=document.createElementNS(n.svgNS,`g`);t.setAttribute(`id`,`svg-pan-zoom-zoom-in`),t.setAttribute(`transform`,`translate(30.5 5) scale(0.015)`),t.setAttribute(`class`,`svg-pan-zoom-control`),t.addEventListener(`click`,function(){e.getPublicInstance().zoomIn()},!1),t.addEventListener(`touchstart`,function(){e.getPublicInstance().zoomIn()},!1);var r=document.createElementNS(n.svgNS,`rect`);r.setAttribute(`x`,`0`),r.setAttribute(`y`,`0`),r.setAttribute(`width`,`1500`),r.setAttribute(`height`,`1400`),r.setAttribute(`class`,`svg-pan-zoom-control-background`),t.appendChild(r);var i=document.createElementNS(n.svgNS,`path`);return i.setAttribute(`d`,`M1280 576v128q0 26 -19 45t-45 19h-320v320q0 26 -19 45t-45 19h-128q-26 0 -45 -19t-19 -45v-320h-320q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h320v-320q0 -26 19 -45t45 -19h128q26 0 45 19t19 45v320h320q26 0 45 19t19 45zM1536 1120v-960 q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5t84.5 -203.5z`),i.setAttribute(`class`,`svg-pan-zoom-control-element`),t.appendChild(i),t},_createZoomReset:function(e){var t=document.createElementNS(n.svgNS,`g`);t.setAttribute(`id`,`svg-pan-zoom-reset-pan-zoom`),t.setAttribute(`transform`,`translate(5 35) scale(0.4)`),t.setAttribute(`class`,`svg-pan-zoom-control`),t.addEventListener(`click`,function(){e.getPublicInstance().reset()},!1),t.addEventListener(`touchstart`,function(){e.getPublicInstance().reset()},!1);var r=document.createElementNS(n.svgNS,`rect`);r.setAttribute(`x`,`2`),r.setAttribute(`y`,`2`),r.setAttribute(`width`,`182`),r.setAttribute(`height`,`58`),r.setAttribute(`class`,`svg-pan-zoom-control-background`),t.appendChild(r);var i=document.createElementNS(n.svgNS,`path`);i.setAttribute(`d`,`M33.051,20.632c-0.742-0.406-1.854-0.609-3.338-0.609h-7.969v9.281h7.769c1.543,0,2.701-0.188,3.473-0.562c1.365-0.656,2.048-1.953,2.048-3.891C35.032,22.757,34.372,21.351,33.051,20.632z`),i.setAttribute(`class`,`svg-pan-zoom-control-element`),t.appendChild(i);var a=document.createElementNS(n.svgNS,`path`);return a.setAttribute(`d`,`M170.231,0.5H15.847C7.102,0.5,0.5,5.708,0.5,11.84v38.861C0.5,56.833,7.102,61.5,15.847,61.5h154.384c8.745,0,15.269-4.667,15.269-10.798V11.84C185.5,5.708,178.976,0.5,170.231,0.5z M42.837,48.569h-7.969c-0.219-0.766-0.375-1.383-0.469-1.852c-0.188-0.969-0.289-1.961-0.305-2.977l-0.047-3.211c-0.03-2.203-0.41-3.672-1.142-4.406c-0.732-0.734-2.103-1.102-4.113-1.102h-7.05v13.547h-7.055V14.022h16.524c2.361,0.047,4.178,0.344,5.45,0.891c1.272,0.547,2.351,1.352,3.234,2.414c0.731,0.875,1.31,1.844,1.737,2.906s0.64,2.273,0.64,3.633c0,1.641-0.414,3.254-1.242,4.84s-2.195,2.707-4.102,3.363c1.594,0.641,2.723,1.551,3.387,2.73s0.996,2.98,0.996,5.402v2.32c0,1.578,0.063,2.648,0.19,3.211c0.19,0.891,0.635,1.547,1.333,1.969V48.569z M75.579,48.569h-26.18V14.022h25.336v6.117H56.454v7.336h16.781v6H56.454v8.883h19.125V48.569z M104.497,46.331c-2.44,2.086-5.887,3.129-10.34,3.129c-4.548,0-8.125-1.027-10.731-3.082s-3.909-4.879-3.909-8.473h6.891c0.224,1.578,0.662,2.758,1.316,3.539c1.196,1.422,3.246,2.133,6.15,2.133c1.739,0,3.151-0.188,4.236-0.562c2.058-0.719,3.087-2.055,3.087-4.008c0-1.141-0.504-2.023-1.512-2.648c-1.008-0.609-2.607-1.148-4.796-1.617l-3.74-0.82c-3.676-0.812-6.201-1.695-7.576-2.648c-2.328-1.594-3.492-4.086-3.492-7.477c0-3.094,1.139-5.664,3.417-7.711s5.623-3.07,10.036-3.07c3.685,0,6.829,0.965,9.431,2.895c2.602,1.93,3.966,4.73,4.093,8.402h-6.938c-0.128-2.078-1.057-3.555-2.787-4.43c-1.154-0.578-2.587-0.867-4.301-0.867c-1.907,0-3.428,0.375-4.565,1.125c-1.138,0.75-1.706,1.797-1.706,3.141c0,1.234,0.561,2.156,1.682,2.766c0.721,0.406,2.25,0.883,4.589,1.43l6.063,1.43c2.657,0.625,4.648,1.461,5.975,2.508c2.059,1.625,3.089,3.977,3.089,7.055C108.157,41.624,106.937,44.245,104.497,46.331z M139.61,48.569h-26.18V14.022h25.336v6.117h-18.281v7.336h16.781v6h-16.781v8.883h19.125V48.569z M170.337,20.14h-10.336v28.43h-7.266V20.14h-10.383v-6.117h27.984V20.14z`),a.setAttribute(`class`,`svg-pan-zoom-control-element`),t.appendChild(a),t},_createZoomOut:function(e){var t=document.createElementNS(n.svgNS,`g`);t.setAttribute(`id`,`svg-pan-zoom-zoom-out`),t.setAttribute(`transform`,`translate(30.5 70) scale(0.015)`),t.setAttribute(`class`,`svg-pan-zoom-control`),t.addEventListener(`click`,function(){e.getPublicInstance().zoomOut()},!1),t.addEventListener(`touchstart`,function(){e.getPublicInstance().zoomOut()},!1);var r=document.createElementNS(n.svgNS,`rect`);r.setAttribute(`x`,`0`),r.setAttribute(`y`,`0`),r.setAttribute(`width`,`1500`),r.setAttribute(`height`,`1400`),r.setAttribute(`class`,`svg-pan-zoom-control-background`),t.appendChild(r);var i=document.createElementNS(n.svgNS,`path`);return i.setAttribute(`d`,`M1280 576v128q0 26 -19 45t-45 19h-896q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h896q26 0 45 19t19 45zM1536 1120v-960q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5 t84.5 -203.5z`),i.setAttribute(`class`,`svg-pan-zoom-control-element`),t.appendChild(i),t},disable:function(e){e.controlIcons&&=(e.controlIcons.parentNode.removeChild(e.controlIcons),null)}}})),KI=n(((exports,t)=>{var n=WI(),r=UI(),i=function(e,t){this.init(e,t)};i.prototype.init=function(e,t){this.viewport=e,this.options=t,this.originalState={zoom:1,x:0,y:0},this.activeState={zoom:1,x:0,y:0},this.updateCTMCached=r.proxy(this.updateCTM,this),this.requestAnimationFrame=r.createRequestAnimationFrame(this.options.refreshRate),this.viewBox={x:0,y:0,width:0,height:0},this.cacheViewBox();var n=this.processCTM();this.setCTM(n),this.updateCTM()},i.prototype.cacheViewBox=function(){var e=this.options.svg.getAttribute(`viewBox`);if(e){var t=e.split(/[\s\,]/).filter(function(e){return e}).map(parseFloat);this.viewBox.x=t[0],this.viewBox.y=t[1],this.viewBox.width=t[2],this.viewBox.height=t[3];var n=Math.min(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height);this.activeState.zoom=n,this.activeState.x=(this.options.width-this.viewBox.width*n)/2,this.activeState.y=(this.options.height-this.viewBox.height*n)/2,this.updateCTMOnNextFrame(),this.options.svg.removeAttribute(`viewBox`)}else this.simpleViewBoxCache()},i.prototype.simpleViewBoxCache=function(){var e=this.viewport.getBBox();this.viewBox.x=e.x,this.viewBox.y=e.y,this.viewBox.width=e.width,this.viewBox.height=e.height},i.prototype.getViewBox=function(){return r.extend({},this.viewBox)},i.prototype.processCTM=function(){var e=this.getCTM();if(this.options.fit||this.options.contain){var t=this.options.fit?Math.min(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height):Math.max(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height);e.a=t,e.d=t,e.e=-this.viewBox.x*t,e.f=-this.viewBox.y*t}if(this.options.center){var n=(this.options.width-(this.viewBox.width+this.viewBox.x*2)*e.a)*.5,r=(this.options.height-(this.viewBox.height+this.viewBox.y*2)*e.a)*.5;e.e=n,e.f=r}return this.originalState.zoom=e.a,this.originalState.x=e.e,this.originalState.y=e.f,e},i.prototype.getOriginalState=function(){return r.extend({},this.originalState)},i.prototype.getState=function(){return r.extend({},this.activeState)},i.prototype.getZoom=function(){return this.activeState.zoom},i.prototype.getRelativeZoom=function(){return this.activeState.zoom/this.originalState.zoom},i.prototype.computeRelativeZoom=function(e){return e/this.originalState.zoom},i.prototype.getPan=function(){return{x:this.activeState.x,y:this.activeState.y}},i.prototype.getCTM=function(){var e=this.options.svg.createSVGMatrix();return e.a=this.activeState.zoom,e.b=0,e.c=0,e.d=this.activeState.zoom,e.e=this.activeState.x,e.f=this.activeState.y,e},i.prototype.setCTM=function(e){var t=this.isZoomDifferent(e),n=this.isPanDifferent(e);if(t||n){if(t&&(this.options.beforeZoom(this.getRelativeZoom(),this.computeRelativeZoom(e.a))===!1?(e.a=e.d=this.activeState.zoom,t=!1):(this.updateCache(e),this.options.onZoom(this.getRelativeZoom()))),n){var i=this.options.beforePan(this.getPan(),{x:e.e,y:e.f}),a=!1,o=!1;i===!1?(e.e=this.getPan().x,e.f=this.getPan().y,a=o=!0):r.isObject(i)&&(i.x===!1?(e.e=this.getPan().x,a=!0):r.isNumber(i.x)&&(e.e=i.x),i.y===!1?(e.f=this.getPan().y,o=!0):r.isNumber(i.y)&&(e.f=i.y)),a&&o||!this.isPanDifferent(e)?n=!1:(this.updateCache(e),this.options.onPan(this.getPan()))}(t||n)&&this.updateCTMOnNextFrame()}},i.prototype.isZoomDifferent=function(e){return this.activeState.zoom!==e.a},i.prototype.isPanDifferent=function(e){return this.activeState.x!==e.e||this.activeState.y!==e.f},i.prototype.updateCache=function(e){this.activeState.zoom=e.a,this.activeState.x=e.e,this.activeState.y=e.f},i.prototype.pendingUpdate=!1,i.prototype.updateCTMOnNextFrame=function(){this.pendingUpdate||(this.pendingUpdate=!0,this.requestAnimationFrame.call(window,this.updateCTMCached))},i.prototype.updateCTM=function(){var e=this.getCTM();n.setCTM(this.viewport,e,this.defs),this.pendingUpdate=!1,this.options.onUpdatedCTM&&this.options.onUpdatedCTM(e)},t.exports=function(e,t){return new i(e,t)}})),qI=n(((exports,t)=>{var n=HI(),r=GI(),i=UI(),a=WI(),o=KI(),s=function(e,t){this.init(e,t)},c={viewportSelector:`.svg-pan-zoom_viewport`,panEnabled:!0,controlIconsEnabled:!1,zoomEnabled:!0,dblClickZoomEnabled:!0,mouseWheelZoomEnabled:!0,preventMouseEventsDefault:!0,zoomScaleSensitivity:.1,minZoom:.5,maxZoom:10,fit:!0,contain:!1,center:!0,refreshRate:`auto`,beforeZoom:null,onZoom:null,beforePan:null,onPan:null,customEventsHandler:null,eventsListenerElement:null,onUpdatedCTM:null},l={passive:!0};s.prototype.init=function(e,t){var n=this;this.svg=e,this.defs=e.querySelector(`defs`),a.setupSvgAttributes(this.svg),this.options=i.extend(i.extend({},c),t),this.state=`none`;var s=a.getBoundingClientRectNormalized(e);this.width=s.width,this.height=s.height,this.viewport=o(a.getOrCreateViewport(this.svg,this.options.viewportSelector),{svg:this.svg,width:this.width,height:this.height,fit:this.options.fit,contain:this.options.contain,center:this.options.center,refreshRate:this.options.refreshRate,beforeZoom:function(e,t){if(n.viewport&&n.options.beforeZoom)return n.options.beforeZoom(e,t)},onZoom:function(e){if(n.viewport&&n.options.onZoom)return n.options.onZoom(e)},beforePan:function(e,t){if(n.viewport&&n.options.beforePan)return n.options.beforePan(e,t)},onPan:function(e){if(n.viewport&&n.options.onPan)return n.options.onPan(e)},onUpdatedCTM:function(e){if(n.viewport&&n.options.onUpdatedCTM)return n.options.onUpdatedCTM(e)}});var l=this.getPublicInstance();l.setBeforeZoom(this.options.beforeZoom),l.setOnZoom(this.options.onZoom),l.setBeforePan(this.options.beforePan),l.setOnPan(this.options.onPan),l.setOnUpdatedCTM(this.options.onUpdatedCTM),this.options.controlIconsEnabled&&r.enable(this),this.lastMouseWheelEventTime=Date.now(),this.setupHandlers()},s.prototype.setupHandlers=function(){var e=this,t=null;if(this.eventListeners={mousedown:function(n){var r=e.handleMouseDown(n,t);return t=n,r},touchstart:function(n){var r=e.handleMouseDown(n,t);return t=n,r},mouseup:function(t){return e.handleMouseUp(t)},touchend:function(t){return e.handleMouseUp(t)},mousemove:function(t){return e.handleMouseMove(t)},touchmove:function(t){return e.handleMouseMove(t)},mouseleave:function(t){return e.handleMouseUp(t)},touchleave:function(t){return e.handleMouseUp(t)},touchcancel:function(t){return e.handleMouseUp(t)}},this.options.customEventsHandler!=null){this.options.customEventsHandler.init({svgElement:this.svg,eventsListenerElement:this.options.eventsListenerElement,instance:this.getPublicInstance()});var n=this.options.customEventsHandler.haltEventListeners;if(n&&n.length)for(var r=n.length-1;r>=0;r--)this.eventListeners.hasOwnProperty(n[r])&&delete this.eventListeners[n[r]]}for(var i in this.eventListeners)(this.options.eventsListenerElement||this.svg).addEventListener(i,this.eventListeners[i],this.options.preventMouseEventsDefault?!1:l);this.options.mouseWheelZoomEnabled&&(this.options.mouseWheelZoomEnabled=!1,this.enableMouseWheelZoom())},s.prototype.enableMouseWheelZoom=function(){if(!this.options.mouseWheelZoomEnabled){var e=this;this.wheelListener=function(t){return e.handleMouseWheel(t)};var t=!this.options.preventMouseEventsDefault;n.on(this.options.eventsListenerElement||this.svg,this.wheelListener,t),this.options.mouseWheelZoomEnabled=!0}},s.prototype.disableMouseWheelZoom=function(){if(this.options.mouseWheelZoomEnabled){var e=!this.options.preventMouseEventsDefault;n.off(this.options.eventsListenerElement||this.svg,this.wheelListener,e),this.options.mouseWheelZoomEnabled=!1}},s.prototype.handleMouseWheel=function(e){if(!(!this.options.zoomEnabled||this.state!==`none`)){this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1);var t=e.deltaY||1,n=Date.now()-this.lastMouseWheelEventTime,r=3+Math.max(0,30-n);this.lastMouseWheelEventTime=Date.now(),`deltaMode`in e&&e.deltaMode===0&&e.wheelDelta&&(t=e.deltaY===0?0:Math.abs(e.wheelDelta)/e.deltaY),t=-.3<t&&t<.3?t:(t>0?1:-1)*Math.log(Math.abs(t)+10)/r;var i=this.svg.getScreenCTM().inverse(),o=a.getEventPoint(e,this.svg).matrixTransform(i),s=(1+this.options.zoomScaleSensitivity)**(-1*t);this.zoomAtPoint(s,o)}},s.prototype.zoomAtPoint=function(e,t,n){var r=this.viewport.getOriginalState();n?(e=Math.max(this.options.minZoom*r.zoom,Math.min(this.options.maxZoom*r.zoom,e)),e/=this.getZoom()):this.getZoom()*e<this.options.minZoom*r.zoom?e=this.options.minZoom*r.zoom/this.getZoom():this.getZoom()*e>this.options.maxZoom*r.zoom&&(e=this.options.maxZoom*r.zoom/this.getZoom());var i=this.viewport.getCTM(),a=t.matrixTransform(i.inverse()),o=this.svg.createSVGMatrix().translate(a.x,a.y).scale(e).translate(-a.x,-a.y),s=i.multiply(o);s.a!==i.a&&this.viewport.setCTM(s)},s.prototype.zoom=function(e,t){this.zoomAtPoint(e,a.getSvgCenterPoint(this.svg,this.width,this.height),t)},s.prototype.publicZoom=function(e,t){t&&(e=this.computeFromRelativeZoom(e)),this.zoom(e,t)},s.prototype.publicZoomAtPoint=function(e,t,n){if(n&&(e=this.computeFromRelativeZoom(e)),i.getType(t)!==`SVGPoint`)if(`x`in t&&`y`in t)t=a.createSVGPoint(this.svg,t.x,t.y);else throw Error(`Given point is invalid`);this.zoomAtPoint(e,t,n)},s.prototype.getZoom=function(){return this.viewport.getZoom()},s.prototype.getRelativeZoom=function(){return this.viewport.getRelativeZoom()},s.prototype.computeFromRelativeZoom=function(e){return e*this.viewport.getOriginalState().zoom},s.prototype.resetZoom=function(){var e=this.viewport.getOriginalState();this.zoom(e.zoom,!0)},s.prototype.resetPan=function(){this.pan(this.viewport.getOriginalState())},s.prototype.reset=function(){this.resetZoom(),this.resetPan()},s.prototype.handleDblClick=function(e){if(this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.options.controlIconsEnabled&&(e.target.getAttribute(`class`)||``).indexOf(`svg-pan-zoom-control`)>-1)return!1;var t=e.shiftKey?1/((1+this.options.zoomScaleSensitivity)*2):(1+this.options.zoomScaleSensitivity)*2,n=a.getEventPoint(e,this.svg).matrixTransform(this.svg.getScreenCTM().inverse());this.zoomAtPoint(t,n)},s.prototype.handleMouseDown=function(e,t){this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),i.mouseAndTouchNormalize(e,this.svg),this.options.dblClickZoomEnabled&&i.isDblClick(e,t)?this.handleDblClick(e):(this.state=`pan`,this.firstEventCTM=this.viewport.getCTM(),this.stateOrigin=a.getEventPoint(e,this.svg).matrixTransform(this.firstEventCTM.inverse()))},s.prototype.handleMouseMove=function(e){if(this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.state===`pan`&&this.options.panEnabled){var t=a.getEventPoint(e,this.svg).matrixTransform(this.firstEventCTM.inverse()),n=this.firstEventCTM.translate(t.x-this.stateOrigin.x,t.y-this.stateOrigin.y);this.viewport.setCTM(n)}},s.prototype.handleMouseUp=function(e){this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.state===`pan`&&(this.state=`none`)},s.prototype.fit=function(){var e=this.viewport.getViewBox(),t=Math.min(this.width/e.width,this.height/e.height);this.zoom(t,!0)},s.prototype.contain=function(){var e=this.viewport.getViewBox(),t=Math.max(this.width/e.width,this.height/e.height);this.zoom(t,!0)},s.prototype.center=function(){var e=this.viewport.getViewBox(),t=(this.width-(e.width+e.x*2)*this.getZoom())*.5,n=(this.height-(e.height+e.y*2)*this.getZoom())*.5;this.getPublicInstance().pan({x:t,y:n})},s.prototype.updateBBox=function(){this.viewport.simpleViewBoxCache()},s.prototype.pan=function(e){var t=this.viewport.getCTM();t.e=e.x,t.f=e.y,this.viewport.setCTM(t)},s.prototype.panBy=function(e){var t=this.viewport.getCTM();t.e+=e.x,t.f+=e.y,this.viewport.setCTM(t)},s.prototype.getPan=function(){var e=this.viewport.getState();return{x:e.x,y:e.y}},s.prototype.resize=function(){var e=a.getBoundingClientRectNormalized(this.svg);this.width=e.width,this.height=e.height;var t=this.viewport;t.options.width=this.width,t.options.height=this.height,t.processCTM(),this.options.controlIconsEnabled&&(this.getPublicInstance().disableControlIcons(),this.getPublicInstance().enableControlIcons())},s.prototype.destroy=function(){var e=this;for(var t in this.beforeZoom=null,this.onZoom=null,this.beforePan=null,this.onPan=null,this.onUpdatedCTM=null,this.options.customEventsHandler!=null&&this.options.customEventsHandler.destroy({svgElement:this.svg,eventsListenerElement:this.options.eventsListenerElement,instance:this.getPublicInstance()}),this.eventListeners)(this.options.eventsListenerElement||this.svg).removeEventListener(t,this.eventListeners[t],this.options.preventMouseEventsDefault?!1:l);this.disableMouseWheelZoom(),this.getPublicInstance().disableControlIcons(),this.reset(),u=u.filter(function(t){return t.svg!==e.svg}),delete this.options,delete this.viewport,delete this.publicInstance,delete this.pi,this.getPublicInstance=function(){return null}},s.prototype.getPublicInstance=function(){var e=this;return this.publicInstance||=this.pi={enablePan:function(){return e.options.panEnabled=!0,e.pi},disablePan:function(){return e.options.panEnabled=!1,e.pi},isPanEnabled:function(){return!!e.options.panEnabled},pan:function(t){return e.pan(t),e.pi},panBy:function(t){return e.panBy(t),e.pi},getPan:function(){return e.getPan()},setBeforePan:function(t){return e.options.beforePan=t===null?null:i.proxy(t,e.publicInstance),e.pi},setOnPan:function(t){return e.options.onPan=t===null?null:i.proxy(t,e.publicInstance),e.pi},enableZoom:function(){return e.options.zoomEnabled=!0,e.pi},disableZoom:function(){return e.options.zoomEnabled=!1,e.pi},isZoomEnabled:function(){return!!e.options.zoomEnabled},enableControlIcons:function(){return e.options.controlIconsEnabled||(e.options.controlIconsEnabled=!0,r.enable(e)),e.pi},disableControlIcons:function(){return e.options.controlIconsEnabled&&(e.options.controlIconsEnabled=!1,r.disable(e)),e.pi},isControlIconsEnabled:function(){return!!e.options.controlIconsEnabled},enableDblClickZoom:function(){return e.options.dblClickZoomEnabled=!0,e.pi},disableDblClickZoom:function(){return e.options.dblClickZoomEnabled=!1,e.pi},isDblClickZoomEnabled:function(){return!!e.options.dblClickZoomEnabled},enableMouseWheelZoom:function(){return e.enableMouseWheelZoom(),e.pi},disableMouseWheelZoom:function(){return e.disableMouseWheelZoom(),e.pi},isMouseWheelZoomEnabled:function(){return!!e.options.mouseWheelZoomEnabled},setZoomScaleSensitivity:function(t){return e.options.zoomScaleSensitivity=t,e.pi},setMinZoom:function(t){return e.options.minZoom=t,e.pi},setMaxZoom:function(t){return e.options.maxZoom=t,e.pi},setBeforeZoom:function(t){return e.options.beforeZoom=t===null?null:i.proxy(t,e.publicInstance),e.pi},setOnZoom:function(t){return e.options.onZoom=t===null?null:i.proxy(t,e.publicInstance),e.pi},zoom:function(t){return e.publicZoom(t,!0),e.pi},zoomBy:function(t){return e.publicZoom(t,!1),e.pi},zoomAtPoint:function(t,n){return e.publicZoomAtPoint(t,n,!0),e.pi},zoomAtPointBy:function(t,n){return e.publicZoomAtPoint(t,n,!1),e.pi},zoomIn:function(){return this.zoomBy(1+e.options.zoomScaleSensitivity),e.pi},zoomOut:function(){return this.zoomBy(1/(1+e.options.zoomScaleSensitivity)),e.pi},getZoom:function(){return e.getRelativeZoom()},setOnUpdatedCTM:function(t){return e.options.onUpdatedCTM=t===null?null:i.proxy(t,e.publicInstance),e.pi},resetZoom:function(){return e.resetZoom(),e.pi},resetPan:function(){return e.resetPan(),e.pi},reset:function(){return e.reset(),e.pi},fit:function(){return e.fit(),e.pi},contain:function(){return e.contain(),e.pi},center:function(){return e.center(),e.pi},updateBBox:function(){return e.updateBBox(),e.pi},resize:function(){return e.resize(),e.pi},getSizes:function(){return{width:e.width,height:e.height,realZoom:e.getZoom(),viewBox:e.viewport.getViewBox()}},destroy:function(){return e.destroy(),e.pi}},this.publicInstance};var u=[];t.exports=function(e,t){var n=i.getSvg(e);if(n===null)return null;for(var r=u.length-1;r>=0;r--)if(u[r].svg===n)return u[r].instance.getPublicInstance();return u.push({svg:n,instance:new s(n,t)}),u[u.length-1].instance.getPublicInstance()}})),JI=e(n(((exports,t)=>{t.exports=qI()}))());function YI(e){if(!e.gapDeg){let t=e.rMinor?`m 0.2 ${e.rMajor-e.rMinor}
a ${e.rMinor} ${e.rMinor} 0 1 1 -0.2 0
z`:``;return`M -0.1, ${-e.rMajor}
a ${e.rMajor} ${e.rMajor} 0 1 0 0.2 0
z
${t}`}let t=Math.PI/180,n=e.gapAngleDeg===void 0?e.gapDeg/2:e.gapAngleDeg,r=t*(e.gapCenterDeg+e.gapDeg/2),i=Math.cos(r),a=Math.sin(r),o=t*(e.gapCenterDeg-e.gapDeg/2),s=Math.cos(o),c=Math.sin(o),l=e.rMajor/e.rMinor*Math.sin(t*(e.gapDeg/2-n)),u=Math.asin(l)+t*n,d=t*e.gapCenterDeg+u,f=Math.cos(d),p=Math.sin(d),m=t*e.gapCenterDeg-u,h=Math.cos(m),g=Math.sin(m),_=e.gapDeg<=180?1:0;return`M ${i*e.rMajor-.001*a} ${a*e.rMajor+.001*i}
A ${e.rMajor} ${e.rMajor} 0 ${_} 1 ${s*e.rMajor+.001*c} ${c*e.rMajor-.001*s}
L ${h*e.rMinor+.001*g} ${g*e.rMinor-.001*h}
A ${e.rMinor} ${e.rMinor} 0 ${_} 0 ${f*e.rMinor-.001*p} ${p*e.rMinor+.001*f}
z`}var XI={name:`NodeBackground`,props:{position:{type:Object,required:!0},ring:{type:Object,required:!0},isStacked:{type:Boolean,required:!1,default:!1}},computed:{ringBackgroundTransform(){return this.position.asTranslate()},ringBackgroundPath(){return YI(this.ring)},ringBackgroundFilter(){return this.isStacked?``:`url(#backgroundGlow)`}}},ZI=D(XI,function(){var e=this,t=e._self._c;return t(`path`,{attrs:{transform:e.ringBackgroundTransform,d:e.ringBackgroundPath,fill:`rgba(0,0,0,0.75)`,stroke:`none`,filter:e.ringBackgroundFilter}})},[],!1,null,`50c8310a`,null,null).exports,QI={name:`NodeOverlay`,props:{complete:{type:Number,required:!0},position:{type:Object,required:!0},legend:{type:Object,required:!1,default:void 0},ring:{type:Object,required:!0},fill:{type:String,required:!1,default:void 0},alwaysShowLegend:{type:Boolean,required:!1,default:!1},forceLegend:{type:Function,required:!1,default:void 0},clickAction:{type:Function,required:!1,default:void 0}},data(){return{legendLines:[],hoverOverride:!1}},computed:{LEGEND_FONT_SIZE:()=>16,baseTransform(){return this.position.asTranslate()},pathData(){return YI(this.ring)},hasLegend(){return!!this.legend&&(!this.legend.hideWhenCompleted||this.complete<1)},legendArrowPoints(){let e=Vector.unitFromDegrees(this.legend.angle),t=[e.times(this.ring.rMajor+2)];return t.push(t[0].plus(e.times(this.legend.diagonal))),t.push(t[1].plus(Vector.horiz(this.legend.horizontal*Math.sign(e.x)))),t},legendArrowPointString(){return this.legendArrowPoints.join(` `)},legendTransform(){let e=this.legendArrowPoints,t=Math.sign(e[2].x-e[0].x);return e[2].plus(Vector.horiz(t*4)).asTranslate()},legendTextAnchor(){let e=(this.legend.angle+360)%360;return e>90&&e<270?`end`:`start`},nodeClass(){return{"o-celestial-nav__force-hover":this.hoverOverride,"o-celestial-nav__clickable":this.clickAction!==void 0}}},methods:{update(){this.legendLines=this.getLines(),this.hoverOverride=this.alwaysShowLegend||this.forceLegend&&this.forceLegend()},legendLineY(e){let t=Math.round(this.LEGEND_FONT_SIZE*1.25/2),n=this.legendLines.length;return(2*e-(n-1))*t},getLines(){if(!this.legend)return null;let e=typeof this.legend.text==`function`?this.legend.text(this.complete):this.legend.text;return typeof e==`string`?[e]:e}}},$I=D(QI,function(){var e=this,t=e._self._c;return t(`g`,e._g({staticClass:`o-celestial-nav__hoverable`,class:e.nodeClass,attrs:{transform:e.baseTransform}},e.clickAction?{click:e.clickAction}:{}),[t(`path`,{staticClass:`o-celestial-nav__node-overlay`,attrs:{d:e.pathData}}),e.hasLegend?t(`g`,{staticClass:`tooltiptext`},[t(`polyline`,{staticClass:`o-celestial-nav__legend-arrow`,attrs:{points:e.legendArrowPointString}}),t(`path`,{staticClass:`o-celestial-nav__legend-outline`,attrs:{d:e.pathData}}),t(`g`,{attrs:{transform:e.legendTransform}},[t(`text`,{staticClass:`o-celestial-nav__legend-text`,attrs:{"text-anchor":e.legendTextAnchor,"dominant-baseline":`middle`,"font-size":e.LEGEND_FONT_SIZE}},e._l(e.legendLines,function(n,r){return t(`tspan`,{key:r,attrs:{x:`0`,y:e.legendLineY(r)}},[e._v(` `+e._s(n)+` `)])}),0)])]):e._e()])},[],!1,null,`8dea8e65`,null,null).exports,eL={name:`NodeRing`,props:{complete:{type:Number,required:!0},position:{type:Object,required:!0},ring:{type:Object,required:!0},symbol:{type:String,required:!1,default:``},symbolScale:{type:Number,required:!1,default:1.4},symbolOffset:{type:String,required:!1,default:`0`},completeClass:{type:String,required:!1,default:void 0},incompleteClass:{type:String,required:!1,default:void 0},fill:{type:String,required:!1,default:void 0},isStacked:{type:Boolean,required:!1,default:!1}},computed:{baseTransform(){return this.position.asTranslate()},pathData(){return YI(this.ring)},ringClass(){return this.complete>=1?this.completeClass:this.incompleteClass},symbolFontSize(){return this.ring.rMajor*this.symbolScale},ringFilter(){return this.complete>=1&&!this.isStacked?`url(#completeGlow)`:``}}},tL=D(eL,function(){var e=this,t=e._self._c;return t(`g`,{attrs:{transform:e.baseTransform}},[t(`path`,{class:e.ringClass,attrs:{d:e.pathData,stroke:`none`,fill:e.fill,filter:e.ringFilter}}),e.symbol?t(`text`,{staticClass:`o-celestial-nav__symbol o-no-mouse`,attrs:{fill:`#000`,"dominant-baseline":`middle`,"font-size":e.symbolFontSize,dy:e.symbolOffset}},[e._v(` `+e._s(e.symbol)+` `)]):e._e()])},[],!1,null,`aa7b3eee`,null,null).exports,nL={name:`ProgressConnector`,props:{complete:{type:Number,required:!0},completeWidth:{type:Number,required:!1,default:8},incompleteWidth:{type:Number,required:!1,default:6},noBG:{type:Boolean,required:!1,default:!1},opacity:{type:Number,required:!1,default:1},fill:{type:String,required:!1,default:`#5151ec`},filterName:{type:String,required:!1,default:`completeGlow`},path:{type:Object,required:!0},pathStart:{type:Number,required:!0},pathEnd:{type:Number,required:!0},pathPadStart:{type:Number,required:!1,default:0},pathPadEnd:{type:Number,required:!1,default:0}},computed:{unpaddedSpan(){return this.pathEnd-this.pathPadEnd-(this.pathStart+this.pathPadStart)},incompleteStart(){return this.complete>=1?this.pathEnd:this.pathStart+this.pathPadStart+this.unpaddedSpan*this.complete},incompleteStartShape(){return this.shapeAt(this.incompleteStart)},completeStartShape(){return this.shapeAt(this.pathStart)},incompleteTransform(){let e=this.incompleteStartShape;return`${e.position.asTranslate()} ${e.direction.asRotate()}`},pathEndShape(){return this.shapeAt(this.pathEnd)},totalPathOffsetPx(){return this.pathEndShape.position.minus(this.completeStartShape.position)},completeTransform(){let e=this.completeStartShape,t=this.totalPathOffsetPx.length;return`${e.position.asTranslate()} ${e.direction.asRotate()} scale(${t})`},incompleteFadeEnd(){let e=12/this.incompleteStartShape.derivative.length;return this.pathEnd>this.pathStart?Math.min(this.incompleteStart+e,this.pathEnd):Math.max(this.incompleteStart-e,this.pathEnd)},incompleteFadePath(){return this.generateIncompletePath(this.incompleteStart,this.incompleteFadeEnd)},incompleteSolidPath(){return this.generateIncompletePath(this.incompleteFadeEnd-.001*(this.pathEnd-this.incompleteFadeEnd),this.pathEnd)},completePath(){let e=this.completeStartShape,t=1/this.totalPathOffsetPx.length,n=AffineTransform.translation(e.position.negative).rotated(-e.direction.angle).scaled(t),r=this.pathStart,i=this.incompleteStart,a=this.completeWidth,o=this.getOffsetPath(-a/2,r,i).transformedBy(n),s=this.getOffsetPath(a/2,i,r).transformedBy(n),c=this.incompleteStartShape.direction.transformedBy(n.withoutTranslation),l=o.path[o.path.length-1],u=s.path[0],d=l.position(1).plus(c.times(a/2)),f=u.position(0).plus(c.times(a/2)),p=`C ${d.x} ${d.y} ${f.x} ${f.y} ${u.p0.x} ${u.p0.y}\n`;return o.toSVG(`M`)+p+s.toSVG(`L`)},hasIncompleteSolidPath(){return this.incompleteFadeEnd!==this.pathEnd},filter(){return`url(#${this.filterName})`}},methods:{generateIncompletePath(e,t){let n=this.getOffsetPath(-this.incompleteWidth/2,e,t),r=this.getOffsetPath(this.incompleteWidth/2,t,e),i=this.incompleteStartShape,a=AffineTransform.translation(i.position.negative).rotated(-i.direction.angle);return n.transformedBy(a).toSVG(`M`)+r.transformedBy(a).toSVG(`L`)},getOffsetPath(e,t,n){if(this.path instanceof LinearPath)return new PiecewisePath([this.path.createOffsetLine(e,t,n)]);let r=new OffsetCurve(this.path,e);return PiecewisePath.cubicBezierFitToCurveSection(r,t,n)},shapeAt(e){let t=this.path.shapeAt(e);return this.pathStart>this.pathEnd&&(t.direction=t.direction.negative,t.derivative=t.derivative.negative),t}}},rL=D(nL,function(){var e=this,t=e._self._c;return t(`g`,[e.noBG?e._e():t(`g`,{attrs:{transform:e.incompleteTransform}},[t(`path`,{attrs:{d:e.incompleteFadePath,fill:`url(#incompleteFade)`}}),e.hasIncompleteSolidPath?t(`path`,{attrs:{d:e.incompleteSolidPath,fill:`#888`}}):e._e()]),t(`g`,{attrs:{filter:e.filter}},[t(`path`,{style:{opacity:e.opacity},attrs:{transform:e.completeTransform,fill:e.fill,stroke:`none`,d:e.completePath}})])])},[],!1,null,`2a3860f0`,null,null).exports,iL=`/NG-plus-3/images/celestial-navigation-bg.webp`,aL={name:`CelestialNavigationTab`,components:{NodeRing:tL,NodeBackground:ZI,NodeOverlay:$I,ProgressConnector:rL},data:()=>({nodeState:null}),computed:{db(){return{...GameDatabase.celestials.navigation,...GameDatabase.celestials.navSigils}},drawOrder(){let e=this.db,t=[];for(let n of Object.keys(e)){let r=e[n];if(Array.isArray(r.connector))for(let e of r.connector)t.push({nodeId:n,is:rL,config:e,drawOrder:e.drawOrder||re.CONNECTORS});else r.connector&&t.push({nodeId:n,is:rL,config:r.connector,drawOrder:r.connector.drawOrder||re.CONNECTORS});r.node&&(t.push({nodeId:n,is:ZI,config:r.node,drawOrder:r.node.bgDrawOrder||re.NODE_BG}),t.push({nodeId:n,is:tL,config:r.node,drawOrder:r.node.drawOrder||re.NODES}),t.push({nodeId:n,is:$I,config:r.node,drawOrder:r.node.overlayDrawOrder||re.NODE_OVERLAYS})),t.sort((e,t)=>e.drawOrder-t.drawOrder)}return t}},created(){this.nodeState=Object.keys(this.db).mapToObject(e=>e,()=>({visible:!1,complete:0}))},mounted(){this.panZoom=(0,JI.default)(this.$refs.celestialNavigationSVG,{controlIconsEnabled:!0,dblClickZoomEnabled:!1,center:!1,fit:!1,zoomScaleSensitivity:.3,minZoom:.64,maxZoom:1.5,beforePan:(e,t)=>{let n=this.getSizes(),r=n.width-(n.viewBox.x+n.viewBox.width)*n.realZoom,i=-n.viewBox.x*n.realZoom,a=n.height-(n.viewBox.y+n.viewBox.height)*n.realZoom,o=-n.viewBox.y*n.realZoom;return{x:Math.max(r,Math.min(i,t.x)),y:Math.max(a,Math.min(o,t.y))}}}),oL.pan&&this.panZoom.pan(oL.pan),oL.zoom&&this.panZoom.zoom(oL.zoom)},beforeDestroy(){this.panZoom&&(oL.zoom=this.panZoom.getZoom(),oL.pan=this.panZoom.getPan(),this.panZoom.destroy(),delete this.panZoom)},methods:{update(){for(let e of Object.keys(this.db)){if(!this.nodeState)continue;this.nodeState[e].visible=this.db[e].visible(),this.nodeState[e].complete=this.db[e].complete()}},vec(e,t){return new Vector(e,t)},nodeVisibility(e){return this.nodeState[e.nodeId].visible?`visible`:`hidden`}}},oL={pan:{x:125,y:125},zoom:.75},sL=D(aL,function(){var e=this,t=e._self._c;return t(`div`,[t(`svg`,{ref:`celestialNavigationSVG`,staticClass:`c-wide-canvas-element l-celestial-navigation`},[t(`defs`,[t(`linearGradient`,{attrs:{id:`grad1`,x1:`0%`,y1:`0%`,x2:`100%`,y2:`0%`}},[t(`stop`,{attrs:{offset:`0%`,"stop-color":`#ffff00`,"stop-opacity":`1`}}),t(`stop`,{attrs:{offset:`100%`,"stop-color":`#ff0000`,"stop-opacity":`1`}})],1),t(`linearGradient`,{attrs:{id:`incompleteFade`,x1:`0`,x2:`8`,gradientUnits:`userSpaceOnUse`}},[t(`stop`,{attrs:{offset:`0`,"stop-color":`#888`,"stop-opacity":`0`}}),t(`stop`,{attrs:{offset:`8`,"stop-color":`#888`,"stop-opacity":`1`}})],1),t(`linearGradient`,{attrs:{id:`fadeGrad`,y2:`0`,x2:`1`}},[t(`stop`,{attrs:{offset:`0.5`,"stop-color":`white`,"stop-opacity":`0`}}),t(`stop`,{attrs:{offset:`1`,"stop-color":`white`,"stop-opacity":`.5`}})],1),t(`linearGradient`,{attrs:{id:`gradTeresaEffarig`,y2:`0`,x2:`1`,gradientUnits:`userSpaceOnUse`}},[t(`stop`,{attrs:{offset:`0`,"stop-color":`#5151ec`}}),t(`stop`,{attrs:{offset:`1`,"stop-color":`#d13737`}})],1),t(`linearGradient`,{attrs:{id:`gradEffarigEnslaved`,y2:`0`,x2:`1`,gradientUnits:`userSpaceOnUse`}},[t(`stop`,{attrs:{offset:`0`,"stop-color":`#d13737`}}),t(`stop`,{attrs:{offset:`1`,"stop-color":`#ffa337`}})],1),t(`linearGradient`,{attrs:{id:`gradEnslavedV`,y2:`0`,x2:`1`,gradientUnits:`userSpaceOnUse`}},[t(`stop`,{attrs:{offset:`0`,"stop-color":`#ffa337`}}),t(`stop`,{attrs:{offset:`1`,"stop-color":`#ffe066`}})],1),t(`linearGradient`,{attrs:{id:`gradRaTeresa`,y2:`0`,x2:`1`,gradientUnits:`userSpaceOnUse`}},[t(`stop`,{attrs:{offset:`0`,"stop-color":`#9063de`}}),t(`stop`,{attrs:{offset:`1`,"stop-color":`#5151ec`}})],1),t(`linearGradient`,{attrs:{id:`gradRaEffarig`,y2:`0`,x2:`1`,gradientUnits:`userSpaceOnUse`}},[t(`stop`,{attrs:{offset:`0`,"stop-color":`#9063de`}}),t(`stop`,{attrs:{offset:`1`,"stop-color":`#d13737`}})],1),t(`linearGradient`,{attrs:{id:`gradRaEnslaved`,y2:`0`,x2:`1`,gradientUnits:`userSpaceOnUse`}},[t(`stop`,{attrs:{offset:`0`,"stop-color":`#9063de`}}),t(`stop`,{attrs:{offset:`1`,"stop-color":`#ffa337`}})],1),t(`linearGradient`,{attrs:{id:`gradRaV`,y2:`0`,x2:`1`,gradientUnits:`userSpaceOnUse`}},[t(`stop`,{attrs:{offset:`0`,"stop-color":`#9063de`}}),t(`stop`,{attrs:{offset:`1`,"stop-color":`#ffe066`}})],1),t(`linearGradient`,{attrs:{id:`gradRaLaitela`,y2:`0`,x2:`1`,gradientUnits:`userSpaceOnUse`}},[t(`stop`,{attrs:{offset:`0`,"stop-color":`#9063de`}}),t(`stop`,{attrs:{offset:`1`,"stop-color":`white`}})],1),t(`linearGradient`,{attrs:{id:`gradLaitelaPelle`,y2:`0`,x2:`1`,gradientUnits:`userSpaceOnUse`}},[t(`stop`,{attrs:{offset:`0`,"stop-color":`white`}}),t(`stop`,{attrs:{offset:`1`,"stop-color":`crimson`}})],1),t(`mask`,{attrs:{id:`fade`,maskContentUnits:`objectBoundingBox`}},[t(`rect`,{attrs:{width:`1`,height:`1`,fill:`url(#fadeGrad)`}})]),t(`filter`,{attrs:{id:`completeGlow`,x:`-100%`,y:`-100%`,width:`300%`,height:`300%`}},[t(`feGaussianBlur`,{attrs:{in:`SourceGraphic`,result:`blurred`,stdDeviation:`2`}}),t(`feMerge`,[t(`feMergeNode`,{attrs:{in:`blurred`}}),t(`feMergeNode`,{attrs:{in:`SourceGraphic`}})],1)],1),t(`filter`,{attrs:{id:`backgroundGlow`,x:`-100%`,y:`-100%`,width:`300%`,height:`300%`}},[t(`feGaussianBlur`,{attrs:{in:`SourceGraphic`,result:`blurred`,stdDeviation:`4`}}),t(`feMerge`,[t(`feMergeNode`,{attrs:{in:`blurred`}}),t(`feMergeNode`,{attrs:{in:`SourceGraphic`}})],1)],1)],1),t(`image`,{attrs:{x:`-250`,y:`-350`,height:`1503`,width:`1503`,href:iL}}),e._l(e.drawOrder,function(n,r){return t(`g`,{key:r,attrs:{visibility:e.nodeVisibility(n)}},[t(n.is,e._b({tag:`component`,attrs:{complete:e.nodeState[n.nodeId].complete}},`component`,n.config,!1))],1)})],2)])},[],!1,null,`3778e604`,null,null).exports,cL={name:`ChallengeRecordsList`,props:{name:{type:String,required:!0},start:{type:Number,required:!0},times:{type:Array,required:!0}},computed:{timeSum(){return this.times.sum()},completedAllChallenges(){return this.timeSum.lt(new Decimal(`10^^8900000000000000`))}},methods:{timeDisplayShort,completionString(e){return e.lt(new Decimal(`10^^8900000000000000`))?`record time: ${timeDisplayShort(e)}`:`has not yet been completed`}}},lL={name:`ChallengeRecordsTab`,components:{ChallengeRecordsList:D(cL,function(){var e=this,t=e._self._c;return t(`div`,[t(`br`),e._l(e.times,function(n,r){return t(`div`,{key:r},[t(`span`,[e._v(e._s(e.name)+` `+e._s(e.start+r)+` `+e._s(e.completionString(n)))])])}),t(`br`),e.completedAllChallenges?t(`div`,[e._v(` Sum of `+e._s(e.name)+` record times: `+e._s(e.timeDisplayShort(e.timeSum))+` `)]):t(`div`,[e._v(` You have not completed all `+e._s(e.name)+`s yet. `)])],2)},[],!1,null,null,null,null).exports},data(){return{infinityChallengesUnlocked:!1,normalChallenges:[],infinityChallenges:[]}},methods:{getNormalChallengeTimes(){let e=[],t=new Decimal;for(let n=0;n<11;n++)t=new Decimal,t.copyFrom(player.challenge.normal.bestTimes[n]),e.push(t);return e},getInfinityChallengeTimes(){let e=[],t=new Decimal;for(let n=0;n<8;n++)t=new Decimal,t.copyFrom(player.challenge.infinity.bestTimes[n]),e.push(t);return e},update(){this.infinityChallengesUnlocked=PlayerProgress.infinityChallengeCompleted()||PlayerProgress.eternityUnlocked(),this.normalChallenges=this.getNormalChallengeTimes(),this.infinityChallenges=this.getInfinityChallengeTimes()}}},uL=D(lL,function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-challenge-records-tab c-stats-tab`},[t(`ChallengeRecordsList`,{attrs:{start:2,times:e.normalChallenges,name:`Normal Challenge`}}),e.infinityChallengesUnlocked?t(`ChallengeRecordsList`,{staticClass:`l-challenge-records-tab__infinity_challenges`,attrs:{start:1,times:e.infinityChallenges,name:`Infinity Challenge`}}):e._e()],1)},[],!1,null,null,null,null).exports,dL={name:`CelestialQuoteHistory`,props:{celestial:{type:String,required:!0}},data(){return{isShown:!1}},computed:{color(){return this.celestial===`laitela`?`var(--color-laitela--accent)`:`var(--color-${this.celestial}--base)`},possessiveForm(){return Celestials[this.celestial].possessiveName}},methods:{update(){this.isShown=Celestials[this.celestial].quotes.all.some(e=>e.isUnlocked)},show(){Quote.showHistory(Celestials[this.celestial].quotes.all)}}},fL=D(dL,function(){var e=this,t=e._self._c;return e.isShown?t(`button`,{staticClass:`c-celestial-quote-history--button`,style:{"--scoped-cel-color":e.color},on:{click:e.show}},[e._v(` `+e._s(e.possessiveForm)+` Quotes `)]):e._e()},[],!1,null,null,null,null).exports,pL={name:`EffarigRunUnlockReward`,props:{unlock:{type:Object,required:!0}},data(){return{isUnlocked:!1}},computed:{descriptionLines(){return this.unlock.config.description.split(`
`).map(e=>e.trim())},symbol:()=>GlyphInfo.effarig.regularGlyphSymbol,isDoomed:()=>Pelle.isDoomed},methods:{update(){this.isUnlocked=this.unlock.isUnlocked}}},mL=D(pL,function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-effarig-tab__reward`},[t(`div`,{staticClass:`c-effarig-tab__reward-label`},[e._v(` `+e._s(e.unlock.config.label)+`: `)]),e.isUnlocked?t(`div`,{staticClass:`l-effarig-tab__reward-descriptions`},e._l(e.descriptionLines,function(n,r){return t(`div`,{key:r+`-effarig-reward-description`,staticClass:`c-effarig-tab__reward-description`},[t(`span`,{staticClass:`c-effarig-tab__reward-symbol`},[e._v(` `+e._s(e.symbol)+` `)]),t(`span`,{class:{"o-pelle-disabled":e.isDoomed}},[e._v(` `+e._s(n)+` `)])])}),0):t(`span`,{staticClass:`c-effarig-tab__reward-symbol`},[e._v(`?`)])])},[],!1,null,null,null,null).exports,hL={name:`EffarigUnlockButton`,components:{DescriptionDisplay:u,CostDisplay:pe},props:{unlock:{type:Object,required:!0}},data(){return{isBought:!1,isAvailable:!1}},computed:{config(){return this.unlock.config},classObject(){return{"c-effarig-shop-button":!0,"c-effarig-shop-button--bought":this.isBought,"c-effarig-shop-button--available":this.isAvailable&&!this.isBought}}},methods:{update(){this.isBought=this.unlock.isUnlocked,this.isAvailable=Currency.relicShards.gte(this.unlock.cost)},purchase(){this.unlock.purchase()}}},gL={name:`EffarigTab`,components:{EffarigUnlockButton:D(hL,function(){var e=this,t=e._self._c;return t(`button`,{class:e.classObject,on:{click:e.purchase}},[t(`DescriptionDisplay`,{attrs:{config:e.config}}),e.isBought?t(`div`,[e._v(` (Unlocked) `)]):t(`CostDisplay`,{attrs:{config:e.config,name:`Relic Shard`,label:``}})],1)},[],!1,null,null,null,null).exports,EffarigRunUnlockReward:mL,CelestialQuoteHistory:fL},data(){return{relicShards:new Decimal,shardRarityBoost:new Decimal,shardPower:new Decimal,shardsGained:new Decimal,currentShardsRate:new Decimal,amplification:new Decimal,amplifiedShards:new Decimal,amplifiedShardsRate:new Decimal,runUnlocked:!1,quote:``,isRunning:!1,vIsFlipped:!1,relicShardRarityAlwaysMax:!1}},computed:{shopUnlocks:()=>[EffarigUnlock.adjuster,EffarigUnlock.glyphFilter,EffarigUnlock.setSaves],runUnlock:()=>EffarigUnlock.run,runUnlocks:()=>[EffarigUnlock.infinity,EffarigUnlock.eternity,EffarigUnlock.reality],symbol:()=>GlyphInfo.effarig.regularGlyphSymbol,runButtonOuterClass(){return{"l-effarig-run-button":!0,"c-effarig-run-button":!0,"c-effarig-run-button--running":this.isRunning,"c-effarig-run-button--not-running":!this.isRunning,"c-celestial-run-button--clickable":!this.isDoomed,"o-pelle-disabled-pointer":this.isDoomed}},runButtonInnerClass(){return this.isRunning?`c-effarig-run-button__inner--running`:`c-effarig-run-button__inner--not-running`},runDescription(){return`${GameDatabase.celestials.descriptions[1].effects()}\n
      ${GameDatabase.celestials.descriptions[1].description()}`},showShardsRate(){return this.currentShardsRate},isDoomed:()=>Pelle.isDoomed},watch:{isRunning(){this.$recompute(`runDescription`)}},methods:{update(){this.relicShards.copyFrom(Currency.relicShards.value),this.shardRarityBoost.copyFrom(Effarig.maxRarityBoost.div(100)),this.shardPower=Ra.unlocks.maxGlyphRarityAndShardSacrificeBoost.effectOrDefault(new Decimal(1)),this.shardsGained.copyFrom(Effarig.shardsGained),this.currentShardsRate=this.shardsGained.div(Time.thisRealityRealTime.totalMinutes),this.amplification.copyFrom(simulatedRealityCount(!1)),this.amplifiedShards=this.shardsGained.mul(this.amplification.add(1)),this.amplifiedShardsRate=this.amplifiedShards.div(Time.thisRealityRealTime.totalMinutes),this.quote=Effarig.quote,this.runUnlocked=EffarigUnlock.run.isUnlocked,this.isRunning=Effarig.isRunning,this.vIsFlipped=V.isFlipped,this.relicShardRarityAlwaysMax=Ra.unlocks.extraGlyphChoicesAndRelicShardRarityAlwaysMax.canBeApplied},startRun(){this.isDoomed||Modal.celestials.show({name:`Effarig's`,number:1})},createCursedGlyph(){Glyphs.giveCursedGlyph()}}},_L=D(gL,function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-teresa-celestial-tab`},[t(`CelestialQuoteHistory`,{attrs:{celestial:`effarig`}}),t(`div`,{staticClass:`l-effarig-shop-and-run`},[t(`div`,{staticClass:`l-effarig-shop`},[t(`div`,{staticClass:`c-effarig-relics`},[e._v(` You have `+e._s(e.quantify(`Relic Shard`,e.relicShards,2,0))+`. `),t(`br`),e.relicShardRarityAlwaysMax?t(`span`,[e._v(` The rarity of new Glyphs is being increased by +`+e._s(e.formatPercents(e.shardRarityBoost,2))+`. `)]):t(`span`,[e._v(` Each new Glyph will have its rarity increased `),t(`br`),e._v(` by a random value between +`+e._s(e.formatPercents(0))+` and +`+e._s(e.formatPercents(e.shardRarityBoost,2))+`. `)]),e.shardPower.gt(1)?t(`span`,[t(`br`),e._v(` Glyph Sacrifice gain is also being raised to `+e._s(e.formatPow(e.shardPower,0,2))+`. `)]):e._e()]),t(`div`,{staticClass:`c-effarig-relic-description`},[e._v(` You will gain `+e._s(e.quantify(`Relic Shard`,e.shardsGained,2))+` next Reality (`+e._s(e.format(e.currentShardsRate,2))+`/min). `),e.amplification.neq(0)?t(`span`,[t(`br`),e._v(` Due to amplification of your current Reality, `),t(`br`),e._v(` you will actually gain a total of `+e._s(e.quantify(`Relic Shard`,e.amplifiedShards,2))+` (`+e._s(e.format(e.amplifiedShardsRate,2))+`/min). `)]):e._e()]),e._m(0),e._l(e.shopUnlocks,function(e,n){return t(`EffarigUnlockButton`,{key:n,attrs:{unlock:e}})}),e.runUnlocked?e._e():t(`EffarigUnlockButton`,{attrs:{unlock:e.runUnlock}}),e.vIsFlipped?t(`button`,{staticClass:`c-effarig-shop-button c-effarig-shop-button--available`,on:{click:e.createCursedGlyph}},[e._v(` Get a Cursed Glyph... `)]):e._e()],2),e.runUnlocked?t(`div`,{staticClass:`l-effarig-run`},[t(`div`,{staticClass:`c-effarig-run-description`},[t(`span`,{class:{"o-pelle-disabled":e.isDoomed}},[e._v(` Enter Effarig's Reality. `)])]),t(`div`,{class:e.runButtonOuterClass,on:{click:e.startRun}},[t(`div`,{class:e.runButtonInnerClass,attrs:{"button-symbol":e.symbol}},[e._v(` `+e._s(e.symbol)+` `)])]),t(`div`,{staticClass:`c-effarig-run-description`},[e._v(` `+e._s(e.runDescription)+` `)]),e._l(e.runUnlocks,function(e,n){return t(`EffarigRunUnlockReward`,{key:n,attrs:{unlock:e}})})],2):e._e()])],1)},[function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`c-effarig-relic-description`},[t(`br`),e._v(` More Eternity Points slightly increases Relic Shards `),t(`br`),e._v(` gained. More distinct Glyph effects significantly `),t(`br`),e._v(` increases Relic Shards gained. `)])}],!1,null,`2015f1b3`,null,null).exports,vL=D({name:`EnslavedTab`,components:{CelestialQuoteHistory:fL,PrimaryButton:L,PrimaryToggleButton:R,BlackHoleChargingSliders:AI},data:()=>({isStoringBlackHole:!1,isStoringReal:!1,autoStoreReal:!1,offlineEnabled:!1,hasAutoRelease:!1,isRunning:!1,completed:!1,storedBlackHole:new Decimal(0),storedReal:new Decimal,storedRealEffiency:0,storedRealCap:new Decimal,autoRelease:!1,autoReleaseSpeed:new Decimal,unlocks:[],buyableUnlocks:[],quote:``,currentSpeedUp:new Decimal,hintsUnlocked:!1,canModifyGameTimeStorage:!1,canChangeStoreTime:!1,canChangeStoreRealTime:!1,canDischarge:!1,canAutoRelease:!1,hasNoCharge:!0,hasReachedCurrentCap:!1}),computed:{storedRealEfficiencyDesc(){return formatPercents(this.storedRealEffiency)},storedRealCapDesc(){return timeDisplayShort(this.storedRealCap)},unlocksInfo(){return ENSLAVED_UNLOCKS},nerfedBlackHoleTime(){return Enslaved.storedTimeInsideEnslaved(this.storedBlackHole)},realityTitle(){return this.isRunning?`You are inside The Nameless Ones' Reality`:`Start The Nameless Ones' Reality`},runButtonClassObject(){return{"c-enslaved-run-button__icon":!0,"c-enslaved-run-button__icon--running":this.isRunning,"c-celestial-run-button--clickable":!this.isDoomed,"o-pelle-disabled-pointer":this.isDoomed}},runDescription(){return GameDatabase.celestials.descriptions[2].effects().split(`
`)},realTimeButtonText(){return this.offlineEnabled?this.autoStoreReal?`Offline time stored`:`Offline time used for production`:`Offline Progress is disabled`},enslavedSymbol:()=>Enslaved.symbol,isDoomed:()=>Pelle.isDoomed,storeGameTimeClass(){return{"o-enslaved-mechanic-button":!0,"o-enslaved-mechanic-button--clickable":this.canModifyGameTimeStorage,"o-enslaved-mechanic-button--storing-time":this.isStoringBlackHole,"l-fixed-setting":!this.canModifyGameTimeStorage,"o-pelle-disabled":this.isDoomed}},storeRealTimeClass(){return{"o-enslaved-mechanic-button":!0,"o-enslaved-mechanic-button--clickable":!this.isDoomed,"o-enslaved-mechanic-button--storing-time":this.isStoringReal,"l-fixed-setting":!this.canChangeStoreRealTime,"o-pelle-disabled":this.isDoomed}},dischargeClass(){return{"o-enslaved-mechanic-button":!0,"o-enslaved-mechanic-button--clickable":!this.isDoomed,"l-fixed-setting":!this.canDischarge||this.hasNoCharge,"o-pelle-disabled":this.isDoomed}},doomedDisabledClass(){return{"o-pelle-disabled":this.isDoomed}},mechanicButtonClass(){return{"o-enslaved-mechanic-button":!0,"o-enslaved-mechanic-button--clickable":!this.isDoomed}}},watch:{autoRelease(e){player.celestials.enslaved.isAutoReleasing=e}},methods:{update(){this.isStoringBlackHole=Enslaved.isStoringGameTime,this.storedBlackHole.copyFrom(player.celestials.enslaved.stored),this.isStoringReal=Enslaved.isStoringRealTime,this.autoStoreReal=player.celestials.enslaved.autoStoreReal,this.offlineEnabled=player.options.offlineProgress,this.hasAutoRelease=Ra.unlocks.autoPulseTime.canBeApplied,this.isRunning=Enslaved.isRunning,this.completed=Enslaved.isCompleted&&!this.isDoomed,this.storedReal.copyFrom(player.celestials.enslaved.storedReal),this.storedRealEffiency=Enslaved.storedRealTimeEfficiency,this.storedRealCap.copyFrom(Enslaved.storedRealTimeCap),this.unlocks=[...player.celestials.enslaved.unlocks],this.buyableUnlocks=Object.values(ENSLAVED_UNLOCKS).map(e=>Enslaved.canBuy(e)),this.quote=Enslaved.quote,this.autoRelease=player.celestials.enslaved.isAutoReleasing,this.autoReleaseSpeed.copyFrom(Enslaved.isAutoReleasing?Enslaved.autoReleaseSpeed:new Decimal(0)),this.currentSpeedUp.copyFrom(Enslaved.currentBlackHoleStoreAmountPerMs),this.hintsUnlocked=EnslavedProgress.hintsUnlocked.hasProgress,this.canModifyGameTimeStorage=Enslaved.canModifyGameTimeStorage,this.canChangeStoreTime=Enslaved.canModifyGameTimeStorage,this.canChangeStoreRealTime=Enslaved.canModifyRealTimeStorage,this.canDischarge=Enslaved.canRelease(!1),this.canAutoRelease=Enslaved.canRelease(!0),this.hasNoCharge=this.storedBlackHole.eq(0),this.hasReachedCurrentCap=this.storedReal.eq(this.storedRealCap)},toggleStoreBlackHole(){Enslaved.toggleStoreBlackHole()},toggleStoreReal(){Enslaved.toggleStoreReal()},toggleAutoStoreReal(){this.offlineEnabled&&Enslaved.toggleAutoStoreReal()},useStored(){Enslaved.useStoredTime(!1)},timeDisplayShort(e){return timeDisplayShort(e)},timeUntilBuy(e){return Decimal.max(new Decimal(e).sub(this.storedBlackHole).div(this.currentSpeedUp),0)},buyUnlock(e){Enslaved.buyUnlock(e)},startRun(){this.isDoomed||Modal.celestials.show({name:`The Nameless Ones'`,number:2})},hasUnlock(e){return Enslaved.has(e)},canBuyUnlock(e){return this.buyableUnlocks[e.id]},unlockClassObject(e){return{"o-enslaved-shop-button--bought":this.hasUnlock(e),"o-enslaved-shop-button--available":this.canBuyUnlock(e)}},glitchStyle(e){let t=(e-13)*.5555555555555556+(Math.random()*2-1)*.85,n=(Math.random()*2-1)*5,r=(Math.random()**1.5+.25)*3*5;return{transform:`translate(${t}rem, ${n}rem)`,height:`${r}rem`}}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-enslaved-celestial-tab`},[t(`CelestialQuoteHistory`,{attrs:{celestial:`enslaved`}}),e.hasAutoRelease&&e.canAutoRelease?t(`div`,{staticClass:`c-subtab-option-container`},[t(`PrimaryToggleButton`,{staticClass:`o-primary-btn--subtab-option`,attrs:{label:`Pulse Black Hole:`},model:{value:e.autoRelease,callback:function(t){e.autoRelease=t},expression:`autoRelease`}})],1):e._e(),t(`div`,{staticClass:`l-enslaved-celestial-tab--inner`},[t(`div`,{staticClass:`l-enslaved-run-container`},[e.hasUnlock(e.unlocksInfo.RUN)?t(`div`,[t(`div`,{staticClass:`c-enslaved-run-button`},[t(`div`,{staticClass:`c-enslaved-run-button__title`,class:e.doomedDisabledClass},[e._v(` `+e._s(e.realityTitle)+` `)]),e.completed?t(`div`,[t(`b`,[e._v(`(Completed)`)])]):e._e(),t(`div`,{class:e.runButtonClassObject,on:{click:e.startRun}},[t(`div`,{staticClass:`c-enslaved-run-button__icon__sigil`},[e._v(` `+e._s(e.enslavedSymbol)+` `)]),e._l(e.isRunning?25:0,function(n){return t(`div`,{key:n,staticClass:`c-enslaved-run-button__icon__glitch`,style:e.glitchStyle(n)})})],2),e._l(e.runDescription,function(n){return t(`div`,{key:n,staticClass:`c-enslaved-run-description-line`},[e._v(` `+e._s(n)+` `)])}),t(`b`,[e._v(`Reward: Unlock Tesseracts, which let you increase Infinity Dimension caps (see Infinity Dimension tab)`)])],2)]):e._e()]),t(`div`,{staticClass:`l-enslaved-upgrades-column`},[e.hintsUnlocked?t(`PrimaryButton`,{staticClass:`o-primary-btn`,attrs:{onclick:`Modal.enslavedHints.show()`}},[e._v(` Examine the Reality more closely... `)]):e._e(),t(`div`,{staticClass:`l-enslaved-top-container`},[t(`div`,{staticClass:`l-enslaved-top-container__half`},[e._v(` While charging, game speed multipliers are `+e._s(e.hasAutoRelease?`decreased`:`disabled`)+`, and the lost speed is converted into stored game time. Discharging the Black Hole allows you to skip forward in time. Stored game time is also used to unlock certain upgrades. `),t(`button`,{class:e.storeGameTimeClass,on:{click:e.toggleStoreBlackHole}},[t(`div`,{staticClass:`o-enslaved-stored-time`,class:e.doomedDisabledClass},[e._v(` `+e._s(e.timeDisplayShort(e.storedBlackHole))+` `)]),t(`div`,[e._v(` `+e._s(e.isStoringBlackHole?`Charging Black Hole`:`Charge Black Hole`)+` `)])]),t(`button`,{class:e.dischargeClass,on:{click:e.useStored}},[t(`span`,[e._v(`Discharge Black Hole`)]),e.isRunning?t(`p`,[e._v(` `+e._s(e.timeDisplayShort(e.nerfedBlackHoleTime))+` in this Reality `)]):e._e()])]),t(`div`,{staticClass:`l-enslaved-top-container__half`},[e._v(` Storing real time completely halts all production, setting game speed to `+e._s(e.formatInt(0))+`. You can use stored real time to "amplify" a Reality, simulating repeated runs of it. Amplified Realities give all the rewards that normal Realities do. `),t(`button`,{class:[e.storeRealTimeClass,{"l-fixed-setting":e.hasReachedCurrentCap}],on:{click:e.toggleStoreReal}},[t(`div`,{staticClass:`o-enslaved-stored-time`},[e._v(` `+e._s(e.timeDisplayShort(e.storedReal))+` `)]),t(`div`,[e._v(` `+e._s(e.isStoringReal?`Storing real time`:`Store real time`)+` `)])]),t(`button`,{class:[e.mechanicButtonClass,{"o-enslaved-mechanic-button--storing-time":e.autoStoreReal&&e.offlineEnabled,"l-fixed-setting":!e.canChangeStoreRealTime||!e.offlineEnabled},e.doomedDisabledClass],on:{click:e.toggleAutoStoreReal}},[e._v(` `+e._s(e.realTimeButtonText)+` `)]),t(`div`,[e._v(` Efficiency: `+e._s(e.storedRealEfficiencyDesc)+` `)]),t(`div`,[e._v(` Maximum stored real time: `+e._s(e.storedRealCapDesc)+` `)])])]),t(`BlackHoleChargingSliders`),t(`br`),t(`div`,{staticClass:`l-enslaved-shop-container`},e._l(e.unlocksInfo,function(n){return t(`button`,{key:n.id,staticClass:`o-enslaved-shop-button`,class:e.unlockClassObject(n),on:{click:function(t){return e.buyUnlock(n)}}},[e._v(` `+e._s(n.description())+` `),e.hasUnlock(n)?e._e():t(`div`,[e._v(` Costs: `+e._s(e.timeDisplayShort(n.price))+` `)]),e.isStoringBlackHole&&!e.hasUnlock(n)&&e.timeUntilBuy(n.price).gt(0)?t(`span`,[e._v(` Time to obtain: `+e._s(e.timeDisplayShort(e.timeUntilBuy(n.price)))+` `)]):e._e()])}),0)],1)])],1)},[],!1,null,`2274c7a0`,null,null).exports,yL={name:`EternityChallengeBoxWrapper`,components:{HintText:me},props:{name:{type:String,required:!0},isUnlocked:{type:Boolean,required:!0},isRunning:{type:Boolean,required:!0},isCompleted:{type:Boolean,required:!0},canBeUnlocked:{type:Boolean,required:!0},completionCount:{type:Number,required:!0},overrideLabel:{type:String,required:!1,default:``}},data(){return{challengeId:Number}},computed:{buttonClassObject(){let e=this.isCompleted&&!this.isUnlocked,t=this.isCompleted&&this.isUnlocked&&!this.isRunning,n=this.isUnlocked||this.canBeUnlocked,r=!this.isCompleted&&!this.isUnlocked&&!this.isRunning&&!this.canBeUnlocked,i=!this.isRunning&&(!this.isCompleted&&this.canBeUnlocked||this.isUnlocked);return{"o-challenge-btn":!0,"o-challenge-btn--running":this.isRunning,"o-challenge-btn--completed":e,"o-challenge-btn--redo":t,"o-challenge-btn--unlocked":!e&&n,"o-challenge-btn--locked":r,"o-challenge-btn--unenterable":!i}},completionOverlay(){return{position:`absolute`,width:`${15*Math.clampMax(this.completionCount/5,1)}rem`,height:`3rem`,background:`var(--color-good)`,opacity:this.completionCount>=5?0:.3,"border-top-left-radius":`var(--var-border-radius, 1rem)`,"border-bottom-left-radius":`var(--var-border-radius, 1rem)`,"pointer-events":`none`}},buttonText(){return this.overrideLabel.length>0?this.overrideLabel:this.isRunning?`Running`:this.isCompleted?this.isUnlocked?`Redo`:`Completed`:this.isUnlocked?`Start`:this.canBeUnlocked?`Unlock`:`Locked`}}},bL=D(yL,function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`c-challenge-box l-challenge-box c-challenge-box--eternity`},[t(`HintText`,{staticClass:`l-hint-text--challenge`,attrs:{type:`challenges`}},[e._v(` `+e._s(e.name)+` `)]),e._t(`top`),t(`div`,{staticClass:`l-challenge-box__fill`}),t(`div`,[t(`div`,{style:e.completionOverlay}),t(`button`,{class:e.buttonClassObject,on:{click:function(t){return e.$emit(`start`)}}},[e._v(` `+e._s(e.buttonText)+` `)])]),e._t(`bottom`)],2)},[],!1,null,`c33ec19a`,null,null).exports,xL=r({name:`EternityChallengeBox`,components:{EternityChallengeBoxWrapper:bL,DescriptionDisplay:u,EffectDisplay:c},props:{challenge:{type:Object,required:!0}},data(){return{isUnlocked:!1,isRunning:!1,isCompleted:!1,canBeUnlocked:!1,completions:0,showGoalSpan:!1,lastGoal:``}},computed:{config(){return this.challenge.config},goalDisplay(){let e=this.config,t=`Goal: ${this.goalAtCompletions(this.completions)} IP`;return e.restriction&&(t+=` ${e.formatRestriction(e.restriction(this.completions))}`),t},firstGoal(){return this.goalAtCompletions(0)},currentRewardConfig(){let e=this.challenge,t=this.config.reward;return{effect:()=>t.effect(e.completions),formatEffect:t.formatEffect,cap:t.cap}},nextRewardConfig(){let e=this.challenge,t=this.config.reward;return{effect:()=>t.effect(e.completions+1),formatEffect:t.formatEffect,cap:t.cap}},name(){return`EC${this.challenge.id}`}},methods:{update(){let e=this.challenge;this.isUnlocked=e.isUnlocked,this.isRunning=e.isRunning,this.isCompleted=e.isFullyCompleted,this.completions=e.completions,this.showGoalSpan=PlayerProgress.realityUnlocked(),this.canBeUnlocked=TimeStudy.eternityChallenge(e.id).canBeBought,this.lastGoal=Enslaved.isRunning&&this.challenge.id===1?I.wordCycle(this.config.scrambleText.map(e=>format(e))):this.goalAtCompletions(this.challenge.maxCompletions-1)},start(){this.canBeUnlocked?TimeStudy.eternityChallenge(this.challenge.id).purchase():this.challenge.requestStart()},goalAtCompletions(e){return format(this.challenge.goalAtCompletions(e),2,1)}}}),SL=D(xL,function(){var e=this,t=e._self._c;return e._self._setupProxy,t(`EternityChallengeBoxWrapper`,{attrs:{name:e.name,"is-unlocked":e.isUnlocked,"is-running":e.isRunning,"is-completed":e.isCompleted,"can-be-unlocked":e.canBeUnlocked,"completion-count":e.completions},on:{start:e.start},scopedSlots:e._u([{key:`top`,fn:function(){return[t(`DescriptionDisplay`,{attrs:{config:e.config}})]},proxy:!0},{key:`bottom`,fn:function(){return[t(`div`,{style:{visiblity:e.completions<5?`visible`:`hidden`}},[t(`div`,[e._v(` Completed `+e._s(e.quantifyInt(`time`,e.completions))+` `)]),e._v(` `+e._s(e.goalDisplay)+` `)]),e.showGoalSpan?t(`span`,[e._v(` Goal Span: `+e._s(e.firstGoal)+` IP - `+e._s(e.lastGoal)+` IP `)]):e._e(),t(`span`,[e._v(` Reward: `),t(`DescriptionDisplay`,{attrs:{config:e.config.reward,length:55,name:`c-challenge-box__reward-description`}})],1),t(`span`,[e.completions>0?t(`EffectDisplay`,{attrs:{config:e.currentRewardConfig}}):e._e(),e.completions>0&&e.completions<5?t(`span`,[e._v(`|`)]):e._e(),e.completions<5?t(`EffectDisplay`,{attrs:{config:e.nextRewardConfig,label:`Next`,"ignore-capped":!0}}):e._e()],1)]},proxy:!0}])})},[],!1,null,`354b8f9c`,null,null).exports,CL=D({name:`EternityChallengesTab`,components:{ChallengeTabHeader:ge,ChallengeGrid:_e,EternityChallengeBox:SL},data(){return{unlockedCount:0,showAllChallenges:!1,autoEC:!1,isAutoECVisible:!1,hasUpgradeLock:!1,remainingECTiers:0,untilNextEC:TimeSpan.zero,untilAllEC:TimeSpan.zero,hasECR:!1}},computed:{challenges(){return EternityChallenges.all},upgradeLockNameText(){return RealityUpgrade(12).isLockingMechanics?RealityUpgrade(12).name:ImaginaryUpgrade(15).name},nextECText(){return this.untilNextEC.totalMilliseconds===0&&!this.autoEC?`Immediately upon unpausing`:`${this.untilNextEC} (real time)`},allECText(){return this.untilAllEC.totalMilliseconds===0&&!this.autoEC?`Immediately upon unpausing`:`After ${this.untilAllEC} (real time)`}},methods:{update(){this.showAllChallenges=player.options.showAllChallenges,this.unlockedCount=EternityChallenges.all.filter(this.isChallengeVisible).length,this.isAutoECVisible=Perk.autocompleteEC1.canBeApplied,this.autoEC=player.reality.autoEC;let e=TimeDimension(1).amount.gt(0);this.hasUpgradeLock=RealityUpgrade(12).isLockingMechanics||ImaginaryUpgrade(15).isLockingMechanics&&e&&!Array.range(1,6).some(e=>!EternityChallenge(e).isFullyCompleted);let t=EternityChallenges.remainingCompletions;if(this.remainingECTiers=t,t!==0){let e=EternityChallenges.autoComplete.interval,n=Decimal.max(e.sub(player.reality.lastAutoEC),0);this.untilNextEC.setFrom(n),this.untilAllEC.setFrom(n.add(e.times(t-1)))}this.hasECR=Perk.studyECRequirement.isBought},isChallengeVisible(e){return e.completions>0||e.isUnlocked||e.hasUnlocked||this.showAllChallenges&&PlayerProgress.realityUnlocked()}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-challenges-tab`},[t(`ChallengeTabHeader`),e.isAutoECVisible?t(`div`,[e._v(` Eternity Challenges are automatically completed sequentially, requiring all previous Eternity Challenges to be fully completed before any progress is made. `)]):e._e(),e.isAutoECVisible&&e.remainingECTiers>0?t(`div`,{staticClass:`c-challenges-tab__auto-ec-info l-challenges-tab__auto-ec-info`},[t(`div`,{staticClass:`l-challenges-tab__auto-ec-timers`},[e.hasUpgradeLock?t(`span`,{staticClass:`l-emphasis`},[e._v(` Auto EC is currently disabled because of the "`+e._s(e.upgradeLockNameText)+`" upgrade requirement lock. `)]):e._e(),e.remainingECTiers>0?t(`span`,[e._v(` Next Auto Eternity Challenge completion: `+e._s(e.nextECText)+` `)]):e._e(),t(`span`,[e._v(` All Auto Eternity Challenge completions: `+e._s(e.allECText)+` `)]),t(`br`)])]):e._e(),t(`div`,[e._v(` Complete Eternity Challenges again for a bigger reward, maximum of `+e._s(e.formatInt(5))+` times.`),t(`br`),e._v(` The rewards are applied permanently with no need to have the respective Eternity Challenge Time Study purchased. `)]),e.hasECR?e._e():t(`div`,[e._v(` When you respec out of an unlocked Eternity Challenge, you don't need to redo the secondary requirement`),t(`br`),e._v(` in order to unlock it again until you complete it; only the Time Theorems are required. `)]),e.unlockedCount===14?t(`div`,[e._v(` You have seen all `+e._s(e.formatInt(14))+` Eternity Challenges. `)]):t(`div`,[e._v(` You have seen `+e._s(e.formatInt(e.unlockedCount))+` out of `+e._s(e.formatInt(14))+` Eternity Challenges. `)]),t(`ChallengeGrid`,{attrs:{challenges:e.challenges,"is-challenge-visible":e.isChallengeVisible},scopedSlots:e._u([{key:`default`,fn:function({challenge:e}){return[t(`EternityChallengeBox`,{attrs:{challenge:e}})]}}])})],1)},[],!1,null,`f0dabe58`,null,null).exports,wL={name:`EternityMilestoneButton`,props:{getMilestone:{type:Function,required:!0}},data(){return{isReached:!1,isLocked:!1}},computed:{milestone(){return this.getMilestone()},config(){return this.milestone.config},eternities(){return this.config.eternities},reward(){let e=this.config.reward;return typeof e==`function`?e():e},rewardClassObject(){return{"o-eternity-milestone__reward":!0,"o-eternity-milestone__reward--locked":!this.isReached,"o-eternity-milestone__reward--reached":this.isReached,"o-eternity-milestone__reward--small-font":this.reward.length>80}},activeCondition(){return this.config.activeCondition?this.config.activeCondition():null},isDoomed:()=>Pelle.isDoomed,isUseless(){return this.isDoomed&&this.config.pelleUseless}},methods:{update(){this.isLocked=this.isDoomed&&this.config.givenByPelle!==void 0,this.isReached=this.milestone.isReached}}},TL=D(wL,function(){var e=this,t=e._self._c;return e.config.invisible?e._e():t(`div`,{staticClass:`l-eternity-milestone`},[t(`span`,{staticClass:`o-eternity-milestone__goal`},[e._v(` `+e._s(e.quantifyInt(`Eternity`,e.eternities))+`: `)]),t(`button`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:e.activeCondition,expression:`activeCondition`}],class:e.rewardClassObject},[t(`span`,{class:{"o-pelle-disabled":e.isUseless}},[e._v(` `+e._s(e.reward)+` `+e._s(e.isLocked&&!e.isReached?`(Locked behind a Pelle Upgrade)`:``)+` `)])])])},[],!1,null,`aff56874`,null,null).exports,EL=r({name:`EternityMilestonesTab`,components:{EternityMilestoneButton:TL},data(){return{eternityCount:new Decimal}},computed:{milestones(){return Object.values(GameDatabase.eternity.milestones).sort((e,t)=>e.eternities-t.eternities).map(e=>new EternityMilestoneState(e))},rows(){return Math.ceil(this.milestones.length/3)}},methods:{update(){this.eternityCount.copyFrom(Currency.eternities.value.floor())},getMilestone(e,t){return()=>this.milestones[(e-1)*3+t-1]}}}),DL=D(EL,function(){var e=this,t=e._self._c;return e._self._setupProxy,t(`div`,{staticClass:`l-eternity-milestone-grid`},[t(`div`,[e._v(`You have `+e._s(e.quantify(`Eternity`,e.eternityCount,3))+`.`)]),t(`div`,[e._v(` Offline generation milestones are only active under certain conditions, mouse-over to see these conditions. `)]),e._l(e.rows,function(n){return t(`div`,{key:n,staticClass:`l-eternity-milestone-grid__row`},e._l(3,function(r){return t(`EternityMilestoneButton`,{key:n*3+r,staticClass:`l-eternity-milestone-grid__cell`,attrs:{"get-milestone":e.getMilestone(n,r)}})}),1)})],2)},[],!1,null,`c220353d`,null,null).exports,OL=D({name:`EPMultiplierButton`,components:{PrimaryButton:L,PrimaryToggleButton:R},data(){return{isAutobuyerActive:!1,isAutoUnlocked:!1,isAffordable:!1,multiplier:new Decimal,cost:new Decimal}},computed:{upgrade(){return EternityUpgrade.epMult},autobuyer(){return Autobuyer.epMult},classObject(){return this.isDoomed?{"o-eternity-upgrade":!0,"o-eternity-upgrade--useless":!this.isAffordable,"o-pelle-disabled-pointer":!0,"o-pelle-disabled":!0}:{"o-eternity-upgrade":!0,"o-eternity-upgrade--available":this.isAffordable,"o-eternity-upgrade--unavailable":!this.isAffordable}},isDoomed:()=>Pelle.isDoomed},watch:{isAutobuyerActive(e){Autobuyer.epMult.isActive=e}},methods:{update(){let e=this.upgrade;this.isAutoUnlocked=this.autobuyer.isUnlocked,this.isAutobuyerActive=this.autobuyer.isActive,this.multiplier.copyFrom(e.effectValue),this.cost.copyFrom(e.cost),this.isAffordable=e.isAffordable},purchaseUpgrade(){RealityUpgrade(15).isLockingMechanics?RealityUpgrade(15).tryShowWarningModal():this.upgrade.purchase()}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-spoon-btn-group l-margin-top`},[t(`button`,{class:e.classObject,on:{click:e.purchaseUpgrade}},[t(`div`,{class:{"o-pelle-disabled":e.isDoomed}},[e._v(` Multiply Eternity Points from all sources by `+e._s(e.formatX(5))+` `),t(`br`),e._v(` Currently: `+e._s(e.formatX(e.multiplier,2,0))+` `)]),t(`br`),e._v(` Cost: `+e._s(e.quantify(`Eternity Point`,e.cost,2,0))+` `)]),t(`PrimaryButton`,{staticClass:`l--spoon-btn-group__little-spoon o-primary-btn--small-spoon`,on:{click:function(t){return e.upgrade.buyMax(!1)}}},[e._v(` Max Eternity Point mult `)]),e.isAutoUnlocked?t(`PrimaryToggleButton`,{staticClass:`l--spoon-btn-group__little-spoon o-primary-btn--small-spoon`,attrs:{label:`Autobuy EP mult`},model:{value:e.isAutobuyerActive,callback:function(t){e.isAutobuyerActive=t},expression:`isAutobuyerActive`}}):e._e()],1)},[],!1,null,`80c59b45`,null,null).exports,kL={name:`EternityUpgradeButton`,components:{DescriptionDisplay:u,EffectDisplay:c,CostDisplay:pe},props:{upgrade:{type:Object,required:!0}},data(){return{isBought:!1,isAffordable:!1}},computed:{classObject(){return{"o-eternity-upgrade":!0,"o-eternity-upgrade--bought":this.isBought,"o-eternity-upgrade--available":!this.isBought&&this.isAffordable,"o-eternity-upgrade--unavailable":!this.isBought&&!this.isAffordable}},hasEU2(){return Perk.autounlockEU2.canBeApplied}},methods:{update(){let e=this.upgrade;this.isBought=e.isBought,this.isAffordable=e.isAffordable}}},AL={name:`EternityUpgradesTab`,components:{EternityUpgradeButton:D(kL,function(){var e=this,t=e._self._c;return t(`button`,{class:e.classObject,on:{click:function(t){return e.upgrade.purchase()}}},[t(`DescriptionDisplay`,{attrs:{config:e.upgrade.config}}),t(`EffectDisplay`,{attrs:{br:``,config:e.upgrade.config}}),!e.isBought&&e.hasEU2?t(`div`,[e._v(` Auto: `+e._s(e.format(e.upgrade.config.cost/1e10))+` Eternity Points `)]):e.isBought?e._e():t(`CostDisplay`,{attrs:{br:``,config:e.upgrade.config,name:`Eternity Point`}})],1)},[],!1,null,`f0528125`,null,null).exports,EPMultiplierButton:OL},computed:{grid(){return[[EternityUpgrade.idMultEP,EternityUpgrade.idMultEternities,EternityUpgrade.idMultICRecords],[EternityUpgrade.tdMultAchs,EternityUpgrade.tdMultTheorems,EternityUpgrade.tdMultRealTime]]},costIncreases:()=>EternityUpgrade.epMult.costIncreaseThresholds.map(e=>new Decimal(e))},methods:{formatPostBreak}},jL=D(AL,function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-eternity-upgrades-grid`},[e._l(e.grid,function(n,r){return t(`div`,{key:r,staticClass:`l-eternity-upgrades-grid__row`},e._l(n,function(e){return t(`EternityUpgradeButton`,{key:e.id,staticClass:`l-eternity-upgrades-grid__cell`,attrs:{upgrade:e}})}),1)}),t(`EPMultiplierButton`),t(`div`,[e._v(` The cost for the `+e._s(e.formatX(5))+` multiplier jumps at `+e._s(e.format(e.costIncreases[0]))+`, `+e._s(e.formatPostBreak(e.costIncreases[1],2))+`, and `+e._s(e.formatPostBreak(e.costIncreases[2]))+` Eternity Points. `),t(`br`),e._v(` The cost increases super-exponentially after `+e._s(e.formatPostBreak(e.costIncreases[3]))+` Eternity Points. `)])],2)},[],!1,null,`17c27eff`,null,null).exports,ML=D({name:`GlyphSetRecordsTab`,components:{GlyphSetPreview:pE},data(){return{recordGlyphInfo:[]}},methods:{update(){let e=player.records.bestReality,t=8-Laitela.difficultyTier;this.recordGlyphInfo=[[!0,structuredClone(Glyphs.copyForRecords(e.RMSet)),`Best Reality Machines gained`,`${format(e.RM,2,2)} RM`],[!0,structuredClone(Glyphs.copyForRecords(e.RMminSet)),`Best Reality Machines per minute`,`${format(e.RMmin,2,2)} RM/min`],[!0,structuredClone(Glyphs.copyForRecords(e.glyphLevelSet)),`Best Glyph Level`,`Level ${formatInt(e.glyphLevel)}`],[!0,structuredClone(Glyphs.copyForRecords(e.bestEPSet)),`Highest Eternity Points`,`${format(e.bestEP,2,2)} EP`],[!0,structuredClone(Glyphs.copyForRecords(e.speedSet)),`Fastest Reality (real time)`,`${TimeSpan.fromMilliseconds(e.realTime).toStringShort()}`],[player.celestials.teresa.bestRunAM.gt(1),structuredClone(Glyphs.copyForRecords(player.celestials.teresa.bestAMSet)),`Highest Antimatter in ${Teresa.possessiveName} Reality`,`${format(player.celestials.teresa.bestRunAM,2,2)} Antimatter`],[Currency.imaginaryMachines.gt(0),structuredClone(Glyphs.copyForRecords(e.iMCapSet)),`Highest Imaginary Machine cap`,`${format(MachineHandler.currentIMCap,2,2)} iM`],[Laitela.isUnlocked,structuredClone(Glyphs.copyForRecords(e.laitelaSet)),`Best ${Laitela.displayName} Destabilization`,`${TimeSpan.fromSeconds(new Decimal(player.celestials.laitela.fastestCompletion)).toStringShort()},
          ${t} ${pluralize(`Dimension`,t)} (${formatX(Laitela.realityReward,2,2)} DM)`]]}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-glyph-set-tab`},e._l(e.recordGlyphInfo,function(n,r){return t(`div`,{key:r},[n[0]?t(`div`,{staticClass:`l-glyph-set-entry`},[e._v(` `+e._s(n[2])+`: `),n[0]?t(`GlyphSetPreview`,{key:r,attrs:{glyphs:n[1],text:n[2],"text-hidden":!0}}):e._e(),e._v(` `+e._s(n[3])+` `),t(`br`)],1):e._e()])}),0)},[],!1,null,null,null,null).exports,NL={name:`CurrentGlyphEffect`,props:{isColored:{type:Boolean,default:!0},effect:{type:Object,required:!0}},computed:{effectConfig(){return GlyphEffects[this.effect.id]},formatValue(){if(this.effectConfig.isDisabledByDoomed)return``;let e=this.effect.value.value,t=this.effectConfig.formatEffect(e),n=this.effectConfig.conversion===void 0?``:this.effectConfig.formatSecondaryEffect(this.effectConfig.conversion(e));return this.effectConfig.totalDesc.replace(`{value}`,t).replace(`{value2}`,n)},textColor(){if(!this.isColored)return{};let e=this.effectConfig.id===`timeshardpow`?CosmeticGlyphTypes.time:CosmeticGlyphTypes[this.effectConfig.glyphTypes[0]()],t=e.currentColor.border;return e.id===`cursed`&&(t=`var(--color-celestials)`),{color:t,"text-shadow":`-1px 1px 1px var(--color-text-base), 1px 1px 1px var(--color-text-base),
                            -1px -1px 1px var(--color-text-base), 1px -1px 1px var(--color-text-base),
                            0 0 3px ${e.currentColor.border}`,animation:e.id===`reality`?`a-reality-glyph-description-cycle 10s infinite`:void 0}},valueClass(){return this.effect.value.capped?`c-current-glyph-effects__effect--capped`:``}},created(){this.on$(GAME_EVENT.GLYPH_VISUAL_CHANGE,()=>{this.$recompute(`effectConfig`)})}},PL=D(NL,function(){var e=this,t=e._self._c;return t(`div`,[t(`span`,{class:e.valueClass,style:e.textColor},[e._v(` `+e._s(e.formatValue)+` `)])])},[],!1,null,`81261391`,null,null).exports,FL=`powerpow.powermult.powerdimboost.powerbuy10.infinitypow.infinityinfmult.infinityIP.infinityrate.replicationpow.replicationdtgain.replicationspeed.replicationglyphlevel.timepow.timeshardpow.timeEP.timespeed.timeetermult.dilationpow.dilationTTgen.dilationDT.dilationgalaxyThreshold.effarigrm.effarigglyph.effarigblackhole.effarigachievement.effarigforgotten.effarigdimensions.effarigantimatter.cursedgalaxies.cursedtickspeed.curseddimensions.cursedEP.realityglyphlevel.realitygalaxies.realityrow1pow.realityDTglyph.companiondescription.companionEP`.split(`.`),IL=D({name:`CurrentGlyphEffects`,components:{GlyphSetName:dE,CurrentGlyphEffect:PL},data(){return{effects:[],isColored:!1,hasEffarig:!1,hasReality:!1,logTotalSacrifice:0,pelleChaosEffect:{}}},computed:{isSoftcapActive(){return this.effects.length&&!this.effects.every(e=>e.value.capped===!1)},uniqueGlyphText(){if(!this.hasEffarig&&!this.hasReality)return``;let e=[];return this.hasEffarig&&e.push(`<span style="color: ${GlyphAppearanceHandler.getBorderColor(`effarig`)};">Effarig</span>`),this.hasReality&&e.push(`<span style="animation: a-reality-glyph-description-cycle 10s infinite;">Reality</span>`),`You cannot have more than one ${e.join(` or `)}
        Glyph equipped${e.length>1?` each.`:`.`}`},noEffects(){return this.effects.length===0},glyphSet(){return Glyphs.activeList},pelleGlyphText(){return Pelle.isDoomed?`Glyph Rarity is set to ${formatPercents(strengthToRarity(Pelle.glyphStrength))}
          and Level is capped at ${formatInt(Pelle.glyphMaxLevel)}`:``},showChaosText(){return this.pelleChaosEffect.isUnlocked&&!this.noEffects},chaosEffect(){return this.pelleChaosEffect.description}},watch:{logTotalSacrifice(){this.glyphsChanged()}},created(){this.on$(GAME_EVENT.GLYPHS_EQUIPPED_CHANGED,this.glyphsChanged),this.glyphsChanged()},methods:{update(){this.isColored=player.options.glyphTextColors,this.hasEffarig=Glyphs.active.some(e=>e&&e.type===`effarig`),this.hasReality=Glyphs.active.some(e=>e&&e.type===`reality`),this.logTotalSacrifice=GameCache.logTotalGlyphSacrifice.value,this.pelleChaosEffect=Pelle.specialGlyphEffect},glyphsChanged(){this.effects=getActiveGlyphEffects(),this.effects.sort((e,t)=>FL.indexOf(e.id)-FL.indexOf(t.id))}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`c-current-glyph-effects l-current-glyph-effects`},[t(`div`,{staticClass:`pelle-current-glyph-effects`},[e._v(` `+e._s(e.pelleGlyphText)+` `)]),t(`div`,{staticClass:`c-current-glyph-effects__header`},[e._v(` Currently active Glyph effects: `)]),t(`GlyphSetName`,{attrs:{"glyph-set":e.glyphSet}}),e.isSoftcapActive||e.hasEffarig||e.hasReality?t(`br`):e._e(),t(`span`,{domProps:{innerHTML:e._s(e.uniqueGlyphText)}}),e.isSoftcapActive?t(`div`,{staticClass:`l-current-glyph-effects__capped-header`},[t(`span`,{staticClass:`c-current-glyph-effects__effect--capped`},[e._v(`Italic`)]),e._v(` effects have been slightly reduced due to a softcap `)]):e._e(),t(`br`),e.noEffects?t(`div`,[e._v(` None (equip Glyphs to get their effects) `)]):e._e(),e._l(e.effects,function(n){return t(`CurrentGlyphEffect`,{key:n.id+e.logTotalSacrifice,attrs:{effect:n,"is-colored":e.isColored}})}),e.showChaosText?t(`div`,{staticClass:`pelle-current-glyph-effects`},[e._v(` `+e._s(e.chaosEffect)+` `)]):e._e()],2)},[],!1,null,`0c117f66`,null,null).exports,LL=D({name:`EquippedGlyphs`,components:{GlyphComponent:Tw},data(){return{glyphs:[],dragoverIndex:-1,respec:player.reality.respec,respecIntoProtected:player.options.respecIntoProtected,undoSlotsAvailable:0,undoAvailable:!1,undoVisible:!1,cosmeticGlow:!1}},computed:{GLYPH_SIZE:()=>5,slotCount(){return this.glyphs.length},arrangementRadius(){return this.slotCount===0?0:this.slotCount+1},respecTooltip(){let e=Pelle.isDoomed?`Armageddon`:`Reality`;return this.respec?`Respec is active and will place your currently - equipped Glyphs into your inventory after ${e}.`:`Your currently-equipped Glyphs will stay equipped on ${e}.`},undoTooltip(){return this.undoSlotsAvailable?this.undoAvailable?`Unequip the last equipped Glyph and rewind Reality to when you equipped it. (Most resources will be fully reset)`:`Undo is only available for Glyphs equipped during this Reality`:`You do not have available inventory space to unequip Glyphs to`},unequipText(){return Pelle.isDoomed?`Unequip Glyphs on Armageddon`:`Unequip Glyphs on Reality`},isDoomed(){return Pelle.isDoomed},glyphRespecStyle(){return this.respec?{color:`var(--color-reality-light)`,"background-color":`var(--color-reality)`,"border-color":`#094e0b`,cursor:`pointer`}:{cursor:`pointer`}},unequipClass(){return{"l-glyph-equip-button":this.isDoomed,"l-glyph-equip-button-short":!this.isDoomed}}},created(){this.on$(GAME_EVENT.GLYPHS_EQUIPPED_CHANGED,this.glyphsChanged),this.glyphsChanged()},methods:{update(){this.respec=player.reality.respec,this.respecIntoProtected=player.options.respecIntoProtected,this.undoSlotsAvailable=this.respecIntoProtected?Glyphs.totalSlots-GameCache.glyphInventorySpace.value-Glyphs.inventoryList.length>0:GameCache.glyphInventorySpace.value>0,this.undoVisible=TeresaUnlocks.undo.canBeApplied,this.undoAvailable=this.undoVisible&&this.undoSlotsAvailable&&player.reality.glyphs.undo.length>0,this.cosmeticGlow=player.reality.glyphs.cosmetics.glowNotification},glyphPositionStyle(e){let t=2*Math.PI*e/this.slotCount,n=-this.GLYPH_SIZE/2+this.arrangementRadius*Math.sin(t),r=-this.GLYPH_SIZE/2+this.arrangementRadius*Math.cos(t);return{position:`absolute`,left:`calc(50% + ${n}rem)`,top:`calc(50% + ${r}rem)`,"z-index":1}},dragover(e,t){e.dataTransfer.types.includes(GLYPH_MIME_TYPE)&&(e.preventDefault(),this.dragoverIndex=t)},dragleave(e){this.dragoverIndex===e&&(this.dragoverIndex=-1)},drop(e,t){this.dragoverIndex=-1;let n=Number.parseInt(e.dataTransfer.getData(GLYPH_MIME_TYPE),10);if(isNaN(n))return;let r=Glyphs.findById(n);r&&Glyphs.equip(r,t)},toggleRespec(){player.reality.respec=!player.reality.respec},toggleRespecIntoProtected(){player.options.respecIntoProtected=!player.options.respecIntoProtected},glyphsChanged(){this.glyphs=Glyphs.active.map(GlyphGenerator.copy),this.$recompute(`slotCount`)},undo(){!this.undoAvailable||Pelle.isDoomed||(player.options.confirmations.glyphUndo?Modal.glyphUndo.show():Glyphs.undo())},dragEvents(e){return{dragover:t=>this.dragover(t,e),dragleave:()=>this.dragleave(e),drop:t=>this.drop(t,e)}},showEquippedModal(){this.glyphs.filter(e=>e).length!==0&&Modal.glyphShowcasePanel.show({name:`Equipped Glyphs`,glyphSet:this.glyphs,closeEvent:GAME_EVENT.GLYPHS_EQUIPPED_CHANGED})},showOptionModal(){player.reality.glyphs.cosmetics.glowNotification=!1,Modal.glyphDisplayOptions.show()},clickGlyph(e,t,n=!1){if(Glyphs.isMusicGlyph(e)){let e=t+(n?6:1);new Audio(`audio/note${e}.mp3`).play()}}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-equipped-glyphs`},[t(`div`,{staticClass:`l-equipped-glyphs__slots`},e._l(e.glyphs,function(n,r){return t(`div`,e._g({key:r,staticClass:`l-glyph-set-preview`,style:e.glyphPositionStyle(r),on:{click:e.showEquippedModal}},e.dragEvents(r)),[t(`div`,{staticClass:`l-equipped-glyphs__dropzone`}),n?t(`GlyphComponent`,{key:r,staticClass:`c-equipped-glyph`,attrs:{glyph:n,circular:!0,"is-active-glyph":!0},on:{clicked:function(t){return e.clickGlyph(n,r)},shiftClicked:function(t){return e.clickGlyph(n,r,!0)},ctrlShiftClicked:function(t){return e.clickGlyph(n,r,!0)}}}):t(`div`,{class:[`l-equipped-glyphs__empty`,`c-equipped-glyphs__empty`,{"c-equipped-glyphs__empty--dragover":e.dragoverIndex===r}]})],1)}),0),t(`div`,{staticClass:`l-equipped-glyphs__buttons`},[t(`button`,{staticClass:`c-reality-upgrade-btn`,class:e.unequipClass,style:e.glyphRespecStyle,attrs:{"ach-tooltip":e.respecTooltip},on:{click:e.toggleRespec}},[e._v(` `+e._s(e.unequipText)+` `)]),e.undoVisible?t(`button`,{staticClass:`l-glyph-equip-button c-reality-upgrade-btn`,class:{"c-reality-upgrade-btn--unavailable":!e.undoAvailable},attrs:{"ach-tooltip":e.undoTooltip},on:{click:e.undo}},[e._m(0)]):e._e(),t(`button`,{staticClass:`l-glyph-equip-button c-reality-upgrade-btn`,on:{click:e.toggleRespecIntoProtected}},[e._v(` Unequip Glyphs to: `),t(`br`),e.respecIntoProtected?t(`span`,[e._v(`Protected slots`)]):t(`span`,[e._v(`Main inventory`)])]),t(`button`,{staticClass:`l-glyph-equip-button-short c-reality-upgrade-btn`,class:{"tutorial--glow":e.cosmeticGlow},on:{click:e.showOptionModal}},[e._v(` Open Glyph Visual Options `)])])])},[function(){var e=this,t=e._self._c;return t(`span`,[e._v(`Rewind to `),t(`b`,[e._v(`undo`)]),e._v(` the last equipped Glyph`)])}],!1,null,`6feacbf9`,null,null).exports,RL=D({name:`GlyphInventory`,components:{GlyphComponent:Tw},data(){return{inventory:[],newGlyphs:[],unequippedGlyphs:[],doubleClickTimeOut:null,clickedGlyphId:null,glyphSacrificeUnlocked:!1,protectedRows:0}},computed:{rowCount:()=>Glyphs.totalSlots/10,colCount:()=>10},created(){this.on$(GAME_EVENT.GLYPHS_CHANGED,this.glyphsChanged),this.on$(GAME_EVENT.GLYPH_VISUAL_CHANGE,this.glyphsChanged),this.glyphsChanged()},methods:{update(){this.glyphSacrificeUnlocked=GlyphSacrificeHandler.canSacrifice,this.protectedRows=player.reality.glyphs.protectedRows,this.newGlyphs=Glyphs.unseen,this.unequippedGlyphs=Glyphs.unequipped},toIndex(e,t){return(e-1)*this.colCount+(t-1)},allowDrag(e){e.dataTransfer.types.includes(GLYPH_MIME_TYPE)&&e.preventDefault()},drop(e,t){let n=Number.parseInt(t.dataTransfer.getData(GLYPH_MIME_TYPE),10);if(isNaN(n))return;let r=Glyphs.findById(n);r&&Glyphs.moveToSlot(r,e)},removeGlyph(e,t){GlyphSacrificeHandler.removeGlyph(Glyphs.findById(e),t)},clickGlyph(e,t){let n=Glyphs.findById(t);if(this.doubleClickTimeOut){if(this.clickedGlyphId===t){clearTimeout(this.doubleClickTimeOut),this.doubleClickTimeOut=null;let e=Glyphs.active.indexOf(null);e!==-1&&Glyphs.equip(n,e)}}else{if(this.doubleClickTimeOut=setTimeout(()=>{this.clickedGlyphId=null,this.doubleClickTimeOut=null},200),this.clickedGlyphId=t,!n)return;Glyphs.isMusicGlyph(n)&&new Audio(`audio/note${e}.mp3`).play()}},glyphsChanged(){this.inventory=Glyphs.inventory.map(GlyphGenerator.copy)},slotClass(e){return e<Glyphs.protectedSlots?`c-glyph-inventory__protected-slot`:`c-glyph-inventory__slot`},isNew(e){return player.options.showNewGlyphIcon&&this.newGlyphs.includes(this.inventory[e].id)},isUnequipped(e){return player.options.showUnequippedGlyphIcon&&this.unequippedGlyphs.includes(this.inventory[e].id)}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-glyph-inventory`},[e._v(` Click and drag or double-click to equip Glyphs. `),e._l(e.rowCount,function(n){return t(`div`,{key:e.protectedRows+n,staticClass:`l-glyph-inventory__row`},e._l(e.colCount,function(r){return t(`div`,{key:r,staticClass:`l-glyph-inventory__slot`,class:e.slotClass(e.toIndex(n,r)),on:{dragover:e.allowDrag,drop:function(t){e.drop(e.toIndex(n,r),t)}}},[e.inventory[e.toIndex(n,r)]?t(`GlyphComponent`,{attrs:{glyph:e.inventory[e.toIndex(n,r)],"is-new":e.isNew(e.toIndex(n,r)),"is-unequipped":e.isUnequipped(e.toIndex(n,r)),"is-inventory-glyph":!0,"show-sacrifice":e.glyphSacrificeUnlocked,draggable:!0},on:{shiftClicked:function(t){return e.removeGlyph(t,!1)},ctrlShiftClicked:function(t){return e.removeGlyph(t,!0)},clicked:function(t){return e.clickGlyph(r,t)}}}):e._e()],1)}),0)})],2)},[],!1,null,`511b204f`,null,null).exports,zL={name:`ToggleButton`,props:{label:{type:String,required:!1,default:``},on:{type:String,required:!1,default:`ON`},off:{type:String,required:!1,default:`OFF`},value:{type:Boolean,required:!0},tooltipClass:{type:String,required:!1,default:``},tooltipContent:{type:String,required:!1,default:``}},computed:{displayText(){return`${this.label} ${this.value?this.on:this.off}`.trim()}}},BL=D(zL,function(){var e=this,t=e._self._c;return t(`button`,e._b({on:{click:function(t){return e.emitInput(!e.value)}}},`button`,e.$attrs,!1),[e._v(` `+e._s(e.displayText)+` `),e.tooltipClass?t(`div`,{class:e.tooltipClass},[e._v(` `+e._s(e.tooltipContent)+` `)]):e._e()])},[],!1,null,null,null,null).exports,VL={name:`GlyphLevelsAndWeights`,components:{ToggleButton:BL,SliderComponent:Lw},data(){return{perkShopVisible:!1,penaltyVisible:!1,rowVisible:!1,achievementVisible:!1,showAutoAdjustWeights:!1,isAutoAdjustWeightsOn:!1,factors:getGlyphLevelInputs(),shardsGained:0,weights:{...player.celestials.effarig.glyphWeights},rows:3}},computed:{gridStyle(){let e=this.adjustVisible?`30% 3% 17% 48% 2%`:`80% 5% 15%`;return{width:`100%`,"-ms-grid-columns":e,"grid-template-columns":e,"grid-auto-rows":`1fr`}},adjustOutlineStyle(){let e=5+(this.showAutoAdjustWeights?1:0);return`grid-row: 1 / ${e+1}; -ms-grid-row: 1; -ms-grid-row-span: ${e};`},formatPerkShop(){return formatPercents(this.factors.perkShop.sub(1),1)},sliderProps(){return{min:0,max:100,interval:1,disabled:this.isAutoAdjustWeightsOn,"dot-width":`2.2rem`,"dot-height":`1.6rem`,width:`13.5rem`,tooltip:!1,"value-in-dot":!0,"plus-minus-buttons":!0,"dot-class":`c-glyph-levels-and-weights__slider-handle`,"bg-class":`c-glyph-levels-and-weights__slider-bg`,"process-class":`c-glyph-levels-and-weights__slider-process`}},totalWeights(){return this.weights.ep+this.weights.repl+this.weights.dt+this.weights.eternities},visibleRows(){let e=[`ep`,`replicanti`,`dt`];return this.eternityVisible&&e.push(`eternities`),this.perkShopVisible&&e.push(`perk shop`),this.shardVisible&&e.push(`shards`),this.singularityVisible&&e.push(`singularities`),this.penaltyVisible&&e.push(`instability`),this.rowVisible&&e.push(`upgrade rows`),this.achievementVisible&&e.push(`achievements`),e.push(`level`),e.push(`info`),e.push(`info2`),e},adjustVisible(){return EffarigUnlock.adjuster.isUnlocked},eternityVisible(){return RealityUpgrade(18).isBought},shardVisible(){return Ra.unlocks.relicShardGlyphLevelBoost.canBeApplied&&this.shardsGained!==0},singularityVisible(){return SingularityMilestone.glyphLevelFromSingularities.canBeApplied}},watch:{isAutoAdjustWeightsOn(e){player.celestials.effarig.autoAdjustGlyphWeights=e}},created(){this.glyphWeightFields=Object.keys(player.celestials.effarig.glyphWeights),this.resetSavedWeights(),this.lastInstability=0,Glyphs.factorsOpen&&this.$parent.$emit(`openrequest`)},mounted(){this.$viewModel.tabs.reality.openGlyphWeights&&(this.$viewModel.tabs.reality.openGlyphWeights=!1,this.$parent.$emit(`openrequest`))},destroyed(){Glyphs.factorsOpen=this.$parent.state.name.match(`OPEN`)!==null},methods:{update(){if(this.glyphWeightFields===void 0||this.$parent.state.name===`CLOSED`)return;let e=getGlyphLevelInputs();this.perkShopVisible=e.perkShop!==1,this.rowVisible=e.rowFactor>0,this.achievementVisible=e.achievementFactor.gt(0),e.scalePenalty===1?this.penaltyVisible&&Date.now()-this.lastInstability>2e3&&(this.penaltyVisible=!1):(this.penaltyVisible=!0,this.lastInstability=Date.now()),this.rows=this.visibleRows.length,this.adjustVisible&&this.rows<6&&(this.rows=6),this.factors=e,this.shardsGained=Effarig.shardsGained;let t=!0;this.glyphWeightFields.forEach(e=>{this.weights[e]!==player.celestials.effarig.glyphWeights[e]&&(t=!1),this.weights[e]=player.celestials.effarig.glyphWeights[e]}),t||this.resetSavedWeights(),this.showAutoAdjustWeights=Achievement(165).isUnlocked,this.isAutoAdjustWeightsOn=player.celestials.effarig.autoAdjustGlyphWeights},rowStyle(e){let t=this.visibleRows.findIndex(t=>t===e)+1;return t===0?this.makeRowStyle(e):this.makeRowStyle(t)},formatFactor(e){return Notations.current.isPainful||e.gt(1e3)?format(e,2,2):e.toPrecision(5).slice(0,6)},formatLevel(e){return e.gt(1e3)?formatInt(e.floor()):format(e,2,4)},makeRowStyle(e){return{"grid-row":e,"-ms-grid-row":e}},resetWeightsButtonClass(){return{"c-glyph-levels-and-weights__reset-btn":!0,"c-glyph-levels-and-weights__reset-btn-clickable":!this.isAutoAdjustWeightsOn}},resetWeights(){this.glyphWeightFields.forEach(e=>player.celestials.effarig.glyphWeights[e]=25),this.resetSavedWeights()},adjustSlider(e,t){if(this.weights[e]===t)return;e!==this.lastAdjusted&&(this.resetSavedWeights(),this.savedWeights[e]=0,this.lastAdjusted=e);let n=this.weights.ep+this.weights.repl+this.weights.dt+this.weights.eternities,r=this.weights[e];if(n-r+t>100){let n=this.savedWeights.ep+this.savedWeights.repl+this.savedWeights.dt+this.savedWeights.eternities,r=(100-t)/n,i=[];this.glyphWeightFields.forEach(t=>{t!==e&&i.push(this.savedWeights[t]*r)}),HL(i),this.glyphWeightFields.forEach(t=>{t!==e&&(player.celestials.effarig.glyphWeights[t]=i.shift())})}player.celestials.effarig.glyphWeights[e]=t},resetSavedWeights(){this.savedWeights={...player.celestials.effarig.glyphWeights},this.lastAdjusted=null},factorString(e){let t=this.adjustVisible?e.name.slice(0,4):e.name;return`${format(e.coeff,2,4)}×${t}^${format(e.exp,2,3)}`}}};function HL(e){for(let t=0;t<e.length;++t){let t=-1,n=1e3,r=0;for(let i=0;i<e.length;++i){let a=Math.abs(e[i]-Math.round(e[i]));a!==0&&(++r,a<n&&(t=i,n=a))}if(t===-1)break;let i=e[t]-Math.round(e[t]);if(e[t]=Math.round(e[t]),r===1)break;i/=r-1;for(let t=0;t<e.length;++t)e[t]!==Math.round(e[t])&&(e[t]+=i)}}var UL=D(VL,function(){var e=this,t=e._self._c;return t(`div`,{ref:`grid`,staticClass:`l-glyph-levels-and-weights c-glyph-levels-and-weights`,style:e.gridStyle},[e.adjustVisible?t(`div`,{style:e.makeRowStyle(6)}):e._e(),t(`div`,{staticClass:`l-glyph-levels-and-weights__factor`,style:e.rowStyle(`ep`)},[e._v(` `+e._s(e.factorString(e.factors.ep))+` `)]),t(`div`,{staticClass:`l-glyph-levels-and-weights__factor-val`,style:e.rowStyle(`ep`)},[e._v(` `+e._s(e.formatFactor(e.factors.ep.value))+` `)]),t(`div`,{staticClass:`l-glyph-levels-and-weights__factor`,style:e.rowStyle(`replicanti`)},[e._v(` `+e._s(e.factorString(e.factors.repl))+` `)]),t(`div`,{staticClass:`l-glyph-levels-and-weights__operator`,style:e.rowStyle(`replicanti`)},[e._v(` × `)]),t(`div`,{staticClass:`l-glyph-levels-and-weights__factor-val`,style:e.rowStyle(`replicanti`)},[e._v(` `+e._s(e.formatFactor(e.factors.repl.value))+` `)]),t(`div`,{staticClass:`l-glyph-levels-and-weights__factor`,style:e.rowStyle(`dt`)},[e._v(` `+e._s(e.factorString(e.factors.dt))+` `)]),t(`div`,{staticClass:`l-glyph-levels-and-weights__operator`,style:e.rowStyle(`dt`)},[e._v(` × `)]),t(`div`,{staticClass:`l-glyph-levels-and-weights__factor-val`,style:e.rowStyle(`dt`)},[e._v(` `+e._s(e.formatFactor(e.factors.dt.value))+` `)]),e.eternityVisible?[t(`div`,{staticClass:`l-glyph-levels-and-weights__factor`,style:e.rowStyle(`eternities`)},[e._v(` `+e._s(e.factorString(e.factors.eter))+` `)]),t(`div`,{staticClass:`l-glyph-levels-and-weights__operator`,style:e.rowStyle(`eternities`)},[e._v(` × `)]),t(`div`,{staticClass:`l-glyph-levels-and-weights__factor-val`,style:e.rowStyle(`eternities`)},[e._v(` `+e._s(e.formatFactor(e.factors.eter.value))+` `)])]:e._e(),e.perkShopVisible?[t(`div`,{staticClass:`l-glyph-levels-and-weights__factor`,style:e.rowStyle(`perk shop`)},[e._v(` Teresa's Perk shop `)]),t(`div`,{staticClass:`l-glyph-levels-and-weights__operator`,style:e.rowStyle(`perk shop`)},[e._v(` + `)]),t(`div`,{staticClass:`l-glyph-levels-and-weights__factor-val`,style:e.rowStyle(`perk shop`)},[e._v(` `+e._s(e.formatPerkShop)+` `)])]:e._e(),e.shardVisible?[t(`div`,{staticClass:`l-glyph-levels-and-weights__factor`,style:e.rowStyle(`shards`)},[e._v(` `+e._s(e.formatInt(100))+`×Shards`+e._s(e.formatPow(2))+` `)]),t(`div`,{staticClass:`l-glyph-levels-and-weights__operator`,style:e.rowStyle(`shards`)},[e._v(` + `)]),t(`div`,{staticClass:`l-glyph-levels-and-weights__factor-val`,style:e.rowStyle(`shards`)},[e._v(` `+e._s(e.formatFactor(e.factors.shardFactor))+` `)])]:e._e(),e.singularityVisible?[t(`div`,{staticClass:`l-glyph-levels-and-weights__factor`,style:e.rowStyle(`singularities`)},[e._v(` Singularities `)]),t(`div`,{staticClass:`l-glyph-levels-and-weights__operator`,style:e.rowStyle(`singularities`)},[e._v(` × `)]),t(`div`,{staticClass:`l-glyph-levels-and-weights__factor-val`,style:e.rowStyle(`singularities`)},[e._v(` `+e._s(e.formatFactor(e.factors.singularityEffect))+` `)])]:e._e(),e.penaltyVisible?[t(`div`,{staticClass:`l-glyph-levels-and-weights__factor`,style:e.rowStyle(`instability`)},[e._v(` Instability `)]),t(`div`,{staticClass:`l-glyph-levels-and-weights__operator`,style:e.rowStyle(`instability`)},[e._v(` / `)]),t(`div`,{staticClass:`l-glyph-levels-and-weights__factor-val`,style:e.rowStyle(`instability`)},[e._v(` `+e._s(e.formatFactor(e.factors.scalePenalty))+` `)])]:e._e(),e.rowVisible?[t(`div`,{staticClass:`l-glyph-levels-and-weights__factor`,style:e.rowStyle(`upgrade rows`)},[e._v(` Upgrade Rows `)]),t(`div`,{staticClass:`l-glyph-levels-and-weights__operator`,style:e.rowStyle(`upgrade rows`)},[e._v(` + `)]),t(`div`,{staticClass:`l-glyph-levels-and-weights__factor-val`,style:e.rowStyle(`upgrade rows`)},[e._v(` `+e._s(e.formatInt(e.factors.rowFactor))+` `)])]:e._e(),e.achievementVisible?[t(`div`,{staticClass:`l-glyph-levels-and-weights__factor`,style:e.rowStyle(`achievements`)},[e._v(` Achievements `)]),t(`div`,{staticClass:`l-glyph-levels-and-weights__operator`,style:e.rowStyle(`achievements`)},[e._v(` + `)]),t(`div`,{staticClass:`l-glyph-levels-and-weights__factor-val`,style:e.rowStyle(`achievements`)},[e._v(` `+e._s(e.formatInt(e.factors.achievementFactor))+` `)])]:e._e(),t(`div`,{staticClass:`l-glyph-levels-and-weights__factor`,style:e.rowStyle(`level`)},[e._v(` Final Level `)]),t(`div`,{staticClass:`l-glyph-levels-and-weights__factor-val`,style:e.rowStyle(`level`)},[e._v(` `+e._s(e.formatLevel(e.factors.actualLevel))+` `)]),t(`div`,{staticClass:`l-glyph-levels-and-weights__factor l-glyph-level-and-weights-note`,style:e.rowStyle(`info`)},[e._v(` Note: All resources here are log10 of their actual values. `)]),t(`div`,{staticClass:`l-glyph-levels-and-weights__factor l-glyph-level-and-weights-note`,style:e.rowStyle(`info2`)},[e._v(` EP, Replicanti, and DT use their highest values this Reality. `)]),e.adjustVisible?[t(`div`,{staticClass:`l-glyph-levels-and-weights__adjust-outline`,style:e.adjustOutlineStyle}),t(`div`,{staticClass:`l-glyph-levels-and-weights__adjust-label`},[e._v(` Adjust weights `),t(`div`,{staticClass:`l-glyph-levels-and-weights__reset-btn-outer`},[t(`div`,{class:e.resetWeightsButtonClass(),on:{click:e.resetWeights}},[e._v(` Reset `)])])]),t(`div`,{staticClass:`l-glyph-levels-and-weights__adjust-auto`},[e.showAutoAdjustWeights?t(`ToggleButton`,{staticClass:`c-glyph-levels-and-weights__auto-btn`,attrs:{label:`Auto adjustment:`},model:{value:e.isAutoAdjustWeightsOn,callback:function(t){e.isAutoAdjustWeightsOn=t},expression:`isAutoAdjustWeightsOn`}}):e._e()],1),t(`div`,{staticClass:`l-glyph-levels-and-weights__slider`,style:e.rowStyle(`ep`)},[t(`SliderComponent`,e._b({attrs:{value:e.weights.ep,width:`100%`},on:{input:function(t){return e.adjustSlider(`ep`,t)}}},`SliderComponent`,e.sliderProps,!1))],1),t(`div`,{staticClass:`l-glyph-levels-and-weights__slider`,style:e.rowStyle(`replicanti`)},[t(`SliderComponent`,e._b({attrs:{value:e.weights.repl,width:`100%`},on:{input:function(t){return e.adjustSlider(`repl`,t)}}},`SliderComponent`,e.sliderProps,!1))],1),t(`div`,{staticClass:`l-glyph-levels-and-weights__slider`,style:e.rowStyle(`dt`)},[t(`SliderComponent`,e._b({attrs:{value:e.weights.dt,width:`100%`},on:{input:function(t){return e.adjustSlider(`dt`,t)}}},`SliderComponent`,e.sliderProps,!1))],1),t(`div`,{staticClass:`l-glyph-levels-and-weights__slider`,style:e.rowStyle(`eternities`)},[t(`SliderComponent`,e._b({attrs:{value:e.weights.eternities,width:`100%`},on:{input:function(t){return e.adjustSlider(`eternities`,t)}}},`SliderComponent`,e.sliderProps,!1))],1)]:e._e()],2)},[],!1,null,`fa700c89`,null,null).exports,WL=D({name:`GlyphPeek`,components:{GlyphSetPreview:pE},data(){return{glyphs:[],level:0,canPeek:!1,isVisible:!1,canSacrifice:!1}},created(){this.on$(GAME_EVENT.REALITY_RESET_AFTER,this.refreshGlyphs),this.refreshGlyphs()},methods:{update(){this.canSacrifice=GlyphSacrificeHandler.canSacrifice,this.isVisible=!Pelle.isDoomed&&PlayerProgress.realityUnlocked(),this.canPeek=TimeStudy.reality.isBought,gainedGlyphLevel().actualLevel!==this.level&&this.refreshGlyphs()},refreshGlyphs(){this.canRefresh=!0,this.glyphs=GlyphSelection.upcomingGlyphs;for(let e of this.glyphs)Glyphs.applyGamespeed(e);this.level=gainedGlyphLevel().actualLevel},showModal(){Modal.glyphShowcasePanel.show({name:`Potential Glyphs for this Reality`,glyphSet:this.glyphs,closeEvent:GAME_EVENT.REALITY_RESET_AFTER,isGlyphSelection:!0,showSetName:!1})}}},function(){var e=this,t=e._self._c;return e.isVisible?t(`div`,{staticClass:`c-glyph-peek`},[e.canPeek?t(`div`,{staticClass:`l-glyph-set-preview`,on:{click:e.showModal}},[t(`GlyphSetPreview`,{attrs:{"show-name":!1,text:`Upcoming Glyph selection:`,glyphs:e.glyphs,"ignore-modified-level":!0,"show-sacrifice":e.canSacrifice,"flip-tooltip":!0,sort:!1}}),e._v(` (Click to bring up details) `)],1):t(`div`,[e._v(` Purchase the Reality study to see `),t(`br`),e._v(` this Reality's Glyph choices `)])]):e._e()},[],!1,null,`4affcc9d`,null,null).exports,GL={name:`AutoSacrificeAdvancedTab`,props:{glyphType:{type:String,required:!0}},data(){return{scoreThreshold:0,effectScores:{}}},computed:{typeConfig(){return GlyphInfo[this.glyphType]},autoSacrificeSettings(){return AutoGlyphProcessor.types[this.glyphType]},effects(){return this.typeConfig.effects()},descStyle(){return{color:GlyphAppearanceHandler.getBorderColor(this.glyphType),"border-color":this.typeConfig.color}},minScoreInputStyle(){return{"font-size":`larger`,"border-width":`var(--var-border-width, 0.2rem)`}},questionmarkTooltip(){return`The score of a Glyph is its rarity percentage, plus the specified amount for each effect it has.`},weightInputLimit(){return 999},superWeightInputLimit(){return 1e100}},created(){this.effectScores={...AutoGlyphProcessor.types[this.glyphType].effectScores},console.log(AutoGlyphProcessor.types[this.glyphType])},methods:{update(){this.scoreThreshold=this.autoSacrificeSettings.score;for(let e of this.typeConfig.effects())this.effectScores[e.id]=this.autoSacrificeSettings.effectScores[e.id]},limitedInput(e){return Math.clamp(e,-this.weightInputLimit,this.weightInputLimit)},setScoreThreshold(e){let t=e.target.value;isNaN(t)||(this.autoSacrificeSettings.score=this.limitedInput(t))},setEffectScore(e,t){let n=t.target.value;this.autoSacrificeSettings.effectScores[e]=new Decimal(this.limitedInput(n)).toNumber()}}},KL=D(GL,function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-auto-sac-type-tab`},[t(`div`,{staticClass:`l-auto-sac-type-tab__row-wrapper`},[t(`div`,[t(`div`,{staticClass:`o-questionmark`,attrs:{"ach-tooltip":e.questionmarkTooltip}},[e._v(` ? `)]),t(`b`,[e._v(` Threshold score`)]),e._v(` (rarity % + effect scores) `)]),t(`input`,{ref:`scoreThreshold`,staticClass:`c-auto-sac-type-tab__input`,style:e.minScoreInputStyle,attrs:{type:`number`,min:-e.superWeightInputLimit,max:e.superWeightInputLimit},domProps:{value:e.scoreThreshold},on:{blur:e.setScoreThreshold}})]),e._l(e.effects,function(n){return t(`div`,{key:n.id,staticClass:`l-auto-sac-type-tab__row-wrapper`},[t(`div`,{staticClass:`c-auto-sac-type-tab__effect-desc l-auto-sac-type-tab__effect-desc`,style:e.descStyle},[e._v(` `+e._s(n.genericDesc)+` `)]),t(`input`,{staticClass:`c-auto-sac-type-tab__input`,attrs:{type:`number`,min:-e.weightInputLimit,max:e.weightInputLimit},domProps:{value:e.effectScores[n.id]},on:{blur:function(t){return e.setEffectScore(n.id,t)}}})])})],2)},[],!1,null,`55f4a586`,null,null).exports,qL={name:`SelectedEffectToggle`,props:{effect:{type:Object,required:!0},glyphType:{type:String,required:!0}},data(){return{isActive:!1,noExclude:!1,effarigSettings:{effarigrm:!1,effarigglyph:!1}}},computed:{color(){return GlyphAppearanceHandler.getBorderColor(this.glyphType)},description(){return this.effect.genericDesc},classObject(){return this.isActive?`c-auto-sac-type-tab__effect-desc--active`:`c-auto-sac-type-tab__effect-desc--inactive`},exclusionTooltip(){if(this.noExclude)return``;let e=this.effarigSettings;return e.RM&&e.glyph&&(this.effect.id===`effarigrm`||this.effect.id===`effarigglyph`)?`RM multiplier and Glyph instability cannot occur together on the same Glyph!`:this.effect.id===`effarigrm`&&e.glyph?`This effect is mutually exclusive with Glyph instability!`:this.effect.id===`effarigglyph`&&e.RM?`This effect is mutually exclusive with RM multiplier!`:``},isExcluded(){return this.exclusionTooltip!==``},effarigBits(){let e=GameDatabase.reality.glyphEffects;return{RM:e.effarigrm.intID,glyph:e.effarigglyph.intID}}},methods:{update(){this.isActive=AutoGlyphProcessor.types[this.glyphType].specifiedMask.includes(this.effect.id),this.effarigSettings={RM:AutoGlyphProcessor.types.effarig.specifiedMask.includes(`effarigrm`),glyph:AutoGlyphProcessor.types.effarig.specifiedMask.includes(`effarigglyph`)},this.noExclude=Ra.unlocks.glyphEffectCount.canBeApplied},toggleSelection(){AutoGlyphProcessor.types[this.glyphType].specifiedMask.includes(this.effect.id)?AutoGlyphProcessor.types[this.glyphType].specifiedMask=AutoGlyphProcessor.types[this.glyphType].specifiedMask.filter(e=>e!==this.effect.id):AutoGlyphProcessor.types[this.glyphType].specifiedMask.push(this.effect.id)},setEffectCount(e){let t=e.target.value;isNaN(t)||(this.autoSacrificeSettings.effectCount=Math.clamp(t,0,8))}}},JL={name:`AutoSacrificeEffectTab`,components:{SelectedEffectToggle:D(qL,function(){var e=this,t=e._self._c;return t(`div`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:e.exclusionTooltip,expression:`exclusionTooltip`}],class:e.classObject,on:{click:function(t){return e.toggleSelection()}}},[t(`span`,[e.isExcluded?t(`i`,{staticClass:`fas fa-exclamation l-dock l-dock-left`}):e._e(),e._v(` `+e._s(e.description)+` `),e.isExcluded?t(`i`,{staticClass:`fas fa-exclamation l-dock l-dock-right`}):e._e()]),e.isActive?t(`i`,{staticClass:`fas fa-check c-selected-effect-toggle-indicator--active`,style:{"background-color":e.color}}):e._e()])},[],!1,null,`31f7ebd6`,null,null).exports},props:{glyphType:{type:String,required:!0}},data(){return{effectCount:0}},computed:{typeConfig(){return GlyphInfo[this.glyphType]},autoSacrificeSettings(){return AutoGlyphProcessor.types[this.glyphType]},effects(){return this.typeConfig.effects()},descStyle(){return{color:GlyphAppearanceHandler.getBorderColor(this.glyphType),"border-color":this.typeConfig.color}},questionmarkTooltip(){return`Glyph score is rarity, minus ${formatInt(200)} for every missing effect.
        Glyphs with less than the specified rarity are sacrificed. Additional effects
        beyond ones specified will not increase Glyph score.`}},methods:{update(){this.effectCount=this.autoSacrificeSettings?this.autoSacrificeSettings.effectCount:0},setEffectCount(e){let t=e.target.value;isNaN(t)||(this.autoSacrificeSettings.effectCount=Math.clamp(t,0,8))}}},YL={name:`GlyphFilterPanel`,components:{AutoSacrificeEffectTab:D(JL,function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`c-glyph-sacrifice-options__advanced`},[t(`div`,[t(`span`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:e.questionmarkTooltip,expression:`questionmarkTooltip`}],staticClass:`o-questionmark`},[e._v(` ? `)]),e._v(` Selected Glyphs will have at least `),t(`input`,{ref:`effectCount`,staticClass:`c-auto-sac-effect-tab__input`,attrs:{type:`number`,min:`0`,max:`8`},domProps:{value:e.effectCount},on:{blur:e.setEffectCount}}),e._v(` effects total, which must include `),t(`i`,[e._v(`all`)]),e._v(` of the following effects: `)]),e._l(e.effects,function(n){return t(`div`,{key:n.id,staticClass:`l-auto-sac-type-tab__row-wrapper`},[t(`SelectedEffectToggle`,{staticClass:`c-auto-sac-type-tab__effect-desc l-specified-effect-tab__effect-desc`,style:e.descStyle,attrs:{effect:n,"glyph-type":e.glyphType}})],1)}),e._v(` Click to toggle individual effects on/off `)],2)},[],!1,null,`3bc7b1bd`,null,null).exports,AutoSacrificeAdvancedTab:KL,SliderComponent:Lw,GlyphComponent:Tw},data(){return{mode:AUTO_GLYPH_SCORE.LOWEST_SACRIFICE,effectCount:0,advancedType:GlyphInfo.glyphTypes[0],alchemyUnlocked:!1,rarityThresholds:GlyphInfo.glyphTypes.mapToObject(e=>e,()=>new Decimal),scaledRarityThresholds:GlyphInfo.glyphTypes.mapToObject(e=>e,()=>0),autoRealityForFilter:player.options.autoRealityForFilter}},computed:{modes(){return AUTO_GLYPH_SCORE},glyphTypes(){return GlyphInfo.glyphTypes.filter(e=>GlyphInfo[e].generationRequirement?GlyphInfo[e].generationRequirement():GlyphInfo[e].isGenerated)},raritySliderProps(){return{min:0,max:100,width:`18rem`,valueInDot:!0,tooltip:`never`,"dot-width":`2.2rem`,"dot-height":`1.6rem`,"dot-class":`c-glyph-sacrifice-options__rarity-slider-handle`,"bg-class":`c-glyph-sacrifice-options__rarity-slider-bg`,"process-class":`c-glyph-sacrifice-options__rarity-slider-process`,style:{"margin-left":`1rem`}}},glyphIconProps(){return{size:`3rem`,"glow-blur":`0.3rem`,"glow-spread":`0.1rem`,"text-proportion":.66}},questionmarkTooltip(){return`All Glyph choices are given a score and compared to a threshold based on the chosen mode. 
        The Glyph with the highest score is picked, but will still be Sacrificed if below the threshold.
        (click for more detail)`},autoRealityTooltip(){return`If Auto-Reality is on, ignore all other settings and immediately Reality if no upcoming
        Glyphs would be kept`},unlockedModes(){return Object.values(this.modes).filter(e=>this.isUnlocked(e))}},methods:{glyphInfoFromType(e){return GlyphInfo[e]},update(){this.effectCount=player.reality.glyphs.filter.simple,this.mode=AutoGlyphProcessor.scoreMode;for(let e of generatedTypes)this.rarityThresholds[e].copyFrom(AutoGlyphProcessor.types[e].rarity);for(let e of generatedTypes)this.scaledRarityThresholds[e]=AutoGlyphProcessor.types[e].rarity.toNumber();this.alchemyUnlocked=Ra.unlocks.unlockGlyphAlchemy.canBeApplied},optionClass(e){let t=this.modeIcon(e);return[`c-glyph-sacrifice-options__option`,e===this.mode?`c-glyph-sacrifice-options__option--active`:`c-glyph-sacrifice-options__option--inactive`,t]},modeIcon(e){switch(e){case this.modes.LOWEST_SACRIFICE:return`fas fa-burn`;case this.modes.EFFECT_COUNT:return`fas fa-list-ul`;case this.modes.RARITY_THRESHOLD:return`fas fa-gem`;case this.modes.SPECIFIED_EFFECT:return`fas fa-tasks`;case this.modes.EFFECT_SCORE:return`fas fa-list-ol`;case this.modes.LOWEST_ALCHEMY:return`fas fa-atom`;case this.modes.ALCHEMY_VALUE:return`fas fa-flask`;default:throw Error(`Unrecognized glyph filter mode`)}},strengthThreshold(e){return rarityToStrength(this.rarityThresholds[e])},advancedTypeSelectStyle(e){let t=GlyphAppearanceHandler.getBorderColor(e.id);return e.id===this.advancedType?{color:t,"text-shadow":`0 0 0.25rem ${t}, 0 0 0.5rem ${t}, 0 0 0.75rem ${t}, 0 0 1rem ${t}`}:{}},setMode(e){AutoGlyphProcessor.scoreMode=e,player.reality.hasCheckedFilter=!1},setRarityThreshold(e,t){AutoGlyphProcessor.types[e].rarity=new Decimal(t)},setEffectCount(e){let t=e.target.value;isNaN(t)||(this.effectCount=Math.clamp(t,0,8),player.reality.glyphs.filter.simple=this.effectCount)},filterMode(e){return AutoGlyphProcessor.filterModeName(e)},isUnlocked(e){switch(e){case this.modes.LOWEST_SACRIFICE:case this.modes.EFFECT_COUNT:case this.modes.RARITY_THRESHOLD:case this.modes.SPECIFIED_EFFECT:case this.modes.EFFECT_SCORE:return!0;case this.modes.LOWEST_ALCHEMY:case this.modes.ALCHEMY_VALUE:return this.alchemyUnlocked;default:throw Error(`Unrecognized glyph filter mode`)}},bumpRarity(e){let t=GlyphInfo.rarities.map(e=>strengthToRarity(e.minStrength)),n;if(ui.view.shiftDown){let r=t.filter(t=>t.lt(this.rarityThresholds[e]));n=r.length===0?new Decimal(100):r.max()}else n=t.filter(t=>t.gt(this.rarityThresholds[e])).min();this.setRarityThreshold(e,n)},showFilterHowTo(){ui.view.h2pForcedTab=GameDatabase.h2p.tabs.filter(e=>e.name===`Advanced Glyph Mechanics`)[0],Modal.h2p.show()},getSymbol(e){return CosmeticGlyphTypes[e].currentSymbol.symbol},toggleAutoReality(){player.options.autoRealityForFilter=!player.options.autoRealityForFilter,this.autoRealityForFilter=player.options.autoRealityForFilter,player.reality.hasCheckedFilter=!1},exportFilterSettings(){let e=player.reality.glyphs.filter,t=e=>[e.rarity,e.score,e.effectCount,e.specifiedMask,e.effectScores.join(`/`)].join(`,`),n=[e.select,e.simple,e.trash].join(`|`),r=GlyphInfo.alchemyGlyphTypes.map(n=>t(e.types[n])).join(`|`);copyToClipboard(GameSaveSerializer.encodeText(`${n}|${r}`,`glyph filter`)),GameUI.notify.info(`Filter settings copied to clipboard`)},importFilterSettings(){Modal.importFilter.show()}}},XL=D(YL,function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-glyph-sacrifice-options c-glyph-sacrifice-options l-glyph-sidebar-panel-size`},[t(`div`,{staticClass:`c-glyph-sacrifice-options c-glyph-sacrifice-options-container`},[t(`div`,{staticClass:`c-filter-extra-btns c-top-left`},[t(`i`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:`Export filter settings`,expression:`'Export filter settings'`}],staticClass:`fas fa-file-export l-top-left-btn`,on:{click:e.exportFilterSettings}}),t(`i`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:`Import filter settings`,expression:`'Import filter settings'`}],staticClass:`fas fa-file-import l-top-left-btn`,on:{click:e.importFilterSettings}})]),t(`div`,{staticClass:`c-filter-extra-btns c-top-right`},[t(`i`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:e.autoRealityTooltip,expression:`autoRealityTooltip`}],staticClass:`fas fa-recycle l-top-right-btn`,class:{"o-quick-reality":e.autoRealityForFilter},on:{click:e.toggleAutoReality}}),t(`i`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:e.questionmarkTooltip,expression:`questionmarkTooltip`}],staticClass:`fas fa-question-circle l-top-right-btn o-borderless`,on:{click:e.showFilterHowTo}})]),e._v(` Current Filter Mode: `),t(`br`),e._v(` `+e._s(e.filterMode(e.mode))+` `),t(`br`),t(`div`,{staticClass:`c-glyph-filter-mode-container`},e._l(e.unlockedModes,function(n){return t(`div`,{key:n,class:e.optionClass(n),on:{click:function(t){return e.setMode(n)}}},[t(`div`,{staticClass:`c-glyph-sacrifice-options__option__tooltip`},[e._v(` `+e._s(e.filterMode(n))+` `)])])}),0)]),e.mode===e.modes.LOWEST_SACRIFICE?t(`div`,{staticClass:`c-glyph-sacrifice-options__advanced`},[t(`br`),e._v(` Glyph score is assigned based on type. Priority is given to Glyphs belonging to the type of which you have the least total Glyph Sacrifice value. `),t(`br`),t(`br`),e._v(` This mode never keeps Glyphs, but will instead always sacrifice the Glyph it chooses. `)]):e._e(),e.mode===e.modes.EFFECT_COUNT?t(`div`,{staticClass:`c-glyph-sacrifice-options__advanced`},[t(`br`),e._v(` Glyphs must have at least `),t(`input`,{ref:`effectCount`,staticClass:`c-auto-sac-effect-tab__input`,attrs:{type:`number`,min:`0`,max:`8`},domProps:{value:e.effectCount},on:{blur:e.setEffectCount}}),e._v(` effects to be chosen. Rarer Glyphs are preferred in ties. `)]):e._e(),e.mode===e.modes.RARITY_THRESHOLD?t(`div`,{staticClass:`l-glyph-sacrifice-options__rarity-sliders`},[t(`span`,{staticClass:`c-glyph-sacrifice-options__advanced`},[e._v(` Any Glyphs with rarity below these thresholds will be sacrificed. `)]),e._l(e.glyphTypes,function(n){return t(`div`,{key:e.glyphInfoFromType(n).id,staticClass:`l-glyph-sacrifice-options__rarity-slider-div`},[t(`span`,{on:{click:function(t){e.bumpRarity(e.glyphInfoFromType(n).id)}}},[t(`GlyphComponent`,e._b({staticClass:`o-clickable`,attrs:{glyph:{type:n,strength:e.strengthThreshold(e.glyphInfoFromType(n).id)}}},`GlyphComponent`,e.glyphIconProps,!1))],1),t(`SliderComponent`,e._b({attrs:{value:e.scaledRarityThresholds[e.glyphInfoFromType(n).id],width:`100%`},on:{input:function(t){return e.setRarityThreshold(n,t)}}},`SliderComponent`,e.raritySliderProps,!1))],1)})],2):e._e(),e.mode===e.modes.SPECIFIED_EFFECT?t(`div`,{staticClass:`c-glyph-sacrifice-options__advanced`},[t(`div`,[e._v(` Glyph Type: `),e._l(e.glyphTypes,function(n){return t(`span`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:e.glyphInfoFromType(n).id.capitalize(),expression:`glyphInfoFromType(type).id.capitalize()`}],key:e.glyphInfoFromType(n).id,staticClass:`l-glyph-sacrifice-options__advanced-type-select c-glyph-sacrifice-options__advanced-type-select`,style:e.advancedTypeSelectStyle(e.glyphInfoFromType(n)),on:{click:function(t){e.advancedType=e.glyphInfoFromType(n).id}}},[e._v(` `+e._s(e.getSymbol(e.glyphInfoFromType(n).id))+` `)])})],2),t(`br`),t(`div`,{staticClass:`l-glyph-sacrifice-options__rarity-slider-div`},[t(`span`,{on:{click:function(t){return e.bumpRarity(e.advancedType)}}},[t(`GlyphComponent`,e._b({staticClass:`o-clickable`,attrs:{glyph:{type:e.advancedType,strength:e.strengthThreshold(e.advancedType)}}},`GlyphComponent`,e.glyphIconProps,!1))],1),t(`SliderComponent`,e._b({attrs:{value:e.scaledRarityThresholds[e.advancedType],width:`100%`},on:{input:function(t){return e.setRarityThreshold(e.advancedType,t)}}},`SliderComponent`,e.raritySliderProps,!1))],1),e._l(e.glyphTypes,function(n){return[t(`AutoSacrificeEffectTab`,{directives:[{name:`show`,rawName:`v-show`,value:e.glyphInfoFromType(n).id===e.advancedType,expression:`glyphInfoFromType(type).id === advancedType`}],key:e.glyphInfoFromType(n).id,attrs:{"glyph-type":e.glyphInfoFromType(n).id}})]})],2):e._e(),e.mode===e.modes.EFFECT_SCORE?t(`div`,{staticClass:`c-glyph-sacrifice-options__advanced`},[t(`div`,[e._v(` Glyph Type: `),e._l(e.glyphTypes,function(n){return t(`span`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:e.glyphInfoFromType(n).id.capitalize(),expression:`glyphInfoFromType(type).id.capitalize()`}],key:e.glyphInfoFromType(n).id,staticClass:`l-glyph-sacrifice-options__advanced-type-select c-glyph-sacrifice-options__advanced-type-select`,style:e.advancedTypeSelectStyle(e.glyphInfoFromType(n)),on:{click:function(t){e.advancedType=e.glyphInfoFromType(n).id}}},[e._v(` `+e._s(e.getSymbol(e.glyphInfoFromType(n).id))+` `)])})],2),t(`br`),e._l(e.glyphTypes,function(n){return[t(`AutoSacrificeAdvancedTab`,{directives:[{name:`show`,rawName:`v-show`,value:e.glyphInfoFromType(n).id===e.advancedType,expression:`glyphInfoFromType(type).id === advancedType`}],key:e.glyphInfoFromType(n).id,attrs:{"glyph-type":e.glyphInfoFromType(n).id}})]})],2):e._e(),e.mode===e.modes.LOWEST_ALCHEMY?t(`div`,{staticClass:`c-glyph-sacrifice-options__advanced`},[t(`br`),e._v(` Glyph score is assigned based on current Alchemy Resource totals. Priority is given to the Glyph type with the lowest associated alchemy resource total. `),t(`br`),t(`br`),e._v(` This mode never keeps Glyphs. `)]):e._e(),e.mode===e.modes.ALCHEMY_VALUE?t(`div`,{staticClass:`c-glyph-sacrifice-options__advanced`},[t(`br`),e._v(` Glyphs will be assigned values based on `),t(`i`,[e._v(`current`)]),e._v(` refinement value, accounting for the type-specific resource caps. Priority is given to Glyphs which are worth the most alchemy resources; Glyphs which would cause you to hit a cap are effectively worth less. `),t(`br`),t(`br`),e._v(` This mode never keeps Glyphs. `)]):e._e()])},[],!1,null,`e3088745`,null,null).exports,ZL={name:`ButtonCycle`,props:{text:{type:String,required:!0},labels:{type:Array,required:!0},value:{type:Number,required:!0}},computed:{displayText(){return`${this.text} ${this.labels[this.value]}`.trim()}},methods:{handleClick(){this.emitInput((this.value+1)%this.labels.length)}}},QL=D(ZL,function(){var e=this,t=e._self._c;return t(`button`,e._b({on:{click:e.handleClick}},`button`,e.$attrs,!1),[e._v(` `+e._s(e.displayText)+` `)])},[],!1,null,null,null,null).exports,$L=D({name:`GlyphAutosortButtonGroup`,components:{ToggleButton:BL,ButtonCycle:QL},data(){return{autoSort:0,showScoreFilter:!1,autoCollapse:!1,showAutoAutoClean:!1,autoAutoClean:!1,applyFilterToPurge:!1}},computed:{sortModes(){let e=[`NONE`,`LEVEL`,`POWER`,`EFFECT`];return this.showScoreFilter&&e.push(`SCORE`),e},questionMarkTooltip(){return`The automatic settings below will apply after every Reality`},keepTooltip(){return`If set to ON, Glyphs which your filter accepts will never be auto-purged even if they are worse`}},watch:{autoSort(e){player.reality.autoSort=e},autoCollapse(e){player.reality.autoCollapse=e},autoAutoClean(e){player.reality.autoAutoClean=e},applyFilterToPurge(e){player.reality.applyFilterToPurge=e}},methods:{update(){this.autoSort=player.reality.autoSort,this.showScoreFilter=EffarigUnlock.glyphFilter.isUnlocked,this.autoCollapse=player.reality.autoCollapse,this.showAutoAutoClean=VUnlocks.autoAutoClean.canBeApplied,this.autoAutoClean=player.reality.autoAutoClean,this.applyFilterToPurge=player.reality.applyFilterToPurge}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`o-glyph-inventory-management-group`},[t(`div`,{staticClass:`l-glyph-sacrifice-options__header`},[t(`div`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:e.questionMarkTooltip,expression:`questionMarkTooltip`}],staticClass:`o-questionmark`},[e._v(` ? `)]),e._v(` Auto Glyph Arrangement: `)]),t(`ButtonCycle`,{staticClass:`c-glyph-inventory-option`,attrs:{text:`Auto-sort Mode:`,labels:e.sortModes},model:{value:e.autoSort,callback:function(t){e.autoSort=t},expression:`autoSort`}}),t(`ToggleButton`,{staticClass:`c-glyph-inventory-option`,attrs:{label:`Auto-collapse space:`},model:{value:e.autoCollapse,callback:function(t){e.autoCollapse=t},expression:`autoCollapse`}}),e.showAutoAutoClean?t(`ToggleButton`,{staticClass:`c-glyph-inventory-option`,attrs:{label:`Auto-purge on Realities:`},model:{value:e.autoAutoClean,callback:function(t){e.autoAutoClean=t},expression:`autoAutoClean`}}):e._e(),e.showAutoAutoClean?t(`ToggleButton`,{staticClass:`c-glyph-inventory-option`,attrs:{label:`Never Auto-purge Glyphs accepted by filter:`,"tooltip-class":`c-glyph-inventory-option__tooltip`,"tooltip-content":e.keepTooltip},model:{value:e.applyFilterToPurge,callback:function(t){e.applyFilterToPurge=t},expression:`applyFilterToPurge`}}):e._e()],1)},[],!1,null,`2eda6e21`,null,null).exports,eR=D({name:`GlyphCleanButtonGroup`,data(){return{glyphSacrificeUnlocked:!1,hasPerkShop:!1,hasFilter:!1,inventory:[],isRefining:!1,removeCount:0}},computed:{removeString(){return this.isRefining?`Refine`:this.glyphSacrificeUnlocked?`Sacrifice`:`Delete`},autoCleanTooltip(){return`${this.removeString} Glyphs that are worse in every way than
        enough other Glyphs${this.hasPerkShop?` (ignores customized Glyphs)`:``}`},harshAutoCleanTooltip(){return`${this.removeString} Glyphs that are worse in every way than
        ANY other Glyph${this.hasPerkShop?` (includes customized Glyphs)`:``}`},deleteRejectedTooltip(){let e=AutoGlyphProcessor.hasNegativeEffectScore()?` You also have some negative Effect Filter scores; this may remove some Glyphs you normally want to keep!`:``;return this.removeCount===0?`This will not remove any Glyphs, adjust your Filter settings to remove some.`:`This will remove ${quantifyInt(`Glyph`,this.removeCount)}!${e}`}},methods:{update(){this.glyphSacrificeUnlocked=GlyphSacrificeHandler.canSacrifice&&!Pelle.isDoomed,this.hasPerkShop=TeresaUnlocks.shop.canBeApplied,this.hasFilter=EffarigUnlock.glyphFilter.isUnlocked,this.inventory=Glyphs.inventory.map(GlyphGenerator.copy),this.isRefining=AutoGlyphProcessor.sacMode===AUTO_GLYPH_REJECT.REFINE||AutoGlyphProcessor.sacMode===AUTO_GLYPH_REJECT.REFINE_TO_CAP,this.removeCount=this.inventory.filter(e=>e!==null&&e.idx>=Glyphs.protectedSlots&&!AutoGlyphProcessor.wouldKeep(e)).length},autoClean(){player.options.confirmations.autoClean?Modal.glyphPurge.show({harsh:!1}):Glyphs.autoClean(5)},harshAutoClean(){player.options.confirmations.autoClean?Modal.glyphPurge.show({harsh:!0}):Glyphs.autoClean(1)},deleteAllUnprotected(){player.options.confirmations.sacrificeAll?Modal.deleteAllUnprotectedGlyphs.show():Glyphs.autoClean(0)},deleteAllRejected(){player.options.confirmations.sacrificeAll?Modal.deleteAllRejectedGlyphs.show():Glyphs.deleteAllRejected(!0)},slotClass(e){return e<Glyphs.protectedSlots?`c-glyph-inventory__protected-slot`:`c-glyph-inventory__slot`}}},function(){var e=this,t=e._self._c;return e.glyphSacrificeUnlocked?t(`div`,{staticClass:`o-glyph-inventory-management-group`},[t(`div`,{staticClass:`l-glyph-sacrifice-options__header`},[e._v(` Remove weaker Glyphs: `)]),t(`button`,{staticClass:`c-glyph-inventory-option`,on:{click:e.autoClean}},[e._v(` Purge Glyphs `),t(`div`,{staticClass:`c-glyph-inventory-option__tooltip`},[e._v(` `+e._s(e.autoCleanTooltip)+` `)])]),t(`button`,{staticClass:`c-glyph-inventory-option`,on:{click:e.harshAutoClean}},[e._v(` Harsh Purge Glyphs `),t(`div`,{staticClass:`c-glyph-inventory-option__tooltip`},[e._v(` `+e._s(e.harshAutoCleanTooltip)+` `)])]),t(`button`,{staticClass:`c-glyph-inventory-option`,on:{click:e.deleteAllUnprotected}},[e._v(` `+e._s(e.removeString)+` all unprotected Glyphs `)]),e.hasFilter?t(`button`,{staticClass:`c-glyph-inventory-option`,on:{click:e.deleteAllRejected}},[e._v(` `+e._s(e.removeString)+` all Glyphs rejected by filtering `),t(`div`,{staticClass:`c-glyph-inventory-option__tooltip l-rejected-tooltip`},[e._v(` `+e._s(e.deleteRejectedTooltip)+` `)])]):e._e()]):e._e()},[],!1,null,`343f291e`,null,null).exports,tR=D({name:`GlyphProtectedRowButtonGroup`,components:{ToggleButton:BL},data(){return{protectedRows:0,moveGlyphs:!1}},computed:{questionMarkTooltip(){return`Protected slots are unaffected by anything which may move or purge Glyphs.
        New Glyphs will never be inserted into these slots.`}},watch:{moveGlyphs(e){player.reality.moveGlyphsOnProtection=e}},methods:{update(){this.moveGlyphs=player.reality.moveGlyphsOnProtection,this.protectedRows=player.reality.glyphs.protectedRows},addRow(){Glyphs.changeProtectedRows(1)},removeRow(){Glyphs.changeProtectedRows(-1)},isProtectedRowsMax(){return this.protectedRows===Glyphs.totalSlots/10-1},addRowButtonClass(){return{"c-glyph-inventory-option":!0,"o-non-clickable":this.isProtectedRowsMax()}},removeRowButtonClass(){return{"c-glyph-inventory-option":!0,"o-non-clickable":this.protectedRows===0}}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`o-glyph-inventory-management-group`},[t(`div`,{staticClass:`l-glyph-sacrifice-options__header`},[t(`div`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:e.questionMarkTooltip,expression:`questionMarkTooltip`}],staticClass:`o-questionmark`},[e._v(` ? `)]),e._v(` Protected Slots: (`+e._s(e.quantifyInt(`row`,e.protectedRows))+`) `)]),t(`button`,{class:e.addRowButtonClass(),on:{click:e.addRow}},[e._v(` Add a protected row `),e.isProtectedRowsMax()?t(`div`,{staticClass:`c-glyph-inventory-option__tooltip`},[e._v(` One row is permanently un-protected for new Glyphs `)]):e._e()]),t(`button`,{class:e.removeRowButtonClass(),on:{click:e.removeRow}},[e._v(` Remove a protected row `)]),t(`ToggleButton`,{staticClass:`c-glyph-inventory-option`,attrs:{label:`Move Glyphs on changing row count:`},model:{value:e.moveGlyphs,callback:function(t){e.moveGlyphs=t},expression:`moveGlyphs`}})],1)},[],!1,null,`f347ec14`,null,null).exports,nR={name:`GlyphInventoryManagementPanel`,components:{GlyphSortButtonGroup:D({name:`GlyphSortButtonGroup`,data(){return{showScoreFilter:!1}},methods:{update(){this.showScoreFilter=EffarigUnlock.glyphFilter.isUnlocked},sortByLevel(){Glyphs.sortByLevel()},sortByPower(){Glyphs.sortByPower()},sortByScore(){Glyphs.sortByScore()},sortByEffect(){Glyphs.sortByEffect()},collapseEmpty(){Glyphs.collapseEmptySlots()}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`o-glyph-inventory-management-group`},[t(`div`,{staticClass:`l-glyph-sacrifice-options__header`},[e._v(` Sort Glyphs: `)]),t(`button`,{staticClass:`c-glyph-inventory-option`,on:{click:e.sortByLevel}},[e._v(` Sort by level `),t(`div`,{staticClass:`c-glyph-inventory-option__tooltip`},[e._v(` Arranges by decreasing Glyph level `)])]),t(`button`,{staticClass:`c-glyph-inventory-option`,on:{click:e.sortByPower}},[e._v(` Sort by power `),t(`div`,{staticClass:`c-glyph-inventory-option__tooltip`},[e._v(` Arranges by decreasing level×rarity `)])]),t(`button`,{staticClass:`c-glyph-inventory-option`,on:{click:e.sortByEffect}},[e._v(` Sort by effect `),t(`div`,{staticClass:`c-glyph-inventory-option__tooltip`},[e._v(` Groups Glyphs together based on effects `)])]),e.showScoreFilter?t(`button`,{staticClass:`c-glyph-inventory-option`,on:{click:e.sortByScore}},[e._v(` Sort by score `),t(`div`,{staticClass:`c-glyph-inventory-option__tooltip`},[e._v(` Arranges by decreasing Glyph filter score `)])]):e._e(),t(`button`,{staticClass:`c-glyph-inventory-option`,on:{click:e.collapseEmpty}},[e._v(` Collapse empty space `),t(`div`,{staticClass:`c-glyph-inventory-option__tooltip`},[e._v(` Moves all Glyphs to the earliest empty slots `)])])])},[],!1,null,`e374425f`,null,null).exports,GlyphProtectedRowButtonGroup:tR,GlyphAutosortButtonGroup:$L,GlyphCleanButtonGroup:eR},props:{hasMoreOptions:{type:Boolean,required:!1,default:!0}},computed:{groupClass(){return{"l-glyph-sacrifice-options":!0,"c-glyph-sacrifice-options":!0,"l-glyph-sidebar-panel-size":!0,"l-glyph-inventory-management":!0,"c-glyph-inventory-management-with-border":!this.hasMoreOptions}}}},rR=D(nR,function(){var e=this,t=e._self._c;return t(`div`,{class:e.groupClass},[t(`GlyphSortButtonGroup`),t(`GlyphProtectedRowButtonGroup`),t(`GlyphAutosortButtonGroup`),t(`GlyphCleanButtonGroup`)],1)},[],!1,null,`9904b74f`,null,null).exports,iR=D({name:`GlyphRejectionPanel`,data(){return{mode:AUTO_GLYPH_REJECT.SACRIFICE}},computed:{modes(){return AUTO_GLYPH_REJECT},availableModes(){return Object.values(this.modes)}},methods:{optionClass(e){return[e===this.mode?`c-glyph-auto-pick-options__option--active`:`c-glyph-auto-pick-options__option--inactive`,`c-glyph-auto-pick-options__option`]},update(){this.mode=AutoGlyphProcessor.sacMode},setMode(e){AutoGlyphProcessor.sacMode=e},modeDesc(e){return AutoGlyphProcessor.trashModeDesc(e)}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-glyph-sacrifice-options c-glyph-sacrifice-options l-glyph-sidebar-panel-size`},[t(`span`,{staticClass:`c-glyph-sacrifice-options__advanced`},[e._v(` Behavior for deleted and filtered Glyphs: `)]),t(`br`),t(`div`,{staticClass:`l-glyph-auto-pick-options__container`},e._l(e.availableModes,function(n){return t(`div`,{key:n,class:e.optionClass(n),on:{click:function(t){return e.setMode(n)}}},[e._v(` `+e._s(e.modeDesc(n))+` `)])}),0)])},[],!1,null,`33cfd4f0`,null,null).exports,aR=D({name:`GlyphSetSavePanel`,components:{ToggleButton:BL,GlyphSetPreview:pE},data(){return{hasEquipped:!0,glyphSets:[],names:[],effects:!1,rarity:!1,level:!1}},computed:{questionmarkTooltip(){return`Glyph Presets work like Time Study Loadouts, allowing you to equip a
        full set of previously-saved Glyphs`},noSet(){return`No Glyph Preset saved in this slot`}},watch:{effects(e){player.options.ignoreGlyphEffects=e},rarity(e){player.options.ignoreGlyphRarity=e},level(e){player.options.ignoreGlyphLevel=e}},created(){this.on$(GAME_EVENT.GLYPHS_EQUIPPED_CHANGED,this.refreshGlyphSets),this.on$(GAME_EVENT.GLYPH_SET_SAVE_CHANGE,this.refreshGlyphSets),this.refreshGlyphSets();for(let e=0;e<player.reality.glyphs.sets.length;e++)this.names[e]=player.reality.glyphs.sets[e].name},methods:{update(){this.hasEquipped=Glyphs.activeList.length>0,this.effects=player.options.ignoreGlyphEffects,this.rarity=player.options.ignoreGlyphRarity,this.level=player.options.ignoreGlyphLevel},refreshGlyphSets(){this.glyphSets=structuredClone(player.reality.glyphs.sets.map(e=>cloneDeep(Glyphs.copyForRecords(e.glyphs))))},setName(e){let t=this.names[e]===``?``:`: ${this.names[e]}`;return`Glyph Preset #${e+1}${t}`},saveGlyphSet(e){!this.hasEquipped||player.reality.glyphs.sets[e].glyphs.length>0||(player.reality.glyphs.sets[e].glyphs=Glyphs.active.compact(),this.refreshGlyphSets(),EventHub.dispatch(GAME_EVENT.GLYPH_SET_SAVE_CHANGE))},loadGlyphSet(e,t){if(!this.setLengthValid(e))return;let n=[...e].sort((e,t)=>Decimal.compare(e.level.mul(e.strength),t.level.mul(t.strength))),r=Glyphs.active.filter(e=>e),i=[];for(let e of r){let t=Glyphs.findByValues(e,n,{level:this.level?-1:0,strength:this.rarity?-1:0,effects:this.effects?-1:0});i.push({glyph:e,options:t})}let a=this.findSelectedGlyphs(i,5);for(let e of a)n=n.filter(t=>t!==e);let o=[];for(let e=0;e<n.length;e++){let t=n[e],r=Glyphs.findByValues(t,Glyphs.sortedInventoryList,{level:this.level?1:0,strength:this.rarity?1:0,effects:this.effects?1:0});o[e]={glyph:t,options:r}}let s=this.findSelectedGlyphs(o,Glyphs.active.countWhere(e=>e===null));for(let e of s)n=n.filter(t=>t!==e);let c=n.length;for(let e of s){let t=Glyphs.active.indexOf(null);t!==-1&&(Glyphs.equip(e,t),c--)}c>0?GameUI.notify.error(`Could not find or equip ${c} ${pluralize(`Glyph`,c)} from
          ${this.setName(t)}.`):GameUI.notify.success(`Successfully loaded ${this.setName(t)}.`)},findSelectedGlyphs(e,t){let n=e=>1e3*(10*e.glyph.type.length+e.glyph.type.codePointAt(0))+e.options.length;e.sort((e,t)=>n(e)-n(t));let r=[],i=t;for(let t=0;t<e.length&&i!==0;t++){let n=e[t].options.filter(e=>!r.includes(e));if(n.length===0)continue;let a=n[n.length-1];r.push(a),i--}return r},deleteGlyphSet(e){player.reality.glyphs.sets[e].glyphs.length!==0&&(player.options.confirmations.deleteGlyphSetSave?Modal.glyphSetSaveDelete.show({glyphSetId:e}):(player.reality.glyphs.sets[e].glyphs=[],this.refreshGlyphSets(),EventHub.dispatch(GAME_EVENT.GLYPH_SET_SAVE_CHANGE)))},nicknameBlur(e){player.reality.glyphs.sets[e.target.id].name=e.target.value.slice(0,20),this.names[e.target.id]=player.reality.glyphs.sets[e.target.id].name,this.refreshGlyphSets()},setLengthValid(e){return e.length&&e.length<=Glyphs.activeSlotCount},loadingTooltip(e){return this.setLengthValid(e)&&this.hasEquipped?`This set may not load properly because you already have some Glyphs equipped`:null},glyphSetKey(e,t){return`${t} ${Glyphs.hash(e)}`}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-glyph-sacrifice-options c-glyph-sacrifice-options l-glyph-sidebar-panel-size`},[t(`span`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:e.questionmarkTooltip,expression:`questionmarkTooltip`}],staticClass:`l-glyph-sacrifice-options__help c-glyph-sacrifice-options__help o-questionmark`},[e._v(` ? `)]),t(`div`,{staticClass:`l-glyph-set-save__header`},[e._v(` When loading a preset, try to match the following attributes. "Exact" will only equip Glyphs identical to the ones in the preset. The other settings will, loosely speaking, allow "better" Glyphs to be equipped in their place. `)]),t(`div`,{staticClass:`c-glyph-set-save-container`},[t(`ToggleButton`,{staticClass:`c-glyph-set-save-setting-button`,attrs:{label:`Effects:`,on:`Including`,off:`Exact`},model:{value:e.effects,callback:function(t){e.effects=t},expression:`effects`}}),t(`ToggleButton`,{staticClass:`c-glyph-set-save-setting-button`,attrs:{label:`Level:`,on:`Increased`,off:`Exact`},model:{value:e.level,callback:function(t){e.level=t},expression:`level`}}),t(`ToggleButton`,{staticClass:`c-glyph-set-save-setting-button`,attrs:{label:`Rarity:`,on:`Increased`,off:`Exact`},model:{value:e.rarity,callback:function(t){e.rarity=t},expression:`rarity`}})],1),e._l(e.glyphSets,function(n,r){return t(`div`,{key:r,staticClass:`c-glyph-single-set-save`},[t(`div`,{staticClass:`c-glyph-set-preview-area`},[t(`GlyphSetPreview`,{key:e.glyphSetKey(n,r),attrs:{text:e.setName(r),"text-hidden":!0,glyphs:n,"flip-tooltip":!0,"none-text":e.noSet}})],1),t(`div`,{staticClass:`c-glyph-single-set-save-flexbox`},[t(`div`,{attrs:{"ach-tooltip":`Set a custom name (up to 20 characters)`}},[t(`input`,{staticClass:`c-glyph-sets-save-name__input`,attrs:{id:r,type:`text`,size:`20`,maxlength:`20`,placeholder:`Custom set name`},domProps:{value:e.names[r]},on:{blur:e.nicknameBlur}})]),t(`div`,{staticClass:`c-glyph-single-set-save-flexbox-buttons`},[t(`button`,{staticClass:`c-glyph-set-save-button`,class:{"c-glyph-set-save-button--unavailable":!e.hasEquipped||n.length},on:{click:function(t){return e.saveGlyphSet(r)}}},[e._v(` Save `)]),t(`button`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:e.loadingTooltip(n),expression:`loadingTooltip(set)`}],staticClass:`c-glyph-set-save-button`,class:{"c-glyph-set-save-button--unavailable":!e.setLengthValid(n)},on:{click:function(t){return e.loadGlyphSet(n,r)}}},[e._v(` Load `)]),t(`button`,{staticClass:`c-glyph-set-save-button`,class:{"c-glyph-set-save-button--unavailable":!n.length},on:{click:function(t){return e.deleteGlyphSet(r)}}},[e._v(` Delete `)])])])])})],2)},[],!1,null,`aab8f189`,null,null).exports,oR=D({name:`GlyphTabSidebar`,components:{GlyphInventoryManagementPanel:rR,GlyphFilterPanel:XL,GlyphSetSavePanel:aR,GlyphRejectionPanel:iR},data(){return{type:0,sidebarEnum:{},unlockedFilter:!1,unlockedSets:!1,unlockedAlchemy:!1,hasMoreOptions:!1,hasRefined:!1}},computed:{isDoomed(){return Pelle.isDoomed}},methods:{update(){this.type=player.reality.showSidebarPanel,this.sidebarEnum=GLYPH_SIDEBAR_MODE,this.unlockedFilter=EffarigUnlock.glyphFilter.isUnlocked,this.unlockedSets=EffarigUnlock.setSaves.isUnlocked,this.unlockedAlchemy=Ra.unlocks.unlockGlyphAlchemy.canBeApplied,this.hasMoreOptions=this.unlockedFilter||this.unlockedSets||this.unlockedAlchemy,this.hasRefined=AlchemyResources.all.map(e=>e.amount).some(e=>e.gt(0))},setSidebarState(e){player.reality.showSidebarPanel=e},sidebarClass(e){return{"l-glyph-sidebar-button":!0,"c-glyph-sidebar-button":!0,"c-glyph-sidebar-button--active":e===player.reality.showSidebarPanel,"l-glyph-sidebar-button--attention":e===this.sidebarEnum.SACRIFICE_TYPE&&!this.hasRefined&&!this.isDoomed}}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-glyph-sidebar-option-container`},[e.hasMoreOptions?t(`div`,{staticClass:`l-glyph-sidebar-tab-container`},[t(`button`,{class:e.sidebarClass(e.sidebarEnum.INVENTORY_MANAGEMENT),on:{click:function(t){return e.setSidebarState(e.sidebarEnum.INVENTORY_MANAGEMENT)}}},[e._v(` Manage Inventory `)]),e.unlockedFilter?t(`button`,{class:e.sidebarClass(e.sidebarEnum.FILTER_SETTINGS),on:{click:function(t){return e.setSidebarState(e.sidebarEnum.FILTER_SETTINGS)}}},[e._v(` Glyph Filter `)]):e._e(),e.unlockedSets?t(`button`,{class:e.sidebarClass(e.sidebarEnum.SAVED_SETS),on:{click:function(t){return e.setSidebarState(e.sidebarEnum.SAVED_SETS)}}},[e._v(` Glyph Presets `)]):e._e(),e.unlockedAlchemy?t(`button`,{class:e.sidebarClass(e.sidebarEnum.SACRIFICE_TYPE),on:{click:function(t){return e.setSidebarState(e.sidebarEnum.SACRIFICE_TYPE)}}},[e._v(` Sacrifice Type `)]):e._e()]):e._e(),e.type===e.sidebarEnum.INVENTORY_MANAGEMENT?t(`GlyphInventoryManagementPanel`,{attrs:{"has-more-options":e.hasMoreOptions}}):e.type===e.sidebarEnum.FILTER_SETTINGS&&e.unlockedFilter?t(`GlyphFilterPanel`):e.type===e.sidebarEnum.SAVED_SETS&&e.unlockedSets?t(`GlyphSetSavePanel`):e.type===e.sidebarEnum.SACRIFICE_TYPE&&e.unlockedAlchemy?t(`GlyphRejectionPanel`):e._e()],1)},[],!1,null,`5815243e`,null,null).exports,sR=D({name:`RealityAmplifyButton`,data:()=>({isDoomed:!1,isVisible:!1,isDisabled:!1,isActive:!1,ratio:1,canAmplify:!1}),computed:{tooltip(){return this.isDoomed?`You cannot amplify a Doomed Reality`:this.isDisabled?`You cannot amplify Celestial Realities`:this.canAmplify?null:`Store more real time or complete the Reality faster to amplify`},buttonClass(){return{"l-reality-amplify-button":!0,"l-reality-amplify-button--clickable":!this.isDoomed&&this.canAmplify,"o-enslaved-mechanic-button--storing-time":this.isActive}}},methods:{update(){this.isDoomed=Pelle.isDoomed,this.isVisible=Enslaved.isUnlocked,this.isDisabled=isInCelestialReality(),this.isActive=Enslaved.boostReality,this.ratio=Enslaved.realityBoostRatio,this.canAmplify=Enslaved.canAmplify},toggleActive(){this.canAmplify&&(Enslaved.boostReality=!Enslaved.boostReality)}}},function(){var e=this,t=e._self._c;return e.isVisible?t(`button`,{class:e.buttonClass,attrs:{"ach-tooltip":e.tooltip},on:{click:e.toggleActive}},[e.isDoomed?t(`div`,[e._v(` You cannot amplify Doomed Realities. `)]):e.canAmplify?t(`div`,[e.isActive?t(`span`,[e._v(`Will be amplified:`)]):t(`span`,[e._v(`Amplify this Reality:`)]),t(`br`),e._v(` All rewards ×`+e._s(e.formatInt(e.ratio))+` `)]):t(`div`,[e._v(` Not enough stored real time to amplify. `)])]):e._e()},[],!1,null,`9b3a34d9`,null,null).exports,cR=D({name:`RealityReminder`,data(){return{canReality:!1,isVisible:!1,isExpanded:!1,ecCount:0,missingAchievements:0,unpurchasedDilationUpgrades:0,currLog10EP:new Decimal,cheapestLog10TD:new Decimal,multEPLog10Cost:new Decimal,purchasableTS:0,hasDilated:0,availableCharges:0}},computed:{suggestions(){let e=[];return this.purchasableTS>0&&e.push(`Purchase more Time Studies (${formatInt(this.purchasableTS)} available)`),this.missingAchievements>0&&e.push(`Complete the rest of your Achievements (${formatInt(this.missingAchievements)} left)`),this.unpurchasedDilationUpgrades>0&&e.push(`Purchase the remaining Dilation Upgrades (${formatInt(this.unpurchasedDilationUpgrades)} left)`),this.currLog10EP.gt(this.cheapestLog10TD.mul(1.3))&&e.push(`Purchase more TDs (cheapest: ${format(Decimal.pow10(this.cheapestLog10TD))} EP)`),this.currLog10EP.gt(this.multEPLog10Cost.mul(1.3))&&e.push(`Purchase more ${formatX(5)} EP (cost: ${format(Decimal.pow10(this.multEPLog10Cost))} EP)`),this.ecCount<60&&e.push(`Finish the rest of your ECs (Done: ${formatInt(this.ecCount)}/${formatInt(60)})`),this.hasDilated||e.push(`Perform a Dilated Eternity`),this.availableCharges>0&&e.push(`Charge more Infinity Upgrades (${formatInt(this.availableCharges)} available)`),e},canBeExpanded(){return this.canReality&&this.suggestions.length>0},styleObject(){let e=!this.canReality||this.canBeExpanded?`var(--color-bad)`:`var(--color-good)`,t=this.canBeExpanded&&this.isExpanded?`${6.5+1.5*this.suggestions.length}rem`:`5rem`;return{color:e,height:t}},clickText(){return`(click to ${this.isExpanded?`collapse`:`expand`})`},realityReminderClass(){return{"c-reality-reminder":!0,"c-reality-reminder-pointer":this.canBeExpanded}},dropDownIconClass(){return this.isExpanded?`far fa-minus-square`:`far fa-plus-square`}},created(){this.on$(GAME_EVENT.REALITY_RESET_AFTER,()=>this.isExpanded=!1)},methods:{update(){this.canReality=TimeStudy.reality.isBought,this.isVisible=!isInCelestialReality(),this.ecCount=EternityChallenges.completions,this.missingAchievements=Achievements.preReality.countWhere(e=>!e.isUnlocked),this.unpurchasedDilationUpgrades=DilationUpgrade.all.countWhere(e=>(e.isBought===void 0?e.boughtAmount===0:!e.isBought)&&!e.config.pelleOnly),this.currLog10EP=player.eternityPoints.max(1).log10(),this.cheapestLog10TD=Decimal.min(...TimeDimensions.all.map(e=>e.cost.max(1).log10())),this.multEPLog10Cost=EternityUpgrade.epMult.cost.max(1).log10(),this.purchasableTS=NormalTimeStudyState.studies.countWhere(e=>e&&e.canBeBought&&!e.isBought),this.hasDilated=Perk.startTP.canBeApplied?player.dilation.lastEP.gt(0):player.dilation.tachyonParticles.gt(0),this.availableCharges=Ra.chargesLeft},clicked(){this.canBeExpanded&&(this.isExpanded=!this.isExpanded)}}},function(){var e=this,t=e._self._c;return e.isVisible?t(`div`,{class:e.realityReminderClass,style:e.styleObject,on:{click:e.clicked}},[e.canReality?e.suggestions.length===0?t(`span`,[e._v(` Ready to Reality! You have unlocked every available upgrade within this Reality. `)]):t(`span`,[t(`i`,{class:e.dropDownIconClass}),e._v(` You have `+e._s(e.quantifyInt(`thing`,e.suggestions.length))+` you may want to do before Reality. `+e._s(e.clickText)+` `),e.isExpanded?t(`div`,{staticClass:`l-suggestions`},[t(`br`),e._l(e.suggestions,function(n){return t(`div`,{key:n},[e._v(` `+e._s(n)+` `)])})],2):e._e()]):t(`span`,[e._v(` You still need to unlock Reality in the Time Study Tree. `)])]):e._e()},[],!1,null,`c4b5de5a`,null,null).exports,lR=D({name:`ResetRealityButton`,data(){return{canReality:!1,resetCelestial:!1,isInCelestialReality:!1,isDoomed:!1}},computed:{resetText(){return this.isDoomed?`Start this Armageddon over`:this.isInCelestialReality&&!this.resetCelestial?`Exit this Celestial early`:this.isInCelestialReality&&this.resetCelestial?`Restart this Celestial`:`Start this Reality over`}},methods:{update(){this.canReality=TimeStudy.reality.isBought&&player.records.thisReality.maxEP.max(1).log10().gte(4e3),this.resetCelestial=player.options.retryCelestial,this.isInCelestialReality=isInCelestialReality(),this.isDoomed=Pelle.isDoomed},resetReality(){let e=player.options.confirmations;GameEnd.creditsClosed||(this.isInCelestialReality?e.exitChallenge?Modal.exitChallenge.show({challengeName:`a Celestial Reality`,normalName:`Reality`,hasHigherLayers:!1,exitFn:()=>beginProcessReality(getRealityProps(!0))}):beginProcessReality(getRealityProps(!0)):e.resetReality?Modal.resetReality.show():beginProcessReality(getRealityProps(!0)))}}},function(){var e=this,t=e._self._c;return t(`button`,{class:[`l-reset-reality-button`,`c-reset-reality-button`,{"c-reset-reality-button-celestial":e.isInCelestialReality}],on:{click:e.resetReality}},[t(`div`,{staticClass:`l-reality-button__contents`},[e._v(` `+e._s(e.resetText)+` `)])])},[],!1,null,`3f288491`,null,null).exports,uR={name:`TypeSacrifice`,props:{type:{type:String,required:!0},hasDragover:{type:Boolean,required:!0}},data(){return{amount:new Decimal,effectValue:0,isColored:!0,willSacrifice:!1}},computed:{typeConfig(){return GlyphInfo[this.type]},sacConfig(){return GlyphInfo[this.type].sacrificeInfo},style(){if(!this.isColored)return{};let e=GlyphAppearanceHandler.getBorderColor(this.type),t=this.typeConfig.id===`reality`&&!player.reality.glyphs.cosmetics.colorMap.reality;return{color:e,"text-shadow":`-1px 1px 1px var(--color-text-base), 1px 1px 1px var(--color-text-base),
                            -1px -1px 1px var(--color-text-base), 1px -1px 1px var(--color-text-base),
                            0 0 3px ${e}`,animation:t?`a-reality-glyph-description-cycle 10s infinite`:void 0}},symbol(){return CosmeticGlyphTypes[this.type].currentSymbol.symbol},formatAmount(){return format(this.amount,2,2)},description(){return this.sacConfig.description(this.effectValue)},newDescription(){return this.sacConfig.description(this.sacConfig.effect(this.currentSacrifice.sacrificeValue))},currentSacrifice(){let e=this.$viewModel.tabs.reality;return e.mouseoverGlyphInfo.type===``?e.draggingGlyphInfo:e.mouseoverGlyphInfo},showNewSacrifice(){let e=this.currentSacrifice.type===this.type,t=this.willSacrifice&&this.currentSacrifice.inInventory,n=ui.view.shiftDown;return e&&(this.hasDragover||n&&t)},formatNewAmount(){return format(this.currentSacrifice.sacrificeValue,2,2)},formatTotalAmount(){return format(this.amount.add(this.currentSacrifice.sacrificeValue),2,2)}},created(){this.on$(GAME_EVENT.GLYPH_VISUAL_CHANGE,()=>{this.$recompute(`style`)})},methods:{update(){this.amount.copyFrom(player.reality.glyphs.sac[this.type]),this.effectValue=GlyphInfo[this.type].sacrificeInfo.effect(),this.isColored=player.options.glyphTextColors,this.willSacrifice=AutoGlyphProcessor.sacMode===AUTO_GLYPH_REJECT.SACRIFICE||AutoGlyphProcessor.sacMode===AUTO_GLYPH_REJECT.REFINE_TO_CAP&&this.currentSacrifice.refineValue===0}}},dR={name:`SacrificedGlyphs`,components:{TypeSacrifice:D(uR,function(){var e=this,t=e._self._c;return e.amount.gt(0)?t(`div`,{style:e.style},[t(`div`,[t(`div`,{staticClass:`l-sacrificed-glyphs__type-symbol c-sacrificed-glyphs__type-symbol`},[e._v(` `+e._s(e.symbol)+` `)]),t(`div`,{staticClass:`l-sacrificed-glyphs__type-amount c-sacrificed-glyphs__type-amount`},[e._v(` `+e._s(e.formatAmount)+` `),e.showNewSacrifice?t(`span`,{staticClass:`c-sacrificed-glyphs__type-new-amount`},[e._v(` + `+e._s(e.formatNewAmount)+` ➜ `+e._s(e.formatTotalAmount)+` `)]):e._e()])]),e.showNewSacrifice?t(`span`,{staticClass:`c-sacrificed-glyphs__type-new-amount`},[e._v(` `+e._s(e.newDescription)+` `)]):t(`span`,[e._v(` `+e._s(e.description)+` `)])]):e._e()},[],!1,null,`a7f41cef`,null,null).exports},data(){return{anySacrifices:!1,hasDragover:!1,hasAlteration:!1,hideAlteration:!1,maxSacrifice:0,teresaMult:0,lastMachinesTeresa:new Decimal(0)}},computed:{types:()=>j.sacrificeGlyphTypes,lastMachines(){return this.lastMachinesTeresa.lt(o.E10000)?`${quantify(`Reality Machine`,this.lastMachinesTeresa,2)}`:`${quantify(`Imaginary Machine`,this.lastMachinesTeresa.dividedBy(o.E10000),2)}`},dropDownIconClass(){return this.hideAlteration?`far fa-plus-square`:`far fa-minus-square`},isDoomed(){return Pelle.isDoomed},addThreshold(){return GlyphAlteration.additionThreshold},empowerThreshold(){return GlyphAlteration.empowermentThreshold},boostThreshold(){return GlyphAlteration.boostingThreshold},cosmeticTypes:()=>CosmeticGlyphTypes,addStyle(){return{color:GlyphAlteration.baseAdditionColor()}},empowerStyle(){return{color:GlyphAlteration.baseEmpowermentColor()}},boostStyle(){return{color:GlyphAlteration.baseBoostColor()}},hasSeenRealityGlyph(){return player.reality.glyphs.createdRealityGlyph}},created(){this.on$(GAME_EVENT.GLYPH_VISUAL_CHANGE,()=>{this.$recompute(`cosmeticTypes`)})},methods:{update(){this.anySacrifices=GameCache.logTotalGlyphSacrifice!==0,this.hasAlteration=Ra.unlocks.alteredGlyphs.canBeApplied,this.hideAlteration=player.options.hideAlterationEffects,this.maxSacrifice=GlyphSacrificeHandler.maxSacrificeForEffects,this.teresaMult=Teresa.runRewardMultiplier,this.lastMachinesTeresa.copyFrom(player.celestials.teresa.lastRepeatedMachines)},dragover(e){Pelle.isDoomed||e.dataTransfer.types.includes(GLYPH_MIME_TYPE)&&(e.preventDefault(),this.hasDragover=!0)},dragleave(e){this.isDoomed||!e.relatedTarget||!e.relatedTarget.classList||e.relatedTarget.classList.contains(`c-current-glyph-effects`)||e.relatedTarget.classList.contains(`c-sacrificed-glyphs__header`)||e.relatedTarget.classList.contains(`l-sacrificed-glyphs__type`)||e.relatedTarget.classList.contains(`l-sacrificed-glyphs__type-symbol`)||e.relatedTarget.classList.contains(`l-sacrificed-glyphs__type-amount`)||e.relatedTarget.classList.contains(`c-sacrificed-glyphs__type-new-amount`)||e.relatedTarget.classList.length===0||(this.hasDragover=!1)},drop(e){if(this.isDoomed||!e.dataTransfer.types.includes(GLYPH_MIME_TYPE))return;let t=Number.parseInt(e.dataTransfer.getData(GLYPH_MIME_TYPE),10);if(isNaN(t))return;let n=Glyphs.findById(t);n&&(GlyphSacrificeHandler.sacrificeGlyph(n,!0),this.hasDragover=!1)},toggleAlteration(){player.options.hideAlterationEffects=!player.options.hideAlterationEffects},glyphSymbol(e){return j[e].regularGlyphSymbol}}},fR=D(dR,function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`c-current-glyph-effects l-current-glyph-effects`,class:{"c-sacrificed-glyphs--dragover":e.hasDragover},on:{dragover:e.dragover,dragleave:e.dragleave,drop:e.drop}},[t(`div`,{staticClass:`l-sacrificed-glyphs__help`},[e.isDoomed?t(`span`,{staticClass:`pelle-current-glyph-effects`},[e._v(` You cannot sacrifice Glyphs while Doomed. `)]):t(`span`,[t(`div`,[e._v(`Drag Glyphs here or shift-click to Sacrifice.`)]),t(`div`,[e._v(`The confirmation can be disabled in Options or by holding Ctrl.`)])])]),e.hasAlteration?t(`div`,[t(`span`,{staticClass:`c-altered-glyphs-toggle-button`,on:{click:e.toggleAlteration}},[t(`i`,{class:e.dropDownIconClass}),t(`b`,[e._v(` Altered Glyphs`)])]),t(`br`),e.hideAlteration?t(`div`,[e._v(` (Details hidden, click to unhide) `)]):t(`div`,[e._v(` Glyph types will have one of their effects improved`),t(`br`),e._v(` when their Glyph type's total sacrifice value is above: `),t(`br`),t(`br`),t(`b`,[t(`span`,{style:e.addStyle},[e._v(e._s(e.format(e.addThreshold))+` - an additional secondary effect`)]),t(`br`),t(`span`,{style:e.empowerStyle},[e._v(e._s(e.format(e.empowerThreshold))+` - formula drastically improved`)]),t(`br`),t(`span`,{style:e.boostStyle},[e._v(e._s(e.format(e.boostThreshold))+` - a boost depending on Glyph Sacrifice`)])]),t(`br`),t(`br`),e._v(` All effects from Glyph Sacrifice can no longer be increased once they reach `+e._s(e.format(e.maxSacrifice))+`. `)])]):e._e(),t(`br`),t(`div`,{staticClass:`c-sacrificed-glyphs__header`},[e._v(` Glyph Sacrifice Boosts: `)]),e.anySacrifices&&!e.isDoomed?t(`div`,[e.teresaMult.gt(1)?t(`div`,[e._v(` Glyph sacrifice values are multiplied by `+e._s(e.formatX(e.teresaMult,2,2))+`; Teresa was last done at `+e._s(e.lastMachines)+`. `),e.hasSeenRealityGlyph?t(`span`,[e._v(` Reality Glyphs are unaffected by this multiplier and have no altered effects. `)]):e._e()]):e._e(),e._l(e.types,function(n){return[t(`TypeSacrifice`,{key:n+e.glyphSymbol(n),attrs:{type:n,"has-dragover":e.hasDragover}})]})],2):e.isDoomed?t(`div`,{staticClass:`pelle-current-glyph-effects`},[e._v(` All boosts from Glyph Sacrifice are disabled while Doomed, including changes to effects due to Altered Glyphs. `)]):t(`div`,[e._v(` You haven't Sacrificed any Glyphs yet! `)])])},[],!1,null,`96604fa9`,null,null).exports,pR=D({name:`SingleGlyphCustomzationPanel`,components:{GlyphComponent:Tw,PrimaryButton:L},data(){return{glyphID:-1,isVisible:!0}},computed:{glyph(){if(this.glyphID===-1)return null;let e=Glyphs.findById(this.glyphID);return{type:e.type,level:e.level,strength:e.strength,effects:e.effects,color:e.color,symbol:e.symbol,cosmetic:e.cosmetic}},typeCosmetic(){let e=[];return GlyphAppearanceHandler.symbolMap[this.glyph.type]&&e.push(`Symbol`),GlyphAppearanceHandler.colorMap[this.glyph.type]&&e.push(`Color`),e.length===0?`None`:e.join(`/`)},specialCosmetic(){if(this.glyph.cosmetic)return this.glyph.cosmetic.capitalize();let e=[];return this.glyph.symbol&&e.push(`Symbol`),this.glyph.color&&e.push(`Color`),e.length===0?`None`:e.join(`/`)}},created(){EventHub.logic.on(GAME_EVENT.GLYPHS_CHANGED,()=>{this.glyphID=-1,this.$recompute(`glyph`)}),EventHub.logic.on(GAME_EVENT.GLYPH_VISUAL_CHANGE,()=>{this.$recompute(`glyph`)})},methods:{update(){this.isVisible=player.reality.glyphs.cosmetics.active&&(GlyphAppearanceHandler.availableTypes.length>0||CosmeticGlyphTypes.list.some(e=>e.isCosmetic&&e.isUnlocked()))},dragover(e){e.dataTransfer.types.includes(GLYPH_MIME_TYPE)&&e.preventDefault()},drop(e){if(!e.dataTransfer.types.includes(GLYPH_MIME_TYPE))return;let t=Number.parseInt(e.dataTransfer.getData(GLYPH_MIME_TYPE),10);isNaN(t)||(EventHub.dispatch(GAME_EVENT.GLYPH_VISUAL_CHANGE),this.glyphID=t,this.$recompute(`glyph`))},openModal(){Modal.singleGlyphAppearance.show({glyphId:this.glyphID})}}},function(){var e=this,t=e._self._c;return e.isVisible?t(`div`,{staticClass:`c-single-glyph-cosmetic`,on:{dragover:e.dragover,drop:e.drop}},[e.glyph?t(`div`,{staticClass:`c-glyph-info`},[t(`div`,{staticClass:`c-glyph-info-section`},[t(`GlyphComponent`,{attrs:{glyph:e.glyph,"flip-tooltip":!0}})],1),t(`div`,{staticClass:`c-glyph-info-section c-cosmetic-text`},[t(`u`,[e._v(`Cosmetic Attributes`)]),e._v(` Type: `+e._s(e.glyph.type.capitalize())+` `),t(`br`),e._v(` All: `+e._s(e.typeCosmetic)+` `),t(`br`),e._v(` Single: `+e._s(e.specialCosmetic)+` `)]),t(`div`,{staticClass:`c-glyph-info-section`},[t(`PrimaryButton`,{staticClass:`o-primary-btn--subtab-option`,on:{click:e.openModal}},[e._v(` Customize! `)]),t(`PrimaryButton`,{staticClass:`o-primary-btn--subtab-option`,on:{click:function(t){e.glyphID=-1}}},[e._v(` Clear Box `)])],1)]):t(`div`,[e._v(` Drag a Glyph over this box to change its appearance! This will make a visual copy of it here, but leave the actual Glyph itself in your inventory. Removing, gaining, or moving any Glyphs will clear this box. `)])]):e._e()},[],!1,null,`2078b06e`,null,null).exports,mR=D({name:`GlyphsTab`,components:{ExpandingControlBox:Pt,GlyphTabSidebar:oR,GlyphPeek:WL,RealityAmplifyButton:sR,GlyphInventory:RL,SacrificedGlyphs:fR,CurrentGlyphEffects:IL,EquippedGlyphs:LL,GlyphLevelsAndWeights:UL,ResetRealityButton:lR,RealityReminder:cR,SingleGlyphCustomzationPanel:pR},data(){return{enslavedHint:``,showInstability:!1,instabilityThreshold:new Decimal,hyperInstabilityThreshold:new Decimal,isInCelestialReality:!1,canAmplify:!1,glyphTextColors:!0,autoRestartCelestialRuns:!1,sacrificeUnlocked:!1,sacrificeDisplayed:!1,resetRealityDisplayed:!1}},computed:{showEnslavedHint(){return this.enslavedHint!==``},glyphColorState(){return{"o-glyph-color-checkbox":!0,"o-glyph-color-checkbox--active":this.glyphTextColors,"o-glyph-color-checkbox--inactive":!this.glyphTextColors}}},methods:{update(){this.resetRealityDisplayed=PlayerProgress.realityUnlocked(),this.instabilityThreshold.copyFrom(Glyphs.instabilityThreshold),this.hyperInstabilityThreshold.copyFrom(Glyphs.hyperInstabilityThreshold),this.showInstability=player.records.bestReality.glyphLevel.gt(this.instabilityThreshold.sub(200)),this.isInCelestialReality=isInCelestialReality(),this.canAmplify=Enslaved.isUnlocked&&!this.isInCelestialReality,this.autoRestartCelestialRuns=player.options.retryCelestial,this.glyphTextColors=player.options.glyphTextColors,this.enslavedHint=``,this.sacrificeUnlocked=GlyphSacrificeHandler.canSacrifice,this.sacrificeDisplayed=player.reality.showGlyphSacrifice,Enslaved.isRunning&&Glyphs.activeWithoutCompanion.some(e=>e.level.lt(Enslaved.glyphLevelMin))!==void 0&&(this.enslavedHint=`done... what little... I can... with Glyphs...`)},toggleAutoRestartCelestial(){player.options.retryCelestial=!player.options.retryCelestial},toggleGlyphTextColors(){player.options.glyphTextColors=!player.options.glyphTextColors},glyphInfoClass(e){return{"l-glyph-info-button":!0,"c-glyph-info-button":!0,"c-glyph-info-button--active":e,"c-glyph-info-button--inactive":!e}},setInfoState(e){player.reality.showGlyphSacrifice=e},glyphColorPosition(){return this.sacrificeUnlocked?`l-glyph-color-position__low`:`l-glyph-color-position__top`},glyphInfoBorderClass(){return{"c-current-glyph-effects-with-top-border":!this.sacrificeUnlocked}},buttonGroupClass(){return{"l-half-width":this.canAmplify}}}},function(){var e=this,t=e._self._c;return t(`div`,[t(`div`,{staticClass:`l-glyphs-tab`},[t(`div`,{staticClass:`l-reality-button-column`},[t(`GlyphPeek`),e.resetRealityDisplayed?t(`div`,{staticClass:`l-reality-button-group`},[e.isInCelestialReality?e._e():t(`RealityAmplifyButton`,{class:e.buttonGroupClass()}),t(`ResetRealityButton`,{class:e.buttonGroupClass()})],1):e._e(),e.isInCelestialReality?t(`div`,{staticClass:`l-celestial-auto-restart-checkbox`},[t(`input`,{directives:[{name:`model`,rawName:`v-model`,value:e.autoRestartCelestialRuns,expression:`autoRestartCelestialRuns`}],staticClass:`o-clickable`,attrs:{id:`autoRestart`,type:`checkbox`},domProps:{value:e.autoRestartCelestialRuns,checked:Array.isArray(e.autoRestartCelestialRuns)?e._i(e.autoRestartCelestialRuns,e.autoRestartCelestialRuns)>-1:e.autoRestartCelestialRuns},on:{input:function(t){return e.toggleAutoRestartCelestial()},change:function(t){var n=e.autoRestartCelestialRuns,r=t.target,i=!!r.checked;if(Array.isArray(n)){var a=e.autoRestartCelestialRuns,o=e._i(n,a);r.checked?o<0&&(e.autoRestartCelestialRuns=n.concat([a])):o>-1&&(e.autoRestartCelestialRuns=n.slice(0,o).concat(n.slice(o+1)))}else e.autoRestartCelestialRuns=i}}}),t(`label`,{staticClass:`o-clickable`,attrs:{for:`autoRestart`}},[e._v(` Repeat this Celestial's Reality `)])]):e._e(),t(`br`),t(`RealityReminder`),e.showInstability?t(`div`,[t(`br`),e._v(` Glyphs are becoming unstable. `),t(`br`),e._v(` Glyph levels higher than `+e._s(e.formatInt(e.instabilityThreshold))+` are harder to reach. `),t(`br`),e._v(` This effect is even stronger above level `+e._s(e.formatInt(e.hyperInstabilityThreshold))+`. `)]):e._e(),t(`SingleGlyphCustomzationPanel`),t(`ExpandingControlBox`,{staticClass:`l-glyph-level-factors`,attrs:{"width-source":`content`,label:`Glyph Level Factors`,"container-class":`c-glyph-level-factors-dropdown-header`},scopedSlots:e._u([{key:`dropdown`,fn:function(){return[t(`GlyphLevelsAndWeights`)]},proxy:!0}])}),t(`GlyphTabSidebar`)],1),t(`div`,{staticClass:`l-player-glyphs-column`},[e.showEnslavedHint?t(`div`,{staticClass:`o-teresa-quotes`,domProps:{innerHTML:e._s(e.enslavedHint)}}):e._e(),t(`div`,{staticClass:`l-equipped-glyphs-and-effects-container`},[t(`EquippedGlyphs`),t(`div`,{staticClass:`l-glyph-info-wrapper`},[t(`span`,{staticClass:`l-glyph-color-box`,on:{click:e.toggleGlyphTextColors}},[t(`div`,{class:e.glyphColorPosition()},[t(`label`,{class:e.glyphColorState},[t(`span`,{staticClass:`fas fa-palette`})])])]),e.sacrificeUnlocked?t(`div`,{staticClass:`c-glyph-info-options`},[t(`button`,{class:e.glyphInfoClass(!e.sacrificeDisplayed),on:{click:function(t){return e.setInfoState(!1)}}},[e._v(` Current Glyph effects `)]),t(`button`,{class:e.glyphInfoClass(e.sacrificeDisplayed),on:{click:function(t){return e.setInfoState(!0)}}},[e._v(` Glyph Sacrifice totals `)])]):e._e(),e.sacrificeUnlocked&&e.sacrificeDisplayed?t(`SacrificedGlyphs`):t(`CurrentGlyphEffects`,{class:e.glyphInfoBorderClass()})],1)],1),t(`GlyphInventory`)],1)])])},[],!1,null,`527ebaef`,null,null).exports,hR={name:`ImaginaryUpgradeButton`,components:{PrimaryToggleButton:R,DescriptionDisplay:u,EffectDisplay:c,CostDisplay:pe,HintText:me},props:{upgrade:{type:Object,required:!0}},data(){return{isAvailableForPurchase:!1,canBeBought:!1,isRebuyable:!1,isBought:!1,isPossible:!1,isAutoUnlocked:!1,isAutobuyerOn:!1,etaText:``,canBeLocked:!1,hasRequirementLock:!1}},computed:{config(){return this.upgrade.config},classObject(){return{"c-reality-upgrade-btn--useless":this.upgrade.pelleDisabled,"c-reality-upgrade-btn--bought":this.isBought&&!this.upgrade.pelleDisabled,"c-reality-upgrade-btn--unavailable":!this.isBought&&!this.canBeBought&&this.isAvailableForPurchase,"c-reality-upgrade-btn--possible":!this.isAvailableForPurchase&&this.isPossible,"c-reality-upgrade-btn--locked":!this.isAvailableForPurchase&&!this.isPossible}},requirementConfig(){return{description:this.config.requirement}},canLock(){return this.config.canLock&&!(this.isAvailableForPurchase||this.isBought)},isDoomed:()=>Pelle.isDoomed},watch:{isAutobuyerOn(e){Autobuyer.imaginaryUpgrade(this.upgrade.id).isActive=e}},methods:{update(){let e=this.upgrade;this.isAvailableForPurchase=e.isAvailableForPurchase,this.canBeBought=e.canBeBought,this.isRebuyable=e.isRebuyable,this.isBought=!e.isRebuyable&&e.isBought,this.isPossible=e.isPossible,this.isAutoUnlocked=ImaginaryUpgrade(20).canBeApplied,this.canBeLocked=e.config.canLock&&!this.isAvailableForPurchase,this.hasRequirementLock=e.hasPlayerLock,this.isRebuyable&&(this.isAutobuyerOn=Autobuyer.imaginaryUpgrade(e.id).isActive),this.etaText=this.getETAText()},getETAText(){if(this.canBeBought||!this.isAvailableForPurchase||this.isBought||Pelle.isDoomed)return``;let e=MachineHandler.estimateIMTimer(this.upgrade.cost);return e.lt(`10^8000000000000`)?TimeSpan.fromSeconds(e).toString():`Never affordable`},toggleLock(e){this.isRebuyable||e.toggleMechanicLock()}}},gR={name:`ImaginaryUpgradesTab`,components:{ImaginaryUpgradeButton:D(hR,function(){var e=this,t=e._self._c;return t(`div`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:e.etaText,expression:`etaText`}],staticClass:`l-spoon-btn-group`},[t(`button`,{staticClass:`l-reality-upgrade-btn c-reality-upgrade-btn`,class:e.classObject,on:{click:[function(t){return!t.shiftKey||t.ctrlKey||t.altKey||t.metaKey?null:e.toggleLock(e.upgrade)},function(t){return t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:e.upgrade.purchase()}]}},[t(`HintText`,{staticClass:`l-hint-text--reality-upgrade c-hint-text--reality-upgrade`,attrs:{type:`realityUpgrades`}},[e._v(` `+e._s(e.config.name)+` `)]),t(`span`,{class:{"o-pelle-disabled":e.upgrade.pelleDisabled}},[t(`DescriptionDisplay`,{attrs:{config:e.config}}),e.$viewModel.shiftDown===e.isAvailableForPurchase&&!e.isRebuyable?[t(`br`),t(`DescriptionDisplay`,{staticClass:`c-reality-upgrade-btn__requirement`,attrs:{config:e.requirementConfig,label:`Requirement:`}})]:[t(`EffectDisplay`,{attrs:{config:e.config,br:``}}),e.isBought?e._e():t(`CostDisplay`,{attrs:{config:e.config,br:``,name:`Imaginary Machine`}})]],2)],1),e.canBeLocked?t(`div`,{staticClass:`o-requirement-lock`},[e.hasRequirementLock?t(`i`,{staticClass:`fas fa-lock`}):e.canLock?t(`i`,{staticClass:`fas fa-lock-open`}):e._e()]):e._e(),e.isRebuyable&&e.isAutoUnlocked?t(`PrimaryToggleButton`,{staticClass:`l--spoon-btn-group__little-spoon-reality-btn o-primary-btn--reality-upgrade-toggle`,attrs:{label:`Auto:`},model:{value:e.isAutobuyerOn,callback:function(t){e.isAutobuyerOn=t},expression:`isAutobuyerOn`}}):e._e()],1)},[],!1,null,`7486f174`,null,null).exports},data(){return{baseRMCap:new Decimal,capRM:new Decimal,scaleTime:new Decimal,capStr:``}},computed:{upgrades:()=>ImaginaryUpgrades.all,lockTooltip:()=>`Requirement locks only prevent manual and automated actions. Any related upgrades
      will not be disabled and may still cause requirements to be failed.`},methods:{update(){this.baseRMCap.copyFrom(MachineHandler.baseRMCap),this.capRM.copyFrom(MachineHandler.hardcapRM),this.scaleTime.copyFrom(MachineHandler.scaleTimeForIM),this.capStr=formatMachines(MachineHandler.hardcapRM,MachineHandler.currentIMCap)},id(e,t){return(e-1)*5+t-1}}},_R=D(gR,function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-reality-upgrade-grid`},[t(`div`,{staticClass:`c-cap-text`},[e._v(` Your Machine cap is `),t(`span`,{staticClass:`c-reality-tab__reality-machines`},[e._v(e._s(e.capStr))]),e._v(`. `)]),t(`div`,{staticClass:`c-info-text`},[e._v(` You have reached the limits of Reality and cannot hold more than `+e._s(e.format(e.capRM))+` Reality Machines. `),t(`br`),e._v(` Machines gained in excess of `+e._s(e.format(e.baseRMCap))+` will raise the maximum amount of Imaginary Machines you can have. `),t(`br`),e._v(` Imaginary Machines are gained passively over time up to the cap, but gain slows down exponentially as you approach the cap. `),t(`br`),e._v(` Every `+e._s(e.format(e.scaleTime,2,2))+` seconds the difference in iM between your current amount and the cap will be cut in half. `),t(`br`),t(`br`),e._v(` The first two rows of upgrades can be purchased endlessly and the rest of the upgrades are one-time upgrades with requirements. `),t(`br`),e._v(` Upgrades here have the same gameplay and visual behavior as Reality Upgrades, but cost Imaginary Machines instead. `),t(`span`,{attrs:{"ach-tooltip":e.lockTooltip}},[t(`i`,{staticClass:`fas fa-question-circle`})])]),e._l(5,function(n){return t(`div`,{key:n,staticClass:`l-reality-upgrade-grid__row`},e._l(5,function(r){return t(`ImaginaryUpgradeButton`,{key:e.id(n,r),attrs:{upgrade:e.upgrades[e.id(n,r)]}})}),1)})],2)},[],!1,null,`5bd39ee1`,null,null).exports,vR={name:`InfinityChallengeBox`,components:{ChallengeBox:ve,DescriptionDisplay:u,EffectDisplay:c},props:{challenge:{type:Object,required:!0}},data(){return{isUnlocked:!1,isRunning:!1,isCompleted:!1}},computed:{config(){return this.challenge.config},name(){return`IC${this.challenge.id}`}},methods:{update(){let e=this.challenge;this.isUnlocked=e.isUnlocked,this.isRunning=e.isRunning,this.isCompleted=e.isCompleted}}},yR=D(vR,function(){var e=this,t=e._self._c;return t(`ChallengeBox`,{staticClass:`c-challenge-box--infinity`,attrs:{name:e.name,"is-unlocked":e.isUnlocked,"is-running":e.isRunning,"is-completed":e.isCompleted},on:{start:function(t){return e.challenge.requestStart()}},scopedSlots:e._u([{key:`top`,fn:function(){return[t(`DescriptionDisplay`,{attrs:{config:e.config}}),e.isRunning?t(`EffectDisplay`,{attrs:{config:e.config}}):e._e()]},proxy:!0},{key:`bottom`,fn:function(){return[t(`div`,{staticClass:`l-challenge-box__bottom--infinity`},[t(`span`,[e._v(`Goal: `+e._s(e.format(e.config.goal))+` antimatter`)]),t(`DescriptionDisplay`,{attrs:{config:e.config.reward,title:`Reward:`}}),t(`EffectDisplay`,{attrs:{config:e.config.reward}})],1)]},proxy:!0}])})},[],!1,null,`1eb77628`,null,null).exports,bR=D({name:`InfinityChallengesTab`,components:{ChallengeGrid:_e,ChallengeTabHeader:ge,InfinityChallengeBox:yR},data(){return{nextIC:0,showAllChallenges:!1}},computed:{challenges(){return InfinityChallenges.all},nextAtDisplay(){let e=this.nextIC?.id===1,t=InfinityChallenges.nextICUnlockAM;return e?`The first Infinity Challenge unlocks at ${format(t)} antimatter.`:t===void 0?`All Infinity Challenges unlocked`:`Next Infinity Challenge unlocks at ${format(t)} antimatter.`}},methods:{update(){this.nextIC=InfinityChallenges.nextIC,this.showAllChallenges=player.options.showAllChallenges},isChallengeVisible(e){return e.isUnlocked||this.showAllChallenges&&PlayerProgress.eternityUnlocked()}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-challenges-tab`},[t(`ChallengeTabHeader`),t(`div`,[e._v(` An active Big Crunch Autobuyer will Crunch immediately when reaching an Infinity Challenge's antimatter goal, regardless of settings. `)]),t(`div`,[e._v(e._s(e.nextAtDisplay))]),t(`ChallengeGrid`,{attrs:{challenges:e.challenges,"is-challenge-visible":e.isChallengeVisible},scopedSlots:e._u([{key:`default`,fn:function({challenge:e}){return[t(`InfinityChallengeBox`,{attrs:{challenge:e}})]}}])})],1)},[],!1,null,`cbd57f8d`,null,null).exports,xR={name:`ClassicInfinityDimensionRow`,components:{GenericDimensionRowText:he,PrimaryButton:L,PrimaryToggleButton:R},props:{tier:{type:Number,required:!0}},data(){return{hasPrevTier:!1,isUnlocked:!1,canUnlock:!1,multiplier:new Decimal(0),baseAmount:new Decimal(0),amount:new Decimal(0),purchases:new Decimal(0),rateOfChange:new Decimal(0),isAutobuyerUnlocked:!1,cost:new Decimal(0),isAvailableForPurchase:!1,isCapped:!1,capIP:new Decimal(0),isAutobuyerOn:!1,isEC8Running:!1,hardcap:new Decimal(0),eternityReached:!1,enslavedRunning:!1}},computed:{shiftDown(){return ui.view.shiftDown},name(){return`${InfinityDimension(this.tier).shortDisplayName} Infinity Dimension`},costDisplay(){return this.isUnlocked||this.shiftDown?this.isCapped?`Capped`:this.showCostTitle?`Cost: ${format(this.cost)} IP`:`${format(this.cost)} IP`:this.canUnlock?`Unlock`:`Reach ${formatPostBreak(InfinityDimension(this.tier).amRequirement)} AM`},hasLongText(){return this.costDisplay.length>20},hardcapPurchases(){return format(this.hardcap,1,1)},capTooltip(){return this.enslavedRunning?`Nameless prevents the purchase of more than ${format(10)} Infinity Dimensions`:this.isCapped?`Cap reached at ${format(this.capIP)} IP`:`Purchased ${quantifyInt(`time`,this.purchases)}`},showRow(){return this.eternityReached||this.isUnlocked||this.canUnlock||this.amount.gt(0)||this.hasPrevTier},showCostTitle(){return this.cost.max(1).log10().lte(1e6)}},watch:{isAutobuyerOn(e){Autobuyer.infinityDimension(this.tier).isActive=e}},methods:{update(){let e=this.tier,t=InfinityDimension(e);this.hasPrevTier=e===1||InfinityDimension(e-1).isUnlocked;let n=Autobuyer.infinityDimension(e);this.isUnlocked=t.isUnlocked,this.canUnlock=t.canUnlock,this.multiplier.copyFrom(t.multiplier),this.baseAmount.copyFrom(t.baseAmount),this.purchases.copyFrom(t.purchases),this.amount.copyFrom(t.amount),this.rateOfChange.copyFrom(t.rateOfChange),this.isAutobuyerUnlocked=n.isUnlocked,this.cost.copyFrom(t.cost),this.isAvailableForPurchase=t.isAvailableForPurchase,this.isCapped=t.isCapped,this.isCapped&&(this.capIP.copyFrom(t.hardcapIPAmount),this.hardcap.copyFrom(t.purchaseCap)),this.isEC8Running=EternityChallenge(8).isRunning,this.isAutobuyerOn=n.isActive,this.eternityReached=PlayerProgress.eternityUnlocked(),this.enslavedRunning=Enslaved.isRunning},buySingleInfinityDimension(){InfinityDimension(this.tier).buySingle()},buyMaxInfinityDimension(){InfinityDimension(this.tier).buyMax(!1)}}},SR=D(xR,function(){var e=this,t=e._self._c;return t(`div`,{directives:[{name:`show`,rawName:`v-show`,value:e.showRow,expression:`showRow`}],staticClass:`c-dimension-row l-dimension-single-row`,class:{"c-dim-row--not-reached":!e.isUnlocked&&!e.canUnlock}},[t(`GenericDimensionRowText`,{attrs:{tier:e.tier,name:e.name,"multiplier-text":e.formatX(e.multiplier,2,1),amount:e.amount,rate:e.rateOfChange}}),t(`div`,{staticClass:`l-dim-row-multi-button-container`},[t(`PrimaryButton`,{staticClass:`o-primary-btn--buy-id o-primary-btn--buy-dim c-dim-tooltip-container`,class:{"l-dim-row-small-text":e.hasLongText},attrs:{enabled:e.isAvailableForPurchase||!e.isUnlocked&&e.canUnlock},on:{click:e.buySingleInfinityDimension}},[e._v(` `+e._s(e.costDisplay)+` `),t(`div`,{staticClass:`c-dim-purchase-count-tooltip`},[e._v(` `+e._s(e.capTooltip)+` `)])]),e.isAutobuyerUnlocked&&!e.isEC8Running?t(`PrimaryToggleButton`,{staticClass:`o-primary-btn--id-auto`,attrs:{label:`Auto:`},model:{value:e.isAutobuyerOn,callback:function(t){e.isAutobuyerOn=t},expression:`isAutobuyerOn`}}):t(`PrimaryButton`,{staticClass:`o-primary-btn--id-auto`,attrs:{enabled:e.isAvailableForPurchase&&e.isUnlocked},on:{click:e.buyMaxInfinityDimension}},[e._v(` Buy Max `)])],1)],1)},[],!1,null,null,null,null).exports,CR=D({name:`ClassicInfinityDimensionsTab`,components:{PrimaryButton:L,InfinityDimensionRow:SR},data(){return{infinityPower:new Decimal(0),dimMultiplier:new Decimal(0),powerPerSecond:new Decimal(0),incomeType:``,isEC8Running:!1,EC8PurchasesLeft:0,isEC9Running:!1,isEnslavedRunning:!1,isAnyAutobuyerUnlocked:!1,conversionRate:new Decimal(0),nextDimCapIncrease:new Decimal(0),tesseractCost:new Decimal(0),totalDimCap:new Decimal(0),canBuyTesseract:!1,enslavedCompleted:!1,boughtTesseracts:new Decimal(0),extraTesseracts:new Decimal(0),creditsClosed:!1,showLockedDimCostNote:!0,convSoftcapStart:new Decimal(0),convSoftcapEffect:new Decimal(0)}},computed:{tesseractCountString(){let e=this.extraTesseracts.gt(0)?` + ${format(this.extraTesseracts,2,2)}`:``;return`${format(this.boughtTesseracts)}${e}`}},methods:{update(){this.showLockedDimCostNote=!InfinityDimension(8).isUnlocked,this.isEC9Running=EternityChallenge(9).isRunning,this.infinityPower.copyFrom(Currency.infinityPower),this.conversionRate.copyFrom(InfinityDimensions.powerConversionRate),this.isEC9Running?this.dimMultiplier.copyFrom(Decimal.pow(Decimal.max(this.infinityPower.log2(),1),4).max(1)):this.dimMultiplier.copyFrom(this.infinityPower.pow(this.conversionRate).max(1)),this.powerPerSecond.copyFrom(InfinityDimension(1).productionPerRealSecond),this.incomeType=EternityChallenge(7).isRunning?`Seventh Dimensions`:`Infinity Power`,this.isEC8Running=EternityChallenge(8).isRunning,this.isEC8Running&&(this.EC8PurchasesLeft=player.eterc8ids),this.isEnslavedRunning=Enslaved.isRunning,this.isAnyAutobuyerUnlocked=Autobuyer.infinityDimension(1).isUnlocked,this.nextDimCapIncrease.copyFrom(Tesseracts.nextTesseractIncrease),this.tesseractCost.copyFrom(Tesseracts.nextCost),this.totalDimCap.copyFrom(InfinityDimensions.totalDimCap),this.canBuyTesseract=Tesseracts.canBuyTesseract,this.enslavedCompleted=Enslaved.isCompleted,this.boughtTesseracts.copyFrom(Tesseracts.bought),this.extraTesseracts.copyFrom(Tesseracts.extra),this.creditsClosed=GameEnd.creditsEverClosed,this.convSoftcapEffect.copyFrom(InfinityDimensions.convSoftcapEffect),this.convSoftcapStart.copyFrom(InfinityDimensions.convSoftcapStart)},maxAll(){InfinityDimensions.buyMax()},toggleAllAutobuyers(){toggleAllInfDims()},buyTesseract(){Tesseracts.buyTesseract()}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-infinity-dim-tab`},[t(`div`,{staticClass:`c-subtab-option-container`},[e.isEC8Running?e._e():t(`PrimaryButton`,{staticClass:`o-primary-btn--subtab-option`,on:{click:e.maxAll}},[e._v(` Max all `)]),e.isAnyAutobuyerUnlocked&&!e.isEC8Running?t(`PrimaryButton`,{staticClass:`o-primary-btn--subtab-option`,on:{click:e.toggleAllAutobuyers}},[e._v(` Toggle all autobuyers `)]):e._e()],1),t(`div`,[t(`p`,[e._v(` You have `),t(`span`,{staticClass:`c-infinity-dim-description__accent`},[e._v(e._s(e.format(e.infinityPower,2,1)))]),e._v(` Infinity Power, `),t(`br`),e.isEC9Running?t(`span`,[e._v(` translated `)]):t(`span`,[e._v(` increased by `),t(`span`,{staticClass:`c-infinity-dim-description__accent`},[e._v(e._s(e.formatPow(e.conversionRate,2,3)))])]),e._v(` to a `),t(`span`,{staticClass:`c-infinity-dim-description__accent`},[e._v(e._s(e.formatX(e.dimMultiplier,2,1)))]),e._v(` multiplier on all `),e.isEC9Running?t(`span`,[e._v(`Time Dimensions due to Eternity Challenge 9.`)]):t(`span`,[e._v(`Antimatter Dimensions.`)])])]),e.enslavedCompleted?t(`div`,{staticClass:`l-infinity-dim-tab__enslaved-reward-container`},[t(`button`,{staticClass:`c-infinity-dim-tab__tesseract-button`,class:{"c-infinity-dim-tab__tesseract-button--disabled":!e.canBuyTesseract,"o-pelle-disabled-pointer":e.creditsClosed},on:{click:e.buyTesseract}},[t(`p`,[e._v(` Buy a Tesseract (`+e._s(e.tesseractCountString)+`) `)]),t(`p`,[e._v(`Increase Infinity Dimension caps by `+e._s(e.format(e.nextDimCapIncrease,2)))]),t(`p`,[t(`b`,[e._v(`Costs: `+e._s(e.format(e.tesseractCost))+` IP`)])])])]):e._e(),e.isEnslavedRunning?t(`div`,[e._v(` All Infinity Dimensions are limited to a single purchase. `)]):t(`div`,[e._v(` All Infinity Dimensions except for the 8th are limited to a maximum of `+e._s(e.format(e.totalDimCap,2))+` purchases each. `)]),e.infinityPower.gte(e.convSoftcapStart)?t(`div`,[e._v(` Your Infinity Power conversion rate is being decreased by /`+e._s(e.format(e.convSoftcapEffect,2,1))+` after `+e._s(e.format(e.convSoftcapStart,2,2))+` Infinity Power. `)]):e._e(),t(`div`,[e._v(`You are getting `+e._s(e.format(e.powerPerSecond,2,0))+` `+e._s(e.incomeType)+` per second.`)]),e.isEC8Running?t(`b`,{staticClass:`l-infinity-dim-tab__ec8-purchases`},[e._v(` You have `+e._s(e.quantifyInt(`purchase`,e.EC8PurchasesLeft))+` left within Eternity Challenge 8. `)]):e._e(),t(`div`,{staticClass:`l-dimensions-container`},e._l(8,function(e){return t(`InfinityDimensionRow`,{key:e,attrs:{tier:e}})}),1),e.showLockedDimCostNote?t(`div`,[e._v(` Hold shift to see the Infinity Point cost for locked Infinity Dimensions. `)]):e._e()])},[],!1,null,null,null,null).exports,wR={name:`ModernInfinityDimensionRow`,components:{GenericDimensionRowText:he,PrimaryButton:L,PrimaryToggleButton:R},props:{tier:{type:Number,required:!0}},data(){return{hasPrevTier:!1,isUnlocked:!1,canUnlock:!1,multiplier:new Decimal(0),baseAmount:new Decimal(0),amount:new Decimal(0),purchases:new Decimal(0),rateOfChange:new Decimal(0),isAutobuyerUnlocked:!1,cost:new Decimal(0),isAvailableForPurchase:!1,isCapped:!1,capIP:new Decimal(0),isAutobuyerOn:!1,isEC8Running:!1,hardcap:new Decimal(0),eternityReached:!1,enslavedRunning:!1}},computed:{shiftDown(){return ui.view.shiftDown},name(){return`${InfinityDimension(this.tier).shortDisplayName} Infinity Dimension`},costDisplay(){return this.isUnlocked||this.shiftDown?this.isCapped?`Capped`:this.showCostTitle?`Cost: ${format(this.cost)} IP`:`${format(this.cost)} IP`:this.canUnlock?`Unlock`:`Reach ${formatPostBreak(InfinityDimension(this.tier).amRequirement)} AM`},hasLongText(){return this.costDisplay.length>20},capTooltip(){return this.enslavedRunning?`Nameless prevents the purchase of more than ${format(10)} Infinity Dimensions`:this.isCapped?`Cap reached at ${format(this.capIP)} IP`:`Purchased ${quantifyInt(`time`,this.purchases)}`},showRow(){return this.eternityReached||this.isUnlocked||this.canUnlock||this.amount.gt(0)||this.hasPrevTier},showCostTitle(){return this.cost.max(1).log10().lte(1e6)}},watch:{isAutobuyerOn(e){Autobuyer.infinityDimension(this.tier).isActive=e}},methods:{update(){let e=this.tier,t=InfinityDimension(e);this.hasPrevTier=e===1||InfinityDimension(e-1).isUnlocked,this.isUnlocked=t.isUnlocked,this.canUnlock=t.canUnlock,this.multiplier.copyFrom(t.multiplier),this.baseAmount.copyFrom(t.baseAmount),this.purchases.copyFrom(t.purchases),this.amount.copyFrom(t.amount),this.rateOfChange.copyFrom(t.rateOfChange),this.isAutobuyerUnlocked=Autobuyer.infinityDimension(e).isUnlocked,this.cost.copyFrom(t.cost),this.isAvailableForPurchase=t.isAvailableForPurchase,this.isCapped=t.isCapped,this.isCapped&&(this.capIP.copyFrom(t.hardcapIPAmount),this.hardcap.copyFrom(t.purchaseCap)),this.isEC8Running=EternityChallenge(8).isRunning,this.isAutobuyerOn=Autobuyer.infinityDimension(e).isActive,this.eternityReached=PlayerProgress.eternityUnlocked(),this.enslavedRunning=Enslaved.isRunning},buySingleInfinityDimension(){InfinityDimension(this.tier).buySingle()},buyMaxInfinityDimension(){InfinityDimension(this.tier).buyMax(!1)}}},TR=D(wR,function(){var e=this,t=e._self._c;return t(`div`,{directives:[{name:`show`,rawName:`v-show`,value:e.showRow,expression:`showRow`}],staticClass:`c-dimension-row l-dimension-row-infinity-dim l-dimension-single-row`,class:{"c-dim-row--not-reached":!e.isUnlocked&&!e.canUnlock}},[t(`GenericDimensionRowText`,{attrs:{tier:e.tier,name:e.name,"multiplier-text":e.formatX(e.multiplier,2,1),amount:e.amount,rate:e.rateOfChange}}),t(`div`,{staticClass:`l-dim-row-multi-button-container c-modern-dim-tooltip-container`},[t(`div`,{staticClass:`c-modern-dim-purchase-count-tooltip`},[e._v(` `+e._s(e.capTooltip)+` `)]),t(`PrimaryButton`,{staticClass:`o-primary-btn--buy-id o-primary-btn o-primary-btn--new o-primary-btn--buy-dim`,class:{"l-dim-row-small-text":e.hasLongText},attrs:{enabled:e.isAvailableForPurchase||!e.isUnlocked&&e.canUnlock},on:{click:e.buySingleInfinityDimension}},[e._v(` `+e._s(e.costDisplay)+` `)]),e.isAutobuyerUnlocked&&!e.isEC8Running?t(`PrimaryToggleButton`,{staticClass:`o-primary-btn--id-auto`,attrs:{label:`Auto:`},model:{value:e.isAutobuyerOn,callback:function(t){e.isAutobuyerOn=t},expression:`isAutobuyerOn`}}):t(`PrimaryButton`,{staticClass:`o-primary-btn--id-auto`,attrs:{enabled:e.isAvailableForPurchase},on:{click:e.buyMaxInfinityDimension}},[e._v(` Buy Max `)])],1)],1)},[],!1,null,`e618b1da`,null,null).exports,ER=D({name:`ModernInfinityDimensionsTab`,components:{PrimaryButton:L,InfinityDimensionRow:TR},data(){return{infinityPower:new Decimal(0),dimMultiplier:new Decimal(0),powerPerSecond:new Decimal(0),incomeType:``,isEC8Running:!1,EC8PurchasesLeft:0,isEC9Running:!1,isEnslavedRunning:!1,isAnyAutobuyerUnlocked:!1,conversionRate:new Decimal(0),nextDimCapIncrease:new Decimal(0),tesseractCost:new Decimal(0),totalDimCap:new Decimal(0),canBuyTesseract:!1,enslavedCompleted:!1,boughtTesseracts:new Decimal(0),extraTesseracts:new Decimal(0),creditsClosed:!1,showLockedDimCostNote:!0,convSoftcapStart:new Decimal(0),convSoftcapEffect:new Decimal(0)}},computed:{tesseractCountString(){let e=this.extraTesseracts.gt(0)?` + ${format(this.extraTesseracts,2,2)}`:``;return`${formatInt(this.boughtTesseracts)}${e}`}},methods:{update(){this.showLockedDimCostNote=!InfinityDimension(8).isUnlocked,this.isEC9Running=EternityChallenge(9).isRunning,this.infinityPower.copyFrom(Currency.infinityPower),this.conversionRate.copyFrom(InfinityDimensions.powerConversionRate),this.isEC9Running?this.dimMultiplier.copyFrom(Decimal.pow(Decimal.max(this.infinityPower.log2(),1),4).max(1)):this.dimMultiplier.copyFrom(this.infinityPower.pow(this.conversionRate).max(1)),this.powerPerSecond.copyFrom(InfinityDimension(1).productionPerSecond),this.incomeType=EternityChallenge(7).isRunning?`Seventh Dimensions`:`Infinity Power`,this.isEC8Running=EternityChallenge(8).isRunning,this.isEC8Running&&(this.EC8PurchasesLeft=player.eterc8ids),this.isEnslavedRunning=Enslaved.isRunning,this.isAnyAutobuyerUnlocked=Autobuyer.infinityDimension(1).isUnlocked,this.nextDimCapIncrease.copyFrom(Tesseracts.nextTesseractIncrease),this.tesseractCost.copyFrom(Tesseracts.nextCost),this.totalDimCap.copyFrom(InfinityDimensions.totalDimCap),this.canBuyTesseract=Tesseracts.canBuyTesseract,this.enslavedCompleted=Enslaved.isCompleted,this.boughtTesseracts.copyFrom(Tesseracts.bought),this.extraTesseracts.copyFrom(Tesseracts.extra),this.creditsClosed=GameEnd.creditsEverClosed,this.convSoftcapEffect.copyFrom(InfinityDimensions.convSoftcapEffect),this.convSoftcapStart.copyFrom(InfinityDimensions.convSoftcapStart)},maxAll(){InfinityDimensions.buyMax()},toggleAllAutobuyers(){toggleAllInfDims()},buyTesseract(){Tesseracts.buyTesseract()}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-infinity-dim-tab`},[t(`div`,{staticClass:`c-subtab-option-container`},[e.isEC8Running?e._e():t(`PrimaryButton`,{staticClass:`o-primary-btn--subtab-option`,on:{click:e.maxAll}},[e._v(` Max all `)]),e.isAnyAutobuyerUnlocked&&!e.isEC8Running?t(`PrimaryButton`,{staticClass:`o-primary-btn--subtab-option`,on:{click:e.toggleAllAutobuyers}},[e._v(` Toggle all autobuyers `)]):e._e()],1),t(`div`,[t(`p`,[e._v(` You have `),t(`span`,{staticClass:`c-infinity-dim-description__accent`},[e._v(e._s(e.format(e.infinityPower,2,1)))]),e._v(` Infinity Power, `),t(`br`),e.isEC9Running?t(`span`,[e._v(` translated `)]):t(`span`,[e._v(` increased by `),t(`span`,{staticClass:`c-infinity-dim-description__accent`},[e._v(e._s(e.formatPow(e.conversionRate,2,3)))])]),e._v(` to a `),t(`span`,{staticClass:`c-infinity-dim-description__accent`},[e._v(e._s(e.formatX(e.dimMultiplier,2,1)))]),e._v(` multiplier on all `),e.isEC9Running?t(`span`,[e._v(`Time Dimensions due to Eternity Challenge 9.`)]):t(`span`,[e._v(`Antimatter Dimensions.`)])])]),e.enslavedCompleted?t(`div`,{staticClass:`l-infinity-dim-tab__enslaved-reward-container`},[t(`button`,{staticClass:`c-infinity-dim-tab__tesseract-button`,class:{"c-infinity-dim-tab__tesseract-button--disabled":!e.canBuyTesseract,"o-pelle-disabled-pointer":e.creditsClosed},on:{click:e.buyTesseract}},[t(`p`,[e._v(` Buy a Tesseract (`+e._s(e.tesseractCountString)+`) `)]),t(`p`,[e._v(`Increase dimension caps by `+e._s(e.format(e.nextDimCapIncrease,2)))]),t(`p`,[t(`b`,[e._v(`Costs: `+e._s(e.format(e.tesseractCost))+` IP`)])])])]):e._e(),e.isEnslavedRunning?t(`div`,[e._v(` All Infinity Dimensions are limited to a single purchase. `)]):t(`div`,[e._v(` All Infinity Dimensions except for the 8th are limited to a maximum of `+e._s(e.format(e.totalDimCap,2))+` purchases each. `)]),e.infinityPower.gte(e.convSoftcapStart)?t(`div`,[e._v(` Your Infinity Power conversion rate is being decreased by /`+e._s(e.format(e.convSoftcapEffect,2,1))+` after `+e._s(e.format(e.convSoftcapStart,2,2))+` Infinity Power. `)]):e._e(),t(`div`,[e._v(`You are getting `+e._s(e.format(e.powerPerSecond,2,0))+` `+e._s(e.incomeType)+` per second.`)]),e.isEC8Running?t(`b`,{staticClass:`l-infinity-dim-tab__ec8-purchases`},[e._v(` You have `+e._s(e.quantifyInt(`purchase`,e.EC8PurchasesLeft))+` left within Eternity Challenge 8. `)]):e._e(),t(`div`,{staticClass:`l-dimensions-container`},e._l(8,function(e){return t(`InfinityDimensionRow`,{key:e,attrs:{tier:e}})}),1),e.showLockedDimCostNote?t(`div`,[e._v(` Hold shift to see the Infinity Point cost for locked Infinity Dimensions. `)]):e._e()])},[],!1,null,null,null,null).exports,DR=D({name:`InfinityDimensionsTab`,components:{ClassicInfinityDimensionsTab:CR,ModernInfinityDimensionsTab:ER},computed:{activeComponent(){return this.$viewModel.newUI?`ModernInfinityDimensionsTab`:`ClassicInfinityDimensionsTab`}}},function(){var e=this,t=e._self._c;return t(e.activeComponent,{tag:`component`})},[],!1,null,null,null,null).exports,OR=D({name:`IpMultiplierButton`,components:{PrimaryButton:L,PrimaryToggleButton:R,InfinityUpgradeButton:BI},data(){return{isAutobuyerActive:!1,isAutoUnlocked:!1,isCapped:!1}},computed:{upgrade(){return InfinityUpgrade.ipMult}},watch:{isAutobuyerActive(e){Autobuyer.ipMult.isActive=e}},methods:{update(){this.isAutoUnlocked=Autobuyer.ipMult.isUnlocked,this.isAutobuyerActive=Autobuyer.ipMult.isActive,this.isCapped=this.upgrade.isCapped},buyMaxIPMult(){InfinityUpgrade.ipMult.buyMax()}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-spoon-btn-group`},[t(`InfinityUpgradeButton`,{staticClass:`o-infinity-upgrade-btn--multiplier`,attrs:{upgrade:e.upgrade}},[e.isCapped?[t(`br`),t(`span`,[e._v(`(Capped at `+e._s(e.quantify(`Infinity Point`,e.upgrade.config.costCap))+`)`)])]:e._e()],2),t(`PrimaryButton`,{staticClass:`l--spoon-btn-group__little-spoon o-primary-btn--small-spoon`,on:{click:function(t){return e.buyMaxIPMult()}}},[e._v(` Max Infinity Point mult `)]),e.isAutoUnlocked?t(`PrimaryToggleButton`,{staticClass:`l--spoon-btn-group__little-spoon o-primary-btn--small-spoon`,attrs:{label:`Autobuy IP mult`},model:{value:e.isAutobuyerActive,callback:function(t){e.isAutobuyerActive=t},expression:`isAutobuyerActive`}}):e._e()],1)},[],!1,null,`e2ecd739`,null,null).exports,kR=D({name:`InfinityUpgradesTab`,components:{PrimaryButton:L,InfinityUpgradeButton:BI,IpMultiplierButton:OR},data(){return{isUseless:!1,chargeUnlocked:!1,totalCharges:0,chargesUsed:0,disCharge:!1,ipMultSoftCap:0,ipMultHardCap:0,eternityUnlocked:!1,bottomRowUnlocked:!1,styleOfColumnBg:void 0}},computed:{grid(){return[[InfinityUpgrade.totalTimeMult,InfinityUpgrade.dim18mult,InfinityUpgrade.dim36mult,InfinityUpgrade.resetBoost],[InfinityUpgrade.buy10Mult,InfinityUpgrade.dim27mult,InfinityUpgrade.dim45mult,InfinityUpgrade.galaxyBoost],[InfinityUpgrade.thisInfinityTimeMult,InfinityUpgrade.unspentIPMult,InfinityUpgrade.dimboostMult,InfinityUpgrade.ipGen],[InfinityUpgrade.skipReset1,InfinityUpgrade.skipReset2,InfinityUpgrade.skipReset3,InfinityUpgrade.skipResetGalaxy]]},allColumnUpgrades(){return this.grid.flat()},disChargeClassObject(){return{"o-primary-btn--subtab-option":!0,"o-primary-btn--charged-respec-active":this.disCharge}},offlineIpUpgrade:()=>InfinityUpgrade.ipOffline},watch:{disCharge(e){player.celestials.ra.disCharge=e}},created(){this.on$(GAME_EVENT.INFINITY_UPGRADE_BOUGHT,()=>this.setStyleOfColumnBg()),this.on$(GAME_EVENT.INFINITY_UPGRADE_CHARGED,()=>this.setStyleOfColumnBg()),this.on$(GAME_EVENT.INFINITY_UPGRADES_DISCHARGED,()=>this.setStyleOfColumnBg()),this.setStyleOfColumnBg()},methods:{update(){this.isUseless=Pelle.isDoomed,this.chargeUnlocked=Ra.unlocks.chargedInfinityUpgrades.canBeApplied&&!Pelle.isDoomed,this.totalCharges=Ra.totalCharges,this.chargesUsed=Ra.totalCharges-Ra.chargesLeft,this.disCharge=player.celestials.ra.disCharge,this.ipMultSoftCap=GameDatabase.infinity.upgrades.ipMult.costIncreaseThreshold,this.ipMultHardCap=GameDatabase.infinity.upgrades.ipMult.costCap,this.eternityUnlocked=PlayerProgress.current.isEternityUnlocked,this.bottomRowUnlocked=Achievement(41).isUnlocked,this.uncappedIPMult=MasteryStudy(11).isBought},btnClassObject(e){let t={"l-infinity-upgrade-grid__cell":!0};return e>0&&(t[`o-infinity-upgrade-btn--color-${e+1}`]=!0),t},getColumnColor(e){return e.isCharged?`var(--color-teresa--base)`:e.isBought?`var(--color-infinity)`:`transparent`},setStyleOfColumnBg(){this.styleOfColumnBg=this.grid.map(e=>({background:`linear-gradient(to bottom,
          ${this.getColumnColor(e[0])} 15%,
          ${this.getColumnColor(e[1])} 35% 40%,
          ${this.getColumnColor(e[2])} 60% 65%,
          ${this.getColumnColor(e[3])} 85% 100%`}))}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-infinity-upgrades-tab`},[e.chargeUnlocked?t(`div`,{staticClass:`c-subtab-option-container`},[t(`PrimaryButton`,{class:e.disChargeClassObject,on:{click:function(t){e.disCharge=!e.disCharge}}},[e._v(` Respec Charged Infinity Upgrades on next Reality `)])],1):e._e(),e.chargeUnlocked?t(`div`,[e._v(` You have charged `+e._s(e.formatInt(e.chargesUsed))+`/`+e._s(e.formatInt(e.totalCharges))+` Infinity Upgrades. Charged Infinity Upgrades have their effect altered. `),t(`br`),e._v(` Hold shift to show Charged Infinity Upgrades. You can freely respec your choices on Reality. `)]):e._e(),e.isUseless?t(`div`,[e._v(` You cannot Charge Infinity Upgrades while Doomed. `)]):e._e(),t(`br`),e._v(` Within each column, the upgrades must be purchased from top to bottom. `),t(`br`),t(`div`,{staticClass:`l-infinity-upgrade-grid l-infinity-upgrades-tab__grid`},e._l(e.grid,function(n,r){return t(`div`,{key:r,staticClass:`c-infinity-upgrade-grid__column`},[e._l(n,function(n){return t(`InfinityUpgradeButton`,{key:n.id,class:e.btnClassObject(r),attrs:{upgrade:n}})}),t(`div`,{staticClass:`c-infinity-upgrade-grid__column--background`,style:e.styleOfColumnBg[r]})],2)}),0),e.bottomRowUnlocked?t(`div`,{staticClass:`l-infinity-upgrades-bottom-row`},[t(`IpMultiplierButton`,{staticClass:`l-infinity-upgrades-tab__mult-btn`}),t(`InfinityUpgradeButton`,{class:e.btnClassObject(1),attrs:{upgrade:e.offlineIpUpgrade}})],1):e._e(),e.eternityUnlocked&&e.bottomRowUnlocked?t(`div`,[e.uncappedIPMult?[e._v(` The Infinity Point multiplier upgrade becomes more expensive above `+e._s(e.formatPostBreak(e.ipMultSoftCap))+` Infinity Points. `)]:[e._v(` The Infinity Point multiplier becomes more expensive `),t(`br`),e._v(` above `+e._s(e.formatPostBreak(e.ipMultSoftCap))+` Infinity Points, and cannot be purchased past `+e._s(e.formatPostBreak(e.ipMultHardCap))+` Infinity Points. `)]],2):e._e()])},[],!1,null,`73a44393`,null,null).exports,AR=D({name:`AnnihilationButton`,data(){return{darkMatter:new Decimal(0),darkMatterMult:new Decimal,darkMatterMultGain:new Decimal,autobuyerUnlocked:!1,annihilationButtonVisible:!1,matterRequirement:0,darkMatterMultRatio:0,autoAnnihilationInput:new Decimal,isEnabled:!0}},computed:{annihilationInputStyle(){return{"background-color":this.isEnabled?``:`var(--color-bad)`}}},methods:{update(){this.darkMatter.copyFrom(Currency.darkMatter),this.darkMatterMult.copyFrom(Laitela.darkMatterMult),this.darkMatterMultGain.copyFrom(Laitela.darkMatterMultGain),this.autobuyerUnlocked=Autobuyer.annihilation.isUnlocked,this.annihilationButtonVisible=Laitela.canAnnihilate||this.autobuyerUnlocked,this.matterRequirement=Laitela.annihilationDMRequirement,this.darkMatterMultRatio=Laitela.darkMatterMultRatio,this.isEnabled=player.auto.annihilation.isActive},annihilate(){Laitela.annihilate()},handleAutoAnnihilationInputChange(){let e=new Decimal(this.autoAnnihilationInput);e.isNan()?this.autoAnnihilationInput.copyFrom(player.auto.annihilation.multiplier):player.auto.annihilation.multiplier=e}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-laitela-annihilation-container`},[e.darkMatter.lt(e.matterRequirement)?t(`button`,{staticClass:`l-laitela-annihilation-button`},[e._v(` Annihilation requires `+e._s(e.format(e.matterRequirement,2))+` Dark Matter `)]):t(`button`,{staticClass:`l-laitela-annihilation-button c-laitela-annihilation-button`,on:{click:e.annihilate}},[t(`b`,[e._v(`Annihilate your Dark Matter Dimensions`)])]),t(`br`),t(`br`),e.darkMatterMult.gt(1)?t(`span`,[e._v(` Current multiplier to all Dark Matter Dimensions: `),t(`b`,[e._v(e._s(e.formatX(e.darkMatterMult,2,2)))]),t(`br`),t(`br`),e._v(` Annihilation will reset your Dark Matter and Dark Matter Dimension amounts, but also add `),t(`b`,[e._v(`+`+e._s(e.format(e.darkMatterMultGain,2,2)))]),e._v(` to your Annihilation multiplier. `),t(`br`),e._v(` (`),t(`b`,[e._v(e._s(e.formatX(e.darkMatterMultRatio,2,2)))]),e._v(` from previous multiplier) `),e.autobuyerUnlocked?t(`span`,[t(`br`),t(`br`),e._v(` Auto-Annihilate when adding `),t(`input`,{directives:[{name:`model`,rawName:`v-model`,value:e.autoAnnihilationInput,expression:`autoAnnihilationInput`}],staticClass:`c-small-autobuyer-input c-laitela-annihilation-input`,style:e.annihilationInputStyle,attrs:{type:`text`},domProps:{value:e.autoAnnihilationInput},on:{change:function(t){return e.handleAutoAnnihilationInputChange()},input:function(t){t.target.composing||(e.autoAnnihilationInput=t.target.value)}}}),e._v(` to the multiplier. `)]):e._e()]):t(`span`,[e._v(` Annihilation will reset your Dark Matter and Dark Matter Dimension amounts, but will give a permanent multiplier of `),t(`b`,[e._v(e._s(e.formatX(e.darkMatterMultGain.add(1),2,2)))]),e._v(` to all Dark Matter Dimensions. `)])])},[],!1,null,null,null,null).exports,jR={name:`DarkMatterDimensionRow`,props:{tier:{type:Number,required:!0}},data(){return{isUnlocked:!1,ascension:new Decimal(0),hasAscended:!1,powerDMPerAscension:new Decimal(0),interval:new Decimal(0),powerDM:new Decimal(0),powerDE:new Decimal(0),intervalCost:new Decimal(0),powerDMCost:new Decimal(0),powerDECost:new Decimal(0),amount:new Decimal(0),canBuyInterval:!1,canBuyPowerDM:!1,canBuyPowerDE:!1,isIntervalCapped:!1,timer:new Decimal(0),timerPercent:new Decimal(0),intervalAscensionBump:new Decimal(1e4),intervalAfterAscension:new Decimal(0),darkEnergyPerSecond:new Decimal(0),portionDE:new Decimal(0),productionPerSecond:new Decimal(0),percentPerSecond:0,hoverOverAscension:!1}},computed:{name(){return`${DarkMatterDimension(this.tier).shortDisplayName} Dark Matter Dimension`},ascensionText(){return`(⯅${formatInt(this.ascension)})`},intervalClassObject(){return{"o-dark-matter-dimension-button":!0,"o-dark-matter-dimension-button--available":this.canBuyInterval,"o-dark-matter-dimension-button--ascend":this.isIntervalCapped}},darkMatterClassObject(){return{"o-dark-matter-dimension-button":!0,"o-dark-matter-dimension-button--available":this.hoverOverAscension||this.canBuyPowerDM,"o-dark-matter-dimension-button--accent":this.hoverOverAscension}},darkEnergyClassObject(){return{"o-dark-matter-dimension-button":!0,"o-dark-matter-dimension-button--available":this.hoverOverAscension||this.canBuyPowerDE,"o-dark-matter-dimension-button--accent":this.hoverOverAscension}},intervalText(){let e=this.hoverOverAscension?this.intervalAfterAscension:this.interval,t=`${TimeSpan.fromMilliseconds(e,2,2).toStringShort()}`,n=this.hoverOverAscension?`<b>${t}</b>`:t,r=this.isIntervalCapped?this.hoverOverAscension?`On ascend ➜`:`Ascend!`:`Cost: ${this.formatDMCost(this.intervalCost)} DM`;return` ${n}<br>${r}`},darkMatterText(){let e=this.powerDM.times(this.hoverOverAscension?this.powerDMPerAscension:1),t=`DM ${formatX(e,2,2)}`,n=this.hoverOverAscension?`<b>${t}</b>`:t,r=this.powerDMPerAscension.mul(this.interval).div(this.intervalAfterAscension),i=this.hoverOverAscension?`${formatX(r,2,2)} / sec`:`Cost: ${this.formatDMCost(this.powerDMCost)} DM`;return`${n}<br>${i}`},darkEnergyText(){let e=this.powerDE.mul(this.hoverOverAscension?POWER_DE_PER_ASCENSION:1),t=`DE +${format(e,2,4)}`,n=this.hoverOverAscension?`<b>${t}</b>`:t,r=POWER_DE_PER_ASCENSION.mul(this.interval).div(this.intervalAfterAscension),i=this.hoverOverAscension?`${formatX(r,2,2)} / sec`:`Cost: ${this.formatDMCost(this.powerDECost)} DM`;return`${n}<br>${i}`},ascensionTooltip(){return`Interval is capped at ${formatInt(DarkMatterDimension(this.tier).intervalPurchaseCap)}ms.
        Ascension multiplies interval by ${formatInt(this.intervalAscensionBump)},
        DM by ${formatInt(this.powerDMPerAscension)}, and DE by ${formatInt(POWER_DE_PER_ASCENSION)}.`}},methods:{update(){let e=DarkMatterDimension(this.tier);this.isUnlocked=e.isUnlocked,this.ascension.copyFrom(e.ascensions),this.hasAscended=this.ascension.gt(0),this.powerDMPerAscension.copyFrom(e.powerDMPerAscension),this.interval.copyFrom(e.interval),this.powerDM.copyFrom(e.powerDM),this.powerDE.copyFrom(e.powerDE),this.intervalCost.copyFrom(e.intervalCost),this.powerDMCost.copyFrom(e.powerDMCost),this.powerDECost.copyFrom(e.powerDECost),this.amount.copyFrom(e.amount),this.canBuyInterval=e.canBuyInterval,this.canBuyPowerDM=e.canBuyPowerDM,this.canBuyPowerDE=e.canBuyPowerDE,this.isIntervalCapped=e.interval.lte(e.intervalPurchaseCap),this.timer.copyFrom(e.realDiff),this.timerPercent.copyFrom(this.timer.div(this.interval)),this.intervalAscensionBump.copyFrom(SingularityMilestone.ascensionIntervalScaling.effectOrDefault(new Decimal(1200))),this.intervalAfterAscension.copyFrom(e.intervalAfterAscension),this.darkEnergyPerSecond.copyFrom(e.productionPerSecond),this.portionDE.copyFrom(this.darkEnergyPerSecond.div(Currency.darkEnergy.productionPerSecond)),this.productionPerSecond=this.dimensionProduction(this.tier),this.percentPerSecond=Decimal.divide(this.productionPerSecond,this.amount).clampMax(1).toNumber(),this.isIntervalCapped||(this.hoverOverAscension=!1)},handleIntervalClick(){this.isIntervalCapped?DarkMatterDimension(this.tier).ascend():DarkMatterDimension(this.tier).buyInterval()},buyPowerDM(){DarkMatterDimension(this.tier).buyPowerDM()},buyPowerDE(){DarkMatterDimension(this.tier).buyPowerDE()},formatDMCost(e){return e.gt(Number.MAX_VALUE)?Notations.current.infinite:format(e,2)},dimensionProduction(e){if(e===4)return SingularityMilestone.dim4Generation.effectOrDefault(new Decimal(0));let t=DarkMatterDimension(e+1);return t.amount.times(t.powerDM).divide(t.interval).times(1e3)},hoverState(e){this.isIntervalCapped&&(this.hoverOverAscension=e)}}},MR={name:`DarkMatterDimensionGroup`,components:{DarkMatterDimensionRow:D(jR,function(){var e=this,t=e._self._c;return e.isUnlocked?t(`div`,{staticClass:`c-dark-matter-dimension-container`},[t(`div`,{staticClass:`o-dark-matter-dimension-amount`},[e._v(` `+e._s(e.name)),e.hasAscended?t(`span`,[e._v(` `+e._s(e.ascensionText))]):e._e(),e._v(`: `+e._s(e.format(e.amount,2))+` `)]),t(`div`,[e._v(` Average gain: `+e._s(e.format(e.productionPerSecond,2,2))+`/s (+`+e._s(e.formatPercents(e.percentPerSecond,2,2))+`/s) `)]),t(`div`,{staticClass:`c-dark-matter-dimension-buttons`},[t(`button`,{class:e.intervalClassObject,on:{click:e.handleIntervalClick,mouseover:function(t){return e.hoverState(!0)},mouseleave:function(t){return e.hoverState(!1)}}},[e.isIntervalCapped?t(`span`,{attrs:{"ach-tooltip":e.ascensionTooltip}},[t(`i`,{staticClass:`fas fa-question-circle`})]):e._e(),t(`span`,{domProps:{innerHTML:e._s(e.intervalText)}})]),t(`button`,{class:e.darkMatterClassObject,on:{click:e.buyPowerDM}},[t(`span`,{domProps:{innerHTML:e._s(e.darkMatterText)}})]),t(`button`,{class:e.darkEnergyClassObject,on:{click:e.buyPowerDE}},[t(`span`,{domProps:{innerHTML:e._s(e.darkEnergyText)}})])]),e.interval.gt(200)?t(`div`,[e._v(` Tick: `+e._s(e.formatInt(e.timer))+` ms (`+e._s(e.formatPercents(e.timerPercent,1))+`) `)]):t(`div`,[e._v(` `+e._s(e.format(e.interval.div(1e3).recip(),2,2))+` ticks / sec `)]),t(`div`,[e._v(` Dark Energy: `+e._s(e.format(e.darkEnergyPerSecond,2,4))+`/s (`+e._s(e.formatPercents(e.portionDE,1))+` of total) `)])]):e._e()},[],!1,null,null,null,null).exports}},NR=D(MR,function(){var e=this,t=e._self._c;return t(`span`,e._l(4,function(e){return t(`DarkMatterDimensionRow`,{key:e,attrs:{tier:e}})}),1)},[],!1,null,null,null,null).exports,PR=D({name:`LaitelaAutobuyerPane`,components:{PrimaryToggleButton:R},data(){return{hasDimension:!1,hasAscension:!1,hasSingularity:!1,hasAnnihilated:!1,dimension:!1,ascension:!1,singularity:!1,annihilation:!1,maxAutobuy:0,maxAutoAscend:0,autoSingularityFactor:0}},computed:{autobuyStr(){return this.maxAutobuy===4?`ON (all DMD)`:`ON (max. DMD ${this.maxAutobuy})`},autoAscendStr(){return this.maxAutoAscend===4?`ON (all DMD)`:`ON (max. DMD ${this.maxAutoAscend})`},autoSingularityStr(){return this.autoSingularityFactor===1?`At Cap`:`Cap ${formatX(this.autoSingularityFactor,2,2)}`}},watch:{dimension(e){player.auto.darkMatterDims.isActive=e},ascension(e){player.auto.ascension.isActive=e},singularity(e){player.auto.singularity.isActive=e},annihilation(e){player.auto.annihilation.isActive=e}},methods:{update(){this.hasDimension=Autobuyer.darkMatterDims.isUnlocked,this.hasAscension=Autobuyer.darkMatterDimsAscension.isUnlocked,this.hasSingularity=Autobuyer.singularity.isUnlocked,this.hasAnnihilated=Autobuyer.annihilation.isUnlocked;let e=player.auto;this.dimension=e.darkMatterDims.isActive,this.ascension=e.ascension.isActive,this.singularity=e.singularity.isActive,this.annihilation=e.annihilation.isActive,this.maxAutobuy=SingularityMilestone.darkDimensionAutobuyers.effectValue,this.maxAutoAscend=SingularityMilestone.ascensionAutobuyers.effectValue,this.autoSingularityFactor=SingularityMilestone.autoCondense.effectValue}}},function(){var e=this,t=e._self._c;return e.hasDimension||e.hasAscension||e.hasSingularity||e.hasAnnihilated?t(`div`,{staticClass:`c-laitela-singularity-container`},[e.hasDimension?t(`PrimaryToggleButton`,{staticClass:`c-laitela-automation-toggle`,attrs:{label:`Auto-buy DMD:`,on:e.autobuyStr},model:{value:e.dimension,callback:function(t){e.dimension=t},expression:`dimension`}}):e._e(),e.hasAscension?t(`PrimaryToggleButton`,{staticClass:`c-laitela-automation-toggle`,attrs:{label:`Auto-Ascend:`,on:e.autoAscendStr},model:{value:e.ascension,callback:function(t){e.ascension=t},expression:`ascension`}}):e._e(),e.hasSingularity?t(`PrimaryToggleButton`,{staticClass:`c-laitela-automation-toggle`,attrs:{label:`Auto-Singularity:`,on:e.autoSingularityStr},model:{value:e.singularity,callback:function(t){e.singularity=t},expression:`singularity`}}):e._e(),e.hasAnnihilated?t(`PrimaryToggleButton`,{staticClass:`c-laitela-automation-toggle`,attrs:{label:`Auto-Annihilation:`},model:{value:e.annihilation,callback:function(t){e.annihilation=t},expression:`annihilation`}}):e._e()],1):e._e()},[],!1,null,null,null,null).exports,FR=D({name:`LaitelaRunButton`,components:{GlyphSetPreview:pE},data(){return{realityTime:new Decimal(0),maxDimTier:0,isRunning:!1,realityReward:new Decimal(1),singularitiesUnlocked:!1,bestSet:[],tierNotCompleted:!0}},computed:{completionTime(){return this.tierNotCompleted?`Not completed at this tier`:`Fastest Completion: ${TimeSpan.fromSeconds(new Decimal(this.realityTime)).toStringShort()}`},runEffects(){return GameDatabase.celestials.descriptions[5].effects().split(`
`)},runDescription(){return GameDatabase.celestials.descriptions[5].description()},isDoomed:()=>Pelle.isDoomed},methods:{update(){this.realityTime.copyFrom(player.celestials.laitela.fastestCompletion),this.maxDimTier=Laitela.maxAllowedDimension,this.realityReward.copyFrom(Laitela.realityReward),this.isRunning=Laitela.isRunning,this.singularitiesUnlocked=Currency.singularities.gt(0),this.bestSet=structuredClone(Glyphs.copyForRecords(player.records.bestReality.laitelaSet)),this.tierNotCompleted=this.realityTime.eq(3600)||this.realityTime.eq(300)&&this.maxDimTier<8},startRun(){this.isDoomed||Modal.celestials.show({name:`Lai'tela's`,number:5})},classObject(){return{"o-laitela-run-button":!0,"o-laitela-run-button--large":!this.singularitiesUnlocked}},runButtonClassObject(){return{"o-laitela-run-button__icon":!0,"o-laitela-run-button__icon--running":this.isRunning,"c-celestial-run-button--clickable":!this.isDoomed,"o-pelle-disabled-pointer":this.isDoomed}}}},function(){var e=this,t=e._self._c;return t(`button`,{class:e.classObject()},[t(`span`,{class:{"o-pelle-disabled":e.isDoomed}},[t(`b`,[e._v(`Start Lai'tela's Reality`)])]),t(`div`,{class:e.runButtonClassObject(),on:{click:e.startRun}}),e.realityReward.gt(1)?t(`div`,[t(`b`,[e._v(` All Dark Matter multipliers are `+e._s(e.formatX(e.realityReward,2,2))+` higher. `)]),e.maxDimTier>0?t(`span`,[t(`br`),t(`br`),e._v(` `+e._s(e.completionTime)+` `),t(`br`),e.maxDimTier<=7?t(`span`,[t(`b`,[e._v(`Highest active dimension: `+e._s(e.formatInt(e.maxDimTier)))])]):e._e(),t(`br`),t(`br`),e._v(` Glyph Set: `),t(`GlyphSetPreview`,{attrs:{text:`Fastest Destabilization Glyph Set`,"text-hidden":!0,"force-name-color":!1,glyphs:e.bestSet}})],1):t(`span`,[t(`br`),t(`b`,[e._v(` You also gain an additional `+e._s(e.formatX(8))+` Dark Energy. `)]),t(`br`),t(`br`),e._v(` Lai'tela's Reality has been fully destabilized and cannot have its reward further improved. `)]),t(`br`)]):e._e(),e._l(e.runEffects,function(n,r){return t(`div`,{key:r+`-laitela-run-desc`+e.maxDimTier},[e._v(` `+e._s(n)+` `),t(`br`)])}),t(`br`),t(`div`,[e._v(e._s(e.runDescription))])],2)},[],!1,null,null,null,null).exports,IR=D({name:`SingularityMilestonePane`,components:{SingularityMilestoneComponent:HE},data(){return{milestones:[],hasNew:!1,shouldGlow:!1}},computed:{classObject(){return{"o-dark-matter-dimension-button--ascend":this.hasNew&&this.shouldGlow}}},methods:{update(){this.milestones=SingularityMilestones.nextMilestoneGroup,this.hasNew=SingularityMilestones.unseenMilestones.length>0,this.shouldGlow=player.celestials.laitela.milestoneGlow}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`c-laitela-next-milestones`},[t(`div`,{staticClass:`o-laitela-singularity-modal-button`,class:e.classObject,attrs:{onclick:`Modal.singularityMilestones.show()`}},[e._v(` Show all milestones `)]),e._l(e.milestones,function(e){return t(`SingularityMilestoneComponent`,{key:e.id,attrs:{milestone:e,"suppress-glow":!0}})})],2)},[],!1,null,null,null,null).exports,LR=D({name:`SingularityPane`,data(){return{darkEnergy:new Decimal,darkEnergyGainPerSecond:new Decimal,singularities:new Decimal,singularityCapIncreases:new Decimal,canPerformSingularity:!1,unlockedBulkSingularity:!1,singularityCap:new Decimal,baseTimeToSingularity:new Decimal,currentTimeToSingularity:new Decimal,extraTimeAfterSingularity:new Decimal,singularitiesGained:new Decimal,autoSingularityFactor:0,perStepFactor:new Decimal,isAutoEnabled:!1,hasAutoSingularity:!1,nextLowerStep:new Decimal,willCondenseOnDecrease:!1}},computed:{isDoomed:()=>Pelle.isDoomed,singularityFormText(){let e=this.singularitiesGained.eq(1)?`all Dark Energy into a Singularity`:`all Dark Energy into ${quantify(`Singularity`,this.singularitiesGained,2)}`;return this.canPerformSingularity?`Condense ${e}`:`Reach ${format(this.singularityCap)} Dark Energy to condense ${e}`},singularityWaitText(){let e=this.currentTimeToSingularity;return this.canPerformSingularity?(e=e.add(this.extraTimeAfterSingularity),this.isAutoEnabled?e.gt(0)?`(Auto-condensing in ${TimeSpan.fromSeconds(new Decimal(e)).toStringShort()})`:`(Will immediately auto-condense)`:``):`(Enough Dark Energy in ${TimeSpan.fromSeconds(new Decimal(e)).toStringShort()})`},baseSingularityTime(){return TimeSpan.fromSeconds(new Decimal(this.baseTimeToSingularity)).toStringShort()},additionalSingularityTime(){return TimeSpan.fromSeconds(new Decimal(this.extraTimeAfterSingularity)).toStringShort()},manualSingularityRate(){let e=this.baseTimeToSingularity;return this.formatRate(this.singularitiesGained.div(e))},autoSingularityRate(){if(this.hasAutoSingularity&&!this.isAutoEnabled)return`Auto-Singularity is OFF`;let e=this.baseTimeToSingularity.add(this.extraTimeAfterSingularity);return this.formatRate(this.singularitiesGained.div(e))},decreaseTooltip(){if(this.singularityCapIncreases.eq(0))return`You cannot decrease the cap any further!`;let e=this.singularitiesGained.div(this.perStepFactor);return this.willCondenseOnDecrease?`Decreasing the cap will immediately auto-condense for
          ${quantify(`Singularity`,e,2)}!`:null},increaseTooltip(){return this.singularityCapIncreases.gte(50)?`You cannot increase the cap any further!`:null}},methods:{update(){let e=player.celestials.laitela;this.darkEnergy.copyFrom(Currency.darkEnergy.value),this.darkEnergyGainPerSecond.copyFrom(Currency.darkEnergy.productionPerSecond),this.singularities.copyFrom(Currency.singularities.value),this.singularityCapIncreases.copyFrom(e.singularityCapIncreases),this.canPerformSingularity=Singularity.capIsReached,this.unlockedBulkSingularity=Currency.singularities.gte(10),this.singularityCap.copyFrom(Singularity.cap),this.baseTimeToSingularity.copyFrom(Singularity.timePerCondense),this.currentTimeToSingularity.copyFrom(Singularity.timeUntilCap),this.extraTimeAfterSingularity.copyFrom(Singularity.timeDelayFromAuto),this.singularitiesGained.copyFrom(Singularity.singularitiesGained),this.autoSingularityFactor=SingularityMilestone.autoCondense.effectOrDefault(1/0),this.perStepFactor.copyFrom(Singularity.gainPerCapIncrease),this.isAutoEnabled=player.auto.singularity.isActive&&SingularityMilestone.autoCondense.canBeApplied,this.hasAutoSingularity=Number.isFinite(this.autoSingularityFactor),this.nextLowerStep.copyFrom(this.singularityCap.mul(this.autoSingularityFactor).div(10)),this.willCondenseOnDecrease=this.isAutoEnabled&&this.darkEnergy.gt(this.nextLowerStep)},doSingularity(){Singularity.perform()},increaseCap(){Singularity.increaseCap()},decreaseCap(){Singularity.decreaseCap()},formatRate(e){return e.lt(1/60)?`${format(e.mul(3600),2,3)} per hour`:e.lt(1)?`${format(e.mul(60),2,3)} per minute`:`${format(e,2,3)} per second`},condenseClassObject(){return{"c-laitela-singularity":!0,"c-laitela-singularity--active":this.canPerformSingularity&&!this.isDoomed,"o-pelle-disabled":this.isDoomed,"o-pelle-disabled-pointer":this.isDoomed}}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`c-laitela-singularity-container`},[t(`div`,[t(`h2`,[e._v(` You have `+e._s(e.quantify(`Singularity`,e.singularities,2))+` `)]),t(`button`,{class:e.condenseClassObject(),on:{click:e.doSingularity}},[t(`h2`,[e._v(` `+e._s(e.singularityFormText)+` `)]),e.singularityWaitText===``?e._e():t(`br`),t(`h2`,[e._v(` `+e._s(e.singularityWaitText)+` `)])])]),e.singularities.neq(0)?t(`div`,[t(`div`,{staticClass:`o-laitela-matter-amount`},[e._v(` You have `+e._s(e.format(e.darkEnergy,2,4))+` Dark Energy. (+`+e._s(e.format(e.darkEnergyGainPerSecond,2,4))+`/s) `)]),e.unlockedBulkSingularity?t(`div`,[t(`button`,{staticClass:`c-laitela-singularity__cap-control`,class:{"c-laitela-singularity__cap-control--available":e.singularityCapIncreases.gt(0)},attrs:{"ach-tooltip":e.decreaseTooltip},on:{click:e.decreaseCap}},[e._v(` Decrease Singularity cap. `)]),t(`button`,{staticClass:`c-laitela-singularity__cap-control`,class:{"c-laitela-singularity__cap-control--available":e.singularityCapIncreases.lt(50)},attrs:{"ach-tooltip":e.increaseTooltip},on:{click:e.increaseCap}},[e._v(` Increase Singularity cap. `)]),t(`br`),e._v(` Each step increases the required Dark Energy by `+e._s(e.formatX(10))+`, `),t(`br`),e._v(` but also increases gained Singularities by `+e._s(e.formatX(e.perStepFactor))+`. `)]):t(`div`,[t(`br`),e._v(` Reach `+e._s(e.format(10))+` Singularities `),t(`br`),e._v(` to unlock Bulk Singularities. `),t(`br`)]),t(`br`),e._v(` Total time to `),e.hasAutoSingularity?t(`span`,[e._v(`(auto-)`)]):e._e(),e._v(`condense: `+e._s(e.baseSingularityTime)+` `),e.hasAutoSingularity&&e.autoSingularityFactor!==1?t(`span`,[e._v(` (+`+e._s(e.additionalSingularityTime)+`) `)]):e._e(),t(`br`),e.hasAutoSingularity&&e.autoSingularityFactor!==1?t(`span`,[e._v(`Manual `)]):e._e(),e._v(` Singularity gain rate: `+e._s(e.manualSingularityRate)+` `),t(`br`),e.hasAutoSingularity&&e.autoSingularityFactor!==1?t(`span`,[e._v(` Automatic Singularity gain rate: `+e._s(e.autoSingularityRate)+` `)]):e._e()]):e._e()])},[],!1,null,`15ff7958`,null,null).exports,RR=D({name:`LaitelaTab`,components:{LaitelaRunButton:FR,SingularityPane:LR,SingularityMilestonePane:IR,DarkMatterDimensionGroup:NR,AnnihilationButton:AR,LaitelaAutobuyerPane:PR,CelestialQuoteHistory:fL,PrimaryButton:L},data(){return{isDoomed:!1,darkMatter:new Decimal(0),darkMatterGain:new Decimal(0),isDMCapped:!1,maxDarkMatter:new Decimal(0),darkEnergy:new Decimal(0),matterExtraPurchasePercentage:new Decimal(0),autobuyersUnlocked:!1,singularityPanelVisible:!1,singularitiesUnlocked:!1,singularityCap:new Decimal(0),singularityWaitTime:``,showAnnihilation:!1}},computed:{styleObject(){return{color:this.isDMCapped?`var(--color-bad)`:``}}},methods:{update(){this.isDoomed=Pelle.isDoomed,this.darkMatter.copyFrom(Currency.darkMatter.value),this.isDMCapped=this.darkMatter.eq(Number.MAX_VALUE),this.maxDarkMatter.copyFrom(Currency.darkMatter.max),this.darkEnergy.copyFrom(player.celestials.laitela.darkEnergy),this.matterExtraPurchasePercentage.copyFrom(Laitela.matterExtraPurchaseFactor.sub(1)),this.autobuyersUnlocked=SingularityMilestone.darkDimensionAutobuyers.canBeApplied||SingularityMilestone.darkDimensionAutobuyers.canBeApplied||SingularityMilestone.autoCondense.canBeApplied||Laitela.darkMatterMult.gt(1),this.singularityPanelVisible=Currency.singularities.gt(0),this.singularitiesUnlocked=Singularity.capIsReached||this.singularityPanelVisible,this.singularityCap.copyFrom(Singularity.cap),this.singularityWaitTime=TimeSpan.fromSeconds(this.singularityCap.sub(this.darkEnergy).div(Currency.darkEnergy.productionPerSecond)).toStringShort(),this.showAnnihilation=Laitela.annihilationUnlocked;let e=DarkMatterDimension(1);this.darkMatterGain=e.amount.times(e.powerDM).divide(e.interval).times(1e3)},maxAll(){Laitela.maxAllDMDimensions(4)},showLaitelaHowTo(){ui.view.h2pForcedTab=GameDatabase.h2p.tabs.filter(e=>e.name===`Lai'tela`)[0],Modal.h2p.show()}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-laitela-celestial-tab`},[t(`CelestialQuoteHistory`,{attrs:{celestial:`laitela`}}),t(`div`,{staticClass:`c-subtab-option-container`},[t(`PrimaryButton`,{staticClass:`o-primary-btn--subtab-option`,on:{click:function(t){return e.showLaitelaHowTo()}}},[e._v(` Click for Lai'tela info `)]),t(`PrimaryButton`,{staticClass:`o-primary-btn--subtab-option`,on:{click:e.maxAll}},[e._v(` Max all Dark Matter Dimensions `)])],1),t(`div`,{staticClass:`o-laitela-matter-amount`},[e._v(` You have `),t(`span`,{style:e.styleObject},[e._v(e._s(e.format(e.darkMatter,2)))]),e._v(` Dark Matter`),e.isDMCapped?t(`span`,[e._v(` (capped)`)]):e._e(),e._v(`. `),e.isDMCapped?e._e():t(`span`,[e._v(`(Average: `+e._s(e.format(e.darkMatterGain,2,2))+`/s)`)])]),t(`div`,{staticClass:`o-laitela-matter-amount`},[e._v(` Your maximum Dark Matter ever is `),t(`span`,{style:e.styleObject},[e._v(e._s(e.format(e.maxDarkMatter,2)))]),e.isDoomed?e._e():t(`span`,[e._v(`, giving `+e._s(e.formatPercents(e.matterExtraPurchasePercentage,2))+` more purchases from Continuum`)]),e._v(`. `)]),t(`div`,{staticClass:`o-laitela-matter-amount`},[e._v(` Dark Matter Dimensions are unaffected by storing real time. `)]),e.singularitiesUnlocked?e._e():t(`h2`,{staticClass:`c-laitela-singularity-container`},[e._v(` Unlock Singularities in `+e._s(e.singularityWaitTime)+`. (`+e._s(e.format(e.darkEnergy,2,2))+`/`+e._s(e.format(e.singularityCap,2))+` Dark Energy) `)]),e.singularitiesUnlocked?t(`SingularityPane`):e._e(),e.autobuyersUnlocked?t(`LaitelaAutobuyerPane`):e._e(),t(`div`,{staticClass:`l-laitela-mechanics-container`},[t(`LaitelaRunButton`),t(`div`,[t(`DarkMatterDimensionGroup`),e.showAnnihilation?t(`AnnihilationButton`):e._e()],1),e.singularityPanelVisible?t(`SingularityMilestonePane`):e._e()],1)],1)},[],!1,null,null,null,null).exports,zR=class{constructor(e){this.key=e;let t=this.key.split(`_`),n=GameDatabase.multiplierTabValues[t[0]][t[1]],r=t.length>=3?t.slice(2).map(e=>String.raw`^\d+$`.test(e)?Number(e):e):[];this._name=BR(n.name,r),this._multValue=BR(n.multValue,r),this._powValue=BR(n.powValue,r),this._dilationEffect=BR(n.dilationEffect,r),this._isActive=BR(n.isActive,r),this._fakeValue=BR(n.fakeValue,r),this._icon=BR(n.icon,r),this._displayOverride=BR(n.displayOverride,r),this._isDilated=BR(n.isDilated,r),this._isBase=BR(n.isBase,r),this._ignoresNerfPowers=BR(n.ignoresNerfPowers,r),this.data=a.observable({mult:new Decimal(0),pow:0,isVisible:!1,lastVisibleAt:0})}update(){let e=this.isVisible;this.data.mult.fromDecimal(e?this.mult:o.D1),this.data.pow=e?this.pow:1,this.data.isVisible=e,e&&(this.data.lastVisibleAt=Date.now())}get name(){return this._name()}get mult(){return new Decimal(this._multValue()??new Decimal(1))}get pow(){return this._powValue()??new Decimal(1)}get dilationEffect(){return this._dilationEffect()??new Decimal(1)}get isActive(){return this._isActive()??!1}get fakeValue(){return this._fakeValue()}get icon(){return this._icon()}get displayOverride(){return this._displayOverride()}get isDilated(){return this._isDilated()}get isBase(){return this._isBase()}get ignoresNerfPowers(){return this._ignoresNerfPowers()??!1}get isVisible(){return this.isActive&&(this.pow!==1||this.mult.neq(1))}};function BR(e,t){return typeof e==`function`?()=>e(...t):()=>e}var VR=new Map;function HR(e){let t=VR.get(e);if(t!==void 0)return t;let n=new zR(e);return VR.set(e,n),n}var UR=class{constructor(e){this.entries=e.map(e=>HR(e))}get hasVisibleEntries(){let e=this.entries.filter(e=>e.isActive&&(e.mult.neq(1)||e.pow!==1));return e.length>1||e.length===1&&e[0].key.startsWith(`general`)}},WR=new Map;function GR(e){let t=WR.get(e);if(t!==void 0)return t;let n=GameDatabase.multiplierTabTree[e],r=n===void 0?[]:n.map(e=>new UR(e));return WR.set(e,r),r}var KR=class{constructor(){this.dataPoints=[]}add(e){this.dataPoints.push(e),this.dataPoints.length>10&&this.dataPoints.shift()}get average(){let e=this.dataPoints.filter(e=>e!==void 0);if(e.length===0)return[];let t=[],n=e[0];for(let r=0;r<n.length;r++)t[r]=e.map(e=>e[r]).sum()/e.length;return t}clear(){this.dataPoints=[]}},qR=new Set([`IP_base`,`EP_base`,`TP_base`]);function JR(e){return e.padStart(7,`\xA0`)}var YR={name:`MultiplierBreakdownEntry`,components:{PrimaryToggleButton:R},props:{resource:{type:zR,required:!0},isRoot:{type:Boolean,required:!1,default:!1}},data(){return{selected:0,percentList:[],averagedPercentList:[],showGroup:[],hadChildEntriesAt:[],mouseoverIndex:-1,lastNotEmptyAt:0,dilationExponent:1,isDilated:!1,lastLayoutChange:Date.now(),now:Date.now(),totalMultiplier:new Decimal,totalPositivePower:1,replacePowers:player.options.multiplierTab.replacePowers,inNC12:!1}},computed:{groups(){return GR(this.resource.key)},entries(){return this.groups[this.selected].entries},rollingAverage(){return new KR},containerClass(){return{"c-multiplier-entry-container":!0,"c-multiplier-entry-root-container":this.isRoot}},isEmpty(){return!this.isRecent(this.lastNotEmptyAt)},disabledText(){return this.resource.isBase?Decimal.eq(this.resource.mult,0)?`You cannot gain this resource (prestige requirement not reached)`:`You have no multipliers for this resource (will gain ${format(1)} on prestige)`:`Total effect inactive, disabled, or reduced to ${formatX(1)}`},hasSeenPowers(){return InfinityChallenge(4).isCompleted||PlayerProgress.eternityUnlocked()},allowPowerToggle(){return![`AD_infinityPower`,`galaxies`,`tickspeed`].some(e=>this.resource.key.startsWith(e))}},watch:{replacePowers(e){player.options.multiplierTab.replacePowers=e}},created(){this.groups.length>1&&player.options.multiplierTab.showAltGroup&&this.changeGroup()},methods:{update(){for(let e=0;e<this.entries.length;e++){let t=this.entries[e];t.update(),GR(t.key).some(e=>e.hasVisibleEntries)&&(this.hadChildEntriesAt[e]=Date.now())}this.dilationExponent=this.resource.dilationEffect,this.isDilated=this.dilationExponent!==1,this.calculatePercents(),this.now=Date.now(),this.replacePowers=player.options.multiplierTab.replacePowers&&this.allowPowerToggle,this.inNC12=NormalChallenge(12).isRunning},changeGroup(){this.selected=(this.selected+1)%this.groups.length,player.options.multiplierTab.showAltGroup=this.selected===1,this.showGroup=Array.repeat(!1,this.entries.length),this.hadChildEntriesAt=Array.repeat(0,this.entries.length),this.lastLayoutChange=Date.now(),this.rollingAverage.clear(),this.update()},calculatePercents(){let e=this.entries.map(e=>e.data.pow),t=e.filter(e=>e.gt(1)).reduce((e,t)=>e.mul(t),new Decimal(1)),n=e.filter(e=>e.lt(1)).reduce((e,t)=>e.mul(t),new Decimal(1)),r=(this.resource.fakeValue??this.resource.mult).log10().div(t),i=r.eq(0);i||(this.lastNotEmptyAt=Date.now());let a=[];for(let e of this.entries){let i=r.eq(0)?new Decimal:Decimal.log10(e.data.mult).div(r),o=t.eq(1)?new Decimal:Decimal.log(e.data.pow,Math.E).div(Decimal.log(t,Math.E)),s=e.data.pow.gte(1)?i.div(t).add(o.mul(new Decimal(1).sub(new Decimal(1).div(t)))):Decimal.log(e.data.pow,Math.E).div(Decimal.log(n)).mul(n.sub(1));a.push([e.ignoresNerfPowers,qR.has(e.key)?Decimal.clampMin(s,1e-4):s])}let o=a.filter(e=>e[1]>0).map(e=>e[1]).sum(),s=a.filter(e=>e[1]>0).reduce((e,t)=>e+(t[0]?t[1]:t[1]*n),0);a=a.map(e=>e[1]>0?(e[0]?e[1]:e[1]*n)/s:Math.clampMin(e[1]*(o-s)/o/n,-1)),this.percentList=a,this.rollingAverage.add(i?void 0:a),this.averagedPercentList=this.rollingAverage.average,this.totalMultiplier=Decimal.pow10(r),this.totalPositivePower=t},styleObject(e){let t=this.averagedPercentList.sum(),n=this.averagedPercentList[e]<0,r=this.entries[e].icon,i=this.averagedPercentList[e],a=e=>e>0?e*t:-e;return{position:`absolute`,top:`${100*this.averagedPercentList.slice(0,e).map(e=>a(e)).sum()}%`,height:`${100*a(i)}%`,width:`100%`,"transition-duration":this.isRecent(this.lastLayoutChange)?void 0:`0.2s`,border:i===0?``:`0.1rem solid var(--color-text)`,color:r?.textColor??`black`,background:n?`repeating-linear-gradient(-45deg, var(--color-bad), ${r?.color} 0.8rem)`:r?.color}},singleEntryClass(e){return{"c-single-entry":!0,"c-single-entry-highlight":this.mouseoverIndex===e}},shouldShowEntry(e){return e.data.isVisible||this.isRecent(e.data.lastVisibleAt)},barSymbol(e){return this.entries[e].icon?.symbol??null},hasChildEntries(e){return this.isRecent(this.hadChildEntriesAt[e])},expandIcon(e){return this.showGroup[e]?`far fa-minus-square`:`far fa-plus-square`},expandIconStyle(e){return{opacity:this.hasChildEntries(e)?1:0}},entryString(e){let t=this.percentList[e];if(t<0&&!qR.has(this.entries[e].key))return this.nerfString(e);let n=t===0?formatPercents(0):t===1?formatPercents(1):t<.001?`<${formatPercents(.001,1)}`:t>.9995?`~${formatPercents(1)}`:formatPercents(t,1);n=JR(n);let r=this.entries[e];if(!r.data.isVisible)return`${n}: ${r.name}`;let i=r.displayOverride,a;if(i)a=`(${i})`;else{let e=[],t=e=>{if(r.isDilated&&this.dilationExponent!==1){let t=this.applyDilationExp(e,1/this.dilationExponent);return`${formatX(t,2,2)} ➜ ${formatX(e,2,2)}`}return r.isBase?format(e,2,2):formatX(e,2,2)};if(this.replacePowers&&r.data.pow!==1){let n=Math.log(r.data.pow)/Math.log(this.totalPositivePower),i=this.totalMultiplier.pow((this.totalPositivePower-1)*n);e.push(t(r.data.mult.times(i)))}else Decimal.neq(r.data.mult,1)&&e.push(t(r.data.mult)),r.data.pow!==1&&e.push(formatPow(r.data.pow,2,3));a=e.length===0?``:`(${e.join(`, `)})`}return`${n}: ${r.name} ${a}`},nerfString(e){let t=this.entries[e],n=JR(formatPercents(this.percentList[e],1)),r=t.displayOverride,i,a=t.isBase?e=>format(e,2,2):e=>`/${format(e.reciprocal(),2,2)}`;if(r)i=`(${r})`;else{let e=[];if(this.replacePowers&&t.data.pow!==1){let n=this.resource.fakeValue??this.resource.mult;e.push(a(n.pow(1-1/t.data.pow)))}else Decimal.neq(t.data.mult,1)&&e.push(a(t.data.mult)),t.data.pow!==1&&e.push(formatPow(t.data.pow,2,3));i=e.length===0?``:`(${e.join(`, `)})`}return`${n}: ${t.name} ${i}`},totalString(){let e=this.resource,t=e.name,n=e.displayOverride;if(n)return`${t}: ${n}`;let r=e.mult;return e.isBase?`${t}: ${format(r,2,2)}`:`${t}: ${formatX(r,2,2)}`},applyDilationExp(e,t){return Decimal.pow10(e.log10()**t)},dilationString(){let e=this.resource,t=e.mult,n,r;if(this.isDilated&&e.isDilated){let i=this.entries.filter(e=>e.isVisible&&e.isDilated).map(e=>e.mult).map(e=>this.applyDilationExp(e,1/this.dilationExponent)).reduce((e,t)=>e.times(t),new Decimal(1));n=i.neq(1)?i:this.applyDilationExp(t,1/this.dilationExponent),r=e.mult}else n=t,r=this.applyDilationExp(n,this.dilationExponent);let i=e.isBase?e=>format(e,2,2):e=>formatX(e,2,2);return`Dilation Effect: Exponent${formatPow(this.dilationExponent,2,3)}
        (${i(n,2,2)} ➜ ${i(r,2,2)})`},isRecent(e){return this.now-e<200}}},XR=D(YR,function(){var e=this,t=e._self._c;return t(`div`,{class:e.containerClass},[e.isEmpty?e._e():t(`div`,{staticClass:`c-stacked-bars`},e._l(e.averagedPercentList,function(n,r){return t(`div`,{key:100+r,class:{"c-bar-highlight":e.mouseoverIndex===r},style:e.styleObject(r),on:{mouseover:function(t){e.mouseoverIndex=r},mouseleave:function(t){e.mouseoverIndex=-1},click:function(t){e.showGroup[r]=!e.showGroup[r]}}},[t(`span`,{staticClass:`c-bar-overlay`,domProps:{innerHTML:e._s(e.barSymbol(r))}})])}),0),t(`div`),t(`div`,{staticClass:`c-info-list`},[t(`div`,{staticClass:`c-total-mult`},[t(`b`,[e._v(` `+e._s(e.totalString())+` `)]),t(`span`,{staticClass:`c-display-settings`},[e.hasSeenPowers&&e.allowPowerToggle?t(`PrimaryToggleButton`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:`Change Display for Power effects`,expression:`'Change Display for Power effects'`}],staticClass:`o-primary-btn c-change-display-btn`,attrs:{off:`^N`,on:`×N`},model:{value:e.replacePowers,callback:function(t){e.replacePowers=t},expression:`replacePowers`}}):e._e(),e.groups.length>1?t(`i`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:`Change Multiplier Grouping`,expression:`'Change Multiplier Grouping'`}],staticClass:`o-primary-btn c-change-display-btn fas fa-arrows-rotate`,on:{click:e.changeGroup}}):e._e()],1)]),e.isEmpty?t(`div`,{staticClass:`c-no-effect`},[e._v(` No Active Effects `),t(`br`),t(`br`),e._v(` `+e._s(e.disabledText)+` `)]):e._l(e.entries,function(n,r){return t(`div`,{key:n.key,on:{mouseover:function(t){e.mouseoverIndex=r},mouseleave:function(t){e.mouseoverIndex=-1}}},[e.shouldShowEntry(n)?t(`div`,{class:e.singleEntryClass(r)},[t(`div`,{on:{click:function(t){e.showGroup[r]=!e.showGroup[r]}}},[t(`span`,{class:e.expandIcon(r),style:e.expandIconStyle(r)}),e._v(` `+e._s(e.entryString(r))+` `)]),e.showGroup[r]&&e.hasChildEntries(r)?t(`MultiplierBreakdownEntry`,{attrs:{resource:n}}):e._e()],1):e._e()])}),e.isDilated&&!e.isEmpty?t(`div`,[t(`div`,{staticClass:`c-single-entry c-dilation-entry`},[t(`div`,[e._v(` `+e._s(e.dilationString())+` `)])])]):e._e(),e.resource.key===`AD_total`?t(`div`,{staticClass:`c-no-effect`},[t(`div`,[e._v(` "Base AD Production" is the amount of Antimatter that you would be producing with your current AD upgrades as if you had waited a fixed amount of time (`+e._s(e.formatInt(10))+`-`+e._s(e.formatInt(40))+` seconds depending on your AD count) after a Sacrifice. This may misrepresent your actual production if your ADs have been producing for a while, but the relative mismatch will become smaller as you progress further in the game and numbers become larger. `)]),e.inNC12?t(`div`,[e._v(` The breakdown in this tab within Normal Challenge 12 may be inaccurate for some entries, and might count extra multipliers which apply to all Antimatter Dimensions rather than just the ones which are displayed. `)]):e._e()]):e._e()],2)])},[],!1,null,`8b1bf301`,null,null).exports,ZR=[{id:0,key:`AM`,text:`Antimatter Production`},{id:1,key:`tickspeed`,text:`Tickspeed`},{id:2,key:`AD`,text:`Antimatter Dimensions`},{id:3,key:`IP`,text:`Infinity Points`},{id:4,key:`ID`,text:`Infinity Dimensions`},{id:5,key:`infinities`,text:`Infinities`},{id:6,key:`replicanti`,text:`Replicanti Speed`},{id:7,key:`EP`,text:`Eternity Points`},{id:8,key:`TD`,text:`Time Dimensions`},{id:9,key:`eternities`,text:`Eternities`},{id:10,key:`DT`,text:`Dilated Time`},{id:11,key:`gamespeed`,text:`Game Speed`}],QR=D({name:`MultiplierBreakdownTab`,components:{MultiplierBreakdownEntry:XR},data(){return{availableOptions:[],currentID:player.options.multiplierTab.currTab}},computed:{currentKey(){return ZR.find(e=>e.id===this.currentID).key},resource(){return HR(`${this.currentKey}_total`)},resourceSymbols(){return GameDatabase.multiplierTabValues[this.currentKey].total.overlay}},methods:{update(){this.availableOptions=ZR.map(e=>({...e,isActive:this.checkActiveKey(e.key)})).filter(e=>e.isActive)},checkActiveKey(e){let t=GameDatabase.multiplierTabValues[e].total.isActive;return typeof t==`function`?t():t},accessProp(e){return typeof e==`function`?e():e},subtabClassObject(e){return{"c-multiplier-subtab-btn":!0,"c-multiplier-subtab-btn--active":e.key===this.currentKey}},clickSubtab(e){this.currentID=this.availableOptions[e].id,player.options.multiplierTab.currTab=ZR.find(e=>e.key===this.currentKey).id}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`c-stats-tab`},[t(`div`,{staticClass:`l-multiplier-subtab-btn-container`},e._l(e.availableOptions,function(n,r){return t(`button`,{key:n.key+n.isActive,class:e.subtabClassObject(n),on:{click:function(t){return e.clickSubtab(r)}}},[e._v(` `+e._s(n.text)+` `)])}),0),t(`div`,{staticClass:`c-list-container`},[e._l(e.resourceSymbols,function(n){return t(`span`,{key:n},[t(`span`,{staticClass:`c-symbol-overlay`,domProps:{innerHTML:e._s(n)}})])}),t(`MultiplierBreakdownEntry`,{key:e.resource.key,attrs:{resource:e.resource,"is-root":!0}}),e._m(0)],2)])},[function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`c-multiplier-tab-text-line`},[e._v(` Note: Entries are only expandable if they contain multiple sources which can be different values. For example, any effects which affect all Dimensions of any type equally will not expand into a list of eight identical numbers. `),t(`br`),t(`b`,[e._v(` Some entries may cause lag if expanded out fully. Resizing happens over 200 ms (instead of instantly) in order to reduce possible adverse effects due to photosensitivity. This may cause some visual weirdness after prestige events. `)])])}],!1,null,`303f9572`,null,null).exports,$R={name:`NormalAchievement`,components:{EffectDisplay:c,HintText:me},props:{achievement:{type:Object,required:!0},isObscured:{type:Boolean,required:!1}},data(){return{isDisabled:!1,isUnlocked:!1,isMouseOver:!1,isCancer:!1,showUnlockState:!1,realityUnlocked:!1,garbleTimer:0,garbleKey:0,achievementTime:0}},computed:{id(){return this.achievement.id},displayId(){return this.config.displayId??this.id},config(){return this.achievement.config},styleObject(){return{"background-position":`-${(this.achievement.column-1)*104}px -${(this.achievement.row-1)*104}px`}},classObject(){return{"o-achievement":!0,"o-achievement--disabled":this.isDisabled,"o-achievement--locked":!this.isUnlocked&&!this.isDisabled&&!this.isObscured,"o-achievement--unlocked":this.isUnlocked,"o-achievement--waiting":!this.isUnlocked&&this.isPreRealityAchievement&&!this.isDisabled,"o-achievement--blink":!this.isUnlocked&&this.id===78&&!this.isDisabled,"o-achievement--normal":!this.isCancer&&!this.isObscured,"o-achievement--cancer":this.isCancer&&!this.isObscured,"o-achievement--hidden":this.isObscured}},indicatorIconClass(){return this.isUnlocked?`fas fa-check`:this.isPreRealityAchievement&&!this.isDisabled?`far fa-clock`:`fas fa-times`},indicatorClassObject(){return{"o-achievement__indicator":!0,"o-achievement__indicator--disabled":this.isDisabled,"o-achievement__indicator--locked":!this.isUnlocked&&!this.isPreRealityAchievement&&!this.isDisabled,"o-achievement__indicator--waiting":!this.isUnlocked&&this.isPreRealityAchievement&&!this.isDisabled}},rewardClassObject(){return{"o-achievement__reward":!0,"o-achievement__reward--disabled":this.isDisabled,"o-achievement__reward--locked":!this.isUnlocked&&!this.isPreRealityAchievement&&!this.isDisabled,"o-achievement__reward--waiting":!this.isUnlocked&&this.isPreRealityAchievement&&!this.isDisabled}},isPreRealityAchievement(){return this.realityUnlocked&&this.achievement.row<=13},hasReward(){return this.config.reward!==void 0&&!this.isObscured},garbledNameTemplate(){return this.makeGarbledTemplate(this.config.name)},garbledIDTemplate(){return this.makeGarbledTemplate(this.displayId)},garbledDescriptionTemplate(){return this.makeGarbledTemplate(this.config.description)},achievedTime(){return player.speedrun.isActive?this.achievementTime===void 0?`Not Achieved yet`:this.achievementTime===0?`Given at Speedrun start`:`Achieved after ${TimeSpan.fromMilliseconds(new Decimal(this.achievementTime)).toStringShort()}`:null}},beforeDestroy(){clearTimeout(this.mouseOverInterval)},methods:{update(){this.isDisabled=Pelle.disabledAchievements.includes(this.id)&&Pelle.isDoomed,this.isUnlocked=this.achievement.isUnlocked&&!this.isDisabled,this.isCancer=Theme.current().name===`S4`||player.secretUnlocks.cancerAchievements,this.showUnlockState=player.options.showHintText.achievementUnlockStates,this.realityUnlocked=PlayerProgress.realityUnlocked(),this.processedName=this.processText(this.config.name,this.garbledNameTemplate),this.processedId=this.processText(this.displayId,this.garbledIDTemplate),this.processedDescription=this.processText(this.config.description,this.garbledDescriptionTemplate),this.garbleTimer++,this.isObscured?this.garbleKey=10*this.id+Math.floor(this.garbleTimer/3):this.garbleKey=this.id,player.speedrun.isActive&&(this.achievementTime=player.speedrun.achievementTimes[this.id])},onMouseEnter(){clearTimeout(this.mouseOverInterval),this.isMouseOver=!0},onMouseLeave(){this.mouseOverInterval=setTimeout(()=>this.isMouseOver=!1,300)},makeGarbledTemplate(e){let t=`${e}`,n=``;for(let e=0;e<t.length;e++)if(t[e]===` `)n+=` `;else{let r=t[e].codePointAt();n+=String.fromCodePoint(33+(r*r+e*e)%93)}return n},processText(e,t){if(!this.isObscured)return e;let n=I.randomCrossWords(t),r=``;for(let e=0;e<n.length;e++)t[e]===` `?r+=` `:r+=n[e];return r}}},ez=D($R,function(){var e=this,t=e._self._c;return t(`div`,{class:e.classObject,style:e.styleObject,on:{mouseenter:e.onMouseEnter,mouseleave:e.onMouseLeave}},[t(`HintText`,{key:e.garbleKey,staticClass:`l-hint-text--achievement`,attrs:{type:`achievements`}},[e._v(` `+e._s(e.processedId)+` `)]),t(`div`,{staticClass:`o-achievement__tooltip`},[e.isMouseOver?[t(`div`,{staticClass:`o-achievement__tooltip__name`},[e._v(` `+e._s(e.processedName)+` (`+e._s(e.processedId)+`) `)]),t(`div`,{staticClass:`o-achievement__tooltip__description`},[e._v(` `+e._s(e.processedDescription)+` `)]),e.config.reward?t(`div`,{staticClass:`o-achievement__tooltip__reward`},[e.isObscured?e._e():t(`span`,{class:{"o-pelle-disabled":e.isDisabled}},[e._v(` Reward: `+e._s(e.config.reward)+` `),e.config.formatEffect?t(`EffectDisplay`,{attrs:{br:``,config:e.config}}):e._e()],1)]):e._e(),e.achievedTime?t(`div`,{staticClass:`o-achievement-time`},[e._v(` `+e._s(e.achievedTime)+` `)]):e._e()]:e._e()],2),e.showUnlockState?t(`div`,{class:e.indicatorClassObject},[t(`i`,{class:e.indicatorIconClass})]):e._e(),e.hasReward?t(`div`,{class:e.rewardClassObject},[t(`i`,{staticClass:`fas fa-star`})]):e._e()],1)},[],!1,null,`71de3e62`,null,null).exports,tz=r({name:`NormalAchievementRow`,components:{NormalAchievement:ez},props:{row:{type:Array,required:!0},isObscured:{type:Boolean,required:!1}},data(){return{isCompleted:!1,isHidden:!1}},computed:{classObject(){return{"l-achievement-grid__row":!0,"c-achievement-grid__row--completed":this.isCompleted}}},methods:{update(){this.isCompleted=this.row.every(e=>e.isUnlocked),this.isHidden=this.isCompleted&&player.options.hideCompletedAchievementRows}}}),nz=D(tz,function(){var e=this,t=e._self._c;return e._self._setupProxy,e.isHidden?e._e():t(`div`,{class:e.classObject},e._l(e.row,function(n,r){return t(`NormalAchievement`,{key:r,staticClass:`l-achievement-grid__cell`,attrs:{achievement:n,"is-obscured":e.isObscured}})}),1)},[],!1,null,null,null,null).exports,rz={name:`NormalAchievementsTab`,components:{SwapAchievementImagesButton:D({name:`SwapAchievementImagesButton`,data(){return{canSwapImages:!1,isCancerImages:!1,isDoomed:!1}},computed:{swapImagesButton(){let e=this.isDoomed?`.`:`:`;return this.isCancerImages?`😂`:e},imageSwapperStyleObject(){return this.canSwapImages?{cursor:`pointer`}:{}}},methods:{update(){this.isDoomed=Pelle.isDoomed;let e=Theme.current().name===`S4`;this.canSwapImages=!e&&Themes.find(`S4`).isAvailable(),this.isCancerImages=e||player.secretUnlocks.cancerAchievements},swapImages(){this.canSwapImages&&(player.secretUnlocks.cancerAchievements=!player.secretUnlocks.cancerAchievements)}}},function(){var e=this,t=e._self._c;return t(`span`,{style:e.imageSwapperStyleObject,on:{click:e.swapImages}},[e._v(e._s(e.swapImagesButton))])},[],!1,null,null,null,null).exports,NormalAchievementRow:nz,PrimaryToggleButton:R},data(){return{achievementPower:0,achTPEffect:0,achCountdown:new Decimal,totalCountdown:new Decimal,missingAchievements:0,showAutoAchieve:!1,isAutoAchieveActive:!1,hideCompletedRows:!1,achMultBreak:!1,achMultToIDS:!1,achMultToTDS:!1,achMultToBH:!1,achMultToTP:!1,achMultToTT:!1,renderedRowIndices:[]}},computed:{isDoomed:()=>Pelle.isDoomed,rows:()=>Achievements.allRows,renderedRows(){return this.rows.filter((e,t)=>this.renderedRowIndices.includes(t))},boostText(){let e=formatX(this.achievementPower,2,3),t=formatX(this.achTPEffect,2,3),n=[],r=[];return r.push(`Antimatter`),this.achMultToIDS&&r.push(`Infinity`),this.achMultToTDS&&r.push(`Time`),this.achMultToMDS&&r.push(`Meta`),n.push(`${makeEnumeration(r)} Dimensions: ${e}`),this.achMultToTP&&n.push(`Tachyon Particles: ${t}`),this.achMultToBH&&n.push(`Black Hole Power: ${e}`),this.achMultToTT&&n.push(`Time Theorem production: ${e}`),`${n.join(`<br>`)}`}},watch:{isAutoAchieveActive(e){player.reality.autoAchieve=e},hideCompletedRows(e){player.options.hideCompletedAchievementRows=e,this.startRowRendering()}},created(){this.startRowRendering()},beforeDestroy(){cancelAnimationFrame(this.renderAnimationId)},methods:{update(){let e=getGameSpeedupFactor();this.achievementPower=Achievements.power,this.achTPEffect=RealityUpgrade(8).config.effect(),this.achCountdown=Achievements.timeToNextAutoAchieve.div(e),this.totalCountdown=new Decimal(Achievements.preReality.countWhere(e=>!e.isUnlocked)).sub(1).times(Achievements.period).add(Achievements.timeToNextAutoAchieve).div(e),this.missingAchievements=Achievements.preReality.countWhere(e=>!e.isUnlocked),this.showAutoAchieve=PlayerProgress.realityUnlocked()&&!Perk.achievementGroup5.isBought,this.isAutoAchieveActive=player.reality.autoAchieve,this.hideCompletedRows=player.options.hideCompletedAchievementRows,this.achMultBreak=BreakInfinityUpgrade.achievementMult.canBeApplied,this.achMultToIDS=Achievement(75).isUnlocked,this.achMultToTDS=EternityUpgrade.tdMultAchs.isBought,this.achMultToMDS=Achievement(142).isUnlocked,this.achMultToTP=RealityUpgrade(8).isBought,this.achMultToBH=VUnlocks.achievementBH.canBeApplied,this.achMultToTT=Ra.unlocks.achievementTTMult.canBeApplied},startRowRendering(){let e=[],t=[];for(let n=0;n<this.rows.length;n++)(this.rows[n].every(e=>e.isUnlocked)?e:t).push(n);let n=t.filter(e=>this.renderedRowIndices.includes(e)),r=t.filter(e=>!this.renderedRowIndices.includes(e)),i;player.options.hideCompletedAchievementRows?(this.renderedRowIndices=e.concat(n),i=r):(this.renderedRowIndices=n,i=e.concat(r));let a=()=>{for(let e=0;e<2;e++){if(i.length===0)return;this.renderedRowIndices.push(i.shift())}this.renderAnimationId=requestAnimationFrame(a)};a()},isRendered(e){return this.renderedRowIndices.includes(e)},isObscured(e){return this.isDoomed?!1:e===17},timeDisplay,timeDisplayNoDecimals}},iz=D(rz,function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-achievements-tab`},[t(`div`,{staticClass:`c-subtab-option-container`},[t(`PrimaryToggleButton`,{staticClass:`o-primary-btn--subtab-option`,attrs:{label:`Hide completed rows:`},model:{value:e.hideCompletedRows,callback:function(t){e.hideCompletedRows=t},expression:`hideCompletedRows`}}),e.showAutoAchieve?t(`PrimaryToggleButton`,{staticClass:`o-primary-btn--subtab-option`,attrs:{label:`Auto Achievements:`},model:{value:e.isAutoAchieveActive,callback:function(t){e.isAutoAchieveActive=t},expression:`isAutoAchieveActive`}}):e._e()],1),t(`div`,{staticClass:`c-achievements-tab__header c-achievements-tab__header--multipliers`},[e.isDoomed?t(`span`,[e._v(` All Achievement multipliers have been disabled`),t(`SwapAchievementImagesButton`)],1):t(`span`,[e._v(` Achievements provide a multiplier to`),t(`SwapAchievementImagesButton`),t(`div`,{domProps:{innerHTML:e._s(e.boostText)}})],1)]),e._m(0),e.showAutoAchieve?t(`div`,{staticClass:`c-achievements-tab__header`},[e.achCountdown.gt(0)?t(`div`,[e._v(` Automatically gain the next missing Achievement in `+e._s(e.timeDisplayNoDecimals(e.achCountdown))),e.isAutoAchieveActive?e._e():t(`span`,[e._v(` once Auto is turned on`)]),e._v(`. (left-to-right, top-to-bottom) `)]):e.missingAchievements===0?e._e():t(`div`,[e._v(` Automatically gain the next missing Achievement as soon as you enable Auto Achievements. (left-to-right, top-to-bottom) `)]),e.totalCountdown.gt(0)?t(`div`,[e._v(` You will regain all remaining achievements after `+e._s(e.timeDisplayNoDecimals(e.totalCountdown))+` if Auto Achievement `),e.isAutoAchieveActive?t(`span`,[e._v(`stays enabled`)]):t(`span`,[e._v(`is turned on`)]),e._v(`. `)]):e._e(),t(`br`)]):e._e(),t(`div`,{staticClass:`l-achievement-grid`},e._l(e.renderedRows,function(n,r){return t(`NormalAchievementRow`,{key:r,attrs:{row:n,"is-obscured":e.isObscured(r)}})}),1)])},[function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`c-achievements-tab__header`},[e._v(` Achievements with a `),t(`i`,{staticClass:`fas fa-star`}),e._v(` icon also give an additional reward. `)])}],!1,null,null,null,null).exports,az={name:`NormalChallengeBox`,components:{ChallengeBox:ve,DescriptionDisplay:u},props:{challenge:{type:Object,required:!0}},data(){return{isDoomed:!1,isDisabled:!1,isRunning:!1,isCompleted:!1,isBroken:!1,isUnlocked:!1,lockedAt:new Decimal}},computed:{descriptionDisplayConfig(){return this.isUnlocked?this.challenge.config:{description:`Infinity ${formatInt(this.challenge.config.lockedAt)} times to unlock.`}},name(){return`C${this.challenge.id}`},overrideLabel(){return this.isBroken?`Broken`:``}},methods:{update(){this.isDisabled=this.challenge.isDisabled,this.isUnlocked=this.challenge.isUnlocked,this.isRunning=this.challenge.isRunning,this.lockedAt=this.challenge.config.lockedAt,this.isBroken=Enslaved.isRunning&&Enslaved.BROKEN_CHALLENGES.includes(this.challenge.id),this.isCompleted=this.challenge.isCompleted&&!this.isBroken}}},oz=D(az,function(){var e=this,t=e._self._c;return t(`ChallengeBox`,{staticClass:`c-challenge-box--normal`,attrs:{name:e.name,"is-unlocked":e.isUnlocked,"is-running":e.isRunning,"is-completed":e.isCompleted,"override-label":e.overrideLabel,"locked-at":e.lockedAt},on:{start:function(t){return e.challenge.requestStart()}},scopedSlots:e._u([{key:`top`,fn:function(){return[t(`DescriptionDisplay`,{attrs:{config:e.descriptionDisplayConfig}})]},proxy:!0},{key:`bottom`,fn:function(){return[t(`span`,{class:{"o-pelle-disabled":e.isDisabled}},[e._v(`Reward: `+e._s(e.challenge.config.reward))])]},proxy:!0}])})},[],!1,null,`f8133a44`,null,null).exports,sz=D({name:`NormalChallengesTab`,components:{ChallengeGrid:_e,ChallengeTabHeader:ge,NormalChallengeBox:oz},computed:{challenges(){return NormalChallenges.all}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-challenges-tab`},[t(`ChallengeTabHeader`),t(`div`,[e._v(` Some Normal Challenges have requirements to be able to run that challenge. `)]),t(`div`,[e._v(` If you have an active Big Crunch Autobuyer, it will attempt to Crunch as soon as possible when reaching Infinite antimatter. `)]),t(`ChallengeGrid`,{attrs:{challenges:e.challenges},scopedSlots:e._u([{key:`default`,fn:function({challenge:e}){return[t(`NormalChallengeBox`,{attrs:{challenge:e}})]}}])})],1)},[],!1,null,`28edee37`,null,null).exports,cz=D({name:`OptionsButton`,components:{PrimaryButton:L}},function(){var e=this,t=e._self._c;return t(`PrimaryButton`,{staticClass:`o-primary-btn--option l-options-grid__button`,on:{click:e.emitClick}},[e._t(`default`)],2)},[],!1,null,null,null,null).exports,lz=D({name:`OptionsGameplayTab`,components:{OpenModalHotkeysButton:nI,OptionsButton:cz,PrimaryToggleButton:R,SliderComponent:Lw},data(){return{offlineProgress:!1,hibernationCatchup:!1,hotkeys:!1,offlineSlider:0,offlineTicks:0,automaticTabSwitching:!1,infinityUnlocked:!1,automatorUnlocked:!1,automatorLogSize:0}},computed:{sliderPropsOfflineTicks(){return{min:22,max:54,interval:1,width:`100%`,tooltip:!1}},sliderPropsAutomatorLogSize(){return{min:50,max:500,interval:50,width:`100%`,tooltip:!1}}},watch:{offlineProgress(e){player.options.offlineProgress=e},hibernationCatchup(e){player.options.hibernationCatchup=e},hotkeys(e){player.options.hotkeys=e},offlineSlider(e){player.options.offlineTicks=this.parseOfflineSlider(e)},automaticTabSwitching(e){player.options.automaticTabSwitching=e},automatorLogSize(e){player.options.automatorEvents.maxEntries=Number.parseInt(e,10)}},created(){let e=player.options.offlineTicks,t=Math.floor(Math.log10(e)),n=e/10**t-1;this.offlineSlider=9*t+n},methods:{update(){let e=player.options;this.offlineProgress=e.offlineProgress,this.hibernationCatchup=e.hibernationCatchup,this.hotkeys=e.hotkeys,this.offlineTicks=player.options.offlineTicks,this.automaticTabSwitching=e.automaticTabSwitching,this.infinityUnlocked=PlayerProgress.current.isInfinityUnlocked,this.automatorUnlocked=Player.automatorUnlocked,this.automatorLogSize=e.automatorEvents.maxEntries},parseOfflineSlider(e){let t=Number.parseInt(e,10);return(1+t%9)*10**Math.floor(t/9)},adjustSliderValueOfflineTicks(e){this.offlineSlider=e,player.options.offlineTicks=this.parseOfflineSlider(e)},adjustSliderValueAutomatorLogSize(e){this.automatorLogSize=e,player.options.automatorEvents.maxEntries=this.automatorLogSize}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-options-tab`},[t(`div`,{staticClass:`l-options-grid`},[t(`div`,{staticClass:`l-options-grid__row`},[t(`OptionsButton`,{staticClass:`o-primary-btn--option`,attrs:{onclick:`Modal.confirmationOptions.show()`}},[e._v(` Open Confirmation Options `)]),t(`PrimaryToggleButton`,{staticClass:`o-primary-btn--option l-options-grid__button`,attrs:{label:`Hotkeys:`,on:`Enabled`,off:`Disabled`},model:{value:e.hotkeys,callback:function(t){e.hotkeys=t},expression:`hotkeys`}}),t(`PrimaryToggleButton`,{staticClass:`o-primary-btn--option l-options-grid__button l-toggle-button`,attrs:{label:`Switch tabs on some events (e.g. entering challenges):`},model:{value:e.automaticTabSwitching,callback:function(t){e.automaticTabSwitching=t},expression:`automaticTabSwitching`}})],1),t(`div`,{staticClass:`l-options-grid__row`},[t(`PrimaryToggleButton`,{staticClass:`o-primary-btn--option l-options-grid__button`,attrs:{label:`Offline progress:`},model:{value:e.offlineProgress,callback:function(t){e.offlineProgress=t},expression:`offlineProgress`}}),t(`div`,{staticClass:`o-primary-btn o-primary-btn--option o-primary-btn--slider l-options-grid__button`},[t(`b`,[e._v(`Offline ticks: `+e._s(e.formatInt(e.offlineTicks)))]),t(`SliderComponent`,e._b({staticClass:`o-primary-btn--slider__slider`,attrs:{value:e.offlineSlider},on:{input:function(t){return e.adjustSliderValueOfflineTicks(t)}}},`SliderComponent`,e.sliderPropsOfflineTicks,!1))],1),t(`PrimaryToggleButton`,{staticClass:`o-primary-btn--option l-options-grid__button`,attrs:{label:`Run suspended time as offline:`},model:{value:e.hibernationCatchup,callback:function(t){e.hibernationCatchup=t},expression:`hibernationCatchup`}})],1),t(`div`,{staticClass:`l-options-grid__row`},[e.automatorUnlocked?t(`div`,{staticClass:`o-primary-btn o-primary-btn--option o-primary-btn--slider l-options-grid__button`},[t(`b`,[e._v(`Automator Log Max: `+e._s(e.formatInt(parseInt(e.automatorLogSize))))]),t(`SliderComponent`,e._b({staticClass:`o-primary-btn--slider__slider`,attrs:{value:e.automatorLogSize},on:{input:function(t){return e.adjustSliderValueAutomatorLogSize(t)}}},`SliderComponent`,e.sliderPropsAutomatorLogSize,!1))],1):e._e()]),t(`OpenModalHotkeysButton`)],1)])},[],!1,null,`2574072a`,null,null).exports,uz={name:`AutosaveIntervalSlider`,components:{SliderComponent:Lw},props:{min:{type:Number,required:!0},max:{type:Number,required:!0},interval:{type:Number,required:!0}},data(){return{sliderInterval:10}},computed:{sliderProps(){return{min:this.min,max:this.max,interval:this.interval,width:`100%`,tooltip:!1}}},methods:{update(){this.sliderInterval=player.options.autosaveInterval/1e3},adjustSliderValue(e){this.sliderInterval=e,player.options.autosaveInterval=this.sliderInterval*1e3,GameOptions.refreshAutosaveInterval()}}},dz=D(uz,function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`o-primary-btn o-primary-btn--option o-primary-btn--slider l-options-grid__button`},[t(`b`,[e._v(`Autosave interval: `+e._s(e.formatInt(e.sliderInterval))+`s`)]),t(`SliderComponent`,e._b({staticClass:`o-primary-btn--slider__slider`,attrs:{value:e.sliderInterval},on:{input:function(t){return e.adjustSliderValue(t)}}},`SliderComponent`,e.sliderProps,!1))],1)},[],!1,null,null,null,null).exports,fz=D({name:`SaveFileName`,components:{},data(){return{saveFileName:``}},methods:{update(){this.saveFileName=player.options.saveFileName},removeNotAvailableCharacters(e){return e.replaceAll(/[^a-zA-Z0-9 -]/gu,``)},handleChange(e){let t=this.removeNotAvailableCharacters(e.target.value.trim());player.options.saveFileName=t,e.target.value=t}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`o-primary-btn o-primary-btn--option o-primary-btn--input l-options-grid__button`},[t(`b`,[e._v(`Save file name:`)]),t(`span`,{attrs:{"ach-tooltip":`Set a custom name (up to 16 alphanumeric characters, including space and hyphen)`}},[t(`input`,{staticClass:`c-custom-save-name__input`,attrs:{type:`text`,maxlength:`16`,placeholder:`Custom save name`},domProps:{value:e.saveFileName},on:{change:e.handleChange}})])])},[],!1,null,`252fedab`,null,null).exports,pz=D({name:`OptionsSavingTab`,components:{AutosaveIntervalSlider:dz,OpenModalHotkeysButton:nI,OptionsButton:cz,PrimaryToggleButton:R,SaveFileName:fz},data(){return{cloudAvailable:!1,cloudEnabled:!1,forceCloudOverwrite:!1,showCloudModal:!1,syncSaveIntervals:!1,showTimeSinceSave:!1,hideGoogleName:!1,loggedIn:!1,userName:``,canSpeedrun:!1,inSpeedrun:!1,creditsClosed:!1,canModifySeed:!1}},computed:{modalTooltip(){return`The game will detect certain situations where you might not want to overwrite your cloud save, and show
        you a modal with more information if this is ON.`},overwriteTooltip(){return this.showCloudModal?`This setting does nothing since the modal is being shown.`:this.forceCloudOverwrite?`Your local save will always overwrite your cloud save no matter what.`:`Save conflicts will prevent your local save from being saved to the cloud.`},STEAM(){return!1}},watch:{cloudEnabled(e){player.options.cloudEnabled=e},forceCloudOverwrite(e){player.options.forceCloudOverwrite=e},showCloudModal(e){player.options.showCloudModal=e},syncSaveIntervals(e){player.options.syncSaveIntervals=e},showTimeSinceSave(e){player.options.showTimeSinceSave=e},hideGoogleName(e){player.options.hideGoogleName=e}},methods:{update(){let e=player.options;this.cloudAvailable=Cloud.isAvailable,this.cloudEnabled=e.cloudEnabled,this.forceCloudOverwrite=e.forceCloudOverwrite,this.showCloudModal=e.showCloudModal,this.syncSaveIntervals=e.syncSaveIntervals,this.showTimeSinceSave=e.showTimeSinceSave,this.hideGoogleName=e.hideGoogleName,this.loggedIn=Cloud.loggedIn,this.canSpeedrun=player.speedrun.isUnlocked,this.inSpeedrun=player.speedrun.isActive,this.canModifySeed=Speedrun.canModifySeed(),this.creditsClosed=GameEnd.creditsEverClosed,this.loggedIn&&(this.userName=Cloud.user.displayName)},importAsFile(e){if(e.target.files.length===0)return;let t=new FileReader;t.onload=function(){GameStorage.offlineEnabled=player.options.offlineProgress,GameStorage.offlineTicks=player.options.offlineTicks,GameStorage.import(t.result)},t.readAsText(e.target.files[0])},openSeedModal(){this.canModifySeed?Modal.modifySeed.show():Modal.message.show(`You cannot modify your seed any more. Glyph RNG has already been used to generate
          at least one Glyph on this run.`)}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-options-tab`},[t(`div`,{staticClass:`l-options-grid`},[t(`div`,{staticClass:`l-options-grid__row`},[t(`OptionsButton`,{staticClass:`o-primary-btn--option_font-x-large`,class:{"o-pelle-disabled-pointer":e.creditsClosed},attrs:{onclick:`GameStorage.export()`}},[e._v(` Export save `)]),t(`OptionsButton`,{staticClass:`o-primary-btn--option_font-x-large`,class:{"o-pelle-disabled-pointer":e.creditsClosed},attrs:{onclick:`Modal.import.show()`}},[e._v(` Import save `)]),t(`OptionsButton`,{staticClass:`o-primary-btn--option_font-x-large`,class:{"o-pelle-disabled-pointer":e.creditsClosed},attrs:{onclick:`Modal.hardReset.show()`}},[e._v(` RESET THE GAME `)])],1),t(`div`,{staticClass:`l-options-grid__row`},[t(`OptionsButton`,{staticClass:`o-primary-btn--option_font-x-large`,class:{"o-pelle-disabled-pointer":e.creditsClosed},attrs:{onclick:`GameStorage.save(false, true)`}},[e._v(` Save game `)]),t(`OptionsButton`,{staticClass:`o-primary-btn--option_font-x-large`,class:{"o-pelle-disabled-pointer":e.creditsClosed},attrs:{onclick:`Modal.loadGame.show()`}},[e._v(` Choose save `)]),t(`AutosaveIntervalSlider`,{attrs:{min:10,max:60,interval:1}})],1),t(`div`,{staticClass:`l-options-grid__row`},[t(`OptionsButton`,{class:{"o-pelle-disabled-pointer":e.creditsClosed},attrs:{onclick:`GameStorage.exportAsFile()`}},[e._v(` Export save as file `)]),t(`OptionsButton`,{staticClass:`c-file-import-button`,class:{"o-pelle-disabled-pointer":e.creditsClosed}},[t(`input`,{staticClass:`c-file-import`,attrs:{type:`file`,accept:`.txt`},on:{change:e.importAsFile}}),t(`label`,{attrs:{for:`file`}},[e._v(`Import save from file`)])]),t(`PrimaryToggleButton`,{staticClass:`o-primary-btn--option l-options-grid__button`,class:{"o-pelle-disabled-pointer":e.creditsClosed},attrs:{label:`Display time since save:`},model:{value:e.showTimeSinceSave,callback:function(t){e.showTimeSinceSave=t},expression:`showTimeSinceSave`}})],1),t(`div`,{staticClass:`l-options-grid__row`},[t(`OptionsButton`,{class:{"o-pelle-disabled-pointer":e.creditsClosed},attrs:{onclick:`Modal.backupWindows.show()`}},[e._v(` Open Automatic Save Backup Menu `)]),t(`SaveFileName`)],1),t(`div`,{staticClass:`l-options-grid__row`},[e.canSpeedrun?t(`OptionsButton`,{staticClass:`o-primary-btn--option_font-x-large`,class:{"o-pelle-disabled-pointer":e.creditsClosed},attrs:{onclick:`Modal.enterSpeedrun.show()`}},[e._v(` Start Speedrun `)]):e._e(),e.inSpeedrun?t(`OptionsButton`,{class:{"o-pelle-disabled-pointer":e.creditsClosed,"o-primary-btn--disabled":!e.canModifySeed},on:{click:function(t){return e.openSeedModal()}}},[e._v(` Change Glyph RNG Seed `)]):e._e()],1),t(`OpenModalHotkeysButton`)],1),e.cloudAvailable?t(`h2`,{staticClass:`c-cloud-options-header`},[e.hideGoogleName?t(`span`,[e._v(`Logged in to Google `),t(`i`,[e._v(`(name hidden)`)])]):e.loggedIn?t(`span`,[e._v(`Logged in as `+e._s(e.userName))]):t(`span`,[e._v(`Not logged in`)])]):e._e(),e.loggedIn?t(`div`,[e.cloudEnabled?t(`span`,[e._v(`Cloud Saving will occur automatically every 10 minutes.`)]):t(`span`,[e._v(`Cloud Saving has been disabled on this save.`)])]):e._e(),e.cloudAvailable?t(`div`,{staticClass:`l-options-grid`},[e.STEAM?e._e():t(`div`,{staticClass:`l-options-grid__row`},[e.loggedIn?t(`OptionsButton`,{attrs:{onclick:`GameOptions.logout()`}},[e._v(` Disconnect Google Account and disable Cloud Saving `)]):t(`OptionsButton`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:`This will connect your Google Account to your Antimatter Dimensions savefiles`,expression:`'This will connect your Google Account to your Antimatter Dimensions savefiles'`}],class:{"o-pelle-disabled-pointer":e.creditsClosed}},[e._v(` Login with Google to enable Cloud Saving `)]),e.loggedIn?t(`PrimaryToggleButton`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:`This will hide your Google Account name from the UI for privacy. Saving/loading is unaffected.`,expression:`'This will hide your Google Account name from the UI for privacy. Saving/loading is unaffected.'`}],staticClass:`o-primary-btn--option l-options-grid__button`,class:{"o-pelle-disabled-pointer":e.creditsClosed},attrs:{label:`Hide Google Account name:`},model:{value:e.hideGoogleName,callback:function(t){e.hideGoogleName=t},expression:`hideGoogleName`}}):e._e()],1),e.loggedIn?t(`div`,{staticClass:`l-options-grid__row`},[t(`OptionsButton`,{class:{"o-pelle-disabled-pointer":e.creditsClosed},attrs:{onclick:`GameOptions.cloudSave()`}},[e._v(` Cloud save `)]),t(`OptionsButton`,{class:{"o-pelle-disabled-pointer":e.creditsClosed},attrs:{onclick:`GameOptions.cloudLoad()`}},[e._v(` Cloud load `)]),t(`PrimaryToggleButton`,{staticClass:`o-primary-btn--option l-options-grid__button`,class:{"o-pelle-disabled-pointer":e.creditsClosed},attrs:{label:`Force local save before cloud saving:`},model:{value:e.syncSaveIntervals,callback:function(t){e.syncSaveIntervals=t},expression:`syncSaveIntervals`}})],1):e._e(),e.loggedIn?t(`div`,{staticClass:`l-options-grid__row`},[t(`PrimaryToggleButton`,{staticClass:`o-primary-btn--option l-options-grid__button`,class:{"o-pelle-disabled-pointer":e.creditsClosed},attrs:{label:`Automatic cloud saving/loading:`},model:{value:e.cloudEnabled,callback:function(t){e.cloudEnabled=t},expression:`cloudEnabled`}}),t(`PrimaryToggleButton`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:e.modalTooltip,expression:`modalTooltip`}],staticClass:`o-primary-btn--option l-options-grid__button`,class:{"o-pelle-disabled-pointer":e.creditsClosed},attrs:{label:`Show modal if possible saving conflict:`},model:{value:e.showCloudModal,callback:function(t){e.showCloudModal=t},expression:`showCloudModal`}}),t(`PrimaryToggleButton`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:e.overwriteTooltip,expression:`overwriteTooltip`}],staticClass:`o-primary-btn--option l-options-grid__button`,class:{"o-pelle-disabled-pointer":e.creditsClosed},attrs:{label:`Force cloud saving despite conflicts:`},model:{value:e.forceCloudOverwrite,callback:function(t){e.forceCloudOverwrite=t},expression:`forceCloudOverwrite`}})],1):e._e()]):e._e()])},[],!1,null,null,null,null).exports,mz=D({name:`SelectLargeNotationDropdown`,computed:{notations:()=>LNotations.all}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-select-notation`},[t(`div`,{staticClass:`l-select-notation__inner`},e._l(e.notations,function(n){return t(`div`,{key:n.name,staticClass:`o-primary-btn l-select-notation__item c-select-notation__item`,on:{click:function(e){return n.setAsCurrent()}}},[e._v(` `+e._s(n.name)+` `)])}),0)])},[],!1,null,null,null,null).exports,hz=D({name:`SelectNotationDropdown`,computed:{notations:()=>Notations.all}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-select-notation`},[t(`div`,{staticClass:`l-select-notation__inner`},e._l(e.notations,function(n){return t(`div`,{key:n.name,staticClass:`o-primary-btn l-select-notation__item c-select-notation__item`,on:{click:function(e){return n.setAsCurrent()}}},[e._v(` `+e._s(n.name)+` `)])}),0)])},[],!1,null,null,null,null).exports,gz=D({name:`SelectSidebarDropdown`,computed:{resourceDB:()=>GameDatabase.sidebarResources,resources(){return this.resourceDB.filter(e=>e.isAvailable())}},methods:{setResource(e){player.options.sidebarResourceID=e}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-select-theme`},[t(`div`,{staticClass:`l-select-theme__inner`},[t(`div`,{key:`Default`,staticClass:`o-primary-btn l-select-theme__item c-select-theme__item`,on:{click:function(t){return e.setResource(0)}}},[e._v(` Latest Resource `)]),e._l(e.resources,function(n){return t(`div`,{key:n.name,staticClass:`o-primary-btn l-select-theme__item c-select-theme__item`,on:{click:function(t){return e.setResource(n.id)}}},[e._v(` `+e._s(n.optionName)+` `)])})],2)])},[],!1,null,null,null,null).exports,_z=D({name:`SelectThemeDropdown`,data(){return{availableThemeNames:[]}},computed:{themes(){return this.availableThemeNames.map(e=>Themes.find(e))}},methods:{update(){this.availableThemeNames=Themes.available().map(e=>e.name)}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-select-theme`},[t(`div`,{staticClass:`l-select-theme__inner`},e._l(e.themes,function(n){return t(`div`,{key:n.name,staticClass:`o-primary-btn l-select-theme__item c-select-theme__item`,on:{click:function(e){return n.set()}}},[e._v(` `+e._s(n.displayName())+` `)])}),0)])},[],!1,null,null,null,null).exports,vz={name:`OptionsVisualTab`,components:{UpdateRateSlider:D({name:`UpdateRateSlider`,components:{SliderComponent:Lw},data(){return{updateRate:0}},computed:{sliderProps(){return{min:33,max:200,interval:1,width:`100%`,tooltip:!1}}},methods:{update(){this.updateRate=player.options.updateRate},adjustSliderValue(e){this.updateRate=e,player.options.updateRate=this.updateRate,GameOptions.refreshUpdateRate()}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`o-primary-btn o-primary-btn--option o-primary-btn--slider l-options-grid__button`},[t(`b`,[e._v(`Update rate: `+e._s(e.formatInt(e.updateRate))+` ms`)]),t(`SliderComponent`,e._b({staticClass:`o-primary-btn--slider__slider`,attrs:{value:e.updateRate},on:{input:function(t){return e.adjustSliderValue(t)}}},`SliderComponent`,e.sliderProps,!1))],1)},[],!1,null,null,null,null).exports,PrimaryToggleButton:R,ExpandingControlBox:Pt,OptionsButton:cz,OpenModalHotkeysButton:nI,SelectThemeDropdown:_z,SelectNotationDropdown:hz,SelectSidebarDropdown:gz,SelectLargeNotationDropdown:mz},data(){return{theme:``,notation:``,lnotation:``,sidebarResource:``,headerTextColored:!0}},computed:{sidebarDB:()=>GameDatabase.sidebarResources,themeLabel(){return`Theme: ${Themes.find(this.theme).displayName()}`},notationLabel(){return`Notation: ${this.notation}`},postNotationLabel(){return`Large Notation: ${this.lnotation}`},sidebarLabel(){return`Sidebar (Modern UI): ${this.sidebarResource}`},UILabel(){return`UI: ${this.$viewModel.newUI?`Modern`:`Classic`}`}},watch:{headerTextColored(e){player.options.headerTextColored=e}},methods:{update(){let e=player.options;this.theme=Theme.currentName(),this.notation=e.notation,this.lnotation=e.lnotation,this.sidebarResource=player.options.sidebarResourceID===0?`Latest Resource`:this.sidebarDB.find(e=>e.id===player.options.sidebarResourceID).optionName,this.headerTextColored=e.headerTextColored}}},yz=D(vz,function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-options-tab`},[t(`div`,{staticClass:`l-options-grid`},[t(`div`,{staticClass:`l-options-grid__row`},[t(`OptionsButton`,{staticClass:`o-primary-btn--option_font-large`,attrs:{onclick:`GameOptions.toggleUI()`}},[e._v(` `+e._s(e.UILabel)+` `)]),t(`UpdateRateSlider`),t(`OptionsButton`,{staticClass:`o-primary-btn--option`,attrs:{onclick:`Modal.newsOptions.show();`}},[e._v(` Open News Options `)])],1),t(`div`,{staticClass:`l-options-grid__row`},[t(`ExpandingControlBox`,{staticClass:`l-options-grid__button c-options-grid__notations`,attrs:{"button-class":`o-primary-btn o-primary-btn--option l-options-grid__notations-header`,label:e.themeLabel},scopedSlots:e._u([{key:`dropdown`,fn:function(){return[t(`SelectThemeDropdown`)]},proxy:!0}])}),t(`ExpandingControlBox`,{staticClass:`l-options-grid__button c-options-grid__notations`,attrs:{"button-class":`o-primary-btn o-primary-btn--option l-options-grid__notations-header`,label:e.notationLabel},scopedSlots:e._u([{key:`dropdown`,fn:function(){return[t(`SelectNotationDropdown`)]},proxy:!0}])}),t(`OptionsButton`,{staticClass:`o-primary-btn--option`,attrs:{onclick:`Modal.notation.show();`}},[e._v(` Open Exponent Notation Options `)])],1),t(`div`,{staticClass:`l-options-grid__row`},[t(`OptionsButton`,{staticClass:`o-primary-btn--option`,attrs:{onclick:`Modal.animationOptions.show();`}},[e._v(` Open Animation Options `)]),t(`OptionsButton`,{staticClass:`o-primary-btn--option`,attrs:{onclick:`Modal.infoDisplayOptions.show()`}},[e._v(` Open Info Display Options `)]),t(`OptionsButton`,{staticClass:`o-primary-btn--option`,attrs:{onclick:`Modal.awayProgressOptions.show()`}},[e._v(` Open Away Progress Options `)])],1),t(`div`,{staticClass:`l-options-grid__row`},[t(`OptionsButton`,{staticClass:`o-primary-btn--option`,attrs:{onclick:`Modal.hiddenTabs.show()`}},[e._v(` Modify Visible Tabs `)]),t(`PrimaryToggleButton`,{staticClass:`o-primary-btn--option l-options-grid__button`,attrs:{label:`Relative prestige gain text coloring:`},model:{value:e.headerTextColored,callback:function(t){e.headerTextColored=t},expression:`headerTextColored`}}),e.$viewModel.newUI?t(`ExpandingControlBox`,{staticClass:`l-options-grid__button c-options-grid__notations`,attrs:{"button-class":`o-primary-btn o-primary-btn--option l-options-grid__notations-header`,label:e.sidebarLabel},scopedSlots:e._u([{key:`dropdown`,fn:function(){return[t(`SelectSidebarDropdown`)]},proxy:!0}],null,!1,409945354)}):e._e()],1),t(`div`,{staticClass:`l-options-grid__row`},[t(`ExpandingControlBox`,{staticClass:`l-options-grid__button c-options-grid__notations`,attrs:{"button-class":`o-primary-btn o-primary-btn--option l-options-grid__notations-header`,label:e.postNotationLabel},scopedSlots:e._u([{key:`dropdown`,fn:function(){return[t(`SelectLargeNotationDropdown`)]},proxy:!0}])})],1),t(`OpenModalHotkeysButton`)],1)])},[],!1,null,null,null,null).exports;function bz(e){let t=e.filter(e=>e[0]<1e290);t.length===0&&(t=[e[0]]);let n=e.map(e=>e.length).max(),r=[];for(let e=0;n.gt(e);e++){if(typeof t[0][e]==`string`){r.push(``);continue}let n=typeof t[0][e]==`number`,i=t.map(t=>t[e]).reduce(n?Number.sumReducer:Decimal.sumReducer);r.push(n?i/t.length:Decimal.div(i,t.length))}return r}var xz={name:`PastPrestigeRunsContainer`,props:{layer:{type:Object,required:!0}},data(){return{isRealityUnlocked:!1,resourceType:!1,selectedResources:[],resourceTitles:[],showRealTime:!1,runs:[],hasEmptyRecord:!1,shown:!0,hasChallenges:!1,longestRow:0,hasIM:!1}},computed:{averageRun(){return bz(this.runs)},dropDownIconClass(){return this.shown?`far fa-minus-square`:`far fa-plus-square`},points(){let e=this.layer.currency;return e===`RM`&&this.hasIM?`iM Cap`:e},condition(){return this.layer.condition()},plural(){return this.layer.plural},singular(){return this.layer.name},getRuns(){return this.layer.getRuns},hasRealTime:()=>PlayerProgress.seenAlteredSpeed()},methods:{update(){this.runs=this.clone(this.getRuns()),this.hasEmptyRecord=this.runs[0][0]===Number.MAX_VALUE,this.runs.push(this.averageRun),this.isRealityUnlocked=PlayerProgress.current.isRealityUnlocked,this.shown=player.shownRuns[this.singular],this.resourceType=player.options.statTabResources,this.showRate=this.resourceType===RECENT_PRESTIGE_RESOURCE.RATE,this.hasChallenges=this.runs.map(e=>this.challengeText(e)).some(e=>e),this.hasIM=MachineHandler.currentIMCap.gt(0);let e=[this.points,`${this.points} Rate`,this.plural,`${this.singular} Rate`];switch(this.resourceType){case RECENT_PRESTIGE_RESOURCE.ABSOLUTE_GAIN:this.selectedResources=[0,2];break;case RECENT_PRESTIGE_RESOURCE.RATE:this.selectedResources=[1,3];break;case RECENT_PRESTIGE_RESOURCE.CURRENCY:this.selectedResources=[0,1];break;case RECENT_PRESTIGE_RESOURCE.PRESTIGE_COUNT:this.selectedResources=[2,3];break;default:throw Error(`Unrecognized Statistics tab resource type`)}this.resourceTitles=[e[this.selectedResources[0]],e[this.selectedResources[1]]];let t=e=>{let t=e.length;for(;t>0;){let n=e[t-1];if(typeof n==`string`&&n!==``||typeof n!=`string`&&Decimal.neq(n,0))return t;t--}return 0};this.longestRow=this.runs.map(e=>t(e)).nMax()},clone(e){return e.map(e=>e.map(e=>e instanceof Decimal?Decimal.fromDecimal(e):e))},infoArray(e,t){let n=t===0?`Last`:t===10?`Average`:`${formatInt(t+1)} ago`,r=[n,this.gameTime(e)];this.hasRealTime&&r.push(this.realTime(e)),this.hasRealTime&&r.push(this.trueTime(e));let i=[this.prestigeCurrencyGain(e),this.prestigeCurrencyRate(e),this.prestigeCountGain(e),this.prestigeCountRate(e)];r.push(i[this.selectedResources[0]]),r.push(i[this.selectedResources[1]]),this.hasChallenges&&r.push(this.challengeText(e));for(let t=0;t<this.layer.extra?.length&&r.length<=this.longestRow;t++){if(!this.layer.showExtra[t]())continue;let n=this.layer.formatExtra[t],i=e[t+5]??0;this.layer.allowRate[t]&&this.showRate?r.push(this.rateText(e,e[t+5])):r.push(n(i))}return r},infoCol(){let e=[`Run`,this.hasRealTime?`Game Time`:`Time in Run`];this.hasRealTime&&e.push(`Real Time`),this.hasRealTime&&e.push(`True Time`),e.push(...this.resourceTitles),this.hasChallenges&&e.push(`Challenge`);for(let t=0;t<this.layer.extra?.length&&e.length<=this.longestRow;t++)this.layer.showExtra[t]()&&e.push(this.layer.allowRate[t]&&this.showRate?this.layer.rateString[t]:this.layer.extra[t]);return e},gameTime(e){return timeDisplayShort(e[1])},realTime(e){return timeDisplayShort(e[2])},trueTime(e){return timeDisplayShort(new Decimal(e[0]))},prestigeCurrencyGain(e){return this.hasIM&&this.layer.name===`Reality`?`${format(e[8],2)} iM`:`${format(e[3],2)} ${this.points}`},prestigeCountGain(e){return quantify(this.singular,e[4])},prestigeCurrencyRate(e){return this.hasIM&&this.layer.name===`Reality`?`N/A`:this.rateText(e,e[3])},prestigeCountRate(e){return this.rateText(e,e[4])},rateText(e,t){let n=e[2],r=ratePerMinute(t,n);return Decimal.lt(r,1)?`${format(Decimal.mul(r,60),2,2)} per hour`:`${format(r,2,2)} per min`},challengeText(e){let t=e[5];return t===`The Nameless Ones`?`Nameless`:t},toggleShown(){player.shownRuns[this.singular]=!player.shownRuns[this.singular]},cellStyle(e,t){let n;switch(e){case 0:n=`7rem`;break;case 4:case 5:n=this.layer.name===`Reality`?`15rem`:`20rem`;break;case 6:n=this.layer.name===`Reality`?`10rem`:`20rem`;break;default:n=`13rem`}return{width:n,border:`0.05rem solid #999999`,margin:`-0.05rem`,padding:`0.2rem 0`,"border-bottom-width":t?`0.3rem`:`0.1rem`,"font-weight":t?`bold`:null,color:`var(--color-text)`}}}},Sz={name:`PastPrestigeRunsTab`,components:{PastPrestigeRunsContainer:D(xz,function(){var e=this,t=e._self._c;return e.condition?t(`div`,[t(`div`,{staticClass:`c-past-runs-header`,on:{click:e.toggleShown}},[t(`span`,{staticClass:`o-run-drop-down-icon`},[t(`i`,{class:e.dropDownIconClass})]),t(`span`,[t(`h3`,[e._v(`Last `+e._s(e.formatInt(10))+` `+e._s(e.plural)+`:`)])])]),t(`div`,{directives:[{name:`show`,rawName:`v-show`,value:e.shown,expression:`shown`}]},[t(`div`,{staticClass:`c-row-container`},e._l(e.infoCol(),function(n,r){return t(`span`,{key:r,style:e.cellStyle(r,!0)},[e._v(` `+e._s(n)+` `)])}),0),e._l(e.runs,function(n,r){return t(`div`,{key:r},[n[0]===Number.MAX_VALUE?t(`span`,{staticClass:`c-empty-row`},[r===10?t(`i`,[e._v(` An average cannot be calculated with no `+e._s(e.plural)+`. `)]):t(`i`,[e._v(` You have not done `+e._s(e.formatInt(r+1))+` `+e._s(r===0?e.singular:e.plural)+` yet. `)])]):t(`span`,{staticClass:`c-row-container`},e._l(e.infoArray(n,r),function(n,i){return t(`span`,{key:10*r+i,style:e.cellStyle(i,!1)},[e._v(` `+e._s(n)+` `)])}),0)])}),t(`br`)],2)]):e._e()},[],!1,null,`b8ca075f`,null,null).exports},data(){return{layers:{reality:{name:`Reality`,plural:`Realities`,currency:`RM`,condition:()=>PlayerProgress.realityUnlocked(),getRuns:()=>player.records.recentRealities,extra:[`Glyph Level`,`Relic Shards`],showExtra:[()=>!0,()=>TeresaUnlocks.effarig.canBeApplied],formatExtra:[e=>formatInt(e),e=>format(e,2)],allowRate:[!1,!0],rateString:[``,`Relic Shard Rate`]},eternity:{name:`Eternity`,plural:`Eternities`,currency:`EP`,condition:()=>PlayerProgress.eternityUnlocked(),getRuns:()=>player.records.recentEternities,extra:[`Tachyon Particles`],showExtra:[()=>PlayerProgress.dilationUnlocked()],formatExtra:[e=>format(e,2)],allowRate:[!1]},infinity:{name:`Infinity`,plural:`Infinities`,currency:`IP`,condition:()=>PlayerProgress.infinityUnlocked(),getRuns:()=>player.records.recentInfinities}},resourceType:!1}},computed:{resourceText(){switch(this.resourceType){case RECENT_PRESTIGE_RESOURCE.ABSOLUTE_GAIN:return`total resource gain`;case RECENT_PRESTIGE_RESOURCE.RATE:return`resource gain rate`;case RECENT_PRESTIGE_RESOURCE.CURRENCY:return`prestige currency`;case RECENT_PRESTIGE_RESOURCE.PRESTIGE_COUNT:return`prestige count`;default:throw Error(`Unrecognized Statistics tab resource type`)}}},methods:{update(){this.resourceType=player.options.statTabResources},cycleButton(){let e=Object.keys(RECENT_PRESTIGE_RESOURCE).length;player.options.statTabResources=(player.options.statTabResources+1)%e}}},Cz=D(Sz,function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`c-stats-tab`},[t(`div`,{staticClass:`c-subtab-option-container`},[t(`button`,{staticClass:`o-primary-btn o-primary-btn--subtab-option`,on:{click:function(t){return e.cycleButton()}}},[e._v(` Showing `+e._s(e.resourceText)+` `)])]),e._l(e.layers,function(e){return t(`PastPrestigeRunsContainer`,{key:e.name,attrs:{layer:e}})})],2)},[],!1,null,null,null,null).exports,wz={name:`CustomizeableTooltip`,props:{tooltipContentStyle:{type:Object,required:!1,default:()=>({})},tooltipArrowStyle:{type:Object,required:!1,default:()=>({})},left:{type:String,required:!1,default:``},top:{type:String,required:!1,default:``},right:{type:String,required:!1,default:``},bottom:{type:String,required:!1,default:``},contentClass:{type:[Object,String],required:!1,default:``},tooltipClass:{type:[Object,String],required:!1,default:``},mode:{type:String,required:!1,default:`top`},show:{type:Boolean,required:!1}},data(){return{hovering:!1,mainContent:null,isDarkTheme:!1}},computed:{positionStyle(){return{left:this.left,top:this.top,right:this.right,bottom:this.bottom}},tooltipType(){return`c-tooltip--${this.mode}`},contentTransform(){let e=this.mode===`top`||this.mode===`bottom`?`X`:`Y`;return`translate${e}(${this.showNegativeSign(e)}50%)`},tooltipTransform(){switch(this.mode){case`top`:return`translate(${this.showNegativeSign(`X`)}50%, -100%)`;case`bottom`:return`translate(${this.showNegativeSign(`X`)}50%, 100%)`;case`right`:return`translate(100%, ${this.showNegativeSign(`Y`)}50%)`;case`left`:return`translate(-100%, ${this.showNegativeSign(`Y`)}50%)`;default:return``}},showTooltip(){return this.show||this.hovering},tooltipContentLightDarkClass(){return this.isDarkTheme?`c-tooltip-content--dark`:``},tooltipArrowLightDarkClass(){return this.isDarkTheme?`c-tooltip-arrow--dark`:``},tooltipInternalClass(){return{"c-tooltip-show":this.showTooltip,[this.tooltipType]:!0}},tooltipContentClass(){return[this.tooltipInternalClass,this.tooltipClass,this.tooltipContentLightDarkClass]},tooltipArrowClass(){return[this.tooltipInternalClass,this.tooltipArrowLightDarkClass]}},methods:{update(){this.isDarkTheme=Theme.current().isDark()},showNegativeSign(e){return e===`X`?this.left?`-`:``:this.top?`-`:``}}},Tz=D(wz,function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-custom-tooltip`},[t(`div`,{staticClass:`c-main-content`,class:e.contentClass,style:{...e.positionStyle,transform:e.contentTransform},on:{mouseenter:function(t){e.hovering=!0},mouseleave:function(t){e.hovering=!1}}},[e._t(`mainContent`)],2),t(`div`,{staticClass:`c-tooltip-content`,class:e.tooltipContentClass,style:[e.tooltipContentStyle,e.positionStyle,{transform:e.tooltipTransform}]},[e._t(`tooltipContent`)],2),t(`div`,{staticClass:`c-tooltip-arrow`,class:e.tooltipArrowClass,style:[e.tooltipArrowStyle,e.positionStyle,{transform:e.tooltipTransform}]})])},[],!1,null,`7589acc9`,null,null).exports,Ez={name:`PelleUpgrade`,components:{DescriptionDisplay:u,CostDisplay:pe,CustomizeableTooltip:Tz},props:{upgrade:{type:Object,required:!0},faded:{type:Boolean,required:!1},galaxyGenerator:{type:Boolean,required:!1},showImprovedEstimate:{type:Boolean,required:!1}},data(){return{canBuy:!1,isBought:!1,purchases:new Decimal(0),currentTimeEstimate:new Decimal(0),projectedTimeEstimate:new Decimal(0),isCapped:!1,hovering:!1,hasRemnants:!1,galaxyCap:0,notAffordable:!1}},computed:{config(){return this.upgrade.config},effectText(){if(!this.config.formatEffect)return!1;let e=this.isCapped?`Capped:`:`Currently:`,t=e=>this.config.formatEffect(this.config.effect(e)),n=t(this.purchases),r=!this.isCapped&&this.hovering?t(this.purchases.add(1)):void 0;return{prefix:e,value:n,next:r}},timeEstimate(){return!this.hasTimeEstimate||!this.hasRemnants?null:this.notAffordable?`Never affordable due to Generated Galaxy cap`:this.currentTimeEstimate},hasTimeEstimate(){return!(this.canBuy||this.isBought||this.isCapped||this.galaxyGenerator&&this.config.currencyLabel!==`Galaxy`)},shouldEstimateImprovement(){return this.showImprovedEstimate&&this.hasTimeEstimate},estimateImprovement(){return this.shouldEstimateImprovement?Pelle.canArmageddon?this.projectedTimeEstimate.startsWith(`>`)?this.projectedTimeEstimate:`${this.currentTimeEstimate} ➜ ${this.projectedTimeEstimate}`:`${this.currentTimeEstimate}`:``}},methods:{update(){this.canBuy=this.upgrade.canBeBought&&!this.faded,this.isBought=this.upgrade.isBought,this.isCapped=this.upgrade.isCapped,this.purchases.copyFrom(player.celestials.pelle.rebuyables[this.upgrade.config.id]??new Decimal(0)),this.currentTimeEstimate=TimeSpan.fromSeconds(this.secondsUntilCost(this.galaxyGenerator?GalaxyGenerator.gainPerSecond:Pelle.realityShardGainPerSecond)).toTimeEstimate(),this.projectedTimeEstimate=TimeSpan.fromSeconds(this.secondsUntilCost(Pelle.nextRealityShardGain)).toTimeEstimate(),this.hasRemnants=Pelle.cel.remnants.gt(0),this.galaxyCap=GalaxyGenerator.generationCap;let e=GameDatabase.celestials.pelle.galaxyGeneratorUpgrades;this.notAffordable=(this.config===e.additive||this.config===e.multiplicative)&&Decimal.gt(this.upgrade.cost,this.galaxyCap.sub(GalaxyGenerator.generatedGalaxies.add(player.galaxies)))},secondsUntilCost(e){let t=this.galaxyGenerator?player.galaxies.add(GalaxyGenerator.galaxies):Currency.realityShards.value;return Decimal.sub(this.upgrade.cost,t).div(e)}}},Dz=D(Ez,function(){var e=this,t=e._self._c;return t(`button`,{staticClass:`c-pelle-upgrade`,class:{"c-pelle-upgrade--unavailable":!e.canBuy&&!(e.isBought||e.isCapped),"c-pelle-upgrade--bought":e.isBought||e.isCapped,"c-pelle-upgrade--faded":e.faded,"c-pelle-upgrade--galaxyGenerator":e.galaxyGenerator},on:{click:function(t){!e.faded&&e.upgrade.purchase()},mouseover:function(t){e.hovering=!0},mouseleave:function(t){e.hovering=!1}}},[t(`CustomizeableTooltip`,{attrs:{show:e.shouldEstimateImprovement,left:`50%`,top:`0`},scopedSlots:e._u([{key:`tooltipContent`,fn:function(){return[e._v(` `+e._s(e.estimateImprovement)+` `)]},proxy:!0}])}),e.timeEstimate?t(`CustomizeableTooltip`,{attrs:{left:`50%`,top:`0`,"content-class":`l-fill-container`},scopedSlots:e._u([{key:`tooltipContent`,fn:function(){return[e._v(` `+e._s(e.timeEstimate)+` `)]},proxy:!0}],null,!1,1945308655)}):e._e(),t(`DescriptionDisplay`,{attrs:{config:e.config}}),t(`div`,{staticClass:`l-pelle-upgrade-gap`}),e.effectText?t(`div`,[e._v(` `+e._s(e.effectText.prefix)+` `+e._s(e.effectText.value)+` `),e.effectText.next?[e._v(` ➜ `),t(`span`,{class:{"c-improved-effect":e.canBuy,"c-improved-effect--unavailable":!e.canBuy}},[e._v(` `+e._s(e.effectText.next)+` `)])]:e._e(),t(`div`,{staticClass:`l-pelle-upgrade-gap`})],2):e._e(),e.isCapped?e._e():t(`CostDisplay`,{attrs:{config:e.config,name:e.galaxyGenerator?e.config.currencyLabel:`Reality Shard`}})],1)},[],!1,null,`bad6c97f`,null,null).exports,Oz=D({name:`GalaxyGeneratorPanel`,components:{PelleUpgrade:Dz},data(){return{isUnlocked:!1,galaxies:new Decimal,generatedGalaxies:new Decimal,galaxiesPerSecond:0,cap:0,isCapped:!1,capRift:null,sacrificeActive:!1,isCollapsed:!1,barWidth:0,capRiftName:``}},computed:{collapseIcon(){return this.isCollapsed?`fas fa-expand-arrows-alt`:`fas fa-compress-arrows-alt`},upgrades(){return GalaxyGeneratorUpgrades.all},galaxyText(){let e=format(Decimal.max(this.galaxies,0),2);return this.galaxies.lt(0)&&(e+=` [${format(this.galaxies,2)}]`),e},sacrificeText(){return this.capRift.galaxyGeneratorText.replace(`$value`,this.capRiftName)},emphasisedStart(){return Decimal.pow(this.generatedGalaxies.div(this.cap),.45).toNumber()}},methods:{update(){this.isUnlocked=Pelle.hasGalaxyGenerator,this.isCapped=GalaxyGenerator.isCapped,this.isCollapsed=player.celestials.pelle.collapsed.galaxies&&!this.isCapped,!(this.isCollapsed||!this.isUnlocked)&&(this.galaxies.copyFrom(player.galaxies.add(GalaxyGenerator.galaxies)),this.generatedGalaxies.copyFrom(GalaxyGenerator.generatedGalaxies),this.galaxiesPerSecond=GalaxyGenerator.gainPerSecond,this.cap=GalaxyGenerator.generationCap,this.capRift=GalaxyGenerator.capRift,this.sacrificeActive=GalaxyGenerator.sacrificeActive,this.barWidth=this.isCapped?this.capRift.reducedTo:this.emphasisedStart,this.capRift&&(this.capRiftName=I.wordCycle(this.capRift.name)))},increaseCap(){GalaxyGenerator.isCapped&&GalaxyGenerator.startSacrifice()},toggleCollapse(){player.celestials.pelle.collapsed.galaxies=!this.isCollapsed},unlock(){player.celestials.pelle.galaxyGenerator.unlocked=!0,Pelle.quotes.galaxyGeneratorUnlock.show()}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-pelle-panel-container`},[t(`div`,{staticClass:`c-pelle-panel-title`},[e.isCapped?e._e():t(`i`,{staticClass:`c-collapse-icon-clickable`,class:e.collapseIcon,on:{click:e.toggleCollapse}}),e._v(` Galaxy Generator `)]),e.isCollapsed?e._e():t(`div`,{staticClass:`l-pelle-content-container`},[e.isUnlocked?t(`div`,[t(`div`,[e._v(` You have a total of `),t(`span`,{staticClass:`c-galaxies-amount`},[e._v(e._s(e.galaxyText))]),e._v(` Galaxies. `),t(`span`,{staticClass:`c-galaxies-amount`},[e._v(`+`+e._s(e.format(e.galaxiesPerSecond,2,1))+`/s`)])]),t(`div`,[t(`button`,{staticClass:`c-increase-cap`,class:{"c-increase-cap-available":e.isCapped&&e.capRift&&!e.sacrificeActive,"tutorial--glow":e.cap===1/0},on:{click:e.increaseCap}},[t(`div`,{staticClass:`c-increase-cap-background`,style:{width:`${e.barWidth*100}%`}}),e.isCapped&&e.capRift?t(`div`,{staticClass:`c-increase-cap-text`},[e._v(` `+e._s(e.sacrificeText)+`. `),t(`br`),t(`br`),e.sacrificeActive?t(`span`,{staticClass:`c-big-text`},[e._v(` Getting rid of all that `+e._s(e.capRiftName)+`... `)]):t(`span`,{staticClass:`c-big-text`},[e._v(` Sacrifice your `+e._s(e.capRiftName)+` `)])]):t(`div`,{staticClass:`c-increase-cap-text c-medium-text`},[e._v(` `+e._s(e.format(e.generatedGalaxies,2))+` / `+e._s(e.format(e.cap,2))+` Galaxies generated `)])])]),t(`div`,{staticClass:`l-galaxy-generator-upgrades-container`},e._l(e.upgrades,function(e){return t(`PelleUpgrade`,{key:e.config.id,attrs:{upgrade:e,"galaxy-generator":!0}})}),1)]):t(`button`,{staticClass:`c-generator-unlock-button`,on:{click:e.unlock}},[e._v(` Unlock the Galaxy Generator `)])])])},[],!1,null,`1997f81a`,null,null).exports,kz={name:`PelleRiftBar`,components:{CustomizeableTooltip:Tz},props:{rift:{type:Object,required:!0}},data(){return{isActive:!1,isMaxed:!1,percentage:0,reducedTo:0,hasEffectiveFill:!1,selectedHoverMilestone:this.rift.milestones[0],remToPx:Number.parseInt(getComputedStyle(document.documentElement).fontSize,10),effects:[],selectedMilestoneResourceText:``,selectedMilestoneDescriptionText:``}},computed:{tooltipArrowStyle(){return{borderTop:`0.55rem solid var(--color-pelle--base)`}}},methods:{update(){let e=this.rift;this.effects=e.effects,this.isActive=e.isActive,this.isMaxed=e.isMaxed||Pelle.hasGalaxyGenerator,this.percentage=e.percentage,this.reducedTo=e.reducedTo,this.hasEffectiveFill=e.config.key===`decay`&&PelleRifts.chaos.milestones[0].canBeApplied,this.selectedMilestoneResourceText=this.milestoneResourceText(this.selectedHoverMilestone),this.selectedMilestoneDescriptionText=this.milestoneDescriptionText(this.selectedHoverMilestone)},hasMilestone(e){return e.canBeApplied},milestoneResourceText(e){let t=this.rift;return`${formatPercents(e.requirement)}
      (${this.formatRift(t.config.percentageToFill(e.requirement))} \
      ${t.id===3?I.wordCycle(PelleRifts.decay.name):t.drainResource})`},milestoneDescriptionText(e){return typeof e.description==`string`?e.description:e.description()},formatRift(e){return typeof e==`number`?`${formatInt(100*e)}%`:format(e,2)},toggle(){this.isMaxed||this.rift.toggle()},barOverlay(){let e=this.percentage>1;return{"o-pelle-rift-bar-permanent":!e&&this.hasEffectiveFill,"o-pelle-rift-bar-overfilled":e}},handleMilestoneRequirementTooltipDisplay(e){let t=e.clientX-this.$refs.pelleRiftBar.getBoundingClientRect().x,n=this.rift.milestones.filter(e=>{let n=Math.abs(e.requirement*31.6-t/this.remToPx);return n<1&&(e.dist=n),n<1}).map(e=>{let t=e.dist;return delete e.dist,{dist:t,m:e}});n.length>0&&(this.selectedHoverMilestone=n.sort((e,t)=>e.dist-t.dist)[0].m)},tooltipContentClass(){let e=this.hasMilestone(this.selectedHoverMilestone);return{"c-pelle-milestone-tooltip":!0,"c-pelle-milestone-tooltip--unlocked":e}}}},Az=D(kz,function(){var e=this,t=e._self._c;return t(`div`,{ref:`pelleRiftBar`,staticClass:`c-pelle-rift-bar`,class:{"c-pelle-rift-bar-overfill-container":e.percentage>1,"c-pelle-rift-bar--idle":!e.isActive&&!e.isMaxed,"c-pelle-rift-bar--filling":e.isActive},on:{mousemove:e.handleMilestoneRequirementTooltipDisplay,click:e.toggle}},[t(`div`,{staticClass:`l-overflow-hidden`},[t(`div`,{class:e.barOverlay()}),t(`div`,{staticClass:`o-pelle-rift-bar-fill`,style:{width:`${Math.clampMax(e.percentage*100,100)}%`}}),e.reducedTo<1?t(`div`,{staticClass:`o-pelle-rift-bar-reducedto`,style:{width:`${Math.clampMax(100-e.reducedTo*100,100)}%`}}):e._e(),t(`div`,{staticClass:`o-pelle-rift-bar-overlay`}),e.isActive&&!e.isMaxed?t(`div`,{staticClass:`o-pelle-rift-bar-active-fill`}):e._e(),e._l(e.rift.milestones,function(n,r){return t(`div`,{key:`milestone-line-`+r,staticClass:`o-pelle-rift-bar-milestone-line`,class:{"o-pelle-rift-bar-milestone-line--unlocked":e.hasMilestone(n),"o-pelle-rift-bar-milestone-line--disabled":e.reducedTo<n.requirement},style:{left:`calc(${n.requirement*100}% - 0.25rem)`}})})],2),t(`div`,{staticClass:`o-pelle-rift-bar-percentage`},[e._v(` `+e._s(e.formatPercents(e.percentage,3))+` `),e.isMaxed?e._e():t(`span`,[e._v(`(`+e._s(e.isActive?`Filling`:`Idle`)+`)`)])]),t(`CustomizeableTooltip`,{staticClass:`o-pelle-rift-bar-milestone-hover-container`,attrs:{"tooltip-class":e.tooltipContentClass(),"tooltip-arrow-style":e.tooltipArrowStyle,left:`calc(${e.selectedHoverMilestone.requirement*100}% - 0.1rem)`,"content-class":`o-pelle-rift-bar-milestone-hover-area`},scopedSlots:e._u([{key:`tooltipContent`,fn:function(){return[e._v(` `+e._s(e.selectedMilestoneResourceText)+` `),t(`br`),t(`br`),e._v(` `+e._s(e.selectedMilestoneDescriptionText)+` `)]},proxy:!0}])})],1)},[],!1,null,`02756d24`,null,null).exports,jz={name:`PelleStrike`,components:{ExpandingControlBox:Pt},props:{strike:{type:Object,required:!0}},data(){return{strikeReward:``}},methods:{update(){this.strikeReward=this.strike.reward()}}},Mz={name:`PelleRift`,components:{PelleStrike:D(jz,function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`c-pelle-strike-container`},[t(`ExpandingControlBox`,{attrs:{"container-class":`c-pelle-strike`},scopedSlots:e._u([{key:`header`,fn:function(){return[t(`div`,{staticClass:`c-pelle-strike-header`},[e._v(` ▼ `+e._s(e.strike.requirement)+` ▼ `)])]},proxy:!0},{key:`dropdown`,fn:function(){return[t(`div`,{staticClass:`c-pelle-strike-dropdown`},[t(`span`,[e._v(`Penalty: `+e._s(e.strike.penalty))]),t(`br`),t(`span`,[e._v(`Reward: `+e._s(e.strikeReward))])])]},proxy:!0}])})],1)},[],!1,null,null,null,null).exports,PelleRiftBar:Az},props:{strike:{type:Object,required:!0}},data(){return{hasStrike:!1,isActive:!1,isMaxed:!1,totalFill:new Decimal,resource:new Decimal,hasEffectiveFill:!1,effects:[]}},computed:{rift(){return this.strike.rift},specialRift(){return this.rift.id===3},infoTooltip(){return`The Replicanti requirement for the 2nd Rift is based on the total amount you have ever filled, including
        any amount drained to fill this Rift.`}},methods:{update(){if(this.hasStrike=this.strike.hasStrike,!this.hasStrike)return;let e=this.rift;this.effects=this.rift.effects,this.isActive=e.isActive,this.isMaxed=e.isMaxed||Pelle.hasGalaxyGenerator,this.setValue(`totalFill`,e.totalFill),this.setValue(`resource`,e.fillCurrency.value),this.hasEffectiveFill=e.key===`decay`&&PelleRifts.chaos.milestones[0].canBeApplied},setValue(e,t){typeof t==`number`?this[e]=t:this[e].copyFrom(t)},formatRift(e){return typeof e==`number`?`${formatInt(100*e)}%`:format(e,2)},riftName(){return I.wordCycle(this.rift.name,!0)},drainResource(){return this.specialRift?I.wordCycle(this.rift.drainResource):this.rift.drainResource}}},Nz={name:`PelleBarPanel`,components:{PelleRift:D(Mz,function(){var e=this,t=e._self._c;return e.hasStrike?t(`div`,{staticClass:`c-pelle-single-bar`},[t(`div`,{staticClass:`c-pelle-rift`},[t(`div`,{staticClass:`c-pelle-rift-row`},[t(`div`,{staticClass:`c-pelle-rift-column c-pelle-rift-status`},[t(`h2`,{staticClass:`c-pelle-rift-name-header`},[e._v(` `+e._s(e.riftName())+` `)]),t(`div`,{staticClass:`c-pelle-rift-rift-info-container`},e._l(e.effects,function(n,r){return t(`div`,{key:r},[e._v(` `+e._s(n||``)+` `)])}),0)]),t(`div`,{staticClass:`c-pelle-rift-column`},[t(`PelleStrike`,{attrs:{strike:e.strike}}),t(`PelleRiftBar`,{attrs:{rift:e.rift}})],1),t(`div`,{staticClass:`c-pelle-rift-status`},[t(`div`,{staticClass:`c-pelle-rift-fill-status`},[t(`h2`,{staticClass:`c-pelle-rift-name-header`},[e._v(` `+e._s(e.riftName())+` `)]),t(`div`,{staticClass:`c-pelle-rift-rift-info-container`},[e._v(` Drains `+e._s(e.drainResource())+` to fill. `),e.specialRift?t(`span`,{attrs:{"ach-tooltip":e.infoTooltip}},[t(`i`,{staticClass:`fas fa-question-circle`})]):e._e(),t(`br`),e.isMaxed?e._e():[e._v(` Current Amount: `+e._s(e.formatRift(e.resource))+` `)],t(`br`),e._v(` Total Filled: `+e._s(e.formatRift(e.rift.totalFill))+` `)],2)])])])])]):e._e()},[],!1,null,`65655407`,null,null).exports},data(){return{decayRate:0,isCollapsed:!1}},computed:{collapseIcon(){return this.isCollapsed?`fas fa-expand-arrows-alt`:`fas fa-compress-arrows-alt`},strikes(){return PelleStrikes.all}},methods:{update(){this.decayRate=Pelle.riftDrainPercent,this.isCollapsed=player.celestials.pelle.collapsed.rifts},toggleCollapse(){player.celestials.pelle.collapsed.rifts=!this.isCollapsed}}},Pz=D(Nz,function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-pelle-panel-container`},[t(`div`,{staticClass:`c-pelle-panel-title`},[t(`i`,{staticClass:`c-collapse-icon-clickable`,class:e.collapseIcon,on:{click:e.toggleCollapse}}),e._v(` Pelle Strikes and Rifts `)]),e.isCollapsed?e._e():t(`div`,{staticClass:`l-pelle-content-container`},[e._v(` Rifts can be activated by clicking on their bars. `),e.strikes.length>1?t(`span`,[e._v(`You cannot activate more than two Rifts at once.`)]):t(`br`),e._v(` When active, Rifts consume `+e._s(e.formatPercents(e.decayRate))+` of another resource per second. `),t(`br`),e._v(` Rift effects apply even when not activated, and are based on the total amount drained. `),t(`b`,{staticClass:`o-strike-warning`},[e._v(`Pelle Strike penalties are permanent and remain active even after Armageddon!`)]),t(`div`,{staticClass:`c-pelle-bar-container`},e._l(e.strikes,function(e){return t(`PelleRift`,{key:e.config.id,attrs:{strike:e}})}),1)])])},[],!1,null,`672846df`,null,null).exports,Fz={name:`RemnantGainFactor`,components:{ExpandingControlBox:Pt},props:{hide:{type:Boolean,required:!1,default:!1}},data(){return{best:{am:new Decimal(0),ip:new Decimal(0),ep:new Decimal(0)},dilationMult:[1,1,1],remnants:new Decimal(0),remnantsGain:new Decimal(0)}},computed:{opacity(){return Number(!this.hide)}},methods:{update(){this.best.am.copyFrom(player.celestials.pelle.records.totalAntimatter),this.best.ip.copyFrom(player.celestials.pelle.records.totalInfinityPoints),this.best.ep.copyFrom(player.celestials.pelle.records.totalEternityPoints),this.dilationMult=PelleStrikes.dilation.hasStrike?[500,10,5]:[1,1,1],this.remnants.copyFrom(Pelle.cel.remnants),this.remnantsGain.copyFrom(Pelle.remnantsGain)}}},Iz=D(Fz,function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`c-remnant-factors-container`},[t(`ExpandingControlBox`,{style:{opacity:e.opacity},attrs:{"container-class":`c-remnant-factors`,label:`Remnant Gain Factors`},scopedSlots:e._u([{key:`dropdown`,fn:function(){return[t(`div`,{staticClass:`c-remnant-factors-text`},[e._v(` Best AM: `+e._s(e.format(e.best.am,2,2))),t(`br`),e._v(` Best IP: `+e._s(e.format(e.best.ip,2,2))),t(`br`),e._v(` Best EP: `+e._s(e.format(e.best.ep,2,2))),t(`br`),t(`br`),t(`div`,{staticClass:`l-remnant-factors-row`},[t(`div`,{staticClass:`l-remnant-factors-col l-remnant-factors-col--first`},[t(`div`,{staticClass:`l-remnant-factors-item`},[e._v(` log10(log10(am)`+e._s(e.dilationMult[0]>1?`*${e.dilationMult[0]}`:``)+` + 2) `)]),t(`div`,{staticClass:`l-remnant-factors-item`},[e._v(` log10(log10(ip)`+e._s(e.dilationMult[1]>1?`*${e.dilationMult[1]}`:``)+` + 2) `)]),t(`div`,{staticClass:`l-remnant-factors-item`},[e._v(` log10(log10(ep)`+e._s(e.dilationMult[2]>1?`*${e.dilationMult[2]}`:``)+` + 2) `)]),t(`div`,{staticClass:`l-remnant-factors-item`},[e._v(` Static divisor `)]),t(`div`,{staticClass:`l-remnant-factors-item`},[e._v(` Static power `)]),t(`div`,{staticClass:`l-remnant-factors-item`},[e._v(` Existing Remnants `)]),t(`div`,{staticClass:`l-remnant-factors-item`},[e._v(` Final amount `)])]),t(`div`,{staticClass:`l-remnant-factors-col`},[t(`div`,{staticClass:`l-remnant-factors-item`}),t(`div`,{staticClass:`l-remnant-factors-item`},[e._v(` + `)]),t(`div`,{staticClass:`l-remnant-factors-item`},[e._v(` + `)]),t(`div`,{staticClass:`l-remnant-factors-item`},[e._v(` / `)]),t(`div`,{staticClass:`l-remnant-factors-item`},[e._v(` ^ `)]),t(`div`,{staticClass:`l-remnant-factors-item`},[e._v(` - `)])]),t(`div`,{staticClass:`l-remnant-factors-col`},[t(`div`,{staticClass:`l-remnant-factors-item`},[e._v(` `+e._s(e.format(e.best.am.add(1).log10().mul(e.dilationMult[0]).add(2).log10(),2,2))+` `)]),t(`div`,{staticClass:`l-remnant-factors-item`},[e._v(` `+e._s(e.format(e.best.ip.add(1).log10().mul(e.dilationMult[1]).add(2).log10(),2,2))+` `)]),t(`div`,{staticClass:`l-remnant-factors-item`},[e._v(` `+e._s(e.format(e.best.ep.add(1).log10().mul(e.dilationMult[2]).add(2).log10(),2,2))+` `)]),t(`div`,{staticClass:`l-remnant-factors-item`},[e._v(` `+e._s(e.format(1.64,2,2))+` `)]),t(`div`,{staticClass:`l-remnant-factors-item`},[e._v(` `+e._s(e.format(7.5,2,2))+` `)]),t(`div`,{staticClass:`l-remnant-factors-item`},[e._v(` `+e._s(e.format(e.remnants,2,0))+` `)]),t(`div`,{staticClass:`l-remnant-factors-item`},[e._v(` `+e._s(e.format(e.remnantsGain,2,e.remnantsGain.gte(1)?0:2))+` `)])])])])]},proxy:!0}])})],1)},[],!1,null,null,null,null).exports,Lz=D({name:`PelleUpgradePanel`,components:{ArmageddonButton:UN,PelleUpgradeVue:Dz,RemnantGainFactor:Iz},data(){return{showBought:!1,isCollapsed:!1,isHovering:!1,remnants:new Decimal(0),realityShards:new Decimal(0),shardRate:new Decimal(0),upgrades:[],boughtUpgrades:[]}},computed:{collapseIcon(){return this.isCollapsed?`fas fa-expand-arrows-alt`:`fas fa-compress-arrows-alt`},rebuyables:()=>PelleUpgrade.rebuyables,visibleUpgrades(){return this.upgrades.slice(0,5)},fadedUpgrades(){return this.upgrades.slice(5,10)},allUpgrades(){let e=[];return this.showBought&&(e=this.boughtUpgrades),e=e.concat(this.visibleUpgrades),e},showImprovedEstimate(){return this.isHovering&&!this.shardRate.eq(0)}},methods:{update(){this.showBought=Pelle.cel.showBought,this.isCollapsed=player.celestials.pelle.collapsed.upgrades,this.remnants.copyFrom(Pelle.cel.remnants),this.realityShards.copyFrom(Pelle.cel.realityShards),this.shardRate.copyFrom(Pelle.realityShardGainPerSecond),this.upgrades=PelleUpgrade.singles.filter(e=>!e.isBought),this.boughtUpgrades=PelleUpgrade.singles.filter(e=>e.isBought)},toggleBought(){Pelle.cel.showBought=!Pelle.cel.showBought,this.$recompute(`upgrades`)},toggleCollapse(){player.celestials.pelle.collapsed.upgrades=!this.isCollapsed}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-pelle-panel-container`},[t(`div`,{staticClass:`c-pelle-panel-title`},[t(`i`,{staticClass:`c-collapse-icon-clickable`,class:e.collapseIcon,on:{click:e.toggleCollapse}}),e._v(` Pelle Upgrades `)]),e.isCollapsed?e._e():t(`div`,{staticClass:`l-pelle-content-container`},[t(`div`,{staticClass:`c-armageddon-container`},[t(`div`,[t(`div`,{staticClass:`c-armageddon-button-container`,on:{mouseover:function(t){e.isHovering=!0},mouseleave:function(t){e.isHovering=!1}}},[t(`ArmageddonButton`)],1),t(`RemnantGainFactor`,{attrs:{hide:e.showImprovedEstimate}})],1),t(`div`,{staticClass:`c-armageddon-resources-container`},[t(`div`,[e._v(` You have `),t(`span`,{staticClass:`c-remnants-amount`},[e._v(e._s(e.format(e.remnants,2)))]),e._v(` Remnants. `)]),t(`div`,[e._v(` You have `),t(`span`,{staticClass:`c-remnants-amount`},[e._v(e._s(e.format(e.realityShards,2)))]),e._v(` Reality Shards. `),t(`span`,{staticClass:`c-remnants-amount`},[e._v(`+`+e._s(e.format(e.shardRate,2,2))+`/s`)])])])]),t(`div`,{staticClass:`c-pelle-upgrade-container`},e._l(e.rebuyables,function(n){return t(`PelleUpgradeVue`,{key:n.config.id,attrs:{upgrade:n,"show-improved-estimate":e.showImprovedEstimate}})}),1),t(`button`,{staticClass:`o-pelle-button`,on:{click:e.toggleBought}},[e._v(` `+e._s(e.showBought?`Showing bought upgrades`:`Bought upgrades hidden`)+` `)]),e.allUpgrades.length?t(`div`,{staticClass:`c-pelle-upgrade-container`},[e._l(e.allUpgrades,function(n){return t(`PelleUpgradeVue`,{key:n.config.id,attrs:{upgrade:n,"show-improved-estimate":e.showImprovedEstimate}})}),e._l(e.fadedUpgrades,function(e){return t(`PelleUpgradeVue`,{key:e.config.id,attrs:{upgrade:e,faded:``}})})],2):t(`div`,[e._v(` No upgrades to show! `)])])])},[],!1,null,`47f79f83`,null,null).exports,Rz=D({name:`PelleTab`,components:{PelleBarPanel:Pz,PelleUpgradePanel:Lz,GalaxyGeneratorPanel:Oz,CelestialQuoteHistory:fL},data(){return{isDoomed:!1,canEnterPelle:!1,completedRows:0,cappedResources:0,hasStrike:!1,hasGalaxyGenerator:!1}},computed:{symbol(){return Pelle.symbol},totalRows(){return Achievements.prePelleRows.length},totalAlchemyResources(){return AlchemyResources.all.length}},methods:{update(){this.isDoomed=Pelle.isDoomed,this.isDoomed||(this.completedRows=Achievements.prePelleRows.countWhere(e=>e.every(e=>e.isUnlocked)),this.cappedResources=AlchemyResources.all.countWhere(e=>e.capped),this.canEnterPelle=this.completedRows===this.totalRows&&this.cappedResources===this.totalAlchemyResources),this.hasStrike=PelleStrikes.all.some(e=>e.hasStrike),this.hasGalaxyGenerator=PelleRifts.recursion.milestones[2].canBeApplied||GalaxyGenerator.spentGalaxies.gt(0)},toggleBought(){Pelle.cel.showBought=!Pelle.cel.showBought,this.$recompute(`upgrades`)},showModal(){Modal.pelleEffects.show()},enterDoomModal(){Modal.armageddon.show()}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-pelle-celestial-tab`},[e.isDoomed?t(`div`,{staticClass:`l-pelle-all-content-container`},[t(`CelestialQuoteHistory`,{attrs:{celestial:`pelle`}}),t(`div`,{staticClass:`button-container`},[t(`button`,{staticClass:`o-pelle-button`,on:{click:e.showModal}},[e._v(` Show effects in Doomed Reality `)])]),t(`br`),e.hasGalaxyGenerator?t(`GalaxyGeneratorPanel`):e._e(),e.hasStrike?t(`PelleBarPanel`):e._e(),t(`PelleUpgradePanel`)],1):e.canEnterPelle?t(`button`,{staticClass:`pelle-doom-button`,on:{click:e.enterDoomModal}},[e._v(` Doom`),t(`br`),e._v(`Your`),t(`br`),e._v(`Reality `),t(`div`,{staticClass:`pelle-icon-container`},[t(`span`,{staticClass:`pelle-icon`},[e._v(e._s(e.symbol))])])]):t(`div`,{staticClass:`pelle-unlock-requirements`},[e._v(` You must have `+e._s(e.formatInt(e.totalRows))+` rows of Achievements and all of your Glyph Alchemy Resources capped to unlock Pelle, Celestial of Antimatter. `),t(`br`),t(`br`),e._v(` `+e._s(e.formatInt(e.completedRows))+` / `+e._s(e.formatInt(e.totalRows))+` Achievement rows completed `),t(`br`),e._v(` `+e._s(e.formatInt(e.cappedResources))+` / `+e._s(e.formatInt(e.totalAlchemyResources))+` capped Alchemy Resources `)])])},[],!1,null,`3e648da8`,null,null).exports,zz={name:`PreviousSpeedrunInfo`,props:{prevRunInfo:{type:Object,required:!1,default:()=>{}},index:{type:Number,required:!0}},computed:{segmentAttr(){return{icon:`fas o-icon ${this.prevRunInfo.isSegmented?`fa-stopwatch-20`:`fa-stopwatch`}`,text:this.prevRunInfo.isSegmented?`Segmented`:`Single Segment`}},stdAttr(){return{icon:`fas fa-coins o-icon ${this.prevRunInfo.usedSTD?`l-icon-on`:`l-icon-off`}`,text:this.prevRunInfo.usedSTD?`Used STD Upgrades`:`No STDs used`}},offlineAttr(){let e=this.prevRunInfo.offlineTimeUsed/this.prevRunInfo.records.max();return{icon:`fas o-icon ${e===0?`fa-eye`:e<.1?`fa-computer`:e<.6?`fa-moon`:`fa-power-off`}`,text:`${e===0?`No`:formatPercents(e,1)} Offline Time`}},seedAttr(){let e;switch(this.prevRunInfo.seedSelection){case SPEEDRUN_SEED_STATE.UNKNOWN:e=`fa-question`;break;case SPEEDRUN_SEED_STATE.FIXED:e=`fa-gamepad`;break;case SPEEDRUN_SEED_STATE.RANDOM:e=`fa-dice`;break;case SPEEDRUN_SEED_STATE.PLAYER:e=`fa-user-pen`;break;default:throw Error(`Unrecognized speedrun seed option in previous run subtab`)}return{icon:`fas ${e} o-icon`,text:Speedrun.seedModeText(this.prevRunInfo)}},iconAttrs(){return[this.offlineAttr,this.segmentAttr,this.stdAttr,this.seedAttr]},startDate(){return Time.toDateTimeString(this.prevRunInfo.startDate)},finalTime(){return TimeSpan.fromMilliseconds(new Decimal(this.prevRunInfo.records.max())).toStringShort(!0,!0)}}},Bz=D(zz,function(){var e=this,t=e._self._c;return e.prevRunInfo?t(`div`,{staticClass:`c-icon-container`},[t(`span`,[e._v(`Run `+e._s(e.index))]),t(`span`,[e._v(e._s(e.prevRunInfo.name))]),e._l(e.iconAttrs,function(e){return t(`span`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:e.text,expression:`attr.text`}],key:e.icon,class:e.icon})}),t(`span`,[e._v(`Started: `+e._s(e.startDate))]),t(`span`,[e._v(`Final Time: `+e._s(e.finalTime))])],2):t(`div`,{staticClass:`c-no-record`},[e._v(` No speedrun records found for run `+e._s(e.index)+`. `)])},[],!1,null,`a082d176`,null,null).exports,Vz={name:`SpeedrunMilestoneCompare`,props:{milestone:{type:Object,required:!0},currTime:{type:Number,required:!1,default:0},refTime:{type:Number,required:!1,default:0},bestTime:{type:Number,required:!0},runIndices:{type:Array,required:!0}},data(){return{realTime:0}},computed:{classObject(){let e=this.currTime>0&&this.refTime>0;return{"l-speedrun-milestone-entry":!0,"l-milestone-slow":e&&this.currTime>this.refTime,"l-milestone-fast":e&&this.currTime<this.refTime,"l-milestone-fastest":e&&this.currTime<this.bestTime}}},methods:{update(){this.realTime=player.records.realTimePlayed},timeString(e,t){let n=TimeSpan.fromMilliseconds(new Decimal(e)).toStringShort(!0,!0),r=this.currTime>0?this.currTime-e:this.realTime-e,i=TimeSpan.fromMilliseconds(new Decimal(Math.abs(r))).toStringShort(!0,!0);return i=`${this.currTime>e?`-`:`+`}${i}`,e>0?`${n}${t?` (${i})`:``}`:`Not reached yet`},timeStyle(e){let t=e===[this.currTime,this.refTime,this.bestTime].filter(e=>e!==0).min();return{color:`var(--color-text)`,opacity:t?1:.85,"font-weight":t?`bold`:null}}}},Hz=D(Vz,function(){var e=this,t=e._self._c;return t(`div`,{class:e.classObject},[t(`span`,{staticClass:`l-milestone-title`},[e._v(e._s(e.milestone.name))]),t(`span`,{style:e.timeStyle(e.currTime)},[e._v(`Current run: `+e._s(e.timeString(e.currTime)))]),e.refTime?t(`span`,{style:e.timeStyle(e.refTime)},[e._v(` Run `+e._s(e.runIndices[0])+`: `+e._s(e.timeString(e.refTime,!0))+` `)]):e._e(),t(`span`,{style:e.timeStyle(e.bestTime)},[e._v(`Best (`+e._s(e.runIndices[1])+`): `+e._s(e.timeString(e.bestTime,!0)))])])},[],!1,null,`8f507c5d`,null,null).exports,Uz=D({name:`PreviousSpeedrunTab`,components:{PrimaryButton:L,SpeedrunMilestoneCompare:Hz,PreviousSpeedrunInfo:Bz},data(){return{milestoneTimes:[],isSpectating:!1,selectedRun:0,runPage:0}},computed:{milestones:()=>GameDatabase.speedrunMilestones,previousRuns(){let e=Object.keys(player.speedrun.previousRuns),t=[];for(let n of e){let e=player.speedrun.previousRuns[n];e.id=Number(n),t.push(e)}return t},bestPreviousTimes(){let e=GameDatabase.speedrunMilestones.length+1,t=Array.repeat(0,e),n=[...t];for(let r of Object.keys(player.speedrun.previousRuns)){let i=player.speedrun.previousRuns[r].records;for(let a=0;a<e;a++)i[a]!==0&&(i[a]<t[a]||t[a]===0)&&(t[a]=i[a],n[a]=r)}let r=Array.repeat({},e);for(let i=0;i<e;i++)r[i]={time:t[i],index:n[i]};return r},numRuns(){return Object.keys(this.previousRuns).length},highestIndex(){return Math.max(this.previousRuns.map(e=>Number(e.id)).max(),player.records.fullGameCompletions)},spectateText(){return this.isSpectating?`Numbers here are unaffected by END so that you can see your final records.`:null}},methods:{update(){this.milestoneTimes=[...player.speedrun.records],this.isSpectating=GameEnd.endState>END_STATE_MARKERS.SPECTATE_GAME},selectRun(e){this.selectedRun=e},findRun(e){return this.previousRuns.find(t=>t?.id===10*this.runPage+e)},changePage(e){this.runPage=Math.clamp(this.runPage+e,0,Math.floor(this.highestIndex/10))}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`c-previous-runs`},[t(`b`,[e._v(`You have completed `+e._s(e.quantify(`speedrun`,e.numRuns,0,0,e=>e))+` prior to this playthrough.`)]),t(`b`,[e._v(`Statistics of previous runs are below, mouseover icons for more details.`)]),t(`b`,[e._v(`Click the magnifying glass to compare the milestones on a particular run to this run.`)]),t(`b`,[e._v(e._s(e.spectateText))]),t(`br`),e.highestIndex>10?t(`div`,{staticClass:`c-run-page-nav`},[t(`PrimaryButton`,{staticClass:`o-primary-btn--subtab-option fas fa-arrow-left`,class:{"o-primary-btn--disabled":e.runPage===0},on:{click:function(t){return e.changePage(-1)}}}),e._v(` Showing runs `+e._s(10*e.runPage+1)+` to `+e._s(10*(e.runPage+1))+` (`+e._s(e.highestIndex)+` total runs) `),t(`PrimaryButton`,{staticClass:`o-primary-btn--subtab-option fas fa-arrow-right`,class:{"o-primary-btn--disabled":e.runPage+1>e.highestIndex/10},on:{click:function(t){return e.changePage(1)}}})],1):e._e(),t(`div`,{staticClass:`c-previous-runs`},e._l(10,function(n){return t(`span`,{key:n},[10*e.runPage+n<=e.highestIndex?t(`span`,{staticClass:`c-single-run`},[e.findRun(n)?t(`PrimaryButton`,{staticClass:`o-primary-btn--subtab-option fas fa-magnifying-glass`,class:{"o-selected-btn":e.selectedRun===10*e.runPage+n},on:{click:function(t){return e.selectRun(10*e.runPage+n)}}}):e._e(),t(`PreviousSpeedrunInfo`,{attrs:{"prev-run-info":e.findRun(n),index:10*e.runPage+n}})],1):e._e()])}),0),t(`br`),e._m(0),t(`div`,{staticClass:`l-speedrun-milestone-tab`},e._l(e.milestones,function(n){return t(`SpeedrunMilestoneCompare`,{key:n.id,attrs:{milestone:n,"curr-time":e.milestoneTimes[n.id],"ref-time":e.selectedRun?e.previousRuns.find(t=>t.id===e.selectedRun).records[n.id]:null,"best-time":e.bestPreviousTimes[n.id].time,"run-indices":[e.selectedRun,e.bestPreviousTimes[n.id].index]}})}),1)])},[function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`c-legend`},[t(`div`,{staticClass:`c-legend-cell`},[t(`span`,{staticClass:`o-box l-milestone-none`}),e._v(` Not reached this run `)]),t(`div`,{staticClass:`c-legend-cell`},[t(`span`,{staticClass:`o-box l-milestone-slow`}),e._v(` Slower than comparison `)]),t(`div`,{staticClass:`c-legend-cell`},[t(`span`,{staticClass:`o-box l-milestone-fast`}),e._v(` Faster than comparison `)]),t(`div`,{staticClass:`c-legend-cell`},[t(`span`,{staticClass:`o-box l-milestone-fastest`}),e._v(` Faster than best `)])])}],!1,null,`9e1ed881`,null,null).exports,Wz={name:`RaPetLevelBar`,props:{petConfig:{type:Object,required:!0}},data(){return{isUnlocked:!1,level:0,memories:new Decimal,requiredMemories:new Decimal,nextLevelEstimate:``}},computed:{pet(){return this.petConfig.pet},shiftDown(){return ui.view.shiftDown},unlocks(){return this.pet.unlocks},importantLevels(){return this.unlocks.map(e=>e.level)},barStyle(){return{width:`${100*Decimal.min(1,this.memories.div(this.requiredMemories)).toNumber()}%`,background:this.pet.color}},petStyle(){return{"background-color":this.pet.color}},prevGoal(){let e=this.importantLevels.filter(e=>e<=this.level);return Math.clampMax(e.max(),15)},nextGoal(){let e=this.importantLevels.filter(e=>e>this.level);return e.length===0?25:e.min()},currentLevelGoal(){return this.level+1},classObject(){let e=this.memories.gte(this.requiredMemories),t=this.pet;return{"c-ra-level-up-btn":!0,"c-ra-pet-btn--available":e,[`c-ra-pet-btn--${t.id}`]:e}},nextUnlock(){return this.pet.unlocks.find(e=>e.level===this.level+1)??!1},showNextScalingUpgrade(){switch(this.pet.name){case`Teresa`:return Math.min(12,Math.floor(this.level/2))!==Math.min(12,Math.floor((this.level+1)/2));case`Effarig`:return AlchemyResources.all.some(e=>e.unlockedAt===this.level+1).length>0;case`Enslaved`:return!0;case`V`:return Math.min(Math.floor(this.level/6),4)!==Math.min(Math.floor((this.level+1)/6),4);default:return!1}},nextScalingUpgrade(){let e=AlchemyResources.all.filter(e=>e.unlockedAt===this.level+1)[0];switch(this.pet.name){case`Teresa`:return`You can charge an additional Infinity Upgrade`;case`Effarig`:return`Unlock the ${e.name} resource in Glyph Alchemy, which
          ${e.description}`;case`Enslaved`:return`${formatX(20)} to stored game time, and you can store an additional hour of real time`;case`V`:return`You can purchase an additional Triad Study`;default:return`false`}},reward(){return typeof this.nextUnlock.reward==`function`?this.nextUnlock.reward():this.nextUnlock.reward}},methods:{update(){let e=this.pet;this.isUnlocked=e.isUnlocked,this.isUnlocked&&(this.memories.copyFrom(e.memories),this.level=e.level,this.requiredMemories.copyFrom(e.requiredMemories),this.nextLevelEstimate=Ra.timeToGoalString(this.pet,this.requiredMemories.sub(this.memories)))},isImportant(e){return this.importantLevels.includes(e)}}},Gz=D(Wz,function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-ra-bar-container`},[t(`div`,{staticClass:`c-ra-exp-bar`},[t(`div`,{staticClass:`c-ra-exp-bar-inner`,style:e.barStyle})]),t(`div`,{class:e.classObject,on:{click:function(t){return e.pet.levelUp()}}},[t(`span`,{staticClass:`fas fa-arrow-up`}),t(`div`,{staticClass:`c-ra-pet-upgrade__tooltip`},[t(`div`,{staticClass:`c-ra-pet-upgrade__tooltip__name`},[e._v(` Level `+e._s(e.pet.name)+` to `+e._s(e.formatInt(e.level+1))+` `)]),t(`div`,{staticClass:`c-ra-pet-upgrade__tooltip__description`},[e._v(` `+e._s(e.reward)+` `),e.showNextScalingUpgrade?t(`div`,{style:{"margin-top":e.nextUnlock.reward?`0.6rem`:`0`}},[e._v(` `+e._s(e.nextScalingUpgrade)+` `)]):e._e()]),t(`div`,{staticClass:`c-ra-pet-upgrade__tooltip__footer`},[e._v(` Cost: `+e._s(e.quantify(`Memory`,e.requiredMemories,2,2))+` `),e.memories.lte(e.requiredMemories)?t(`span`,[e._v(e._s(e.nextLevelEstimate))]):e._e()])])])])},[],!1,null,null,null,null).exports,Kz={name:`RaUpgradeIcon`,props:{unlock:{type:Object,required:!0}},data(){return{isUnlocked:!1,level:0,description:``}},computed:{petID(){return this.unlock.pet.id},petName(){return this.unlock.pet.name},icon(){return this.unlock.displayIcon},classObject(){return{"c-ra-upgrade-icon":!0,"c-ra-upgrade-icon--inactive":!this.isUnlocked,[`c-ra-upgrade-icon--${this.petID}`]:!0}},isUseless(){return this.unlock.disabledByPelle}},methods:{update(){let e=this.unlock;this.isUnlocked=e.isUnlocked,this.level=e.level,this.description=e.reward}}},qz={name:`RaPet`,components:{RaUpgradeIcon:D(Kz,function(){var e=this,t=e._self._c;return t(`div`,{class:e.classObject},[t(`div`,{domProps:{innerHTML:e._s(e.icon)}}),t(`div`,{staticClass:`c-ra-pet-upgrade__tooltip`},[t(`div`,{staticClass:`c-ra-pet-upgrade__tooltip__name`},[e._v(` `+e._s(e.petName)+` Level `+e._s(e.formatInt(e.level))+` `)]),t(`div`,{staticClass:`c-ra-pet-upgrade__tooltip__description`,class:{"o-pelle-disabled":e.isUseless}},[e._v(` `+e._s(e.description)+` `)])])])},[],!1,null,`ddac0c74`,null,null).exports,RaPetLevelBar:Gz},props:{petConfig:{type:Object,required:!0}},data(){return{isUnlocked:!1,isRaCapped:!1,isCapped:!1,level:0,memories:new Decimal,requiredMemories:new Decimal,memoryChunks:new Decimal,memoryChunksPerSecond:new Decimal,memoriesPerSecond:new Decimal,memoryMultiplier:new Decimal,canGetMemoryChunks:!1,memoryUpgradeCost:new Decimal,chunkUpgradeCost:new Decimal,memoryUpgradeCapped:!1,chunkUpgradeCapped:!1,currentMemoryMult:new Decimal,currentChunkMult:new Decimal,nextMemoryUpgradeEstimate:``,nextMemoryChunkUpgradeEstimate:``}},computed:{levelCap(){return Ra.levelCap},showScalingUpgrade(){return this.petConfig.scalingUpgradeVisible(this.level)},scalingUpgradeText(){return this.petConfig.scalingUpgradeText(this.level)},pet(){return this.petConfig.pet},name(){return this.pet.name},petStyle(){return{color:this.pet.color}},unlocks(){return this.pet.unlocks},chunkTooltip(){return`Based on ${this.pet.chunkGain}`},memoryGainTooltip(){return`Based on ${this.pet.memoryGain}`}},methods:{update(){this.isRaCapped=Ra.totalPetLevel===Ra.maxTotalPetLevel;let e=this.pet;this.isCapped=e.level===Ra.levelCap,this.isUnlocked=e.isUnlocked,this.isUnlocked&&(this.level=e.level,this.memories.copyFrom(e.memories),this.requiredMemories.copyFrom(e.requiredMemories),this.memoryChunks.copyFrom(e.memoryChunks),this.memoryChunksPerSecond.copyFrom(e.memoryChunksPerSecond),this.memoriesPerSecond.copyFrom(e.memoryChunks.mul(Ra.productionPerMemoryChunk).mul(this.currentMemoryMult)),this.canGetMemoryChunks=e.canGetMemoryChunks,this.memoryMultiplier.copyFrom(e.memoryProductionMultiplier),this.memoryUpgradeCost.copyFrom(e.memoryUpgradeCost),this.chunkUpgradeCost.copyFrom(e.chunkUpgradeCost),this.memoryUpgradeCapped=e.memoryUpgradeCapped,this.chunkUpgradeCapped=e.chunkUpgradeCapped,this.currentMemoryMult.copyFrom(e.memoryUpgradeCurrentMult),this.currentChunkMult=e.chunkUpgradeCurrentMult,this.nextMemoryUpgradeEstimate=Ra.timeToGoalString(e,this.memoryUpgradeCost.sub(this.memories)),this.nextMemoryChunkUpgradeEstimate=Ra.timeToGoalString(e,this.chunkUpgradeCost.sub(this.memories)))},nextUnlockLevel(){let e=this.pet.unlocks.map(e=>e.level).filter(e=>e>this.level);return e.length===0?25:e.min()},upgradeClassObject(e){let t=e===`memory`?this.memoryUpgradeCost.lte(this.memories):this.chunkUpgradeCost.lte(this.memories),n=e===`memory`?this.memoryUpgradeCapped:this.chunkUpgradeCapped,r=this.pet;return{"c-ra-pet-upgrade":!0,"c-ra-pet-upgrade-memory":e===`memory`,"c-ra-pet-upgrade-chunk":e===`chunk`,"c-ra-pet-btn--available":t,[`c-ra-pet-btn--${r.id}`]:t,"c-ra-pet-btn--available__capped":n,[`c-ra-pet-btn--${r.id}__capped`]:n}},barStyle(e){let t=e===`memory`?this.memoryUpgradeCost:this.chunkUpgradeCost,n=e===`memory`&&this.memoryUpgradeCapped||e===`chunk`&&this.chunkUpgradeCapped?t:this.memories;return{width:`${100*Decimal.min(1,n.div(t)).toNumber()}%`,background:this.pet.color}}}},Jz=D(qz,function(){var e=this,t=e._self._c;return e.isUnlocked?t(`div`,{staticClass:`l-ra-pet-container`},[t(`div`,{staticClass:`c-ra-pet-header`,style:e.petStyle},[t(`div`,{staticClass:`c-ra-pet-title`},[e._v(` `+e._s(e.pet.id===`enslaved`?`Nameless`:e.name)+` Level `+e._s(e.formatInt(e.level))+`/`+e._s(e.formatInt(e.levelCap))+` `)]),e.showScalingUpgrade?t(`div`,{key:e.level},[e._v(` `+e._s(e.scalingUpgradeText)+` `)]):t(`br`),e.isCapped?e._e():t(`div`,[t(`div`,[e._v(` `+e._s(e.name)+` `+e._s(e.pet.id===`enslaved`?`have`:`has`)+` `+e._s(e.quantify(`Memory`,e.memories,2))+` `)])]),e.isCapped?e._e():t(`div`,{staticClass:`l-ra-pet-middle-container`},[t(`div`,{staticClass:`l-ra-pet-upgrade-container`},[t(`div`,{staticClass:`l-ra-pet-upgrade c-ra-pet-upgrade__top`},[t(`div`,{class:e.upgradeClassObject(`memory`),on:{click:function(t){return e.pet.purchaseMemoryUpgrade()}}},[t(`span`,{staticClass:`fas fa-brain`}),e.memoryUpgradeCapped?t(`div`,{staticClass:`c-ra-pet-upgrade__tooltip`},[t(`div`,{staticClass:`c-ra-pet-upgrade__tooltip__name`},[e._v(` `+e._s(e.name)+`'s Recollection `)]),t(`div`,{staticClass:`c-ra-pet-upgrade__tooltip__description`},[e._v(` Capped: `+e._s(e.formatX(e.currentMemoryMult,2,2))+` `)])]):t(`div`,{staticClass:`c-ra-pet-upgrade__tooltip`},[t(`div`,{staticClass:`c-ra-pet-upgrade__tooltip__name`},[e._v(` `+e._s(e.name)+`'s Recollection `)]),t(`div`,{staticClass:`c-ra-pet-upgrade__tooltip__description`},[e._v(` Gain `+e._s(e.formatPercents(.3))+` more Memories `)]),t(`div`,{staticClass:`c-ra-pet-upgrade__tooltip__footer`},[e._v(` Cost: `+e._s(e.quantify(`Memory`,e.memoryUpgradeCost,2,2))+` `),e.memories.lte(e.memoryUpgradeCost)?t(`span`,[e._v(` `+e._s(e.nextMemoryUpgradeEstimate)+` `)]):e._e(),t(`br`),e._v(` Currently: `+e._s(e.formatX(e.currentMemoryMult,2,2))+` `)])])]),t(`div`,{staticClass:`c-ra-upgrade-bar`},[t(`div`,{staticClass:`c-ra-upgrade-bar__inner`,style:e.barStyle(`memory`)})])]),t(`div`,{staticClass:`l-ra-pet-upgrade c-ra-pet-upgrade__bottom`},[t(`div`,{class:e.upgradeClassObject(`chunk`),on:{click:function(t){return e.pet.purchaseChunkUpgrade()}}},[t(`span`,{staticClass:`fas fa-dice-d6`}),e.chunkUpgradeCapped?t(`div`,{staticClass:`c-ra-pet-upgrade__tooltip`},[t(`div`,{staticClass:`c-ra-pet-upgrade__tooltip__name`},[e._v(` `+e._s(e.name)+`'s Fragmentation `)]),t(`div`,{staticClass:`c-ra-pet-upgrade__tooltip__description`},[e._v(` Capped: `+e._s(e.formatX(e.currentChunkMult,2,2))+` `)])]):t(`div`,{staticClass:`c-ra-pet-upgrade__tooltip`},[t(`div`,{staticClass:`c-ra-pet-upgrade__tooltip__name`},[e._v(` `+e._s(e.name)+`'s Fragmentation `)]),t(`div`,{staticClass:`c-ra-pet-upgrade__tooltip__description`},[e._v(` Gain `+e._s(e.formatPercents(.5))+` more Memory Chunks `)]),t(`div`,{staticClass:`c-ra-pet-upgrade__tooltip__footer`},[e._v(` Cost: `+e._s(e.quantify(`Memory`,e.chunkUpgradeCost,2,2))+` `),e.memories.lte(e.chunkUpgradeCost)?t(`span`,[e._v(` `+e._s(e.nextMemoryChunkUpgradeEstimate)+` `)]):e._e(),t(`br`),e._v(` Currently: `+e._s(e.formatX(e.currentChunkMult,2,2))+` `)])])]),t(`div`,{staticClass:`c-ra-upgrade-bar c-ra-upgrade-bar--bottom`},[t(`div`,{staticClass:`c-ra-upgrade-bar__inner`,style:e.barStyle(`chunk`)})])])]),e.isCapped?e._e():t(`RaPetLevelBar`,{attrs:{"pet-config":e.petConfig}})],1),e.isCapped?e._e():t(`div`,[t(`div`,[e._v(` `+e._s(e.quantify(`Memory Chunk`,e.memoryChunks,2,2))+`, `+e._s(e.quantify(`Memory`,e.memoriesPerSecond,2,2))+`/sec `)]),t(`div`,[e._v(` Gaining `+e._s(e.quantify(`Memory Chunk`,e.memoryChunksPerSecond,2,2))+`/sec `),t(`span`,{attrs:{"ach-tooltip":e.chunkTooltip}},[t(`i`,{staticClass:`fas fa-question-circle`})])])]),e.memoryMultiplier.gt(1)&&!e.isRaCapped?t(`div`,[e._v(` Multiplying all Memory production by `+e._s(e.format(e.memoryMultiplier,2,3))+` `),t(`span`,{attrs:{"ach-tooltip":e.memoryGainTooltip}},[t(`i`,{staticClass:`fas fa-question-circle`})])]):e.isRaCapped?e._e():t(`br`),e.isRaCapped?t(`div`,{staticClass:`l-ra-pet-postcompletion-spacer`}):t(`br`),t(`div`,{staticClass:`l-ra-pet-milestones`},e._l(e.unlocks,function(n,r){return t(`RaUpgradeIcon`,{key:25*e.level+r,attrs:{unlock:n}})}),1)])]):e._e()},[],!1,null,`e8650821`,null,null).exports,Yz={name:`RaPetRemembranceButton`,props:{petConfig:{type:Object,required:!0}},data(){return{isUnlocked:!1,hasRemembrance:!1}},computed:{pet(){return this.petConfig.pet},name(){return this.pet.name},petStyle(){return{backgroundColor:this.hasRemembrance?this.pet.color:`#555`,"box-shadow":this.hasRemembrance?`0.1rem 0.1rem 0.1rem rgba(0, 0, 0, 0.7)`:``,"border-color":this.hasRemembrance?`black`:``}}},methods:{update(){let e=this.pet;this.isUnlocked=e.isUnlocked,this.isUnlocked&&(this.hasRemembrance=e.hasRemembrance)},toggleRemembrance(){Ra.petWithRemembrance=Ra.petWithRemembrance===this.pet.name?``:this.pet.name}}},Xz=D(Yz,function(){var e=this,t=e._self._c;return e.isUnlocked?t(`button`,{staticClass:`c-ra-pet-remembrance-button`,style:e.petStyle,on:{click:e.toggleRemembrance}},[e.hasRemembrance?t(`span`,[e._v(` Remembrance given to `+e._s(e.name)+` `)]):t(`span`,[e._v(` Give Remembrance to `+e._s(e.name)+` `)])]):e._e()},[],!1,null,null,null,null).exports,Zz=D({name:`RaTab`,components:{RaPet:Jz,RaPetRemembranceButton:Xz,CelestialQuoteHistory:fL},data(){return{memoriesPerChunk:new Decimal,showReality:!1,isRaCapped:!1,totalLevels:0,showRemembrance:!1,hasRemembrance:!1,remembranceReq:0,remembranceMult:1,remembranceNerf:1,petWithRemembrance:``,isRunning:!1,memoryBoosts:``}},computed:{laitelaUnlock:()=>Laitela.isUnlocked,pets:()=>[{pet:Ra.pets.teresa,scalingUpgradeVisible:()=>Ra.unlocks.chargedInfinityUpgrades.isUnlocked,scalingUpgradeText:()=>`You can Charge ${quantifyInt(`Infinity Upgrade`,Ra.totalCharges)}.`},{pet:Ra.pets.effarig,scalingUpgradeVisible:()=>AlchemyResources.all.some(e=>e.isUnlocked).length>0,scalingUpgradeText:()=>{let e=AlchemyResources.all.filter(e=>e.isUnlocked).length;return`You have unlocked ${quantifyInt(`Alchemy Resource`,e)}.`}},{pet:Ra.pets.enslaved,scalingUpgradeVisible:()=>Ra.unlocks.improvedStoredTime.isUnlocked,scalingUpgradeText:()=>`Stored game time
          ${formatX(Ra.unlocks.improvedStoredTime.effects.gameTimeAmplification.effectOrDefault(1),2)} and real time
          +${formatInt(Ra.unlocks.improvedStoredTime.effects.realTimeCap.effectOrDefault(0)/(1e3*3600))} hours`},{pet:Ra.pets.v,scalingUpgradeVisible:()=>Ra.unlocks.unlockHardV.isUnlocked,scalingUpgradeText:()=>{let e=Ra.unlocks.unlockHardV.effectOrDefault(0);return`You have unlocked ${quantifyInt(`Triad Study`,e)}.`}}],petStyle(){return{color:this.petWithRemembrance===``?`white`:this.pets.find(e=>e.pet.name===this.petWithRemembrance).pet.color}},runButtonClassObject(){return{"c-ra-run-button__icon":!0,"c-ra-run-button__icon--running":this.isRunning,"c-celestial-run-button--clickable":!this.isDoomed,"o-pelle-disabled-pointer":this.isDoomed}},runDescription(){return GameDatabase.celestials.descriptions[4].effects().replace(/^\w/u,e=>e.toUpperCase()).split(`
`)},memoryDescription(){return`Within Ra's Reality, Memory Chunks for Celestial Memories
        will be generated based on certain resource amounts.`},isDoomed:()=>Pelle.isDoomed},methods:{update(){this.memoriesPerChunk.copyFrom(Ra.productionPerMemoryChunk),this.isRaCapped=Ra.totalPetLevel===100,this.totalLevels=Ra.totalPetLevel,this.showRemembrance=Ra.unlocks.effarigUnlock.canBeApplied,this.hasRemembrance=Ra.remembrance.isUnlocked,this.remembranceReq=Ra.remembrance.requiredLevels,this.remembranceMult=Ra.remembrance.multiplier,this.remembranceNerf=Ra.remembrance.nerf,this.petWithRemembrance=Ra.petWithRemembrance,this.isRunning=Ra.isRunning,this.memoryBoosts=Ra.memoryBoostResources},startRun(){this.isDoomed||Modal.celestials.show({name:`Ra's`,number:4})},toggleMode(){Ra.toggleMode()}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-ra-celestial-tab`},[t(`div`,{staticClass:`c-ra-memory-header`},[t(`CelestialQuoteHistory`,{attrs:{celestial:`ra`}}),e.isRaCapped?t(`div`,[e._v(` All Memories have been returned. `)]):t(`div`,[e._v(` Each Memory Chunk generates a base of one Memory per second`),e.memoriesPerChunk.gt(1)?t(`span`,[e._v(`, which has been increased to `+e._s(e.quantify(`Memory`,e.memoriesPerChunk,2,3))+` per second`)]):e._e(),e._v(`. `),t(`br`),e._v(` Storing real time prevents Memory Chunk generation, but Memories will still be gained normally. `),e.memoriesPerChunk.gt(1)?t(`span`,[t(`br`),e._v(` This is being increased due to `+e._s(e.memoryBoosts)+`. `)]):e._e()])],1),e._m(0),t(`div`,{staticClass:`l-ra-all-pets-container`},e._l(e.pets,function(e,n){return t(`RaPet`,{key:n,attrs:{"pet-config":e}})}),1),t(`div`,{staticClass:`l-ra-non-pets`},[t(`button`,{staticClass:`c-ra-run-button`},[t(`h2`,{class:{"o-pelle-disabled":e.isDoomed}},[e.isRunning?t(`span`,[e._v(`You are in `)]):t(`span`,[e._v(`Start `)]),e._v(` Ra's Reality `)]),t(`div`,{class:e.runButtonClassObject,on:{click:e.startRun}},[t(`span`,{staticClass:`c-ra-run-button__icon__sigil fas fa-sun`})]),e._l(e.runDescription,function(n,r){return t(`span`,{key:r+`-ra-run-desc`},[e._v(` `+e._s(n)+` `)])}),t(`br`),t(`span`,[e._v(` `+e._s(e.memoryDescription)+` `)])],2),e.showRemembrance&&!e.isRaCapped?t(`div`,{staticClass:`c-ra-remembrance-unlock`},[t(`h1`,{style:e.petStyle},[e._v(` Remembrance `)]),t(`span`,{style:e.petStyle},[e._v(` Whichever Celestial has Remembrance will get `+e._s(e.formatX(e.remembranceMult))+` Memory Chunk gain. The other Celestials will get `+e._s(e.formatX(e.remembranceNerf,1,1))+` Memory Chunk gain. `)]),e.hasRemembrance?t(`div`,{staticClass:`c-ra-remembrance-unlock-inner`},e._l(e.pets,function(e,n){return t(`RaPetRemembranceButton`,{key:n,attrs:{"pet-config":e}})}),1):t(`div`,{staticClass:`c-ra-remembrance-unlock-inner`},[e._v(` Unlocked by getting `+e._s(e.formatInt(e.remembranceReq))+` total Celestial Memory levels (you need `+e._s(e.formatInt(e.remembranceReq-e.totalLevels))+` more) `)])]):e._e()])])},[function(){var e=this,t=e._self._c;return t(`div`,[e._v(` Mouse-over the icons below the bar to see descriptions of upgrades, `),t(`br`),e._v(` and mouse-over `),t(`i`,{staticClass:`fas fa-question-circle`}),e._v(` icons for specific resource information. `)])}],!1,null,null,null,null).exports,Qz={name:`RealityUpgradeButton`,components:{PrimaryToggleButton:R,DescriptionDisplay:u,EffectDisplay:c,CostDisplay:pe,HintText:me},props:{upgrade:{type:Object,required:!0}},data(){return{isAvailableForPurchase:!1,automatorPoints:!1,canBeBought:!1,isRebuyable:!1,isBought:!1,isPossible:!1,isAutoUnlocked:!1,isAutobuyerOn:!1,canBeLocked:!1,hasRequirementLock:!1}},computed:{config(){return this.upgrade.config},classObject(){return{"c-reality-upgrade-btn--useless":this.isUseless,"c-reality-upgrade-btn--bought":this.isBought&&!this.isUseless,"c-reality-upgrade-btn--unavailable":!this.isBought&&!this.canBeBought&&this.isAvailableForPurchase,"c-reality-upgrade-btn--possible":!this.isAvailableForPurchase&&this.isPossible,"c-reality-upgrade-btn--locked":!this.isAvailableForPurchase&&!this.isPossible}},requirementConfig(){return{description:this.config.requirement}},canLock(){return this.config.canLock&&!(this.isAvailableForPurchase||this.isBought)},isUseless(){return Pelle.disabledRUPGs.includes(this.upgrade.id)&&Pelle.isDoomed}},watch:{isAutobuyerOn(e){Autobuyer.realityUpgrade(this.upgrade.id).isActive=e}},methods:{update(){let e=this.upgrade;this.isAvailableForPurchase=e.isAvailableForPurchase,this.automatorPoints=this.config.automatorPoints,this.canBeBought=e.canBeBought,this.isRebuyable=e.isRebuyable,this.isBought=!e.isRebuyable&&e.isBought,this.isPossible=e.isPossible,this.isAutoUnlocked=Ra.unlocks.instantECAndRealityUpgradeAutobuyers.canBeApplied,this.canBeLocked=e.config.canLock&&!this.isAvailableForPurchase,this.hasRequirementLock=e.hasPlayerLock,this.isRebuyable&&(this.isAutobuyerOn=Autobuyer.realityUpgrade(e.id).isActive)},toggleLock(e){this.isRebuyable||e.toggleMechanicLock()}}},$z={name:`RealityUpgradesTab`,components:{RealityUpgradeButton:D(Qz,function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-spoon-btn-group`},[t(`button`,{staticClass:`l-reality-upgrade-btn c-reality-upgrade-btn`,class:e.classObject,on:{click:[function(t){return!t.shiftKey||t.ctrlKey||t.altKey||t.metaKey?null:e.toggleLock(e.upgrade)},function(t){return t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:e.upgrade.purchase()}]}},[t(`HintText`,{staticClass:`l-hint-text--reality-upgrade c-hint-text--reality-upgrade`,attrs:{type:`realityUpgrades`}},[e._v(` `+e._s(e.config.name)+` `)]),t(`span`,{class:{"o-pelle-disabled":e.isUseless}},[t(`DescriptionDisplay`,{attrs:{config:e.config}}),e.$viewModel.shiftDown===e.isAvailableForPurchase&&!e.isRebuyable?[t(`br`),t(`DescriptionDisplay`,{staticClass:`c-reality-upgrade-btn__requirement`,attrs:{config:e.requirementConfig,label:`Requirement:`}})]:[t(`EffectDisplay`,{attrs:{config:e.config,br:``}}),e.isBought?e._e():t(`CostDisplay`,{attrs:{config:e.config,br:``,name:`Reality Machine`}})],e.automatorPoints&&!e.isBought?t(`b`,[e._v(` (+`+e._s(e.formatInt(e.automatorPoints))+` AP) `)]):e._e()],2)],1),e.canBeLocked?t(`div`,{staticClass:`o-requirement-lock`},[e.hasRequirementLock?t(`i`,{staticClass:`fas fa-lock`}):e.canLock?t(`i`,{staticClass:`fas fa-lock-open`}):e._e()]):e._e(),e.isRebuyable&&e.isAutoUnlocked?t(`PrimaryToggleButton`,{staticClass:`l--spoon-btn-group__little-spoon-reality-btn o-primary-btn--reality-upgrade-toggle`,attrs:{label:`Auto:`},model:{value:e.isAutobuyerOn,callback:function(t){e.isAutobuyerOn=t},expression:`isAutobuyerOn`}}):e._e()],1)},[],!1,null,`05d78874`,null,null).exports},computed:{upgrades:()=>RealityUpgrades.all,costScalingTooltip:()=>`Prices start increasing faster above ${format(1e30)} RM and then even faster
      above ${format(new Decimal(Number.MAX_VALUE),1)} RM`,possibleTooltip:()=>`Checkered upgrades are impossible to unlock this Reality. Striped upgrades are
      still possible.`,lockTooltip:()=>`This will only function if you have not already failed the condition or
      unlocked the upgrade.`},methods:{id(e,t){return(e-1)*5+t-1}}},eB=D($z,function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-reality-upgrade-grid`},[t(`div`,{staticClass:`c-reality-upgrade-infotext`},[e._v(` Mouseover `),t(`i`,{staticClass:`fas fa-question-circle`}),e._v(` icons for additional information. `),t(`br`),e._v(` The first row of upgrades can be purchased endlessly for increasing costs `),t(`span`,{attrs:{"ach-tooltip":e.costScalingTooltip}},[t(`i`,{staticClass:`fas fa-question-circle`})]),e._v(` and the rest are single-purchase. `),t(`br`),e._v(` Single-purchase upgrades also have requirements which, once completed, permanently unlock the ability to purchase the upgrades at any point. `),t(`span`,{attrs:{"ach-tooltip":e.possibleTooltip}},[t(`i`,{staticClass:`fas fa-question-circle`})]),t(`br`),e._v(` Locked upgrades show their requirement and effect by default; unlocked ones show their effect, current bonus, and cost. Hold shift to swap this behavior. `),t(`br`),e._v(` You can shift-click upgrades with `),t(`i`,{staticClass:`fas fa-lock-open`}),e._v(` to make the game prevent you from doing anything this Reality which would cause you to fail their unlock condition. `),t(`span`,{attrs:{"ach-tooltip":e.lockTooltip}},[t(`i`,{staticClass:`fas fa-question-circle`})]),t(`br`),e._v(` Every completed row of purchased upgrades increases your Glyph level by `+e._s(e.formatInt(1))+`. `)]),e._l(5,function(n){return t(`div`,{key:n,staticClass:`l-reality-upgrade-grid__row`},e._l(5,function(r){return t(`RealityUpgradeButton`,{key:e.id(n,r),attrs:{upgrade:e.upgrades[e.id(n,r)]}})}),1)})],2)},[],!1,null,`d2584fb1`,null,null).exports,tB=r({name:`ReplicantiUpgradeButton`,components:{PrimaryButton:L,PrimaryToggleButton:R},props:{setup:{type:Object,required:!0}},data(){return{description:``,canBeBought:!1,costDescription:``,isCapped:!1,isAutoUnlocked:!1,isAutobuyerOn:!1,isEC8Running:!1}},computed:{upgrade(){return this.setup.upgrade}},watch:{isAutobuyerOn(e){Autobuyer.replicantiUpgrade(this.upgrade.id).isActive=e}},methods:{update(){let e=this.setup,t=e.upgrade;this.description=e.formatDescription(t.value),this.canBeBought=t.canBeBought,this.isCapped=t.isCapped,this.isCapped||(this.costDescription=e.formatCost(t.cost));let n=Autobuyer.replicantiUpgrade(t.id);this.isAutoUnlocked=n.isUnlocked,this.isAutobuyerOn=n.isActive,this.isEC8Running=EternityChallenge(8).isRunning}}}),nB=class{constructor(e,t,n){this.upgrade=e,this.formatDescription=t,this.formatCost=n}},rB=D(tB,function(){var e=this,t=e._self._c;return e._self._setupProxy,t(`div`,{staticClass:`l-spoon-btn-group l-replicanti-upgrade-button`},[t(`PrimaryButton`,{staticClass:`o-primary-btn--replicanti-upgrade`,attrs:{enabled:e.canBeBought},on:{click:function(t){return e.upgrade.purchase()}}},[t(`span`,{domProps:{innerHTML:e._s(e.description)}}),e.isCapped?e._e():[t(`br`),t(`span`,[e._v(e._s(e.costDescription))])]],2),e.isAutoUnlocked&&!e.isEC8Running?t(`PrimaryToggleButton`,{staticClass:`l--spoon-btn-group__little-spoon o-primary-btn--replicanti-upgrade-toggle`,attrs:{label:`Auto:`},model:{value:e.isAutobuyerOn,callback:function(t){e.isAutobuyerOn=t},expression:`isAutobuyerOn`}}):e._e()],1)},[],!1,null,`449ee54f`,null,null).exports,iB=r({name:`ReplicantiGainText`,data(){return{remainingTimeText:``,galaxyText:``}},methods:{update(){let e=player.options.updateRate,t=1e3/e,n=Decimal.divide(Replicanti.chance.add(1).ln().mul(getGameSpeedupForDisplay().mul(e)),getReplicantiInterval()),r=n.dividedBy(Math.LN10),i=Decimal.divide(Replicanti.chance.add(1).ln().mul(getGameSpeedupForDisplay().mul(e)),getReplicantiInterval(!1)).dividedBy(Math.LN10),a=Replicanti.amount,o=Replicanti.isUncapped&&a.max(1).log10().gt(DLOG10_MAXNUM);if(o){let r=Decimal.log10(ReplicantiGrowth.scaleFactor).div(ReplicantiGrowth.scaleLog10),i=n.times(r).plus(1).pow(r.recip().mul(t)),o=Pelle.isDoomed?100:1e3,s=a.max(1).log10().div(o).add(1).floor().mul(o).pow10(),c=Decimal.divide(e/1e3,n.times(r)).times(s.divide(a).pow(r).minus(1)),l=c.eq(0)?`an extremely long time`:`${TimeSpan.fromSeconds(c)}`;this.remainingTimeText=`You are gaining ${formatX(i,2,1)} Replicanti per second (${l} until ${format(s)})`}else this.remainingTimeText=``;let s=DLOG10_MAXNUM.div(r.times(t)),c=DLOG10_MAXNUM.sub(a.max(1).log10()).div(r.times(t));c.lt(0)&&(c=new Decimal);let l=i.times(new Decimal(t).div(DLOG10_MAXNUM)),u=e=>e.add(49.5).div(49.5).ln().mul(50),d,f,p;RealityUpgrade(6).isBought&&!Pelle.isDoomed?(d=l.divide(RealityUpgrade(6).effectValue),f=u(Replicanti.galaxies.max.add(Replicanti.galaxies.extra)).sub(u(Replicanti.galaxies.extra)),p=u(Replicanti.galaxies.bought.add(Replicanti.galaxies.extra)).sub(u(Replicanti.galaxies.extra))):(d=l,f=Replicanti.galaxies.max,p=Replicanti.galaxies.bought);let m=l.reciprocal();if(this.remainingTimeText===``&&(c.eq(0)?this.remainingTimeText=`At Infinite Replicanti (normally takes
            ${TimeSpan.fromSeconds(m)})`:a.lt(100)?this.remainingTimeText=`Approximately ${TimeSpan.fromSeconds(c)} remaining
            until Infinite Replicanti`:this.remainingTimeText=`${TimeSpan.fromSeconds(c)} remaining until Infinite Replicanti`),Replicanti.galaxies.max===0&&!o&&(this.remainingTimeText+=` (${TimeSpan.fromSeconds(new Decimal(s))} total)`),Replicanti.galaxies.max.gt(0))if(player.replicanti.galaxies.eq(Replicanti.galaxies.max))this.galaxyText=`You have reached the maximum amount of Replicanti Galaxies`;else{this.galaxyText=`You are gaining a Replicanti Galaxy every
            ${TimeSpan.fromSeconds(m)}`,l.gte(1)&&(this.galaxyText=`You are gaining ${quantify(`Replicanti Galaxy`,l,2,1)} per second`);let e=Decimal.divide(f.sub(p),d),t=Replicanti.galaxies.gain,n=t.mul(m);if(Achievement(126).isUnlocked&&!Pelle.isDoomed){let e=a.max(1).log10().div(LOG10_MAX_VALUE).sub(t);n=n.add(m.times(e))}let r=t.gt(0)?n:m.sub(c);this.galaxyText+=` (all Replicanti Galaxies within
            ${TimeSpan.fromSeconds(e.sub(r).clampMin(0))})`}else this.galaxyText=``}}}),aB=D(iB,function(){var e=this,t=e._self._c;return e._self._setupProxy,t(`p`,[e._v(e._s(e.remainingTimeText)),t(`br`),e._v(e._s(e.galaxyText))])},[],!1,null,`d82cd757`,null,null).exports,oB=r({name:`ReplicantiGalaxyButton`,components:{PrimaryButton:L,PrimaryToggleButton:R},data(){return{isAvailable:!1,isAutoUnlocked:!1,isAutoActive:!1,isAutoEnabled:!1,isDivideUnlocked:!1,boughtGalaxies:0,extraGalaxies:0}},computed:{resetActionDisplay(){return QuantumSpeedrunMilestone(20).isReached?null:this.isDivideUnlocked&&!Pelle.isDoomed?`Divide Replicanti by ${format(Number.MAX_VALUE,1,1)}`:`Reset Replicanti amount`},galaxyCountDisplay(){let e=this.boughtGalaxies,t=this.extraGalaxies;return`Currently: ${t.gt(0)?`${formatInt(e)}+${formatInt(t)}`:formatInt(e)}`},autobuyer(){return Autobuyer.replicantiGalaxy},autobuyerTextDisplay(){let e=this.isAutoActive,t=!this.isAutoEnabled;return`Auto Galaxy ${e?`ON`:`OFF`}${t?` (disabled)`:``}`}},methods:{update(){let e=Replicanti.galaxies;this.isAvailable=e.canBuyMore,this.boughtGalaxies=e.bought,this.extraGalaxies=e.extra,this.isDivideUnlocked=Achievement(126).isUnlocked;let t=Autobuyer.replicantiGalaxy;this.isAutoUnlocked=t.isUnlocked,this.isAutoActive=t.isActive,this.isAutoEnabled=t.isEnabled},handleAutoToggle(e){Autobuyer.replicantiGalaxy.isActive=e,this.update()},handleClick(){replicantiGalaxyRequest()}}}),sB=D(oB,function(){var e=this,t=e._self._c;return e._self._setupProxy,t(`div`,{staticClass:`l-spoon-btn-group`},[t(`PrimaryButton`,{staticClass:`o-primary-btn--replicanti-galaxy`,attrs:{enabled:e.isAvailable},on:{click:e.handleClick}},[e.resetActionDisplay===null?[e._v(` Gain a Replicanti Galaxy `)]:[e._v(` `+e._s(e.resetActionDisplay)+` for a Replicanti Galaxy `)],t(`br`),e._v(` `+e._s(e.galaxyCountDisplay)+` `)],2),e.isAutoUnlocked?t(`PrimaryToggleButton`,{staticClass:`l--spoon-btn-group__little-spoon o-primary-btn--replicanti-galaxy-toggle`,attrs:{value:e.isAutoActive,on:e.autobuyerTextDisplay,off:e.autobuyerTextDisplay},on:{input:e.handleAutoToggle}}):e._e()],1)},[],!1,null,`1e11ae3d`,null,null).exports,cB=r({name:`ReplicantiTab`,components:{PrimaryButton:L,ReplicantiGainText:aB,ReplicantiUpgradeButton:rB,ReplicantiGalaxyButton:sB},data(){return{isUnlocked:!1,isUnlockAffordable:!1,isInEC8:!1,ec8Purchases:0,amount:new Decimal,mult:new Decimal,hasTDMult:!1,multTD:new Decimal,hasADMult:!1,multAD:new Decimal,hasDTMult:!1,multDT:new Decimal,hasIPMult:!1,multIP:new Decimal,hasMS51:!1,multMS51:new Decimal,hasMS52:!1,multMS52:new Decimal,hasRaisedCap:!1,replicantiCap:new Decimal,capMultText:``,distantRG:0,remoteRG:0,effarigInfinityBonusRG:0,isUncapped:!1,nextEffarigRGThreshold:0,canSeeGalaxyButton:!1,unlockCost:new Decimal,scrambledText:``,maxReplicanti:new Decimal,estimateToMax:0,scaleFactor:0,scaleLogarithim:0}},computed:{isDoomed:()=>Pelle.isDoomed,replicantiChanceSetup(){return new nB(ReplicantiUpgrade.chance,e=>Replicanti.chance.gt(`e1e6`)?`Replication frequency: ${format(Replicanti.chance.log10())}/sec`:`Replicate chance: ${formatPercents(Replicanti.chance)}`,e=>{if(!Replicanti.chance.gt(`e1e6`))return`+${formatPercents(.01)} Costs: ${format(e)} IP`})},replicantiIntervalSetup(){let e=ReplicantiUpgrade.interval;function t(t){let n=e.applyModifiers(t),r=n.toNumber();return Number.isFinite(r)&&r>1&&e.isCapped?TimeSpan.fromMilliseconds(new Decimal(r)).toStringShort(!1):n.lt(.01)?`< ${format(.01,2,2)}ms`:n.gt(1e3)?`${format(n.div(1e3),2,2)}s`:`${format(n,2,2)}ms`}return new nB(e,e=>`Interval: ${t(e)}`,n=>`➜ ${t(e.nextValue)} Costs: ${format(n)} IP`)},maxGalaxySetup(){let e=ReplicantiUpgrade.galaxies;return new nB(e,t=>{let n=`Max Replicanti Galaxies: `,r=e.extra;if(r.gt(0)){let e=r.add(t);n+=`<br>${formatInt(t)} + ${formatInt(r)} = ${formatInt(e)}`}else n+=formatInt(t);return n},e=>`+${formatInt(1)} Costs: ${format(e)} IP`)},boostText(){let e=[];if(e.push(`a <span class="c-replicanti-description__accent">${formatX(this.mult,2,2)}</span>
        multiplier on all Infinity Dimensions`),this.hasADMult&&e.push(`a <span class="c-replicanti-description__accent">${formatX(this.multAD,2,2)}</span>
          multiplier on all Antimatter Dimensions from Time Study 101`),this.hasTDMult&&e.push(`a <span class="c-replicanti-description__accent">${formatX(this.multTD,2,2)}</span>
          multiplier on all Time Dimensions from a Dilation Upgrade`),this.hasDTMult){let t=GlyphAlteration.isAdded(`replication`)?`and Replicanti speed `:``;e.push(`a <span class="c-replicanti-description__accent">${formatX(this.multDT,2,2)}</span>
          multiplier to Dilated Time ${t}from Glyphs`)}return this.hasMS51&&e.push(`a <span class="c-replicanti-description__accent">${formatX(this.multMS51,2,2)}</span>
          multiplier on Dilated Time production from Mastery Study 51`),this.hasMS52&&e.push(`a <span class="c-replicanti-description__accent">${formatX(this.multMS52,2,2)}</span>
          multiplier on all Meta Dimensions from Mastery Study 52`),this.hasIPMult&&e.push(`a <span class="c-replicanti-description__accent">${formatX(this.multIP)}</span>
          multiplier to Infinity Points from Glyph Alchemy`),e.length===1?`${e[0]}.`:e.length===2?`${e[0]}<br> and ${e[1]}.`:`${e.slice(0,-1).join(`,<br>`)},<br> and ${e[e.length-1]}.`},hasMaxText:()=>PlayerProgress.realityUnlocked()&&!Pelle.isDoomed,toMaxTooltip(){return this.amount.lte(this.replicantiCap)?null:this.estimateToMax.lt(.01)?`Currently Increasing`:TimeSpan.fromSeconds(this.estimateToMax).toStringShort()}},methods:{update(){if(this.isUnlocked=Replicanti.areUnlocked,this.unlockCost=new Decimal(1e140).dividedByEffectOf(PelleRifts.vacuum.milestones[1]),this.isDoomed&&(this.scrambledText=this.vacuumText()),!this.isUnlocked){this.isUnlockAffordable=Currency.infinityPoints.gte(this.unlockCost);return}if(this.isInEC8=EternityChallenge(8).isRunning,this.isInEC8&&(this.ec8Purchases=player.eterc8repl),this.amount.copyFrom(Replicanti.amount),this.mult.copyFrom(replicantiMult()),this.hasTDMult=DilationUpgrade.tdMultReplicanti.isBought,this.multTD.copyFrom(DilationUpgrade.tdMultReplicanti.effectValue),this.hasADMult=TimeStudy(101).isBought,this.multAD.copyFrom(TimeStudy(101).effectValue),this.hasDTMult=getAdjustedGlyphEffect(`replicationdtgain`).neq(0)&&!Pelle.isDoomed,this.multDT=Decimal.max(Decimal.log10(Replicanti.amount).times(getAdjustedGlyphEffect(`replicationdtgain`)),1),this.hasMS51=MasteryStudy(51).isBought,this.multMS51.copyFrom(MasteryStudy(51).effectValue),this.hasMS52=MasteryStudy(52).isBought,this.multMS52.copyFrom(MasteryStudy(52).effectValue),this.hasIPMult=AlchemyResource.exponential.amount.gt(0)&&!this.isDoomed,this.multIP=Replicanti.amount.powEffectOf(AlchemyResource.exponential),this.isUncapped=PelleRifts.vacuum.milestones[1].canBeApplied,this.hasRaisedCap=EffarigUnlock.infinity.isUnlocked&&!this.isUncapped,this.replicantiCap.copyFrom(replicantiCap()),this.hasRaisedCap){let e=this.replicantiCap.div(Number.MAX_VALUE);this.capMultText=TimeStudy(31).canBeApplied?`Base: ${formatX(e.pow(1/TimeStudy(31).effectValue),2)}; after TS31: ${formatX(e,2)}`:formatX(e,2)}this.distantRG=ReplicantiUpgrade.galaxies.distantRGStart,this.remoteRG=ReplicantiUpgrade.galaxies.remoteRGStart,this.effarigInfinityBonusRG=Effarig.bonusRG,this.nextEffarigRGThreshold=new Decimal(Number.MAX_VALUE).pow(Effarig.bonusRG.add(2)),this.canSeeGalaxyButton=Replicanti.galaxies.max.gte(1)||PlayerProgress.eternityUnlocked(),this.maxReplicanti.copyFrom(player.records.thisReality.maxReplicanti),this.estimateToMax=this.calculateEstimate(),this.scaleFactor=ReplicantiGrowth.scaleFactor,this.scaleLogarithim=ReplicantiGrowth.scaleLog10},vacuumText(){return I.wordCycle(PelleRifts.vacuum.name)},calculateEstimate(){let e=player.options.updateRate,t=Replicanti.chance.add(1).ln().mul(e).mul(getGameSpeedupForDisplay()).div(getReplicantiInterval()),n=Decimal.log10(ReplicantiGrowth.scaleFactor).div(ReplicantiGrowth.scaleLog10),r=this.maxReplicanti;return Decimal.divide(e/1e3,t.times(n)).times(r.divide(this.amount).pow(n).minus(1))}}}),lB=D(cB,function(){var e=this,t=e._self._c;return e._self._setupProxy,t(`div`,{staticClass:`l-replicanti-tab`},[t(`br`),e.isUnlocked?[e.isDoomed?t(`div`,{staticClass:`modified-cap`},[e._v(` Your Replicanti cap has been removed due to the second `+e._s(e.scrambledText)+` milestone. `)]):e.hasRaisedCap?t(`div`,{staticClass:`modified-cap`},[e._v(` Completion of Effarig's Infinity is giving you the following rewards: `),t(`br`),e._v(` Your Replicanti cap without TS192 is now `+e._s(e.format(e.replicantiCap,2))+` (`+e._s(e.capMultText)+`) `),t(`br`),e._v(` `+e._s(e.quantifyInt(`extra Replicanti Galaxy`,e.effarigInfinityBonusRG))+` (Next Replicanti Galaxy at `+e._s(e.format(e.nextEffarigRGThreshold,2))+` cap) `)]):e._e(),t(`p`,{staticClass:`c-replicanti-description`},[e._v(` You have `),t(`span`,{staticClass:`c-replicanti-description__accent`},[e._v(e._s(e.format(e.amount,2,0)))]),e._v(` Replicanti, translated to `),t(`br`),t(`span`,{domProps:{innerHTML:e._s(e.boostText)}})]),e.hasMaxText?t(`div`,{staticClass:`c-replicanti-description`},[e._v(` Your maximum Replicanti reached this Reality is `),t(`span`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:e.toMaxTooltip,expression:`toMaxTooltip`}],staticClass:`max-accent`},[e._v(e._s(e.format(e.maxReplicanti,2)))]),e._v(`. `)]):e._e(),t(`br`),e.isInEC8?t(`div`,[e._v(` You have `+e._s(e.quantifyInt(`purchase`,e.ec8Purchases))+` left within Eternity Challenge 8. `)]):e._e(),t(`div`,{staticClass:`l-replicanti-upgrade-row`},[t(`ReplicantiUpgradeButton`,{attrs:{setup:e.replicantiChanceSetup}}),t(`ReplicantiUpgradeButton`,{attrs:{setup:e.replicantiIntervalSetup}}),t(`ReplicantiUpgradeButton`,{attrs:{setup:e.maxGalaxySetup}})],1),t(`div`,[e._v(` The Max Replicanti Galaxy upgrade can be purchased endlessly, but costs increase `),t(`br`),e._v(` more rapidly above `+e._s(e.formatInt(e.distantRG))+` Replicanti Galaxies and even more so above `+e._s(e.formatInt(e.remoteRG))+` Replicanti Galaxies. `)]),t(`br`),t(`br`),t(`ReplicantiGainText`),t(`br`),e._v(` Replicanti slows down by `+e._s(e.formatX(e.scaleFactor,2,4))+` per `+e._s(e.format(e.scaleLogarithim,2,2))+` OoM of Replicanti above `+e._s(e.format(e.replicantiCap,2))+`. `),t(`br`),e.canSeeGalaxyButton?t(`ReplicantiGalaxyButton`):e._e()]:t(`PrimaryButton`,{staticClass:`o-primary-btn--replicanti-unlock`,attrs:{enabled:e.isUnlockAffordable,onclick:`Replicanti.unlock();`}},[e._v(` Unlock Replicanti `),t(`br`),e._v(` Cost: `+e._s(e.format(e.unlockCost))+` IP `)])],2)},[],!1,null,`8aa9c8d9`,null,null).exports,uB={name:`SecretAchievement`,components:{HintText:me},props:{achievement:{type:Object,required:!0}},data(){return{isUnlocked:!1,isMouseOver:!1,showUnlockState:!1}},computed:{id(){return this.achievement.id},config(){return this.achievement.config},styleObject(){if(this.isUnlocked)return{"background-position":`-${(this.achievement.column-1)*104}px -${(this.achievement.row-1)*104}px`}},classObject(){return{"o-achievement":!0,"o-achievement--hidden":!this.isUnlocked,"o-achievement--unlocked":this.isUnlocked,"o-achievement--secret":!0}},indicatorIconClass(){return this.isUnlocked?`fas fa-check`:`fas fa-times`},indicatorClassObject(){return{"o-achievement__indicator":!0,"o-achievement__indicator--locked":!this.isUnlocked}}},beforeDestroy(){clearTimeout(this.mouseOverInterval)},methods:{update(){this.isUnlocked=this.achievement.isUnlocked,this.showUnlockState=player.options.showHintText.achievementUnlockStates},onMouseEnter(){clearTimeout(this.mouseOverInterval),this.isMouseOver=!0},onMouseLeave(){this.mouseOverInterval=setTimeout(()=>this.isMouseOver=!1,300)},onClick(){this.id===11&&SecretAchievement(11).unlock()}}},dB={name:`SecretAchievementRow`,components:{SecretAchievement:D(uB,function(){var e=this,t=e._self._c;return t(`div`,{class:e.classObject,style:e.styleObject,on:{click:e.onClick,mouseenter:e.onMouseEnter,mouseleave:e.onMouseLeave}},[t(`HintText`,{staticClass:`l-hint-text--achievement`,attrs:{type:`achievements`}},[e._v(` S`+e._s(e.id)+` `)]),t(`div`,{staticClass:`o-achievement__tooltip`},[e.isMouseOver?[t(`div`,{staticClass:`o-achievement__tooltip__name`},[e._v(` `+e._s(e.config.name)+` (S`+e._s(e.id)+`) `)]),e.isUnlocked?t(`div`,{staticClass:`o-achievement__tooltip__description`},[e._v(` `+e._s(e.config.description)+` `)]):e._e()]:e._e()],2),e.showUnlockState?t(`div`,{class:e.indicatorClassObject},[t(`i`,{class:e.indicatorIconClass})]):e._e()],1)},[],!1,null,null,null,null).exports},props:{row:{type:Array,required:!0}},data(){return{isCompleted:!1}},computed:{classObject(){return{"l-achievement-grid__row":!0,"c-achievement-grid__row--completed":this.isCompleted}}},methods:{update(){this.isCompleted=this.row.every(e=>e.isUnlocked)}}},fB={name:`SecretAchievementTab`,components:{SecretAchievementRow:D(dB,function(){var e=this,t=e._self._c;return t(`div`,{class:e.classObject},e._l(e.row,function(e,n){return t(`SecretAchievement`,{key:n,staticClass:`l-achievement-grid__cell`,attrs:{achievement:e}})}),1)},[],!1,null,null,null,null).exports},computed:{rows:()=>SecretAchievements.allRows}},pB=D(fB,function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-achievements-tab`},[e._m(0),t(`div`,{staticClass:`l-achievement-grid`},e._l(e.rows,function(e,n){return t(`secret-achievement-row`,{key:n,attrs:{row:e}})}),1)])},[function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`c-achievements-tab__header`},[t(`span`,[e._v(` Secret Achievements are optional and give no bonuses. `)])])}],!1,null,null,null,null).exports,mB=D({name:`ShopTab`},function(){var e=this;return e._self._c,e._m(0)},[function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`tab shop`},[t(`div`,[e._v(` STD's cannot be bought on games made with the Break Eternity port of AD. `)])])}],!1,null,`abada0d1`,null,null).exports,hB={name:`SpeedrunMilestoneSingle`,props:{milestone:{type:Object,required:!0},display:{type:Boolean,required:!1,default:!1},time:{type:Number,required:!1,default:0}},computed:{displayName(){return this.display?this.milestone.name:`???`},description(){return this.display?typeof this.milestone.description==`function`?this.milestone.description():this.milestone.description:``},timeDisplay(){return this.time?`Completed in ${TimeSpan.fromMilliseconds(new Decimal(this.time)).toStringShort(!0,!0)}`:`Not reached yet`},classObject(){return{"l-speedrun-milestone-entry":!0,"l-speedrun-milestone-entry--completed":this.time}}}},gB=D(hB,function(){var e=this,t=e._self._c;return t(`div`,{class:e.classObject},[t(`b`,[e._v(e._s(e.displayName))]),t(`i`,[e._v(e._s(e.description))]),e._v(` `+e._s(e.timeDisplay)+` `)])},[],!1,null,null,null,null).exports,_B=D({name:`SpeedrunMilestonesTab`,components:{PrimaryToggleButton:R,SpeedrunMilestoneSingle:gB},data(){return{milestoneTimes:[],maxMilestone:1,startTimeStr:``,displayAll:!1,isSpectating:!1}},computed:{milestones:()=>GameDatabase.speedrunMilestones,spectateText(){return this.isSpectating?`Times here are unaffected by END so that you can see your final records`:null}},watch:{displayAll(e){player.speedrun.displayAllMilestones=e}},methods:{update(){this.milestoneTimes=[...player.speedrun.records],this.maxMilestone=this.milestoneTimes.map(e=>!!e).lastIndexOf(!0)+1,this.startTimeStr=player.speedrun.startDate===0?`Speedrun not started yet.`:`Speedrun started at ${Time.toDateTimeString(player.speedrun.startDate)}`,this.displayAll=player.speedrun.displayAllMilestones,this.isSpectating=GameEnd.endState>END_STATE_MARKERS.SPECTATE_GAME}}},function(){var e=this,t=e._self._c;return t(`div`,[t(`PrimaryToggleButton`,{staticClass:`o-primary-btn--subtab-option`,attrs:{label:`Describe all milestones:`},model:{value:e.displayAll,callback:function(t){e.displayAll=t},expression:`displayAll`}}),t(`br`),t(`b`,[e._v(e._s(e.startTimeStr))]),t(`br`),t(`b`,[e._v(e._s(e.spectateText))]),t(`br`),t(`div`,{staticClass:`l-speedrun-milestone-tab`},e._l(e.milestones,function(n){return t(`SpeedrunMilestoneSingle`,{key:n.id,attrs:{milestone:n,display:e.displayAll||n.id<=e.maxMilestone,time:e.milestoneTimes[n.id]}})}),1)],1)},[],!1,null,null,null,null).exports;function vB(e,t=4){return e.toString().slice(0,t+Math.ceil(e.log10().toNumber()))}const yB={proton:new Decimal(`2.82e-45`),estimate(e){if(!e)return[`There is no antimatter yet.`];if(e.gt(o.BIMAX))return[`You have alot of antimatter`];if(e.gt(o.E1_5E12))return[`It would take ${vB(e.log10().div(2437102080*3))}%`,`of the current age of the Universe to write out your antimatter count`];if(e.gt(new Decimal(`1e7200000000`)))return[`If you wrote ${formatInt(3)} numbers a second, it would take you`,`${vB(e.log10().div(2437102080*3))} average American lifespans to write down your antimatter amount.`];if(e.gt(o.E1E7))return[`It would take ${vB(e.log10().div(2437102080*3))}%`,` of the average American lifespan to write out your antimatter count`];if(e.gt(o.E10000))return[`If you wrote ${formatInt(3)} numbers a second, it would take you`,TimeSpan.fromSeconds(e.log10().div(3)).toString(),`to write down your antimatter amount.`];let t=new Decimal(`4.22419e-105`),n=e.times(t);if(n.gt(this.proton)){let e=this.macroScale(n),t=format(n.dividedBy(e.amount),2,1);return[`If every antimatter were a planck volume, you would have
        enough to ${e.verb} ${t} ${e.name}`]}let r=this.microScale(e);return[`If every antimatter were ${format(this.proton.div(r.amount).div(e),2,1)} ${r.name},
      you would have enough to make a proton.`]},microScale(e){let t=this.microObjects;for(let n=0;n<t.length;n++){let r=t[n];if(e.times(r.amount).lt(this.proton))return r}throw Error(`Cannot determine smallest antimatter scale`)},macroScale(e){let t=this.macroObjects,n=t.last();if(e.gte(n.amount))return n;let r=0,i=t.length;for(;r!==i;){let n=Math.floor((r+i)/2);t[n].amount.lte(e)?r=n+1:i=n}return t[i-1]},microObjects:[{amount:new Decimal(`1e-54`),name:`attometers cubed`},{amount:new Decimal(`1e-63`),name:`zeptometers cubed`},{amount:new Decimal(`1e-72`),name:`yoctometers cubed`},{amount:new Decimal(`4.22419e-105`),name:`planck volumes`}],macroObjects:[{amount:new Decimal(`2.82e-45`),name:`protons`,verb:`make`},{amount:new Decimal(`1e-42`),name:`nuclei`,verb:`make`},{amount:new Decimal(`7.23e-30`),name:`Hydrogen atoms`,verb:`make`},{amount:new Decimal(`5e-21`),name:`viruses`,verb:`make`},{amount:new Decimal(`9e-17`),name:`red blood cells`,verb:`make`},{amount:new Decimal(`6.2e-11`),name:`grains of sand`,verb:`make`},{amount:new Decimal(`5e-8`),name:`grains of rice`,verb:`make`},{amount:new Decimal(`3.555e-6`),name:`teaspoons`,verb:`fill`},{amount:new Decimal(`7.5e-4`),name:`wine bottles`,verb:`fill`},{amount:o.D1,name:`fridge-freezers`,verb:`fill`},{amount:new Decimal(`2.5e3`),name:`Olympic-sized swimming pools`,verb:`fill`},{amount:new Decimal(`2.6006e6`),name:`Great Pyramids of Giza`,verb:`make`},{amount:new Decimal(`3.3e8`),name:`Great Walls of China`,verb:`make`},{amount:new Decimal(`5e12`),name:`large asteroids`,verb:`make`},{amount:new Decimal(`4.5e17`),name:`dwarf planets`,verb:`make`},{amount:new Decimal(`1.08e21`),name:`Earths`,verb:`make`},{amount:new Decimal(`1.53e24`),name:`Jupiters`,verb:`make`},{amount:new Decimal(`1.41e27`),name:`Suns`,verb:`make`},{amount:new Decimal(`5e32`),name:`red giants`,verb:`make`},{amount:new Decimal(`8e36`),name:`hypergiant stars`,verb:`make`},{amount:new Decimal(`1.7e45`),name:`nebulas`,verb:`make`},{amount:new Decimal(`1.7e48`),name:`Oort clouds`,verb:`make`},{amount:new Decimal(`3.3e55`),name:`Local Bubbles`,verb:`make`},{amount:new Decimal(`3.3e61`),name:`galaxies`,verb:`make`},{amount:new Decimal(`5e68`),name:`Local Groups`,verb:`make`},{amount:new Decimal(`1e73`),name:`Sculptor Voids`,verb:`make`},{amount:new Decimal(`3.4e80`),name:`observable universes`,verb:`make`},{amount:new Decimal(`1e113`),name:`Dimensions`,verb:`make`},{amount:o.C2P1024,name:`Infinity Dimensions`,verb:`make`}]};var bB=D({name:`StatisticsTab`,components:{PrimaryButton:L},data(){return{isDoomed:!1,realTimeDoomed:TimeSpan.zero,totalAntimatter:new Decimal,realTimePlayed:TimeSpan.zero,timeSinceCreation:0,uniqueNews:0,totalNews:0,secretAchievementCount:0,infinity:{isUnlocked:!1,count:new Decimal,banked:new Decimal,projectedBanked:new Decimal,bankRate:new Decimal,hasBest:!1,best:TimeSpan.zero,this:TimeSpan.zero,thisReal:TimeSpan.zero,bestRate:new Decimal},eternity:{isUnlocked:!1,count:new Decimal,hasBest:!1,best:TimeSpan.zero,this:TimeSpan.zero,thisReal:TimeSpan.zero,bestRate:new Decimal},reality:{isUnlocked:!1,count:new Decimal,best:TimeSpan.zero,bestReal:TimeSpan.zero,this:TimeSpan.zero,thisReal:TimeSpan.zero,totalTimePlayed:TimeSpan.zero,bestRate:new Decimal,bestRarity:0},matterScale:[],lastMatterTime:0,paperclips:0,fullTimePlayed:0}},computed:{infinityCountString(){let e=this.infinity.count;return e.gt(0)?`${this.formatDecimalAmount(e)} ${pluralize(`Infinity`,e.floor())}`:`no Infinities`},eternityCountString(){let e=this.eternity.count;return e.gt(0)?`${this.formatDecimalAmount(e)} ${pluralize(`Eternity`,e.floor())}`:`no Eternities`},fullGameCompletions(){return player.records.fullGameCompletions},startDate(){return Time.toDateTimeString(player.records.gameCreatedTime)},saveAge(){return TimeSpan.fromMilliseconds(new Decimal(this.timeSinceCreation))}},methods:{update(){let e=player.records;this.totalAntimatter.copyFrom(e.totalAntimatter),this.realTimePlayed.setFrom(e.realTimePlayed),this.fullTimePlayed=TimeSpan.fromMilliseconds(new Decimal(e.previousRunRealTime.add(e.realTimePlayed))),this.uniqueNews=NewsHandler.uniqueTickersSeen,this.totalNews=player.news.totalSeen,this.secretAchievementCount=SecretAchievements.all.filter(e=>e.isUnlocked).length,this.timeSinceCreation=Date.now()-player.records.gameCreatedTime;let t=PlayerProgress.current,n=t.isInfinityUnlocked,r=this.infinity,i=e.bestInfinity;r.isUnlocked=n,n&&(r.count.copyFrom(Currency.infinities),r.banked.copyFrom(Currency.infinitiesBanked),r.projectedBanked=new Decimal(0).plusEffectsOf(Achievement(131).effects.bankedInfinitiesGain,TimeStudy(191)),r.bankRate=r.projectedBanked.div(Decimal.clampMin(33,e.thisEternity.time)).times(6e4),r.hasBest=!i.time.eq(o.BEMAX),r.best.setFrom(i.time),r.this.setFrom(e.thisInfinity.time),r.bestRate.copyFrom(i.bestIPminEternity));let a=t.isEternityUnlocked,s=this.eternity,c=e.bestEternity;s.isUnlocked=a,a&&(s.count.copyFrom(Currency.eternities),s.hasBest=!c.time.eq(o.BEMAX),s.best.setFrom(c.time),s.this.setFrom(e.thisEternity.time),s.bestRate.copyFrom(c.bestEPminReality));let l=t.isRealityUnlocked,u=this.reality,d=e.bestReality;u.isUnlocked=l,l&&(u.count.copyFrom(Currency.realities),u.best.setFrom(d.time),u.bestReal.setFrom(d.realTime),u.this.setFrom(e.thisReality.time),u.totalTimePlayed.setFrom(e.totalTimePlayed),r.thisReal.setFrom(e.thisInfinity.realTime),r.bankRate=r.projectedBanked.div(Decimal.clampMin(33,e.thisEternity.realTime)).times(6e4),s.thisReal.setFrom(e.thisEternity.realTime),u.thisReal.setFrom(e.thisReality.realTime),u.bestRate.copyFrom(d.RMmin),u.bestRarity=strengthToRarity(d.glyphStrength).clampMin(0)),this.updateMatterScale(),this.isDoomed=Pelle.isDoomed,this.realTimeDoomed.setFrom(player.records.realTimeDoomed),this.paperclips=player.news.specialTickerData.paperclips},formatDecimalAmount(e){return e.gt(1e9)?format(e,3):formatInt(Math.floor(e.toNumber()))},updateMatterScale(){Date.now()-this.lastMatterTime>1e3&&(this.matterScale=yB.estimate(Currency.antimatter.value),this.lastMatterTime=Date.now())},realityClassObject(){return{"c-stats-tab-title":!0,"c-stats-tab-reality":!this.isDoomed,"c-stats-tab-doomed":this.isDoomed}}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`c-stats-tab`},[t(`div`,[t(`PrimaryButton`,{attrs:{onclick:`Modal.catchup.show(0)`}},[e._v(` View Content Summary `)]),t(`div`,{staticClass:`c-stats-tab-title c-stats-tab-general`},[e._v(` General `)]),t(`div`,{staticClass:`c-stats-tab-general`},[t(`div`,[e._v(`You have made a total of `+e._s(e.format(e.totalAntimatter,2,1))+` antimatter.`)]),t(`div`,[e._v(`You have played for `+e._s(e.realTimePlayed)+`. (real time)`)]),e.reality.isUnlocked?t(`div`,[e._v(` Your existence has spanned `+e._s(e.reality.totalTimePlayed)+` of time. (game time) `)]):e._e(),t(`div`,[e._v(` Your save was created on `+e._s(e.startDate)+` (`+e._s(e.saveAge)+` ago) `)]),t(`br`),t(`div`,[e._v(` You have seen `+e._s(e.quantifyInt(`news message`,e.totalNews))+` in total. `)]),t(`div`,[e._v(` You have seen `+e._s(e.quantifyInt(`unique news message`,e.uniqueNews))+`. `)]),t(`div`,[e._v(` You have unlocked `+e._s(e.quantifyInt(`Secret Achievement`,e.secretAchievementCount))+`. `)]),e.paperclips?t(`div`,[e._v(` You have `+e._s(e.quantifyInt(`useless paperclip`,e.paperclips))+`. `)]):e._e(),e.fullGameCompletions?t(`div`,[t(`br`),t(`b`,[e._v(` You have completed the entire game `+e._s(e.quantifyInt(`time`,e.fullGameCompletions))+`. `),t(`br`),e._v(` You have played for `+e._s(e.fullTimePlayed)+` across all playthroughs. `)])]):e._e()]),t(`div`,[t(`br`),t(`div`,{staticClass:`c-matter-scale-container c-stats-tab-general`},[e._l(e.matterScale,function(n,r){return t(`div`,{key:r},[e._v(` `+e._s(n)+` `)])}),e.matterScale.length<2?t(`br`):e._e(),e.matterScale.length<3?t(`br`):e._e()],2)]),t(`br`)],1),e.infinity.isUnlocked?t(`div`,{staticClass:`c-stats-tab-subheader c-stats-tab-general`},[t(`div`,{staticClass:`c-stats-tab-title c-stats-tab-infinity`},[e._v(` Infinity `)]),t(`div`,[e._v(` You have `+e._s(e.infinityCountString)),e.eternity.isUnlocked?t(`span`,[e._v(` this Eternity`)]):e._e(),e._v(`. `)]),e.infinity.banked.gt(0)?t(`div`,[e._v(` You have `+e._s(e.formatDecimalAmount(e.infinity.banked.floor()))+` `+e._s(e.pluralize(`Banked Infinity`,e.infinity.banked.floor()))+`. `)]):e._e(),e.infinity.hasBest?t(`div`,[e._v(` Your fastest Infinity was `+e._s(e.infinity.best.toStringShort())+`. `)]):t(`div`,[e._v(` You have no fastest Infinity`),e.eternity.isUnlocked?t(`span`,[e._v(` this Eternity`)]):e._e(),e._v(`. `)]),t(`div`,[e._v(` You have spent `+e._s(e.infinity.this.toStringShort())+` in this Infinity. `),e.reality.isUnlocked?t(`span`,[e._v(` (`+e._s(e.infinity.thisReal.toStringShort())+` real time) `)]):e._e()]),t(`div`,[e._v(` Your best Infinity Points per minute `),e.eternity.count.gt(0)?t(`span`,[e._v(`this Eternity `)]):e._e(),e._v(` is `+e._s(e.format(e.infinity.bestRate,2,2))+`. `)]),t(`br`)]):e._e(),e.eternity.isUnlocked?t(`div`,{staticClass:`c-stats-tab-subheader c-stats-tab-general`},[t(`div`,{staticClass:`c-stats-tab-title c-stats-tab-eternity`},[e._v(` Eternity `)]),t(`div`,[e._v(` You have `+e._s(e.eternityCountString)),e.reality.isUnlocked?t(`span`,[e._v(` this Reality`)]):e._e(),e._v(`. `)]),e.infinity.projectedBanked.gt(0)?t(`div`,[e._v(` You will gain `+e._s(e.formatDecimalAmount(e.infinity.projectedBanked.floor()))+` `+e._s(e.pluralize(`Banked Infinity`,e.infinity.projectedBanked.floor()))+` on Eternity (`+e._s(e.formatDecimalAmount(e.infinity.bankRate))+` per minute). `)]):e.infinity.banked.gt(0)?t(`div`,[e._v(` You will gain no Banked Infinities on Eternity. `)]):e._e(),e.eternity.hasBest?t(`div`,[e._v(` Your fastest Eternity was `+e._s(e.eternity.best.toStringShort())+`. `)]):t(`div`,[e._v(` You have no fastest Eternity`),e.reality.isUnlocked?t(`span`,[e._v(` this Reality`)]):e._e(),e._v(`. `)]),t(`div`,[e._v(` You have spent `+e._s(e.eternity.this.toStringShort())+` in this Eternity. `),e.reality.isUnlocked?t(`span`,[e._v(` (`+e._s(e.eternity.thisReal.toStringShort())+` real time) `)]):e._e()]),t(`div`,[e._v(` Your best Eternity Points per minute `),e.reality.isUnlocked?t(`span`,[e._v(`this Reality `)]):e._e(),e._v(` is `+e._s(e.format(e.eternity.bestRate,2,2))+`. `)]),t(`br`)]):e._e(),e.reality.isUnlocked?t(`div`,{staticClass:`c-stats-tab-subheader c-stats-tab-general`},[t(`div`,{class:e.realityClassObject()},[e._v(` `+e._s(e.isDoomed?`Doomed Reality`:`Reality`)+` `)]),t(`div`,[e._v(`You have `+e._s(e.quantifyInt(`Reality`,e.reality.count))+`.`)]),t(`div`,[e._v(`Your fastest game-time Reality was `+e._s(e.reality.best.toStringShort())+`.`)]),t(`div`,[e._v(`Your fastest real-time Reality was `+e._s(e.reality.bestReal.toStringShort())+`.`)]),t(`div`,{class:{"c-stats-tab-doomed":e.isDoomed}},[e._v(` You have spent `+e._s(e.reality.this.toStringShort())+` in this `+e._s(e.isDoomed?`Armageddon`:`Reality`)+`. (`+e._s(e.reality.thisReal.toStringShort())+` real time) `)]),e.isDoomed?t(`div`,{staticClass:`c-stats-tab-doomed`},[e._v(` You have been Doomed for `+e._s(e.realTimeDoomed.toStringShort())+`, real time. `)]):e._e(),t(`div`,[e._v(` Your best Reality Machines per minute is `+e._s(e.format(e.reality.bestRate,2,2))+`. `)]),t(`div`,[e._v(`Your best Glyph rarity is `+e._s(e.formatRarity(e.reality.bestRarity))+`.`)]),t(`br`)]):e._e()])},[],!1,null,`714434ca`,null,null).exports,xB={name:`PerkShopUpgradeButton`,components:{DescriptionDisplay:u,EffectDisplay:c,CostDisplay:pe},props:{upgrade:{type:Object,required:!0}},data(){return{isAvailableForPurchase:!1,isCapped:!1}},computed:{isDoomed:()=>Pelle.isDoomed,classObject(){return{"o-teresa-shop-button":!0,"o-teresa-shop-button--available":this.isAvailableForPurchase&&!this.isCapped,"o-teresa-shop-button--capped":this.isCapped,"o-teresa-shop-button--pelle-disabled":this.isDoomed&&(this.upgrade===PerkShopUpgrade.musicGlyph||this.upgrade===PerkShopUpgrade.fillMusicGlyph)}}},methods:{update(){this.isAvailableForPurchase=this.upgrade.isAvailableForPurchase,this.isCapped=this.upgrade.isCapped}}},SB=D(xB,function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-spoon-btn-group`},[t(`button`,{class:e.classObject,on:{click:function(t){return e.upgrade.purchase()}}},[t(`DescriptionDisplay`,{attrs:{config:e.upgrade.config,length:70}}),t(`br`),t(`EffectDisplay`,{attrs:{config:e.upgrade.config}}),t(`br`),e.isCapped?e._e():t(`CostDisplay`,{attrs:{config:e.upgrade.config,name:`Perk Point`}})],1)])},[],!1,null,`1bf9472d`,null,null).exports,CB=D({name:`TeresaTab`,components:{GlyphSetPreview:pE,PerkShopUpgradeButton:SB,CelestialQuoteHistory:fL,CustomizeableTooltip:Tz},data(){return{pour:!1,time:Date.now(),pouredAmount:0,isPouredAmountCapped:!1,rm:new Decimal(0),percentage:``,possibleFillPercentage:``,rmMult:0,bestAM:new Decimal(0),bestAMSet:[],lastMachines:new Decimal(0),lastiM:new Decimal,runReward:new Decimal,perkPoints:new Decimal,hasReality:!1,hasEPGen:!1,hasPerkShop:!1,raisedPerkShop:!1,isRunning:!1,canUnlockNextPour:!1}},computed:{unlockInfos:()=>TeresaUnlocks.all,pouredAmountCap:()=>Teresa.pouredAmountCap,showRunReward(){return this.bestAM.gt(1)},upgrades(){let e=[PerkShopUpgrade.glyphLevel,PerkShopUpgrade.rmMult,PerkShopUpgrade.bulkDilation,PerkShopUpgrade.autoSpeed,PerkShopUpgrade.musicGlyph];return this.raisedPerkShop&&e.push(PerkShopUpgrade.fillMusicGlyph),e},runButtonClassObject(){return{"c-teresa-run-button__icon":!0,"c-teresa-run-button__icon--running":this.isRunning,"c-celestial-run-button--clickable":!this.isDoomed,"o-pelle-disabled-pointer":this.isDoomed}},pourButtonClassObject(){return{"o-teresa-shop-button":!0,"c-teresa-pour":!0,"o-teresa-shop-button--available":!this.isPouredAmountCapped,"o-teresa-shop-button--capped":this.isPouredAmountCapped,"c-teresa-pour--unlock-available":this.canUnlockNextPour,"c-disabled-pour":this.isPouredAmountCapped}},pourText(){return this.isPouredAmountCapped?`Filled`:`Pour RM`},runDescription(){return GameDatabase.celestials.descriptions[0].effects()},lastMachinesString(){return this.lastiM.eq(0)?`${quantify(`Reality Machine`,this.lastMachines,2)}`:`${quantify(`Imaginary Machine`,this.lastiM,2)}`},unlockInfoTooltipArrowStyle(){return{borderRight:`0.5rem solid var(--color-teresa--base)`}},isDoomed:()=>Pelle.isDoomed},methods:{update(){let e=Date.now();if(this.pour){let t=(e-this.time)/1e3;Teresa.pourRM(t)}else Teresa.timePoured=0;this.time=e,this.pouredAmount=player.celestials.teresa.pouredAmount,this.isPouredAmountCapped=this.pouredAmount===this.pouredAmountCap,this.percentage=`${(Teresa.fill*100).toFixed(2)}%`,this.possibleFillPercentage=`${(Teresa.possibleFill*100).toFixed(2)}%`,this.rmMult=Teresa.rmMultiplier,this.hasReality=TeresaUnlocks.run.isUnlocked,this.hasEPGen=TeresaUnlocks.epGen.isUnlocked,this.hasPerkShop=TeresaUnlocks.shop.isUnlocked,this.raisedPerkShop=Ra.unlocks.perkShopIncrease.canBeApplied,this.bestAM.copyFrom(player.celestials.teresa.bestRunAM),this.bestAMSet=structuredClone(Glyphs.copyForRecords(player.celestials.teresa.bestAMSet)),this.lastMachines.copyFrom(player.celestials.teresa.lastRepeatedMachines),this.lastiM.copyFrom(player.celestials.teresa.lastRepeatediM),this.runReward.copyFrom(Teresa.runRewardMultiplier),this.perkPoints.copyFrom(Currency.perkPoints.value),this.rm.copyFrom(Currency.realityMachines),this.isRunning=Teresa.isRunning,this.canUnlockNextPour=TeresaUnlocks.all.some(e=>this.rm.plus(this.pouredAmount).gte(e.price)&&!e.isUnlocked).length>0},startRun(){this.isDoomed||Modal.celestials.show({name:`Teresa's`,number:0})},unlockDescriptionHeight(e){let t=TeresaUnlocks[Teresa.lastUnlock].price;return`calc(${(100*(Math.log1p(e.price)/Math.log1p(t))).toFixed(2)}% - 0.1rem)`},hasUnlock(e){return e.isUnlocked},unlockInfoTooltipClass(e){return{"c-teresa-unlock-description":!0,"c-teresa-unlock-description--unlocked":this.hasUnlock(e)}}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-teresa-celestial-tab`},[t(`CelestialQuoteHistory`,{attrs:{celestial:`teresa`}}),t(`div`,[e._v(` You have `+e._s(e.quantify(`Reality Machine`,e.rm,2,2))+`. `)]),t(`div`,{staticClass:`l-mechanics-container`},[e.hasReality?t(`div`,{staticClass:`l-teresa-mechanic-container`},[t(`div`,{staticClass:`c-teresa-unlock c-teresa-run-button`},[t(`span`,{class:{"o-pelle-disabled":e.isDoomed}},[e._v(` Start Teresa's Reality. `)]),t(`div`,{class:e.runButtonClassObject,on:{click:function(t){return e.startRun()}}},[e._v(` Ϟ `)]),e._v(` `+e._s(e.runDescription)+` `),t(`br`),t(`br`),t(`div`,[e._v(` This Reality can be repeated for a stronger reward based on the antimatter gained within it. `),t(`br`),t(`br`),e.showRunReward?t(`span`,[e._v(` Your record antimatter in Teresa's Reality is `+e._s(e.format(e.bestAM,2))+`, achieved with `+e._s(e.lastMachinesString)+`. `),t(`br`),t(`br`),e._v(` Glyph Set used: `),t(`GlyphSetPreview`,{attrs:{text:`Teresa's Best Glyph Set`,"text-hidden":!0,"force-name-color":!1,glyphs:e.bestAMSet}})],1):t(`span`,[e._v(` You have not completed Teresa's Reality yet. `)])])]),e.showRunReward?t(`div`,{staticClass:`c-teresa-unlock`},[e._v(` Teresa Reality reward: Glyph Sacrifice power `+e._s(e.formatX(e.runReward,2,2))+` `)]):e._e(),e.hasEPGen?t(`div`,{staticClass:`c-teresa-unlock`},[t(`span`,{class:{"o-pelle-disabled":e.isDoomed}},[e._v(` Every second, you gain `+e._s(e.formatPercents(.01))+` of your peaked Eternity Points per minute this Reality. `)])]):e._e()]):e._e(),t(`div`,{staticClass:`l-rm-container l-teresa-mechanic-container`},[t(`button`,{class:e.pourButtonClassObject,on:{mousedown:function(t){e.pour=!0},touchstart:function(t){e.pour=!0},mouseup:function(t){e.pour=!1},touchend:function(t){e.pour=!1},mouseleave:function(t){e.pour=!1}}},[e._v(` `+e._s(e.pourText)+` `)]),t(`div`,{staticClass:`c-rm-store`},[t(`div`,{staticClass:`c-rm-store-inner c-rm-store-inner--light`,style:{height:e.possibleFillPercentage}}),t(`div`,{staticClass:`c-rm-store-inner`,style:{height:e.percentage}},[t(`div`,{staticClass:`c-rm-store-label`},[e._v(` `+e._s(e.formatX(e.rmMult,2,2))+` RM gain `),t(`br`),e._v(` `+e._s(e.format(e.pouredAmount,2,2))+`/`+e._s(e.format(e.pouredAmountCap,2,2))+` `)])]),e._l(e.unlockInfos,function(n){return t(`CustomizeableTooltip`,{key:n.id,attrs:{"content-class":`c-teresa-unlock-description--hover-area`,bottom:e.unlockDescriptionHeight(n),right:`0`,mode:`right`,show:!0,"tooltip-arrow-style":e.unlockInfoTooltipArrowStyle,"tooltip-class":e.unlockInfoTooltipClass(n)},scopedSlots:e._u([{key:`mainContent`,fn:function(){return[t(`div`,{staticClass:`c-teresa-milestone-line`,class:{"c-teresa-milestone-line--unlocked":e.hasUnlock(n)}})]},proxy:!0},{key:`tooltipContent`,fn:function(){return[t(`b`,{class:{"o-pelle-disabled":n.pelleDisabled}},[e._v(` `+e._s(e.format(n.price,2,2))+`: `+e._s(n.description)+` `)])]},proxy:!0}],null,!0)})})],2)]),e.hasPerkShop?t(`div`,{staticClass:`c-teresa-shop`},[t(`span`,{staticClass:`o-teresa-pp`},[e._v(` You have `+e._s(e.quantify(`Perk Point`,e.perkPoints,2,0))+`. `)]),e._l(e.upgrades,function(e){return t(`PerkShopUpgradeButton`,{key:e.id,attrs:{upgrade:e}})}),e._v(` You can now modify the appearance of your Glyphs to look like Music Glyphs. `)],2):t(`div`,{staticClass:`l-rm-container-labels l-teresa-mechanic-container`})])],1)},[],!1,null,`14b9be83`,null,null).exports,wB=D({name:`DilationButton`,data(){return{isUnlocked:!1,isRunning:!1,hasGain:!1,requiredForGain:new Decimal,canEternity:!1,eternityGoal:new Decimal,tachyonGain:new Decimal,remnantRequirement:0,showRequirement:!1,creditsClosed:!1}},computed:{disableText(){return Pelle.isDoomed?`Dilation is permanent.`:`Disable Dilation.`}},methods:{update(){this.isUnlocked=PlayerProgress.dilationUnlocked(),this.isRunning=player.dilation.active,this.remnantRequirement=Pelle.remnantRequirementForDilation,this.showRequirement=Pelle.isDoomed&&!Pelle.canDilateInPelle,this.isRunning&&(this.canEternity=Player.canEternity,this.hasGain=getTachyonGain(!1).gt(0),this.canEternity&&this.hasGain?this.tachyonGain.copyFrom(getTachyonGain(!0)):this.hasGain?this.eternityGoal.copyFrom(Player.eternityGoal):this.requiredForGain.copyFrom(getTachyonReq()),this.creditsClosed=GameEnd.creditsEverClosed)},dilate(){this.creditsClosed||startDilatedEternityRequest()}}},function(){var e=this,t=e._self._c;return t(`button`,{staticClass:`o-dilation-btn`,class:e.isUnlocked?`o-dilation-btn--unlocked`:`o-dilation-btn--locked`,on:{click:function(t){return e.dilate()}}},[e.isUnlocked?e.isRunning?e.canEternity&&e.hasGain?t(`span`,[e._v(` `+e._s(e.disableText)+` `),t(`br`),e._v(` Gain `+e._s(e.quantify(`Tachyon Particle`,e.tachyonGain,2,1))+`. `)]):e.hasGain?t(`span`,[e._v(` `+e._s(e.disableText)+` `),t(`br`),e._v(` Reach `+e._s(e.quantify(`Infinity Point`,e.eternityGoal,1,0))+` to Eternity and gain Tachyon Particles. `)]):t(`span`,[e._v(` `+e._s(e.disableText)+` `),t(`br`),e._v(` Reach `+e._s(e.format(e.requiredForGain,2,1))+` antimatter to gain more Tachyon Particles. `)]):t(`span`,[e._v(` Dilate time. `),e.showRequirement?t(`div`,[e._v(` Requires `+e._s(e.format(e.remnantRequirement,2))+` Remnants `)]):e._e()]):t(`span`,[e._v(`Purchase the Dilation Study to unlock.`)])])},[],!1,null,`eb87a502`,null,null).exports,TB={name:`DilationUpgradeButton`,components:{PrimaryToggleButton:R,DescriptionDisplay:u,EffectDisplay:c,CostDisplay:pe,CustomizeableTooltip:Tz},props:{upgrade:{type:Object,required:!0},isRebuyable:{type:Boolean,required:!1,default:!1},showTooltip:{type:Boolean,required:!0}},data(){return{isBought:!1,isCapped:!1,isAffordable:!1,isAutoUnlocked:!1,isAutobuyerOn:!1,boughtAmount:new Decimal,currentDT:new Decimal(0),currentDTGain:new Decimal(0),timeEstimate:``,isHovering:!1,hideEstimate:!1}},computed:{classObject(){return this.isUseless?{"o-dilation-upgrade o-pelle-disabled-pointer":!0,"o-pelle-disabled o-dilation-upgrade--useless":this.upgrade.id===7||this.upgrade.id===3}:{"o-dilation-upgrade":!0,"o-dilation-upgrade--rebuyable":this.isRebuyable,"o-dilation-upgrade--available":!this.isBought&&!this.isCapped&&this.isAffordable,"o-dilation-upgrade--unavailable":!this.isBought&&!this.isCapped&&!this.isAffordable,"o-dilation-upgrade--bought":this.isBought,"o-dilation-upgrade--capped":this.isCapped}},isUseless(){let e=this.upgrade.id===3||this.upgrade.id===7;return Pelle.isDoomed&&e}},watch:{isAutobuyerOn(e){Autobuyer.dilationUpgrade(this.upgrade.id).isActive=e}},methods:{update(){let e=this.upgrade;if(this.currentDT.copyFrom(Currency.dilatedTime.value),this.currentDTGain.copyFrom(getDilationGainPerSecond()),this.hideEstimate=this.isAffordable||this.isCapped||this.upgrade.isBought||this.isUseless,this.timeEstimate=this.hideEstimate?null:getDilationTimeEstimate(this.upgrade.cost),this.isRebuyable){this.isAffordable=e.isAffordable,this.isCapped=e.isCapped;let t=Autobuyer.dilationUpgrade(e.id);if(this.boughtAmount.copyFrom(e.boughtAmount),!t)return;this.isAutoUnlocked=t.isUnlocked,this.isAutobuyerOn=t.isActive;return}this.isBought=e.isBought,this.isBought||(this.isAffordable=e.isAffordable)}}},EB=D(TB,function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-spoon-btn-group`},[t(`button`,{class:e.classObject,attrs:{"ach-tooltip":e.timeEstimate},on:{click:function(t){return e.upgrade.purchase()},mouseover:function(t){e.isHovering=!0},mouseleave:function(t){e.isHovering=!1}}},[e.timeEstimate?t(`CustomizeableTooltip`,{attrs:{show:e.showTooltip&&!e.isHovering&&!e.hideEstimate,left:`50%`,top:`0`},scopedSlots:e._u([{key:`tooltipContent`,fn:function(){return[e._v(` `+e._s(e.timeEstimate)+` `)]},proxy:!0}],null,!1,1945308655)}):e._e(),t(`span`,[t(`DescriptionDisplay`,{attrs:{config:e.upgrade.config,length:70,name:`o-dilation-upgrade__description`}}),t(`EffectDisplay`,{key:e.boughtAmount.toNumber(),attrs:{br:``,config:e.upgrade.config}})],1),!e.isBought&&!e.isCapped?t(`CostDisplay`,{attrs:{br:``,config:e.upgrade.config,name:`Dilated Time`}}):e._e()],1),e.isRebuyable&&e.isAutoUnlocked?t(`PrimaryToggleButton`,{staticClass:`l--spoon-btn-group__little-spoon o-primary-btn--dilation-upgrade-toggle`,attrs:{label:`Auto:`},model:{value:e.isAutobuyerOn,callback:function(t){e.isAutobuyerOn=t},expression:`isAutobuyerOn`}}):e._e()],1)},[],!1,null,`b4aef070`,null,null).exports,DB=r({name:`TimeDilationTab`,components:{DilationButton:wB,DilationUpgradeButton:EB},data(){return{tachyons:new Decimal,dilatedTime:new Decimal,dilatedTimeIncome:new Decimal,galaxyThreshold:new Decimal,baseGalaxies:new Decimal,totalGalaxies:new Decimal,tachyonGalaxyGain:new Decimal,hasPelleDilationUpgrades:!1,galaxyTimeEstimate:``,maxDT:new Decimal,toMaxTooltip:``,isHovering:!1}},computed:{rebuyables(){return[DilationUpgrade.dtGain,DilationUpgrade.galaxyThreshold,DilationUpgrade.tachyonGain,DilationUpgrade.tachyonExponent]},upgrades(){return[[DilationUpgrade.doubleGalaxies,DilationUpgrade.tdMultReplicanti,DilationUpgrade.ndMultDT,DilationUpgrade.dilatedTimeToReplicanti],[DilationUpgrade.ipMultDT,DilationUpgrade.timeStudySplit,DilationUpgrade.dilationPenalty,DilationUpgrade.eternitiesDTSynergy],[DilationUpgrade.mdMultTickspeed,DilationUpgrade.mdBuffDT,DilationUpgrade.mdEffectBuff,DilationUpgrade.dtMultMA]]},dilatedTimeGainText(){return formatGain(this.dilatedTime,this.dilatedTimeIncome,2,1)},pelleRebuyables(){return[DilationUpgrade.dtGainPelle,DilationUpgrade.galaxyMultiplier,DilationUpgrade.tickspeedPower]},pelleUpgrades(){return[DilationUpgrade.galaxyThresholdPelle,DilationUpgrade.flatDilationMult]},ttGenerator(){return DilationUpgrade.ttGenerator},baseGalaxyText(){return`${format(this.baseGalaxies,3)} Base`},hasMaxText:()=>PlayerProgress.realityUnlocked()&&!Pelle.isDoomed,allRebuyables(){let e=[];return e.push(this.rebuyables),this.hasPelleDilationUpgrades&&e.push(this.pelleRebuyables),e},allSingleUpgrades(){let e=[];return e.push(...this.upgrades),this.hasPelleDilationUpgrades&&e.push(this.pelleUpgrades),e.push([this.ttGenerator]),e}},methods:{maxPurchaseDilationUpgrades(){maxPurchaseDilationUpgrades()},update(){this.tachyons.copyFrom(Currency.tachyonParticles),this.dilatedTime.copyFrom(Currency.dilatedTime);let e=getDilationGainPerSecond().times(getGameSpeedupForDisplay());if(this.galaxyTimeEstimate=getDilationTimeEstimate(this.galaxyThreshold),PelleRifts.paradox.isActive){let t=player.options.updateRate/1e3,n=1-(1-Pelle.riftDrainPercent)**t,r=this.dilatedTime.add(e.times(t)).times(n/t);this.dilatedTimeIncome=e.minus(r)}else this.dilatedTimeIncome=e;this.galaxyThreshold.copyFrom(player.dilation.nextThreshold),this.baseGalaxies.copyFrom(player.dilation.baseTachyonGalaxies),this.totalGalaxies.copyFrom(player.dilation.totalTachyonGalaxies),this.hasPelleDilationUpgrades=PelleRifts.paradox.milestones[0].canBeApplied,this.tachyonGalaxyGain=Effects.product(DilationUpgrade.galaxyMultiplier,QuantumChallenge(2).reward,DilationUpgrade.doubleGalaxies),this.maxDT.copyFrom(player.records.thisReality.maxDT);let t=getDilationTimeEstimate(this.maxDT);this.dilatedTimeIncome.lte(0)?this.toMaxTooltip=`No DT gain`:this.toMaxTooltip=t.startsWith(`<`)?`Currently Increasing`:t}}}),OB=D(DB,function(){var e=this,t=e._self._c;return e._self._setupProxy,t(`div`,{staticClass:`l-dilation-tab`},[t(`span`,[e._v(` You have `),t(`span`,{staticClass:`c-dilation-tab__tachyons`},[e._v(e._s(e.format(e.tachyons,2,1)))]),e._v(` `+e._s(e.pluralize(`Tachyon Particle`,e.tachyons))+`. `)]),t(`div`,{on:{mouseover:function(t){e.isHovering=!0},mouseleave:function(t){e.isHovering=!1}}},[t(`DilationButton`)],1),t(`span`,[e._v(` You have `),t(`span`,{staticClass:`c-dilation-tab__dilated-time`},[e._v(e._s(e.format(e.dilatedTime,2,1)))]),e._v(` Dilated Time. `),t(`span`,{staticClass:`c-dilation-tab__dilated-time-income`},[e._v(e._s(e.dilatedTimeGainText))])]),t(`span`,[e._v(` Next `),e.tachyonGalaxyGain.gt(1)?t(`span`,[e._v(e._s(e.format(e.tachyonGalaxyGain,3,1)))]):e._e(),e._v(` `+e._s(e.pluralize(`Tachyon Galaxy`,e.tachyonGalaxyGain))+` at `),t(`span`,{staticClass:`c-dilation-tab__galaxy-threshold`,attrs:{"ach-tooltip":e.galaxyTimeEstimate}},[e._v(e._s(e.format(e.galaxyThreshold,2,1)))]),e._v(` Dilated Time, gained total of `),t(`span`,{staticClass:`c-dilation-tab__galaxies`,attrs:{"ach-tooltip":e.baseGalaxyText}},[e._v(e._s(e.formatInt(e.totalGalaxies)))]),e._v(` `+e._s(e.pluralize(`Tachyon Galaxy`,e.totalGalaxies))+` `)]),e.hasMaxText?t(`span`,[e._v(` Your maximum Dilated Time reached this Reality is `),t(`span`,{directives:[{name:`tooltip`,rawName:`v-tooltip`,value:e.toMaxTooltip,expression:`toMaxTooltip`}],staticClass:`max-accent`},[e._v(e._s(e.format(e.maxDT,2,1)))]),e._v(`. `)]):e._e(),t(`button`,{staticClass:`o-primary-btn l-button-container`,on:{click:e.maxPurchaseDilationUpgrades}},[e._v(` Max Dilation Upgrades `)]),t(`div`,{staticClass:`l-dilation-upgrades-grid`},[e._l(e.allRebuyables,function(n,r){return t(`div`,{key:`rebuyable`+r,staticClass:`l-dilation-upgrades-grid__row`},e._l(n,function(n){return t(`DilationUpgradeButton`,{key:n.id,staticClass:`l-dilation-upgrades-grid__cell`,attrs:{upgrade:n,"is-rebuyable":!0,"show-tooltip":e.isHovering}})}),1)}),e._l(e.allSingleUpgrades,function(n,r){return t(`div`,{key:`single`+r,staticClass:`l-dilation-upgrades-grid__row`},e._l(n,function(n){return t(`DilationUpgradeButton`,{key:n.id,staticClass:`l-dilation-upgrades-grid__cell`,attrs:{upgrade:n,"is-rebuyable":!1,"show-tooltip":e.isHovering}})}),1)})],2)])},[],!1,null,`51ce9f22`,null,null).exports,kB={name:`ClassicTimeDimensionRow`,components:{GenericDimensionRowText:he,PrimaryButton:L,PrimaryToggleButton:R},props:{tier:{type:Number,required:!0},areAutobuyersUnlocked:{type:Boolean,required:!0}},data(){return{isUnlocked:!1,isCapped:!1,multiplier:new Decimal(0),amount:new Decimal(0),bought:new Decimal(0),rateOfChange:new Decimal(0),cost:new Decimal(0),isAvailableForPurchase:!1,isAutobuyerOn:!1,requirementReached:!1,realityUnlocked:!1,showTTCost:!1,ttCost:0,ttGen:new Decimal,currTT:new Decimal}},computed:{shiftDown(){return ui.view.shiftDown},name(){return`${TimeDimension(this.tier).shortDisplayName} Time Dimension`},buttonContents(){return this.showTTCost?this.formattedTTCost:this.formattedEPCost},tooltipContents(){return this.showTTCost?`${this.formattedEPCost}<br>${this.timeEstimate}`:this.isCapped?`Nameless prevents the purchase of more than ${format(1)} Time Dimension`:`Purchased ${quantifyInt(`time`,this.bought)}`},showRow(){return this.realityUnlocked||this.isUnlocked||this.requirementReached},formattedTTCost(){return`Unlock: ${format(this.ttCost)} TT`},formattedEPCost(){return this.isCapped?`Capped`:`${this.showCostTitle?`Cost: `:``}${format(this.cost,2)} EP`},hasLongText(){return this.buttonContents.length>20},showCostTitle(){return this.cost.max(1).log10().lte(1e6)},timeEstimate(){if(!this.showTTCost||this.ttGen.eq(0))return``;let e=Decimal.sub(this.ttCost,this.currTT).dividedBy(this.ttGen);return e.gt(0)?`Enough TT in ${TimeSpan.fromSeconds(e).toStringShort()}`:``}},watch:{isAutobuyerOn(e){Autobuyer.timeDimension(this.tier).isActive=e}},methods:{update(){let e=this.tier,t=TimeDimension(e);this.isCapped=Enslaved.isRunning&&t.bought.gt(0),this.isUnlocked=t.isUnlocked,this.multiplier.copyFrom(t.multiplier),this.amount.copyFrom(t.amount),this.bought.copyFrom(t.bought),e<8&&this.rateOfChange.copyFrom(t.rateOfChange),this.cost.copyFrom(t.cost),this.isAvailableForPurchase=t.isAvailableForPurchase,this.isUnlocked||(this.isAvailableForPurchase=t.requirementReached),this.requirementReached=t.requirementReached,this.isAutobuyerOn=Autobuyer.timeDimension(this.tier).isActive,this.realityUnlocked=PlayerProgress.realityUnlocked(),this.showTTCost=!this.isUnlocked&&!this.shiftDown,this.tier>4&&(this.ttCost=TimeStudy.timeDimension(this.tier).cost),this.currTT.copyFrom(Currency.timeTheorems.value),this.ttGen.copyFrom(getTTPerSecond().times(getGameSpeedupFactor()))},buyTimeDimension(){if(!this.isUnlocked){TimeDimension(this.tier).tryUnlock();return}buySingleTimeDimension(this.tier)},buyMaxTimeDimension(){buyMaxTimeDimension(this.tier)}}},AB=D(kB,function(){var e=this,t=e._self._c;return t(`div`,{directives:[{name:`show`,rawName:`v-show`,value:e.showRow,expression:`showRow`}],staticClass:`c-dimension-row l-dimension-single-row`,class:{"c-dim-row--not-reached":!e.isUnlocked&&!e.requirementReached}},[t(`GenericDimensionRowText`,{attrs:{tier:e.tier,name:e.name,"multiplier-text":e.formatX(e.multiplier,2,1),amount:e.amount,rate:e.rateOfChange}}),t(`div`,{staticClass:`l-dim-row-multi-button-container`},[t(`PrimaryButton`,{staticClass:`o-primary-btn--buy-td o-primary-btn--buy-dim c-dim-tooltip-container`,class:{"l-dim-row-small-text":e.hasLongText},attrs:{enabled:e.isAvailableForPurchase&&!e.isCapped},on:{click:e.buyTimeDimension}},[e._v(` `+e._s(e.buttonContents)+` `),t(`div`,{staticClass:`c-dim-purchase-count-tooltip`},[t(`span`,{domProps:{innerHTML:e._s(e.tooltipContents)}})])]),e.areAutobuyersUnlocked?t(`PrimaryToggleButton`,{staticClass:`o-primary-btn--buy-td-auto`,attrs:{label:`Auto:`},model:{value:e.isAutobuyerOn,callback:function(t){e.isAutobuyerOn=t},expression:`isAutobuyerOn`}}):t(`PrimaryButton`,{staticClass:`o-primary-btn--buy-td-auto`,attrs:{enabled:e.isAvailableForPurchase&&!e.isCapped},on:{click:e.buyMaxTimeDimension}},[e._v(` Buy Max `)])],1)],1)},[],!1,null,null,null,null).exports,jB=D({name:`ClassicTimeDimensionsTab`,components:{PrimaryButton:L,TimeDimensionRow:AB},data(){return{totalUpgrades:new Decimal(0),multPerTickspeed:new Decimal,tickspeedSoftcap:new Decimal(0),timeShards:new Decimal(0),upgradeThreshold:new Decimal(0),shardsPerSecond:new Decimal(0),incomeType:``,areAutobuyersUnlocked:!1,showLockedDimCostNote:!0}},computed:{costIncreases:()=>TimeDimension(1).costIncreaseThresholds},methods:{update(){this.showLockedDimCostNote=!TimeDimension(8).isUnlocked&&player.realities.gte(1),this.totalUpgrades.copyFrom(player.totalTickGained),this.multPerTickspeed.copyFrom(FreeTickspeed.multToNext),this.tickspeedSoftcap.copyFrom(FreeTickspeed.softcap),this.timeShards.copyFrom(Currency.timeShards),this.upgradeThreshold.copyFrom(FreeTickspeed.fromShards(Currency.timeShards.value).nextShards),this.shardsPerSecond.copyFrom(TimeDimension(1).productionPerRealSecond),this.incomeType=EternityChallenge(7).isRunning?`Eighth Infinity Dimensions`:`Time Shards`,this.areAutobuyersUnlocked=Autobuyer.timeDimension(1).isUnlocked},maxAll(){tryUnlockTimeDimensions(),maxAllTimeDimensions()},toggleAllAutobuyers(){toggleAllTimeDims()}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-time-dim-tab l-centered-vertical-tab`},[t(`div`,{staticClass:`c-subtab-option-container`},[t(`PrimaryButton`,{staticClass:`o-primary-btn--subtab-option`,on:{click:e.maxAll}},[e._v(` Max all `)]),e.areAutobuyersUnlocked?t(`PrimaryButton`,{staticClass:`o-primary-btn--subtab-option`,on:{click:e.toggleAllAutobuyers}},[e._v(` Toggle all autobuyers `)]):e._e()],1),t(`div`,[t(`p`,[e._v(` You have gained `),t(`span`,{staticClass:`c-time-dim-description__accent`},[e._v(e._s(e.formatInt(e.totalUpgrades)))]),e._v(` Tickspeed upgrades from `),t(`span`,{staticClass:`c-time-dim-description__accent`},[e._v(e._s(e.format(e.timeShards,2,1)))]),e._v(` Time Shards. `)]),t(`p`,[e._v(` Next Tickspeed upgrade at `),t(`span`,{staticClass:`c-time-dim-description__accent`},[e._v(e._s(e.format(e.upgradeThreshold,2,1)))]),e._v(`, increasing by `),t(`span`,{staticClass:`c-time-dim-description__accent`},[e._v(e._s(e.formatX(e.multPerTickspeed,2,2)))]),e._v(` per Tickspeed upgrade gained. `)])]),t(`div`,[e._v(` The amount each additional upgrade requires will start increasing above `+e._s(e.formatInt(e.tickspeedSoftcap))+` Tickspeed upgrades. `)]),t(`div`,[e._v(` You are getting `+e._s(e.format(e.shardsPerSecond,2,0))+` `+e._s(e.incomeType)+` per second. `)]),t(`div`,{staticClass:`l-dimensions-container`},e._l(8,function(n){return t(`TimeDimensionRow`,{key:n,attrs:{tier:n,"are-autobuyers-unlocked":e.areAutobuyersUnlocked}})}),1),t(`div`,[e._v(` Time Dimension costs jump at `+e._s(e.format(e.costIncreases[0],2,2))+` and `+e._s(e.format(e.costIncreases[1]))+` Eternity Points, `),t(`br`),e._v(` and costs increase much faster after `+e._s(e.format(e.costIncreases[2]))+` Eternity Points. `),t(`br`),e.showLockedDimCostNote?t(`div`,[e._v(` Hold shift to see the Eternity Point cost for locked Time Dimensions. `)]):e._e(),e._v(` Any 8th Time Dimensions purchased above `+e._s(e.format(1e8))+` will not further increase the multiplier. `)])])},[],!1,null,null,null,null).exports,MB={name:`ModernTimeDimensionRow`,components:{GenericDimensionRowText:he,PrimaryButton:L,PrimaryToggleButton:R},props:{tier:{type:Number,required:!0},areAutobuyersUnlocked:{type:Boolean,required:!0}},data(){return{isUnlocked:!1,isCapped:!1,multiplier:new Decimal(0),amount:new Decimal(0),bought:new Decimal(0),rateOfChange:new Decimal(0),cost:new Decimal(0),isAvailableForPurchase:!1,isAutobuyerOn:!1,requirementReached:!1,realityUnlocked:!1,showTTCost:!1,ttCost:0,ttGen:new Decimal,currTT:new Decimal}},computed:{shiftDown(){return ui.view.shiftDown},name(){return`${TimeDimension(this.tier).shortDisplayName} Time Dimension`},buttonContents(){return this.showTTCost?this.formattedTTCost:this.formattedEPCost},tooltipContents(){return this.showTTCost?`${this.formattedEPCost}<br>${this.timeEstimate}`:this.isCapped?`Nameless prevents the purchase of more than ${format(1)} Time Dimension`:`Purchased ${quantifyInt(`time`,this.bought)}`},showRow(){return this.realityUnlocked||this.isUnlocked||this.requirementReached},formattedTTCost(){return`Unlock: ${format(this.ttCost)} TT`},formattedEPCost(){return this.isCapped?`Capped`:`${this.showCostTitle?`Cost: `:``}${format(this.cost,2)} EP`},hasLongText(){return this.buttonContents.length>20},showCostTitle(){return this.cost.max(1).log10().lte(1e6)},timeEstimate(){if(!this.showTTCost||this.ttGen.eq(0))return``;let e=Decimal.sub(this.ttCost,this.currTT).dividedBy(this.ttGen);return e.gt(0)?`Enough TT in ${TimeSpan.fromSeconds(e).toStringShort()}`:``}},watch:{isAutobuyerOn(e){Autobuyer.timeDimension(this.tier).isActive=e}},methods:{update(){let e=this.tier,t=TimeDimension(e);this.isCapped=Enslaved.isRunning&&t.bought.gt(0),this.isUnlocked=t.isUnlocked,this.multiplier.copyFrom(t.multiplier),this.amount.copyFrom(t.amount),this.bought.copyFrom(t.bought),e<8&&this.rateOfChange.copyFrom(t.rateOfChange),this.cost.copyFrom(t.cost),this.isAvailableForPurchase=t.isAvailableForPurchase,this.isUnlocked||(this.isAvailableForPurchase=t.requirementReached),this.requirementReached=t.requirementReached,this.isAutobuyerOn=Autobuyer.timeDimension(this.tier).isActive,this.realityUnlocked=PlayerProgress.realityUnlocked(),this.showTTCost=!this.isUnlocked&&!this.shiftDown,this.tier>4&&(this.ttCost=TimeStudy.timeDimension(this.tier).cost),this.currTT.copyFrom(Currency.timeTheorems.value),this.ttGen.copyFrom(getTTPerSecond().times(getGameSpeedupFactor()))},buyTimeDimension(){if(!this.isUnlocked){TimeDimension(this.tier).tryUnlock();return}buySingleTimeDimension(this.tier)},buyMaxTimeDimension(){buyMaxTimeDimension(this.tier)}}},NB=D(MB,function(){var e=this,t=e._self._c;return t(`div`,{directives:[{name:`show`,rawName:`v-show`,value:e.showRow,expression:`showRow`}],staticClass:`c-dimension-row l-dimension-row-time-dim l-dimension-single-row`,class:{"c-dim-row--not-reached":!e.isUnlocked&&!e.requirementReached}},[t(`GenericDimensionRowText`,{attrs:{tier:e.tier,name:e.name,"multiplier-text":e.formatX(e.multiplier,2,1),amount:e.amount,rate:e.rateOfChange}}),t(`div`,{staticClass:`l-dim-row-multi-button-container c-modern-dim-tooltip-container`},[t(`div`,{staticClass:`c-modern-dim-purchase-count-tooltip`},[t(`span`,{domProps:{innerHTML:e._s(e.tooltipContents)}})]),t(`PrimaryButton`,{staticClass:`o-primary-btn--buy-td o-primary-btn o-primary-btn--new o-primary-btn--buy-dim`,class:{"l-dim-row-small-text":e.hasLongText},attrs:{enabled:e.isAvailableForPurchase&&!e.isCapped},on:{click:e.buyTimeDimension}},[e._v(` `+e._s(e.buttonContents)+` `)]),e.areAutobuyersUnlocked?t(`PrimaryToggleButton`,{staticClass:`o-primary-btn--buy-td-auto`,attrs:{label:`Auto:`},model:{value:e.isAutobuyerOn,callback:function(t){e.isAutobuyerOn=t},expression:`isAutobuyerOn`}}):t(`PrimaryButton`,{staticClass:`o-primary-btn--buy-td-auto`,attrs:{enabled:e.isAvailableForPurchase&&!e.isCapped},on:{click:e.buyMaxTimeDimension}},[e._v(` Buy Max `)])],1)],1)},[],!1,null,`26e6f464`,null,null).exports,PB=r({name:`NewTimeDimensionsTab`,components:{PrimaryButton:L,NewTimeDimensionRow:NB},data(){return{totalUpgrades:new Decimal(0),multPerTickspeed:new Decimal(0),tickspeedSoftcap:new Decimal(0),timeShards:new Decimal(0),upgradeThreshold:new Decimal(0),shardsPerSecond:new Decimal(0),incomeType:``,areAutobuyersUnlocked:!1,showLockedDimCostNote:!0}},computed:{costIncreases:()=>TimeDimension(1).costIncreaseThresholds},methods:{update(){this.showLockedDimCostNote=!TimeDimension(8).isUnlocked&&player.realities.gte(1),this.totalUpgrades.copyFrom(player.totalTickGained),this.multPerTickspeed.copyFrom(FreeTickspeed.multToNext),this.tickspeedSoftcap.copyFrom(FreeTickspeed.softcap),this.timeShards.copyFrom(Currency.timeShards),this.upgradeThreshold.copyFrom(FreeTickspeed.fromShards(Currency.timeShards.value).nextShards),this.shardsPerSecond.copyFrom(TimeDimension(1).productionPerSecond),this.incomeType=EternityChallenge(7).isRunning?`Eighth Infinity Dimensions`:`Time Shards`,this.areAutobuyersUnlocked=Autobuyer.timeDimension(1).isUnlocked},maxAll(){tryUnlockTimeDimensions(),maxAllTimeDimensions()},toggleAllAutobuyers(){toggleAllTimeDims()}}}),FB=D(PB,function(){var e=this,t=e._self._c;return e._self._setupProxy,t(`div`,{staticClass:`l-time-dim-tab l-centered-vertical-tab`},[t(`div`,{staticClass:`c-subtab-option-container`},[t(`PrimaryButton`,{staticClass:`o-primary-btn--subtab-option`,on:{click:e.maxAll}},[e._v(` Max all `)]),e.areAutobuyersUnlocked?t(`PrimaryButton`,{staticClass:`o-primary-btn--subtab-option`,on:{click:e.toggleAllAutobuyers}},[e._v(` Toggle all autobuyers `)]):e._e()],1),t(`div`,[t(`p`,[e._v(` You have gained `),t(`span`,{staticClass:`c-time-dim-description__accent`},[e._v(e._s(e.formatInt(e.totalUpgrades)))]),e._v(` Tickspeed upgrades from `),t(`span`,{staticClass:`c-time-dim-description__accent`},[e._v(e._s(e.format(e.timeShards,2,1)))]),e._v(` Time Shards. `)]),t(`p`,[e._v(` Next Tickspeed upgrade at `),t(`span`,{staticClass:`c-time-dim-description__accent`},[e._v(e._s(e.format(e.upgradeThreshold,2,1)))]),e._v(`, increasing by `),t(`span`,{staticClass:`c-time-dim-description__accent`},[e._v(e._s(e.formatX(e.multPerTickspeed,2,2)))]),e._v(` per Tickspeed upgrade gained. `)])]),t(`div`,[e._v(` The amount each additional upgrade requires will start increasing above `+e._s(e.formatInt(e.tickspeedSoftcap))+` Tickspeed upgrades. `)]),t(`div`,[e._v(`You are getting `+e._s(e.format(e.shardsPerSecond,2,0))+` `+e._s(e.incomeType)+` per second.`)]),t(`div`,{staticClass:`l-dimensions-container`},e._l(8,function(n){return t(`NewTimeDimensionRow`,{key:n,attrs:{tier:n,"are-autobuyers-unlocked":e.areAutobuyersUnlocked}})}),1),t(`div`,[e._v(` Time Dimension costs jump at `+e._s(e.format(e.costIncreases[0],2,2))+` and `+e._s(e.format(e.costIncreases[1]))+` Eternity Points, `),t(`br`),e._v(` and costs increase much faster after `+e._s(e.format(e.costIncreases[2]))+` Eternity Points. `),t(`br`),e.showLockedDimCostNote?t(`div`,[e._v(` Hold shift to see the Eternity Point cost for locked Time Dimensions. `)]):e._e(),e._v(` Any 8th Time Dimensions purchased above `+e._s(e.format(1e8))+` will not further increase the multiplier. `)])])},[],!1,null,null,null,null).exports,IB=D({name:`TimeDimensionsTab`,components:{ClassicTimeDimensionsTab:jB,ModernTimeDimensionsTab:FB},computed:{activeComponent(){return this.$viewModel.newUI?`ModernTimeDimensionsTab`:`ClassicTimeDimensionsTab`}}},function(){var e=this,t=e._self._c;return t(e.activeComponent,{tag:`component`})},[],!1,null,null,null,null).exports,LB={name:`EnslavedTimeStudy`,props:{setup:{type:Object,required:!0}},data(){return{isVisible:player.celestials.enslaved.hasSecretStudy}},computed:{enslavedTT:()=>100,styleObject(){return{top:`${this.setup.top}rem`,left:`${this.setup.left}rem`}},classObject(){return{"l-time-study":!0,"o-time-study":!0,"o-time-study--bought":!0,"o-time-study-normal":!0,"o-time-study-normal--bought":!0,"o-time-study--enslaved":!0,"o-time-study--enslaved-unlocked":this.isVisible}}},methods:{update(){this.isVisible=Enslaved.isRunning&&player.celestials.enslaved.hasSecretStudy},handleClick(){!Enslaved.isRunning||player.celestials.enslaved.hasSecretStudy||(player.celestials.enslaved.hasSecretStudy=!0,EnslavedProgress.secretStudy.giveProgress(),Currency.timeTheorems.add(this.enslavedTT))}}},RB=D(LB,function(){var e=this,t=e._self._c;return t(`button`,{ref:`study`,class:e.classObject,style:e.styleObject,on:{click:e.handleClick}},[t(`span`,[e._v(` ... you ... have great potential ... `),t(`br`),t(`br`),e._v(` Cost: `+e._s(e.format(-e.enslavedTT))+` Time Theorems `)])])},[],!1,null,`7afe4824`,null,null).exports,zB={name:`HiddenTimeStudyConnection`,props:{setup:{type:Object,required:!0},isEnslaved:{type:Boolean,required:!1,default:!1}},data(){return{isVisible:!1}},computed:{classObject(){return{"o-time-study-connection":!0,"o-time-study-connection--bought":!0,"o-time-study-connection--secret":!0,"o-time-study-connection--secret-unlocked":this.isVisible}}},methods:{update(){this.isVisible=this.isEnslaved?Enslaved.isRunning&&player.celestials.enslaved.hasSecretStudy:player.secretUnlocks.viewSecretTS},percents(e){return`${e*100}%`}}},BB=D(zB,function(){var e=this,t=e._self._c;return t(`line`,{class:e.classObject,attrs:{x1:e.percents(e.setup.x1),y1:e.percents(e.setup.y1),x2:e.percents(e.setup.x2),y2:e.percents(e.setup.y2)}})},[],!1,null,`1e29a69f`,null,null).exports,VB={name:`TriadTimeStudy`,components:{DescriptionDisplay:u,EffectDisplay:c,HintText:me,TimeStudyButton:ue},props:{setup:{type:Object,required:!0}},computed:{study(){return this.setup.study},id(){return this.study.id},config(){return this.study.config}}},HB=D(VB,function(){var e=this,t=e._self._c;return t(`TimeStudyButton`,{staticClass:`o-time-study--triad`,attrs:{setup:e.setup,"show-st-cost":!0}},[t(`HintText`,{staticClass:`l-hint-text--time-study`,attrs:{type:`studies`}},[e._v(` `+e._s(e.id)+` Triad `)]),t(`DescriptionDisplay`,{attrs:{config:e.study.config}}),t(`EffectDisplay`,{attrs:{br:``,config:e.study.config}})],1)},[],!1,null,`c3687cc4`,null,null).exports,UB=r({name:`TimeStudiesTab`,components:{PrimaryButton:L,NormalTimeStudy:se,ECTimeStudy:le,EnslavedTimeStudy:RB,DilationTimeStudy:oe,TriadTimeStudy:HB,SecretTimeStudy:de,TimeStudyConnection:fe,HiddenTimeStudyConnection:BB},data(){return{respec:player.respec,layoutType:ae.NORMAL,vLevel:0,renderedStudyCount:0,renderedConnectionCount:0,isEnslaved:!1,delayTimer:0}},computed:{layout(){return ce.create(this.layoutType)},allStudies(){return this.layout.studies},studies(){return this.allStudies.slice(0,this.renderedStudyCount)},allConnections(){return this.layout.connections},connections(){return this.allConnections.slice(0,this.renderedConnectionCount)},treeStyleObject(){return{width:`${this.layout.width}rem`,height:`${this.layout.height}rem`}},respecClassObject(){return{"o-primary-btn--subtab-option":!0,"o-primary-btn--respec-active":this.respec}}},watch:{respec(e){player.respec=e},vLevel(){this.$recompute(`layout`)}},created(){let e=()=>{let t=!1;this.renderedStudyCount<this.allStudies.length&&(this.renderedStudyCount+=2,t=!0),this.renderedConnectionCount<this.allConnections.length&&(this.renderedConnectionCount+=2,t=!0),t&&(this.renderAnimationId=requestAnimationFrame(e))};e(),this.on$(GAME_EVENT.REALITY_RESET_AFTER,()=>{this.delayTimer=player.celestials.enslaved.hasSecretStudy?Date.now():0}),document.body.scrollTop=0},beforeDestroy(){cancelAnimationFrame(this.renderAnimationId)},methods:{update(){this.respec=player.respec,this.layoutType=ae.current,this.vLevel=Ra.pets.v.level,this.isEnslaved=Enslaved.isRunning||Date.now()-this.delayTimer<1e3},studyComponent(e){switch(e.type){case TIME_STUDY_TYPE.NORMAL:return se;case TIME_STUDY_TYPE.ETERNITY_CHALLENGE:return le;case TIME_STUDY_TYPE.DILATION:return oe;case TIME_STUDY_TYPE.TRIAD:return HB}throw TypeError(`Unknown Time Study type`)},exportStudyTree(){player.timestudy.studies.length===0?GameUI.notify.error(`You cannot export an empty Time Study Tree!`):(copyToClipboard(GameCache.currentStudyTree.value.exportString),GameUI.notify.info(`Exported current Time Studies to your clipboard`))}}}),WB=D(UB,function(){var e=this,t=e._self._c;return e._self._setupProxy,t(`div`,{staticClass:`l-time-studies-tab`},[t(`div`,{staticClass:`c-subtab-option-container`},[t(`PrimaryButton`,{staticClass:`o-primary-btn--subtab-option`,on:{click:e.exportStudyTree}},[e._v(` Export tree `)]),t(`PrimaryButton`,{class:e.respecClassObject,on:{click:function(t){e.respec=!e.respec}}},[e._v(` Respec Time Studies on next Eternity `)]),t(`PrimaryButton`,{staticClass:`o-primary-btn--subtab-option`,attrs:{onclick:`Modal.studyString.show({ id: -1 })`}},[e._v(` Import tree `)])],1),t(`div`,{staticClass:`l-time-study-tree l-time-studies-tab__tree`,style:e.treeStyleObject},[e._l(e.studies,function(n){return t(e.studyComponent(n.study),{key:n.study.type.toString()+n.study.id.toString(),tag:`component`,attrs:{setup:n}})}),t(`SecretTimeStudy`,{attrs:{setup:e.layout.secretStudy}}),e.isEnslaved?t(`EnslavedTimeStudy`,{attrs:{setup:e.layout.enslavedStudy}}):e._e(),t(`svg`,{staticClass:`l-time-study-connection`,style:e.treeStyleObject},[e._l(e.connections,function(e,n){return t(`TimeStudyConnection`,{key:`connection`+n,attrs:{setup:e}})}),t(`HiddenTimeStudyConnection`,{attrs:{setup:e.layout.secretStudyConnection}}),e.isEnslaved?t(`HiddenTimeStudyConnection`,{attrs:{setup:e.layout.enslavedStudyConnection,"is-enslaved":e.isEnslaved}}):e._e()],2)],2)])},[],!1,null,`e9f57715`,null,null).exports,GB={name:`VUnlockRequirement`,props:{dbEntry:{type:Object,required:!0}},data(){return{resource:new Decimal(0),progress:0}},computed:{barProgressStyle(){return{background:this.progress===1?`var(--color-v--base)`:`#6b5f2e`,width:`${100*this.progress}%`}},textStyle(){return{color:this.progress===1?`black`:`var(--color-text)`,"border-color":`var(--color-text)`}}},methods:{update(){this.resource.copyFrom(new Decimal(this.dbEntry.resource())),this.progress=Math.clampMax(this.dbEntry.progress(),1)}}},KB=D(GB,function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`c-v-unlock-bar`,style:e.textStyle},[t(`div`,{staticClass:`c-v-unlock-bar__progress`,style:e.barProgressStyle}),e._v(` `+e._s(e.dbEntry.format(e.resource))+` / `+e._s(e.dbEntry.format(e.dbEntry.requirement))+` `+e._s(e.dbEntry.name)+` `)])},[],!1,null,null,null,null).exports;const qB=`powerpow.infinitypow.replicationpow.timepow.dilationpow.timeshardpow.powermult.powerdimboost.powerbuy10.dilationTTgen.infinityinfmult.infinityIP.timeEP.dilationDT.replicationdtgain.replicationspeed.timeetermult.dilationgalaxyThreshold.infinityrate.replicationglyphlevel.timespeed.effarigrm.effarigglyph.effarigblackhole.effarigachievement.effarigforgotten.effarigdimensions.effarigantimatter.cursedgalaxies.cursedtickspeed.curseddimensions.cursedEP.realityglyphlevel.realitygalaxies.realityrow1pow.realityDTglyph.companiondescription.companionEP`.split(`.`);function JB(){let e={...j};for(let t in j)j.glyphTypes.includes(t)&&(j[t].isGenerated??!0)||delete e[t];return e}const YB=Object.keys(JB()),XB=qB.mapToObject(e=>e,(e,t)=>t);function ZB(e){return new Decimal(e).div(40).add(1)}function QB(e){return new Decimal(e).sub(1).mul(40)}const $B={inventory:[],active:[],unseen:[],unequipped:[],levelBoost:o.D0,factorsOpen:!1,bestUndoGlyphCount:0,get inventoryList(){return player.reality.glyphs.inventory},get sortedInventoryList(){return this.inventoryList.sort((e,t)=>Decimal.compare(e.level.mul(e.strength),t.level.mul(t.strength)))},get activeList(){return player.reality.glyphs.active},get activeWithoutCompanion(){return this.activeList.filter(e=>e.type!==`companion`)},get allGlyphs(){return this.inventoryList.concat(this.activeList)},get glyphIndexArray(){return this.inventory.filter(e=>e).map(e=>e.idx)},findFreeIndex(e){this.validate();let t=t=>e?t<this.protectedSlots:t>=this.protectedSlots;return this.inventory.findIndex((e,n)=>e===null&&t(n))},get freeInventorySpace(){return this.validate(),this.inventory.filter((e,t)=>e===null&&t>=this.protectedSlots).length},get activeSlotCount(){return Pelle.isDoomed?PelleRifts.vacuum.milestones[0].canBeApplied?1:0:3+Effects.sum(RealityUpgrade(9),RealityUpgrade(24)).toNumber()},get protectedSlots(){return 10*player.reality.glyphs.protectedRows},get totalSlots(){return 120},changeProtectedRows(e){let t=Math.clamp(player.reality.glyphs.protectedRows+e,0,this.totalSlots/10-1),n=t-player.reality.glyphs.protectedRows;if(n>0){let e=0;for(;e<n;){let t=!1;for(let n=this.protectedSlots/10+e;!t&&n<this.totalSlots/10;n++)t||=this.moveGlyphRow(n,n+1);if(!t)break;this.glyphIndexArray.some(e=>Math.floor(e/10)===this.protectedSlots/10)||e++}}else{let e=0;for(;e<-n;){let t=!1;for(let n=this.protectedSlots/10-e-1;!t&&n>0;n--)t||=this.moveGlyphRow(n,n-1);if(!t)break;if(!this.glyphIndexArray.some(e=>Math.floor(e/10)===this.protectedSlots/10-1)){e++;for(let t=this.protectedSlots/10-e;t<this.totalSlots/10;t++)this.moveGlyphRow(t,t-1)}}}player.reality.glyphs.protectedRows=t,this.validate(),GameCache.glyphInventorySpace.invalidate()},moveGlyphRow(e,t){if(!player.reality.moveGlyphsOnProtection||e>=this.totalSlots/10||t>=this.totalSlots/10)return!1;if(this.glyphIndexArray.some(e=>Math.floor(e/10)===t)){if([...Array(10).keys()].some(n=>this.inventory[10*e+n]!==null&&this.inventory[10*t+n]!==null))return!1;for(let n=0;n<10;n++){let r=this.inventory[10*e+n];r!==null&&this.moveToSlot(r,10*t+n)}return this.validate(),!0}for(let n=0;n<10;n++){let r=this.inventory[10*e+n];r!==null&&this.moveToSlot(r,10*t+n)}return this.validate(),!0},refreshActive(){this.active=Array(this.activeSlotCount).fill(null);for(let e of player.reality.glyphs.active){if(this.active[e.idx])throw Error(`Stacked active glyphs?`);this.active[e.idx]=e}},refresh(){this.refreshActive(),this.inventory=Array(this.totalSlots).fill(null);let e=[];for(let t of player.reality.glyphs.inventory)this.inventory[t.idx]?e.push(t):this.inventory[t.idx]=t;for(;e.length>0;){let t=this.findFreeIndex();if(t>=0){let n=e.shift();this.inventory[t]=n,n.idx=t}else break}for(;e.length>0;)this.removeFromInventory(e.pop());this.validate(),EventHub.dispatch(GAME_EVENT.GLYPHS_CHANGED)},findByValues(e,t,n={level,strength,effects}){let r=(e,t,n)=>{switch(e){case-1:return n.sub(t);case 0:return t.eq(n)?0:-1;case 1:return t.sub(n)}return!1},i=(e,t)=>(e&t)===e?countValuesFromBitmask(t-e):-countValuesFromBitmask(e-(e&t)),a=[];for(let o of t){let t=o.type===e.type,s;switch(n.effects){case-1:s=i(o.effects,e.effects);break;case 0:s=o.effects===e.effects?0:-1;break;case 1:s=i(e.effects,o.effects);break}let c=r(n.strength,o.strength,e.strength).div(2.5),l=r(n.level,o.level,e.level).div(5e3),u=o.symbol===e.symbol;t&&s>=0&&c.gte(0)&&l.gte(0)&&u&&a.push({glyph:o,gap:c.add(l).add(s/10)})}return a.sort((e,t)=>Decimal.compare(e.gap,t.gap)),a.map(e=>e.glyph)},findById(e){return player.reality.glyphs.inventory.find(t=>t.id===e)},findByInventoryIndex(e){return this.inventory[e]},activeGlyph(e){return this.active[e]},equip(e,t){let n=Pelle.isDisabled(`glyphs`)||[`effarig`,`reality`,`cursed`].includes(e.type);if(Pelle.isDoomed&&n||GameEnd.creditsEverClosed)return;if(e.type!==`companion`){if(RealityUpgrade(9).isLockingMechanics){if(this.activeWithoutCompanion.length>0){RealityUpgrade(9).tryShowWarningModal(`equip another non-Companion Glyph`);return}if(e.level.lt(3)){RealityUpgrade(9).tryShowWarningModal(`equip a Glyph whose level is less than ${formatInt(3)}`);return}}if(RealityUpgrade(24).isLockingMechanics&&this.activeWithoutCompanion.length===0){RealityUpgrade(24).tryShowWarningModal();return}if(ImaginaryUpgrade(25).isLockingMechanics&&this.activeWithoutCompanion.length===1){ImaginaryUpgrade(25).tryShowWarningModal();return}}if(this.validate(),this.findByInventoryIndex(e.idx)!==e)throw Error(`Inconsistent inventory indexing`);let r=-1;if([`effarig`,`reality`].includes(e.type)&&(r=this.active.findIndex(t=>t&&t.type===e.type)),this.active[t]===null){if(r>=0){Modal.message.show(`You may only have one ${e.type.capitalize()} Glyph equipped!`,{closeEvent:GAME_EVENT.GLYPHS_CHANGED});return}this.removeFromInventory(e),this.saveUndo(t),player.reality.glyphs.active.push(e),e.idx=t,this.active[t]=e,this.updateRealityGlyphEffects(),this.updateMaxGlyphCount(),EventHub.dispatch(GAME_EVENT.GLYPHS_EQUIPPED_CHANGED),EventHub.dispatch(GAME_EVENT.GLYPHS_CHANGED),this.validate()}else{if(r>=0&&r!==t){Modal.message.show(`You may only have one ${e.type.capitalize()} Glyph equipped!`,{closeEvent:GAME_EVENT.GLYPHS_CHANGED});return}if(!player.options.confirmations.glyphReplace){this.swapIntoActive(e,t);return}Modal.glyphReplace.show({targetSlot:t,inventoryIndex:e.idx})}this.removeVisualFlag(`unseen`,e),this.removeVisualFlag(`unequipped`,e)},unequipAll(e=!1){this.unequipped=[];let t=e?!1:player.options.respecIntoProtected;for(;player.reality.glyphs.active.length>0;){let e=this.findFreeIndex(t);if(e<0)break;let n=player.reality.glyphs.active.pop();this.active[n.idx]=null,this.addToInventory(n,e,!0)}this.updateRealityGlyphEffects(),this.updateMaxGlyphCount(!0);let n=player.reality.glyphs.active.length,r=player.records.recentRealities[0][1].lt(3e3);if(n&&!r){let e=player.options.respecIntoProtected?`Protected slots`:`Main Inventory`,t=this.findFreeIndex(!player.options.respecIntoProtected)!==-1;setTimeout(()=>Modal.message.show(`${quantifyInt(`Glyph`,n)} could not be unequipped due to lack
        of space. Free up some space in your ${e}${t?` or switch where you are unequipping to`:``}
        in order to unequip ${n===1?`it`:`them`}.`,{closeEvent:GAME_EVENT.GLYPHS_CHANGED}),50)}return EventHub.dispatch(GAME_EVENT.GLYPHS_EQUIPPED_CHANGED),EventHub.dispatch(GAME_EVENT.GLYPHS_CHANGED),player.reality.glyphs.active.length===0},unequip(e,t){if(this.active[e]===null)return;let n=player.reality.glyphs.active.findIndex(t=>t.idx===e);if(n<0)return;let r=player.reality.glyphs.active.splice(n,1)[0];this.active[e]=null,this.addToInventory(r,t,!0),this.updateRealityGlyphEffects(),this.updateMaxGlyphCount(!0),EventHub.dispatch(GAME_EVENT.GLYPHS_EQUIPPED_CHANGED),EventHub.dispatch(GAME_EVENT.GLYPHS_CHANGED)},updateRealityGlyphEffects(){if(player.reality.glyphs.active.filter(e=>e.type===`reality`)[0]===void 0){this.levelBoost=o.D0;return}this.levelBoost=getAdjustedGlyphEffectUncached(`realityglyphlevel`)},moveToSlot(e,t){this.inventory[t]===null?this.moveToEmpty(e,t):this.swap(e,this.inventory[t])},moveToEmpty(e,t){if(this.validate(),this.findByInventoryIndex(e.idx)!==e)throw Error(`Inconsistent inventory indexing`);if(this.inventory[t]===null)this.inventory[e.idx]=null,this.inventory[t]=e,e.idx=t,EventHub.dispatch(GAME_EVENT.GLYPHS_CHANGED);else throw Error(`Attempted glyph move into non-empty slot`);this.validate()},swap(e,t){if(e.idx===t.idx)return;this.validate(),this.inventory[e.idx]=t,this.inventory[t.idx]=e;let n=e.idx;e.idx=t.idx,t.idx=n,this.validate(),EventHub.dispatch(GAME_EVENT.GLYPHS_CHANGED)},addToInventory(e,t,n=!1){this.validate(),n||(e.id=GlyphGenerator.makeID());let r=t<this.protectedSlots,i=this.findFreeIndex(r);i<0||(t!==void 0&&this.inventory[t]===null&&(i=t),this.inventory[i]=e,e.idx=i,this.applyGamespeed(e),player.records.bestReality.glyphStrength=player.records.bestReality.glyphStrength.clampMin(e.strength),player.reality.glyphs.inventory.push(e),t===void 0&&!n&&this.addVisualFlag(`unseen`,e),n&&this.addVisualFlag(`unequipped`,e),EventHub.dispatch(GAME_EVENT.GLYPHS_CHANGED),this.validate())},addVisualFlag(e,t){this[e].includes(t.id)||this[e].push(t.id)},removeVisualFlag(e,t){let n=$B[e].indexOf(t.id);Decimal.gt(n,-1)&&$B[e].splice(n,1)},isMusicGlyph(e){return e?.cosmetic===`music`},removeFromInventory(e){if(e.idx===null)return;this.validate();let t=player.reality.glyphs.inventory.indexOf(e);t<0||(this.inventory[e.idx]=null,player.reality.glyphs.inventory.splice(t,1),EventHub.dispatch(GAME_EVENT.GLYPHS_CHANGED),this.validate())},validate(){for(let e of player.reality.glyphs.inventory)if(this.inventory[e.idx]!==e)throw Error(`validation error`);for(let e=0;e<this.inventory.length;++e)if(this.inventory[e]&&this.inventory[e].idx!==e)throw Error(`backwards validation error`)},sort(e){let t=player.reality.glyphs.inventory.filter(e=>e.idx>=this.protectedSlots),n=GameCache.glyphInventorySpace.value,r=[`power`,`infinity`,`replication`,`time`,`dilation`,`effarig`,`reality`,`cursed`,`companion`],i=r.mapToObject(e=>e,()=>({glyphs:[],padding:0}));for(let e of t)i[e.type].glyphs.push(e);let a=0;for(let t of Object.values(i))t.glyphs.sort(e),t.padding=Math.ceil(t.glyphs.length/10)*10-t.glyphs.length,a+=t.padding;for(;a>n;){let e=r[0];for(let t of r)i[t].padding>i[e].padding&&(e=t);let t=i[e].padding>5?5:1;a-=t,i[e].padding-=t}let o=this.protectedSlots;for(let e of Object.values(i)){for(let t of e.glyphs)this.inventory[o]?this.swap(this.inventory[o],t):this.moveToEmpty(t,o),++o;o+=e.padding}player.reality.autoCollapse&&this.collapseEmptySlots()},sortByLevel(){this.sort((e,t)=>Decimal.compare(e.level,t.level))},sortByPower(){this.sort((e,t)=>Decimal.compare(e.level.mul(e.strength),t.level.mul(t.strength)))},sortByScore(){this.sort((e,t)=>Decimal.compare(AutoGlyphProcessor.filterValue(t),AutoGlyphProcessor.filterValue(e)))},sortByEffect(){function e(e){return e.toSorted((e,t)=>t.intID-e.intID)[0]}this.sort((t,n)=>e(n.effects)-e(t.effects))},isObjectivelyUseless(e,t,n){if(player.reality.applyFilterToPurge&&AutoGlyphProcessor.wouldKeep(e))return!1;function r(e,t,n){for(let r of n)if(r.compareValues(r.effect(e.level,e.strength),r.effect(t.level,t.strength))>0)return!0;return!1}let i=(n??this.inventory).concat(this.active).filter(t=>t!==null&&t.type===e.type&&t.id!==e.id&&(t.level.gte(e.level)||t.strength.gte(e.strength))&&e.effects.every(e=>t.effects.includes(e))),a=[`effarig`,`reality`].includes(e.type)?1:5;if(a=Math.clampMax(a,t),i.length<a)return!1;let o=getGlyphEffectsFromArray(e.effects).filter(t=>t.id.startsWith(e.type));return i.countWhere(t=>!r(e,t,o))>=a},autoClean(e=5,t=!0){let n=e<5,r=0,i=t?void 0:this.fakePurgeInventory();if(!GlyphSacrificeHandler.canSacrifice)return r;for(let a=this.totalSlots-1;a>=this.protectedSlots;--a){let o=(i??this.inventory)[a];o===null||[`companion`].includes(o.type)||o.type===`cursed`&&e!==0||(o.color!==void 0||o.symbol!==void 0)&&!n||(e===0||this.isObjectivelyUseless(o,e,i))&&(t?AutoGlyphProcessor.getRidOfGlyph(o):i.splice(i.indexOf(o),1),r++)}return player.reality.autoCollapse&&t&&this.collapseEmptySlots(),r},fakePurgeInventory(){return this.inventory.map(e=>e===null?null:{id:e.id,type:e.type,level:e.level,strength:e.strength,effects:e.effects,color:e.color,symbol:e.symbol})},harshAutoClean(){this.autoClean(1)},deleteAllUnprotected(){this.autoClean(0)},deleteAllRejected(e=!0){let t=0;for(let n of $B.inventory)n!==null&&n.idx>=this.protectedSlots&&!AutoGlyphProcessor.wouldKeep(n)&&(e&&AutoGlyphProcessor.getRidOfGlyph(n),t++);return player.reality.autoCollapse&&e&&this.collapseEmptySlots(),t},collapseEmptySlots(){let e=player.reality.glyphs.inventory.filter(e=>e.idx>=this.protectedSlots).sort((e,t)=>e.idx-t.idx);for(let t=0;t<e.length;t++)this.moveToSlot(e[t],this.protectedSlots+t)},processSortingAfterReality(){VUnlocks.autoAutoClean.canBeApplied&&player.reality.autoAutoClean&&this.autoClean();let e={NONE:0,LEVEL:1,POWER:2,EFFECT:3,SCORE:4};switch(player.reality.autoSort){case e.NONE:break;case e.LEVEL:this.sortByLevel();break;case e.POWER:this.sortByPower();break;case e.EFFECT:this.sortByEffect();break;case e.SCORE:this.sortByScore();break;default:throw Error(`Unrecognized auto-sort mode`)}},get levelCap(){return o.BEMAX},get instabilityThreshold(){return o.E3.add(getAdjustedGlyphEffect(`effarigglyph`)).add(ImaginaryUpgrade(7).effectOrDefault(0))},get hyperInstabilityThreshold(){return this.instabilityThreshold.add(3e3)},clearUndo(){player.reality.glyphs.undo=[]},saveUndo(e){let t={targetSlot:e,am:new Decimal(Currency.antimatter.value),ip:new Decimal(Currency.infinityPoints.value),ep:new Decimal(Currency.eternityPoints.value),tt:Currency.timeTheorems.max.minus(TimeTheorems.totalPurchased()),ecs:EternityChallenges.all.map(e=>e.completions),thisInfinityTime:player.records.thisInfinity.time,thisInfinityRealTime:player.records.thisInfinity.realTime,thisEternityTime:player.records.thisEternity.time,thisEternityRealTime:player.records.thisEternity.realTime,thisRealityTime:player.records.thisReality.time,thisRealityRealTime:player.records.thisReality.realTime,storedTime:player.celestials.enslaved.stored,dilationStudies:player.dilation.studies.toBitmask(),dilationUpgrades:player.dilation.upgrades.toBitmask(),dilationRebuyables:DilationUpgrades.rebuyable.mapToObject(e=>e.id,e=>e.boughtAmount),tp:new Decimal(Currency.tachyonParticles.value),dt:new Decimal(Currency.dilatedTime.value)};player.reality.glyphs.undo.push(t)},undo(){let e=$B.findFreeIndex(player.options.respecIntoProtected);if(e===-1||player.reality.glyphs.undo.length===0)return;let t=player.reality.glyphs.undo.pop();if(this.bestUndoGlyphCount=player.requirementChecks.reality.maxGlyphs,this.unequip(t.targetSlot,e),finishProcessReality({reset:!0,glyphUndo:!0,restoreCelestialState:!0}),Currency.antimatter.value=new Decimal(t.am),Currency.infinityPoints.value=new Decimal(t.ip),Currency.eternityPoints.value=new Decimal(t.ep),Currency.timeTheorems.value=new Decimal(t.tt),EternityChallenges.all.map((e,n)=>e.completions=t.ecs[n]),player.records.thisInfinity.time=t.thisInfinityTime,player.records.thisInfinity.realTime=t.thisInfinityRealTime,player.records.thisEternity.time=t.thisEternityTime,player.records.thisEternity.realTime=t.thisEternityRealTime,player.records.thisReality.time=t.thisRealityTime,player.records.thisReality.realTime=t.thisRealityRealTime,player.celestials.enslaved.stored=t.storedTime||0,t.dilationStudies){player.dilation.studies=Array.fromBitmask(t.dilationStudies),player.dilation.upgrades=new Set(Array.fromBitmask(t.dilationUpgrades));for(let e of Object.keys(t.dilationRebuyables))DilationUpgrades.fromId(e).boughtAmount=t.dilationRebuyables[e];Currency.tachyonParticles.value=new Decimal(t.tp),Currency.dilatedTime.value=new Decimal(t.dt)}Player.automatorUnlocked&&AutomatorBackend.state.forceRestart&&AutomatorBackend.start(player.reality.automator.state.editorScript)},copyForRecords(e){function t(e){return Array.isArray(e.effects)?e.effects.toSorted((e,t)=>n(e)-n(t))[0]:e.effects}let n=e=>GlyphEffects.all.filter(t=>t.id===e)[0].intID;return e.map(e=>({type:e.type,level:e.level,strength:e.strength,effects:e.effects,color:e.color,symbol:e.symbol})).sort((e,n)=>t(n)-t(e))},updateMaxGlyphCount(e=!1){let t=this.activeWithoutCompanion,n=t.length-4*t.filter(e=>e&&e.type===`cursed`).length;e&&(player.requirementChecks.reality.maxGlyphs=n),player.requirementChecks.reality.maxGlyphs=Math.max(player.requirementChecks.reality.maxGlyphs,n)},applyGamespeed(e){Ra.unlocks.allGamespeedGlyphs.canBeApplied&&j[e.type].isBasic&&(e.effects.push(`timespeed`),e.type===`time`&&e.effects.push(`timeshardpow`))},swapIntoActive(e,t){this.removeFromInventory(e),this.unequip(t,e.idx),finishProcessReality({reset:!0,glyphUndo:!1,restoreCelestialState:!0}),player.reality.glyphs.active.push(e),this.active[t]=e,e.idx=t,this.updateRealityGlyphEffects(),this.updateMaxGlyphCount(!0),EventHub.dispatch(GAME_EVENT.GLYPHS_EQUIPPED_CHANGED),EventHub.dispatch(GAME_EVENT.GLYPHS_CHANGED),this.validate()},hash(e){let t=o.D1;for(let n of e){let e=n.level.pow(2).mul(n.strength.pow(4)).mul(n.effects.map(e=>GlyphEffects[e].intID).max()).mul(n.type.codePointAt(0));t=t.mul(e)}return t},giveCursedGlyph(){if(GameCache.glyphInventorySpace.value===0){Modal.message.show(`No available inventory space; Sacrifice some Glyphs to free up space.`,{closeEvent:GAME_EVENT.GLYPHS_CHANGED});return}this.allGlyphs.filter(e=>e!==null&&e.type===`cursed`).length>=$B.activeSlotCount?GameUI.notify.error(`You don't need more than ${format($B.activeSlotCount)} Cursed Glyphs!`):(this.addToInventory(GlyphGenerator.cursedGlyph()),GameUI.notify.error(`Created a Cursed Glyph`))}};function eV(){for(let e=0;e<player.reality.glyphs.active.length;e++)tV(player.reality.glyphs.active[e]);player.reality.glyphs.inventory=player.reality.glyphs.inventory.filter(e=>e.idx<$B.totalSlots);for(let e=0;e<player.reality.glyphs.inventory.length;e++)tV(player.reality.glyphs.inventory[e]);$B.updateRealityGlyphEffects(),$B.refresh()}function tV(e){e.color===void 0&&e.symbol===void 0&&(e.level=Decimal.round(e.level).clampMin(1),e.rawLevel===void 0&&(e.rawLevel=e.level.lt(1e3)?e.level:(Decimal.pow(e.level.times(.004).min(3),2)-1).times(125).add(1e3)),Decimal.eq(e.strength,1)&&(e.strength=new Decimal(1.5)),e.strength=ZB(100).clampMax(e.strength))}function nV(e){return j.rarities.find(t=>Decimal.gte(e,t.minStrength))}function rV(e,t=$B.levelBoost,n=!1){let r=e.level;if(!n){if(Pelle.isDoomed)return Decimal.min(r,Pelle.glyphMaxLevel);if(Enslaved.isRunning)return Decimal.max(r,Enslaved.glyphLevelMin);if(Effarig.isRunning)return Decimal.min(r,Effarig.glyphLevelCap)}return j[e.type].isBasic?Decimal.add(r,t):r}function iV(){$B.unequipAll()||Modal.message.show(`Some of your Glyphs could not be unequipped due to lack of inventory space.`,{closeEvent:GAME_EVENT.GLYPHS_CHANGED}),player.reality.respec=!1}var aV=D({name:`VTab`,components:{CelestialQuoteHistory:fL,VUnlockRequirement:KB,PrimaryButton:L,GlyphSetPreview:pE},data(){return{mainUnlock:!1,canUnlockCelestial:!1,totalUnlocks:0,pp:new Decimal,showReduction:!1,runRecords:[],runGlyphs:[],isFlipped:!1,wantsFlipped:!0,isRunning:!1,hasAlchemy:!1,tempVal:void 0}},computed:{mainUnlockDB:()=>GameDatabase.celestials.v.mainUnlock,celestialUnlockClassObject(){return{"o-v-milestone":!0,"o-v-milestone--unlocked":this.canUnlockCelestial,"c-v-unlock-button--enabled":this.canUnlockCelestial}},hexGrid(){return this.isFlipped&&this.wantsFlipped?[VRunUnlocks.all[6],{},{},{},{isRunButton:!0},VRunUnlocks.all[7],VRunUnlocks.all[8],{},{}]:[VRunUnlocks.all[0],VRunUnlocks.all[1],{},VRunUnlocks.all[5],{isRunButton:!0},VRunUnlocks.all[2],VRunUnlocks.all[4],VRunUnlocks.all[3],{}]},vUnlock:()=>VUnlocks.vAchievementUnlock,runMilestones(){return[[VUnlocks.shardReduction,VUnlocks.adPow,VUnlocks.fastAutoEC],[VUnlocks.autoAutoClean,VUnlocks.achievementBH,VUnlocks.raUnlock]]},runButtonClassObject(){return{"l-v-hexagon":!0,"c-v-run-button":!0,"c-v-run-button--running":this.isRunning,"c-celestial-run-button--clickable":!this.isDoomed,"o-pelle-disabled-pointer":this.isDoomed}},runDescription(){return GameDatabase.celestials.descriptions[3].effects().replace(/^\w/u,e=>e.toUpperCase())},isDoomed:()=>Pelle.isDoomed},methods:{update(){this.mainUnlock=VUnlocks.vAchievementUnlock.isUnlocked,this.canUnlockCelestial=V.canUnlockCelestial,this.totalUnlocks=V.spaceTheorems,this.pp.copyFrom(Currency.perkPoints.value),this.showReduction=VUnlocks.shardReduction.isUnlocked,this.runRecords=structuredClone(player.celestials.v.runRecords),this.runGlyphs=structuredClone(player.celestials.v.runGlyphs.map(e=>$B.copyForRecords(e))),this.isFlipped=V.isFlipped,this.wantsFlipped=player.celestials.v.wantsFlipped,this.isRunning=V.isRunning,this.hasAlchemy=Ra.unlocks.unlockGlyphAlchemy.canBeApplied},unlockCelestial(){V.canUnlockCelestial&&V.unlockCelestial()},startRun(){this.isDoomed||Modal.celestials.show({name:`V's`,number:3})},has(e){return e.isUnlocked},mode(e){return e.config.mode===N.SUBTRACTION?`reduced`:`divided`},reductionValue(e){return e.config.mode===N.SUBTRACTION?formatInt(e.reduction):format(Decimal.pow10(e.reduction))},showRecord(e){return new Decimal(this.runRecords[e.id]).gt(0)||e.completions>0},reduceGoals(e){if(!Currency.perkPoints.purchase(e.reductionCost))return;let t=e.config.reductionStepSize?e.config.reductionStepSize:1;player.celestials.v.goalReductionSteps[e.id]+=t;for(let e of VRunUnlocks.all)e.tryComplete();V.checkForUnlocks()},glyphRecord(e){return[...e.runGlyphs]},reductionTooltip(e){return`Spend ${quantify(`Perk Point`,e.reductionCost,2,0)}
        to reduce goal by ${format(e.config.perReductionStep)}`},hexColor(e){let t=e.completions,n=e.config.values.length;if(t===n)return`var(--color-v--base)`;let r=255-5*t,i=255-10*t,a=255-20*t;return`rgb(${r},${i},${a})`},toggleFlipped(){player.celestials.v.wantsFlipped=!this.wantsFlipped},createCursedGlyph(){$B.giveCursedGlyph()}}},function(){var e=this,t=e._self._c;return t(`div`,{staticClass:`l-v-celestial-tab`},[t(`CelestialQuoteHistory`,{attrs:{celestial:`v`}}),e.mainUnlock?t(`div`,[e.isFlipped?t(`div`,{staticClass:`c-v-info-text`},[t(`PrimaryButton`,{staticClass:`o-primary-btn--subtab-option`,on:{click:e.toggleFlipped}},[e.wantsFlipped?t(`span`,[e._v(`Hide`)]):t(`span`,[e._v(`Show`)]),e._v(` Hard V `)]),t(`PrimaryButton`,{staticClass:`o-primary-btn--subtab-option l-cursed-glyph-creation`,on:{click:e.createCursedGlyph}},[e._v(` Create a Cursed Glyph `)]),t(`br`),e._v(` Cursed Glyphs can be created here or in the Effarig tab. `),t(`br`),e._v(` Cursed Glyphs count as `+e._s(e.formatInt(-3))+` Glyphs for the purposes of all requirements related to Glyph count. `),t(`br`),e.isDoomed?e._e():t(`span`,[e._v(`The Black Hole can now be used to slow down time if they are both permanent.`)]),t(`br`),t(`br`),e._v(` Each Hard V-Achievement counts as two V-Achievements and will award `+e._s(e.formatInt(2))+` Space Theorems instead of `+e._s(e.formatInt(1))+`. `),t(`br`),e._v(` Goal reduction is significantly more expensive for Hard V-Achievements. `)],1):e._e(),e.showReduction?t(`div`,{staticClass:`c-v-info-text`},[e._v(` You have `+e._s(e.quantify(`Perk Point`,e.pp,2,0))+`. `)]):e._e(),t(`div`,{staticClass:`l-v-unlocks-container`},e._l(e.hexGrid,function(n,r){return t(`li`,{key:r+`-v-hex`,style:[n.isRunButton?{zIndex:1}:{zIndex:0}]},[n.config?t(`div`,{staticClass:`l-v-hexagon c-v-unlock`,style:`background-color: `+e.hexColor(n)},[t(`p`,{staticClass:`o-v-unlock-name`},[n.canBeReduced&&e.showReduction?t(`br`):e._e(),e._v(e._s(n.config.name)+` `)]),t(`p`,{staticClass:`o-v-unlock-desc`,domProps:{innerHTML:e._s(n.formattedDescription)}}),e.has(e.runMilestones[0][0])&&n.isReduced?t(`p`,{staticClass:`o-v-unlock-goal-reduction`},[e._v(` Goal has been `+e._s(e.mode(n))+` by `+e._s(e.reductionValue(n))+` `)]):e._e(),t(`p`,{staticClass:`o-v-unlock-amount`},[e._v(` `+e._s(e.formatInt(n.completions))+`/`+e._s(e.formatInt(n.config.values.length))+` done `)]),e.showRecord(n)?t(`div`,[t(`p`,{staticClass:`o-v-unlock-record`},[e._v(` Best: `+e._s(n.config.formatRecord(e.runRecords[n.id]))+` `)]),t(`p`,[t(`GlyphSetPreview`,{attrs:{glyphs:e.runGlyphs[n.id],text:n.config.name,"text-hidden":!0}})],1),n.canBeReduced&&e.showReduction?t(`div`,[t(`div`,{staticClass:`l-v-goal-reduction-spacer`}),t(`button`,{staticClass:`o-primary-btn l-v-reduction`,class:{"o-primary-btn--disabled":!n.canBeReduced||e.pp.lt(n.reductionCost)},attrs:{"ach-tooltip":e.reductionTooltip(n)},on:{click:function(t){return e.reduceGoals(n)}}},[t(`i`,{staticClass:`fas fa-angle-double-down`})])]):e._e()]):e._e()]):n.isRunButton?t(`div`,{class:e.runButtonClassObject,on:{click:function(t){return e.startRun()}}},[t(`b`,{staticClass:`o-v-start-text`,class:{"o-pelle-disabled":e.isDoomed}},[e.isRunning?t(`span`,[e._v(`You are in `)]):t(`span`,[e._v(`Start `)]),e._v(` V's Reality. `)]),t(`br`),t(`div`,{style:{"font-size":e.hasAlchemy?`1.2rem`:``}},[e._v(` `+e._s(e.runDescription)+` `)]),t(`div`,{staticClass:`c-v-run-button__line c-v-run-button__line--1`}),t(`div`,{staticClass:`c-v-run-button__line c-v-run-button__line--2`}),t(`div`,{staticClass:`c-v-run-button__line c-v-run-button__line--3`})]):t(`div`,[t(`div`,{staticClass:`l-v-hexagon l-placeholder-invisible`})])])}),0),t(`div`,{staticClass:`c-v-info-text`},[e._v(` V-Achievements can only be completed within V's Reality, but are permanent and do not reset upon leaving and re-entering the Reality. `)]),t(`div`,{staticClass:`c-v-info-text`},[e._v(` You have `+e._s(e.formatInt(e.totalUnlocks))+` V-Achievements done. `),e.isDoomed?e._e():t(`span`,[e._v(` You gain `+e._s(e.formatInt(1))+` Space Theorem for each completion, allowing you to purchase Time Studies which are normally locked. `),t(`br`),e._v(` Space Theorems can also be used as a Currency in the Automator. `)])]),t(`br`),t(`div`,{staticClass:`l-v-milestones-grid`},e._l(e.runMilestones,function(n,r){return t(`div`,{key:r+`-v-ms-row`,staticClass:`l-v-milestones-grid__row`},e._l(n,function(n,i){return t(`div`,{key:i+r*10+`-v-ms`,staticClass:`o-v-milestone`,class:{"o-v-milestone--unlocked":e.has(n)}},[t(`div`,{class:{"o-pelle-disabled":e.isDoomed}},[t(`p`,[e._v(e._s(n.description))]),t(`p`,[e._v(`Reward: `+e._s(n.rewardText))]),n.formattedEffect?t(`p`,[e._v(` Currently: `),t(`b`,[e._v(e._s(n.formattedEffect))])]):e._e()])])}),0)}),0)]):t(`div`,{staticClass:`c-v-info-text`},[e._l(e.mainUnlockDB,function(e){return t(`v-unlock-requirement`,{key:e.name,attrs:{"db-entry":e}})}),t(`div`,{staticClass:`l-v-milestones-grid__row`},[t(`div`,{class:e.celestialUnlockClassObject,on:{click:e.unlockCelestial}},[t(`p`,[e._v(e._s(e.vUnlock.description))]),t(`p`,[e._v(e._s(e.vUnlock.rewardText))])])])],2)],1)},[],!1,null,`bde41d92`,null,null).exports,oV=`modulepreload`,sV=function(e){return`/NG-plus-3/`+e},cV={};const lV=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){let e=document.getElementsByTagName(`link`),i=document.querySelector(`meta[property=csp-nonce]`),a=i?.nonce||i?.getAttribute(`nonce`);function o(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:`fulfilled`,value:e}),e=>({status:`rejected`,reason:e}))))}r=o(t.map(t=>{if(t=sV(t,n),t in cV)return;cV[t]=!0;let r=t.endsWith(`.css`),i=r?`[rel="stylesheet"]`:``;if(n)for(let n=e.length-1;n>=0;n--){let i=e[n];if(i.href===t&&(!r||i.rel===`stylesheet`))return}else if(document.querySelector(`link[href="${t}"]${i}`))return;let o=document.createElement(`link`);if(o.rel=r?`stylesheet`:oV,r||(o.as=`script`),o.crossOrigin=``,o.href=t,a&&o.setAttribute(`nonce`,a),document.head.appendChild(o),r)return new Promise((e,n)=>{o.addEventListener(`load`,e),o.addEventListener(`error`,()=>n(Error(`Unable to preload CSS for ${t}`)))})}))}function i(e){let t=new Event(`vite:preloadError`,{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(let e of t||[]){if(e.status!==`rejected`)continue;i(e.reason)}return e().catch(i)})};var{default:uV}=await lV(async()=>{let{default:e}=await import(`./MetaDimensionsTab-Bdn5LLJO.js`);return{default:e}},__vite__mapDeps([0,1,2,3,4,5,6])),{default:dV}=await lV(async()=>{let{default:e}=await import(`./MasteryStudiesTab-bH7teV44.js`);return{default:e}},__vite__mapDeps([7,1,2,8,9,10,11,5,12,13])),{default:fV}=await lV(async()=>{let{default:e}=await import(`./QuarksTab-CW-eSJD1.js`);return{default:e}},__vite__mapDeps([14,1,2,8,9,10,5,15,16,17,18])),{default:pV}=await lV(async()=>{let{default:e}=await import(`./PairProductionTab-CdkaRf9R.js`);return{default:e}},__vite__mapDeps([19,1,2,5,15,20])),{default:mV}=await lV(async()=>{let{default:e}=await import(`./QuantumChallengesTab-x1CI5KYl.js`);return{default:e}},__vite__mapDeps([21,1,2,22,11,5,15,23,9,10,24])),{default:hV}=await lV(async()=>{let{default:e}=await import(`./GluonUpgradesTab-Db6mFflI.js`);return{default:e}},__vite__mapDeps([25,1,2,8,9,10,26])),{default:gV}=await lV(async()=>{let{default:e}=await import(`./QuantumMilestonesTab-CXlif0HL.js`);return{default:e}},__vite__mapDeps([27,1,2,28])),_V=r({name:`GameUIComponent`,components:{AntimatterDimensionsTab:XF,InfinityDimensionsTab:DR,TimeDimensionsTab:IB,OptionsSavingTab:pz,OptionsVisualTab:yz,OptionsGameplayTab:lz,StatisticsTab:bB,ChallengeRecordsTab:uL,PastPrestigeRunsTab:Cz,GlyphSetRecordsTab:ML,SpeedrunMilestonesTab:_B,PreviousSpeedrunTab:Uz,NormalAchievementsTab:iz,SecretAchievementTab:pB,TeresaTab:CB,EffarigTab:_L,EnslavedTab:vL,VTab:aV,RaTab:Zz,LaitelaTab:RR,PelleTab:Rz,AutobuyersTab:xI,AutomatorTab:OI,NormalChallengesTab:sz,InfinityChallengesTab:bR,EternityChallengesTab:CL,InfinityUpgradesTab:kR,BreakInfinityTab:VI,ReplicantiTab:lB,TimeStudiesTab:WB,EternityUpgradesTab:jL,EternityMilestonesTab:DL,TimeDilationTab:OB,GlyphsTab:mR,RealityUpgradesTab:eB,ImaginaryUpgradesTab:_R,PerksTab:M,BlackHoleTab:LI,AlchemyTab:jF,CelestialNavigationTab:sL,ShopTab:mB,MultiplierBreakdownTab:QR,MetaDimensionsTab:uV,MasteryStudiesTab:dV,QuarksTab:fV,PairProductionTab:pV,QuantumChallengesTab:mV,GluonUpgradesTab:hV,QuantumMilestonesTab:gV,ClassicUi:TP,ModernUi:cF,GameUiComponentFixed:oF,BackgroundAnimations:NN,S12Ui:mF,S12UiFixed:SF,S12DesktopIcons:dF},computed:{view(){return this.$viewModel},isThemeS12(){return this.view.theme===`S12`},uiLayout(){return this.isThemeS12?`S12Ui`:this.view.newUI?`ModernUi`:`ClassicUi`},containerClass(){return this.view.newUI?`new-ui`:`old-ui`},page(){return Tabs.current[this.$viewModel.subtab].config.component},themeCss(){return`styles/theme-${this.view.theme}.css`}}}),vV=D(_V,function(){var e=this,t=e._self._c;return e._self._setupProxy,e.view.initialized?t(`div`,{staticClass:`ui-wrapper`,class:e.containerClass,attrs:{id:`ui-container`}},[t(`div`,{staticClass:`c-game-ui`,attrs:{id:`ui`}},[t(e.uiLayout,{tag:`component`},[t(e.page,{tag:`component`,staticClass:`c-game-tab`})],1),e.isThemeS12?t(`S12DesktopIcons`):e._e(),e.view.theme===`Normal`?e._e():t(`link`,{attrs:{type:`text/css`,rel:`stylesheet`,href:e.themeCss}})],1),e.isThemeS12?e._e():t(`GameUiComponentFixed`),e.isThemeS12?e._e():t(`BackgroundAnimations`),e.isThemeS12?t(`S12UiFixed`):e._e()],1):e._e()},[],!1,null,`68dbcd11`,null,null).exports;Vue.mixin({computed:{$viewModel(){return xN.view}},created(){this.update&&(this.on$(GAME_EVENT.UPDATE,this.update),bV.initialized&&this.update());let e=Object.create(null),t=this._computedWatchers;if(t){for(let n in t){if(!Object.hasOwn(t,n))continue;yV(t[n],n,e)}this.$recompute=t=>e[t]=!e[t],Vue.observable(e)}},destroyed(){EventHub.ui.offAll(this)},methods:{emitClick(){this.$emit(`click`)},emitInput(e){this.$emit(`input`,e)},emitClose(){this.$emit(`close`)},on$(e,t){EventHub.ui.on(e,t,this)},format(e,t,n){return format(e,t,n)},formatInt(e){return formatInt(e)},formatPercents(e,t){return formatPercents(e,t)},formatRarity(e){return formatRarity(e)},formatX(e,t,n){return formatX(e,t,n)},formatPlus(e,t,n){return formatPlus(e,t,n)},formatPow(e,t,n){return formatPow(e,t,n)},formatPostBreak(e,t,n){return formatPostBreak(e,t,n)},formatGain(e,t,n,r){return formatGain(e,t,n,r)},pluralize,quantify,quantifyInt}});function yV(e,t,n){let r=e.getter;n[t]=!0,e.getter=e=>(n[t],r.call(e,e))}const bV={notify:bN,events:[],flushPromise:void 0,initialized:!1,globalClickListener:null,touchDevice:`ontouchstart`in window||window.navigator.maxTouchPoints>0||window.navigator.msMaxTouchPoints>0||window.DocumentTouch&&document instanceof DocumentTouch,dispatch(e,t){let n=this.events.indexOf(e);n!==-1&&this.events.splice(n,1),e!==GAME_EVENT.UPDATE&&this.events.push([e,t]),!this.flushPromise&&(this.flushPromise=Promise.resolve().then(this.flushEvents.bind(this)))},flushEvents(){this.flushPromise=void 0;for(let e of this.events)EventHub.ui.dispatch(e[0],e[1]);EventHub.ui.dispatch(GAME_EVENT.UPDATE),this.events=[]},update(){this.dispatch(GAME_EVENT.UPDATE)}},xV=function(){let e=0;return{next:()=>e++}}();MM.options.defaultClass=`general-tooltip`,MM.options.popover.defaultBaseClass=`general-tooltip`,MM.options.defaultTemplate=`<div role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>`,Vue.use(MM),(function(){let e=Vue.config.optionMergeStrategies.methods;Vue.config.optionMergeStrategies.methods=(t,n,r,i)=>{let a=e(t,n,r,i),o=e=>e&&e.update;return!o(t)||!o(n)||(a.update=function(){t.update.call(this),n.update.call(this)}),a}})(),vN(Vue),yN(Vue),Vue.use(gN,{config:{id:`UA-77268961-1`}});const SV=new Vue({el:`#ui`,components:{GameUIComponent:vV},data:xN,computed:{notation(){return Notations.find(this.notationName)},lnotation(){return LNotations.find(this.lnotationName)},currentGlyphTooltip(){return this.view.tabs.reality.currentGlyphTooltip},scrollWindow(){return this.view.scrollWindow},newUI(){return this.view.newUI}},watch:{currentGlyphTooltip(e){e!==-1&&!bV.globalClickListener?(bV.globalClickListener=()=>{this.view.tabs.reality.currentGlyphTooltip=-1,document.removeEventListener(`click`,bV.globalClickListener),bV.globalClickListener=null},document.addEventListener(`click`,bV.globalClickListener)):e===-1&&bV.globalClickListener&&(document.removeEventListener(`click`,bV.globalClickListener),bV.globalClickListener=null)},scrollWindow(e,t){e!==0&&t===0&&this.scroll(Date.now())}},methods:{scroll(e){let t=Date.now();this.view.scrollWindow&&(window.scrollBy(0,this.view.scrollWindow*(t-e)/2),setTimeout(()=>this.scroll(t),20))}},render:e=>e(vV)}),CV=class extends it{constructor(e){super(e),this._row=Math.floor(this.id/10),this._column=this.id%10,this._bitmask=1<<this.column-1,this._inverseBitmask=~this._bitmask,this.registerEvents(e.checkEvent,e=>this.tryUnlock(e))}get name(){return this.config.name}get row(){return this._row}get column(){return this._column}get isPreReality(){return this.row<14}get isPrePelle(){return this.row<18}get isUnlocked(){return(player.achievementBits[this.row-1]&this._bitmask)!==0}get isDisabled(){return Pelle.isDisabled(`achievements`)&&Pelle.disabledAchievements.includes(this.id)}get isEffectActive(){return this.isUnlocked&&!this.isDisabled}tryUnlock(e){this.isUnlocked||this.config.checkRequirement(e)&&this.unlock()}lock(){player.achievementBits[this.row-1]&=this._inverseBitmask}unlock(e){this.isUnlocked||(player.achievementBits[this.row-1]|=this._bitmask,(this.id===85||this.id===93)&&Autobuyer.bigCrunch.bumpAmount(4),this.id===55&&!PlayerProgress.realityUnlocked()&&Modal.message.show(`Since you performed an Infinity in under a minute, the UI changed on the screen.
        Instead of the Dimensions disappearing, they stay and the Big Crunch button appears on top of them.
        This is purely visual, and is there to prevent flickering.`,{},3),(this.id===148||this.id===166)&&GameCache.staticGlyphWeights.invalidate(),e?GameUI.notify.reality(`Automatically unlocked: ${this.name}`):(GameUI.notify.success(`Achievement: ${this.name}`),Xn.activateAchievement(this.id)),player.speedrun.isActive&&!player.speedrun.achievementTimes[this.id]&&(player.speedrun.achievementTimes[this.id]=Math.floor(player.records.trueTimePlayed)),wV._power.invalidate(),EventHub.dispatch(GAME_EVENT.ACHIEVEMENT_UNLOCKED))}}.createAccessor(GameDatabase.achievements.normal),wV={all:CV.index.compact(),get preReality(){return wV.all.filter(e=>e.isPreReality)},get prePelle(){return wV.all.filter(e=>e.isPrePelle)},get allRows(){let e=wV.all.map(e=>e.row).nMax();return wV.rows(1,e)},get preRealityRows(){let e=wV.preReality.map(e=>e.row).nMax();return wV.rows(1,e)},get prePelleRows(){let e=wV.prePelle.map(e=>e.row).nMax();return wV.rows(1,e)},rows:(e,t)=>Array.range(e,t).map(wV.row),row:e=>Array.range(e*10+1,8).map(CV),get effectiveCount(){return wV.all.countWhere(e=>e.isUnlocked)},get period(){return GameCache.achievementPeriod.value},autoAchieveUpdate(e){if(PlayerProgress.realityUnlocked()){if(!player.reality.autoAchieve||RealityUpgrade(8).isLockingMechanics){player.reality.achTimer=Decimal.clampMax(player.reality.achTimer.add(e),this.period);return}if(!wV.preReality.every(e=>e.isUnlocked)&&(player.reality.achTimer=player.reality.achTimer.add(e),!player.reality.achTimer.lt(this.period))){for(let e of wV.preReality.filter(e=>!e.isUnlocked))if(e.unlock(!0),player.reality.achTimer=player.reality.achTimer.sub(this.period),player.reality.achTimer.lt(this.period))break;player.reality.gainedAutoAchievements=!0}}},get timeToNextAutoAchieve(){return!PlayerProgress.realityUnlocked()||GameCache.achievementPeriod.value.eq(0)||wV.preReality.countWhere(e=>!e.isUnlocked)===0?o.D0:this.period.sub(player.reality.achTimer)},_power:new Lazy(()=>{let e=wV.allRows.countWhere(e=>e.every(e=>e.isUnlocked)),t=Decimal.pow(1.25,e).mul(Decimal.pow(1.03,wV.effectiveCount)),n=getAdjustedGlyphEffect(`effarigachievement`).mul(Ra.unlocks.achievementPower.effectOrDefault(1));return t.pow(n)}),get power(){return Pelle.isDisabled(`achievementMult`)?o.D1:wV._power.value},updateSteamStatus(){for(let e of wV.all.filter(e=>e.isUnlocked))Xn.activateAchievement(e.id)}};EventHub.logic.on(GAME_EVENT.PERK_BOUGHT,()=>{player.reality.achTimer=Decimal.min(player.reality.achTimer,wV.period)});const TV=class extends it{constructor(e){super(e),this._row=Math.floor(this.id/10),this._column=this.id%10,this._bitmask=1<<this.column-1,this._inverseBitmask=~this._bitmask,this.registerEvents(e.checkEvent,e=>this.tryUnlock(e))}get name(){return this.config.name}get row(){return this._row}get column(){return this._column}get isUnlocked(){return(player.secretAchievementBits[this.row-1]&this._bitmask)!==0}tryUnlock(e){this.isUnlocked||this.config.checkRequirement(e)&&this.unlock()}unlock(){this.isUnlocked||(player.secretAchievementBits[this.row-1]|=this._bitmask,GameUI.notify.success(`Secret Achievement: ${this.name}`),EventHub.dispatch(GAME_EVENT.ACHIEVEMENT_UNLOCKED))}lock(){player.secretAchievementBits[this.row-1]&=this._inverseBitmask}}.createAccessor(GameDatabase.achievements.secret),EV={all:TV.index.compact(),get allRows(){let e=EV.all.map(e=>e.row).max();return EV.rows(1,e.toNumber())},rows:(e,t)=>Array.range(e,t).map(EV.row),row:e=>Array.range(e*10+1,8).map(TV)};var DV=class{constructor(e){this.time=o.D0,this.realTime=e}reset(){this.time=o.D0}advance(){let e=this.realTime?Time.realDeltaTime.totalSeconds:Time.trueDeltaTime.totalSeconds;this.time=this.time.add(e)}check(e,t){return e?(this.advance(),this.time.gte(t)):(this.reset(),!1)}};const OV={marathon1:new DV(!1),marathon2:new DV(!1),pain:new DV(!0),stats:new DV(!0)};var kV=class{constructor(e,t){this.id=e.id,this._defaultSymbol=e.regularGlyphSymbol??e.symbol,this._defaultColor=e.color,this.preventBlur=e.preventBlur??!1,this.isUnlocked=e.isUnlocked??!1,this._canCustomize=e.canCustomize??!0,this.fixedSymbolColor=e.fixedSymbolColor??e.setColor??!1,this.isCosmetic=t}get canCustomize(){return(!this.isCosmetic||(this.isUnlocked?.()??!0))&&(this._canCustomize?.()??!0)}get defaultSymbol(){return{symbol:this._defaultSymbol,blur:!this.preventBlur}}get defaultColor(){let e=this.id===`reality`?PV.realityColor:this._defaultColor,t=!PV.isLightBG;return{border:e,bg:t===(this.id===`cursed`)?`white`:`black`}}get currentSymbol(){let e=player.reality.glyphs.cosmetics.symbolMap[this.id];return!player.reality.glyphs.cosmetics.active||!e?this.defaultSymbol:{symbol:e,blur:!(this.preventBlur||PV.unblurredSymbols.includes(e))}}get currentColor(){let e=player.reality.glyphs.cosmetics.colorMap[this.id];return!player.reality.glyphs.cosmetics.active||!e?this.defaultColor:{...PV.getColorProps(e),str:e}}get ignoreRarityColor(){return this.isCosmetic||this.fixedSymbolColor}};function AV(){let e={...j};for(let t in j)j.glyphTypes.includes(t)||delete e[t];return e}var jV=mapGameDataToObject(AV(),e=>new kV(e,!1)),MV=mapGameDataToObject(GameDatabase.reality.cosmeticGlyphs,e=>new kV(e,!0));const NV={...jV,...MV,get list(){return Object.keys({...GameDatabase.reality.glyphTypes,...GameDatabase.reality.cosmeticGlyphs}).map(e=>NV[e])}},PV={setInModal:null,chosenFromModal:null,get cosmeticsEnabled(){return player.reality.glyphs.cosmetics.active},get symbolMap(){return player.reality.glyphs.cosmetics.symbolMap},get colorMap(){return player.reality.glyphs.cosmetics.colorMap},get availableSymbols(){return Object.values(GameDatabase.reality.glyphCosmeticSets).filter(e=>this.unlockedSets.includes(e.id)).map(e=>e.symbol).filter(e=>e)},get availableColors(){let e=Object.values(GameDatabase.reality.glyphCosmeticSets).filter(e=>this.unlockedSets.includes(e.id)).flatMap(e=>e.color).sort((e,t)=>{let n=e=>{let t=e.split(`#`)[1],n=[Number.parseInt(t.slice(0,2),16)/255,Number.parseInt(t.slice(2,4),16)/255,Number.parseInt(t.slice(4),16)/255],r=Math.min(...n),i=Math.max(...n);return i-r<.3?i:6+((n[0]===i?(n[1]-n[2])/(i-r):n[1]===i?2+(n[2]-n[1])/(i-r):4+(n[0]-n[1])/(i-r))+6)%6};return n(e)-n(t)}).filter(e=>e),t=e.filter(e=>e.charAt(0)===`B`),n=e.filter(e=>e.charAt(0)===`W`),r=t.length>n.length?t:n,i=t.length>n.length?n:t,a=[];for(let e=0;e<r.length;e++)e<i.length?a.push([r[e],i[e]]):a.push([r[e]]);return a},get availableTypes(){return Object.values(GameDatabase.reality.cosmeticGlyphs).map(e=>NV[e.id]).filter(e=>e.isUnlocked()).map(e=>e.id)},get unblurredSymbols(){return Object.values(GameDatabase.reality.glyphCosmeticSets).filter(e=>e.preventBlur).flatMap(e=>e.symbol)},get expectedSetCount(){return player.records.fullGameCompletions},get isLightBG(){switch(player.options.glyphBG){case GLYPH_BG_SETTING.AUTO:return!Theme.current().isDark();case GLYPH_BG_SETTING.LIGHT:return!0;case GLYPH_BG_SETTING.DARK:return!1;default:throw Error(`Unrecognized Glyph BG setting`)}},getBorderColor(e){return e===`cursed`&&!NV.cursed.currentColor.str?this.isLightBG?`#ffffff`:`#000000`:NV[e].currentColor.border},getRarityColor(e,t){let n=getRarity(e),r=`${NV[t].currentColor.bg===`white`?`light`:`dark`}${player.options.highContrastRarity?`HighContrast`:`Color`}`;return n[r]},getColorProps(e){return e?.charAt(1)===`#`?{border:e.slice(1),bg:e.charAt(0)===`B`?`black`:`white`}:{border:e,bg:this.isLightBG?`white`:`black`}},getBaseColor(e){let t=!this.isLightBG;return e?t?`white`:`black`:t?`black`:`white`},get realityColor(){let e=[182,100,34,3,178,182],t=[127,221,170,169,65,127],n=[51,23,72,244,227,51],r=Date.now()%1e4,i=Math.floor(r/2e3),a=r/2e3-i;return`rgb(${e[i]*(1-a)+e[i+1]*a},
      ${t[i]*(1-a)+t[i+1]*a},
      ${n[i]*(1-a)+n[i+1]*a})`},get unlockedSets(){return[...new Set(player.reality.glyphs.cosmetics.unlockedFromNG)]},get lockedSets(){return Object.keys(GameDatabase.reality.glyphCosmeticSets).filter(e=>!this.unlockedSets.includes(e))},unlockSet(){let e=this.lockedSets,t=PV.chosenFromModal?.id,n;if(t&&e.includes(t))n=t;else if(!t&&e.length>0)n=e[Math.floor(Math.random()*e.length)];else return;player.reality.glyphs.cosmetics.unlockedFromNG.push(n);let r=GameDatabase.reality.glyphCosmeticSets[n];GameUI.notify.info(`You have unlocked the "${r.name}" Set for Glyph cosmetics!`,1e4),PV.chosenFromModal=null,this.applyNotification()},applyNotification(){TabNotification.newGlyphCosmetic.clearTrigger(),TabNotification.newGlyphCosmetic.tryTrigger(),player.reality.glyphs.cosmetics.glowNotification=!0},clearInvalidCosmetics(){let e=player.reality.glyphs.active.concat(player.reality.glyphs.inventory),t=new Set(PV.availableSymbols.flat()),n=new Set(PV.availableSymbols.flat());for(let r of e)t.has(r.symbol)||(r.symbol=void 0),n.has(r.color)||(r.color=void 0),PV.availableTypes.includes(r.cosmetic)||(r.cosmetic=void 0);let r=player.reality.glyphs.cosmetics;for(let e of Object.keys(r.symbolMap)){let n=r.symbolMap[e];t.has(n)||(r.symbolMap[e]=void 0)}for(let e of Object.keys(r.colorMap)){let t=r.symbolMap[e];n.has(t)||(r.colorMap[e]=void 0)}}};var FV=class{constructor(e,t){this._id=e,this._adjustApply=t.adjustApply}applyEffect(e){let t=RV(this._id);this._adjustApply!==void 0&&(t=this._adjustApply(t)),e(t)}};const IV={dimBoostPower:new FV(`powerdimboost`,{adjustApply:e=>Decimal.max(1,e)}),ipMult:new FV(`infinityIP`,{adjustApply:e=>Decimal.max(1,e)}),epMult:new FV(`timeEP`,{adjustApply:e=>Decimal.max(1,e)})};function LV(e){return VV(e).value}function RV(e){return new Decimal(GameCache.glyphEffects.value[e])}function zV(e){return GlyphEffects[e].conversion(RV(e))}function BV(e){if(!orderedEffectList.includes(e))throw Error(`Unknown Glyph effect requested "${e}"'`);return player.reality.glyphs.active.filter(t=>t.effects.includes(e)).map(t=>GV(e,t))}function VV(e){return GlyphEffects[e].combine(BV(e))}function HV(e){let t=``,n=``;for(let r=0;r<GlyphInfo.glyphTypes.length;r++)if(e.slice(0,GlyphInfo.glyphTypes[r].length)===GlyphInfo.glyphTypes[r]){t=GlyphInfo.glyphTypes[r],n=e.slice(GlyphInfo.glyphTypes[r].length);break}return[t,n]}function UV(e,t,n,r){let i=bC.isDoomed&&r!==`companion`?bC.glyphStrength:n;return getGlyphEffectsFromBitmask(e).map(e=>({id:e.id,value:e.effect(t,i)}))}function WV(e,t,n,r){let i=bC.isDoomed&&r!==`companion`?bC.glyphStrength:n;return getGlyphEffectsFromArray(e).map(e=>({id:e.id,value:e.effect(t,i)}))}function GV(e,t){let n=GlyphEffects[e];if(t.effects.includes(e))return n.effect(getAdjustedGlyphLevel(t),bC.isDoomed?bC.glyphStrength:t.strength)}function KV(e){let t=0,n=e;for(;n!==0;)t+=n&1,n>>=1;return t}function qV(){let e=orderedEffectList.map(e=>({effect:e,values:BV(e)})).filter(e=>e.values.length>0).map(e=>({id:e.effect,value:GlyphEffects[e.effect].combine(e.values)})),t=new Set(e.map(e=>e.id)),n=[`cursedgalaxies`,`curseddimensions`,`cursedEP`],r=[`realitygalaxies`,`effarigdimensions`,`timeEP`],i=[te.multiply,te.multiply,te.multiplyDecimal];for(let a=0;a<n.length;a++)if(t.has(n[a])&&t.has(r[a])){let t=i[a]([RV(n[a]),RV(r[a])]);Decimal.lt(t,1)?(e=e.filter(e=>e.id!==r[a]),e.filter(e=>e.id===n[a])[0].value.value=t):(e=e.filter(e=>e.id!==n[a]),e.filter(e=>e.id===r[a])[0].value.value=t)}return e}var JV=class e{static get SECOND_GAUSSIAN_DEFAULT_VALUE(){return 1e6}constructor(e,t){this.seed=e,this.secondGaussian=t}uniform(){let e=xorshift32Update(this.seed);return this.seed=e,e*23283064365386963e-26+.5}normal(){if(this.secondGaussian!==e.SECOND_GAUSSIAN_DEFAULT_VALUE){let t=this.secondGaussian;return this.secondGaussian=e.SECOND_GAUSSIAN_DEFAULT_VALUE,t}let t=0,n=0,r=0;do t=this.uniform()*2-1,n=this.uniform()*2-1,r=t*t+n*n;while(r>=1||r===0);return r=Math.sqrt(-2*Math.log(r)/r),this.secondGaussian=n*r,t*r}finalize(){throw new NotImplementedError}get isFake(){throw new NotImplementedError}};const YV={uniformityGroups:j.basicGlyphTypes.length,get isUniformityActive(){return player.realities.lte(5*this.uniformityGroups)},fakeSeed:Date.now()%2**32,fakeSecondGaussian:null,RealGlyphRNG:class extends JV{constructor(){super(player.reality.seed,player.reality.secondGaussian)}finalize(){player.reality.seed=this.seed,player.reality.secondGaussian=this.secondGaussian}get isFake(){return!1}},FakeGlyphRNG:class extends JV{constructor(){super(YV.fakeSeed,YV.fakeSecondGaussian)}finalize(){YV.fakeSeed=this.seed,YV.fakeSecondGaussian=this.secondGaussian}get isFake(){return!0}},MusicGlyphRNG:class extends JV{constructor(){super(player.reality.musicSeed,player.reality.musicSecondGaussian)}finalize(){player.reality.musicSeed=this.seed,player.reality.musicSecondGaussian=this.secondGaussian}get isFake(){return!1}},startingGlyph(e){return{id:void 0,idx:null,type:`power`,strength:1.5,level:e.actualLevel,rawLevel:e.rawLevel,effects:[`powerpow`]}},randomGlyph(e,t,n=null,r=[]){let i=t||new YV.RealGlyphRNG,a=this.randomStrength(i),o=n||this.randomType(i),s=this.randomNumberOfEffects(o,a,e.actualLevel,i),c=j[o].effects().length;o!==`effarig`&&s>c&&(s=c);let l=this.generateEffects(o,s,i,r);return t===void 0&&i.finalize(),{id:void 0,idx:null,type:o,strength:a,level:e.actualLevel,rawLevel:e.rawLevel,effects:l}},realityGlyph(e){e??=AlchemyResource.reality.effectValue;let t=rarityToStrength(100),n=this.generateRealityEffects(e);return{id:void 0,idx:null,type:`reality`,strength:t,level:e,rawLevel:e,effects:n}},cursedGlyph(){let e=rarityToStrength(100),t=j.cursed.effects().map(e=>e.id);return{id:void 0,idx:null,type:`cursed`,strength:e,level:new Decimal(6666),rawLevel:new Decimal(6666),effects:t}},doomedGlyph(e){let t=GlyphEffects.all.filter(t=>t.id.startsWith(e));t.push(GlyphEffects.timespeed);let n=Decimal.max(player.records.bestReality.glyphLevel,5e3);return{id:void 0,idx:null,type:e,strength:3.5,level:n,rawLevel:n,effects:t}},companionGlyph(e){let t=rarityToStrength(e.max(1).log10().div(1e6)),n=j.companion.effects();return{id:void 0,idx:null,type:`companion`,strength:t,level:1,rawLevel:1,effects:n}},musicGlyph(){let e=new YV.MusicGlyphRNG,t=this.randomGlyph({actualLevel:player.records.bestReality.glyphLevel.mul(.8).floor(),rawLevel:o.D1},e);return e.finalize(),t.cosmetic=`music`,t.fixedCosmetic=`music`,t},makeID(){return this.maxID+1},get maxID(){return player.reality.glyphs.active.concat(player.reality.glyphs.inventory).reduce((e,t)=>Math.max(e,t.id),0)},get strengthMultiplier(){return Effects.max(new Decimal(1),RealityUpgrade(16))},randomStrength(e){if(Ra.unlocks.maxGlyphRarityAndShardSacrificeBoost.canBeApplied)return rarityToStrength(100);let t=YV.strengthMultiplier.mul(YV.gaussianBellCurve(e)),n=Ra.unlocks.extraGlyphChoicesAndRelicShardRarityAlwaysMax.canBeApplied?new Decimal(1):e.uniform(),r=Effarig.maxRarityBoost.mul(n).add(Effects.sum(Achievement(146)).add(j.effarig.sacrificeInfo.effect()));return t=t.add(r.div(40)),t=Decimal.ceil(t.times(400)).div(400),Decimal.min(t,rarityToStrength(100))},randomNumberOfEffects(e,t,n,r){let i=r.uniform(),a=r.uniform();if(j[e].effects().length<=4&&Ra.unlocks.glyphEffectCount.canBeApplied)return j[e].effects().length;let s=!Ra.unlocks.glyphEffectCount.canBeApplied&&e===`effarig`?4:j[e].effects().length,c=Decimal.min(s,Decimal.floor(Decimal.pow(i,o.D1.sub(Decimal.pow(n.times(t),.5).div(100))).times(1.5).add(1))).min(250).toNumber();return RealityUpgrade(17).isBought&&a<Effects.max(0,RealityUpgrade(17)).toNumber()&&(c=Math.min(c+1,s)),Ra.unlocks.glyphEffectCount.canBeApplied?Math.max(c,4):c},generateRealityEffects(e){let t=realityGlyphEffectLevelThresholds.filter(t=>e.gte(t)).length;return j.reality.effects().sort((e,t)=>e.intID-t.intID).map(e=>e.id).slice(0,t)},generateEffects(e,t,n,r=[]){let i=j[e].effects(),a=i.mapToObject(e=>e.intID,()=>n.uniform());if(Array.range(0,250-i.length).forEach(()=>n.uniform()),e===`effarig`){let e=a[20]<a[21]?20:21;a[e]=-1}for(let e of[0,12,16])e in a&&(a[e]=2);for(let t=0;t<r.length;t++)a[j[e].effects().filter(e=>e.id===r[t])[0].intID]=2;j[e].primaryEffect!==void 0&&(t=Math.max(t,r.length+1));let o=Object.keys(a).sort((e,t)=>a[t]-a[e]).slice(0,t);for(let e=0;e!==o.length;e++)o[e]=GlyphEffects.all[o[e]].id;return o},randomType(e,t=[]){let n=generatedTypes.filter(e=>(j[e].isGenerated??!1)&&(j[e].generationRequirement?j[e].generationRequirement():!0)),r=n.map(e=>t.countWhere(t=>t===e)).max(),i=t.length===0?[]:n.filter(e=>t.countWhere(t=>t===e)===r),a=generatedTypes.filter(e=>n.includes(e)&&!i.includes(e));return a[Math.floor(e.uniform()*a.length)]},uniformGlyphSelections(e,t,n){let r=j.basicGlyphTypes.length,i=Decimal.floor(n.sub(1).max(0).div(r)).clampMax(r*this.uniformityGroups+1).toNumber(),a=n.floor().sub(1).mod(r).toNumber();a<0&&(a+=r);let o=player.reality.initialSeed,s=permutationIndex(r,i*(31+o%7)+o%1123),c=[...j.basicGlyphTypes];for(;c.length<GlyphSelection.choiceCount;)c=[...c,...j.basicGlyphTypes];for(;c.length>GlyphSelection.choiceCount;){for(;a.length<=a;)a--;c.splice(s[a],1),a--}let l=[];for(let e=0;e<=GlyphSelection.choiceCount-1;e++)a=permutationIndex(j[c[e]].effects().length,(7+o%5)*i+o%11)[n.add(j[c[e]].effects().length-1).mod(j[c[e]].effects().length).toNumber()],l.push(j[c[e]].effects()[a].id);let u=[];for(let n=0;n<=GlyphSelection.choiceCount-1;n++)u.push(this.randomGlyph(e,t,c[n],[l[n]]));return u},getRNG(e){return e?new YV.FakeGlyphRNG:new YV.RealGlyphRNG},gaussianBellCurve(e){let t=Math.sqrt(Math.abs(e.normal(),0)+1);return-.111749606737+t*(.900603878243551+t*(.229108274476697+t*-.017962545983249))},copy(e){return e&&Ut({},e)}},XV={maxSacrificeForEffects:o.E100,get logTotalSacrifice(){return GlyphInfo.basicGlyphTypes.reduce((e,t)=>e instanceof Decimal?e.add(Decimal.log10(Decimal.max(player.reality.glyphs.sac[t],1),0)):(Decimal.log10(Decimal.max(player.reality.glyphs.sac[t],1)),0))},get canSacrifice(){return RealityUpgrade(19).isBought},get isRefining(){return Ra.unlocks.unlockGlyphAlchemy.canBeApplied&&AutoGlyphProcessor.sacMode!==AUTO_GLYPH_REJECT.SACRIFICE},handleSpecialGlyphTypes(e){switch(e.type){case`companion`:return Modal.deleteCompanion.show(),!0;case`cursed`:return Glyphs.removeFromInventory(e),!0}return!1},removeGlyph(e,t=!1){this.handleSpecialGlyphTypes(e)||(this.canSacrifice?this.isRefining?this.attemptRefineGlyph(e,t):this.sacrificeGlyph(e,t):this.deleteGlyph(e,t))},deleteGlyph(e,t){t||!player.options.confirmations.glyphSacrifice?Glyphs.removeFromInventory(e):Modal.glyphDelete.show({idx:e.idx})},glyphSacrificeGain(e){if(!this.canSacrifice||Pelle.isDoomed)return o.D0;if(e.type===`reality`)return e.level.mul(Achievement(171).effectOrDefault(1)).div(100);let t=Decimal.pow(Decimal.clampMax(e.level,1e4).add(10),2.5),n=Decimal.clampMin(Decimal.sub(e.level,1e4),0).div(100).add(1),r=Ra.unlocks.maxGlyphRarityAndShardSacrificeBoost.effectOrDefault(1);return Decimal.pow(t.mul(n).mul(e.strength).mul(Teresa.runRewardMultiplier).mul(Achievement(171).effectOrDefault(1)),r)},sacrificeGlyph(e,t=!1){if(Pelle.isDoomed||this.handleSpecialGlyphTypes(e))return;let n=this.glyphSacrificeGain(e);if(!t&&player.options.confirmations.glyphSacrifice){Modal.glyphSacrifice.show({idx:e.idx,gain:n});return}player.reality.glyphs.sac[e.type]=player.reality.glyphs.sac[e.type].add(n),GameCache.logTotalGlyphSacrifice.invalidate(),Glyphs.removeFromInventory(e),EventHub.dispatch(GAME_EVENT.GLYPH_SACRIFICED,e)},glyphAlchemyResource(e){let t=GlyphInfo[e.type];return AlchemyResources.all[t.alchemyResource]},levelRefinementValue(e){return Decimal.pow(e,3).div(1e8)},glyphRefinementEfficiency:.05,glyphRawRefinementGain(e){if(!Ra.unlocks.unlockGlyphAlchemy.canBeApplied)return o.D0;let t=this.levelRefinementValue(e.level),n=strengthToRarity(e.strength).div(100);return t.mul(this.glyphRefinementEfficiency).mul(n)},glyphRefinementGain(e){if(!Ra.unlocks.unlockGlyphAlchemy.canBeApplied||!generatedTypes.includes(e.type))return o.D0;let t=this.glyphAlchemyResource(e);if(!t.isUnlocked)return o.D0;let n=this.glyphRawRefinementGain(e);if(t.cap.eq(o.D0))return n;let r=this.glyphEffectiveCap(e).sub(t.amount);return Decimal.clamp(r,0,n)},glyphEffectiveCap(e){let t=this.glyphAlchemyResource(e).cap,n=this.highestRefinementValue(e),r=Decimal.clampMin(t,n);return Decimal.clampMax(r,Ra.alchemyResourceCap)},highestRefinementValue(e){return this.glyphRawRefinementGain(e).div(this.glyphRefinementEfficiency)},attemptRefineGlyph(e,t){if(e.type===`reality`)return;if(e.type===`cursed`){Glyphs.removeFromInventory(e);return}let n=AlchemyResource.decoherence.isUnlocked;if(!Ra.unlocks.unlockGlyphAlchemy.canBeApplied||this.glyphRefinementGain(e).eq(o.D0)&&!n||n&&AlchemyResources.base.every(e=>e.data.amount.gte(Ra.alchemyResourceCap))){this.sacrificeGlyph(e,t);return}if(!player.options.confirmations.glyphRefine||t){this.refineGlyph(e);return}Modal.glyphRefine.show({idx:e.idx})},refineGlyph(e){if(Pelle.isDoomed)return;let t=this.glyphAlchemyResource(e);if(!t.isUnlocked){Glyphs.removeFromInventory(e);return}let n=this.glyphRawRefinementGain(e),r=this.glyphRefinementGain(e);t.amount=t.amount.add(r);let i=n.mul(AlchemyResource.decoherence.effectValue);for(let t of GlyphInfo.alchemyGlyphTypes)if(t!==e.type){let e=GlyphInfo[t],n=AlchemyResources.all[e.alchemyResource],r=Decimal.max(n.cap,n.amount);n.amount=Decimal.clampMax(n.amount.add(i),r)}t.isBaseResource&&(t.highestRefinementValue=this.highestRefinementValue(e)),Glyphs.removeFromInventory(e)}},ZV={get scoreMode(){return player.reality.glyphs.filter.select},set scoreMode(e){player.reality.glyphs.filter.select=e},get sacMode(){return player.reality.glyphs.filter.trash},set sacMode(e){player.reality.glyphs.filter.trash=e},get types(){return player.reality.glyphs.filter.types},bitmaskIndexOffset(e){switch(e){case`time`:return 0;case`dilation`:return 4;case`replication`:return 8;case`infinity`:return 12;case`power`:return 16;case`effarig`:return 20;default:throw Error(`Unknown glyph type mode in bitmaskIndexOffset`)}},filterValue(e){let t=this.types[e.type];if([`companion`,`reality`].includes(e.type))return new Decimal(1/0);if(e.type===`cursed`)return new Decimal(-1/0);switch(this.scoreMode){case AUTO_GLYPH_SCORE.LOWEST_SACRIFICE:return player.reality.glyphs.sac[e.type].gte(GlyphInfo[e.type].sacrificeInfo.cap)?new Decimal(-1/0):player.reality.glyphs.sac[e.type].mul(-1);case AUTO_GLYPH_SCORE.EFFECT_COUNT:return strengthToRarity(e.strength).div(1e3).add(getGlyphEffectsFromArray(e.effects).length);case AUTO_GLYPH_SCORE.RARITY_THRESHOLD:return strengthToRarity(e.strength);case AUTO_GLYPH_SCORE.SPECIFIED_EFFECT:{let n=e.effects.length;if(n<t.effectCount)return strengthToRarity(e.strength).sub(200*(t.effectCount-n));let r=countValuesFromBitmask(t.specifiedMask-(t.specifiedMask&e.effects));return strengthToRarity(e.strength).sub(200*r)}case AUTO_GLYPH_SCORE.EFFECT_SCORE:{let n=getGlyphEffectsFromArray(e.effects,0,0).map(e=>t.effectScores[e]?t.effectScores[e]:0).sum();return strengthToRarity(e.strength).add(n)}case AUTO_GLYPH_SCORE.LOWEST_ALCHEMY:{let t=AlchemyResource[e.type],n=GlyphSacrificeHandler.glyphRefinementGain(e);return t.isUnlocked&&n.gt(0)?t.amount.neg():new Decimal(-1/0)}case AUTO_GLYPH_SCORE.ALCHEMY_VALUE:return AlchemyResource[e.type].isUnlocked?GlyphSacrificeHandler.glyphRefinementGain(e):new Decimal(-1/0);default:throw Error(`Unknown glyph score mode in score assignment`)}},thresholdValue(e){if(this.types[e.type]===void 0)return o.BEMAX.neg();switch(this.scoreMode){case AUTO_GLYPH_SCORE.EFFECT_COUNT:return player.reality.glyphs.filter.simple;case AUTO_GLYPH_SCORE.RARITY_THRESHOLD:case AUTO_GLYPH_SCORE.SPECIFIED_EFFECT:return this.types[e.type].rarity;case AUTO_GLYPH_SCORE.EFFECT_SCORE:return this.types[e.type].score;case AUTO_GLYPH_SCORE.LOWEST_SACRIFICE:case AUTO_GLYPH_SCORE.LOWEST_ALCHEMY:case AUTO_GLYPH_SCORE.ALCHEMY_VALUE:return o.BEMAX;default:throw Error(`Unknown glyph score mode in threshold check`)}},wouldKeep(e){return this.filterValue(e).gte(this.thresholdValue(e))},pick(e){let t=e=>{let t=this.filterValue(e),n=this.thresholdValue(e);return Decimal.gte(n,Number.MAX_VALUE)?t:Decimal.sub(t,n)};return e.map(e=>({glyph:e,score:t(e)})).reduce((e,t)=>e.score.gt(t.score)?e:t).glyph},getRidOfGlyph(e){if(e.type===`cursed`||e.type===`companion`){GlyphSacrificeHandler.deleteGlyph(e,!0);return}switch(this.sacMode){case AUTO_GLYPH_REJECT.SACRIFICE:GlyphSacrificeHandler.sacrificeGlyph(e,!0);break;case AUTO_GLYPH_REJECT.REFINE:GlyphSacrificeHandler.attemptRefineGlyph(e,!0);break;case AUTO_GLYPH_REJECT.REFINE_TO_CAP:GlyphSacrificeHandler.glyphRefinementGain(e)===0?GlyphSacrificeHandler.sacrificeGlyph(e,!0):GlyphSacrificeHandler.attemptRefineGlyph(e,!0);break;default:throw Error(`Unknown auto Glyph Sacrifice mode`)}},hasNegativeEffectScore(){return this.scoreMode===AUTO_GLYPH_SCORE.EFFECT_SCORE&&Object.values(this.types).map(e=>e.effectScores.min()).min()<0},filterModeName(e){switch(e){case AUTO_GLYPH_SCORE.LOWEST_SACRIFICE:return`Lowest Total Glyph Sacrifice`;case AUTO_GLYPH_SCORE.EFFECT_COUNT:return`Number of Effects`;case AUTO_GLYPH_SCORE.RARITY_THRESHOLD:return`Rarity Threshold`;case AUTO_GLYPH_SCORE.SPECIFIED_EFFECT:return`Specified Effect`;case AUTO_GLYPH_SCORE.EFFECT_SCORE:return`Effect Score`;case AUTO_GLYPH_SCORE.LOWEST_ALCHEMY:return`Lowest Alchemy Resource`;case AUTO_GLYPH_SCORE.ALCHEMY_VALUE:return`Refinement Value`;default:return`Invalid Glyph filter mode`}},trashModeDesc(e){switch(e){case AUTO_GLYPH_REJECT.SACRIFICE:return`Always sacrifice`;case AUTO_GLYPH_REJECT.REFINE:return`Always refine`;case AUTO_GLYPH_REJECT.REFINE_TO_CAP:return`Refine to cap, then sacrifice`;default:return`Invalid Glyph trash mode`}}};function QV(){let e=$V(),t=e=>Decimal.pow(Decimal.clampMin(1,Decimal.log10(e.mul(5))),3/2),n=Object.values(e).map(e=>t(e.value)).sum(),r=r=>t(e[r].value).div(n).mul(100).clampMax(100).toNumber(),i=[`ep`,`repl`,`dt`,`eternities`],a=[];for(let e of i)a.push({key:e,percent:r(e)});let o=e=>e-Math.floor(e),s=a.sort((e,t)=>o(t.percent)-o(e.percent)).map(e=>e.key),c=100-a.map(e=>Math.floor(e.percent)).reduce((e,t)=>e+t);for(let e=0;e<i.length;e++){let t=s[e];player.celestials.effarig.glyphWeights[t]=Math.floor(r(t))+(e<c?1:0)}}function $V(){let e=Player.canEternity?Currency.eternityPoints.value.plus(gainedEternityPoints()):Currency.eternityPoints.value;e=Decimal.max(player.records.thisReality.maxEP,e);let t=.016,n=Decimal.pow(Decimal.max(1,e.add(1).log10()),.5).mul(t),r=getAdjustedGlyphEffect(`replicationglyphlevel`).add(.4),i=.025,a=Decimal.pow(Decimal.max(1,player.records.thisReality.maxReplicanti.max(1).log10()),r).mul(i),o=Decimal.add(getAdjustedGlyphEffect(`realityDTglyph`),1.3),s=.025,c=Decimal.pow(Decimal.max(1,player.records.thisReality.maxDT.add(1).log10()),o).mul(s),l=Effects.max(new Decimal(1),RealityUpgrade(18));return{ep:{name:`EP`,value:n,coeff:new Decimal(t),exp:new Decimal(.5)},repl:{name:`Replicanti`,value:a,coeff:new Decimal(i),exp:new Decimal(r)},dt:{name:`DT`,value:c,coeff:new Decimal(s),exp:new Decimal(o)},eternities:{name:`Eternities`,value:l,coeff:new Decimal(.45),exp:new Decimal(.5)}}}function eH(){let e=$V(),t=GameCache.staticGlyphWeights.value,n=player.celestials.effarig.glyphWeights,r=(e,t)=>{let n=e.value,r=Decimal.pow(4*t,.3333333333333333);e.value=n.gt(0)?Decimal.pow(n.mul(5),r).div(5):new Decimal,e.coeff=Decimal.pow(5,r.sub(1)).mul(Decimal.pow(e.coeff,r)),e.exp=e.exp.mul(r)};r(e.ep,n.ep/100),r(e.repl,n.repl/100),r(e.dt,n.dt/100),r(e.eternities,n.eternities/100);let i=Ra.unlocks.relicShardGlyphLevelBoost.effectOrDefault(new Decimal),a=e.ep.value.mul(e.repl.value).mul(e.dt.value).mul(e.eternities.value).mul(t.perkShop).add(i),s=SingularityMilestone.glyphLevelFromSingularities.effectOrDefault(1);a=a.mul(s);let c=a,l=(e,t,n)=>{if(e.lt(t))return e;let r=e.sub(t).div(n);return t.plus(n.div(2).times(Decimal.sqrt(r.times(4).add(1)).sub(1)))};c=l(c,t.instability,new Decimal(500)),c=l(c,t.hyperInstability,new Decimal(400));let u=c.gt(0)?a.div(c):o.D1,d=t.achievements.add(t.realityUpgrades);return a=a.add(d),c=c.add(d),{ep:e.ep,repl:e.repl,dt:e.dt,eter:e.eternities,perkShop:t.perkShop,scalePenalty:u,rowFactor:t.realityUpgrades,achievementFactor:t.achievements,shardFactor:i,singularityEffect:s,rawLevel:a,actualLevel:Decimal.max(1,c)}}function tH(){let e=PerkShopUpgrade.glyphLevel.effectOrDefault(o.D1),t=Glyphs.instabilityThreshold,n=Glyphs.hyperInstabilityThreshold,r=[Array.range(1,5).every(e=>RealityUpgrade(e).boughtAmount.gt(0))].concat(Array.range(1,4).map(e=>Array.range(1,5).every(t=>RealityUpgrade(5*e+t).isBought))).filter(e=>e).length,i=Effects.sum(Achievement(148),Achievement(166));return{perkShop:e,instability:t,hyperInstability:n,realityUpgrades:r,achievements:i}}const nH={deltaTime:new TimeSpan(new Decimal(0)),realDeltaTime:new TimeSpan(new Decimal(0)),trueDeltaTime:new TimeSpan(new Decimal(0)),update(e,t,n){this.trueDeltaTime=TimeSpan.fromMilliseconds(new Decimal(e)),this.realDeltaTime=TimeSpan.fromMilliseconds(t),this.deltaTime=TimeSpan.fromMilliseconds(n)}},rH={fromMilliseconds(e){return TimeSpan.fromMilliseconds(e())},toMilliseconds(e,t){Guard.isTimeSpan(e),t(e.totalMilliseconds)},toDateTimeString(e){return new Date(e).toString().replace(/^.{4}(.*:..:..).*$/u,`$1`)},get deltaTimeFull(){return nH.deltaTime},get deltaTime(){return this.deltaTimeFull.totalSeconds},get deltaTimeMs(){return this.deltaTimeFull.totalMilliseconds},get realDeltaTime(){return nH.realDeltaTime},get trueDeltaTime(){return nH.trueDeltaTime},get totalTimePlayed(){return this.fromMilliseconds(()=>player.records.totalTimePlayed)},set totalTimePlayed(e){this.toMilliseconds(e,e=>player.records.totalTimePlayed=e)},get timeSinceBlackHole(){return this.fromMilliseconds(()=>{let e=player.records.totalTimePlayed.sub(player.records.timePlayedAtBHUnlock);return Decimal.max(0,e)})},get realTimeDoomed(){return this.fromMilliseconds(()=>player.records.realTimeDoomed)},set realTimeDoomed(e){this.toMilliseconds(e,e=>player.records.realTimeDoomed=e)},get realTimePlayed(){return this.fromMilliseconds(()=>player.records.realTimePlayed)},set realTimePlayed(e){this.toMilliseconds(e,e=>player.records.realTimePlayed=e)},get thisInfinity(){return this.fromMilliseconds(()=>player.records.thisInfinity.time)},set thisInfinity(e){this.toMilliseconds(e,e=>player.records.thisInfinity.time=e)},get thisInfinityRealTime(){return this.fromMilliseconds(()=>player.records.thisInfinity.realTime)},set thisInfinityRealTime(e){this.toMilliseconds(e,e=>player.records.thisInfinity.realTime=e)},get thisInfinityTrueTime(){return this.fromMilliseconds(()=>new Decimal(player.records.thisInfinity.trueTime))},set thisInfinityTrueTime(e){this.toMilliseconds(e,e=>player.records.thisInfinity.trueTime=e.toNumber())},get bestInfinity(){return this.fromMilliseconds(()=>player.records.bestInfinity.time)},set bestInfinity(e){this.toMilliseconds(e,e=>player.records.bestInfinity.time=e)},get bestInfinityRealTime(){return this.fromMilliseconds(()=>player.records.bestInfinity.realTime)},set bestInfinityRealTime(e){this.toMilliseconds(e,e=>player.records.bestInfinity.realTime=e)},get thisEternity(){return this.fromMilliseconds(()=>player.records.thisEternity.time)},set thisEternity(e){this.toMilliseconds(e,e=>player.records.thisEternity.time=e)},get thisEternityRealTime(){return this.fromMilliseconds(()=>player.records.thisEternity.realTime)},set thisEternityRealTime(e){this.toMilliseconds(e,e=>player.records.thisEternity.realTime=e)},get thisEternityTrueTime(){return this.fromMilliseconds(()=>new Decimal(player.records.thisEternity.trueTime))},set thisEternityTrueTime(e){this.toMilliseconds(e,e=>player.records.thisEternity.trueTime=e.toNumber())},get bestEternity(){return this.fromMilliseconds(()=>player.records.bestEternity.time)},set bestEternity(e){this.toMilliseconds(e,e=>player.records.bestEternity.time=e)},get bestEternityRealTime(){return this.fromMilliseconds(()=>player.records.bestEternity.realTime)},set bestEternityRealTime(e){this.toMilliseconds(e,e=>player.records.bestEternity.realTime=e)},get thisQuantum(){return this.fromMilliseconds(()=>player.records.thisQuantum.time)},set thisQuantum(e){this.toMilliseconds(e,e=>player.records.thisQuantum.time=e)},get thisQuantumRealTime(){return this.fromMilliseconds(()=>player.records.thisQuantum.realTime)},set thisQuantumRealTime(e){this.toMilliseconds(e,e=>player.records.thisQuantum.realTime=e)},get thisQuantumTrueTime(){return this.fromMilliseconds(()=>new Decimal(player.records.thisQuantum.trueTime))},set thisQuantumTrueTime(e){this.toMilliseconds(e,e=>player.records.thisQuantum.trueTime=e.toNumber())},get bestQuantum(){return this.fromMilliseconds(()=>player.records.bestQuantum.time)},set bestQuantum(e){this.toMilliseconds(e,e=>player.records.bestQuantum.time=e)},get bestQuantumRealTime(){return this.fromMilliseconds(()=>player.records.bestQuantum.realTime)},set bestQuantumRealTime(e){this.toMilliseconds(e,e=>player.records.bestQuantum.realTime=e)},get thisReality(){return this.fromMilliseconds(()=>player.records.thisReality.time)},set thisReality(e){this.toMilliseconds(e,e=>player.records.thisReality.time=e)},get thisRealityRealTime(){return this.fromMilliseconds(()=>player.records.thisReality.realTime)},set thisRealityRealTime(e){this.toMilliseconds(e,e=>player.records.thisReality.realTime=e)},get bestReality(){return this.fromMilliseconds(()=>player.records.bestReality.time)},set bestReality(e){this.toMilliseconds(e,e=>player.records.bestReality.time=e)},get bestRealityRealTime(){return this.fromMilliseconds(()=>player.records.bestReality.realTime)},set bestRealityRealTime(e){this.toMilliseconds(e,e=>player.records.bestReality.realTime=e)},get worstChallenge(){return this.fromMilliseconds(()=>GameCache.worstChallengeTime.value)},get challengeSum(){return this.fromMilliseconds(()=>GameCache.challengeTimeSum.value)},get infinityChallengeSum(){return this.fromMilliseconds(()=>GameCache.infinityChallengeTimeSum.value)}};function iH(){let e=Replicanti.galaxies.bought;e=e.times(1+TimeStudy(133).effectOrDefault(0)+TimeStudy(132).effectOrDefault(0)),e=e.add(Replicanti.galaxies.extra);let t=Decimal.min(Replicanti.galaxies.bought,ReplicantiUpgrade.galaxies.value);e=e.add(t.times(Effects.sum(EternityChallenge(8).reward)));let n=player.dilation.totalTachyonGalaxies;n=n.mul(o.D1.add(Decimal.max(0,Replicanti.amount.max(1).log10().div(1e6)).times(AlchemyResource.alternation.effectValue)));let r=player.galaxies;return TimeStudy.pairProduction.isBought&&!QuantumChallenge.isRunning&&(r=r.sub(player.quantum.pair.dischargedGalaxies).max(0)),Decimal.max(r.add(GalaxyGenerator.galaxies).add(e).add(n),0)}function aH(){if(InfinityChallenge(3).isRunning)return o.D1;if(Ra.isRunning||QuantumChallenge(2).isRunning)return o.C1D1_1245;let e=iH(),t=Effects.product(InfinityUpgrade.galaxyBoost,InfinityUpgrade.galaxyBoost.chargedEffect,BreakInfinityUpgrade.galaxyBoost,TimeStudy(212),TimeStudy(232),Achievement(86),Achievement(148),Achievement(178),InfinityChallenge(5).reward,PelleUpgrade.galaxyPower,PelleRifts.decay.milestones[1],GluonUpgrade.redGreen(2),GluonUpgrade.redGreen(4));if(e.lt(3)){let n=o.C1D1_1245;player.galaxies.eq(1)&&(n=o.C1D1_11888888),player.galaxies.eq(2)&&(n=o.C1D1_11267177),NormalChallenge(5).isRunning&&(n=o.D1.div(1.08),player.galaxies.eq(1)&&(n=o.D1.div(1.07632)),player.galaxies.eq(2)&&(n=o.D1.div(1.072)));let r=t.div(50);return Pelle.isDoomed&&e.div(2),e=e.times(Pelle.specialGlyphEffect.power),o.D0_01.clampMin(n.sub(e.times(r)))}let n=.8;return NormalChallenge(5).isRunning&&(n=.83),e=e.sub(2),e=e.times(t),e=e.times(getAdjustedGlyphEffect(`cursedgalaxies`)),e=e.times(getAdjustedGlyphEffect(`realitygalaxies`)),e=e.times(ImaginaryUpgrade(9).effectOrDefault(o.D0).add(1)),Pelle.isDoomed&&(e=e.div(2)),e=e.times(Pelle.specialGlyphEffect.power),o.D0_965.pow(e.sub(2)).times(n)}function oH(){return!lH.isAvailableForPurchase||!lH.isAffordable?!1:(NormalChallenge(9).isRunning&&lH.multiplySameCosts(),Tutorial.turnOffEffect(TUTORIAL_STATE.TICKSPEED),Currency.antimatter.subtract(lH.cost),player.totalTickBought=player.totalTickBought.add(1),player.records.thisInfinity.lastBuyTime=player.records.thisInfinity.time,player.requirementChecks.permanent.singleTickspeed++,NormalChallenge(2).isRunning&&(player.chall2Pow=o.D0),GameUI.update(),!0)}function sH(){if(!lH.isAvailableForPurchase||!lH.isAffordable)return;let e=!1;if(Tutorial.turnOffEffect(TUTORIAL_STATE.TICKSPEED),NormalChallenge(9).isRunning){let t=Player.infinityGoal,n=lH.cost;for(;Currency.antimatter.gt(n)&&n.lt(t);)lH.multiplySameCosts(),Currency.antimatter.subtract(n),player.totalTickBought=player.totalTickBought.add(1),e=!0,n=lH.cost}else{let t=lH.costScale.getMaxBought(player.totalTickBought,Currency.antimatter.value,o.D1,!0);t!==null&&(t.logPrice.eq(player.antimatter.max(1).log10())&&player.dimensions.antimatter[0].amount.eq(0)&&(t.logPrice=lH.costScale.calculateCost(t.quantity.sub(1)),t.quantity=t.quantity.sub(1)),Currency.antimatter.subtract(Decimal.pow10(t.logPrice)),player.totalTickBought=player.totalTickBought.add(t.quantity));for(let e=0;e<5&&player.antimatter.neq(lH.cost)&&player.dimensions.antimatter[0].amount.neq(0);e++)oH();e=!0}e&&(player.records.thisInfinity.lastBuyTime=player.records.thisInfinity.time,NormalChallenge(2).isRunning&&(player.chall2Pow=o.D0)),player.dimensions.antimatter[0].amount.eq(0)&&Currency.antimatter.bumpTo(100)}function cH(){player.totalTickBought=o.D0,player.chall9TickspeedCostBumps=o.D0}const lH={get isUnlocked(){return Achievement(12).isUnlocked||EternityMilestone.unlockAllND.isReached},get isAvailableForPurchase(){return this.isUnlocked&&!EternityChallenge(9).isRunning&&!Laitela.continuumActive&&(player.break||this.cost.lt(o.NUMMAX))},get isAffordable(){return Currency.antimatter.gte(this.cost)},get multiplier(){return aH()},get current(){let e=Effarig.isRunning?Effarig.tickspeed:this.baseValue.powEffectOf(DilationUpgrade.tickspeedPower);return player.dilation.active||PelleStrikes.dilation.hasStrike?dilatedValueOf(e.recip()).recip():e},get cost(){return this.costScale.calculateCost(player.totalTickBought.add(player.chall9TickspeedCostBumps))},get costScale(){return new ExponentialCostScaling({baseCost:o.E3,baseIncrease:o.E1,costScale:new Decimal(Player.tickSpeedMultDecrease),scalingCostThreshold:o.NUMMAX})},get continuumValue(){if(!this.isUnlocked)return o.D0;let e=this.costScale.getContinuumValue(Currency.antimatter.value,o.D1);return e?e.times(Laitela.matterExtraPurchaseFactor):o.D0},get baseValue(){return o.E3.timesEffectsOf(Achievement(36),Achievement(45),Achievement(66),Achievement(83)).times(aH().pow(this.totalUpgrades))},get totalUpgrades(){return(Laitela.continuumActive?new Decimal(this.continuumValue):new Decimal(player.totalTickBought)).plus(player.totalTickGained)},get perSecond(){return Decimal.divide(1e3,this.current)},multiplySameCosts(){for(let e of AntimatterDimensions.all)e.cost.e===this.cost.e&&(e.costBumps=e.costBumps.add(1))}},uH={BASE_SOFTCAP:new Decimal(3e5),GROWTH_RATE:new Decimal(6e-6),GROWTH_EXP:o.D2,tickmult:()=>o.D1.add(Effects.min(1.33,TimeStudy(171)).sub(1)),get amount(){return player.totalTickGained},get growthRate(){let e=this.GROWTH_RATE;return e=e.dividedByEffectOf(QuantumChallenge(7).reward),e.add(1)},get softcap(){return uH.BASE_SOFTCAP},get multToNext(){return this.amount.lt(this.softcap)?new Decimal(this.tickmult()):this.tickmult().mul(this.growthRate.pow(this.amount.sub(this.softcap)))},get tickExpo(){return new ExponentialCostScaling({baseCost:o.D1,baseIncrease:this.tickmult(),costScale:this.growthRate,purchasesBeforeScaling:uH.softcap})},fromShards(e){if(e.lt(1))return{newAmount:o.D0,nextShards:o.D1};let t=this.tickExpo.getMaxBought(o.D0,e,o.D1);return{newAmount:t.quantity,nextShards:this.tickExpo.calculateCost(t.quantity.add(1))}}};function dH(){let e=o.D1;return e=e.times(Achievements.power),EternityChallenge(9).isRunning||(e=e.times(Currency.infinityPower.value.pow(InfinityDimensions.powerConversionRate).max(1))),e=e.timesEffectsOf(BreakInfinityUpgrade.totalAMMult,BreakInfinityUpgrade.currentAMMult,BreakInfinityUpgrade.achievementMult,BreakInfinityUpgrade.slowestChallengeMult,InfinityUpgrade.totalTimeMult,InfinityUpgrade.thisInfinityTimeMult,Achievement(48),Achievement(56),Achievement(65),Achievement(72),Achievement(73),Achievement(74),Achievement(76),Achievement(84),Achievement(91),Achievement(92),TimeStudy(91),MasteryStudy(92).isBought?null:TimeStudy(101),TimeStudy(161),TimeStudy(193),InfinityChallenge(3),InfinityChallenge(3).reward,InfinityChallenge(8),EternityChallenge(10),AlchemyResource.dimensionality,PelleUpgrade.antimatterDimensionMult),e=e.dividedByEffectOf(InfinityChallenge(6)),e=e.times(getAdjustedGlyphEffect(`powermult`)),e=e.times(Currency.realityMachines.value.powEffectOf(AlchemyResource.force)),Pelle.isDoomed&&(e=e.dividedBy(10)),e}function fH(e){if(e<1||e>8)throw Error(`Invalid Antimatter Dimension tier ${e}`);if(NormalChallenge(10).isRunning&&e>6)return o.D1;if(EternityChallenge(11).isRunning)return Currency.infinityPower.value.pow(InfinityDimensions.powerConversionRate).max(1).times(DimBoost.multiplierToNDTier(e));let t=o.D1;t=pH(t,e),t=mH(t,e);let n=getAdjustedGlyphEffect(`dilationpow`);return player.dilation.active||PelleStrikes.dilation.hasStrike?t=dilatedValueOf(t.pow(n)):Enslaved.isRunning&&(t=dilatedValueOf(t)),t=t.timesEffectsOf(DilationUpgrade.ndMultDT,MasteryStudy(92).isBought?TimeStudy(101):null),Effarig.isRunning?t=Effarig.multiplier(t):V.isRunning&&(t=t.pow(.5)),AlchemyResource.inflation.isUnlocked&&t.gte(AlchemyResource.inflation.effectValue)&&(t=t.pow(1.05)),t}function pH(e,t){let n=e.times(GameCache.antimatterDimensionCommonMultiplier.value),r=Laitela.continuumActive?SH(t).continuumValue.div(10):Decimal.floor(SH(t).bought.div(10));n=n.times(Decimal.pow(CH.buyTenMultiplier,r)),n=n.times(DimBoost.multiplierToNDTier(t));let i=o.D1.timesEffectsOf(SH(t).infinityUpgrade,BreakInfinityUpgrade.infinitiedMult);return i=i.pow(TimeStudy(31).effectOrDefault(1)),n=n.times(i),t===1&&(n=n.timesEffectsOf(InfinityUpgrade.unspentIPMult,InfinityUpgrade.unspentIPMult.chargedEffect,Achievement(28),Achievement(31),Achievement(68),Achievement(71),TimeStudy(234))),t===8&&(n=n.times(Sacrifice.totalBoost)),n=n.timesEffectsOf(t===8?Achievement(23):null,t===8?Achievement(167):null,t<8?Achievement(34):null,t<=4?Achievement(64):null,t<8?TimeStudy(71):null,t===8?TimeStudy(214):null,t>1&&t<8?InfinityChallenge(8).reward:null),Achievement(43).isUnlocked&&(n=n.times(1+t/100)),n=n.clampMin(1),n}function mH(e,t){let n=e,r=new Decimal(getAdjustedGlyphEffect(`powerpow`)),i=getAdjustedGlyphEffect(`effarigdimensions`);return InfinityChallenge(4).isRunning&&player.postC4Tier!==t&&(n=n.pow(InfinityChallenge(4).effectValue)),InfinityChallenge(4).isCompleted&&(n=n.pow(InfinityChallenge(4).reward.effectValue)),n=n.pow(r.times(i).times(Ra.momentumValue)),n=n.powEffectsOf(SH(t).infinityUpgrade.chargedEffect,InfinityUpgrade.totalTimeMult.chargedEffect,InfinityUpgrade.thisInfinityTimeMult.chargedEffect,AlchemyResource.power,Achievement(183),PelleRifts.paradox),n=n.pow(getAdjustedGlyphEffect(`curseddimensions`)),n=n.pow(VUnlocks.adPow.effectOrDefault(1)),PelleStrikes.infinity.hasStrike&&(n=n.pow(.5)),n}function hH(e){e===1&&Tutorial.turnOffEffect(TUTORIAL_STATE.DIM1),e===2&&Tutorial.turnOffEffect(TUTORIAL_STATE.DIM2),Achievement(10+e).unlock(),Achievement(23).tryUnlock(),player.speedrun.isActive&&!player.speedrun.hasStarted&&Speedrun.startTimer(),NormalChallenge(2).isRunning&&(player.chall2Pow=o.D0),(NormalChallenge(4).isRunning||InfinityChallenge(1).isRunning)&&CH.resetAmountUpToTier(e-1),player.postC4Tier=e,player.records.thisInfinity.lastBuyTime=player.records.thisInfinity.time,e!==8&&(player.requirementChecks.eternity.onlyAD8=!1),e!==1&&(player.requirementChecks.eternity.onlyAD1=!1),e===8&&(player.requirementChecks.infinity.noAD8=!1),e===1&&(player.requirementChecks.eternity.noAD1=!1)}function gH(e){let t=SH(e);if(Laitela.continuumActive||!t.isAvailableForPurchase||!t.isAffordable)return!1;let n=t.cost;return e===8&&Enslaved.isRunning&&SH(8).bought.gte(1)?!1:(t.currencyAmount=t.currencyAmount.minus(n).max(0),t.boughtBefore10.eq(9)&&t.challengeCostBump(),t.amount=t.amount.plus(1),t.bought=t.bought.add(1),e===1&&Achievement(28).tryUnlock(),hH(e),!0)}function _H(e){let t=SH(e);if(Laitela.continuumActive||!t.isAvailableForPurchase||!t.isAffordableUntil10)return!1;let n=t.costUntil10;return e===8&&Enslaved.isRunning?gH(8):(t.currencyAmount=t.currencyAmount.minus(n).max(0),t.challengeCostBump(),t.amount=t.amount.plus(t.remainingUntil10),t.bought=t.bought.add(t.remainingUntil10),hH(e),!0)}function vH(e){let t=SH(e);if(Laitela.continuumActive||!t.isAvailableForPurchase||!t.isAffordable)return!1;let n=t.howManyCanBuy,r=t.cost.times(n);return e===8&&Enslaved.isRunning?gH(8):(t.currencyAmount=t.currencyAmount.minus(r).max(0),t.challengeCostBump(),t.amount=t.amount.plus(n),t.bought=t.bought.add(n),hH(e),!0)}function yH(e){if(Laitela.continuumActive)return;let t=SH(e);t.challengeCostBump(),t.amount=Decimal.round(t.amount.plus(t.remainingUntil10)),t.bought=t.bought.add(t.remainingUntil10),hH(e)}function bH(){if(!Laitela.continuumActive){player.requirementChecks.infinity.maxAll=!0;for(let e=1;e<9;e++)xH(e);buyMaxTickSpeed()}}function xH(e,t=1/0){let n=SH(e);if(Laitela.continuumActive||!n.isAvailableForPurchase||!n.isAffordableUntil10)return;let r=n.costUntil10,i=new Decimal(t),a=Player.infinityGoal;if(n.cost.gt(a)&&Player.isInAntimatterChallenge)return;if(e===8&&Enslaved.isRunning){gH(8);return}if(n.currencyAmount.gte(r)&&(n.currencyAmount=n.currencyAmount.minus(r).max(0),yH(e),i=i.sub(1)),i.lte(0))return;if(NormalChallenge(9).isRunning||InfinityChallenge(5).isRunning){for(;n.isAffordableUntil10&&n.cost.lt(a)&&i.gt(0);)n.currencyAmount=n.currencyAmount.minus(n.costUntil10).max(0),yH(e),i=i.sub(1);return}let s=n.costScale.getMaxBought(Decimal.floor(n.bought.div(10)).add(n.costBumps),n.currencyAmount,o.E1);if(s===null)return;let c=s.quantity.min(i);n.amount=n.amount.plus(c),n.currencyAmount=n.currencyAmount.minus(n.cost).max(0),n.bought=n.bought.add(c)}const SH=class extends ZS{constructor(e){super(()=>player.dimensions.antimatter,e),this._baseCost=[null,o.E1,o.E2,o.E4,o.E6,o.E9,o.E13,o.E18,o.E24][e],this._baseCostMultiplier=[null,o.E3,o.E4,o.E5,o.E6,o.E8,o.E10,o.E12,o.E15][e],this._c6BaseCost=[null,o.E1,o.E2,o.E2,o.E2.times(5),o.E3.times(2.5),o.E4.times(2),o.E5.times(2),o.E6.times(4)][e],this._c6BaseCostMultiplier=[null,o.E3,o.E3.times(5),o.E4,o.E4.times(1.2),o.E4.times(1.8),o.E4.times(2.6),o.E4.times(3.2),o.E4.times(4.2)][e]}get costScale(){return new ExponentialCostScaling({baseCost:NormalChallenge(6).isRunning?this._c6BaseCost:this._baseCost,baseIncrease:NormalChallenge(6).isRunning?this._c6BaseCostMultiplier:this._baseCostMultiplier,costScale:new Decimal(Player.dimensionMultDecrease),scalingCostThreshold:o.NUMMAX})}get cost(){return this.costScale.calculateCost(this.bought.div(o.E1).floor().add(this.costBumps))}get costBumps(){return this.data.costBumps}set costBumps(e){this.data.costBumps=e}get boughtBefore10(){return this.bought.mod(10)}get remainingUntil10(){return o.E1.sub(this.boughtBefore10)}get costUntil10(){return this.cost.times(this.remainingUntil10)}get howManyCanBuy(){return this.currencyAmount.dividedBy(this.cost).min(this.remainingUntil10).max(0).floor()}get infinityUpgrade(){switch(this.tier){case 1:case 8:return InfinityUpgrade.dim18mult;case 2:case 7:return InfinityUpgrade.dim27mult;case 3:case 6:return InfinityUpgrade.dim36mult;case 4:case 5:return InfinityUpgrade.dim45mult}return!1}get rateOfChange(){let e=this.tier;return e===8||e>3&&EternityChallenge(3).isRunning||e>6&&NormalChallenge(12).isRunning?o.D0:(e===7&&EternityChallenge(7).isRunning?InfinityDimension(1).productionPerSecond.times(10):NormalChallenge(12).isRunning?SH(e+2).productionPerSecond:SH(e+1).productionPerSecond).times(getGameSpeedupForDisplay()).div(10)}get isProducing(){let e=this.tier;return EternityChallenge(3).isRunning&&e>4||NormalChallenge(10).isRunning&&e>6||Laitela.isRunning&&e>Laitela.maxAllowedDimension||QuantumChallenge(4).isRunning&&e>2?!1:this.totalAmount.gt(0)}get currencyAmount(){return this.tier>=3&&NormalChallenge(6).isRunning?SH(this.tier-2).amount:Currency.antimatter.value}set currencyAmount(e){this.tier>=3&&NormalChallenge(6).isRunning?SH(this.tier-2).amount=e:Currency.antimatter.value=e}get continuumValue(){if(!this.isAvailableForPurchase)return o.D0;if(this.tier===8&&Enslaved.isRunning)return o.D1;let e=this.costScale.getContinuumValue(this.currencyAmount,o.E1);return e?e.times(Laitela.matterExtraPurchaseFactor):o.D0}get continuumAmount(){return Laitela.continuumActive?this.continuumValue.floor():o.D0}get totalAmount(){return this.amount.max(this.continuumAmount)}get isAffordable(){return Laitela.continuumActive||!player.break&&this.cost.gt(o.NUMMAX)?!1:this.cost.lte(this.currencyAmount)}get isAffordableUntil10(){return!player.break&&this.cost.gt(o.NUMMAX)?!1:this.costUntil10.lte(this.currencyAmount)}get isAvailableForPurchase(){if(!EternityMilestone.unlockAllND.isReached&&DimBoost.totalBoosts.add(4).lt(this.tier))return!1;let e=this.tier===1||SH(this.tier-1).totalAmount.gt(0);return!EternityMilestone.unlockAllND.isReached&&!e?!1:this.tier<7||!NormalChallenge(10).isRunning}reset(){this.amount=o.D0,this.bought=o.D0,this.costBumps=o.D0}resetAmount(){this.amount=o.D0}challengeCostBump(){InfinityChallenge(5).isRunning?this.multiplyIC5Costs():NormalChallenge(9).isRunning&&this.multiplySameCosts()}multiplySameCosts(){for(let e of CH.all.filter(e=>e.tier!==this.tier))e.cost.e===this.cost.e&&(e.costBumps=e.costBumps.add(1));Tickspeed.cost.e===this.cost.e&&(chall9TickspeedCostBumps=chall9TickspeedCostBumps.add(1))}multiplyIC5Costs(){for(let e of CH.all.filter(e=>e.tier!==this.tier))(this.tier<=4&&e.cost.lt(this.cost)||this.tier>=5&&e.cost.gt(this.cost))&&(e.costBumps=e.costBumps.add(1))}get multiplier(){return GameCache.antimatterDimensionFinalMultipliers[this.tier].value}get cappedProductionInNormalChallenges(){let e=player.break&&!NormalChallenge.isRunning||InfinityChallenge.isRunning||Enslaved.isRunning;return e?o.BEMAX:e?o.BIMAX:o.E315}get productionPerSecond(){let e=this.tier;if(Laitela.isRunning&&e>Laitela.maxAllowedDimension||QuantumChallenge(1).isRunning&&e>2)return o.D0;let t=this.totalAmount;NormalChallenge(12).isRunning&&(e===2&&(t=t.pow(1.6)),e===4&&(t=t.pow(1.4)),e===6&&(t=t.pow(1.2)));let n=t.times(this.multiplier).times(Tickspeed.perSecond);if(NormalChallenge(2).isRunning&&(n=n.times(player.chall2Pow)),e===1&&(NormalChallenge(3).isRunning&&(n=n.times(player.chall3Pow)),n.gt(10))){let e=n.max(1).log10();n=Decimal.pow10(Decimal.pow(e,getAdjustedGlyphEffect(`effarigantimatter`)))}return n=softcapGradual(n,{initialPower:1,scalingStrength:.25,start:`e9e15`,type:`polynomial`}),n=n.min(this.cappedProductionInNormalChallenges),n}static createAccessor(){let e=Array.range(1,this.dimensionCount).map(e=>new this(e));e.unshift(null);let t=t=>{if(e[t]===void 0)throw TypeError(`Unknown Dimension referenced`);return e[t]};return Object.defineProperty(t,`index`,{value:e}),t}}.createAccessor(),CH={all:SH.index.compact(),reset(){for(let e of CH.all)e.reset();GameCache.dimensionMultDecrease.invalidate()},resetAmountUpToTier(e){for(let t of CH.all.slice(0,e))t.resetAmount()},buyTenMultiplierAddons:{get multiplier(){if(NormalChallenge(7).isRunning)return o.D2.min(DimBoost.totalBoosts.div(5).add(1));let e=Effects.sum(EternityChallenge(3).reward).max(1);return e=e.timesEffectsOf(InfinityUpgrade.buy10Mult,Achievement(58),QuantumChallenge(5).reward,PairProduction.electronEffect),e.max(1)},get powerer(){let e=o.D1;return e=e.timesEffectOf(PairProduction.positronEffect),e}},get buyTenMultiplier(){let e=o.D2;return e=e.times(this.buyTenMultiplierAddons.multiplier),e=e.pow(this.buyTenMultiplierAddons.powerer),QuantumChallenge(5).isRunning||QuantumChallenge(7).isRunning?Effects.max(o.D1,MasteryStudy(91)):Effects.max(e,MasteryStudy(91))},tick(e){let t=!player.break||Player.isInAntimatterChallenge;if(t&&Currency.antimatter.gte(Player.infinityGoal))return;let n=EternityChallenge(3).isRunning?3:7,r=1;NormalChallenge(12).isRunning&&(n--,r++);for(let t=n;t>=1;--t)SH(t+r).produceDimensions(SH(t),e.div(10));SH(1).amount.gt(0)&&(player.requirementChecks.eternity.noAD1=!1),SH(1).produceCurrency(Currency.antimatter,e),NormalChallenge(12).isRunning&&SH(2).produceCurrency(Currency.antimatter,e),t&&Currency.antimatter.dropTo(Player.infinityGoal)}};function wH(){let e=new Decimal(1).timesEffectsOf(Achievement(75),TimeStudy(82),TimeStudy(92),TimeStudy(162),InfinityChallenge(1).reward,InfinityChallenge(6).reward,EternityChallenge(4).reward,EternityChallenge(9).reward,EternityUpgrade.idMultEP,EternityUpgrade.idMultEternities,EternityUpgrade.idMultICRecords,AlchemyResource.dimensionality,ImaginaryUpgrade(8),PelleRifts.recursion.milestones[1]);return Replicanti.areUnlocked&&Replicanti.amount.gt(1)&&(e=e.times(replicantiMult())),e}function TH(){let e=Autobuyer.infinityDimension(1).isActive;for(let t=1;t<9;t++)Autobuyer.infinityDimension(t).isActive=!e}const EH=class extends ZS{constructor(e){super(()=>player.dimensions.infinity,e),this._unlockRequirement=[void 0,o.E1100,o.E1900,o.E2400,o.E10500,o.E30000,o.E45000,o.E54000,o.E60000][e],this._costMultiplier=[null,1e3,1e6,1e8,1e10,0x38d7ea4c68000,0x56bc75e2d63100000,1e25,1e30][e],this._powerMultiplier=[null,50,30,10,5,5,5,5,5][e];let t=[null,1e8,1e9,1e10,0x56bc75e2d63100000,1e140,1e200,1e250,1e280];this._baseCost=new Decimal(t[e]),this.ipRequirement=t[1]}get cost(){return this.data.cost}set cost(e){this.data.cost=e}get baseAmount(){return this.data.baseAmount}set baseAmount(e){this.data.baseAmount=e}get isUnlocked(){return this.data.isUnlocked}set isUnlocked(e){this.data.isUnlocked=e}get amRequirement(){return this._unlockRequirement}get antimatterRequirementReached(){return player.records.thisEternity.maxAM.gte(this.amRequirement)}get hasIPUnlock(){return this.tier===1&&!PlayerProgress.eternityUnlocked()}get ipRequirementReached(){return!this.hasIPUnlock||Currency.infinityPoints.value.gte(this.ipRequirement)}get canUnlock(){return(Perk.bypassIDAntimatter.canBeApplied||this.antimatterRequirementReached)&&this.ipRequirementReached}get isAvailableForPurchase(){return DH.canBuy()&&this.isUnlocked&&this.isAffordable&&!this.isCapped}get isAffordable(){return Currency.infinityPoints.gte(this.cost)}get rateOfChange(){let e=this.tier,t=o.D0;return QuantumChallenge(4).isRunning&&e===7?o.D0:(e===8?(EternityChallenge(7).reward.applyEffect(e=>t=e.times(10)),EternityChallenge(7).isRunning&&EternityChallenge(7).applyEffect(e=>t=e.times(10))):t=QuantumChallenge(4).isRunning?EH(e+2).productionPerSecond:EH(e+1).productionPerSecond,t.times(getGameSpeedupForDisplay()).div(10))}get productionPerSecond(){if(EternityChallenge(2).isRunning||EternityChallenge(10).isRunning||EternityChallenge(13).isRunning||QuantumChallenge(8).isRunning||Laitela.isRunning&&this.tier>Laitela.maxAllowedDimension)return o.D0;let e=this.amount;return EternityChallenge(11).isRunning?e:(EternityChallenge(7).isRunning&&(e=e.times(Tickspeed.perSecond)),e.times(this.multiplier))}get multiplier(){let e=this.tier;if(EternityChallenge(11).isRunning)return o.D1;if(QuantumChallenge(3).isRunning)return MetaDimensions.dimensionBoostMultiplier;let t=GameCache.infinityDimensionCommonMultiplier.value.timesEffectsOf(e===1?Achievement(94):null,e===4?TimeStudy(72):null,e===1?EternityChallenge(2).reward:null);return t=t.times(Decimal.pow(this.powerMultiplier,Decimal.floor(this.baseAmount.div(o.E1)))),e===1&&(t=t.times(PelleRifts.decay.milestones[0].effectOrDefault(1))),t=t.pow(getAdjustedGlyphEffect(`infinitypow`)),t=t.pow(getAdjustedGlyphEffect(`effarigdimensions`)),t=t.pow(getAdjustedGlyphEffect(`curseddimensions`)),t=t.powEffectOf(AlchemyResource.infinity),t=t.pow(Ra.momentumValue),t=t.powEffectOf(PelleRifts.paradox),(player.dilation.active||PelleStrikes.dilation.hasStrike)&&(t=dilatedValueOf(t)),Effarig.isRunning?t=Effarig.multiplier(t):V.isRunning&&(t=t.pow(.5)),PelleStrikes.powerGalaxies.hasStrike&&(t=t.pow(.5)),t}get isProducing(){let e=this.tier;return EternityChallenge(2).isRunning||EternityChallenge(10).isRunning||Laitela.isRunning&&e>Laitela.maxAllowedDimension?!1:this.amount.gt(0)}get baseCost(){return this._baseCost}get costMultiplier(){let e=new Decimal(this._costMultiplier);return EternityChallenge(12).reward.applyEffect(t=>e=Decimal.pow(e,t)),e}get powerMultiplier(){return new Decimal(this._powerMultiplier).times(this._tier===8?GlyphInfo.infinity.sacrificeInfo.effect():new Decimal(1)).pow(ImaginaryUpgrade(14).effectOrDefault(1))}get purchases(){return this.data.baseAmount.div(10)}get purchaseCap(){return Enslaved.isRunning?o.D1:DH.capIncrease.add(this.tier===8?o.BEMAX:DH.HARDCAP_PURCHASES)}get isCapped(){return this.purchases.gte(this.purchaseCap)}get hardcapIPAmount(){return this._baseCost.times(Decimal.pow(this.costMultiplier,this.purchaseCap))}resetAmount(){this.amount=new Decimal(this.baseAmount)}fullReset(){this.cost=new Decimal(this.baseCost),this.amount=o.D0,this.bought=o.D0,this.baseAmount=o.D0,this.isUnlocked=!1}unlock(){return this.isUnlocked?!0:this.canUnlock?(this.isUnlocked=!0,EventHub.dispatch(GAME_EVENT.INFINITY_DIMENSION_UNLOCKED,this.tier),this.tier===1&&!PlayerProgress.eternityUnlocked()&&Tab.dimensions.infinity.show(),!0):!1}buySingle(){if(!this.isUnlocked)return this.unlock();if(!this.isAvailableForPurchase)return!1;if(ImaginaryUpgrade(15).isLockingMechanics){let e=this.tier===1?`purchase a 1st Infinity Dimension`:`purchase a Dimension which will produce 1st IDs`;return ImaginaryUpgrade(15).tryShowWarningModal(e),!1}return Currency.infinityPoints.purchase(this.cost),this.cost=Decimal.round(this.cost.times(this.costMultiplier)),this.amount=this.amount.plus(10),this.baseAmount=this.baseAmount.add(10),EternityChallenge(8).isRunning&&--player.eterc8ids,!0}buyMax(e){if(!this.isAvailableForPurchase)return!1;if(ImaginaryUpgrade(15).isLockingMechanics){let t=this.tier===1?`purchase a 1st Infinity Dimension`:`purchase a Dimension which will produce 1st IDs`;return e||ImaginaryUpgrade(15).tryShowWarningModal(t),!1}let t=this.purchaseCap.sub(this.purchases);EternityChallenge(8).isRunning&&(t=Decimal.clampMax(t,player.eterc8ids));let n=new LinearCostScaling(Currency.infinityPoints.value,this.cost,this.costMultiplier,t);return n.purchases.lte(0)?!1:(Currency.infinityPoints.purchase(n.totalCost),this.cost=this.cost.times(n.totalCostMultiplier),this.bought=this.bought.plus(n.purchases),this.amount=this.amount.plus(n.purchases.times(10)),this.baseAmount=o.E1.times(n.purchases).add(this.baseAmount),EternityChallenge(8).isRunning&&(player.eterc8ids-=n.purchases.toNumber()),!0)}static createAccessor(){let e=Array.range(1,this.dimensionCount).map(e=>new this(e));e.unshift(null);let t=t=>{if(e[t]===void 0)throw TypeError(`Unknown Dimension referenced`);return e[t]};return Object.defineProperty(t,`index`,{value:e}),t}}.createAccessor(),DH={all:EH.index.compact(),HARDCAP_PURCHASES:new Decimal(2e6),get convSoftcapStart(){return o.E1E15},get convSoftcapEffect(){let e=Currency.infinityPower.value.plus(1).log10().div(this.convSoftcapStart.log10()).pow(.8);return Decimal.max(e,1)},get powerConversionRate(){return o.D7.div(this.convSoftcapEffect)},unlockNext(){EH(8).isUnlocked||this.next().unlock()},next(){if(EH(8).isUnlocked)throw RangeError(`All Infinity Dimensions are unlocked`);return this.all.first(e=>!e.isUnlocked)},resetAmount(){Currency.infinityPower.reset();for(let e of DH.all)e.resetAmount()},fullReset(){for(let e of DH.all)e.fullReset()},get capIncrease(){return Decimal.floor(Tesseracts.capIncrease())},get totalDimCap(){return this.HARDCAP_PURCHASES.add(this.capIncrease)},canBuy(){return!EternityChallenge(2).isRunning&&!EternityChallenge(10).isRunning&&(!EternityChallenge(8).isRunning||player.eterc8ids>0)},canAutobuy(){return this.canBuy()&&!EternityChallenge(8).isRunning},tick(e){let t=7,n=1;QuantumChallenge(4).isRunning&&(t--,n++);for(let r=t;r>=1;--r)EH(r+n).produceDimensions(EH(r),e.div(10));EternityChallenge(7).isRunning?NormalChallenge(10).isRunning||EH(1).produceDimensions(AntimatterDimension(7),e):EH(1).produceCurrency(Currency.infinityPower,e),player.requirementChecks.reality.maxID1=player.requirementChecks.reality.maxID1.clampMin(EH(1).amount)},tryAutoUnlock(){if(!(!EternityMilestone.autoUnlockID.isReached||EH(8).isUnlocked)){for(let e of this.all)if(!e.unlock())break}},buyMax(){let e=this.all.filter(e=>e.unlock());[...e].toReversed().forEach(e=>{e.purchases===0&&e.buySingle()}),e.forEach(e=>e.buyMax(!1))}};function OH(e,t=!1){let n=LH(e);if(e>4){if(!TimeStudy.timeDimension(e).isBought)return!1;if(RealityUpgrade(13).isLockingMechanics&&Currency.eternityPoints.gte(n.cost))return t||RealityUpgrade(13).tryShowWarningModal(),!1}return Currency.eternityPoints.lt(n.cost)||Enslaved.isRunning&&n.bought.gt(0)?!1:ImaginaryUpgrade(15).isLockingMechanics&&EternityChallenge(7).completions>0?(t||ImaginaryUpgrade(15).tryShowWarningModal(`purchase a Time Dimension,
        which will produce Infinity Dimensions through EC7`),!1):(Currency.eternityPoints.subtract(n.cost),n.amount=n.amount.add(1),n.bought=n.bought.add(1),n.cost=n.nextCost(n.bought),!0)}function kH(){for(let e of RH.all)e.amount=new Decimal(e.bought);IH()}function AH(){for(let e of RH.all)e.cost=new Decimal(e.baseCost),e.amount=o.D0,e.bought=o.D0}function jH(){let e=Autobuyer.timeDimension(1).isActive;for(let t=1;t<9;t++)Autobuyer.timeDimension(t).isActive=!e}function MH(e,t){let n=t.max(1).log10(),r=LH(e)._baseCost.max(1).log10(),i=Decimal.log10(LH(e)._costMultiplier);if(e>4&&t.lt(o.E6000))return Decimal.max(0,n.sub(r).div(i)).floor();if(t.gte(o.E6000)){i=LH(e)._costMultiplier.mul(e<=4?2.2:1).max(1).log10();let t=Decimal.log10(o.E6000).sub(r).div(i);return n.sub(r).sub(6e3).div(i).div(RH.scalingPast1e6000).clampMin(0).add(t).floor()}if(t.lt(o.NUMMAX))return Decimal.max(0,n.sub(r).div(i).add(1)).floor();if(t.lt(o.E1300)){let t=Decimal.log10(o.NUMMAX).sub(r).div(i).floor();i=LH(e)._costMultiplier.mul(1.5).max(1).log10();let a=n.sub(t.mul(i)).div(i).clampMin(0).floor();return Decimal.add(t,a)}if(t.lt(o.E6000)){i=LH(e)._costMultiplier.mul(1.5).max(1).log10();let t=Decimal.log10(o.E1300).sub(r).div(i).floor();i=LH(e)._costMultiplier.mul(2.2).max(1).log10();let a=n.sub(t.mul(i)).div(i).clampMin(0).floor();return Decimal.add(t,a)}throw Error(`calcHighestPurchasableTD reached too far in code`)}function NH(e,t=1,n=!1){let r=Currency.eternityPoints.value.times(t),i=LH(e);if(r.lt(i.cost))return!1;if(e>4){if(!TimeStudy.timeDimension(e).isBought)return!1;if(RealityUpgrade(13).isLockingMechanics)return n||RealityUpgrade(13).tryShowWarningModal(),!1}if(ImaginaryUpgrade(15).isLockingMechanics&&EternityChallenge(7).completions>0)return n||ImaginaryUpgrade(15).tryShowWarningModal(`purchase a Time Dimension,
        which will produce Infinity Dimensions through EC7`),!1;if(Enslaved.isRunning)return OH(e);let a=Decimal.sub(MH(e,r),i.bought).clampMin(0),o=i.nextCost(a.add(i.bought).sub(1));return a.lte(0)?!1:(Currency.eternityPoints.subtract(o),i.amount=i.amount.plus(a),i.bought=i.bought.add(a),i.cost=i.nextCost(i.bought),!0)}function PH(){for(let e=8;e>0&&LH(e).bought.eq(0);e--)OH(e,!0);for(let e=8;e>0;e--)NH(e,.01,!0);let e=e=>RealityUpgrade(13).isLockingMechanics?e<5:!0,t=RH.all.filter(t=>t.isUnlocked&&e(t.tier));for(let e=0;e<1e3;e++){let e=t.reduce((e,t)=>t.cost.gte(e.cost)?e:t);if(!OH(e.tier,!0))break}}function FH(){let e=new Decimal(1).timesEffectsOf(Achievement(105),Achievement(128),TimeStudy(93),TimeStudy(103),TimeStudy(151),TimeStudy(221),TimeStudy(301),EternityChallenge(1).reward,EternityChallenge(10).reward,EternityUpgrade.tdMultAchs,EternityUpgrade.tdMultTheorems,EternityUpgrade.tdMultRealTime,Replicanti.areUnlocked&&Replicanti.amount.gt(1)?DilationUpgrade.tdMultReplicanti:null,GluonUpgrade.blueRed(6),Pelle.isDoomed?null:RealityUpgrade(22),AlchemyResource.dimensionality,PelleRifts.chaos);return EternityChallenge(9).isRunning&&(e=e.times(Decimal.pow(Decimal.clampMin(Currency.infinityPower.value.max(1).pow(InfinityDimensions.powerConversionRate.div(7)).log2(),1),4).clampMin(1))),e}function IH(){for(let e=1;e<=8;e++){let t=LH(e);t.cost=t.nextCost(t.bought)}}const LH=class extends ZS{constructor(e){super(()=>player.dimensions.time,e),this._baseCost=[null,o.D1,o.D5,o.E2,o.E3,o.E2350,o.E2650,o.E3000,o.E3350][e],this._costMultiplier=[null,3,9,27,81,24300,72900,218700,656100].map(e=>e?new Decimal(e):null)[e],this._e6000ScalingAmount=[null,7322,4627,3382,2665,833,689,562,456].map(e=>e?new Decimal(e):null)[e],this._costIncreaseThresholds=[o.NUMMAX,o.E1300,o.E6000]}get cost(){return this.data.cost}set cost(e){this.data.cost=e}nextCost(e){if(this._tier>4&&e.lt(this.e6000ScalingAmount)){let t=Decimal.pow(this.costMultiplier,e).times(this.baseCost);return PelleRifts.paradox.milestones[0].canBeApplied?t.div(`1e2250`).pow(.5):t}let t=[1,1.5,2.2];for(let n=0;n<this._costIncreaseThresholds.length;n++){let r=Decimal.pow(this.costMultiplier.mul(t[n]),e).times(this.baseCost);if(r.lt(this._costIncreaseThresholds[n]))return r}let n=this.costMultiplier;this._tier<=4&&(n=n.mul(2.2));let r=this.e6000ScalingAmount.add(e.sub(this.e6000ScalingAmount).times(RH.scalingPast1e6000)),i=Decimal.pow(n,r).times(this.baseCost);return PelleRifts.paradox.milestones[0].canBeApplied&&this._tier>4?i.div(`1e2250`).pow(.5):i}get isUnlocked(){return this._tier<5||TimeStudy.timeDimension(this._tier).isBought}get isAvailableForPurchase(){return this.isAffordable}get isAffordable(){return Currency.eternityPoints.gte(this.cost)}get multiplier(){let e=this._tier;if(EternityChallenge(11).isRunning)return o.D1;let t=GameCache.timeDimensionCommonMultiplier.value.timesEffectsOf(e===1?TimeStudy(11):null,e===3?TimeStudy(73):null,e===4?TimeStudy(227):null),n=LH(e),r=e===8?Decimal.clampMax(n.bought,1e8):n.bought;return t=t.times(Decimal.pow(n.powerMultiplier,r)),t=t.pow(getAdjustedGlyphEffect(`timepow`)),t=t.pow(getAdjustedGlyphEffect(`effarigdimensions`)),t=t.pow(getAdjustedGlyphEffect(`curseddimensions`)),t=t.powEffectOf(AlchemyResource.time),t=t.pow(Ra.momentumValue),t=t.pow(ImaginaryUpgrade(11).effectOrDefault(1)),t=t.powEffectOf(PelleRifts.paradox),(player.dilation.active||PelleStrikes.dilation.hasStrike)&&(t=dilatedValueOf(t)),Effarig.isRunning?t=Effarig.multiplier(t):V.isRunning&&(t=t.pow(.5)),t}get productionPerSecond(){if(EternityChallenge(1).isRunning||EternityChallenge(10).isRunning||QuantumChallenge(8).isRunning||Laitela.isRunning&&this.tier>Laitela.maxAllowedDimension)return o.D0;if(EternityChallenge(11).isRunning)return this.amount;let e=this.amount.times(this.multiplier);return EternityChallenge(7).isRunning&&(e=e.times(Tickspeed.perSecond)),this._tier===1&&!EternityChallenge(7).isRunning&&(e=e.pow(getAdjustedGlyphEffect(`timeshardpow`))),e}get rateOfChange(){let e=this._tier;return e===8||QuantumChallenge(4).isRunning&&e>6?o.D0:(QuantumChallenge(4).isRunning?LH(e+2).productionPerSecond:LH(e+1).productionPerSecond).times(getGameSpeedupForDisplay()).div(10)}get isProducing(){let e=this.tier;return EternityChallenge(1).isRunning||EternityChallenge(10).isRunning||Laitela.isRunning&&e>Laitela.maxAllowedDimension?!1:this.amount.gt(0)}get baseCost(){return this._baseCost}get costMultiplier(){return this._costMultiplier}get powerMultiplier(){return o.D4.times(this._tier===8?GlyphInfo.time.sacrificeInfo.effect():new Decimal(1)).pow(ImaginaryUpgrade(14).effectOrDefault(1))}get e6000ScalingAmount(){return this._e6000ScalingAmount}get costIncreaseThresholds(){return this._costIncreaseThresholds}get requirementReached(){return this._tier<5||TimeStudy.timeDimension(this._tier).isAffordable&&TimeStudy.timeDimension(this._tier-1).isBought}tryUnlock(){this.isUnlocked||TimeStudy.timeDimension(this._tier).purchase()}static createAccessor(){let e=Array.range(1,this.dimensionCount).map(e=>new this(e));e.unshift(null);let t=t=>{if(e[t]===void 0)throw TypeError(`Unknown Dimension referenced`);return e[t]};return Object.defineProperty(t,`index`,{value:e}),t}}.createAccessor(),RH={all:LH.index.compact(),get scalingPast1e6000(){return 4},tick(e){let t=7,n=1;QuantumChallenge(4).isRunning&&(t--,n++);for(let r=t;r>=1;--r)LH(r+n).produceDimensions(LH(r),e.div(10));EternityChallenge(7).isRunning?LH(1).produceDimensions(InfinityDimension(QuantumChallenge(4).isRunning?7:8),e):LH(1).produceCurrency(Currency.timeShards,e),EternityChallenge(7).reward.applyEffect(t=>{InfinityDimension(8).amount=InfinityDimension(8).amount.plus(t.times(e.div(1e3)))})}};function zH(){if(!LH(8).isUnlocked)for(let e=5;e<=8;++e)LH(e).isUnlocked||LH(e).tryUnlock()}function BH(){let e=o.D1;return e=e.timesEffectsOf(DilationUpgrade.mdMultTickspeed,MasteryStudy(32),MasteryStudy(52),MasteryStudy(73),GluonUpgrade.blueRed(4),GluonUpgrade.blueRed(5),QuantumChallenge(3).reward),Achievement(142).isUnlocked&&(e=e.times(Achievements.power)),e}function VH(e){return e===8&&Achievement(142).unlock(),e}function HH(e){let t=UH(e);t.amount=Decimal.round(t.amount.plus(t.remainingUntil10)),t.bought=t.bought.add(t.remainingUntil10),VH(e)}const UH=class extends ZS{constructor(e){super(()=>player.meta.dimensions,e),this._baseCost=[null,o.E1,o.E2,o.E4,o.E6,o.E9,o.E13,o.E18,o.E24][e],this._baseCostMultiplier=[null,o.E3,o.E4,o.E5,o.E6,o.E8,o.E10,o.E12,o.E15][e]}get costScale(){return new ExponentialCostScaling({baseCost:this._baseCost,baseIncrease:this._baseCostMultiplier,costScale:QuantumChallenge(7).isRunning?o.NUMMAX:new Decimal(10),scalingCostThreshold:o.NUMMAX})}get cost(){return this.costScale.calculateCost(this.bought.div(o.E1).floor().add(this.costBumps))}get costBumps(){return this.data.costBumps}set costBumps(e){this.data.costBumps=e}get boughtBefore10(){return this.bought.mod(10)}get remainingUntil10(){return o.E1.sub(this.boughtBefore10)}get costUntil10(){return this.cost.times(this.remainingUntil10)}get howManyCanBuy(){return this.currencyAmount.dividedBy(this.cost).min(this.remainingUntil10).max(0).floor()}get rateOfChange(){let e=this.tier;return e===8||e>6&&QuantumChallenge(4).isRunning?o.D0:(QuantumChallenge(4).isRunning?UH(e+2).productionPerSecond:UH(e+1).productionPerSecond).times(getGameSpeedupForDisplay()).div(10)}get isProducing(){return QuantumChallenge(4).isRunning&&tier>6?!1:this.totalAmount.gt(0)}get currencyAmount(){return Currency.metaAntimatter.value}set currencyAmount(e){Currency.metaAntimatter.value=e}get continuumValue(){if(!this.isAvailableForPurchase)return o.D0;let e=this.costScale.getContinuumValue(this.currencyAmount,o.E1);return e?e.times(Laitela.matterExtraPurchaseFactor):o.D0}get continuumAmount(){return o.D0}get totalAmount(){return this.amount.max(this.continuumAmount)}get isAffordable(){return this.cost.lte(this.currencyAmount)}get isAffordableUntil10(){return this.costUntil10.lte(this.currencyAmount)}get isAvailableForPurchase(){return QuantumSpeedrunMilestone(17).isReached?!0:GH.boost.totalBoosts.add(4).lt(this.tier)||!(this.tier===1||UH(this.tier-1).totalAmount.gt(0))?!1:TimeStudy.metaDimensions.isBought}reset(){this.amount=o.D0,this.bought=o.D0}resetAmount(){this.amount=o.D0}get multiplier(){let e=GameCache.metaDimensionCommonMultiplier.value;return this.tier%2==1&&(e=e.timesEffectOf(QuantumChallenge(4).reward)),this.tier===1&&(e=e.timesEffectOf(GluonUpgrade.redGreen(3))),e=e.mul(Decimal.pow(GH.buyTenMultiplier,this.bought.div(10).floor())),e=e.mul(GH.boost.multiplierToNDTier(this.tier)),e}get productionPerSecond(){return this.totalAmount.times(this.multiplier)}get maxBought(){return this.costScale.getMaxBought(Decimal.floor(this.bought.div(10)).add(this.costBumps),this.currencyAmount,o.E1)}static createAccessor(){let e=Array.range(1,this.dimensionCount).map(e=>new this(e));e.unshift(null);let t=t=>{if(e[t]===void 0)throw TypeError(`Unknown Dimension referenced`);return e[t]};return Object.defineProperty(t,`index`,{value:e}),t}}.createAccessor();var WH=class{constructor(e,t){this.tier=e,this.amount=t}get isSatisfied(){return UH(this.tier).totalAmount.gte(this.amount)}};const GH={all:UH.index.compact(),get metaAMtoDimBoostExponent(){let e=QuantumChallenge(3).isRunning?player.records.thisQuantum.bestMA.plus(1).log2().max(1):new Decimal(8);return e=Effects.max(e,DilationUpgrade.mdEffectBuff),e=e.plusEffectOf(EternityChallenge(13).reward),e},get dimensionBoostMultiplier(){let e=player.records.thisQuantum.bestMA.sub(10).pow(this.metaAMtoDimBoostExponent).max(1);return EternityChallenge(14).isRunning||QuantumChallenge(7).isRunning?new Decimal(1):e},reset(){for(let e of GH.all)e.reset()},resetAmountUpToTier(e){for(let t of GH.all.slice(0,e))t.resetAmount()},get buyTenMultiplier(){let e=o.D2;return e=e.timesEffectOf(DilationUpgrade.mdBuffDT),e},tick(e){let t=7,n=1;QuantumChallenge(4).isRunning&&(t--,n++);for(let r=t;r>=1;--r)UH(r+n).produceDimensions(UH(r),e.div(10));UH(1).produceCurrency(Currency.metaAntimatter,e)},buyOne(e){let t=UH(e);if(!t.isAvailableForPurchase||!t.isAffordable)return!1;let n=t.cost;return t.currencyAmount=t.currencyAmount.minus(n).max(0),t.amount=t.amount.plus(1),t.bought=t.bought.add(1),VH(e),!0},buyMany(e){let t=UH(e);if(!t.isAvailableForPurchase||!t.isAffordableUntil10)return!1;let n=t.costUntil10;return t.currencyAmount=t.currencyAmount.minus(n).max(0),t.amount=t.amount.plus(t.remainingUntil10),t.bought=t.bought.add(t.remainingUntil10),VH(e),!0},buyAsManyAsYouCanBuy(e){let t=UH(e);if(!t.isAvailableForPurchase||!t.isAffordable)return!1;let n=t.howManyCanBuy,r=t.cost.times(n);return t.currencyAmount=t.currencyAmount.minus(r).max(0),t.amount=t.amount.plus(n),t.bought=t.bought.add(n),VH(e),!0},buyMax(e,t=1/0){let n=UH(e);if(!n.isAvailableForPurchase)return;let r=n.costUntil10,i=new Decimal(t);if(n.currencyAmount.gte(r)&&(n.currencyAmount=n.currencyAmount.minus(r).max(0),HH(e),i=i.sub(1)),i.lte(0))return;let a=n.maxBought;if(a===null)return;let o=a.quantity;o.gt(i)&&(o=new Decimal(i)),n.amount=n.amount.plus(o),n.currencyAmount=n.currencyAmount.minus(n.cost).max(0),n.bought=n.bought.add(o)},maxAll(){for(let e=1;e<9;e++)this.buyMax(e)},boost:{get power(){let e=new Decimal(2);return e=e.timesEffectsOf(DilationUpgrade.mdBuffDT,MasteryStudy(82)),QuantumChallenge(4).isRunning||QuantumChallenge(8).isRunning?o.D1:e},multiplierToNDTier(e){return this.power.pow(this.purchasedBoosts.add(1).sub(e)).clampMin(1)},get maxDimensionsUnlockable(){return 8},get canUnlockNewDimension(){return GH.boost.purchasedBoosts.add(4).lt(GH.boost.maxDimensionsUnlockable)},get maxBoosts(){return o.BEMAX},get canBeBought(){return!GH.boost.purchasedBoosts.gte(this.maxBoosts)},get lockText(){return null},get requirement(){return this.bulkRequirement(1)},get unlockedByBoost(){if(GH.boost.lockText!==null)return GH.boost.lockText;let e=GH.boost.purchasedBoosts,t=EternityMilestone.unlockAllND.isReached,n=``;!t&&e.lt(GH.boost.maxDimensionsUnlockable-4)&&(n=`unlock the ${formatInt(e.add(5))}th Dimension`);let r=`give a ${formatX(GH.boost.power,2,1)} multiplier `,i=`to the 1st Dimension`;e.gt(0)&&(i=`to Dimensions 1-${Decimal.min(e.add(1),8)}`),e.gte(GH.boost.maxDimensionsUnlockable-1)&&(i=`to all Dimensions`);let a=QuantumChallenge(4).isRunning||QuantumChallenge(8).isRunning?n:n===``?`${r} ${i}`:`${n} and ${r} ${i}`;return a===``?`Dimension Boosts are currently useless`:`Reset your Dimensions to ${a}`},get purchasedBoosts(){return Decimal.fromDecimal(player.meta.boosts.floor())},get totalBoosts(){return Decimal.floor(this.purchasedBoosts)},get startingDimensionBoosts(){return o.D0},manualRequest(e){this.request(e)},request(e){if(!GH.boost.requirement.isSatisfied||!GH.boost.canBeBought)return!1;e?this.maxBuy():this.dimensionBoostReset(1)},bulkRequirement(e){let t=GH.boost.purchasedBoosts.add(e),n=o.D20,r=Decimal.min(t.add(3),this.maxDimensionsUnlockable).toNumber(),i=new Decimal(0);return MasteryStudy(82)&&(i=i.plus(1)),n=n.add(t.sub(5).max(0).mul(o.D15.sub(i)).round()),n=Decimal.round(n),new WH(r,n)},maxBuy(){if(this.canUnlockNewDimension){this.requirement.isSatisfied&&this.dimensionBoostReset(1);return}if(!this.bulkRequirement(1).isSatisfied)return;if(!this.bulkRequirement(2).isSatisfied){this.dimensionBoostReset(1);return}let e=this.maxDimensionsUnlockable,t=o.D20,n=o.D0;MasteryStudy(82)&&(n=n.plus(1));let r=o.D15.sub(n),i=UH(e).totalAmount.sub(t).div(r);if(i=i.add(4),i.floor().add(1).lte(this.purchasedBoosts))return;i=i.sub(this.purchasedBoosts);let a=Decimal.min(o.BEMAX,i.floor().add(1));this.dimensionBoostReset(a)},dimensionBoostReset(e,t=!1,n=!1){let r=Decimal.min(e,this.maxBoosts.sub(player.meta.boosts));EventHub.dispatch(GAME_EVENT.META_DIMBOOST_BEFORE,r),player.meta.boosts=Decimal.max(o.D0,player.meta.boosts.add(r)),t||GH.reset(),n||Currency.metaAntimatter.reset(),EventHub.dispatch(GAME_EVENT.META_DIMBOOST_AFTER,r)}}};function KH(e){return e.allowedDimPathCount===2&&e.currDimPathCount<2&&TimeStudy.preferredPaths.dimension.path.length<2?(GameUI.notify.error(`You haven't selected a second preferred Dimension path.`),!0):!1}function qH(e,t=-1){let n=[],r=Math.floor(e/10)*10-1,i=TimeStudy(e).path,a=GameCache.currentStudyTree.value,o=(e,t)=>[...Array(Math.clampMin(t-e+1,0)).keys()].map(t=>t+e),s=!Perk.studyECRequirement.isBought;if(n.push(e),n.push(...o(11,Math.min(r,70))),n.push(e),e<71)return n;if(e<111)return n.push(...NormalTimeStudies.paths[i].filter(t=>t<=e)),n;if(t===11&&s)n.push(...NormalTimeStudies.paths[TIME_STUDY_PATH.ANTIMATTER_DIM].filter(t=>t<=e));else if(t===12&&s)n.push(...NormalTimeStudies.paths[TIME_STUDY_PATH.TIME_DIM].filter(t=>t<=e));else if(a.currDimPathCount===a.allowedDimPathCount||a.allowedDimPathCount===3)n.push(...TimeStudy.preferredPaths.dimension.studies),n.push(...o(71,103));else if(TimeStudy.preferredPaths.dimension.path.length>0)n.push(...TimeStudy.preferredPaths.dimension.studies);else if(a.currDimPathCount===0)return GameUI.notify.error(`You haven't selected a preferred Dimension path.`),n;e>=111&&n.push(111);let c=KH(a);if(e<121)return n;if(e<151)return n.push(...NormalTimeStudies.paths[TimeStudy(e).path].filter(t=>t<=e)),n;let l=a.pacePaths.map(e=>NormalTimeStudies.pathList.find(t=>t.name===e).path);if(V.isFullyCompleted&&!Pelle.isDoomed){let e=NormalTimeStudies.paths[TIME_STUDY_PATH.ACTIVE].concat(NormalTimeStudies.paths[TIME_STUDY_PATH.PASSIVE]).concat(NormalTimeStudies.paths[TIME_STUDY_PATH.IDLE]);n.push(...e)}else if(l.length===1)n.push(...NormalTimeStudies.paths[l[0]]);else if(TimeStudy.preferredPaths.pace.path!==0)n.push(...TimeStudy.preferredPaths.pace.studies);else if(l.length===0)return GameUI.notify.error(`You haven't selected a preferred Pace path.`),n;return n.push(...o(151,Math.min(e,201))),e<201||(s&&(t===11||t===12)||(TimeStudyTree.commitToGameState(n),n=[],TimeStudy.preferredPaths.dimension.path.length>0&&(n.push(...TimeStudy.preferredPaths.dimension.studies),TimeStudyTree.commitToGameState(n),n=[]),c||KH(GameCache.currentStudyTree.value),n.push(...o(211,Math.min(r,214))),n.push(e)),e<221||!V.isFullyCompleted)||n.push(...o(221,Math.max(e,234))),n}function JH(e){for(let e of TimeStudy.boughtNormalTS())e.refund();player.timestudy.studies=[],GameCache.timeStudies.invalidate(),player.celestials.v.STSpent=0;let t=TimeStudy.eternityChallenge.current();t!==void 0&&(t.refund(),player.challenge.eternity.unlocked=0),e||Tab.eternity.studies.show(),GameCache.currentStudyTree.invalidate()}var YH=class extends it{constructor(e,t){super(e),this.type=t}get cost(){return this.config.cost}get STCost(){let e=this.config.STCost;return VUnlocks.raUnlock.canBeApplied?e-2:e}refund(){Currency.timeTheorems.add(this.cost)}get isAffordable(){return Currency.timeTheorems.gte(this.cost)}get canBeBought(){return!0}},XH=class e{constructor(t){switch(this.spentTheorems=[new Decimal(0),0],this.invalidStudies=[],this.purchasedStudies=[],this.selectedStudies=[],this.startEC=!1,typeof t){case`string`:e.isValidImportString(t)&&this.attemptBuyArray(this.parseStudyImport(t),!1);break;case`object`:this.attemptBuyArray([...t],!1),this.selectedStudies=[...t];break;case`undefined`:break;default:throw Error(`Unrecognized input parameter for TimeStudyTree constructor`)}}static isValidImportString(t){if(t.trim()===``)return!1;let n=t.replaceAll(/ +/gu,``);return e.sets.forEach((e,t)=>n=n.replaceAll(RegExp(`${t},?`,`gu`),``)),/^,?((\d{2,3}(-\d{2,3})?)\b,?)*(\|\d{1,2}!?)?$/iu.test(n)}static get currentStudies(){let e=player.timestudy.studies.map(e=>TimeStudy(e));return player.challenge.eternity.unlocked!==0&&e.push(TimeStudy.eternityChallenge(player.challenge.eternity.unlocked)),e}static getECFromString(e){if(!this.isValidImportString(e))return 0;let t=e.split(`|`);return t.length===0?0:Number.parseInt(t[1],10)}static commitToGameState(e,t=!0,n=!1){for(let r of e){let e=typeof r==`number`?TimeStudy(r):r;e&&!e.isBought&&e.purchase(t),n&&e instanceof ECTimeStudyState&&EternityChallenge(e.id).start(t)}GameCache.currentStudyTree.invalidate()}static get sets(){return new Map([[`antimatter`,[71,81,91,101]],[`infinity`,[72,82,92,102]],[`time`,[73,83,93,103]],[`active`,[121,131,141]],[`passive`,[122,132,142]],[`idle`,[123,133,143]],[`light`,[221,223,225,227,231,233]],[`dark`,[222,224,226,228,232,234]],...Ra.unlocks.unlockHardV.canBeApplied?[[`triad`,[301,302,303,304].slice(0,Ra.unlocks.unlockHardV.effectOrDefault(0))]]:[]])}static truncateInput(e){let t=e.toLowerCase();return this.sets.forEach((e,n)=>t=t.replace(n,e.join(`,`))),t.replace(/[|,]$/u,``).replaceAll(` `,``).replaceAll(/,{2,}/gu,`,`).replaceAll(String.raw`,\|`,`|`)}static formatStudyList(e){return e.toLowerCase().replaceAll(` `,``).replaceAll(`,`,`, `).replace(`|`,` | `)}parseStudyImport(t){let n=new Set(GameDatabase.eternity.timeStudies.normal.map(e=>e.id)),r=[],i=e.truncateInput(t).split(`|`)[0];if(i.length>0){let e=i.split(`,`);for(let t of e){let e=t.split(`-`),i=e[1]?this.studyRangeToArray(e[0],e[1]):e;for(let e of i)if(n.has(Number.parseInt(e,10))){let t=TimeStudy(e);this.selectedStudies.push(t),r.push(t)}else this.invalidStudies.push(e)}}let a=t.split(`|`)[1];if(this.startEC=t.endsWith(`!`),!a)return r;let o=Number.parseInt(a,10);return!GameDatabase.eternity.timeStudies.ec.map(e=>e.id).includes(o)&&o!==0?(this.invalidStudies.push(`EC${o}`),r):(o!==0&&r.push(TimeStudy.eternityChallenge(o)),r)}studyRangeToArray(e,t){let n=[],r=this.checkTimeStudyNumber(e),i=this.checkTimeStudyNumber(t);if(r!==0&&i!==0)for(let e=r;e<=i;e++)TimeStudy(e)&&n.push(e);return n}checkTimeStudyNumber(e){let t=Number.parseFloat(e);return!TimeStudy(t)||TimeStudy(t).isTriad&&!Ra.canBuyTriad?0:t}attemptBuyArray(e,t){for(let n of e){let e=typeof n==`object`?n:TimeStudy(n);this.hasRequirements(e)&&this.buySingleStudy(e,t)}}hasRequirements(e,t=!1){if(!e||this.purchasedStudies.includes(e))return!1;let n=e=>typeof e==`number`?this.purchasedStudies.includes(TimeStudy(e)):e(),r=e.config,i;switch(r.reqType){case TS_REQUIREMENT_TYPE.AT_LEAST_ONE:i=r.requirement.some(e=>n(e));break;case TS_REQUIREMENT_TYPE.ALL:i=r.requirement.every(e=>n(e));break;case TS_REQUIREMENT_TYPE.DIMENSION_PATH:i=r.requirement.every(e=>n(e))&&this.currDimPathCount<this.allowedDimPathCount;break;default:throw Error(`Unrecognized TS requirement type: ${this.reqType}`)}if(e instanceof ECTimeStudyState){if(this.purchasedStudies.some(e=>e instanceof ECTimeStudyState))return!1;let r=!Perk.studyECRequirement.isBought&&e.config.secondary.forbiddenStudies?.some(e=>n(e));if(t)return i&&!r;let a=player.timestudy.theorem.plus(TimeTheorems.calculateTimeStudiesCost()).subtract(this.spentTheorems[0]).gte(e.cost),o=Perk.studyECRequirement.isBought||e.isEntryGoalMet;return i&&!r&&(e.isBought||o&&a)}return i}buySingleStudy(e,t){let n=e.config,r=VUnlocks.raUnlock.effectOrDefault(0),i=n.STCost&&n.requiresST.some(e=>this.purchasedStudies.includes(TimeStudy(e)))?Math.clampMin(n.STCost-r,0):0,a=Pelle.isDoomed?0:V.spaceTheorems,o=this.spentTheorems[1]+i<=a;if(t){let e=Currency.timeTheorems.value.add(GameCache.currentStudyTree.value.spentTheorems[0]);if(!this.spentTheorems[0].add(n.cost.gte(e))||!o)return}a===0&&i>0||(this.spentTheorems[0]=this.spentTheorems[0].add(n.cost),this.spentTheorems[1]+=i,this.purchasedStudies.push(e))}get currDimPathCount(){return[71,72,73].countWhere(e=>this.purchasedStudies.includes(TimeStudy(e)))}get allowedDimPathCount(){return DilationUpgrade.timeStudySplit.isBought||MasteryStudy(42).isBought?3:this.purchasedStudies.includes(TimeStudy(201))?2:1}get dimensionPaths(){let e=new Set,t=[TIME_STUDY_PATH.ANTIMATTER_DIM,TIME_STUDY_PATH.INFINITY_DIM,TIME_STUDY_PATH.TIME_DIM];for(let n of t){let t=NormalTimeStudies.pathList.find(e=>e.path===n);for(let n of this.purchasedStudies)if(t.studies.includes(n.id)){e.add(t.name);break}}return[...e]}get pacePaths(){let e=new Set,t=[TIME_STUDY_PATH.ACTIVE,TIME_STUDY_PATH.PASSIVE,TIME_STUDY_PATH.IDLE];for(let n of t){let t=NormalTimeStudies.pathList.find(e=>e.path===n);for(let n of this.purchasedStudies)if(t.studies.includes(n.id)){e.add(t.name);break}}return[...e]}get ec(){let e=this.purchasedStudies.find(e=>e instanceof ECTimeStudyState);return e?e.id:0}get exportString(){return`${this.purchasedStudies.filter(e=>e instanceof NormalTimeStudyState).map(e=>e.id).join(`,`)}|${this.ec}${player.challenge.eternity.current===0?``:`!`}`}};const ZH={};ZH.pathList=[{path:TIME_STUDY_PATH.ANTIMATTER_DIM,studies:[71,81,91,101],name:`Antimatter Dims`},{path:TIME_STUDY_PATH.INFINITY_DIM,studies:[72,82,92,102],name:`Infinity Dims`},{path:TIME_STUDY_PATH.TIME_DIM,studies:[73,83,93,103],name:`Time Dims`},{path:TIME_STUDY_PATH.ACTIVE,studies:[121,131,141],name:`Active`},{path:TIME_STUDY_PATH.PASSIVE,studies:[122,132,142],name:`Passive`},{path:TIME_STUDY_PATH.IDLE,studies:[123,133,143],name:`Idle`},{path:TIME_STUDY_PATH.LIGHT,studies:[221,223,225,227,231,233],name:`Light`},{path:TIME_STUDY_PATH.DARK,studies:[222,224,226,228,232,234],name:`Dark`}],ZH.paths=ZH.pathList.mapToObject(e=>e.path,e=>e.studies);var QH=class extends YH{constructor(e){let t=e.id>300?TIME_STUDY_TYPE.TRIAD:TIME_STUDY_TYPE.NORMAL;super(e,t),this._path=ZH.pathList.find(e=>e.studies.includes(this.id))?.path??TIME_STUDY_PATH.NONE}get isUnlocked(){return this.config.unlocked?.()??!0}get isTriad(){return this.id>300}get isBought(){return GameCache.timeStudies.value[this.id]}costsST(){return this.config.requiresST&&this.config.requiresST.some(e=>$H(e).isBought)}checkRequirement(){let e=e=>typeof e==`number`?$H(e).isBought:e(),t=GameCache.currentStudyTree.value;switch(this.config.reqType){case TS_REQUIREMENT_TYPE.AT_LEAST_ONE:return this.config.requirement.some(t=>e(t));case TS_REQUIREMENT_TYPE.ALL:return this.config.requirement.every(t=>e(t));case TS_REQUIREMENT_TYPE.DIMENSION_PATH:return this.config.requirement.every(t=>e(t))&&t&&t.currDimPathCount<t.allowedDimPathCount;default:throw TypeError(`Unrecognized TS requirement type: ${this.reqType}`)}}checkSetRequirement(){return(this.path===TIME_STUDY_PATH.ACTIVE||this.path===TIME_STUDY_PATH.PASSIVE||this.path===TIME_STUDY_PATH.IDLE)&&MasteryStudy(42).isBought||MasteryStudy(72).isBought?!0:this.costsST()?!Pelle.isDisabled(`V`)&&V.availableST>=this.STCost:!0}get canBeBought(){return this.checkRequirement()&&this.checkSetRequirement()}get isEffectActive(){return this.isBought}purchase(e=!1){return this.isBought||!this.isAffordable||!this.canBeBought||GameEnd.creditsEverClosed?!1:ImaginaryUpgrade(19).isLockingMechanics&&player.timestudy.studies.length===8?(e||ImaginaryUpgrade(19).tryShowWarningModal(),!1):(this.costsST()&&(player.celestials.v.STSpent+=this.STCost),player.timestudy.studies.push(this.id),player.requirementChecks.reality.maxStudies=Math.clampMin(player.requirementChecks.reality.maxStudies,player.timestudy.studies.length),this.id>300&&(player.requirementChecks.reality.noTriads=!1),Currency.timeTheorems.subtract(this.cost),GameCache.timeStudies.invalidate(),TimeStudyTree.commitToGameState([$H(this.id)]),this.id===181&&Pelle.isDoomed&&Achievement(186).unlock(),!0)}purchaseUntil(){TimeStudyTree.commitToGameState(buyStudiesUntil(this.id))}get path(){return this._path}};QH.studies=mapGameData(GameDatabase.eternity.timeStudies.normal,e=>new QH(e)),QH.all=QH.studies.filter(e=>e!==void 0);function $H(e){return QH.studies[e]}$H.boughtNormalTS=function(){return player.timestudy.studies.map(e=>$H(e))},$H.preferredPaths={dimension:{get path(){return player.timestudy.preferredPaths[0]},set path(e){let t=new Set([1,2,3]);player.timestudy.preferredPaths[0]=e.filter(e=>t.has(e))},get studies(){return player.timestudy.preferredPaths[0].flatMap(e=>ZH.paths[e])},get usePriority(){return this.path.length>1||$H(201).isBought||DilationUpgrade.timeStudySplit.isBought||PlayerProgress.realityUnlocked()}},pace:{get path(){return player.timestudy.preferredPaths[1]},set path(e){let t=[4,5,6];player.timestudy.preferredPaths[1]=t.includes(e)?e:0},get studies(){return ZH.paths[player.timestudy.preferredPaths[1]]}}};var eU=class extends YH{constructor(e){let t=TIME_STUDY_TYPE.NORMAL;super(e,t)}get isUnlocked(){return this.config.unlocked?.()??!0}get isBought(){return player.timestudy.mastery.includes(this.id)}checkRequirement(){let e=e=>typeof e==`number`?tU(e).isBought:e();switch(this.config.reqType){case TS_REQUIREMENT_TYPE.AT_LEAST_ONE:return this.config.requirement.some(t=>e(t));case TS_REQUIREMENT_TYPE.ALL:return this.config.requirement.every(t=>e(t));default:throw Error(`Unrecognized TS requirement type: ${this.reqType}`)}}get canBeBought(){return this.checkRequirement()}get isEffectActive(){return this.isBought}purchase(e=!1){return this.isBought||!this.isAffordable||!this.canBeBought||GameEnd.creditsEverClosed?!1:(player.timestudy.mastery.push(this.id),Currency.timeTheorems.subtract(this.cost),TimeStudyTree.commitToGameState([tU(this.id)]),!0)}};eU.studies=mapGameData(GameDatabase.eternity.timeStudies.mastery,e=>new eU(e)),eU.all=eU.studies.filter(e=>e!==void 0);function tU(e){return eU.studies[`M${e}`]}var nU=class extends YH{constructor(e){super(e,TIME_STUDY_TYPE.ETERNITY_CHALLENGE),this.invalidateRequirement()}get isBought(){return player.challenge.eternity.unlocked===this.id}purchase(e){if(GameEnd.creditsEverClosed)return!1;EternityChallenge(this.id).hasUnlocked=!0;let t=Date.now();if(this.isBought&&player.challenge.eternity.current===0&&!e)t-ui.lastClickTime<750?(ui.lastClickTime=0,EternityChallenge(this.id).requestStart()):ui.lastClickTime=t;else if(!this.isBought&&this.canBeBought)return ui.lastClickTime=0,player.challenge.eternity.unlocked=this.id,e||Tab.challenges.eternity.show(),player.challenge.eternity.requirementBits|=1<<this.id,Currency.timeTheorems.subtract(this.cost),TimeStudyTree.commitToGameState([$H.eternityChallenge(this.id)]),!0;return!1}purchaseUntil(){this.purchase(),TimeStudyTree.commitToGameState(buyStudiesUntil([void 0,171,171,171,143,42,121,111,123,151,181,181,181][this.id],this.id)),this.id===11?$H(191).purchase():this.id===12&&$H(193).purchase(),this.purchase()}get canBeBought(){return!this.isAffordable||player.challenge.eternity.unlocked!==0||!this.config.requirement.some(e=>typeof e==`string`?MasteryStudy(e.slice(1,3)).isBought:$H(e).isBought)?!1:this.allSecondaryRequirementsMet}get challenge(){return EternityChallenge(this.id)}get requirementTotal(){return this.config.secondary.required(this.challenge.completions)}get requirementCurrent(){let e=this.config.secondary.current();return this.cachedCurrentRequirement===void 0?this.cachedCurrentRequirement=e:typeof e==`number`?this.cachedCurrentRequirement=Math.max(this.cachedCurrentRequirement,e):this.cachedCurrentRequirement=this.cachedCurrentRequirement.clampMin(e),this.cachedCurrentRequirement}get allSecondaryRequirementsMet(){return Perk.studyECRequirement.isBought||!this.hasForbiddenStudies&&this.isEntryGoalMet}get hasForbiddenStudies(){return this.config.secondary.forbiddenStudies?.some(e=>$H(e).isBought)}get isEntryGoalMet(){if(this.wasRequirementPreviouslyMet||this.config.secondary.forbiddenStudies)return!0;let e=this.requirementCurrent,t=this.requirementTotal;return typeof e==`number`?e>=t:e.gte(t)}get wasRequirementPreviouslyMet(){return this.id===11||this.id===12?!1:(player.challenge.eternity.requirementBits&1<<this.id)!=0}invalidateRequirement(){this.cachedCurrentRequirement=void 0}};nU.studies=mapGameData(GameDatabase.eternity.timeStudies.ec,e=>new nU(e)),$H.eternityChallenge=function(e){return nU.studies[e]},$H.eternityChallenge.current=function(){return player.challenge.eternity.unlocked?$H.eternityChallenge(player.challenge.eternity.unlocked):void 0},nU.invalidateCachedRequirements=function(){nU.studies.forEach(e=>e.invalidateRequirement())};var rU=class extends YH{constructor(e){super(e,TIME_STUDY_TYPE.DILATION)}get isBought(){return player.dilation.studies.includes(this.id)}get canBeBought(){return this.isAffordable&&this.config.requirement()}get description(){return this.config.description}get cost(){return typeof this.config.cost==`function`?this.config.cost():this.config.cost}get totalTimeTheoremRequirement(){return this.id===1?12900:0}purchase(e=!1){if(this.isBought||!this.canBeBought)return!1;if(this.id===1){if(e||Tab.eternity.dilation.show(),Perk.autounlockDilation1.canBeApplied)for(let e of[4,5,6])player.dilation.upgrades.add(e);if(Perk.autounlockDilation2.canBeApplied)for(let e of[7,8,9])player.dilation.upgrades.add(e);Pelle.isDoomed||Currency.tachyonParticles.bumpTo(Perk.startTP.effectOrDefault(0)),Ra.unlocks.unlockDilationStartingTP.canBeApplied&&!isInCelestialReality()&&!Pelle.isDoomed&&Currency.tachyonParticles.bumpTo(getTP(Ra.unlocks.unlockDilationStartingTP.effectOrDefault(0),!1)),TabNotification.dilationAfterUnlock.tryTrigger()}else this.id===6&&(e||(Tab.dimensions.meta.show(!0),Currency.metaAntimatter.bumpTo(10),Achievement(141).unlock()));return player.dilation.studies.push(this.id),Currency.timeTheorems.subtract(this.cost),!0}};rU.studies=mapGameData(GameDatabase.eternity.timeStudies.dilation,e=>new rU(e)),$H.dilation=rU.studies[1],$H.timeDimension=function(e){return rU.studies[e-3]},$H.metaDimensions=rU.studies[6],$H.masteryStudies=rU.studies[7],$H.pairProduction=rU.studies[8],$H.quantumChallenges=rU.studies[9],$H.pairedChallenges=rU.studies[10],$H.duplicants=rU.studies[11],$H.boughtDilationTS=function(){return player.dilation.studies.map(e=>rU.studies[e])};var iU=class{constructor(e,t,n){this._from=e,this._to=t,this._override=n}get from(){return this._from}get to(){return this._to}get isOverridden(){return this._override!==void 0&&this._override()}get isSatisfied(){return this.isOverridden||this._from.isBought}};$H.allConnections=function(){let e=e=>$H(e),t=e=>$H.eternityChallenge(e);return[[e(11),e(21)],[e(11),e(22)],[e(21),e(31)],[e(22),e(33)],[e(22),e(32)],[e(31),e(41)],[e(32),e(42)],[e(41),e(51)],[e(42),e(51)],[e(42),t(5)],[e(42),e(62),()=>!Perk.bypassEC5Lock.isBought],[e(51),e(61)],[t(5),e(62),()=>Perk.bypassEC5Lock.isBought],[e(61),e(71)],[e(61),e(72)],[e(61),e(73)],[e(71),e(81)],[e(72),e(82)],[e(73),e(83)],[e(81),e(91)],[e(82),e(92)],[e(83),e(93)],[e(91),e(101)],[e(92),e(102)],[e(93),e(103)],[e(101),e(111)],[e(102),e(111)],[e(103),e(111)],[e(111),t(7)],[e(111),e(121)],[e(111),e(122)],[e(111),e(123)],[e(121),e(131)],[e(122),e(132)],[e(123),e(133)],[e(121),t(6)],[e(123),t(8)],[e(131),e(141)],[e(132),e(142)],[e(133),e(143)],[e(141),e(151)],[e(142),e(151)],[e(143),e(151)],[e(143),t(4)],[e(151),t(9)],[e(151),e(161)],[e(151),e(162)],[e(161),e(171)],[e(162),e(171)],[e(171),t(1)],[e(171),t(2)],[e(171),t(3)],[e(171),e(181),()=>!Perk.bypassEC1Lock.isBought||!Perk.bypassEC2Lock.isBought||!Perk.bypassEC3Lock.isBought],[t(1),e(181),()=>Perk.bypassEC1Lock.isBought],[t(2),e(181),()=>Perk.bypassEC2Lock.isBought],[t(3),e(181),()=>Perk.bypassEC3Lock.isBought],[e(181),t(10)],[t(10),e(191)],[t(10),e(192)],[t(10),e(193)],[e(192),e(201)],[e(191),e(211)],[e(191),e(212)],[e(193),e(213)],[e(193),e(214)],[e(211),e(221)],[e(211),e(222)],[e(212),e(223)],[e(212),e(224)],[e(213),e(225)],[e(213),e(226)],[e(214),e(227)],[e(214),e(228)],[e(221),e(231)],[e(222),e(231)],[e(223),e(232)],[e(224),e(232)],[e(225),e(233)],[e(226),e(233)],[e(227),e(234)],[e(228),e(234)],[e(231),t(11)],[e(232),t(11)],[e(233),t(12)],[e(234),t(12)],[t(11),$H.dilation],[t(12),$H.dilation],[$H.dilation,$H.timeDimension(5)],[$H.timeDimension(5),$H.timeDimension(6)],[$H.timeDimension(6),$H.timeDimension(7)],[$H.timeDimension(7),$H.timeDimension(8)],[$H.timeDimension(8),$H.metaDimensions],[$H.metaDimensions,$H.masteryStudies]].map(e=>new iU(e[0],e[1],e[2]))}(),tU.allConnections=(function(){let e=e=>tU(e),t=e=>$H.eternityChallenge(e);return[[e(11),e(21)],[e(11),e(22)],[e(11),e(23)],[e(21),e(31)],[e(21),e(32)],[e(22),e(33)],[e(22),e(34)],[e(23),e(35)],[e(23),e(36)],[t(13),e(31)],[t(13),e(32)],[t(13),e(33)],[t(14),e(34)],[t(14),e(35)],[t(14),e(36)],[$H.pairProduction,t(13)],[$H.pairProduction,t(14)],[e(42),$H.pairProduction],[e(41),e(42)],[e(43),e(42)],[e(51),e(41)],[e(52),e(43)],[$H.quantumChallenges,e(42)],[$H.pairedChallenges,$H.quantumChallenges],[e(61),$H.pairedChallenges],[e(62),$H.pairedChallenges],[e(71),e(61)],[e(72),$H.pairedChallenges],[e(73),e(62)],[e(81),e(71)],[e(82),e(73)],[e(91),e(81)],[e(92),e(82)],[$H.duplicants,e(72)]].map(e=>new iU(e[0],e[1],e[2]))})();function aU(){initializeChallengeCompletions(),initializeResourcesAfterEternity(),resetInfinityRuns(),InfinityDimensions.fullReset(),Replicanti.reset(),resetChallengeStuff(),AntimatterDimensions.reset(),player.replicanti.galaxies=o.D0,Currency.infinityPoints.reset(),InfinityDimensions.resetAmount(),player.records.bestInfinity.bestIPminEternity=o.D0,player.records.thisEternity.bestEPmin=o.D0,resetTimeDimensions(),resetTickspeed(),player.records.thisInfinity.maxAM=o.D0,player.records.thisEternity.maxAM=o.D0,Currency.antimatter.reset(),playerInfinityUpgradesOnReset(),AchievementTimers.marathon2.reset(),ECTimeStudyState.invalidateCachedRequirements()}var oU=class extends it{constructor(e,t){let n=e.effect,r=Wt([{},e]);r.effect=()=>n(t.completions),super(r),this._challenge=t}get isEffectActive(){return this._challenge.completions>0}},sU=class extends it{constructor(e){super(e),this._reward=new oU(e.reward,this)}get fullId(){return this._fullId}get isUnlocked(){return player.challenge.eternity.unlocked===this.id}get isRunning(){return player.challenge.eternity.current===this.id}get isEffectActive(){return this.isRunning}get hasUnlocked(){return(player.reality.unlockedEC&1<<this.id)!=0}set hasUnlocked(e){e&&(player.reality.unlockedEC|=1<<this.id)}get completions(){let e=player.challenge.eternity.completions[this.id-1];return e===void 0?0:e}set completions(e){player.challenge.eternity.completions[this.id-1]=Math.min(e,this.maxCompletions)}get maxCompletions(){return Enslaved.isRunning&&this.id===1?1e3:5}get remainingCompletions(){return this.maxCompletions-this.completions}get isFullyCompleted(){return this.completions===this.maxCompletions}get maxValidCompletions(){if(this.id!==4&&this.id!==12)return this.maxCompletions;let e=this.completions;for(;e<this.maxCompletions&&this.isWithinRestrictionAtCompletions(e);)e++;return e}get gainedCompletionStatus(){let e={gainedCompletions:0,hasMoreCompletions:!1,totalCompletions:this.completions};if(this.isFullyCompleted)return e;if(!Achievement(152).isUnlocked)return this.canBeCompleted&&(++e.totalCompletions,e.gainedCompletions=1),e;let t=this.completionsAtIP(player.records.thisEternity.maxIP),n=this.maxValidCompletions;return t>n&&(t=n,e.failedRestriction=this.config.failedRestriction),e.totalCompletions=t,e.gainedCompletions=t-this.completions,e.hasMoreCompletions=this.completions+e.gainedCompletions<this.maxCompletions,e.nextGoalAt=this.goalAtCompletions(e.totalCompletions),e}get initialGoal(){return Pelle.isDoomed&&this.config.pelleGoal?this.config.pelleGoal:this.config.goal}get goalIncrease(){return Pelle.isDoomed&&this.config.pelleGoalIncrease?this.config.pelleGoalIncrease:this.config.goalIncrease}get currentGoal(){return this.goalAtCompletions(this.completions)}get isGoalReached(){return player.records.thisEternity.maxIP.gte(this.currentGoal)}get canBeCompleted(){return this.isGoalReached&&this.isWithinRestriction}goalAtCompletions(e){return e>0?this.initialGoal.times(this.goalIncrease.pow(Math.min(e,this.maxCompletions-1))):this.initialGoal}completionsAtIP(e){if(e.lt(this.initialGoal))return 0;let t=e.dividedBy(this.initialGoal).max(1).log10().div(this.goalIncrease.max(1).log10()).add(1);return Decimal.min(Decimal.floor(t),this.maxCompletions).toNumber()}addCompletion(e=!1){this.completions++,(this.id===4||this.id===12)&&e&&this.tryFail(!0),this.id===6&&GameCache.dimensionMultDecrease.invalidate(),this.id===11&&GameCache.tickSpeedMultDecrease.invalidate()}requestStart(){if(!(!Tab.challenges.eternity.isUnlocked||this.isRunning)&&!GameEnd.creditsEverClosed){if(!player.options.confirmations.challenges){this.start();return}this.isUnlocked&&Modal.startEternityChallenge.show(this.id)}}start(e){if(cU.isRunning||!this.isUnlocked)return!1;let t=player.requirementChecks.reality.slowestBH.lte(1e-300);if(this.id===12&&ImaginaryUpgrade(24).isLockingMechanics&&Ra.isRunning&&t)return e||ImaginaryUpgrade(24).tryShowWarningModal(`enter Eternity Challenge 12`),!1;if(this.id===7&&ImaginaryUpgrade(15).isLockingMechanics&&TimeDimension(1).amount.gt(0))return e||ImaginaryUpgrade(15).tryShowWarningModal(`enter Eternity Challenge 7`),!1;let n=getGameSpeedupFactor();return Player.canEternity&&eternity(!1,e,{enteringEC:!0}),player.challenge.eternity.current=this.id,this.id===12&&(n.lt(.001)&&SecretAchievement(42).unlock(),player.requirementChecks.reality.slowestBH=o.D1),Enslaved.isRunning&&(this.id===6&&this.completions===5&&EnslavedProgress.ec6.giveProgress(),!e&&EnslavedProgress.challengeCombo.hasProgress&&Tab.challenges.normal.show()),aU(),!0}get reward(){return this._reward}get isWithinRestriction(){return this.isWithinRestrictionAtCompletions(this.completions)}isWithinRestrictionAtCompletions(e){return this.config.restriction===void 0||this.config.checkRestriction(this.config.restriction(e))}exit(e){Player.isInAntimatterChallenge&&Player.antimatterChallenge.exit(),player.challenge.eternity.current=0,e||(player.respec=!0),eternity(!0)}fail(e=!1){this.exit(!1);let t;e?this.id===4?t=e=>`Auto Eternity Challenge completion completed Eternity Challenge ${this.id} and made the next tier require having less Infinities (${quantifyInt(`Infinity`,e)} or less) than you had`:this.id===12&&(t=e=>`Auto Eternity Challenge completion completed Eternity Challenge ${this.id} and made the next tier require spending less time in it (${quantify(`in-game second`,e,0,1)} or less) than you had spent`):this.id===4?t=e=>`You failed Eternity Challenge ${this.id} due to having more than ${quantifyInt(`Infinity`,e)}`:this.id===12&&(t=e=>`You failed Eternity Challenge ${this.id} due to spending more than ${quantify(`in-game second`,e,0,1)} in it`),Modal.message.show(`${t(this.config.restriction(this.completions))}, which has caused you to exit it.`,{closeEvent:GAME_EVENT.REALITY_RESET_AFTER},1),EventHub.dispatch(GAME_EVENT.CHALLENGE_FAILED)}tryFail(e=!1){return this.isRunning&&!this.isWithinRestriction?(this.fail(e),!0):!1}};const cU=sU.createAccessor(GameDatabase.challenges.eternity);Object.defineProperty(cU,`current`,{get:()=>player.challenge.eternity.current>0?cU(player.challenge.eternity.current):void 0}),Object.defineProperty(cU,`isRunning`,{get:()=>player.challenge.eternity.current!==0});const lU={all:cU.index.compact(),get completions(){return lU.all.map(e=>e.completions).nSum()},get maxCompletions(){return lU.all.map(e=>e.maxCompletions).nSum()},get remainingCompletions(){return lU.all.map(e=>e.remainingCompletions).nSum()},autoComplete:{tick(){let e=TimeDimension(1).amount.gt(0),t=RealityUpgrade(12).isLockingMechanics||ImaginaryUpgrade(15).isLockingMechanics&&e&&!Array.range(1,6).some(e=>!cU(e).isFullyCompleted);if(!player.reality.autoEC||Pelle.isDisabled(`autoec`)||t){player.reality.lastAutoEC=Decimal.clampMax(player.reality.lastAutoEC,this.interval);return}if(Ra.unlocks.instantECAndRealityUpgradeAutobuyers.canBeApplied){let t=this.nextChallenge;for(;t!==void 0;){for(;!t.isFullyCompleted;)t.addCompletion(!0);if(t=this.nextChallenge,ImaginaryUpgrade(15).isLockingMechanics&&t?.id===7&&e)break}return}let n=this.interval,r=this.nextChallenge;for(;player.reality.lastAutoEC.sub(n).gt(0)&&r!==void 0;)player.reality.lastAutoEC=player.reality.lastAutoEC.sub(n),r.addCompletion(!0),r=this.nextChallenge;player.reality.lastAutoEC=player.reality.lastAutoEC.mod(n)},get nextChallenge(){return lU.all.find(e=>!e.isFullyCompleted)},get interval(){if(!Perk.autocompleteEC1.canBeApplied)return o.BEMAX;let e=Effects.min(Number.MAX_VALUE,Perk.autocompleteEC1,Perk.autocompleteEC2,Perk.autocompleteEC3);return e=e.div(VUnlocks.fastAutoEC.effectOrDefault(1)),TimeSpan.fromMinutes(e).totalMilliseconds}}};var uU=class{constructor(e,t){this.tier=e,this.amount=t}get isSatisfied(){return AntimatterDimension(this.tier).totalAmount.gte(this.amount)}};const dU={get power(){if(NormalChallenge(8).isRunning||cU(13).isRunning)return o.D1;let e=new Decimal(Effects.max(2,InfinityUpgrade.dimboostMult,InfinityChallenge(7).reward,InfinityChallenge(7),TimeStudy(81)));return TimeStudy.metaDimensions.isBought&&!QuantumChallenge(3).isRunning&&(e=e.times(MetaDimensions.dimensionBoostMultiplier)),e=e.timesEffectsOf(TimeStudy(83),TimeStudy(231),Achievement(117),Achievement(142)),e},multiplierToNDTier(e){return dU.power.pow(this.purchasedBoosts.add(1).sub(e)).clampMin(1)},get maxDimensionsUnlockable(){return NormalChallenge(10).isRunning?6:8},get canUnlockNewDimension(){return dU.purchasedBoosts.add(4).lt(dU.maxDimensionsUnlockable)},get maxBoosts(){return Ra.isRunning||QuantumChallenge(6).isRunning?o.D0:InfinityChallenge(1).isRunning?o.D2:NormalChallenge(8).isRunning?o.D5:o.BEMAX},get canBeBought(){return!(dU.purchasedBoosts.gte(this.maxBoosts)||player.records.thisInfinity.maxAM.gt(Player.infinityGoal)&&(!player.break||Player.isInAntimatterChallenge))},get lockText(){if(dU.purchasedBoosts.gte(this.maxBoosts)){if(Ra.isRunning)return`Locked (Ra's Reality)`;if(QuantumChallenge(6).isRunning)return`Locked (Quantum Challenge 6)`;if(InfinityChallenge(1).isRunning)return`Locked (Infinity Challenge 1)`;if(NormalChallenge(8).isRunning)return`Locked (8th Antimatter Dimension Autobuyer Challenge)`}return null},get requirement(){return this.bulkRequirement(1)},get supersonicScalingStart(){return QuantumChallenge(5).isRunning?o.D0:new Decimal(56e4)},get metaiunalScalingStart(){return new Decimal(1e8)},bulkRequirement(e){let t=this.purchasedBoosts.plus(e),n=o.D20,r=Decimal.min(t.add(3),this.maxDimensionsUnlockable).toNumber(),i=Effects.sum(TimeStudy(211),TimeStudy(222),MasteryStudy(31));if(cU(5).isRunning&&(t=t.pow(3).floor()),t.gte(this.metaiunalScalingStart)&&(t=t.sub(this.metaiunalScalingStart).pow(3).add(this.metaiunalScalingStart)),t.gte(this.supersonicScalingStart)){let e=QuantumChallenge(5).isRunning?200:12;t=t.sub(this.supersonicScalingStart).mul(e).add(this.supersonicScalingStart)}return r===6&&NormalChallenge(10).isRunning?n=n.add(t.sub(3).mul(o.D20.sub(i)).round()):r===8&&(n=n.add(t.sub(5).mul(o.D15.sub(i)).round())),n=n.sub(Effects.sum(InfinityUpgrade.resetBoost)),InfinityChallenge(5).isCompleted&&(n=n.sub(1)),n=n.times(InfinityUpgrade.resetBoost.chargedEffect.effectOrDefault(1)),n=Decimal.round(n),new uU(r,n)},get unlockedByBoost(){if(dU.lockText!==null)return dU.lockText;let e=dU.purchasedBoosts,t=EternityMilestone.unlockAllND.isReached,n=``;!t&&e.lt(dU.maxDimensionsUnlockable-4)?n=`unlock the ${formatInt(e.add(5))}th Dimension`:e.eq(4)&&!NormalChallenge(10).isRunning&&!cU(3).isRunning&&(n=`unlock Sacrifice`);let r=`give a ${formatX(dU.power,2,1)} multiplier `,i=`to the 1st Dimension`;e.gt(0)&&(i=`to Dimensions 1-${Decimal.min(e.add(1),8)}`),e.gte(dU.maxDimensionsUnlockable-1)&&(i=`to all Dimensions`);let a=NormalChallenge(8).isRunning?n:n===``?`${r} ${i}`:`${n} and ${r} ${i}`;return a===``?`Dimension Boosts are currently useless`:(Perk.antimatterNoReset.isBought||Achievement(111).canBeApplied)&&(!Pelle.isDoomed||PelleUpgrade.dimBoostResetsNothing.isBought)||EternityMilestone.noADReset.isReached?a[0].toUpperCase()+a.slice(1):`Reset your Dimensions to ${a}`},get purchasedBoosts(){return Decimal.fromDecimal(player.dimensionBoosts.floor())},get imaginaryBoosts(){return Ra.isRunning?o.D0:ImaginaryUpgrade(12).effectOrDefault(o.D0).mul(ImaginaryUpgrade(23).effectOrDefault(o.D1))},get totalBoosts(){return Decimal.floor(this.purchasedBoosts.add(this.imaginaryBoosts))},get startingDimensionBoosts(){return InfinityUpgrade.skipResetGalaxy.isBought?o.D4:InfinityUpgrade.skipReset3.isBought?o.D3:InfinityUpgrade.skipReset2.isBought?o.D2:InfinityUpgrade.skipReset1.isBought?o.D1:o.D0}};function fU(e,t=!1,n=!1,r=!1){if(Currency.antimatter.gt(Player.infinityLimit))return;let i=Decimal.min(e,dU.maxBoosts.sub(player.dimensionBoosts));EventHub.dispatch(GAME_EVENT.DIMBOOST_BEFORE,i),player.dimensionBoosts=Decimal.max(o.D0,player.dimensionBoosts.add(i)),resetChallengeStuff();let a=EternityMilestone.noADReset.isReached;(t||!a)&&(AntimatterDimensions.reset(),player.sacrificed=o.D0,resetTickspeed()),pU(r);let s=Pelle.isDoomed?PelleUpgrade.dimBoostResetsNothing.canBeApplied:Achievement(111).isUnlocked||Perk.antimatterNoReset.canBeApplied;!n&&s?Currency.antimatter.bumpTo(Currency.antimatter.startingValue):Currency.antimatter.reset(),EventHub.dispatch(GAME_EVENT.DIMBOOST_AFTER,i)}function pU(e){e||Player.isInAntimatterChallenge||(InfinityUpgrade.skipResetGalaxy.isBought&&player.dimensionBoosts.lt(4)?(player.dimensionBoosts=o.D4,player.galaxies.lt(1)&&(player.galaxies=o.D1)):InfinityUpgrade.skipReset3.isBought&&player.dimensionBoosts.lt(3)?player.dimensionBoosts=o.D3:InfinityUpgrade.skipReset2.isBought&&player.dimensionBoosts.lt(2)?player.dimensionBoosts=o.D2:InfinityUpgrade.skipReset1.isBought&&player.dimensionBoosts.lt(1)&&(player.dimensionBoosts=o.D1))}function mU(e){if(!(Currency.antimatter.gt(Player.infinityLimit)||!dU.requirement.isSatisfied)&&dU.canBeBought&&!GameEnd.creditsEverClosed){if(player.options.confirmations.dimensionBoost){Modal.dimensionBoost.show({bulk:e});return}hU(e)}}function hU(e){Currency.antimatter.gt(Player.infinityLimit)||!dU.requirement.isSatisfied||dU.canBeBought&&(Tutorial.turnOffEffect(TUTORIAL_STATE.DIMBOOST),BreakInfinityUpgrade.autobuyMaxDimboosts.isBought&&e?gU():fU(1))}function gU(){if(dU.canUnlockNewDimension){dU.requirement.isSatisfied&&fU(1);return}if(!dU.bulkRequirement(1).isSatisfied)return;if(!dU.bulkRequirement(2).isSatisfied){fU(1);return}let e=dU.maxDimensionsUnlockable,t=o.D20,n=Effects.sum(TimeStudy(211),TimeStudy(222),MasteryStudy(31)),r;e===6?r=o.D20.sub(n):e===8&&(r=o.D15.sub(n)),t=t.sub(Effects.sum(InfinityUpgrade.resetBoost)),InfinityChallenge(5).isCompleted&&(t=t.sub(1)),r=r.times(InfinityUpgrade.resetBoost.chargedEffect.effectOrDefault(1)),t=t.times(InfinityUpgrade.resetBoost.chargedEffect.effectOrDefault(1));let i=AntimatterDimension(e).totalAmount.sub(t).div(r);if(cU(5).isRunning&&(i=i.cbrt()),i.gte(dU.supersonicScalingStart)){let e=QuantumChallenge(5).isRunning?200:12;i=i.sub(dU.supersonicScalingStart).div(e).add(dU.supersonicScalingStart)}if(i.gte(dU.metaiunalScalingStart)&&(i=i.sub(dU.metaiunalScalingStart).pow(2).add(dU.metaiunalScalingStart)),i=i.add(NormalChallenge(10).isRunning?2:4),i.floor().add(1).lte(dU.purchasedBoosts))return;i=i.sub(dU.purchasedBoosts);let a=Decimal.min(o.BEMAX,i.floor().add(1));fU(a)}var _U=class{static get isVisible(){return Achievement(18).isUnlocked||PlayerProgress.realityUnlocked()}static get canSacrifice(){return DimBoost.purchasedBoosts.gt(4)&&!EternityChallenge(3).isRunning&&this.nextBoost.gt(1)&&AntimatterDimension(8).totalAmount.gt(0)&&Currency.antimatter.lt(Player.infinityLimit)&&!Enslaved.isRunning}static get disabledCondition(){return NormalChallenge(10).isRunning?`8th Dimensions are disabled`:EternityChallenge(3).isRunning?`Eternity Challenge 3`:DimBoost.purchasedBoosts.lt(5)?`Requires ${formatInt(5)} Dimension Boosts`:AntimatterDimension(8).totalAmount.eq(0)?`No 8th Antimatter Dimensions`:this.nextBoost.lte(1)?`${formatX(1)} multiplier`:Player.isInAntimatterChallenge?`Challenge goal reached`:`Need to Crunch`}static getSacrificeDescription(e){let t=(t,n)=>t in e?e[t]:n,n=2,r=1,i=`(log₁₀(AD1)/${formatInt(10)})`;t(`Challenge8isRunning`,NormalChallenge(8).isRunning)?(n=1,i=`x`):t(`InfinityChallenge2isCompleted`,InfinityChallenge(2).isCompleted)&&(n=1/120,r=3,i=`AD1`);let a=(1+(t(`Achievement32`,Achievement(32).isEffectActive)?Achievement(32).config.effect:0)+(t(`Achievement57`,Achievement(57).isEffectActive)?Achievement(57).config.effect:0))*(1+(t(`Achievement88`,Achievement(88).isEffectActive)?Achievement(88).config.effect:0)+(t(`TimeStudy228`,TimeStudy(228).isEffectActive)?TimeStudy(228).config.effect:0))*n;return i+(a===1?``:formatPow(a,r,r))}static get sacrificeExponent(){let e=NormalChallenge(8).isRunning?o.D1:InfinityChallenge(2).isCompleted?o.D1.div(120):o.D2,t=Effects.sum(Achievement(32),Achievement(57)).add(1),n=Effects.sum(Achievement(88),TimeStudy(228)).add(1),r=TimeStudy(304).effectOrDefault(1);return e.mul(t).mul(n).mul(r)}static get nextBoost(){let e=AntimatterDimension(1).amount;if(e.eq(0))return o.D1;let t=player.sacrificed.clampMin(1);return(NormalChallenge(8).isRunning?e.pow(.05).dividedBy(t.pow(.04)).clampMin(1).times(e.pow(.05).dividedBy(t.plus(e).pow(.04))):InfinityChallenge(2).isCompleted?e.dividedBy(t):new Decimal(e.max(1).log10().div(10).div(Decimal.max(t.max(1).log10().div(10),1)))).clampMin(1).pow(this.sacrificeExponent)}static get totalBoost(){return player.sacrificed.eq(0)?o.D1:NormalChallenge(8).isRunning?player.chall8TotalSacrifice:(InfinityChallenge(2).isCompleted?player.sacrificed:player.sacrificed.max(1).log10().div(10)).clampMin(1).pow(this.sacrificeExponent)}};function vU(){if(!_U.canSacrifice||(!player.break||!InfinityChallenge.isRunning&&NormalChallenge.isRunning)&&Currency.antimatter.gt(o.NUMMAX)||NormalChallenge(8).isRunning&&_U.totalBoost.gte(o.NUMMAX))return!1;EventHub.dispatch(GAME_EVENT.SACRIFICE_RESET_BEFORE);let e=_U.nextBoost;player.chall8TotalSacrifice=player.chall8TotalSacrifice.times(e),player.sacrificed=player.sacrificed.plus(AntimatterDimension(1).amount);let t=Achievement(118).canBeApplied;return NormalChallenge(8).isRunning?(t||AntimatterDimensions.reset(),Currency.antimatter.reset()):t||AntimatterDimensions.resetAmountUpToTier(NormalChallenge(12).isRunning?6:7),player.requirementChecks.infinity.noSacrifice=!1,EventHub.dispatch(GAME_EVENT.SACRIFICE_RESET_AFTER),!0}function yU(){!_U.isVisible||!_U.canSacrifice||(player.options.confirmations.sacrifice?Modal.sacrifice.show():vU())}function bU(){fw.display(`a-implode`,2)}function xU(){let e=Player.antimatterChallenge;!e&&!NormalChallenge(1).isCompleted&&NormalChallenge(1).complete(),e&&(InfinityChallenge.isRunning&&!InfinityChallenge.current.isCompleted&&TabNotification.ICUnlock.clearTrigger(),e.complete(),e.updateChallengeTime(),player.options.retryChallenge||(player.challenge.normal.current=0,player.challenge.infinity.current=0))}function SU(){Player.canCrunch&&(GameEnd.creditsEverClosed||(player.options.confirmations.bigCrunch&&(!PlayerProgress.infinityUnlocked()||player.break)?Modal.bigCrunch.show():CU()))}function CU(e=!1){Player.canCrunch&&(!e&&player.options.animations.bigCrunch&&!fw.isDisplaying?(bU(),setTimeout(wU,1e3)):wU())}function wU(e=!1,t=Player.isInAntimatterChallenge&&player.options.retryChallenge){!e&&!Player.canCrunch||(Player.canCrunch&&(EventHub.dispatch(GAME_EVENT.BIG_CRUNCH_BEFORE),TU(),Pelle.isDoomed&&PelleStrikes.infinity.trigger()),OU(t),EventHub.dispatch(GAME_EVENT.BIG_CRUNCH_AFTER))}function TU(){EU();let e=gainedInfinityPoints();Currency.infinityPoints.add(e),Currency.infinities.add(gainedInfinities().round()),DU(!PlayerProgress.infinityUnlocked()),kU()}function EU(){player.records.bestInfinity.bestIPminEternity=player.records.bestInfinity.bestIPminEternity.clampMin(player.records.thisInfinity.bestIPmin),player.records.thisInfinity.bestIPmin=o.D0,player.records.bestInfinity.trueTime=Math.min(player.records.bestInfinity.trueTime,player.records.thisInfinity.trueTime),player.records.thisEternity.bestInfinitiesPerMs=player.records.thisEternity.bestInfinitiesPerMs.clampMin(gainedInfinities().round().dividedBy(Decimal.clampMin(33,player.records.thisInfinity.realTime)));let e=gainedInfinityPoints();if(addInfinityTime(player.records.thisInfinity.trueTime,player.records.thisInfinity.time,player.records.thisInfinity.realTime,e,gainedInfinities().round()),player.records.bestInfinity.time=Decimal.min(player.records.bestInfinity.time,player.records.thisInfinity.time),player.records.bestInfinity.realTime=Decimal.min(player.records.bestInfinity.realTime,player.records.thisInfinity.realTime),player.requirementChecks.reality.noInfinities=!1,!player.requirementChecks.infinity.maxAll){let t=e.dividedBy(Decimal.clampMin(33,player.records.thisInfinity.realTime));player.records.thisEternity.bestIPMsWithoutMaxAll=Decimal.max(t,player.records.thisEternity.bestIPMsWithoutMaxAll)}}function DU(e){let t=player.records.bestInfinity.time.gt(6e4)&&!player.break,n=Player.isInAntimatterChallenge;xU(),e?Tab.infinity.upgrades.show():(t||n&&!player.options.retryChallenge)&&Tab.dimensions.antimatter.show()}function OU(e){let t=Replicanti.amount,n=player.replicanti.galaxies;AU(e);let r=o.D0;Achievement(95).isUnlocked&&!Pelle.isDoomed&&(Replicanti.amount=t,r=r.add(Decimal.min(n,1))),TimeStudy(33).isBought&&!Pelle.isDoomed&&(r=r.add(Decimal.floor(n.div(2)))),(PelleUpgrade.replicantiGalaxyNoReset.canBeApplied||QuantumSpeedrunMilestone(28).isReached)&&(r=n),player.replicanti.galaxies=Decimal.clampMax(r,n)}function kU(){EternityChallenge(4).tryFail()||Effarig.isRunning&&!EffarigUnlock.infinity.isUnlocked&&(EffarigUnlock.infinity.unlock(),beginProcessReality(getRealityProps(!0)))}function AU(e){player.dimensionBoosts=o.D0,player.galaxies=o.D0,player.records.thisInfinity.maxAM=o.D0,Currency.antimatter.reset(),softReset(0,!0,!0,e),InfinityDimensions.resetAmount(),player.replicanti.unl&&(Replicanti.amount=o.D1),player.replicanti.galaxies=o.D0,player.records.thisInfinity.time=o.D0,player.records.thisInfinity.lastBuyTime=o.D0,player.records.thisInfinity.realTime=o.D0,Player.resetRequirements(`infinity`),AchievementTimers.marathon2.reset()}function jU(e){if(InfinityUpgrade.ipGen.isBought){let t=Time.bestInfinity.totalMilliseconds.clampMin(1e-100).times(10),n;if(e.gte(1e100))n=Decimal.div(e,t);else{let r=e.toNumber();player.partInfinityPoint+=r/t.clampMax(1e300).toNumber(),n=Decimal.floor(player.partInfinityPoint),player.partInfinityPoint-=n.toNumber()}let r=player.records.bestInfinity.time.gte(o.BEMAX)?o.D0:InfinityUpgrade.ipGen.effectValue;Laitela.isRunning&&(r=dilatedValueOf(r));let i=n.times(r);Currency.infinityPoints.add(i)}Currency.infinityPoints.add(BreakInfinityUpgrade.ipGen.effectOrDefault(o.D0).times(e.div(6e4)))}var MU=class extends it{constructor(e,t){super(e),this._upgrade=t}get isEffectActive(){return this._upgrade.isBought&&this._upgrade.isCharged}},NU=class extends st{constructor(e){super(e),e.charged&&(this._chargedEffect=new MU(e.charged,this))}get currency(){return Currency.infinityPoints}get set(){return player.infinityUpgrades}get isAvailableForPurchase(){return this.config.checkRequirement?.()??!0}get isEffectActive(){return this.isBought&&!this.isCharged}get chargedEffect(){return this._chargedEffect}purchase(){return super.purchase()?(this.config.id.includes(`skip`)&&skipResetsIfPossible(),EventHub.dispatch(GAME_EVENT.INFINITY_UPGRADE_BOUGHT),!0):this.canCharge?(this.charge(),EventHub.dispatch(GAME_EVENT.INFINITY_UPGRADE_CHARGED),!0):!1}get hasChargeEffect(){return this.config.charged!==void 0}get isCharged(){return player.celestials.ra.charged.has(this.id)}get canCharge(){return this.isBought&&this.hasChargeEffect&&!this.isCharged&&Ra.chargesLeft!==0&&!Pelle.isDisabled(`chargedInfinityUpgrades`)}charge(){player.celestials.ra.charged.add(this.id)}disCharge(){player.celestials.ra.charged.delete(this.id)}};function PU(){if(Effarig.isRunning&&Effarig.currentStage===EFFARIG_STAGES.INFINITY)return o.D1;let e=o.D1.timesEffectsOf(TimeStudy(41),TimeStudy(51),TimeStudy(141),TimeStudy(142),TimeStudy(143),Achievement(85),Achievement(93),Achievement(116),Achievement(125),LU.ipMult,DilationUpgrade.ipMultDT,GlyphEffect.ipMult);return e=e.times(Replicanti.amount.powEffectOf(AlchemyResource.exponential)),e}function FU(){let e=[LU.totalTimeMult,LU.dim18mult,LU.dim36mult,LU.resetBoost,LU.buy10Mult,LU.dim27mult,LU.dim45mult,LU.galaxyBoost,LU.thisInfinityTimeMult,LU.unspentIPMult,LU.dimboostMult,LU.ipGen];for(let t of e)t.isCharged&&t.disCharge();player.celestials.ra.disCharge=!1,EventHub.dispatch(GAME_EVENT.INFINITY_UPGRADES_DISCHARGED)}var IU=class extends it{get cost(){return this.purchaseCount.gte(this.purchasesAtIncrease)?this.config.costIncreaseThreshold.times(Decimal.pow(this.costIncrease,this.purchaseCount.sub(this.purchasesAtIncrease))):Decimal.pow(this.costIncrease,this.purchaseCount.add(1))}get purchaseCount(){return player.IPMultPurchases}get purchasesAtIncrease(){return this.config.costIncreaseThreshold.max(1).log10().sub(1)}get hasIncreasedCost(){return this.purchaseCount.gte(this.purchasesAtIncrease)}get costIncrease(){return this.hasIncreasedCost?1e10:10}get isCapped(){return this.cost.gte(this.config.costCap)}get isBought(){return this.isCapped}get isRequirementSatisfied(){return Achievement(41).isUnlocked}get canBeBought(){return!Pelle.isDoomed&&!this.isCapped&&Currency.infinityPoints.gte(this.cost)&&this.isRequirementSatisfied}purchase(e=1){this.canBeBought&&(TimeStudy(181).isBought||Autobuyer.bigCrunch.bumpAmount(o.D2.pow(e)),Currency.infinityPoints.subtract(Decimal.sumGeometricSeries(e,this.cost,this.costIncrease,0)),player.IPMultPurchases=player.IPMultPurchases.add(e),GameUI.update())}buyMax(){if(this.canBeBought){if(!this.hasIncreasedCost){let e=Currency.infinityPoints.value.clampMax(this.config.costIncreaseThreshold),t=Decimal.affordGeometricSeries(e,this.cost,this.costIncrease,0);if(t.lte(0))return;this.purchase(t)}if(this.hasIncreasedCost){let e=Currency.infinityPoints.value.clampMax(this.config.costCap),t=Decimal.affordGeometricSeries(e,this.cost,this.costIncrease,0);if(t.lte(0))return;this.purchase(t)}}}};const LU=mapGameDataToObject(GameDatabase.infinity.upgrades,e=>e.id===`ipMult`?new IU(e):new NU(e));var RU=class extends st{get currency(){return Currency.infinityPoints}get set(){return player.infinityUpgrades}onPurchased(){this.id===`postGalaxy`&&(jS(7).tryComplete(),PelleStrikes.powerGalaxies.trigger())}},zU=class extends lt{get currency(){return Currency.infinityPoints}get boughtAmount(){return player.infinityRebuyables[this.id]}set boughtAmount(e){player.infinityRebuyables[this.id]=e}get isCapped(){return this.boughtAmount.gte(this.config.maxUpgrades)}onPurchased(){this.config.onPurchased?.()}};const BU=mapGameDataToObject(GameDatabase.infinity.breakUpgrades,e=>e.rebuyable?new zU(e):new RU(e));function VU(e){if(HU(11).isRunning||InfinityChallenge(6).isRunning){if(AntimatterDimension(2).amount.neq(0)){Currency.matter.bumpTo(1);let t=Decimal.clampMax(DimBoost.totalBoosts,400).div(200).add(1.03).add(Decimal.clampMax(player.galaxies,100).div(100));Currency.matter.multiply(Decimal.pow(t,e.div(20)))}if(Currency.matter.gt(Currency.antimatter.value)&&HU(11).isRunning&&!Player.canCrunch){let e=[Currency.antimatter.value,Currency.matter.value];softReset(0,!0,!0),Modal.message.show(`Your ${format(e[0],2,2)} antimatter was annihilated
        by ${format(e[1],2,2)} matter.`,{closeEvent:GAME_EVENT.BIG_CRUNCH_AFTER},1)}}HU(3).isRunning&&(player.chall3Pow=player.chall3Pow.times(o.D1_00038.pow(e.div(100))).clampMax(o.NUMMAX)),HU(2).isRunning&&(player.chall2Pow=Decimal.min(player.chall2Pow.add(e.div(100).div(1800)),1)),InfinityChallenge(2).isRunning&&(player.ic2Count>=400?(AntimatterDimension(8).amount.gt(0)&&sacrificeReset(),player.ic2Count%=400):player.ic2Count+=Math.clamp(Date.now()-player.lastUpdate,1,216e5))}const HU=class extends it{get isQuickResettable(){return this.config.isQuickResettable}get isRunning(){let e=this.id!==9&&this.id!==12&&this.id!==1;return player.challenge.normal.current===this.id||e&&InfinityChallenge(1).isRunning||this.id===12&&QuantumChallenge(4).isRunning}get isOnlyActiveChallenge(){return player.challenge.normal.current===this.id}get isUnlocked(){if(PlayerProgress.eternityUnlocked()||this.id===0)return!0;let e=GameDatabase.challenges.normal[this.id-1].lockedAt;return Currency.infinitiesTotal.gte(e)}get isDisabled(){return Pelle.isDoomed}get lockedAt(){return GameDatabase.challenges.normal[this.id].lockedAt}requestStart(){if(Tab.challenges.isUnlocked&&!GameEnd.creditsEverClosed){if(!player.options.confirmations.challenges){this.start();return}Modal.startNormalChallenge.show(this.id)}}start(){this.id===1||this.isOnlyActiveChallenge||Tab.challenges.isUnlocked&&(bigCrunchReset(!0,!0),player.challenge.normal.current=this.id,player.challenge.infinity.current=0,Enslaved.isRunning&&EternityChallenge(6).isRunning&&this.id===10&&(EnslavedProgress.challengeCombo.giveProgress(),Enslaved.quotes.ec6C10.show()),Enslaved.isRunning||Tab.dimensions.antimatter.show())}get isCompleted(){return(player.challenge.normal.completedBits&1<<this.id)!=0}complete(){player.challenge.normal.completedBits|=1<<this.id,Achievement(52).tryUnlock(),Achievement(53).tryUnlock(),TabNotification.newAutobuyer.clearTrigger(),GameCache.cheapestAntimatterAutobuyer.invalidate()}get goal(){return Enslaved.isRunning&&Enslaved.BROKEN_CHALLENGES.includes(this.id)?o.E1E15:o.NUMMAX}updateChallengeTime(){let e=player.challenge.normal.bestTimes;player.records.thisInfinity.time.gte(e[this.id-2])||(player.challenge.normal.bestTimes[this.id-2].copyFrom(player.records.thisInfinity.time),GameCache.challengeTimeSum.invalidate(),GameCache.worstChallengeTime.invalidate())}exit(){player.challenge.normal.current=0,bigCrunchReset(!0,!1),Enslaved.isRunning||Tab.dimensions.antimatter.show()}}.createAccessor(GameDatabase.challenges.normal);Object.defineProperty(HU,`current`,{get:()=>player.challenge.normal.current>0?HU(player.challenge.normal.current):void 0}),Object.defineProperty(HU,`isRunning`,{get:()=>player.challenge.normal.current!==0});const UU={all:HU.index.compact(),completeAll(){for(let e of UU.all)e.complete()},clearCompletions(){player.challenge.normal.completedBits=0}};function WU(){if(EternityMilestone.autoIC.isReached){let e=qU.all.filter(e=>e.isUnlocked&&!e.isCompleted);for(let t of e)t.complete()}}var GU=class extends it{constructor(e,t){super(e),this._challenge=t}get isEffectActive(){return this._challenge.isCompleted}};const KU=class extends it{constructor(e){super(e),this._reward=new GU(e.reward,this)}get unlockAM(){return this.config.unlockAM}get isUnlocked(){return player.records.thisEternity.maxAM.gte(this.unlockAM)||Achievement(133).isUnlocked&&!Pelle.isDoomed||PelleUpgrade.keepInfinityChallenges.canBeApplied&&Pelle.cel.records.totalAntimatter.gte(this.unlockAM)}get isRunning(){return QuantumChallenge(6).isRunning?this.id===2||this.id===3||this.id===6||this.id===7||this.id===8:player.challenge.infinity.current===this.id||this.id===3&&EternityChallenge(14).isRunning}requestStart(){if(this.isUnlocked&&!GameEnd.creditsEverClosed){if(!player.options.confirmations.challenges){this.start();return}Modal.startInfinityChallenge.show(this.id)}}start(){!this.isUnlocked||this.isRunning||(bigCrunchReset(!0,!0),player.challenge.normal.current=0,player.challenge.infinity.current=this.id,Enslaved.isRunning||Tab.dimensions.antimatter.show(),player.break=!0,EternityChallenge.isRunning&&Achievement(115).unlock())}get isCompleted(){return(player.challenge.infinity.completedBits&1<<this.id)!=0}complete(){player.challenge.infinity.completedBits|=1<<this.id,EventHub.dispatch(GAME_EVENT.INFINITY_CHALLENGE_COMPLETED)}get isEffectActive(){return this.isRunning}get reward(){return this._reward}get isQuickResettable(){return this.config.isQuickResettable}get goal(){return this.config.goal}updateChallengeTime(){player.challenge.infinity.bestTimes[this.id-1].lte(player.records.thisInfinity.time)||(player.challenge.infinity.bestTimes[this.id-1]=player.records.thisInfinity.time,GameCache.infinityChallengeTimeSum.invalidate())}exit(){player.challenge.infinity.current=0,bigCrunchReset(!0,!1),Enslaved.isRunning||Tab.dimensions.antimatter.show()}}.createAccessor(GameDatabase.challenges.infinity);Object.defineProperty(KU,`current`,{get:()=>player.challenge.infinity.current>0?KU(player.challenge.infinity.current):void 0}),Object.defineProperty(KU,`isRunning`,{get:()=>KU.current!==void 0});const qU={all:KU.index.compact(),completeAll(){for(let e of qU.all)e.complete()},clearCompletions(){player.challenge.infinity.completedBits=0},get nextIC(){return qU.all.find(e=>!e.isUnlocked)},get nextICUnlockAM(){return this.nextIC?.unlockAM},notifyICUnlock(e){if(!EternityMilestone.autoIC.isReached&&qU.nextIC!==void 0)for(let t of qU.all){if(t.isUnlocked||t.isCompleted)continue;if(e.lt(t.unlockAM))break;TabNotification.ICUnlock.clearTrigger(),GameUI.notify.infinity(`You have unlocked Infinity Challenge ${t.id}`,7e3),TabNotification.ICUnlock.tryTrigger()}},get completed(){return qU.all.filter(e=>e.isCompleted)}};function JU(e){player.records.bestEternity.time=Decimal.min(player.records.thisEternity.time,player.records.bestEternity.time),Currency.eternityPoints.add(gainedEternityPoints());let t=iW();if(Currency.eternities.eq(0)&&t.lte(10)&&Tab.dimensions.time.show(),Currency.eternities.add(t),EternityChallenge.isRunning){let t=EternityChallenge.current;if(t.addCompletion(!1),Perk.studyECBulk.isBought){let e=0;for(;!t.isFullyCompleted&&t.canBeCompleted;)t.addCompletion(!1),e++;AutomatorData.lastECCompletionCount=e,Enslaved.isRunning&&e>5&&EnslavedProgress.ec1.giveProgress()}player.challenge.eternity.requirementBits&=~(1<<t.id),respecTimeStudies(e)}addEternityTime(player.records.thisEternity.trueTime,player.records.thisEternity.time,player.records.thisEternity.realTime,gainedEternityPoints(),t),player.records.thisReality.bestEternitiesPerMs=player.records.thisReality.bestEternitiesPerMs.clampMin(t.div(Decimal.clampMin(33,player.records.thisEternity.realTime))),player.records.bestEternity.bestEPminReality=player.records.bestEternity.bestEPminReality.max(player.records.thisEternity.bestEPmin),player.records.bestEternity.trueTime=Math.min(player.records.bestEternity.trueTime,player.records.thisEternity.trueTime),Currency.infinitiesBanked.value=Currency.infinitiesBanked.value.plusEffectsOf(Achievement(131).effects.bankedInfinitiesGain,TimeStudy(191)),Effarig.isRunning&&!EffarigUnlock.eternity.isUnlocked&&(EffarigUnlock.eternity.unlock(),beginProcessReality(getRealityProps(!0)))}function YU(){fw.display(`a-eternify`,3)}function XU(){Player.canEternity&&(GameEnd.creditsEverClosed||rW())}function ZU(e,t,n={}){n.switchingDilation&&!Player.canEternity&&(e=!0);let r=player.timestudy.studies.length===0;if(!e){if(!Player.canEternity)return!1;if(RealityUpgrade(10).isLockingMechanics)return RealityUpgrade(10).tryShowWarningModal(),!1;if(RealityUpgrade(12).isLockingMechanics&&EternityChallenge(1).isRunning)return RealityUpgrade(12).tryShowWarningModal(),!1;EventHub.dispatch(GAME_EVENT.ETERNITY_RESET_BEFORE),JU(t),player.requirementChecks.reality.noEternities=!1}return player.dilation.active&&rewardTP(),e&&(player.challenge.eternity.current=0),$U(),eW(),!oW.keepAutobuyers.isReached&&!(Pelle.isDoomed&&PelleUpgrade.keepAutobuyers.canBeApplied)&&(player.break=!1),player.challenge.eternity.current=0,!n.enteringEC&&!Pelle.isDoomed&&(player.dilation.active=!1),resetInfinityRuns(),InfinityDimensions.fullReset(),QuantumSpeedrunMilestone(24).isReached||Replicanti.reset(),resetChallengeStuff(),AntimatterDimensions.reset(),!n.enteringEC&&player.respec&&(r&&SecretAchievement(34).unlock(),respecTimeStudies(t),player.respec=!1),Currency.infinityPoints.reset(),InfinityDimensions.resetAmount(),player.records.thisInfinity.bestIPmin=o.D0,player.records.bestInfinity.bestIPminEternity=o.D0,player.records.thisEternity.bestEPmin=o.D0,player.records.thisEternity.bestInfinitiesPerMs=o.D0,player.records.thisEternity.bestIPMsWithoutMaxAll=o.D0,resetTimeDimensions(),resetTickspeed(),playerInfinityUpgradesOnReset(),AchievementTimers.marathon2.reset(),tW(),player.records.thisInfinity.maxAM=o.D0,player.records.thisEternity.maxAM=o.D0,Currency.antimatter.reset(),ECTimeStudyState.invalidateCachedRequirements(),PelleStrikes.eternity.trigger(),EventHub.dispatch(GAME_EVENT.ETERNITY_RESET_AFTER),!0}function QU(e){if(!Player.canEternity)return!1;let t=!fw.isDisplaying&&!RealityUpgrade(10).isLockingMechanics&&!(RealityUpgrade(12).isLockingMechanics&&EternityChallenge(1).isRunning)&&(player.dilation.active&&player.options.animations.dilation||!player.dilation.active&&player.options.animations.eternity);return t?player.dilation.active?animateAndUndilate(e):(YU(),setTimeout(()=>{ZU(),e&&e()},2250)):(ZU(),e&&e()),t}function $U(e){NormalChallenges.clearCompletions(),PelleUpgrade.keepInfinityChallenges.canBeApplied||InfinityChallenges.clearCompletions(),(!e&&oW.keepAutobuyers.isReached||Pelle.isDoomed)&&NormalChallenges.completeAll(),Achievement(133).isUnlocked&&!Pelle.isDoomed&&InfinityChallenges.completeAll(),player.challenge.normal.current=0,player.challenge.infinity.current=0}function eW(){player.sacrificed=o.D0,Currency.infinities.reset(),player.records.bestInfinity.time=o.BEMAX,player.records.bestInfinity.realTime=o.BEMAX,player.records.thisInfinity.time=o.D0,player.records.thisInfinity.lastBuyTime=o.D0,player.records.thisInfinity.realTime=o.D0,player.dimensionBoosts=oW.keepInfinityUpgrades.isReached?o.D4:o.D0,player.galaxies=oW.keepInfinityUpgrades.isReached?o.D1:o.D0,player.partInfinityPoint=0,player.partInfinitied=0,player.IPMultPurchases=o.D0,Currency.infinityPower.reset(),Currency.timeShards.reset(),player.records.thisEternity.time=o.D0,player.records.thisEternity.realTime=o.D0,player.totalTickGained=o.D0,player.eterc8ids=50,player.eterc8repl=40,Player.resetRequirements(`eternity`)}function tW(){if(player.eternityUpgrades.size<3&&Perk.autounlockEU1.canBeApplied)for(let e of[1,2,3])player.eternityUpgrades.add(e)}function nW(){if(player.eternityUpgrades.size<6&&Perk.autounlockEU2.canBeApplied){let e=lW.all.filter(e=>e.id>3);for(let t of e)player.eternityPoints.gte(t.cost/1e10)&&player.eternityUpgrades.add(t.id)}}function rW(){player.dilation.active&&player.options.confirmations.dilation?Modal.exitDilation.show():player.options.confirmations.eternity?Modal.eternity.show():QU()}function iW(){return Pelle.isDisabled(`eternityMults`)?new Decimal(1):new Decimal(getAdjustedGlyphEffect(`timeetermult`)).timesEffectsOf(RealityUpgrade(3),Achievement(113)).times(DilationUpgrade.eternitiesDTSynergy.isBought?Currency.dilatedTime.value.clampMin(1).pow(.1):1).pow(AlchemyResource.eternity.effectValue)}var aW=class{constructor(e){this.config=e}get isReached(){return Pelle.isDoomed&&this.config.givenByPelle?this.config.givenByPelle():Currency.eternities.gte(this.config.eternities)}};const oW=mapGameDataToObject(GameDatabase.eternity.milestones,e=>(e.isBaseResource,new aW(e)));var sW=class extends st{get currency(){return Currency.eternityPoints}get set(){return player.eternityUpgrades}},cW=class extends it{constructor(){super({}),this.cachedCost=new Lazy(()=>this.costAfterCount(player.epmultUpgrades)),this.cachedEffectValue=new Lazy(()=>o.D5.pow(player.epmultUpgrades))}get isAffordable(){return!Pelle.isDoomed&&Currency.eternityPoints.gte(this.cost)}get cost(){return this.cachedCost.value}get boughtAmount(){return player.epmultUpgrades}set boughtAmount(e){let t=Decimal.max(e.sub(player.epmultUpgrades),0);player.epmultUpgrades=e,this.cachedCost.invalidate(),this.cachedEffectValue.invalidate(),Autobuyer.eternity.bumpAmount(o.D5.pow(t))}get isCustomEffect(){return!0}get effectValue(){return this.cachedEffectValue.value}purchase(){return this.isAffordable?(Currency.eternityPoints.subtract(this.cost),this.boughtAmount=this.boughtAmount.add(1),!0):!1}costInv(){let e=o.D0,t=o.D1,n=Currency.eternityPoints.value.max(1);return n.gt(this.costIncreaseThresholds[3])?(n=Decimal.log(n.div(500),1e3),n.add(1332**1.2).root(1.2).floor().max(1332)):n.gt(this.costIncreaseThresholds[2])?(t=this.costIncreaseThresholds[2].div(500).log(500).floor(),e=o.E3.pow(t).times(500),n=n.div(e).max(1/1e3),t.add(n.log(1e3).add(1)).floor()):n.gt(this.costIncreaseThresholds[1])?(t=this.costIncreaseThresholds[1].div(500).log(100).floor(),e=o.E2.times(5).pow(t).times(500),n=n.div(e.max(1/500)),t.add(n.log(500).add(1)).floor()):n.gt(this.costIncreaseThresholds[0])?(t=this.costIncreaseThresholds[0].div(500).log(50).floor(),e=o.E2.pow(t).times(500),n=n.div(e.max(1/100)),t.add(n.log(100).add(1)).floor()):n.div(500).max(1/50).log(50).add(1).floor()}buyMax(e){if(!this.isAffordable)return!1;if(RealityUpgrade(15).isLockingMechanics)return e||RealityUpgrade(15).tryShowWarningModal(),!1;let t=Decimal.floor(this.costInv());if(t.lt(1))return!1;let n=this.costAfterCount(t.sub(1));if(t=t.sub(this.boughtAmount).max(0),t.eq(0))return!1;Currency.eternityPoints.subtract(n),this.boughtAmount=this.boughtAmount.add(t);let r=0;for(;Currency.eternityPoints.gt(this.costAfterCount(this.boughtAmount))&&r<50&&this.boughtAmount.layer<1;)this.boughtAmount=this.boughtAmount.add(1),Currency.eternityPoints.subtract(this.costAfterCount(this.boughtAmount.sub(1))),r+=1;return!0}reset(){this.boughtAmount=o.D0}get costIncreaseThresholds(){return[o.E100,o.NUMMAX,o.E1300,o.E4000]}costAfterCount(e){let t=lW.epMult.costIncreaseThresholds,n=[50,100,500,1e3];for(let r=0;r<t.length;r++){let i=Decimal.pow(n[r],e).times(500);if(i.lt(t[r]))return i}return o.E3.pow(e.pow(1.2).sub(1332**1.2)).times(500)}};const lW=mapGameDataToObject(GameDatabase.eternity.upgrades,e=>new sW(e));lW.epMult=new cW;const uW={glyphs:[],realityProps:void 0,get active(){return Modal.reality.isOpen},get choiceCount(){return Effects.nMax(1,Perk.firstPerk)*Ra.unlocks.extraGlyphChoicesAndRelicShardRarityAlwaysMax.effectOrDefault(1)},glyphUncommonGuarantee(e,t){let n=1.5,r=t.uniform(),i;do i=GlyphGenerator.randomStrength(t);while(i.lt(n));e.some(e=>e.strength.gte(n))||(e[Math.floor(r*e.length)].strength=i)},glyphList(e,t,n){let r=Math.clampMin(e,4),i=[],a=n.rng||new GlyphGenerator.RealGlyphRNG,o=[];if(GlyphGenerator.isUniformityActive)i=GlyphGenerator.uniformGlyphSelections(t,a,player.realities);else{for(let e=0;e<r;++e)o.push(GlyphGenerator.randomType(a,o));for(let e=0;e<r;++e)i.push(GlyphGenerator.randomGlyph(t,a,o[e]))}return this.glyphUncommonGuarantee(i,a),i=i.slice(0,e),!n.rng&&n.isChoosingGlyph&&a.finalize(),i},generate(e,t=gainedGlyphLevel()){this.glyphs=this.glyphList(e,t,{isChoosingGlyph:!0})},update(e){if(this.realityProps!==void 0){if(e.rawLevel.gt(this.realityProps.gainedGlyphLevel.rawLevel)){this.realityProps.gainedGlyphLevel.rawLevel=e.rawLevel;for(let t of this.glyphs)t.rawLevel=e.rawLevel}if(e.actualLevel.gt(this.realityProps.gainedGlyphLevel.actualLevel)){this.realityProps.gainedGlyphLevel.actualLevel=e.actualLevel;for(let t of this.glyphs)t.level=e.actualLevel,calculateGlyph(t)}}},select(e,t){let n=this.glyphs[e];t?GlyphSacrificeHandler.removeGlyph(n,!0):GameCache.glyphInventorySpace.value>0?Glyphs.addToInventory(n):AutoGlyphProcessor.getRidOfGlyph(n),this.glyphs=[],this.realityProps=void 0},get upcomingGlyphs(){return Perk.firstPerk.isEffectActive?this.glyphList(this.choiceCount,gainedGlyphLevel(),{isChoosingGlyph:!1}):[this.glyphList(4,gainedGlyphLevel(),{isChoosingGlyph:!1})[this.indexWithoutSTART]]},get indexWithoutSTART(){let e=player.realities.times(player.reality.initialSeed%5+3).toNumber();return permutationIndex(4,e)[0]}};function dW(){return!1}function fW(e){let t=Enslaved.boostReality?Enslaved.realityBoostRatio.sub(1):new Decimal,n=AlchemyResource.multiversal.effectValue,r=t.add(1).mul(n.add(1)).add(player.partSimulatedReality.sub(1));return e&&(player.partSimulatedReality=r.sub(r.floor())),r.floor()}function pW(){if(!(uW.active||!dW())&&!GameEnd.creditsEverClosed){if(player.options.confirmations.glyphSelection||ui.view.shiftDown){Modal.reality.show();return}if(GameCache.glyphInventorySpace.value===0){Modal.message.show(`No available inventory space; free up space by shift-clicking Glyphs to get rid of them.`,{closeEvent:GAME_EVENT.GLYPHS_CHANGED});return}mW(!1)}}function mW(e,t){player.options.animations.reality?(gW(),setTimeout(hW,3e3,e,t)):hW(e,t)}function hW(e,t){if(dW()){if(player.realities.lt(1))player.reality.seed=player.reality.initialSeed,Glyphs.addToInventory(GlyphGenerator.startingGlyph(gainedGlyphLevel())),Glyphs.addToInventory(GlyphGenerator.companionGlyph(Currency.eternityPoints.value));else if(Perk.firstPerk.isEffectActive)if(uW.generate(uW.choiceCount),t===void 0)if(EffarigUnlock.glyphFilter.isUnlocked){let t=AutoGlyphProcessor.pick(uW.glyphs);(player.options.confirmations.glyphSelection?e:!AutoGlyphProcessor.wouldKeep(t))||GameCache.glyphInventorySpace.value===0?AutoGlyphProcessor.getRidOfGlyph(t):Glyphs.addToInventory(t)}else uW.select(Math.floor(Math.random()*uW.choiceCount),e);else uW.select(t,e);else uW.generate(4),uW.select(uW.indexWithoutSTART,e);SW(vW(!1,!0)),PerkNetwork.updatePerkColor()}}function gW(){document.querySelector(`#ui`).style.userSelect=`none`,document.querySelector(`#ui`).style.animation=`a-realize 10s 1`,document.querySelector(`#realityanimbg`).style.animation=`a-realizebg 10s 1`,document.querySelector(`#realityanimbg`).style.display=`block`,Theme.current().isDark()?document.querySelector(`#realityanimbg`).style.filter=`invert(1)`:document.querySelector(`#realityanimbg`).style.filter=``,setTimeout(()=>{document.querySelector(`#realityanimbg`).play(),document.querySelector(`#realityanimbg`).currentTime=0,document.querySelector(`#realityanimbg`).play()},2e3),setTimeout(()=>{document.querySelector(`#ui`).style.userSelect=`auto`,document.querySelector(`#ui`).style.animation=``,document.querySelector(`#realityanimbg`).style.animation=``,document.querySelector(`#realityanimbg`).style.display=`none`},1e4)}function _W(e,t){let n,r=uW.glyphList(uW.choiceCount,e,{rng:t}),i;EffarigUnlock.glyphFilter.isUnlocked?(n=AutoGlyphProcessor.pick(r),i=AutoGlyphProcessor.wouldKeep(n)):(n=r[0],i=!0),i&&GameCache.glyphInventorySpace.value>0?Glyphs.addToInventory(n):AutoGlyphProcessor.getRidOfGlyph(n)}function vW(e,t=!1){let n={glyphUndo:!1,restoreCelestialState:!1};return e?Object.assign(n,{reset:!0}):Object.assign(n,{reset:!1,gainedRM:MachineHandler.gainedRealityMachines,gainedGlyphLevel:gainedGlyphLevel(),gainedShards:Effarig.shardsGained,simulatedRealities:fW(!0),alreadyGotGlyph:t})}function yW(){uW.active||!dW()||SW(vW(!1,!1))}function bW(e){let t=e.gainedRM.div(Time.thisRealityRealTime.totalMinutes.clampMin(5e-4));player.records.bestReality.RMmin.lt(t)&&(player.records.bestReality.RMmin=t,player.records.bestReality.RMminSet=Glyphs.copyForRecords(Glyphs.active.filter(e=>e!==null))),player.records.bestReality.glyphLevel.lt(e.gainedGlyphLevel.actualLevel)&&(player.records.bestReality.glyphLevel=e.gainedGlyphLevel.actualLevel,player.records.bestReality.glyphLevelSet=Glyphs.copyForRecords(Glyphs.active.filter(e=>e!==null))),player.records.bestReality.time=player.records.thisReality.time.clampMax(player.records.bestReality.time),player.records.thisReality.realTime.lt(player.records.bestReality.realTime)&&(player.records.bestReality.realTime=player.records.thisReality.realTime,player.records.bestReality.speedSet=Glyphs.copyForRecords(Glyphs.active.filter(e=>e!==null))),player.records.bestReality.trueTime=Math.min(player.records.bestReality.trueTime,player.records.thisReality.trueTime)}function xW(e){let t=e.simulatedRealities.add(1),n=t.add(binomialDistribution(t,Achievement(154).effectOrDefault(0))),r=Currency.realityMachines.gte(MachineHandler.hardcapRM)?o.D0:e.gainedRM;if(Currency.realityMachines.add(r.times(t)),bW(e),addRealityTime(player.records.thisReality.trueTime,player.records.thisReality.time,player.records.thisReality.realTime,r,e.gainedGlyphLevel.actualLevel,n,t,MachineHandler.projectedIMCap),Currency.realities.add(n),Currency.perkPoints.add(n),TeresaUnlocks.effarig.canBeApplied&&Currency.relicShards.add(e.gainedShards.times(t)),t.gt(1)&&Enslaved.boostReality&&(Time.thisRealityRealTime.totalSeconds.lt(1)?player.celestials.enslaved.storedReal=player.celestials.enslaved.storedReal.mul(Decimal.sub(1,Time.thisRealityRealTime.totalSeconds)):player.celestials.enslaved.storedReal=o.D0,Enslaved.boostReality=!1),Teresa.isRunning){let e=Teresa.runRewardMultiplier,t=Teresa.rewardMultiplier(player.antimatter),n=`You have completed Teresa's Reality! ${t.gt(e)?`Since you gained more Antimatter, you increased your
      Glyph Sacrifice multiplier from ${format(e,2,2)} to ${format(t,2,2)}`:`You did not gain more Antimatter during this run, so the Glyph Sacrifice multiplier
      from Teresa did not increase`}.`;Modal.message.show(n,{},2),Currency.antimatter.gt(player.celestials.teresa.bestRunAM)&&(player.celestials.teresa.bestRunAM=Currency.antimatter.value,player.celestials.teresa.bestAMSet=Glyphs.copyForRecords(Glyphs.active.filter(e=>e!==null)),player.celestials.teresa.lastRepeatedMachines=player.reality.maxRM,player.celestials.teresa.lastRepeatediM=Currency.imaginaryMachines.value),Teresa.quotes.completeReality.show()}Effarig.isRunning&&!EffarigUnlock.reality.isUnlocked&&(EffarigUnlock.reality.unlock(),Effarig.quotes.completeReality.show()),Enslaved.isRunning&&Enslaved.completeRun(),V.isRunning&&V.quotes.realityComplete.show()}function SW(e){if(e.reset){CW(e);return}EventHub.dispatch(GAME_EVENT.REALITY_RESET_BEFORE);let t=e.simulatedRealities.add(e.alreadyGotGlyph?0:1),n=GlyphGenerator.getRNG(!1),r=gainedGlyphLevel();if(CW(e),t.lt(100)){for(let i=0;i<t.toNumber();i++)if(uW.generate(uW.choiceCount,r),EffarigUnlock.glyphFilter.isUnlocked){let t=uW.glyphList(uW.choiceCount,e.gainedGlyphLevel,{rng:n}),r=AutoGlyphProcessor.pick(t);!AutoGlyphProcessor.wouldKeep(r)||GameCache.glyphInventorySpace.value===0?AutoGlyphProcessor.getRidOfGlyph(r):Glyphs.addToInventory(r)}else uW.select(Math.floor(Math.random()*uW.choiceCount),!1);Glyphs.processSortingAfterReality();return}let i={},a=!1,o={toGenerate:0,sampleStats:generatedTypes.map(e=>({type:e,count:0,totalSacrifice:0,varProdSacrifice:0})),totalStats:{count:0,totalSacrifice:0,varProdSacrifice:0}},s=(e,t)=>{let n=e.totalSacrifice/e.count;e.totalSacrifice+=t,e.count++;let r=e.totalSacrifice/e.count;e.count!==1&&(e.varProdSacrifice+=(t-n)*(t-r))},c=(e,t)=>{if(e.count===0)return 0;let n=e.totalSacrifice/e.count,r=Math.sqrt(e.varProdSacrifice/e.count);return normalDistribution(n*t,r*Math.sqrt(t))},l=()=>{if(a){let t=uW.glyphList(uW.choiceCount,e.gainedGlyphLevel,{rng:n}),r=AutoGlyphProcessor.pick(t),i=GlyphSacrificeHandler.glyphSacrificeGain(r),a=o.sampleStats.find(e=>e.type===r.type);s(a,i),s(o.totalStats,i)}else _W(e.gainedGlyphLevel,n),VUnlocks.autoAutoClean.canBeApplied&&player.reality.autoAutoClean&&Glyphs.autoClean()},u=Math.min(t,1e4);Async.run(l,t,{batchSize:100,maxTime:33,sleepTime:1,asyncEntry:e=>{GameIntervals.stop(),ui.$viewModel.modal.progressBar={label:`Simulating Amplified Reality`,info:()=>`The game is currently calculating all the resources you would gain from repeating the
            Reality you just completed ${formatInt(t)} more times. Pressing "Quick Glyphs" with
            more than ${formatInt(u)} Glyphs remaining will speed up the calculation by automatically
            sacrificing all the remaining Glyphs you would get. Pressing "Skip Glyphs" will ignore all resources
            related to Glyphs and stop the simulation after giving all other resources.
            ${Ra.unlocks.unlockGlyphAlchemy.canBeApplied?`Pressing either button to speed up
            simulation will not update any resources within Glyph Alchemy.`:``}`,progressName:`Realities`,current:e,max:t,startTime:Date.now(),buttons:[{text:`Quick Glyphs`,condition:(e,t)=>t-e>u,click:()=>{a=!0,o.toGenerate=i.remaining,i.maxIter-=i.remaining-u,i.remaining=u,ui.$viewModel.modal.progressBar.max=i.maxIter}},{text:`Skip Glyphs`,condition:()=>!0,click:()=>{i.maxIter-=i.remaining,i.remaining=0}}]}},asyncProgress:e=>{ui.$viewModel.modal.progressBar.current=e},asyncExit:()=>{ui.$viewModel.modal.progressBar=void 0,GameIntervals.start()},then:()=>{if(o.toGenerate>0)if(AutoGlyphProcessor.scoreMode===AUTO_GLYPH_SCORE.LOWEST_SACRIFICE){let e=c(o.totalStats,o.toGenerate),t=generatedTypes.filter(e=>EffarigUnlock.reality.isUnlocked||e!==`effarig`),n=t.map(e=>player.reality.glyphs.sac[e]).sort((e,t)=>e-t),r=[];for(let e of t)r.push({type:e,value:player.reality.glyphs.sac[e]});let i=Object.values(r).sort((e,t)=>e.value-t.value);for(let t=0;t<n.length-1;t++){let r=0;for(let e=0;e<=t;e++)r+=n[t+1]-n[e];let i=Math.clampMax(r,e);e-=i;for(let e=0;e<=t;e++)n[e]+=i/(t+1);if(e===0)break}for(let t=0;t<n.length;t++)n[t]+=e/n.length;for(let e=0;e<n.length;e++)player.reality.glyphs.sac[i[e].type]=n[e]}else for(let e of o.sampleStats){let t=o.toGenerate*e.count/u;player.reality.glyphs.sac[e.type]+=c(e,t)}},progress:i}),Glyphs.processSortingAfterReality()}function CW(e){let t=Currency.eternityPoints.value.plus(gainedEternityPoints());player.records.bestReality.bestEP.lt(t)&&(player.records.bestReality.bestEP=new Decimal(t),player.records.bestReality.bestEPSet=Glyphs.copyForRecords(Glyphs.active.filter(e=>e!==null)));let n=player.records.thisReality.realTime,r=e.reset;r||xW(e),e.glyphUndo||(Glyphs.clearUndo(),player.reality.respec&&respecGlyphs(),player.celestials.ra.disCharge&&disChargeAll()),player.options.automatorEvents.clearOnReality&&AutomatorData.clearEventLog(),Player.automatorUnlocked&&AutomatorBackend.state.forceRestart&&AutomatorBackend.start(AutomatorBackend.state.topLevelScript);let i=EW();if(recalculateAllGlyphs(),Glyphs.updateMaxGlyphCount(!0),player.sacrificed=o.D0,OW(),initializeChallengeCompletions(!0),Currency.infinities.reset(),Currency.infinitiesBanked.reset(),player.records.bestInfinity.time=o.BEMAX,player.records.bestInfinity.realTime=o.BEMAX,player.records.thisInfinity.time=o.D0,player.records.thisInfinity.lastBuyTime=o.D0,player.records.thisInfinity.realTime=o.D0,player.dimensionBoosts=o.D0,player.galaxies=o.D0,player.partInfinityPoint=0,player.partInfinitied=0,player.break=!1,player.IPMultPurchases=o.D0,Currency.infinityPower.reset(),Currency.timeShards.reset(),Replicanti.reset(!0),Currency.eternityPoints.reset(),EternityUpgrade.epMult.reset(),PelleUpgrade.eternitiesNoReset.canBeApplied||Currency.eternities.reset(),player.records.thisEternity.time=o.D0,player.records.thisEternity.realTime=o.D0,player.records.bestEternity.time=o.BEMAX,player.records.bestEternity.realTime=o.BEMAX,PelleUpgrade.keepEternityUpgrades.canBeApplied||player.eternityUpgrades.clear(),player.totalTickGained=o.D0,PelleUpgrade.keepEternityChallenges.canBeApplied||(player.eternityChalls={}),player.reality.unlockedEC=0,player.reality.lastAutoEC=o.D0,player.challenge.eternity.current=0,PelleUpgrade.timeStudiesNoReset.canBeApplied||(player.challenge.eternity.unlocked=0),player.challenge.eternity.requirementBits=0,player.respec=!1,player.eterc8ids=50,player.eterc8repl=40,e.glyphUndo?player.requirementChecks.reality.maxGlyphs=Math.max(Glyphs.bestUndoGlyphCount,player.requirementChecks.reality.maxGlyphs):Player.resetRequirements(`reality`),player.records.thisReality.time=o.D0,player.records.thisReality.realTime=o.D0,player.records.thisReality.maxReplicanti=o.D0,PelleUpgrade.timeStudiesNoReset.canBeApplied||Currency.timeTheorems.reset(),player.celestials.v.STSpent=0,PelleUpgrade.timeStudiesNoReset.canBeApplied||(player.dilation.studies=[],player.dilation.active=!1),PelleUpgrade.dilationUpgradesNoReset.canBeApplied||(player.dilation.upgrades.clear(),player.dilation.rebuyables={1:o.D0,2:o.D0,3:o.D0,11:o.D0,12:o.D0,13:o.D0}),PelleUpgrade.tachyonParticlesNoReset.canBeApplied||Currency.tachyonParticles.reset(),player.dilation.nextThreshold=o.E3,player.dilation.baseTachyonGalaxies=o.D0,player.dilation.totalTachyonGalaxies=o.D0,Currency.dilatedTime.reset(),player.records.thisInfinity.maxAM=o.D0,player.records.thisEternity.maxAM=o.D0,player.records.thisReality.maxDT=o.D0,player.dilation.lastEP=o.DM1,Currency.antimatter.reset(),Enslaved.autoReleaseTick=0,player.celestials.enslaved.hasSecretStudy=!1,player.celestials.laitela.entropy=o.D0,playerInfinityUpgradesOnReset(),resetInfinityRuns(),resetEternityRuns(),InfinityDimensions.fullReset(),fullResetTimeDimensions(),resetChallengeStuff(),AntimatterDimensions.reset(),secondSoftReset(!1),player.celestials.ra.peakGamespeed=o.D1,InfinityDimensions.resetAmount(),player.records.thisInfinity.bestIPmin=o.D0,player.records.bestInfinity.bestIPminEternity=o.D0,player.records.thisEternity.bestEPmin=o.D0,player.records.thisEternity.bestInfinitiesPerMs=o.D0,player.records.thisEternity.bestIPMsWithoutMaxAll=o.D0,player.records.bestEternity.bestEPminReality=o.D0,player.records.thisReality.bestEternitiesPerMs=o.D0,player.records.thisReality.bestRSmin=o.D0,player.records.thisReality.bestRSminVal=o.D0,resetTimeDimensions(),resetTickspeed(),AchievementTimers.marathon2.reset(),Currency.infinityPoints.reset(),RealityUpgrade(10).isBought?TW():Tab.dimensions.antimatter.show(),Lazy.invalidateAll(),ECTimeStudyState.invalidateCachedRequirements(),EventHub.dispatch(GAME_EVENT.REALITY_RESET_AFTER),TeresaUnlocks.startEU.canBeApplied)for(let e of[1,2,3,4,5,6])player.eternityUpgrades.add(e);else RealityUpgrade(14).isBought&&applyEU1();r||Ra.applyAlchemyReactions(n),player.reality.gainedAutoAchievements=!1,player.reality.hasCheckedFilter=!1,(e.restoreCelestialState||player.options.retryCelestial)&&wW(i),Pelle.isDoomed&&PelleUpgrade.keepAutobuyers.canBeApplied&&Autobuyer.bigCrunch.hasMaxedInterval&&(player.break=!0)}function wW(e){player.celestials.teresa.run=e.teresa,player.celestials.teresa.run&&Teresa.initializeRun(),player.celestials.effarig.run=e.effarig,player.celestials.effarig.run&&Effarig.initializeRun(),player.celestials.enslaved.run=e.enslaved,player.celestials.enslaved.run&&Enslaved.initializeRun(),player.celestials.v.run=e.v,player.celestials.v.run&&V.initializeRun(),player.celestials.ra.run=e.ra,player.celestials.ra.run&&Ra.initializeRun(),player.celestials.laitela.run=e.laitela,player.celestials.laitela.run&&Laitela.initializeRun()}function TW(){if(NormalChallenges.completeAll(),PelleUpgrade.replicantiStayUnlocked.canBeApplied&&(Replicanti.amount=Replicanti.amount.clampMin(1),Replicanti.unlock(!0)),!Pelle.isDisabled(`rupg10`)){player.auto.antimatterDims.all=player.auto.antimatterDims.all.map(e=>({isUnlocked:!0,cost:0x5af3107a4000,interval:100,bulk:1e10,mode:e.mode,priority:e.priority,isActive:e.isActive,lastTick:player.records.trueTimePlayed}));for(let e of Autobuyers.all)e.data.interval!==void 0&&(e.data.interval=100);player.dimensionBoosts=player.dimensionBoosts.clampMin(4),player.galaxies=player.galaxies.clampMin(1),player.break=!0,Currency.eternities.bumpTo(100),Replicanti.amount=Replicanti.amount.clampMin(1),Replicanti.unlock(!0),applyEU1()}}function EW(){let e={teresa:player.celestials.teresa.run,effarig:player.celestials.effarig.run,enslaved:player.celestials.enslaved.run,v:player.celestials.v.run,ra:player.celestials.ra.run,laitela:player.celestials.laitela.run};return player.celestials.teresa.run=!1,player.celestials.effarig.run=!1,Enslaved.isRunning&&(player.celestials.enslaved.run=!1,(Tabs.current.isHidden||Tabs.current._currentSubtab.isHidden)&&Tab.celestials.enslaved.show(),AutomatorData.recalculateErrors()),player.celestials.v.run=!1,player.celestials.ra.run=!1,player.celestials.laitela.run=!1,e}function DW(){return Object.values(player.celestials).some(e=>e.run)}function OW(){if(!Perk.achievementGroup5.isBought){for(let e of Achievements.preReality)e.lock();player.reality.achTimer=o.D0}}const kW={get scaleLog10(){let e=Math.log10(Number.MAX_VALUE);return DilationUpgrade.tdMultReplicanti&&(e*=Math.min(Currency.dilatedTime.value.plus(1).log10().plus(1).pow(.25).toNumber(),2)),e},get scaleFactor(){let e=1;return GluonUpgrade.greenBlue(2).isBought&&(e*=GluonUpgrade.greenBlue(2).effectOrDefault(1)),DilationUpgrade.tdMultReplicanti&&(e/=Currency.dilatedTime.value.plus(1).log10().plus(1).pow(.5).toNumber()),e+1}};function AW(e){e.gte(0)&&(player.replicanti.galaxies=player.replicanti.galaxies.add(e),player.requirementChecks.eternity.noRG=!1,(Pelle.isDoomed?PelleUpgrade.replicantiGalaxyEM40.canBeApplied:EternityMilestone.replicantiNoReset.isReached)||(player.dimensionBoosts=o.D0,softReset(0,!0,!0)))}function jW(e){if(RealityUpgrade(6).isLockingMechanics){e||RealityUpgrade(6).tryShowWarningModal();return}if(!VW.galaxies.canBuyMore)return;let t=VW.galaxies.gain;t.lt(1)||(player.replicanti.timer=o.D0,QuantumSpeedrunMilestone(20).isReached||(VW.amount=Achievement(126).isUnlocked&&!Pelle.isDoomed?Decimal.pow10(VW.amount.max(1).log10().sub(t.mul(LOG10_MAX_VALUE))):new Decimal(1)),AW(t))}function MW(){VW.galaxies.canBuyMore&&(RealityUpgrade(6).isLockingMechanics?RealityUpgrade(6).tryShowWarningModal():player.options.confirmations.replicantiGalaxy?Modal.replicantiGalaxy.show():jW(!1))}function NW(e,t){let n=t&&!RealityUpgrade(6).isLockingMechanics,r=o.E1.pow(e.plus(VW.amount.max(1).log10()));if(e.gt(Number.MAX_VALUE)||r.eq(0))return n&&AW(VW.galaxies.max.sub(player.replicanti.galaxies)),VW.amount=IW(),e;if(!n){let t=e.minus(IW().max(1).log10().sub(VW.amount.max(1).log10())).clampMin(0);return VW.amount=Decimal.min(r,IW()),t}let i=o.NUMMAX.max(1).log10(),a=e.add(VW.amount.max(1).log10()),s=Decimal.floor(Decimal.min(a.div(i),VW.galaxies.max.sub(player.replicanti.galaxies))),c=i.times(s).add(IW().max(1).log10()).sub(VW.amount.max(1).log10()),l=e.minus(c).clampMin(0);return VW.amount=Decimal.pow10(a.sub(i.times(s))).clampMax(IW()),AW(s),l}function PW(e,t){let n=new Decimal(t||player.replicanti.interval),r=VW.amount,i=e===void 0?r.gt(IW()):e;if((TimeStudy(133).isBought&&!Achievement(138).isUnlocked||i)&&(n=n.times(10)),i){let e=r.max(1).log10().sub(IW().max(1).log10()).div(kW.scaleLog10);PelleStrikes.eternity.hasStrike&&r.gte(o.E2000)&&(e=e.sub(Decimal.log10(5).times(o.E2000.sub(IW()).max(1).log10()).div(kW.scaleLog10))),n=n.times(Decimal.pow(kW.scaleFactor,e))}return n=n.divide(FW(i)),V.isRunning&&(n=n.lt(1)?n.sqrt():n.pow(2)),n}function FW(e){let t=o.D1;if(t=t.times(PelleRifts.decay.effectValue),t=t.times(Pelle.specialGlyphEffect.replication),Pelle.isDisabled(`replicantiIntervalMult`))return t;let n=Effects.product(TimeStudy(62),TimeStudy(213),DilationUpgrade.dilatedTimeToReplicanti,GluonUpgrade.greenBlue(1),RealityUpgrade(2),RealityUpgrade(6),RealityUpgrade(23));return t=t.times(n),TimeStudy(132).isBought&&(t=t.times(Perk.studyPassive.isBought?3:1.5)),!e&&Achievement(134).isUnlocked&&(t=t.times(2)),t=t.times(getAdjustedGlyphEffect(`replicationspeed`)),GlyphAlteration.isAdded(`replication`)&&(t=t.times(VW.amount.max(1).log10().mul(getSecondaryGlyphEffect(`replicationdtgain`)).clampMin(1))),t=t.timesEffectsOf(AlchemyResource.replication,Ra.unlocks.continuousTTBoost.effects.replicanti),t.clampMin(1)}function IW(){return EffarigUnlock.infinity.canBeApplied?Currency.infinitiesTotal.value.pow(TimeStudy(31).isBought?120:30).clampMin(1).times(o.NUMMAX):o.NUMMAX}function LW(e){if(!player.replicanti.unl)return;let t=VW.amount;PerformanceStats.start(`Replicanti`),EventHub.dispatch(GAME_EVENT.REPLICANTI_TICK_BEFORE);let n=PW(!1),r=VW.isUncapped,i=VW.galaxies.areBeingBought,a=Decimal.divide(e.add(player.replicanti.timer),n);a.lt(100)?player.replicanti.timer=a.minus(a.floor()).times(n):player.replicanti.timer=o.D0,a=a.floor();let s=VW.amount.times(VW.chance);if(a.gte(100)||s.gte(10)&&a.gte(1)){let e=Decimal.log10(kW.scaleFactor).div(kW.scaleLog10);V.isRunning&&(e=e.mul(2));let t=a.times(VW.chance.add(1).ln()).times(Math.LOG10E);if((!r||VW.amount.lte(IW()))&&(t=NW(t,i)),r&&VW.amount.gte(IW())&&t.gt(0)){let r=PW(!0).div(n);t=t.div(r),VW.amount=Decimal.exp(t.div(Math.LOG10E).times(e).plus(1).ln().div(e).add(VW.amount.clampMin(1).ln()))}}else if(a.gt(1)){let e=VW.chance.add(1).log(2).mul(a).floor(),t=a.sub(e.div(VW.chance.add(1).log(2)));VW.amount=VW.amount.times(o.D2.pow(poissonDistribution(e)));for(let e=0;e<t.floor().toNumber();e++){let e=binomialDistribution(VW.amount,VW.chance);VW.amount=VW.amount.plus(e)}let r=t.sub(t.floor());player.replicanti.timer=player.replicanti.timer.add(n.times(r))}else if(a.eq(1)){let e=binomialDistribution(VW.amount,VW.chance);VW.amount=VW.amount.plus(e)}if(r||(VW.amount=Decimal.min(IW(),VW.amount)),Pelle.isDoomed&&VW.amount.max(1).log10().sub(t.max(1).log10()).gt(308)&&(VW.amount=t.times(1e308)),i&&VW.amount.gte(o.NUMMAX)){let e=Autobuyer.replicantiGalaxy,t=e.canTick&&e.isEnabled;jW(t&&!VW.galaxies.isPlayerHoldingR)}player.records.thisReality.maxReplicanti=player.records.thisReality.maxReplicanti.clampMin(VW.amount),EventHub.dispatch(GAME_EVENT.REPLICANTI_TICK_AFTER),PerformanceStats.end()}function RW(){return MasteryStudy(81).isBought?VW.amount.clampMin(1).pow(VW.amount.clampMin(1).log10().max(1).log10()).plusEffectOf(TimeStudy(21)).timesEffectOf(TimeStudy(102)).clampMin(1):Decimal.pow(Decimal.log2(VW.amount.clampMin(1)),2).plusEffectOf(TimeStudy(21)).timesEffectOf(TimeStudy(102)).clampMin(1).pow(getAdjustedGlyphEffect(`replicationpow`))}var zW=class{get id(){throw new NotImplementedError}get value(){throw new NotImplementedError}set value(e){throw new NotImplementedError}get nextValue(){throw new NotImplementedError}get cost(){throw new NotImplementedError}set cost(e){throw Error(`Use baseCost to set cost`)}get costIncrease(){throw new NotImplementedError}get baseCost(){return this.cost}set baseCost(e){throw new NotImplementedError}get cap(){}get isCapped(){return!1}get autobuyerMilestone(){throw new NotImplementedError}get canBeBought(){return!this.isCapped&&Currency.infinityPoints.gte(this.cost)&&player.eterc8repl!==0}purchase(){this.canBeBought&&(Currency.infinityPoints.subtract(this.cost),this.baseCost=Decimal.times(this.baseCost,this.costIncrease),this.value=this.nextValue,EternityChallenge(8).isRunning&&player.eterc8repl--,GameUI.update())}autobuyerTick(){for(;this.canBeBought;)this.purchase()}};const BW={chance:new class extends zW{get id(){return 1}get value(){return player.replicanti.chance}set value(e){player.replicanti.chance=e}get nextValue(){return this.nearestPercent(this.value.add(.01))}get cost(){return player.replicanti.chanceCost.dividedByEffectOf(PelleRifts.vacuum.milestones[1])}get baseCost(){return player.replicanti.chanceCost}set baseCost(e){player.replicanti.chanceCost=e}get costIncrease(){return 0x38d7ea4c68000}get cap(){return MasteryStudy(35).isBought?o.BEMAX:o.D1}get isCapped(){return this.nearestPercent(this.value).gte(this.cap)}get autobuyerMilestone(){return EternityMilestone.autobuyerReplicantiChance}autobuyerTick(){let e=(Currency.infinityPoints.value.times(this.costIncrease-1).dividedBy(this.cost).plus(1).log(this.costIncrease));if(e=Decimal.round(Decimal.min(e.floor().div(100).add(this.value),this.cap).sub(this.value).mul(100)),e.lte(0))return;let t=(this.cost.times(Decimal.pow(this.costIncrease,e).minus(1).dividedBy(this.costIncrease-1)));Currency.infinityPoints.subtract(t),this.baseCost=this.baseCost.times(Decimal.pow(this.costIncrease,e)),this.value=this.nearestPercent(e.div(100).add(this.value))}nearestPercent(e){return Decimal.mul(e,100).round().div(100)}},interval:new class extends zW{get id(){return 2}get value(){return player.replicanti.interval}set value(e){player.replicanti.interval=e}get nextValue(){return Decimal.max(this.value.times(.9),this.cap)}get cost(){return player.replicanti.intervalCost.dividedByEffectOf(PelleRifts.vacuum.milestones[1])}get baseCost(){return player.replicanti.intervalCost}set baseCost(e){player.replicanti.intervalCost=e}get costIncrease(){return MasteryStudy(41).isBought?Decimal.pow(1e10,this.value.min(1).recip()):1e10}get cap(){return Effects.min(50,TimeStudy(22),MasteryStudy(41))}get isCapped(){return this.value.lte(this.cap)}get autobuyerMilestone(){return EternityMilestone.autobuyerReplicantiInterval}applyModifiers(e){return PW(void 0,e)}},galaxies:new class extends zW{get id(){return 3}get value(){return player.replicanti.boughtGalaxyCap}set value(e){player.replicanti.boughtGalaxyCap=e}get nextValue(){return this.value.add(1)}get cost(){return this.baseCost.dividedByEffectsOf(TimeStudy(233),PelleRifts.vacuum.milestones[1])}get baseCost(){return player.replicanti.galCost}set baseCost(e){player.replicanti.galCost=e}get distantRGStart(){return GlyphInfo.replication.sacrificeInfo.effect().add(100)}get remoteRGStart(){return GlyphInfo.replication.sacrificeInfo.effect().add(1e3)}get costIncrease(){let e=this.value,t=EternityChallenge(6).isRunning||MasteryStudy(36).isBought?o.E2.pow(e).times(o.E2):o.E5.pow(e).times(o.E25);return e.gte(this.distantRGStart)&&(t=t.times(o.E50.pow(e.sub(this.distantRGStart).add(5)))),e.gte(this.remoteRGStart)&&(t=t.times(new Decimal(1e5).powEffectOf(MasteryStudy(36)).log10().pow(Decimal.pow(e.sub(this.remoteRGStart).add(1),2)))),t}get autobuyerMilestone(){return EternityMilestone.autobuyerReplicantiMaxGalaxies}get extra(){return Effects.max(0,TimeStudy(131)).add(PelleRifts.decay.milestones[2].effectOrDefault(0))}bulkPurchaseCalc(){let e=new Decimal(170),t=EternityChallenge(6).isRunning?o.D2:new Decimal(25),n=EternityChallenge(6).isRunning?o.D2:o.D5,r=(GlyphInfo.replication.sacrificeInfo.effect().add(100)),i=(GlyphInfo.replication.sacrificeInfo.effect().add(1e3)),a=(new Decimal(1e50).log10()),s=(new Decimal(1e5).powEffectOf(MasteryStudy(36)).log10());QuantumChallenge(5).isRunning&&(r=new Decimal(1),i=new Decimal(1),a=new Decimal(1e3),s=new Decimal(25));let c=(Currency.infinityPoints.value.times(TimeStudy(233).effectOrDefault(1)).max(1).log10());if(e.gt(c))return;let l=(n.div(2)),u=(t.sub(n.div(2))),d=(e.sub(c)),f=(decimalQuadraticSolution(l,u,d).floor());if(f.lte(r)||(l=n.add(a).div(2),u=t.sub(n.div(2)).sub(a.times(r)).add(a.times(4.5)),d=c.neg().add(170).add(r.pow(2).times(a).div(2)).sub(r.times(4.5).times(a)),f=decimalQuadraticSolution(l,u,d).floor(),f.lte(i)))return f.add(1);l=s.div(3),u=n.add(a).div(2).sub(s.mul(i)).add(s.div(2)),d=t.sub(n.div(2)).sub(r.times(a)).add(a.times(4.5)).add(i.pow(2).mul(s)).sub(i.mul(s));let p=(c.neg().add(170).add(r.pow(2).mul(a).div(2)).sub(r.mul(4.5).mul(a)).sub(i.pow(3).mul(s).div(3)).add(i.pow(2).mul(s).div(2)).sub(i.mul(s).div(6)));return decimalCubicSolution(l,u,d,p,!1).floor().add(1)}autobuyerTick(){let e=(this.bulkPurchaseCalc());!e||e.floor().sub(this.value).lte(0)||(Currency.infinityPoints.subtract(this.baseCostAfterCount(this.value).sub(1)),this.value=this.value.add(e.sub(this.value)),this.baseCost=this.baseCostAfterCount(this.value))}baseCostAfterCount(e){let t=new Decimal(170),n=EternityChallenge(6).isRunning?2:25,r=EternityChallenge(6).isRunning?2:5,i=(GlyphInfo.replication.sacrificeInfo.effect().add(100)),a=(GlyphInfo.replication.sacrificeInfo.effect().add(1e3)),o=(t.add(e.times(n)).add(e.times(e.sub(1)).div(2).times(r)));if(QuantumChallenge(5).isRunning&&(i=new Decimal(1),a=new Decimal(1)),e.gt(i)){let t=QuantumChallenge(5).isRunning?new Decimal(1e3):new Decimal(50),n=(e.sub(i));o=o.add(t.times(n).times(n.add(9)).div(2))}if(e.gt(a)){let t=QuantumChallenge(5).isRunning?new Decimal(25):new Decimal(1e5).powEffectOf(MasteryStudy(36)).log10(),n=(e.sub(a));o=o.add(t.times(n).times(n.add(1)).times(n.times(2).add(1)).div(6))}return Decimal.pow10(o)}}},VW={get areUnlocked(){return player.replicanti.unl},reset(e=!1){let t=e?!1:EternityMilestone.unlockReplicanti.isReached;player.replicanti={unl:t,amount:t?o.D1:o.D0,timer:o.D0,chance:new Decimal(.01),chanceCost:o.E150,interval:o.E3,intervalCost:o.E140,boughtGalaxyCap:o.D0,galaxies:o.D0,galCost:o.E170}},unlock(e=!1){let t=o.E140.dividedByEffectOf(PelleRifts.vacuum.milestones[1]);player.replicanti.unl||(e||Currency.infinityPoints.gte(t))&&(e||Currency.infinityPoints.subtract(t),player.replicanti.unl=!0,player.replicanti.timer=o.D0,VW.amount=o.D1)},get amount(){return Decimal.fromDecimal(player.replicanti.amount)},set amount(e){player.replicanti.amount=e},galaxies:{isPlayerHoldingR:!1,get bought(){return new Decimal(player.replicanti.galaxies)},get extra(){let e=Decimal.floor(Effarig.bonusRG.add(Effects.sum(TimeStudy(225),TimeStudy(226))).times(TimeStudy(303).effectOrDefault(1)));return PlayerProgress.quantumUnlocked()&&(e=e.times(Quarks.green.effect())),e=e.timesEffectOf(QuantumChallenge(8).reward),e},get total(){return this.bought.add(this.extra)},get max(){return BW.galaxies.value.add(BW.galaxies.extra)},get canBuyMore(){return VW.amount.gte(o.NUMMAX)?this.bought.lt(this.max):!1},get areBeingBought(){let e=Autobuyer.replicantiGalaxy;return this.canBuyMore?e.canTick&&e.isEnabled||!player.options.confirmations.replicantiGalaxy&&this.isPlayerHoldingR:!1},get gain(){if(!this.canBuyMore)return o.D0;if(Achievement(126).isUnlocked){let e=VW.galaxies.max.sub(player.replicanti.galaxies),t=VW.amount.max(1).log10();return Decimal.min(e,Decimal.floor(t.div(LOG10_MAX_VALUE)))}return o.D1}},get isUncapped(){return TimeStudy(192).isBought||PelleRifts.vacuum.milestones[1].canBeApplied},get chance(){return player.replicanti.chance.powEffectOf(MasteryStudy(43))}};var HW=class{get amount(){throw new NotImplementedError}set amount(e){throw new NotImplementedError}add(e){this.amount=this.amount.add(e)}get currency(){throw new NotImplementedError}get cost(){return this.costBase.times(this.costIncrement.pow(this.amount))}get costBase(){throw new NotImplementedError}get costIncrement(){throw new NotImplementedError}get bulkPossible(){return Perk.ttFree.canBeApplied?this.currency.value.divide(this.cost).max(1).log10().div(this.costIncrement.max(1).log10()).add(1).floor():Decimal.affordGeometricSeries(this.currency.value,this.cost,this.costIncrement,0)}bulkCost(e){return this.cost.times(this.costIncrement.pow(e.sub(1)))}purchase(e=!1){if(en.timeTheorems.gte(115)&&Pelle.isDoomed&&PelleStrikes.ECs.trigger(),!this.canAfford)return!1;if(!e)return!Perk.ttFree.canBeApplied&&this.currency.layer<=1&&this.currency.subtract(this.cost),en.timeTheorems.add(1),this.add(1),player.requirementChecks.reality.noPurchasedTT=!1,en.timeTheorems.gte(115)&&Pelle.isDoomed&&PelleStrikes.ECs.trigger(),!0;let t=this.currency.value.sub(this.costBase).clampMin(this.costIncrement.recip()).log(this.costIncrement).sub(this.amount).floor();return t=t.sub(1).max(0),en.timeTheorems.add(t),this.add(t),!Perk.ttFree.canBeApplied&&this.currency.layer<=1&&t.neq(0)&&this.currency.subtract(this.cost),this.currency.lt(this.cost)&&t.neq(0)?!0:(en.timeTheorems.add(1),!Perk.ttFree.canBeApplied&&this.currency.layer<=1&&this.currency.subtract(this.cost),this.add(1),player.requirementChecks.reality.noPurchasedTT=!1,en.timeTheorems.gte(115)&&Pelle.isDoomed&&PelleStrikes.ECs.trigger(),!0)}get canAfford(){return this.currency.gte(this.cost)&&!player.eternities.eq(0)}reset(){this.amount=o.D0}};HW.am=new class extends HW{get amount(){return player.timestudy.amBought}set amount(e){player.timestudy.amBought=e}get currency(){return en.antimatter}get costBase(){return o.E20000}get costIncrement(){return o.E20000}},HW.ip=new class extends HW{get amount(){return player.timestudy.ipBought}set amount(e){player.timestudy.ipBought=e}get currency(){return en.infinityPoints}get costBase(){return o.D1}get costIncrement(){return o.E100}},HW.ep=new class extends HW{get amount(){return player.timestudy.epBought}set amount(e){player.timestudy.epBought=e}get currency(){return en.eternityPoints}get costBase(){return o.D1}get costIncrement(){return o.D2}bulkCost(e){return Perk.ttFree.canBeApplied||this.currency.layer>1?this.cost.times(this.costIncrement.pow(e)):this.cost.times(this.costIncrement.pow(e.sub(1)))}};const UW={checkForBuying(e){return PlayerProgress.realityUnlocked()||TimeDimension(1).bought.neq(0)?!0:(e||Modal.message.show(`You need to buy at least ${formatInt(1)} Time Dimension before you can purchase
      Time Theorems.`,{closeEvent:GAME_EVENT.REALITY_RESET_AFTER}),!1)},buyOne(e=!1,t){return!this.checkForBuying(e)||!HW[t].purchase(!1)?o.D0:o.D1},buyOneOfEach(){this.checkForBuying(!0)&&(this.buyOne(!0,`am`),this.buyOne(!0,`ip`),this.buyOne(!0,`ep`))},buyMax(e=!1){this.checkForBuying(e)&&(HW.am.purchase(!0),HW.ip.purchase(!0),HW.ep.purchase(!0))},totalPurchased(){return HW.am.amount.add(HW.ip.amount).add(HW.ep.amount)},calculateTimeStudiesCost(){let e=TimeStudy.boughtNormalTS().map(e=>e.cost).reduce(Decimal.sumReducer,new Decimal),t=TimeStudy.eternityChallenge.current();return t!==void 0&&(e=e.add(t.cost)),Enslaved.isRunning&&player.celestials.enslaved.hasSecretStudy&&(e=e.sub(100)),e}};var WW=class extends ct{constructor(e){super(e),this.registerEvents(e.checkEvent,()=>this.tryUnlock())}get automatorPoints(){return this.config.automatorPoints?this.config.automatorPoints:0}get name(){return this.config.name}get shortDescription(){return this.config.shortDescription?this.config.shortDescription():``}get requirement(){return typeof this.config.requirement==`function`?this.config.requirement():this.config.requirement}get lockEvent(){return typeof this.config.lockEvent==`function`?this.config.lockEvent():this.config.lockEvent}get currency(){return Currency.realityMachines}get bitIndex(){return this.id}get bits(){return player.reality.upgradeBits}set bits(e){player.reality.upgradeBits=e}get hasPlayerLock(){return(player.reality.reqLock.reality&1<<this.bitIndex)!=0}set hasPlayerLock(e){e?player.reality.reqLock.reality|=1<<this.bitIndex:player.reality.reqLock.reality&=~(1<<this.bitIndex)}get isLockingMechanics(){let e=this.config.bypassLock?.()??!1;return this.hasPlayerLock&&this.isPossible&&!e&&!this.isAvailableForPurchase}setMechanicLock(e){this.hasPlayerLock=e}toggleMechanicLock(){this.hasPlayerLock=!this.hasPlayerLock}tryShowWarningModal(e){this.isPossible&&!this.isAvailableForPurchase&&Modal.upgradeLock.show({upgrade:this,isImaginary:!1,specialLockText:e})}get isAvailableForPurchase(){return(player.reality.upgReqs&1<<this.id)!=0}get isPossible(){return this.config.hasFailed?!this.config.hasFailed():!0}tryUnlock(){!dW()||this.isAvailableForPurchase||!this.config.checkRequirement()||(player.reality.upgReqs|=1<<this.id,GameUI.notify.reality(`You've unlocked a Reality Upgrade: ${this.config.name}`),this.hasPlayerLock=!1)}onPurchased(){EventHub.dispatch(GAME_EVENT.REALITY_UPGRADE_BOUGHT);let e=this.id;(e===9||e===24)&&Glyphs.refreshActive(),e===10&&(applyRUPG10(),playerInfinityUpgradesOnReset(),EventHub.dispatch(GAME_EVENT.REALITY_UPGRADE_TEN_BOUGHT)),e===20&&player.blackHole[0].unlocked&&(player.blackHole[1].unlocked=!0),GameCache.staticGlyphWeights.invalidate()}},GW=class extends lt{get currency(){return Currency.realityMachines}get boughtAmount(){return player.reality.rebuyables[this.id]}set boughtAmount(e){player.reality.rebuyables[this.id]=e}};WW.index=mapGameData(GameDatabase.reality.upgrades,e=>e.id<6?new GW(e):new WW(e));const KW=e=>WW.index[e],qW={all:WW.index.compact(),get allBought(){return(player.reality.upgradeBits>>6)+1==1<<GameDatabase.reality.upgrades.length-5}};var JW=class extends ct{constructor(e){super(e),this.registerEvents(e.checkEvent,()=>this.tryUnlock())}get name(){return this.config.name}get requirement(){return typeof this.config.requirement==`function`?this.config.requirement():this.config.requirement}get lockEvent(){return typeof this.config.lockEvent==`function`?this.config.lockEvent():this.config.lockEvent}get currency(){return Currency.imaginaryMachines}get bitIndex(){return this.id}get bits(){return player.reality.imaginaryUpgradeBits}set bits(e){player.reality.imaginaryUpgradeBits=e}get hasPlayerLock(){return(player.reality.reqLock.imaginary&1<<this.bitIndex)!=0}set hasPlayerLock(e){e?player.reality.reqLock.imaginary|=1<<this.bitIndex:player.reality.reqLock.imaginary&=~(1<<this.bitIndex)}get isLockingMechanics(){return this.hasPlayerLock&&this.isPossible&&!this.isAvailableForPurchase}setMechanicLock(e){this.hasPlayerLock=e}toggleMechanicLock(){this.hasPlayerLock=!this.hasPlayerLock}tryShowWarningModal(e){this.isPossible&&!this.isAvailableForPurchase&&Modal.upgradeLock.show({upgrade:this,isImaginary:!0,specialLockText:e})}get isAvailableForPurchase(){return(player.reality.imaginaryUpgReqs&1<<this.id)!=0}get isPossible(){return this.config.hasFailed?!this.config.hasFailed():!0}get canBeApplied(){return super.canBeApplied&&!this.pelleDisabled}get pelleDisabled(){return Pelle.isDoomed&&this.config.isDisabledInDoomed}tryUnlock(){!MachineHandler.isIMUnlocked||this.isAvailableForPurchase||!this.config.checkRequirement()||(player.reality.imaginaryUpgReqs|=1<<this.id,GameUI.notify.reality(`You've unlocked an Imaginary Upgrade: ${this.config.name}`),this.hasPlayerLock=!1)}onPurchased(){if(EventHub.dispatch(GAME_EVENT.REALITY_UPGRADE_BOUGHT),this.id>=15&&this.id<=18&&(DarkMatterDimension(this.id-14).amount=o.D1,this.id===17&&Laitela.quotes.thirdDMD.show()),this.id>=15&&this.id<=19&&(TabNotification.laitelaUnlock.clearTrigger(),TabNotification.laitelaUnlock.tryTrigger()),this.id===21&&Laitela.quotes.finalRowIM.show(),this.id===22)for(let e of Object.keys(player.reality.glyphs.sac))player.reality.glyphs.sac[e]=XW(22).effectValue;this.id===25&&TabNotification.pelleUnlock.tryTrigger()}},YW=class extends lt{get currency(){return Currency.imaginaryMachines}get boughtAmount(){return player.reality.imaginaryRebuyables[this.id]}get canBeApplied(){return super.canBeApplied&&!this.pelleDisabled}get pelleDisabled(){return Pelle.isDoomed}set boughtAmount(e){player.reality.imaginaryRebuyables[this.id]=e}onPurchased(){this.id===7&&GameCache.staticGlyphWeights.invalidate()}};JW.index=mapGameData(GameDatabase.reality.imaginaryUpgrades,e=>e.id<=10?new YW(e):new JW(e));const XW=e=>JW.index[e],ZW={all:JW.index.compact(),get totalRebuyables(){let e=player.reality.imaginaryRebuyables,t=o.D0;for(let n in e)t=t.add(e[n]);return t},get totalSinglePurchase(){return this.all.countWhere(e=>e.isBought)},get allBought(){return(player.reality.imaginaryUpgradeBits>>6)+1==1<<GameDatabase.reality.imaginaryUpgrades.length-5}};var QW=class extends st{constructor(e){super(e),this.connectedPerks=[]}get automatorPoints(){return this.config.automatorPoints?this.config.automatorPoints:0}get label(){return this.config.label}get shortDescription(){return this.config.shortDescription?this.config.shortDescription():``}get currency(){return Currency.perkPoints}get set(){return player.reality.perks}get cost(){return 1}get isAvailableForPurchase(){return this.id===0||this.connectedPerks.some(e=>e.isBought)}get canBeApplied(){return this.isBought&&!(Pelle.isDoomed&&Pelle.uselessPerks.includes(this.id))}initializeConnections(){this.connectedPerks=GameDatabase.reality.perkConnections[this.id].map(e=>eG.find(e))}onPurchased(){if(this.config.bumpCurrency!==void 0&&this.config.bumpCurrency(),this.label===`EU1`&&Currency.eternities.gt(0)&&applyEU1(),this.label===`ACHNR`){Achievements.preReality.some(e=>!e.isUnlocked)&&(player.reality.gainedAutoAchievements=!0);for(let e of Achievements.preReality)e.unlock(!0)}GameCache.achievementPeriod.invalidate(),GameCache.buyablePerks.invalidate(),EventHub.dispatch(GAME_EVENT.PERK_BOUGHT)}};const $W=mapGameDataToObject(GameDatabase.reality.perks,e=>new QW(e)),eG={all:$W.all,find(e){return eG.all.find(t=>t.id===e)}};for(let e of eG.all)e.initializeConnections();function tG(){player.reality.perks.every(e=>eG.some(e)!==void 0)||(dev.respecPerks(),Currency.perkPoints.gte(eG.all.length)?(dev.buyAllPerks(),Modal.message.show(`Some of your Perks were invalid, but you auto-bought all valid perks.`)):Modal.message.show(`Some of your Perks were invalid, so your Perks have been reset and your Perk Points refunded.`))}function nG(){fw.display(`a-dilate`,2),setTimeout(()=>{aG(),Pelle.isDoomed&&PelleStrikes.dilation.trigger()},1e3)}function rG(e){fw.display(`a-undilate`,2),setTimeout(()=>{eternity(!1,!1,{switchingDilation:!0}),e&&e()},1e3)}function iG(){if(!PlayerProgress.dilationUnlocked()||Pelle.isDoomed&&!Pelle.canDilateInPelle)return;let e=player.options.animations.dilation&&!fw.isDisplaying;player.dilation.active?player.options.confirmations.dilation?Modal.exitDilation.show():e?rG():eternity(!1,!1,{switchingDilation:!0}):player.options.confirmations.dilation?Modal.enterDilation.show():e?nG():aG()}function aG(e){return!PlayerProgress.dilationUnlocked()||GameEnd.creditsEverClosed?!1:player.dilation.active?(eternity(!1,e,{switchingDilation:!0}),!1):(Achievement(136).unlock(),eternity(!1,e,{switchingDilation:!0}),player.dilation.active=!0,Pelle.isDoomed&&PelleStrikes.dilation.trigger(),!0)}var oG=[null,`dtGain`,`galaxyThreshold`,`tachyonGain`,`tachyonExponent`,`doubleGalaxies`,`tdMultReplicanti`,`ndMultDT`,`dilatedTimeToReplicanti`,`ipMultDT`,`timeStudySplit`,`dilationPenalty`,`eternitiesDTSynergy`,`mdMultTickspeed`,`mdBuffDT`,`mdEffectBuff`,`dtMultMA`,`ttGenerator`,`dtGainPelle`,`galaxyMultiplier`,`tickspeedPower`,`galaxyThresholdPelle`,`flatDilationMult`];function sG(e,t=1){if(GameEnd.creditsEverClosed)return!1;let n=xG[oG[e]];if(e>4&&e<23){if(player.dilation.upgrades.has(e)||!Currency.dilatedTime.purchase(n.cost))return!1;player.dilation.upgrades.add(e),e===5&&(player.dilation.totalTachyonGalaxies=player.dilation.totalTachyonGalaxies.mul(2))}else{let r=player.dilation.rebuyables[e];if(Currency.dilatedTime.lt(n.cost)||r.gte(n.config.purchaseCap))return!1;let i=Decimal.affordGeometricSeries(Currency.dilatedTime.value,n.config.initialCost,n.config.increment,r);i=Decimal.clampMax(i,t),i=Decimal.clampMax(i,n.config.purchaseCap.sub(r));let a=Decimal.sumGeometricSeries(i,n.config.initialCost,n.config.increment,r);if(Currency.dilatedTime.subtract(a),player.dilation.rebuyables[e]=player.dilation.rebuyables[e].add(i),e===2&&((!Perk.bypassTGReset.isBought||Pelle.isDoomed)&&Currency.dilatedTime.reset(),player.dilation.nextThreshold=o.E3,player.dilation.baseTachyonGalaxies=o.D0,player.dilation.totalTachyonGalaxies=o.D0),e===3&&!Pelle.isDisabled(`tpMults`)){let e=Effects.max(o.D1,Perk.retroactiveTP1,Perk.retroactiveTP2,Perk.retroactiveTP3,Perk.retroactiveTP4);Enslaved.isRunning&&(e=Decimal.pow(e,Enslaved.tachyonNerf)),Currency.tachyonParticles.multiply(Decimal.pow(e,i))}}return!0}function cG(){let e=!1;for(let t=1;t<5;t++)e||=sG(t,1/0);return e}function lG(e){let t=(e===void 0?xG.galaxyThreshold.effectValue:e).mul(3.65).add(.35),n=getAdjustedGlyphEffect(`dilationgalaxyThreshold`),r=n===0?1:n,i=xG.galaxyThresholdPelle.canBeApplied?xG.galaxyThresholdPelle.effectValue:o.D1;return QuantumChallenge(5).isRunning?new Decimal(Math.PI*100*3.65):t.mul(r).add(1).pow(i)}function uG(){if(Pelle.isDoomed){let e=Currency.tachyonParticles.value.pow(PelleRifts.paradox.milestones[1].effectOrDefault(1));return new Decimal(e).timesEffectsOf(xG.dtGain,xG.dtGainPelle,xG.flatDilationMult).times(Pelle.specialGlyphEffect.dilation).div(1e5)}let e=new Decimal(Currency.tachyonParticles.value).timesEffectsOf(xG.dtGain,xG.dtMultMA,MasteryStudy(33),Achievement(132),Achievement(137),RealityUpgrade(1),AlchemyResource.dilation,Ra.unlocks.continuousTTBoost.effects.dilatedTime,Ra.unlocks.peakGamespeedDT,GluonUpgrade.blueRed(2),GluonUpgrade.blueRed(3),MasteryStudy(51),QuantumChallenge(1).reward).times(xG.eternitiesDTSynergy.isBought?Currency.eternities.value.clampMin(1).pow(.15):1);return PlayerProgress.quantumUnlocked()&&(e=e.times(Quarks.blue.effect())),e=e.times(getAdjustedGlyphEffect(`dilationDT`)),e=e.times(Decimal.clampMin(Decimal.log10(Replicanti.amount.add(1)).mul(getAdjustedGlyphEffect(`replicationdtgain`)),1)),Enslaved.isRunning&&!e.eq(0)&&(e=e.plus(1).logPow(.85)),V.isRunning&&(e=e.pow(.5)),e}function dG(){if(Pelle.isDisabled(`tpMults`))return new Decimal(1);let e=Enslaved.isRunning?Enslaved.tachyonNerf:1;return o.D1.timesEffectsOf(xG.tachyonGain,MasteryStudy(34),Achievement(132),RealityUpgrade(4),RealityUpgrade(8),RealityUpgrade(15),GluonUpgrade.blueRed(1)).times(GlyphInfo.dilation.sacrificeInfo.effect()).pow(e)}function fG(){Currency.tachyonParticles.bumpTo(mG(player.records.thisEternity.maxAM,!0)),player.dilation.lastEP=Currency.eternityPoints.value}function pG(e,t){if(!Player.canEternity&&t)return o.D0;let n=(isInCelestialReality()||Pelle.isDoomed?e:Ra.unlocks.unlockDilationStartingTP.effectOrDefault(e)).max(1).log10().div(Math.log10(Number.MAX_VALUE)).pow(Decimal.add(1.5,xG.tachyonExponent.effectOrDefault(0)));return Enslaved.isRunning&&(n=n.pow(Enslaved.tachyonNerf)),n}function mG(e,t){return softcap({baseResource:pG(e,t).times(dG()),softcapStart:o.NUMMAX,softcapPower:1/3,softcapType:SOFTCAP_MODES.POLYNOMIAL})}function hG(e){return mG(Currency.antimatter.value,e).minus(Currency.tachyonParticles.value).clampMin(0)}function gG(){let e=Currency.tachyonParticles.value.dividedBy(dG());return Decimal.pow10(e.times(Decimal.pow(400,Decimal.add(1.5,xG.tachyonExponent.effectOrDefault(0)))).pow(Decimal.add(1.5,xG.tachyonExponent.effectOrDefault(0)).recip()))}function _G(e){let t=uG(),n=t.times(getGameSpeedupForDisplay()),r=Currency.dilatedTime.value;if(t.eq(0))return null;if(PelleRifts.paradox.isActive){let t=Pelle.riftDrainPercent,i=n.minus(Decimal.multiply(e,t)),a=n.minus(r.times(t));return i.lt(0)?`Never affordable due to Rift drain`:TimeSpan.fromSeconds(a.div(i).ln().div(t)).toTimeEstimate()}return TimeSpan.fromSeconds(Decimal.sub(e,r).div(n)).toTimeEstimate()}function vG(e){let t=e.eq(0)?o.D0:e.log10(),n=Effects.product(xG.dilationPenalty).times(.75);return Decimal.pow10(t.abs().pow(n).times(Decimal.sign(t)))}var yG=class extends st{get currency(){return Currency.dilatedTime}get set(){return player.dilation.upgrades}onPurchased(){this.id===4&&(player.dilation.totalTachyonGalaxies=player.dilation.totalTachyonGalaxies.mul(2)),this.id===10&&jS(15).tryComplete()}},bG=class extends lt{get currency(){return Currency.dilatedTime}get boughtAmount(){return player.dilation.rebuyables[this.id]}set boughtAmount(e){player.dilation.rebuyables[this.id]=e}get isCapped(){return this.config.reachedCap()}purchase(e){sG(this.config.id,e)}};const xG=mapGameDataToObject(GameDatabase.eternity.dilation,e=>e.rebuyable?new bG(e):new yG(e)),SG={rebuyable:[xG.dtGain,xG.galaxyThreshold,xG.tachyonGain],fromId:e=>xG.all.find(t=>t.id===Number(e))};var CG=class{constructor(e){let{getAmount:t,setAmount:n,calculateValue:r,initialCost:i,costMult:a}=e;this.incrementAmount=()=>n(t().add(1)),this._lazyValue=new Lazy(()=>r(t())),this._lazyCost=new Lazy(()=>getHybridCostScaling(t(),o.E30,i,a,new Decimal(.2),o.E310,o.E5,o.E1)),this.id=e.id,this.hasAutobuyer=e.hasAutobuyer,this.onPurchase=e.onPurchase}get value(){return this._lazyValue.value}get cost(){return this._lazyCost.value}get isAffordable(){return Currency.realityMachines.gte(this.cost)}purchase(){if(!this.isAffordable||this.value===0)return;let e=TG(this.id),t=e.isCharged?o.D1.sub(e.stateProgress):e.stateProgress;Currency.realityMachines.purchase(this.cost),this.incrementAmount(),this._lazyValue.invalidate(),this._lazyCost.invalidate(),this.onPurchase&&this.onPurchase();let n=e.isCharged?e.duration:e.interval;e.updatePhase(n.mul(t).sub(e.phase)),e.isPermanent&&(player.blackHole[this.id-1].active=!0),EventHub.dispatch(GAME_EVENT.BLACK_HOLE_UPGRADE_BOUGHT)}},wG=class{constructor(e){this.id=e+1;let t=[o.D1,o.E3];this.intervalUpgrade=new CG({id:this.id,getAmount:()=>this._data.intervalUpgrades,setAmount:e=>this._data.intervalUpgrades=e,calculateValue:t=>Decimal.pow(.8,t).mul(Decimal.div(3600,Decimal.pow(10,e))),initialCost:t[e].mul(15),costMult:new Decimal(3.5),hasAutobuyer:!1,onPurchase:()=>{this.isCharged||(this._data.phase=this.interval.clampMax(this._data.phase))}}),this.powerUpgrade=new CG({id:this.id,getAmount:()=>this._data.powerUpgrades,setAmount:e=>this._data.powerUpgrades=e,calculateValue:t=>Decimal.pow(1.35,t).mul(Decimal.div(180,Decimal.pow(2,e))),initialCost:t[e].mul(20),costMult:o.D2,hasAutobuyer:!0}),this.durationUpgrade=new CG({id:this.id,getAmount:()=>this._data.durationUpgrades,setAmount:e=>this._data.durationUpgrades=e,calculateValue:t=>Decimal.pow(1.3,t).mul(o.E1.sub(e*3)),initialCost:t[e].mul(10),costMult:o.D4,hasAutobuyer:!1})}get _data(){return player.blackHole[this.id-1]}get rawInterval(){return this.intervalUpgrade.value}get interval(){return this.isPermanent?o.D0:this.rawInterval}get power(){return this.powerUpgrade.value.mul(Achievement(158).effectOrDefault(1))}get duration(){return this.durationUpgrade.value.mul(Achievement(155).effectOrDefault(1))}get isUnlocked(){return this._data.unlocked&&!Enslaved.isRunning&&!Pelle.isDisabled(`blackhole`)}get isCharged(){return this._data.active}get timeWithPreviousActiveToNextStateChange(){return this.isCharged?this.duration.sub(this.phase):this.interval.sub(this.phase)}get timeToNextStateChange(){let e=this.timeWithPreviousActiveToNextStateChange;return this.id===1?e:this.isCharged?TG(1).isCharged?Decimal.min(e,TG(1).timeToNextStateChange):TG(1).timeToNextStateChange:TG(1).timeUntilTimeActive(e)}timeUntilTimeActive(e){let t=e;if(this.isCharged){if(t.lt(this.timeToNextStateChange))return t;t=t.sub(this.timeToNextStateChange)}let n=this.isCharged?this.timeToNextStateChange.add(this.interval):this.timeToNextStateChange;return n=n.add(t.div(this.duration).floor().mul(this.cycleLength)),n=n.add(t.mod(this.duration)),n}get stateProgress(){return this.isCharged?Decimal.sub(1,this.phase.div(this.duration)):this.phase.div(this.interval)}get displayState(){if(Pelle.isDisabled(`blackhole`))return`<i class="fas fa-ban"></i> Disabled`;if(Enslaved.isAutoReleasing)return Enslaved.autoReleaseTick<3?`<i class="fas fa-compress-arrows-alt u-fa-padding"></i> Pulsing`:`<i class="fas fa-expand-arrows-alt u-fa-padding"></i> Pulsing`;if(Enslaved.isStoringGameTime)return`<i class="fas fa-compress-arrows-alt"></i> Charging`;if(EG.areNegative)return`<i class="fas fa-caret-left"></i> Inverted`;if(EG.arePaused)return`<i class="fas fa-pause"></i> Paused`;if(this.isPermanent)return`<i class="fas fa-infinity"></i> Permanent`;let e=TimeSpan.fromSeconds(new Decimal(this.timeToNextStateChange)).toStringShort(!0);return this.isActive?`<i class="fas fa-play"></i> Active (${e})`:`<i class="fas fa-redo"></i> Inactive (${e})`}get isActive(){return this.isCharged&&(this.id===1||TG(this.id-1).isActive)&&!Pelle.isDisabled(`blackhole`)}get dutyCycle(){return this.duration.div(this.rawInterval.add(this.duration))}get isPermanent(){return this.dutyCycle.gte(.9999)}get phase(){return this._data.phase}get cycleLength(){return this.interval.add(this.duration)}updatePhase(e){this.isPermanent||(this._data.phase=this._data.phase.add(e),this.phase.gte(this.cycleLength)&&(this._data.activations=this._data.activations.add(this.phase.div(this.cycleLength).floor()),this._data.phase=this._data.phase.mod(this.cycleLength)),this.isCharged?this.phase.gte(this.duration)&&(this._data.phase=this._data.phase.sub(this.duration),this._data.active=!1,GameUI.notify.showBlackHoles&&GameUI.notify.blackHole(`${this.description(!0)} duration ended.`)):this.phase.gte(this.interval)&&(this._data.phase=this._data.phase.sub(this.interval),this._data.activations=this._data.activations.add(1),this._data.active=!0,GameUI.notify.showBlackHoles&&GameUI.notify.blackHole(`${this.description(!0)} has activated!`)))}realTimeWhileActive(e){e=new Decimal(e);let t=this.timeUntilNextDeactivation,n=this.interval,r=this.duration,i=this.cycleLength,a=t.clampMax(r),o=e.sub(t).div(i).floor(),s=r.mul(o),c=e.sub(t).add(i).mod(i).sub(n).clampMin(0);return a.add(s).add(c)}get timeUntilNextDeactivation(){return this.isCharged?this.duration.sub(this.phase):this.cycleLength.sub(this.phase)}description(e){return RealityUpgrade(20).isBought?`Black Hole ${this.id}`:e?`The Black Hole`:`the Black Hole`}};wG.list=Array.range(0,2).map(e=>new wG(e));function TG(e){return wG.list[e-1]}const EG={ACCELERATION_TIME:5,get list(){return wG.list},get canBeUnlocked(){return Currency.realityMachines.gte(100)&&!this.areUnlocked},get areUnlocked(){return TG(1).isUnlocked},unlock(){this.canBeUnlocked&&(player.blackHole[0].unlocked=!0,Currency.realityMachines.purchase(100),player.records.timePlayedAtBHUnlock=player.records.totalTimePlayed,EventHub.dispatch(GAME_EVENT.BLACK_HOLE_UNLOCKED))},togglePause:(e=!1)=>{if(!EG.areUnlocked)return;let t=player.requirementChecks.reality.slowestBH.lte(1e-300);if(ImaginaryUpgrade(24).isLockingMechanics&&Ra.isRunning&&t){e||ImaginaryUpgrade(24).tryShowWarningModal(`uninvert your Black Hole`);return}player.blackHolePause&&(player.requirementChecks.reality.slowestBH=o.D1),player.blackHolePause=!player.blackHolePause,player.blackHolePauseTime=player.records.realTimePlayed;let n=RealityUpgrade(20).isBought?`Black Holes`:`Black Hole`,r=player.blackHolePause?EG.areNegative?`inverted`:`paused`:`unpaused`,i=e?`automatically `:``;GameUI.notify.blackHole(`${n} ${i}${r}`)},get unpauseAccelerationFactor(){return this.arePermanent?o.D1:player.records.realTimePlayed.sub(player.blackHolePauseTime).div(1e3*this.ACCELERATION_TIME).clamp(0,1)},get arePaused(){return player.blackHolePause},get areNegative(){return this.arePaused&&!Enslaved.isRunning&&!Laitela.isRunning&&player.blackHoleNegative.lt(1)},get arePermanent(){return EG.list.every(e=>e.isPermanent)},updatePhases(e){if(!this.areUnlocked||this.arePaused)return;let t=e.div(1e3),[n,r]=this.autoPauseData(t),i=this.realTimePeriodsWithBlackHoleActive(r,!0);for(let e of this.list){if(!e.isUnlocked)break;e.updatePhase(i[e.id-1])}n&&EG.togglePause(!0)},calculateOfflineTick(e,t,n){let r=this.calculateSpeedups(),i=this.calculateGameTimeFromRealTime(e,r);if(t===1)return[e,i.div(e)];let a=this.binarySearch(0,e,e=>this.calculateGameTimeFromRealTime(e,r).mul(t).div(i),1,n),o=this.calculateGameTimeFromRealTime(a,r).div(a);return[a,o]},binarySearch(e,t,n,r,i){let a;for(let o=0;o<100;++o){a=(e+t)/2;let o=n(a).sub(r);if(o.abs().lt(i))break;o.lt(0)?e=a:t=a}return a},calculateSpeedups(){let e=[GAME_SPEED_EFFECT.FIXED_SPEED,GAME_SPEED_EFFECT.TIME_GLYPH,GAME_SPEED_EFFECT.SINGULARITY_MILESTONE,GAME_SPEED_EFFECT.NERFS],t=getGameSpeedupFactor(e),n=[t];e.push(GAME_SPEED_EFFECT.BLACK_HOLE);for(let r of this.list){if(!r.isUnlocked)break;n.push(getGameSpeedupFactor(e,r.id).div(t))}return n},calculateGameTimeFromRealTime(e,t){l(e)||(e=new Decimal(e));let[n,r]=this.autoPauseData(e),i=this.realTimePeriodsWithBlackHoleEffective(r,t);return i[0]=i[0].add(e.sub(r)),i.map((e,n)=>t[n].mul(e)).sum()},realTimePeriodsWithBlackHoleEffective(e){let t=this.realTimePeriodsWithBlackHoleActive(e),n=[];for(let e=0;e<t.length-1;e++)n.push(new Decimal(t[e]).sub(t[e+1]));return n.push(t.last()),n},realTimePeriodsWithBlackHoleActive(e){let t=[e];for(let e of this.list){if(!e.isUnlocked)break;let n=e.realTimeWhileActive(t.last());t.push(n)}return t},timeToNextPause(e,t=100){if(e===1){let e=TG(1);if(e.interval.lte(EG.ACCELERATION_TIME))return null;let t=(e.isCharged?e.duration:o.D0).add(e.interval).sub(e.phase);return t.lt(EG.ACCELERATION_TIME)?t.add(e.duration).add(e.interval).sub(EG.ACCELERATION_TIME):t.sub(EG.ACCELERATION_TIME)}let n=[TG(1).isCharged,TG(2).isCharged],r=[TG(1).phase,TG(2).phase],i=[TG(1).duration,TG(2).duration],a=[TG(1).interval,TG(2).interval];if(a[0].lte(EG.ACCELERATION_TIME)&&a[1].lte(EG.ACCELERATION_TIME))return null;let s=[[a[0]],[i[0],a[1]],[i[0],i[1]]],c=o.D0,l=o.D0;for(let e=0;e<t;e++){let e=n[0]?n[1]?2:1:0,t=s[e],i=e>0?t[0].sub(r[0]).clampMax(t[1].sub(r[1])):t[0].sub(r[0]);if(e===2){if(c.gte(EG.ACCELERATION_TIME))return l.sub(EG.ACCELERATION_TIME);c=o.D0}else c=c.add(i);l=l.add(i),e>0&&(r[1]=r[1].add(i),r[1].gte(t[1])&&(n[1]=!n[1],r[1]=r[1].sub(t[1]))),r[0]=r[0].add(i),r[0].gte(t[0])&&(n[0]=!n[0],r[0]=r[0].sub(t[0]))}return null},autoPauseData(e){if(this.arePaused)return[!1,0];if(player.blackHoleAutoPauseMode===BLACK_HOLE_PAUSE_MODE.NO_PAUSE)return[!1,e];let t=this.timeToNextPause(player.blackHoleAutoPauseMode);return t===null||t.lt(1e-9)||t.gt(e)?[!1,e]:[!0,t]}},DG={get baseRMCap(){return o.E1000},get hardcapRM(){return this.baseRMCap.times(ImaginaryUpgrade(6).effectOrDefault(1))},get distanceToRMCap(){return this.hardcapRM.minus(Currency.realityMachines.value)},get realityMachineMultiplier(){return Teresa.rmMultiplier.times(PerkShopUpgrade.rmMult.effectOrDefault(o.D1)).times(getAdjustedGlyphEffect(`effarigrm`)).times(Achievement(167).effectOrDefault(1))},get uncappedRM(){let e=player.records.thisReality.maxEP.plus(gainedEternityPoints()).max(1).log10();PlayerProgress.realityUnlocked()||(e.gt(8e3)&&(e=new Decimal(8e3)),e.gt(6e3)&&(e=e.sub(e.sub(6e3).times(.75))));let t=o.E3.pow(e.div(4e3).sub(1));return t.gte(1)&&t.lt(10)&&(t=e.minus(26).mul(27).div(4e3)),t=t.times(this.realityMachineMultiplier),t.floor()},get gainedRealityMachines(){return this.uncappedRM.clampMax(this.hardcapRM)},get isIMUnlocked(){return Currency.realityMachines.value.gte(this.hardcapRM)||Currency.imaginaryMachines.gt(0)},get baseIMCap(){return Decimal.pow(Decimal.clampMin(this.uncappedRM.max(1).log10().sub(1e3),0),2).times(Decimal.pow(Decimal.clampMin(this.uncappedRM.max(1).log10().sub(1e5),1),.2))},get currentIMCap(){return player.reality.iMCap.times(ImaginaryUpgrade(13).effectOrDefault(1))},get projectedIMCap(){return this.baseIMCap.times(ImaginaryUpgrade(13).effectOrDefault(1))},updateIMCap(){this.uncappedRM.gte(this.baseRMCap)&&this.baseIMCap.gt(player.reality.iMCap)&&(player.records.bestReality.iMCapSet=Glyphs.copyForRecords(Glyphs.active.filter(e=>e!==null)),player.reality.iMCap=this.baseIMCap)},get scaleTimeForIM(){return o.D60.div(ImaginaryUpgrade(20).effectOrDefault(1))},gainedImaginaryMachines(e){return this.currentIMCap.sub(Currency.imaginaryMachines.value).times(o.D1.sub(Decimal.pow(2,new Decimal(0).sub(e).div(1e3).div(this.scaleTimeForIM))))},estimateIMTimer(e){let t=this.currentIMCap;if(t.lte(e))return o.BEMAX;let n=Currency.imaginaryMachines.value;return Decimal.max(0,Decimal.log(t.div(t.sub(e)),2).sub(Decimal.log(t.div(t.sub(n)),2))).times(this.scaleTimeForIM)}};var OG=e(Tx());const $={};$.speedUp=1,$.pairedQCs=[],$.hardReset=function(){GameStorage.hardReset()},$.giveAllAchievements=function(){let e=Achievements.all.concat(SecretAchievements.all);for(let t of e)t.unlock()},$.doubleEverything=function(){Object.keys(player).forEach(e=>{typeof player[e]==`number`&&(player[e]*=2),typeof player[e]==`object`&&player[e]instanceof Decimal&&(player[e]=player[e].times(2)),typeof player[e]==`object`&&!isFinite(player[e])&&Object.keys(player[e]).forEach(t=>{typeof player[e][t]==`number`&&(player[e][t]*=2),typeof player[e][t]==`object`&&player[e][t]instanceof Decimal&&(player[e][t]=player[e][t].times(2))})})},$.tripleEverything=function(){Object.keys(player).forEach(e=>{typeof player[e]==`number`&&(player[e]*=3),typeof player[e]==`object`&&player[e]instanceof Decimal&&(player[e]=player[e].times(3)),typeof player[e]==`object`&&!isFinite(player[e])&&Object.keys(player[e]).forEach(t=>{typeof player[e][t]==`number`&&(player[e][t]*=3),typeof player[e][t]==`object`&&player[e][t]instanceof Decimal&&(player[e][t]=player[e][t].times(3))})})},$.barrelRoll=function(){fw.display(`a-barrel-roll`,5)},$.spin3d=function(){document.body.style.animation===``?document.body.style.animation=`a-spin3d 3s infinite`:document.body.style.animation=``},$.spin4d=function(){document.body.style.animation===``?document.body.style.animation=`a-spin4d 3s infinite`:document.body.style.animation=``},$.cancerize=function(){Theme.tryUnlock(`Design`),Notation.emoji.setAsCurrent()},$.fixSave=function(){let e=JSON.stringify(player,GameSaveSerializer.jsonConverter).replaceAll(`NaN`,`1`).replaceAll(`Infinity`,`1`),t=JSON.parse(e);if(!t||GameStorage.checkPlayerObject(t)!==``){Modal.message.show(`Could not fix the save.`);return}GameStorage.loadPlayerObject(t),GameStorage.save()},$.updateTDCosts=function(){for(let e=1;e<9;e++){let t=TimeDimension(e);t.cost=t.nextCost(t.bought)}},$.refundTimeDims=function(){for(let e of TimeDimensions.all)e.bought=0;$.updateTDCosts()},$.refundEPMult=function(){player.epmultUpgrades=0},$.refundDilStudies=function(){for(let e of GameDatabase.eternity.timeStudies.dilation)player.dilation.studies.includes(e.id)&&(player.dilation.studies.splice(player.dilation.studies.indexOf(e.id),1),console.log(document.getElementById(`removed dilstudy${e.id}`)),Currency.timeTheorems.add(e.cost))},$.resetDilation=function(){player.dilation.dilatedTime=o.D0,player.dilation.tachyonParticles=o.D0,player.dilation.rebuyables[1]=0,player.dilation.rebuyables[2]=0,player.dilation.rebuyables[3]=0,player.dilation.baseTachyonGalaxies=0,player.dilation.totalTachyonGalaxies=0},$.giveSpecialGlyph=function(e,t,n,r=n){if(GameCache.glyphInventorySpace.value===0)return;let i=GlyphGenerator.randomGlyph({actualLevel:n,rawLevel:r});i.symbol=t,i.color=e,Glyphs.addToInventory(i)},$.giveGlyph=function(e,t=e){GameCache.glyphInventorySpace.value!==0&&Glyphs.addToInventory(GlyphGenerator.randomGlyph({actualLevel:e,rawLevel:t}))},$.giveRealityGlyph=function(e){GameCache.glyphInventorySpace.value!==0&&Glyphs.addToInventory(GlyphGenerator.realityGlyph())},$.setCompanionGlyphEP=function(e){let t=player.reality.glyphs.active.concat(player.reality.glyphs.inventory).filter(e=>e.type===`companion`)[0];t.strength=rarityToStrength(e.max(1).log10()/1e6)},$.decriminalize=function(){SecretAchievement(23).lock(),EventHub.dispatch(GAME_EVENT.ACHIEVEMENT_UNLOCKED)},$.removeAch=function(e){if(e===`all`){let e=Achievements.all.concat(SecretAchievements.all);for(let t of e)t.lock();return`removed all achievements`}return typeof e==`number`?Achievement(e).lock():e.startsWith(`r`)?Achievement(Number.parseInt(e.slice(1),10)).lock():e.startsWith(`s`)?SecretAchievement(Number.parseInt(e.slice(1),10)).lock():`failed to delete achievement`},window.nextNewsMessageId=void 0,$.setNextNewsMessage=function(e){nextNewsMessageId=e},$.implode=function(){bigCrunchAnimation()},$.eternify=function(){eternityAnimation()},$.dilate=function(){animateAndDilate()},$.undilate=function(){animateAndUndilate()},$.realize=function(){runRealityAnimation()},$.respecPerks=function(){player.reality.perkPoints=player.reality.perkPoints.add(player.reality.perks.size),player.reality.perks=new Set,GameCache.achievementPeriod.invalidate(),GameCache.buyablePerks.invalidate()};function kG(){return window.location.href.split(`//`)[1].length>20||AG()}function AG(){let e=window.location.href;return e.includes(`file`)||e.includes(`127.0.0.1`)||e.includes(`localhost`)}$.togglePerformanceStats=function(){PerformanceStats.toggle()},$.buyAllPerks=function(){let e=[],t=[Perk.firstPerk];for(;t.length>0&&!player.reality.perkPoints.lt(1);){let n=t.shift();e.push(n),t.push(...n.connectedPerks.filter(t=>!e.includes(t))),n.purchase()}},$.printResourceTotals=function(){console.log(`Antimatter: e${Currency.antimatter.exponent.toPrecision(3)}`),console.log(`RM: e${Math.round(MachineHandler.gainedRealityMachines.log10())}`),console.log(`Glyph level: ${100*Math.floor(gainedGlyphLevel().actualLevel/100+.5)}`),console.log(`Tickspeed: e${-Tickspeed.current.exponent.toPrecision(3)}`),console.log(`Gamespeed: ${(getGameSpeedupFactor()**1.2).toPrecision(1)}`);let e=100*Math.floor(player.galaxies/100+.5),t=100*Math.floor(Replicanti.galaxies.total/100+.5),n=100*Math.floor(player.dilation.totalTachyonGalaxies/100+.5);console.log(`Galaxies: ${e}+${t}+${n} (${e+t+n})`),console.log(`Tick reduction: e${-Math.round(getTickSpeedMultiplier().log10())}`);let r=o.D1;for(let e=1;e<=8;e++)r=r.times(AntimatterDimension(e).multiplier);console.log(`AD mults: e${r.log10().toPrecision(3)}`);let i=o.D1;for(let e=1;e<=8;e++)i=i.times(InfinityDimension(e).multiplier);console.log(`ID mults: e${i.log10().toPrecision(3)}`);let a=o.D1;for(let e=1;e<=8;e++)a=a.times(TimeDimension(e).multiplier);console.log(`TD mults: e${a.log10().toPrecision(3)}`),console.log(`Tickspeed from TD: ${formatWithCommas(Decimal.floor(player.totalTickGained.div(1e3).add(.5)).mul(1e3))}`),console.log(`Infinities: e${Math.round(player.infinities.log10())}`),console.log(`Eternities: e${Math.round(player.eternities.log10())}`),console.log(`Replicanti: e${formatWithCommas(1e5*Math.floor(Replicanti.amount.log10()/1e5+.5))}`),console.log(`TT: e${Math.round(player.timestudy.theorem.log10())}`),console.log(`DT: e${Math.round(player.dilation.dilatedTime.log10())}`),console.log(`TP: e${Math.round(player.dilation.tachyonParticles.log10())}`)},$.unlockCelestialQuotes=function(e){Quotes[e].all.forEach(e=>e.show())},$.presentCelestialQuotes=function(e){Quotes[e].all.forEach(e=>e.present())},$.testReplicantiCode=function(e,t=!1){let n=[[function(){player.infinities=o.E12,player.celestials.effarig.unlockBits=64}],[function(){player.replicanti.interval=1}],[function(){player.timestudy.studies.push(33)}],[function(){player.timestudy.studies.push(62)}],[function(){player.timestudy.studies.push(131)},function(){player.timestudy.studies.push(132)},function(){player.timestudy.studies.push(133)},function(){player.timestudy.studies.push(131,132,133)}],[function(){player.timestudy.studies.push(192)}],[function(){player.timestudy.studies.push(213)}],[function(){player.timestudy.studies.push(225)}],[function(){player.timestudy.studies.push(226)}],[function(){player.achievementBits[8]|=16}],[function(){player.achievementBits[12]|=8}],[function(){player.achievementBits[12]|=128}],[function(){player.reality.perks=new Set([32])}],[function(){Autobuyer.replicantiGalaxy.isActive=!0}],[function(){Replicanti.galaxies.isPlayerHoldingR=!0}],[function(){player.replicanti.boughtGalaxyCap=100},function(){player.replicanti.boughtGalaxyCap=100,player.replicanti.galaxies=50}],[function(){player.reality.upgReqs=64,player.reality.upgradeBits=64}]],r=n.map(e=>e.length+1).reduce((e,t)=>e*t),i=[],a=function(e){Replicanti.galaxies.isPlayerHoldingR=!1,GameStorage.loadPlayerObject(Yt.defaultStart),player.infinities=o.D1,player.infinityPoints=o.E150,Replicanti.unlock(),player.replicanti.chance=1;for(let t=0;t<n.length;t++){let r=n.slice(0,t).map(e=>e.length+1).reduce((e,t)=>e*t,1),i=[()=>{}].concat(n[t])[Math.floor(e/r)%(n[t].length+1)];i()}function t(){for(let e=0;e<=5;e++)replicantiLoop(10**e),i.push(Notation.scientific.formatDecimal(Replicanti.amount,5,5)),i.push(player.replicanti.galaxies),i.push(Replicanti.galaxies.total)}t(),player.antimatter=o.E309,player.records.thisInfinity.maxAM=o.E309,bigCrunchReset(),t()};if(e===void 0){let e=4e3,t=10007;if(e*t<r)throw Error(`Prime p is not large enough to go through all situations.`);for(let n=0;n<e;n++){let i=n*t%r;n%100==0&&console.log(`Considering situation #${n}/${e} (${i})`),a(i)}}else a(e);let s=(0,OG.sha512_256)(i.toString());return console.log(s),s},$.testGlyphs=function(e){let t=e.glyphLevel||6500,n=e.duration||4e3,r=Date.now(),i=GameSaveSerializer.serialize(player),a=(e,n)=>({type:e,level:t,strength:3.5,rawLevel:t,idx:null,id:r++,effects:makeGlyphEffectBitmask(n)}),o=e=>a(e,GlyphTypes[e].effects.map(e=>e.id)),s=[a(`effarig`,[`effarigantimatter`,`effarigdimensions`,`effarigforgotten`,`effarigblackhole`]),a(`effarig`,[`effarigantimatter`,`effarigdimensions`,`effarigforgotten`,`effarigachievement`])];function c(e,t){if(t.length===0)return[];if(e===0)return[[]];let n=c(e,t.slice(1)),r=c(e-1,t);return r.forEach(e=>e.push(t[0])),r.concat(n)}let l=c(5,GlyphInfo.basicGlyphTypes).map(e=>e.map(e=>o(e))),u=c(4,GlyphInfo.basicGlyphTypes).map(e=>e.map(e=>o(e))),d=s.map(e=>u.map(t=>[e].concat(t))),f=l.concat(...d);function p(e){player.reality.glyphs.active=f[e].map((e,t)=>(e.idx=t,e)),Glyphs.active=[...player.reality.glyphs.active],EventHub.dispatch(GAME_EVENT.GLYPHS_CHANGED)}function m(e){return e.type===`effarig`?s.findIndex(t=>t.id===e.id).toString():GLYPH_SYMBOLS[e.type]}function h(e,t,n=!1){return e.length>=t?e:n?` `.repeat(t-e.length)+e:e+` `.repeat(t-e.length)}function g(e){let t=h(`${Math.floor(100*(e+1)/f.length)}%`,4,!0),n=h(MachineHandler.gainedRealityMachines.toPrecision(2),9),r=h(gainedGlyphLevel().actualLevel,4),a=h(player.eternityPoints.exponent.toString(),6),o=h(player.infinityPoints.exponent.toString(),8),s=h(Currency.antimatter.exponent.toString(),12),c=DimBoost.purchasedBoosts,l=Replicanti.galaxies.total+player.galaxies+player.dilation.totalTachyonGalaxies,u=f[e].map(m).sum();console.log(`${t} ${u} rm=${n} gl=${r} ep=${a} ip=${o} am=${s} dimboosts=${c} galaxies=${l}`),GameStorage.offlineEnabled=!1,GameStorage.import(i),e<f.length-1&&setTimeout(_,100,e+1)}function _(e){p(e),AutomatorBackend.start(),setTimeout(g,n,e)}_(0)},$.unlockAutomator=function(){player.reality.automator.forceUnlock=!0},$.forceCloudSave=async function(){let e=await Cloud.load(),t=GameSaveSerializer.deserialize(e),n=GameStorage.currentSlot;t.saves||=[],t.saves[n]=GameStorage.saves[n],Cloud.save(n)},$.unlockAllCosmeticSets=function(){player.reality.glyphs.cosmetics.unlockedFromNG=Object.keys(GameDatabase.reality.glyphCosmeticSets)},$.beTests={},$.beTests.speed=function(){$.speedUp=1e24},$.beTests.consecutiveInfinities=function(e){player.infinityPoints=player.infinityPoints.add(gainedInfinityPoints().times(e)),player.infinities=player.infinities.add(gainedInfinities().round())},$.beTests.completeChalleges={},$.beTests.completeChalleges.normal=function(){for(let e=1;e<13;e++)NormalChallenge(e).complete()},$.beTests.completeChalleges.infinity=function(){for(let e=1;e<9;e++)InfinityChallenge(e).complete()},$.beTests.completeChalleges.eternity=function(){for(let e=1;e<15;e++)EternityChallenge(e).completions=5},$.beTests.completeChalleges.all=function(){$.beTests.completeChalleges.normal(),$.beTests.completeChalleges.infinity(),$.beTests.completeChalleges.eternity()},$.beTests.nanFuckIteration=function(e,t){for(let n in e)console.log(e[n]),console.log(t[n]),e[n]instanceof Decimal&&t[n]!=null&&(t[n].neq(0)?(e[n].lt(0)||e[n].layer>8e15)&&(e[n]=t[n]):e[n].layer>8e15&&(e[n]=t[n])),e[n]instanceof Number&&t[n]!=null&&(t[n]==0?e[n]>1e300&&(e[n]=t[n]):(e[n]>1e300||e[n]<0)&&(e[n]=t[n])),(e[n]instanceof Object||Array.isArray(e[n]))&&!(e[n]instanceof Decimal)&&t[n]!=null&&(e[n]=$.beTests.nanFuckIteration(e[n],t[n])),e[n]==null&&t[n]!=null&&(e[n]=t[n]);return e},$.beTests.nanFuck=function(){player=$.beTests.nanFuckIteration(player,Yt.defaultStart),GameStorage.save()},$.beTests.prepare=function(e=!1){e?$.beTests.completeChalleges.all():$.beTests.completeChalleges.normal(),$.beTests.consecutiveInfinities(new Decimal(`1e350`)),$.beTests.speed(),GameStorage.import(`blob`),Notation.scientific.setAsCurrent(),Achievement(61).unlock()},$.breakInfinity=function(){for(let e of Autobuyers.all)e.data.interval!==void 0&&e.maxIntervalForFree();Achievement(61).tryUnlock(),player.break=!player.break,TabNotification.ICUnlock.tryTrigger(),EventHub.dispatch(player.break?GAME_EVENT.BREAK_INFINITY:GAME_EVENT.FIX_INFINITY),GameUI.update()},$.applyNGPlus=function(){$.beTests.completeChalleges.normal(),$.beTests.completeChalleges.infinity();for(let e=1;e<13;e++)EternityChallenge(e).completions=e===1||e===4||e===10?1:5;$.breakInfinity();for(let e=0;e<13;e++)player.achievementBits[e]=255;player.infinityUpgrades=new Set([`timeMult`,`dimMult`,`timeMult2`,`unspentBonus`,`27Mult`,`18Mult`,`36Mult`,`resetMult`,`passiveGen`,`45Mult`,`resetBoost`,`galaxyBoost`,`skipReset1`,`skipReset2`,`skipReset3`,`skipResetGalaxy`]),player.infinityRebuyables=[new Decimal(8),new Decimal(7),new Decimal(0)],Replicanti.unlock(!0),player.eternities=new Decimal(`1e6`),player.dilation.studies.push(1),player.dimensionBoosts=new Decimal(4),player.galaxies=new Decimal(1)};const jG={BITS_PER_MASK:31,addSeenNews(e){if(!GameDatabase.news.map(e=>e.id).includes(e))return;let t=e.match(/([a-z]+)(\d+)/u),n=t[1],r=Number.parseInt(t[2],10);for(player.news.seen[n]||(player.news.seen[n]=[]);this.BITS_PER_MASK*player.news.seen[n].length<=r;)player.news.seen[n].push(0);player.news.seen[n][Math.floor(r/this.BITS_PER_MASK)]|=1<<r%this.BITS_PER_MASK,player.news.totalSeen++},hasSeenNews(e){let t=e.match(/([a-z]+)(\d+)/u),n=t[1],r=Number.parseInt(t[2],10),i=player.news.seen[n];return!i||this.BITS_PER_MASK*i.length<r?!1:(i[Math.floor(r/this.BITS_PER_MASK)]|=1<<r%this.BITS_PER_MASK)!=0},get uniqueTickersSeen(){let e=0;for(let t of Object.values(player.news.seen))for(let n of t)e+=countValuesFromBitmask(n);return e}};var MG=class{constructor(e,t){this._parent=e,this.config=t}get name(){return this.config.name}get symbol(){return this.config.symbol}get isPermanentlyHidden(){return this.config.hideAt<GameEnd.endState&&!GameEnd.creditsClosed}get hidable(){return this.config.hidable}get isHidden(){return Enslaved.isRunning||Pelle.hasGalaxyGenerator?!1:(player.options.hiddenSubtabBits[this._parent.id]&1<<this.id)!=0&&this.hidable}get isUnlocked(){return this.config.condition===void 0||this.config.condition()}get isAvailable(){return!this.isPermanentlyHidden&&(this.isOpen||!this.isHidden&&this.isUnlocked)}get hasNotification(){return player.tabNotifications.has(this._parent.key+this.key)}get key(){return this.config.key}get id(){return this.config.id}show(e){this._parent.show(e,this)}unhideTab(){this._parent.unhideTab(),player.options.hiddenSubtabBits[this._parent.id]&=~(1<<this.id)}toggleVisibility(){this._parent.id===RG.current.id&&this.id===RG.current._currentSubtab.id||(player.options.hiddenSubtabBits[this._parent.id]^=1<<this.id,zG())}get isOpen(){return ui.view.tab===this._parent.key&&ui.view.subtab===this.key}};function PG(e,t){return t.find(t=>t.id===player.options.lastOpenSubtab[e])??t[0]}function FG(e,t){let n=e.filter(e=>e.isAvailable),r=n.indexOf(t),i=ui.view.shiftDown?-1:1,a=r+i;return a=a<0?n.length-1:a,a=a>n.length-1?0:a,n[a]}var IG=class{constructor(e){this.config=e,this.isOpened=!1;let t=[];for(let n of e.subtabs){let e=new MG(this,n);this[n.key]=e,t.push(e)}this.subtabs=t,this._currentSubtab=PG(this.id,t)}get name(){return this.config.name}get key(){return this.config.key}get id(){return this.config.id}get isPermanentlyHidden(){return this.config.hideAt<=GameEnd.endState&&!GameEnd.creditsClosed}get hidable(){return this.config.hidable}get isHidden(){if(Enslaved.isRunning||Pelle.hasGalaxyGenerator)return!1;let e=this.subtabs.some(e=>e.isAvailable);return((player.options.hiddenTabBits&1<<this.id)!=0||!e)&&this.hidable}get isUnlocked(){return this.config.condition===void 0||this.config.condition()}get isAvailable(){return!this.isPermanentlyHidden&&(this.isOpen||!this.isHidden&&this.isUnlocked)}get isOpen(){return ui.view.tab===this.key}get hasNotification(){return this.subtabs.some(e=>e.hasNotification)}show(e,t){if(!e&&!player.options.automaticTabSwitching||Quote.isOpen)return;t===void 0?ui.view.tab===this.key&&ui.view.initialized&&e?this._currentSubtab=FG(this.subtabs,this._currentSubtab):this._currentSubtab=PG(this.id,this.subtabs):(Enslaved.isRunning||t.unhideTab(),this._currentSubtab=t),this._currentSubtab.isUnlocked||this.resetToUnlocked(),this._currentSubtab.isAvailable||this.resetToAvailable(),ui.view.tab=this.key,ui.view.subtab=this._currentSubtab.key;let n=this.key+this._currentSubtab.key;player.tabNotifications.has(n)&&player.tabNotifications.delete(n),e&&Modal.hideAll(),EventHub.dispatch(GAME_EVENT.TAB_CHANGED,this,this._currentSubtab)}unhideTab(){player.options.hiddenTabBits&=~(1<<this.id)}toggleVisibility(){this.id!==RG.current.id&&(player.options.hiddenTabBits^=1<<this.id,zG())}resetToAvailable(){this._currentSubtab=this.subtabs.find(e=>e.isAvailable),this._currentSubtab===void 0&&(this._currentSubtab=this.subtabs[0],this._currentSubtab.unhideTab())}resetToUnlocked(){this._currentSubtab=this.subtabs.find(e=>e.isUnlocked)}};const LG=GameDatabase.tabs.mapToObject(e=>e.key,e=>new IG(e)),RG=function(){return{all:Object.values(LG),get current(){return RG.all.find(e=>e.isOpen)},oldUI:[LG.dimensions,LG.options,LG.statistics,LG.achievements,LG.automation,LG.challenges,LG.infinity,LG.eternity,LG.quantum,LG.reality,LG.celestials],newUI:[LG.dimensions,LG.automation,LG.challenges,LG.infinity,LG.eternity,LG.quantum,LG.reality,LG.celestials,LG.achievements,LG.statistics,LG.options],get currentUIFormat(){return ui.view.newUI?this.newUI:this.oldUI}}}();var zG=()=>{RG.all.filter(e=>e.isUnlocked&&e.hidable).every(e=>e.isHidden)&&SecretAchievement(47).unlock()};EventHub.logic.on(GAME_EVENT.TAB_CHANGED,()=>{let e=RG.current.id;player.options.lastOpenTab=e,player.options.lastOpenSubtab[e]=RG.current._currentSubtab.id});var BG=class{constructor(e){if(this.config=e,e.events)for(let t of e.events)EventHub.logic.on(t,this.tryTrigger.bind(this),this)}get triggered(){return player.triggeredTabNotificationBits&1<<this.config.id}tryTrigger(){if(!this.config.condition()||this.triggered)return;let e=`${Tabs.current.key}${Tabs.current._currentSubtab.key}`;this.config.tabsToHighLight.map(e=>e.parent+e.tab).forEach(t=>{t!==e&&player.tabNotifications.add(t)}),player.triggeredTabNotificationBits|=1<<this.config.id;for(let e of this.config.tabsToHighLight){let t=Tabs.all.find(t=>t.config.key===e.parent),n=t.subtabs.find(t=>t.key===e.tab);t.unhideTab(),n.unhideTab()}}clearTrigger(){player.triggeredTabNotificationBits&=-1-(1<<this.config.id),this.config.tabsToHighLight.map(e=>e.parent+e.tab).forEach(e=>player.tabNotifications.delete(e))}};const VG=mapGameDataToObject(GameDatabase.tabNotifications,e=>new BG(e));var HG=class{constructor(e,t){switch(this.lines=[],this.warnings=[],t){case`Climb EP`:this.templateClimbEP(e);break;case`Grind Eternities`:this.templateGrindEternities(e);break;case`Grind Infinities`:this.templateGrindInfinities(e);break;case`Complete Eternity Challenge`:this.templateDoEC(e);break;case`Unlock Dilation`:this.templateUnlockDilation(e);break;default:throw Error(`Unrecognized template name ${t} in ScriptTemplate`)}}format(e){return typeof e==`number`?Math.round(e):e.lte(1e3)?e.toNumber().toFixed(2):e.lte(`e9e15`)?`${e.mantissa.toFixed(2)}e${e.exponent}`:`F${e.layer}E${e.mag.toFixed(5)}`}storeTreeData(e){let t=e.treeNowait?` nowait`:``;if(e.treePreset){let n=player.timestudy.presets.map((e,t)=>Object.assign(e,{id:t+1})).find(t=>t.name===e.treePreset||t.id===Number(e.treePreset)),r=n.name?`name ${n.name}`:`id ${n.id}`;this.storedTreeStr=`studies${t} load ${r}`,this.storedTreeObj=new TimeStudyTree(n.studies)}else this.storedTreeStr=`studies${t} purchase ${e.treeStudies}`,this.storedTreeObj=new TimeStudyTree(e.treeStudies);this.storedTreeObj.invalidStudies.length>0&&this.warnings.push(`Tree contains invalid Study IDs`),this.storedTreeObj.purchasedStudies.length<this.storedTreeObj.selectedStudies.length&&(this.warnings.push(`Tree structure results in some unbought studies when imported with an empty tree`),e.treeNowait||this.warnings.push(`Automator may possibly get stuck with "Keep buying Studies" setting`))}parseAutobuyerProp(e,t){switch(e){case`mult`:return`${this.format(t)} x highest`;case`time`:return`${this.format(t)} seconds`;default:throw Error(`Unrecognized autobuyer mode ${e} in automator script templates`)}}templateClimbEP(e){this.lines.push(`// Template: Climb EP`),this.lines.push(`notify "Running Template Climb EP (to ${format(e.finalEP)})"`),this.storeTreeData(e),this.lines.push(`auto infinity ${this.parseAutobuyerProp(e.autoInfMode,e.autoInfValue)}`),this.lines.push(`auto eternity ${this.parseAutobuyerProp(e.autoEterMode,e.autoEterValue)}`),this.lines.push(`while ep < ${this.format(e.finalEP)} {`),this.lines.push(` ${this.storedTreeStr}`),this.lines.push(` studies respec`),this.lines.push(` wait eternity`),this.lines.push(`}`)}templateGrindEternities(e){this.lines.push(`// Template: Grind Eternities`),this.lines.push(`notify "Running Template Grind Eternities (to ${format(e.eternities)})"`),this.storeTreeData(e),this.lines.push(this.storedTreeStr),this.lines.push(`auto eternity 0 ep`);let t=Number.MAX_VALUE/Currency.infinityPoints.startingValue.toNumber()*5;this.lines.push(`auto infinity ${this.format(Decimal.pow(t,1/e.crunchesPerEternity))} x highest`),this.lines.push(`wait eternities > ${this.format(e.eternities)}`),this.lines.push(`auto eternity off`)}templateGrindInfinities(e){if(this.lines.push(`// Template: Grind Infinities`),this.lines.push(`notify "Running Template Grind Infinities (to ${format(e.infinities)})"`),this.storeTreeData(e),this.lines.push(this.storedTreeStr),this.lines.push(`auto eternity off`),this.lines.push(`auto infinity 5s`),e.isBanked){let t=this.storedTreeObj.purchasedStudies.includes(TimeStudy(191));t||this.warnings.push(`TS191 is not reachable from an empty tree; banking anything in this template
        will require Achievement "${Achievement(131).name}"`);let n=t?.1:.05;this.lines.push(`// Note: This template attempts to get all the Banked Infinities within a single Eternity`),this.lines.push(`wait infinities > ${this.format(e.infinities.dividedBy(n),2)}`),this.lines.push(`eternity`)}else this.lines.push(`wait infinities > ${this.format(e.infinities,2)}`)}templateDoEC(e){this.lines.push(`// Template: Complete Eternity Challenge`),this.lines.push(`notify "Running Template Complete Eternity Challenge (EC${e.ec})"`),this.lines.push(`eternity respec`),this.storeTreeData(e),this.lines.push(this.storedTreeStr);let t=this.storedTreeObj;t.ec===0?(this.lines.push(`unlock ec ${e.ec}`),t.hasRequirements(TimeStudy.eternityChallenge(e.ec),!0)||this.warnings.push(`Specified Study Tree cannot reach specified EC`)):t.ec!==e.ec&&this.warnings.push(`Specified Study Tree already has a different EC unlocked`),this.lines.push(`auto infinity ${this.parseAutobuyerProp(e.autoInfMode,e.autoInfValue)}`),this.lines.push(`auto eternity off`),TimeStudy.eternityChallenge(e.ec)||this.warnings.push(`Specified template EC does not exist`),this.lines.push(`start ec ${e.ec}`),e.completions>5&&this.warnings.push(`ECs cannot be completed more than ${formatInt(5)} times`),this.lines.push(`wait pending completions >= ${e.completions}`),this.lines.push(`eternity`)}templateUnlockDilation(e){this.lines.push(`// Template: Unlock Dilation`),this.lines.push(`notify "Running Template Unlock Dilation"`),this.storeTreeData(e),[231,232,233,234].some(e=>this.storedTreeObj.purchasedStudies.includes(TimeStudy(e)))||this.warnings.push(`Specified Study Tree cannot reach Dilation`),this.lines.push(`auto infinity off`),this.lines.push(`auto eternity ${this.parseAutobuyerProp(e.autoEterMode,e.autoEterValue)}`),this.lines.push(`while total tt < ${this.format(TimeStudy.dilation.totalTimeTheoremRequirement)} {`),this.lines.push(` ${this.storedTreeStr}`),this.lines.push(` studies respec`),this.lines.push(` wait eternity`),this.lines.push(`}`),this.lines.push(`unlock dilation`)}get script(){return this.lines.join(`
`)}},UG=class extends lt{constructor(){super({id:`quarkMultiplierUpgrade`,cost:()=>Decimal.pow(o.D5,player.quantum.multiplierUpgrades),description:()=>`Multiply Quarks gain by ${formatX(2)}`,effect:()=>o.D2.pow(player.quantum.multiplierUpgrades),formatEffect:e=>formatX(e,2,2),formatCost:e=>format(e,2,2)})}get currency(){return Currency.quarks.value}set currency(e){Currency.quarks.value=e}get boughtAmount(){return player.quantum.multiplierUpgrades}set boughtAmount(e){player.quantum.multiplierUpgrades=e}get isCapped(){return!1}get isBought(){return this.isCapped}get isAvailableForPurchase(){return PlayerProgress.quantumUnlocked()}purchase(e=1){return this.canBeBought?(Currency.quarks.subtract(Decimal.sumGeometricSeries(e,this.cost,o.D5,0)),player.quantum.multiplierUpgrades=player.quantum.multiplierUpgrades.add(e),GameUI.update(),!0):!1}buyMax(){if(!this.canBeBought)return!1;let e=Currency.quarks.value,t=Decimal.affordGeometricSeries(e,this.cost,o.D5,0);return t.lte(0)?!1:(this.purchase(t),!0)}};const WG=Object.freeze({RED:`RED`,GREEN:`GREEN`,BLUE:`BLUE`}),GG={multiplierUpgrade:new UG,get netTotal(){let e=Currency.quarks.value;return e=e.plus(this.red.amount).plus(this.green.amount).plus(this.blue.amount),e},get red(){return{amount:player.quantum.colors.red,powers:player.quantum.quarkPowers.red,effect:()=>softcap({baseResource:player.quantum.quarkPowers.red.plus(1).log10().sqrt().div(10).plus(1),softcapStart:2.3,softcapPower:.1,softcapType:SOFTCAP_MODES.MULTIPLICATIVE}),gain:()=>player.quantum.colors.red.pow(2.5)}},get green(){return{amount:player.quantum.colors.green,powers:player.quantum.quarkPowers.green,effect:()=>softcap({baseResource:player.quantum.quarkPowers.green.plus(1).log10().sqrt().plus(1),softcapStart:10,softcapPower:.5,softcapType:SOFTCAP_MODES.POLYNOMIAL}),gain:()=>player.quantum.colors.green.pow(.9)}},get blue(){return{amount:player.quantum.colors.blue,powers:player.quantum.quarkPowers.blue,effect:()=>scale({baseResource:player.quantum.quarkPowers.blue.plus(1).logPow(.8),scaleStart:1e6,scalePower:1.5,scaleMode:SCALING_TYPES.DILATION}),gain:()=>player.quantum.colors.blue.pow(.75)}},get gain(){let e=player.meta.antimatter.plus(1).log10().div(616.5094311198335).max(0);e.gte(2)&&(e=e.div(2).pow(1.5).mul(2));let t=Decimal.pow10(e);return t=t.timesEffectsOf(this.multiplierUpgrade,Achievement(156),GluonUpgrade.redGreen(5)),t.round()},tick(e){for(let t of[`red`,`green`,`blue`])player.quantum.quarkPowers[t]=player.quantum.quarkPowers[t].add(this[t].gain().times(e.div(1e3)))},assortTo(e,t){switch(Currency.quarks.purchase(e),t){case WG.RED:player.quantum.colors.red=player.quantum.colors.red.plus(e);break;case WG.GREEN:player.quantum.colors.green=player.quantum.colors.green.plus(e);break;case WG.BLUE:player.quantum.colors.blue=player.quantum.colors.blue.plus(e);break;default:throw TypeError(`Unrecongized Quark color`)}},distribute(e=.1){let t=player.quantum.quarks;this.assortTo(t.mul(e),WG.RED),this.assortTo(t.mul(e),WG.GREEN),this.assortTo(t.mul(e),WG.BLUE),player.quantum.quarks=player.quantum.quarks.sub(t.mul(e).mul(3))}};var KG=class extends it{constructor(){super({})}get isCustomEffect(){return!0}get effectValue(){let e=player.quantum.pair.electrons,t=new Decimal(.2),n=e.plus(1).pow(t);return n.gte(1e6)&&(n=n.div(1e6).pow(.5).mul(1e6)),n}get canBeApplied(){return PlayerProgress.quantumUnlocked()&&TimeStudy.pairProduction.isBought&&!QuantumChallenge.isRunning}get type(){return`Positron`}},qG=class extends it{constructor(){super({})}get isCustomEffect(){return!0}get effectValue(){let e=player.quantum.pair.positrons.plus(1);return e.gte(65e3)&&(e=e.div(65e3).pow(.3).mul(65e3)),e}get canBeApplied(){return PlayerProgress.quantumUnlocked()&&TimeStudy.pairProduction.isBought&&!QuantumChallenge.isRunning}},JG=class extends lt{constructor(e){e.effect=()=>this.boughtAmount.times(this.config.multiplierIncrement()),super(e)}get cost(){return Decimal.pow(this.config.increment,Decimal.pow(this.boughtAmount.plus(1),3)).times(this.config.initialCost).round()}get bulk(){return this.currency.max(1).cbrt().log(this.config.increment).div(this.config.initialCost).floor()}get currency(){switch(this.id){case 1:return player.timestudy.theorem;case 2:return player.dilation.dilatedTime;case 3:return player.meta.antimatter;case 4:return player.meta.boosts;default:throw TypeError(`Unknown currency`)}}set currency(e){switch(this.id){case 1:player.timestudy.theorem=e;break;case 2:player.dilation.dilatedTime=e;break;case 3:player.meta.antimatter=e;break;case 4:player.meta.boosts=e;break;default:throw TypeError(`Unknown currency`)}}get boughtAmount(){return player.quantum.pair.electronUpgrades[this.id-1]}set boughtAmount(e){player.quantum.pair.electronUpgrades[this.id-1]=e}get type(){return`electron`}purchase(){for(;this.currency.gte(this.cost);)this.boughtAmount=this.boughtAmount.plus(1),this.currency.sub(this.cost).max(0);QG.updateDischarges()}},YG=class extends lt{constructor(e){e.effect=()=>this.boughtAmount.times(this.config.multiplierIncrement()),super(e)}get cost(){return Decimal.pow(this.config.increment,Decimal.pow(this.boughtAmount.minusEffectOf(GluonUpgrade.greenBlue(6)).max(1),3)).times(this.config.initialCost).round()}get bulk(){return this.currency.max(1).cbrt().log(this.config.increment).div(this.config.initialCost).floor()}get currency(){switch(this.id){case 1:return player.timestudy.theorem;case 2:return player.dilation.dilatedTime;case 3:return player.meta.antimatter;case 4:return player.meta.boosts;default:throw TypeError(`Unknown currency`)}}set currency(e){switch(this.id){case 1:player.timestudy.theorem=e;break;case 2:player.dilation.dilatedTime=e;break;case 3:player.meta.antimatter=e;break;case 4:player.meta.boosts=e;break;default:throw TypeError(`Unknown currency`)}}get boughtAmount(){return player.quantum.pair.positronUpgrades[this.id-1]}set boughtAmount(e){player.quantum.pair.positronUpgrades[this.id-1]=e}get type(){return`positron`}purchase(){for(;this.currency.gte(this.cost);)this.boughtAmount=this.boughtAmount.plus(1),this.currency.sub(this.cost).max(0);QG.updateDischarges()}};const XG=JG.createAccessor(GameDatabase.quantum.electronMultiplierUpgrades),ZG=YG.createAccessor(GameDatabase.quantum.positronMultiplierUpgrades),QG={electronEffect:new KG,positronEffect:new qG,get electronMultiplier(){let e=new Decimal(1);for(let t of[1,2,3,4])e=e.plusEffectOf(XG(t));return e},get positronMultiplier(){let e=new Decimal(1);for(let t of[1,2,3,4])e=e.plusEffectOf(ZG(t));return e},get canDischarge(){return player.galaxies.gt(player.quantum.pair.dischargedGalaxies)},sacrificeGalaxies(){if(!this.canDischarge)return!1;let e=player.galaxies.sub(player.quantum.pair.dischargedGalaxies),t=e.mul(this.positronMultiplier).max(0),n=e.mul(this.electronMultiplier).max(0);return player.quantum.pair.dischargedGalaxies=player.galaxies,player.quantum.pair.positrons=player.quantum.pair.positrons.plus(t),player.quantum.pair.electrons=player.quantum.pair.electrons.plus(n),!0},updateDischarges(){let e=player.quantum.pair.dischargedGalaxies.mul(this.positronMultiplier).max(0),t=player.quantum.pair.dischargedGalaxies.mul(this.electronMultiplier).max(0);player.quantum.pair.positrons=player.quantum.pair.positrons.max(e),player.quantum.pair.electrons=player.quantum.pair.electrons.max(t)}};var $G=class extends it{constructor(e,t){let n=Wt([{},e]);n.effect=()=>e.effect(t.completions),super(n),this._challenge=t}get isEffectActive(){return this._challenge.completions>0}};const eK=class extends it{constructor(e){super(e),this._reward=new $G(e.reward,this)}get isUnlocked(){return this.id===1?TimeStudy.quantumChallenges.isBought:TimeStudy.quantumChallenges.isBought&&eK(this.id-1).isCompleted}get completions(){return player.challenge.quantum.completions[this.id-1]}set completions(e){player.challenge.quantum.completions[this.id-1]=e}get isRunning(){return player.challenge.quantum.current===this.id||dev.pairedQCs.includes(this.id)}requestStart(){if(this.isUnlocked&&!GameEnd.creditsEverClosed){if(!player.options.confirmations.challenges){this.start();return}Modal.startQuantumChallenge.show(this.id)}}start(){!this.isUnlocked||this.isRunning||(quantumReset(!0),player.challenge.quantum.current=this.id)}get isCompleted(){return player.challenge.quantum.completions[this.id-1]>=1}complete(){player.challenge.quantum.current=0,player.challenge.quantum.completions[this.id-1]=1}get isEffectActive(){return this.isRunning}get reward(){return this._reward}get goal(){return this.config.goal}exit(){player.challenge.quantum.current=0,quantumReset(!0)}}.createAccessor(GameDatabase.challenges.quantum);Object.defineProperty(eK,`current`,{get:()=>player.challenge.quantum.current===0?void 0:eK(player.challenge.quantum.current)}),Object.defineProperty(eK,`isRunning`,{get:()=>eK.current!==void 0||dev.pairedQCs.length>0});const tK={all:eK.index.compact(),completeAll(){for(let e of tK.all)e.complete()},clearCompletions(){player.challenge.quantum.completions=player.challenge.quantum.completions.fill(0)},get completed(){return tK.all.filter(e=>e.isCompleted)}};function nK(){for(let e of[`red`,`green`,`blue`])player.quantum.quarkPowers[e]=new Decimal(0);player.quantum.pair.dischargedGalaxies=new Decimal(0),player.quantum.pair.electrons=new Decimal(0),player.quantum.pair.positrons=new Decimal(0),QuantumSpeedrunMilestone(17).isReached||(player.meta.boosts=new Decimal(0)),MetaDimensions.reset(),Currency.metaAntimatter.reset(),QuantumSpeedrunMilestone(16).isReached||(player.timestudy.mastery=[]),QuantumSpeedrunMilestone(16).isReached||(player.dilation.studies=[]),player.dilation.active=!1,QuantumSpeedrunMilestone(6).isReached||player.dilation.upgrades.clear(),player.dilation.rebuyables={1:new Decimal,2:new Decimal,3:new Decimal,4:new Decimal,18:new Decimal,19:new Decimal,20:new Decimal},Currency.tachyonParticles.reset(),player.dilation.nextThreshold=o.E3,player.dilation.baseTachyonGalaxies=o.D0,player.dilation.totalTachyonGalaxies=o.D0,Currency.dilatedTime.reset(),player.dilation.lastEP=o.DM1,QuantumSpeedrunMilestone(11).isReached||Currency.timeTheorems.reset(),ECTimeStudyState.invalidateCachedRequirements(),fullResetTimeDimensions(),Currency.timeShards.reset(),player.totalTickGained=o.D0,resetTimeDimensions(),resetTickspeed(),player.eterc8ids=50,player.eterc8repl=40,QuantumSpeedrunMilestone(3).isReached||(player.challenge.eternity.completions.fill(0),player.challenge.eternity.unlocked=0,player.challenge.eternity.requirementBits=0),player.challenge.eternity.current=0,Currency.eternityPoints.reset(),EternityUpgrade.epMult.reset(),QuantumSpeedrunMilestone(1).isReached||Currency.eternities.reset(),QuantumSpeedrunMilestone(3).isReached||player.eternityUpgrades.clear(),resetEternityRuns(),QuantumSpeedrunMilestone(1).isReached||(player.break=!1),Replicanti.reset(!QuantumSpeedrunMilestone(1).isReached),InfinityDimensions.fullReset(),InfinityDimensions.resetAmount(),Currency.infinityPower.reset(),initializeChallengeCompletions(),playerInfinityUpgradesOnReset(),resetInfinityRuns(),Currency.infinityPoints.reset(),Currency.infinities.reset(),Currency.infinitiesBanked.reset(),player.partInfinityPoint=0,player.partInfinitied=0,player.IPMultPurchases=o.D0,player.respec=!1,player.dimensionBoosts=o.D0,player.galaxies=o.D0,player.sacrificed=o.D0,AntimatterDimensions.reset(),QuantumSpeedrunMilestone(1).isReached||secondSoftReset(!1),Currency.antimatter.reset(),Player.resetRequirements(`quantum`),player.records.bestInfinity.time=o.BEMAX,player.records.bestInfinity.realTime=o.BEMAX,player.records.thisInfinity.time=o.D0,player.records.thisInfinity.lastBuyTime=o.D0,player.records.thisInfinity.realTime=o.D0,player.records.thisEternity.time=o.D0,player.records.thisEternity.realTime=o.D0,player.records.bestEternity.time=o.BEMAX,player.records.bestEternity.realTime=o.BEMAX,player.records.thisQuantum.time=o.D0,player.records.thisQuantum.realTime=o.D0,player.records.thisQuantum.bestMA=o.D0,player.records.thisInfinity.maxAM=o.D0,player.records.thisEternity.maxAM=o.D0,player.records.thisInfinity.bestIPmin=o.D0,player.records.bestInfinity.bestIPminEternity=o.D0,player.records.thisEternity.bestEPmin=o.D0,player.records.thisEternity.bestInfinitiesPerMs=o.D0,player.records.thisEternity.bestIPMsWithoutMaxAll=o.D0,player.records.bestEternity.bestEPminReality=o.D0,QuantumSpeedrunMilestone(1).isReached||Autobuyers.reset(),AchievementTimers.marathon2.reset(),Lazy.invalidateAll()}function rK(){player.records.bestQuantum.time=player.records.thisQuantum.time.clampMax(player.records.bestQuantum.time),player.records.bestQuantum.realTime=player.records.thisQuantum.realTime.clampMax(player.records.bestQuantum.time),player.records.bestQuantum.trueTime=Math.min(player.records.bestQuantum.trueTime,player.records.thisQuantum.trueTime)}function iK(e,t,n){player.records.recentQuantums.unshift([e,t,n])}function aK(){Currency.quarks.add(Quarks.gain),rK(),iK(player.records.thisReality.trueTime,player.records.thisReality.time,player.records.thisReality.realTime),QuantumChallenge.isRunning&&QuantumChallenge(player.challenge.quantum.current).complete(),player.quantum.gluons.rg=player.quantum.gluons.rg.add(player.quantum.colors.red).add(player.quantum.colors.green),player.quantum.gluons.gb=player.quantum.gluons.gb.add(player.quantum.colors.green).add(player.quantum.colors.blue),player.quantum.gluons.br=player.quantum.gluons.br.add(player.quantum.colors.blue).add(player.quantum.colors.red),player.quantum.colors.red=new Decimal(0),player.quantum.colors.green=new Decimal(0),player.quantum.colors.blue=new Decimal(0)}function oK(){QuantumSpeedrunMilestone(1).isReached&&(player.eternities=QuantumSpeedrunMilestone(18).isReached?new Decimal(0x9184e72a000):new Decimal(2e4)),QuantumSpeedrunMilestone(3).isReached&&dev.beTests.completeChalleges.eternity(),QuantumSpeedrunMilestone(4).isReached&&!player.dilation.studies.includes(1)&&player.dilation.studies.push(1),QuantumSpeedrunMilestone(17).isReached&&!player.dilation.studies.includes(6)&&player.dilation.studies.push(6),QuantumSpeedrunMilestone(18).isReached&&Currency.metaAntimatter.bumpTo(5e25),QuantumSpeedrunMilestone(22).isReached&&Currency.dilatedTime.bumpTo(1e100),QuantumSpeedrunMilestone(27).isReached&&(player.meta.boosts=new Decimal(4))}function sK(){if(QuantumChallenge.isRunning){if(Currency.antimatter.lt(Player.quantumGoal.am)||Currency.metaAntimatter.lt(Player.quantumGoal.ma))return!1}else if(Currency.metaAntimatter.lt(Player.quantumGoal.ma))return!1;return!0}function cK(e=!1){!sK()&&!e||(e||(EventHub.dispatch(GAME_EVENT.QUANTUM_RESET_BEFORE),aK()),Currency.quantums.add(1),nK(),QuantumChallenge.isRunning&&(player.challenge.quantum.current=0),oK(),EventHub.dispatch(GAME_EVENT.QUANTUM_RESET_AFTER))}function lK(){return!sK()||GameEnd.creditsEverClosed?!1:(cK(!1),!0)}function uK(e){Quarks.tick(e)}var dK=class extends st{get currency(){return player.quantum.gluons.br}set currency(e){player.quantum.gluons.br=e}get isAvailableForPurchase(){return PlayerProgress.quantumUnlocked()}get cost(){return this.config.cost()}get set(){return player.quantum.gluonUpgrades.br}},fK=class extends st{get currency(){return player.quantum.gluons.gb}set currency(e){player.quantum.gluons.gb=e}get isAvailableForPurchase(){return PlayerProgress.quantumUnlocked()}get cost(){return this.config.cost()}get set(){return player.quantum.gluonUpgrades.gb}},pK=class extends st{get currency(){return player.quantum.gluons.rg}set currency(e){player.quantum.gluons.rg=e}get isAvailableForPurchase(){return PlayerProgress.quantumUnlocked()}get cost(){return this.config.cost()}get set(){return player.quantum.gluonUpgrades.rg}};const mK={blueRed:dK.createAccessor(GameDatabase.quantum.brGluonUpgrades),greenBlue:fK.createAccessor(GameDatabase.quantum.gbGluonUpgrades),redGreen:pK.createAccessor(GameDatabase.quantum.rgGluonUpgrades)};var hK=class e{config;constructor(e){this.config=e}get isReached(){return Time.bestQuantum.totalSeconds.lt(this.config.resetWithin)}static createAccessor(t){let n=[];for(let r of t)n.push(new e(r));let r=e=>n[e-1];return r.index=n,r}};const gK=hK.createAccessor(GameDatabase.quantum.speedrunMilestones);let _K=function(e){return e[e.MULTIPLICATIVE=1]=`MULTIPLICATIVE`,e[e.POLYNOMIAL=2]=`POLYNOMIAL`,e[e.DILATION=3]=`DILATION`,e[e.DILATION_TIER_2=4]=`DILATION_TIER_2`,e[e.LOGARITHMIC=5]=`LOGARITHMIC`,e[e.REPEATED_LOGARITHM=6]=`REPEATED_LOGARITHM`,e[e.SUPER_LOGARITHMIC=7]=`SUPER_LOGARITHMIC`,e[e.NONE=8]=`NONE`,e}({}),vK=function(e){return e[e.MULTIPLICATIVE=1]=`MULTIPLICATIVE`,e[e.POLYNOMIAL=2]=`POLYNOMIAL`,e[e.EXPONENTIAL=3]=`EXPONENTIAL`,e[e.DILATION=4]=`DILATION`,e[e.DILATION_TIER_2=5]=`DILATION_TIER_2`,e[e.REPEATED_EXPONENTIATION=6]=`REPEATED_EXPONENTIATION`,e[e.TETRATION=7]=`TETRATION`,e[e.NONE=8]=`NONE`,e}({});function yK(e){let t=new Decimal(e.softcapStart),n=new Decimal(e.softcapPower);if(e.baseResource.lt(t))return e.baseResource;switch(e.softcapType){case _K.MULTIPLICATIVE:return e.baseResource.sub(t).div(n).plus(t);case _K.POLYNOMIAL:return e.baseResource.div(t).pow(n).mul(t);case _K.DILATION:return Decimal.pow10(e.baseResource.div(t).log10().pow(n)).mul(t);case _K.LOGARITHMIC:return e.baseResource.div(t).log(n).plus(1).mul(t);case _K.DILATION_TIER_2:return Decimal.pow10(e.baseResource.div(t).log10().log10().pow(n).pow10()).mul(t);case _K.REPEATED_LOGARITHM:return Decimal.iteratedlog(e.baseResource.div(t),10,n.toNumber()).plus(1).mul(t);case _K.SUPER_LOGARITHMIC:return Decimal.slog(e.baseResource.div(t),n).plus(1).mul(t);default:return e.baseResource}}function bK(e){let t=new Decimal(e.scaleStart),n=new Decimal(e.scalePower);if(e.baseResource.lt(t))return e.baseResource;switch(e.scaleMode){case vK.MULTIPLICATIVE:return e.isInverted?e.baseResource.sub(t).div(n).add(t):e.baseResource.sub(t).mul(n).add(t);case vK.POLYNOMIAL:return e.isInverted?e.baseResource.sub(t).root(n).add(t):e.baseResource.sub(t).pow(n).add(t);case vK.EXPONENTIAL:return e.isInverted?e.baseResource.sub(t).log(n).add(t):Decimal.pow(n,e.baseResource.sub(t).sub(1)).add(t);case vK.DILATION:{let r=Decimal.log10(t);return e.isInverted?Decimal.pow10(e.baseResource.log10().div(r).root(n).mul(r)):Decimal.pow10(e.baseResource.log10().div(r).pow(n).mul(r))}case vK.DILATION_TIER_2:{let r=Decimal.log10(t).plus(1).log10();return e.isInverted?e.baseResource.log10().plus(1).log10().div(r).root(n).mul(r).pow10().pow10():e.baseResource.log10().plus(1).log10().div(r).pow(n).mul(r).pow10().pow10()}case vK.REPEATED_EXPONENTIATION:return e.isInverted?Decimal.iteratedlog(e.baseResource.div(t).max(1),10,n.toNumber()).mul(t):Decimal.iteratedexp(e.baseResource.div(t),n.toNumber()).mul(t);case vK.TETRATION:return e.isInverted?e.baseResource.div(t).slog(n).plus(1).mul(t):e.baseResource.div(t).tetrate(n.toNumber()).mul(t);default:return e.baseResource}}function xK(e,t){let{type:n}=t,r=new Decimal(t.start),i=new Decimal(t.scalingStrength),a=new Decimal(t.initialPower);if(e.lt(r))return e;switch(n){case`polynomial`:{let t=Decimal.div(a,e.log10().div(r.log10()).pow(i));return e.div(r).pow(t).mul(r)}case`dilative`:{let t=Decimal.div(a,e.log10().max(1).log10().div(r.log10().max(1).log10()).pow(i));return Decimal.pow(10,e.log10().div(r).pow(t).mul(r))}default:throw Error(`The ${n} softcap gradual type is not implemented.`)}}let SK=function(e){return e[e.NONE=0]=`NONE`,e[e.DISTANT=1]=`DISTANT`,e[e.FURTHER=2]=`FURTHER`,e[e.REMOTE=3]=`REMOTE`,e[e.OBSCURE=4]=`OBSCURE`,e[e.INVISIBLE=5]=`INVISIBLE`,e[e.GHOSTLY=6]=`GHOSTLY`,e[e.ETHEREAL=7]=`ETHEREAL`,e}({});var CK=t({AUTOMATOR_COMMAND_STATUS:()=>v,AUTOMATOR_MODE:()=>f,AUTOMATOR_TYPE:()=>x,AUTOMATOR_VAR_TYPES:()=>w,Achievement:()=>CV,AchievementTimers:()=>OV,Achievements:()=>wV,AlchemyReactions:()=>XS,AlchemyResource:()=>JS,AlchemyResources:()=>YS,AntimatterDimension:()=>SH,AntimatterDimensions:()=>CH,AutoBackupSlots:()=>ds,AutoGlyphProcessor:()=>ZV,Autobuyer:()=>ti,Autobuyers:()=>ni,AutomatorBackend:()=>p,AutomatorData:()=>y,AutomatorHighlighter:()=>E,AutomatorPoints:()=>C,AutomatorScript:()=>m,AutomatorScroller:()=>h,AwayProgressTypes:()=>Cr,BACKUP_SLOT_TYPE:()=>us,BlackHole:()=>TG,BlackHoles:()=>EG,BreakInfinityUpgrade:()=>BU,BreakInfinityUpgradeState:()=>RU,Celestials:()=>FC,Cloud:()=>Nx,ConfirmationTypes:()=>Tr,CosmeticGlyphTypes:()=>NV,Currency:()=>en,DarkMatterDimension:()=>lC,DarkMatterDimensionState:()=>cC,DarkMatterDimensions:()=>uC,DeltaTimeState:()=>nH,DilationTimeStudyState:()=>rU,DilationUpgrade:()=>xG,DilationUpgrades:()=>SG,DimBoost:()=>dU,ECTimeStudyState:()=>nU,EFFARIG_STAGES:()=>xS,END_STATE_MARKERS:()=>NC,ENSLAVED_UNLOCKS:()=>TS,Effarig:()=>SS,EffarigUnlock:()=>wS,ElectronUpgrade:()=>XG,Enslaved:()=>ES,EnslavedProgress:()=>OS,EternityChallenge:()=>cU,EternityChallengeState:()=>sU,EternityChallenges:()=>lU,EternityMilestone:()=>oW,EternityMilestoneState:()=>aW,EternityUpgrade:()=>lW,FreeTickspeed:()=>uH,GALAXY_TYPE:()=>hr,Galaxy:()=>_r,GalaxyGenerator:()=>AC,GalaxyGeneratorUpgrade:()=>jC,GalaxyGeneratorUpgrades:()=>MC,GameCache:()=>an,GameEnd:()=>PC,GameIntervals:()=>on,GameKeyboard:()=>mn,GameOptions:()=>DD,GameSaveSerializer:()=>Sa,GameStorage:()=>fs,GameUI:()=>bV,GluonUpgrade:()=>mK,GlyphAlteration:()=>US,GlyphAppearanceHandler:()=>PV,GlyphEffect:()=>IV,GlyphEffectOrder:()=>XB,GlyphEffects:()=>ft,GlyphGenerator:()=>YV,GlyphSacrificeHandler:()=>XV,GlyphSelection:()=>uW,Glyphs:()=>$B,ImaginaryUpgrade:()=>XW,ImaginaryUpgrades:()=>ZW,InfinityChallenge:()=>KU,InfinityChallenges:()=>qU,InfinityDimension:()=>EH,InfinityDimensions:()=>DH,InfinityUpgrade:()=>LU,InfinityUpgradeState:()=>NU,LNotation:()=>iS,LNotations:()=>aS,Laitela:()=>dC,LineEnum:()=>S,MachineHandler:()=>DG,MasteryStudy:()=>tU,MasteryStudyState:()=>eU,MetaDimension:()=>UH,MetaDimensions:()=>GH,Modal:()=>Q,NG:()=>uS,NewsHandler:()=>jG,NormalChallenge:()=>HU,NormalChallenges:()=>UU,NormalTimeStudies:()=>ZH,NormalTimeStudyState:()=>QH,Notation:()=>rS,Notations:()=>oS,POWER_DE_PER_ASCENSION:()=>oC,POWER_DM_PER_ASCENSION:()=>aC,PairProduction:()=>QG,Pelle:()=>bC,PelleRifts:()=>kC,PelleStrikes:()=>TC,PelleUpgrade:()=>CC,PelleUpgradeState:()=>SC,PerformanceStats:()=>Qt,Perk:()=>$W,PerkShopUpgrade:()=>bS,Perks:()=>eG,Player:()=>Yt,PlayerProgress:()=>P,PositronUpgrade:()=>ZG,QUARK_TYPES:()=>WG,QuantumChallenge:()=>eK,QuantumChallenges:()=>tK,QuantumSpeedrunMilestone:()=>gK,QuantumSpeedrunState:()=>hK,Quarks:()=>GG,Quote:()=>dS,Quotes:()=>hS,Ra:()=>HS,RealityUpgrade:()=>KW,RealityUpgrades:()=>qW,RebuyablePelleUpgradeState:()=>xC,Replicanti:()=>VW,ReplicantiGrowth:()=>kW,ReplicantiUpgrade:()=>BW,SCALE_LEVEL:()=>SK,SCALING_TYPES:()=>vK,SOFTCAP_MODES:()=>_K,Sacrifice:()=>_U,ScriptTemplate:()=>HG,SecretAchievement:()=>TV,SecretAchievements:()=>EV,Singularity:()=>gC,SingularityMilestone:()=>pC,SingularityMilestones:()=>mC,Speedrun:()=>AS,SpeedrunMilestones:()=>jS,TUTORIAL_STATE:()=>sS,Tab:()=>LG,TabNotification:()=>VG,Tabs:()=>RG,Teresa:()=>gS,TeresaUnlocks:()=>yS,Tesseracts:()=>kS,Theme:()=>wD,Themes:()=>TD,Tickspeed:()=>lH,Time:()=>rH,TimeDimension:()=>LH,TimeDimensions:()=>RH,TimeStudy:()=>$H,TimeStudyConnection:()=>iU,TimeStudyState:()=>YH,TimeStudyTree:()=>XH,TimeTheoremPurchaseType:()=>HW,TimeTheorems:()=>UW,Tutorial:()=>lS,UIID:()=>xV,V:()=>LS,VRunUnlock:()=>PS,VRunUnlocks:()=>FS,VUnlocks:()=>IS,animateAndDilate:()=>nG,animateAndEternity:()=>QU,animateAndUndilate:()=>rG,antimatterDimensionCommonMultiplier:()=>dH,applyEU1:()=>tW,applyEU2:()=>nW,applyRUPG10:()=>TW,autoAdjustGlyphWeights:()=>QV,autoReality:()=>yW,beginProcessReality:()=>SW,bigCrunchAnimation:()=>bU,bigCrunchReset:()=>wU,bigCrunchResetRequest:()=>CU,bigCrunchResetValues:()=>OU,blockifyTextAutomator:()=>b,buyAsManyAsYouCanBuy:()=>vH,buyDilationUpgrade:()=>sG,buyManyDimension:()=>_H,buyMaxDimension:()=>xH,buyMaxTickSpeed:()=>sH,buyMaxTimeDimension:()=>NH,buyOneDimension:()=>gH,buySingleTimeDimension:()=>OH,buyStudiesUntil:()=>qH,buyTickSpeed:()=>oH,calcHighestPurchaseableTD:()=>MH,calculateGlyph:()=>tV,canPerformQuantumReset:()=>sK,checkPerkValidity:()=>tG,clearCelestialRuns:()=>EW,countValuesFromBitmask:()=>KV,dev:()=>$,dilatedValueOf:()=>vG,disChargeAll:()=>FU,effectiveBaseGalaxies:()=>iH,eternity:()=>ZU,eternityAnimation:()=>YU,eternityResetRequest:()=>XU,finishProcessReality:()=>CW,forbiddenConstantPatterns:()=>d,fullResetTimeDimensions:()=>AH,gainedEternities:()=>iW,galaxyReset:()=>vr,generatedTypes:()=>YB,getActiveGlyphEffects:()=>qV,getAdjustedGlyphEffect:()=>RV,getAdjustedGlyphEffectUncached:()=>LV,getAdjustedGlyphLevel:()=>rV,getBaseTP:()=>pG,getDilationGainPerSecond:()=>uG,getDilationTimeEstimate:()=>_G,getDimensionFinalMultiplierUncached:()=>fH,getGlyphEffectValues:()=>BV,getGlyphEffectValuesFromArray:()=>WV,getGlyphEffectValuesFromBitmask:()=>UV,getGlyphEffectsFromArray:()=>ht,getGlyphEffectsFromBitmask:()=>mt,getGlyphIDsFromBitmask:()=>gt,getGlyphLevelInputs:()=>eH,getRarity:()=>nV,getRealityProps:()=>vW,getReplicantiInterval:()=>PW,getSecondaryGlyphEffect:()=>zV,getSingleGlyphEffectFromBitmask:()=>GV,getTP:()=>mG,getTachyonGain:()=>hG,getTachyonGalaxyMult:()=>lG,getTachyonReq:()=>gG,getTickSpeedMultiplier:()=>aH,guardFromNaNValues:()=>Zt,handleQuantumTick:()=>uK,hasCompilationErrors:()=>_,infinityDimensionCommonMultiplier:()=>wH,initializeChallengeCompletions:()=>$U,initializeResourcesAfterEternity:()=>eW,isDevEnvironment:()=>kG,isInCelestialReality:()=>DW,isLocalEnvironment:()=>AG,isRealityAvailable:()=>dW,isSecretImport:()=>AD,makeGlyphEffectBitmask:()=>pt,manualBigCrunchResetRequest:()=>SU,manualRequestDimensionBoost:()=>mU,manualRequestGalaxyReset:()=>yr,maxAll:()=>bH,maxAllTimeDimensions:()=>PH,maxPurchaseDilationUpgrades:()=>cG,metaDimensionCommonMultiplier:()=>BH,orderedEffectList:()=>qB,preProductionGenerateIP:()=>jU,processManualReality:()=>hW,quantumReset:()=>cK,rarityToStrength:()=>ZB,realityGlyphEffectLevelThresholds:()=>dt,recalculateAllGlyphs:()=>eV,replicantiCap:()=>IW,replicantiGalaxy:()=>jW,replicantiGalaxyRequest:()=>MW,replicantiLoop:()=>LW,replicantiMult:()=>RW,requestDimensionBoost:()=>hU,requestGalaxyReset:()=>br,requestManualReality:()=>pW,requestQuantumReset:()=>lK,resetPreQuantumResources:()=>nK,resetTickspeed:()=>cH,resetTimeDimensions:()=>kH,respecGlyphs:()=>iV,respecTimeStudies:()=>JH,restorePreQuantumResources:()=>oK,rewardTP:()=>fG,runRealityAnimation:()=>gW,sacrificeBtnClick:()=>yU,sacrificeReset:()=>vU,scale:()=>bK,secondSoftReset:()=>AU,separateEffectKey:()=>HV,shortcuts:()=>Qn,simulatedRealityCount:()=>fW,skipResetsIfPossible:()=>pU,softReset:()=>fU,softcap:()=>yK,softcapGradual:()=>xK,startDilatedEternity:()=>aG,startDilatedEternityRequest:()=>iG,startEternityChallenge:()=>aU,startManualReality:()=>mW,staticGlyphWeights:()=>tH,strengthToRarity:()=>QB,tachyonGainMultiplier:()=>dG,timeDimensionCommonMultiplier:()=>FH,toggleAllInfDims:()=>TH,toggleAllTimeDims:()=>jH,totalIPMult:()=>PU,totalReplicantiSpeedMult:()=>FW,tryCompleteInfinityChallenges:()=>WU,tryImportSecret:()=>jD,tryUnlockTimeDimensions:()=>zH,ui:()=>SV,updateNormalAndInfinityChallenges:()=>VU,updateTimeDimensionCosts:()=>IH,validateLine:()=>g});const wK=/((CPU[ +]OS|iPhone[ +]OS|CPU[ +]iPhone|CPU IPhone OS)[ +]+(11[_.]0|11[_.]([1-9]|\d{2,})|11[_.]2|11[_.]([3-9]|\d{2,})|(1[2-9]|[2-9]\d|\d{3,})[_.]\d+|12[_.]5|12[_.]([6-9]|\d{2,})|(1[3-9]|[2-9]\d|\d{3,})[_.]\d+|14[_.]0|14[_.]([1-9]|\d{2,})|14[_.]4|14[_.]([5-9]|\d{2,})|(1[5-9]|[2-9]\d|\d{3,})[_.]\d+|15[_.]6|15[_.]([7-9]|\d{2,})|15[_.]8|15[_.](9|\d{2,})|(1[6-9]|[2-9]\d|\d{3,})[_.]\d+|16[_.]1|16[_.]([2-9]|\d{2,})|16[_.]3|16[_.]([4-9]|\d{2,})|16[_.]6|16[_.]([7-9]|\d{2,})|(1[7-9]|[2-9]\d|\d{3,})[_.]\d+|17[_.]4|17[_.]([5-9]|\d{2,})|(1[8-9]|[2-9]\d|\d{3,})[_.]\d+|18[_.]0|18[_.]([1-9]|\d{2,})|(19|[2-9]\d|\d{3,})[_.]\d+)(?:[_.]\d+)?)|(CFNetwork\/8.* Darwin\/17\.0\.\d+)|(CFNetwork\/8.* Darwin\/17\.2\.\d+)|(CFNetwork\/8.* Darwin\/17\.3\.\d+)|(CFNetwork\/8.* Darwin\/17\.\d+)|(Opera\/.+Opera Mobi.+Version\/(80\.0|80\.([1-9]|\d{2,})|(8[1-9]|9\d|\d{3,})\.\d+))|(Opera\/(80\.0|80\.([1-9]|\d{2,})|(8[1-9]|9\d|\d{3,})\.\d+).+Opera Mobi)|(Opera Mobi.+Opera(?:\/|\s+)(80\.0|80\.([1-9]|\d{2,})|(8[1-9]|9\d|\d{3,})\.\d+))|((?:Chrome).*OPR\/(117\.0|117\.([1-9]|\d{2,})|(11[8-9]|1[2-9]\d|[2-9]\d\d|\d{4,})\.\d+)\.\d+)|(SamsungBrowser\/(27\.0|27\.([1-9]|\d{2,})|(2[8-9]|[3-9]\d|\d{3,})\.\d+))|(Edge\/(18(?:\.0)?|18(?:\.([1-9]|\d{2,}))?|(19|[2-9]\d|\d{3,})(?:\.\d+)?|134(?:\.0)?|134(?:\.([1-9]|\d{2,}))?|(13[5-9]|1[4-9]\d|[2-9]\d\d|\d{4,})(?:\.\d+)?))|((Chromium|Chrome)\/(109\.0|109\.([1-9]|\d{2,})|(11\d|[2-9]\d\d|\d{4,})\.\d+|113\.0|113\.([1-9]|\d{2,})|(11[4-9]|1[2-9]\d|[2-9]\d\d|\d{4,})\.\d+|116\.0|116\.([1-9]|\d{2,})|(11[7-9]|1[2-9]\d|[2-9]\d\d|\d{4,})\.\d+|124\.0|124\.([1-9]|\d{2,})|(12[5-9]|1[3-9]\d|[2-9]\d\d|\d{4,})\.\d+|126\.0|126\.([1-9]|\d{2,})|(12[7-9]|1[3-9]\d|[2-9]\d\d|\d{4,})\.\d+|128\.0|128\.([1-9]|\d{2,})|(129|1[3-9]\d|[2-9]\d\d|\d{4,})\.\d+|130\.0|130\.([1-9]|\d{2,})|(13[1-9]|1[4-9]\d|[2-9]\d\d|\d{4,})\.\d+)(?:\.\d+)?)|(Version\/(15\.6|15\.([7-9]|\d{2,})|(1[6-9]|[2-9]\d|\d{3,})\.\d+|17\.1|17\.([2-9]|\d{2,})|17\.6|17\.([7-9]|\d{2,})|(1[8-9]|[2-9]\d|\d{3,})\.\d+|18\.3|18\.([4-9]|\d{2,})|(19|[2-9]\d|\d{3,})\.\d+)(?:\.\d+)? Safari\/)|(Firefox\/(115\.0|115\.([1-9]|\d{2,})|(11[6-9]|1[2-9]\d|[2-9]\d\d|\d{4,})\.\d+|118\.0|118\.([1-9]|\d{2,})|(119|1[2-9]\d|[2-9]\d\d|\d{4,})\.\d+|136\.0|136\.([1-9]|\d{2,})|(13[7-9]|1[4-9]\d|[2-9]\d\d|\d{4,})\.\d+)\.\d+)|(Firefox\/(115\.0|115\.([1-9]|\d{2,})|(11[6-9]|1[2-9]\d|[2-9]\d\d|\d{4,})\.\d+|118\.0|118\.([1-9]|\d{2,})|(119|1[2-9]\d|[2-9]\d\d|\d{4,})\.\d+|136\.0|136\.([1-9]|\d{2,})|(13[7-9]|1[4-9]\d|[2-9]\d\d|\d{4,})\.\d+)(pre|[ab]\d+[a-z]*)?)/;var TK=t({GAME_SPEED_EFFECT:()=>qK,addEternityTime:()=>zK,addInfinityTime:()=>IK,addRealityTime:()=>WK,breakInfinity:()=>OK,browserCheck:()=>fq,gainedEternityPoints:()=>jK,gainedGlyphLevel:()=>NK,gainedInfinities:()=>GK,gainedInfinityPoints:()=>kK,gameLoop:()=>QK,getEternitiedMilestoneReward:()=>VK,getGameSpeedupFactor:()=>JK,getGameSpeedupForDisplay:()=>YK,getInfinitiedMilestoneReward:()=>RK,getOfflineEPGain:()=>UK,getTTPerSecond:()=>sq,init:()=>mq,playerInfinityUpgradesOnReset:()=>DK,ratePerMinute:()=>FK,realTimeMechanics:()=>ZK,requiredIPForEP:()=>MK,resetChallengeStuff:()=>PK,resetEternityRuns:()=>BK,resetInfinityRuns:()=>LK,setHoldingR:()=>dq,setShiftKey:()=>uq,simulateTime:()=>lq,trueTimeMechanics:()=>XK,updateRefresh:()=>KK}),EK=e(wN());if(GlobalErrorHandler.handled)throw Error(`Initialization failed`);GlobalErrorHandler.cleanStart=!0;function DK(){let e=new Set([`timeMult`,`dimMult`,`timeMult2`,`skipReset1`,`skipReset2`,`unspentBonus`,`27Mult`,`18Mult`,`36Mult`,`resetMult`,`skipReset3`,`passiveGen`,`45Mult`,`resetBoost`,`galaxyBoost`,`skipResetGalaxy`,`ipOffline`]),t=new Set(`timeMult.dimMult.timeMult2.skipReset1.skipReset2.unspentBonus.27Mult.18Mult.36Mult.resetMult.skipReset3.passiveGen.45Mult.resetBoost.galaxyBoost.skipResetGalaxy.totalMult.currentMult.postGalaxy.challengeMult.achievementMult.infinitiedMult.infinitiedGeneration.autoBuyerUpgrade.autobuyMaxDimboosts.ipOffline`.split(`.`));if(PelleUpgrade.keepBreakInfinityUpgrades.canBeApplied){player.infinityUpgrades=new Set([...player.infinityUpgrades].filter(e=>t.has(e)));return}if(PelleUpgrade.keepInfinityUpgrades.canBeApplied){player.infinityUpgrades=new Set([...player.infinityUpgrades].filter(t=>e.has(t))),player.infinityRebuyables=[0,0,0],GameCache.tickSpeedMultDecrease.invalidate(),GameCache.dimensionMultDecrease.invalidate();return}RealityUpgrade(10).isBought||EternityMilestone.keepBreakUpgrades.isReached?(player.infinityUpgrades=t,player.infinityRebuyables=[new Decimal(8),new Decimal(7),new Decimal(10)]):EternityMilestone.keepInfinityUpgrades.isReached?(player.infinityUpgrades=e,player.infinityRebuyables=[new Decimal,new Decimal,new Decimal]):(player.infinityUpgrades.clear(),player.infinityRebuyables=[new Decimal,new Decimal,new Decimal]),Pelle.isDoomed&&(player.infinityUpgrades.clear(),player.infinityRebuyables=[new Decimal,new Decimal,new Decimal]),GameCache.tickSpeedMultDecrease.invalidate(),GameCache.dimensionMultDecrease.invalidate()}function OK(){if(Autobuyer.bigCrunch.hasMaxedInterval&&!InfinityChallenge.isRunning){for(let e of Autobuyers.all)e.data.interval!==void 0&&e.maxIntervalForFree();Achievement(61).tryUnlock(),player.break=!player.break,TabNotification.ICUnlock.tryTrigger(),EventHub.dispatch(player.break?GAME_EVENT.BREAK_INFINITY:GAME_EVENT.FIX_INFINITY),GameUI.update()}}function kK(){let e=new Decimal(Effects.min(308,Achievement(103),TimeStudy(111))).toNumber();if(Pelle.isDisabled(`IPMults`))return Decimal.pow10(player.records.thisInfinity.maxAM.max(1).log10().div(e).sub(.75)).timesEffectsOf(PelleRifts.vacuum).times(Pelle.specialGlyphEffect.infinity).floor();let t=player.break?Decimal.pow10(player.records.thisInfinity.maxAM.max(1).log10().div(e).sub(.75)):new Decimal(308/e);return Effarig.isRunning&&Effarig.currentStage===EFFARIG_STAGES.ETERNITY&&(t=t.min(o.E200)),t=t.times(GameCache.totalIPMult.value),Teresa.isRunning?t=t.pow(.55):V.isRunning?t=t.pow(.5):Laitela.isRunning&&(t=dilatedValueOf(t)),GlyphAlteration.isAdded(`infinity`)&&(t=t.pow(getSecondaryGlyphEffect(`infinityIP`))),t.floor()}function AK(){return Pelle.isDisabled(`EPMults`)?Pelle.specialGlyphEffect.time.timesEffectOf(PelleRifts.vacuum.milestones[2]):getAdjustedGlyphEffect(`cursedEP`).timesEffectsOf(EternityUpgrade.epMult,TimeStudy(61),TimeStudy(122),TimeStudy(121),TimeStudy(123),RealityUpgrade(12),GlyphEffect.epMult)}function jK(){let e=o.D5.pow(player.records.thisEternity.maxIP.plus(kK()).max(1).log10().div(Effects.min(new Decimal(308),Achievement(163)).sub(PelleRifts.recursion.effectValue)).sub(.7)).times(AK());return Teresa.isRunning?e=e.pow(.55):V.isRunning?e=e.pow(.5):Laitela.isRunning&&(e=dilatedValueOf(e)),GlyphAlteration.isAdded(`time`)&&(e=e.pow(getSecondaryGlyphEffect(`timeEP`))),e.floor()}function MK(e){return Decimal.pow10(Decimal.log10(Decimal.divide(e,AK()),5).times(308).plus(.7)).clampMin(Number.MAX_VALUE)}function NK(){let e=getGlyphLevelInputs(),t=e.rawLevel.floor(),n=e.actualLevel.floor();return{rawLevel:t,actualLevel:n}}function PK(){player.chall2Pow=o.D1,player.chall3Pow=o.D0_01,Currency.matter.reset(),player.chall8TotalSacrifice=o.D1,player.postC4Tier=1}function FK(e,t){return Decimal.divide(e,t.div(60*1e3))}function IK(e,t,n,r,i){let a=``;player.challenge.normal.current&&(a=`Normal Challenge ${player.challenge.normal.current}`),player.challenge.infinity.current&&(a=`Infinity Challenge ${player.challenge.infinity.current}`),player.records.recentInfinities.pop(),player.records.recentInfinities.unshift([e,t,n,r,i,a]),GameCache.bestRunIPPM.invalidate()}function LK(){player.records.recentInfinities=Array.from({length:10},()=>[Number.MAX_VALUE,o.BEMAX,o.BEMAX,o.D1,o.D1,``]),GameCache.bestRunIPPM.invalidate()}function RK(e,t){return Autobuyer.bigCrunch.autoInfinitiesAvailable(t)?Decimal.floor(player.records.thisEternity.bestInfinitiesPerMs.times(e).dividedBy(2)):o.D0}function zK(e,t,n,r,i){let a=``;if(player.challenge.eternity.current){let e=player.challenge.eternity.current,t=EternityChallenge(e);a=`${player.dilation.active?`Dilated EC`:`Eternity Challenge`} ${e} (${formatInt(t.completions)}/${formatInt(t.maxCompletions)})`}else player.dilation.active&&(a=`Time Dilation`);let s=player.dilation.active?getTachyonGain():o.D0;player.records.recentEternities.pop(),player.records.recentEternities.unshift([e,t,n,r,i,a,s]),GameCache.averageRealTimePerEternity.invalidate()}function BK(){player.records.recentEternities=Array.from({length:10},()=>[Number.MAX_VALUE,o.BEMAX,o.BEMAX,o.D1,o.D1,``,o.D0]),GameCache.averageRealTimePerEternity.invalidate()}function VK(e,t){return Autobuyer.eternity.autoEternitiesAvailable(t)?Decimal.floor(player.records.thisReality.bestEternitiesPerMs.times(e).dividedBy(2)):o.D0}function HK(){return player.options.offlineProgress&&!Autobuyer.bigCrunch.autoInfinitiesAvailable()&&!Autobuyer.eternity.autoEternitiesAvailable()}function UK(e){return!EternityMilestone.autoEP.isReached||!HK()?o.D0:player.records.bestEternity.bestEPminReality.times(TimeSpan.fromMilliseconds(new Decimal(e)).totalMinutes.div(4))}function WK(e,t,n,r,i,a,o,s){let c=``,l=[Teresa,Effarig,Enslaved,V,Ra,Laitela];for(let e of l)e.isRunning&&(c=e.displayName);let u=Effarig.shardsGained;player.records.recentRealities.pop(),player.records.recentRealities.unshift([e,t,n,r.times(o),a,c,i,u.mul(o),s])}function GK(){if(EternityChallenge(4).isRunning||Pelle.isDisabled(`InfinitiedMults`))return o.D1;let e=Decimal.max(1,Achievement(87));return e=e.timesEffectsOf(TimeStudy(32),RealityUpgrade(5),RealityUpgrade(7),Achievement(131).effects.infinitiesGain,Achievement(164),Ra.unlocks.continuousTTBoost.effects.infinity),e=e.times(getAdjustedGlyphEffect(`infinityinfmult`)),e=e.powEffectOf(SingularityMilestone.infinitiedPow),e}function KK(){GameStorage.save(),location.reload(!0)}const qK={FIXED_SPEED:1,TIME_GLYPH:2,BLACK_HOLE:3,TIME_STORAGE:4,SINGULARITY_MILESTONE:5,NERFS:6};function JK(e,t){let n=e===void 0?[qK.FIXED_SPEED,qK.TIME_GLYPH,qK.BLACK_HOLE,qK.TIME_STORAGE,qK.SINGULARITY_MILESTONE,qK.NERFS]:e;if(n.includes(qK.FIXED_SPEED)&&EternityChallenge(12).isRunning)return Decimal.mul(1/1e3,dev.speedUp);let r=o.D1;if(n.includes(qK.BLACK_HOLE)){if(BlackHoles.areNegative)r=r.mul(player.blackHoleNegative);else if(!BlackHoles.arePaused)for(let e of BlackHoles.list){if(!e.isUnlocked||!(t===void 0?e.isActive:e.id<=t))break;r=r.mul(e.power.pow(BlackHoles.unpauseAccelerationFactor)),r=r.mul(VUnlocks.achievementBH.effectOrDefault(1))}}if(n.includes(qK.SINGULARITY_MILESTONE)&&(r=r.mul(SingularityMilestone.gamespeedFromSingularities.effectOrDefault(1))),n.includes(qK.TIME_GLYPH)&&(r=r.mul(getAdjustedGlyphEffect(`timespeed`)),r=r.pow(getAdjustedGlyphEffect(`effarigblackhole`))),Enslaved.isStoringGameTime&&n.includes(qK.TIME_STORAGE)){let e=Ra.unlocks.autoPulseTime.canBeApplied?.99:1;r=r.mul(1-e).add(e)}if(n.includes(qK.NERFS)){if(Effarig.isRunning)r=Effarig.multiplier(r);else if(Laitela.isRunning){let e=Time.thisRealityRealTime.totalMinutes.div(10).clampMax(1);r=r.pow(e)}}return r=r.mul(PelleUpgrade.timeSpeedMult.effectValue),r=r.mul(dev.speedUp),r}function YK(){let e=JK();return Enslaved.isAutoReleasing&&Enslaved.canRelease(!0)&&!BlackHoles.areNegative&&!Pelle.isDisabled(`blackhole`)?Decimal.max(Enslaved.autoReleaseSpeed,e):e}function XK(e){Enslaved.isAutoReleasing&&Enslaved.autoReleaseTick++,Enslaved.autoReleaseTick>=5?(Enslaved.autoReleaseTick=0,Enslaved.useStoredTime(!0),Enslaved.isReleaseTick=!0):Enslaved.isReleaseTick||(Enslaved.nextTickDiff=e),Autobuyers.tick(),Tutorial.tutorialLoop(),Achievement(165).isUnlocked&&player.celestials.effarig.autoAdjustGlyphWeights&&autoAdjustGlyphWeights()}function ZK(e){return Ra.memoryTick(e,!Enslaved.isStoringRealTime),AlchemyResource.momentum.isUnlocked&&(player.celestials.ra.momentumTime=player.celestials.ra.momentumTime.add(e.times(Achievement(175).effectOrDefault(1)))),DarkMatterDimensions.tick(e),Enslaved.isStoringRealTime?(player.records.realTimePlayed=player.records.realTimePlayed.add(e),player.records.thisInfinity.realTime=player.records.thisInfinity.realTime.add(e),player.records.thisEternity.realTime=player.records.thisEternity.realTime.add(e),player.records.thisReality.realTime=player.records.thisReality.realTime.add(e),Enslaved.storeRealTime(e),GameUI.update(),!0):(BlackHoles.updatePhases(e),!1)}function QK(e,t={}){if(PerformanceStats.start(`Frame Time`),PerformanceStats.start(`Game Update`),EventHub.dispatch(GAME_EVENT.GAME_TICK_BEFORE),Speedrun.isPausedAtStart()||GameEnd.creditsEverClosed){GameUI.update();return}let n=Date.now(),r=(e===void 0?Math.clamp(n-player.lastUpdate,1,864e5):e)*dev.speedUp,i=new Decimal(r),a=r===void 0?Math.clamp(n-player.lastUpdate,1,864e5):r,s=new Decimal(a);if(GameStorage.ignoreBackupTimer||(player.backupTimer+=a),player.options.hibernationCatchup&&r===void 0&&a>6e4){GameIntervals.gameLoop.stop(),lq(a/1e3,!0),XK(a),ZK(s);return}if((i===void 0||Enslaved.isReleaseTick)&&(i=new Decimal(Enslaved.nextTickDiff)),XK(a),ZK(s))return;GameCache.antimatterDimensionCommonMultiplier.invalidate(),GameCache.antimatterDimensionFinalMultipliers.invalidate(),GameCache.infinityDimensionCommonMultiplier.invalidate(),GameCache.timeDimensionCommonMultiplier.invalidate(),GameCache.metaDimensionCommonMultiplier.invalidate(),GameCache.totalIPMult.invalidate();let c=EternityChallenge(12).isRunning;if(!Enslaved.isReleaseTick&&!c){let e=t.blackHoleSpeedup===void 0?JK():t.blackHoleSpeedup;if(Enslaved.isStoringGameTime&&!c){let t=JK(),n=JK([qK.FIXED_SPEED,qK.TIME_GLYPH,qK.BLACK_HOLE,qK.SINGULARITY_MILESTONE]),r=Ra.unlocks.improvedStoredTime.effects.gameTimeAmplification.effectOrDefault(1),a=player.celestials.enslaved.stored;player.celestials.enslaved.stored=Decimal.clampMax(player.celestials.enslaved.stored.add(i.times(n.sub(t)).times(r)),Enslaved.timeCap),Enslaved.currentBlackHoleStoreAmountPerMs=player.celestials.enslaved.stored.sub(a).div(i),e=t}i=i.times(e)}else c&&(i=i.times(JK()),Enslaved.currentBlackHoleStoreAmountPerMs=o.D0);player.celestials.ra.peakGamespeed=player.celestials.ra.peakGamespeed.clampMin(JK()),Enslaved.isReleaseTick=!1,player.records.realTimeDoomed=player.records.realTimeDoomed.add(s),player.records.realTimePlayed=player.records.realTimePlayed.add(s),player.records.totalTimePlayed=player.records.totalTimePlayed.add(i),player.records.thisInfinity.realTime=player.records.thisInfinity.realTime.add(s),player.records.thisInfinity.time=player.records.thisInfinity.time.add(i),player.records.thisEternity.realTime=player.records.thisEternity.realTime.add(s),Enslaved.isRunning&&Enslaved.feltEternity&&!EternityChallenge(12).isRunning?player.records.thisEternity.time=player.records.thisEternity.time.add(i.times(1+Currency.eternities.value.min(1e66).toNumber())):player.records.thisEternity.time=player.records.thisEternity.time.add(i),player.records.thisReality.realTime=player.records.thisReality.realTime.add(s),player.records.thisReality.time=player.records.thisReality.time.add(i),player.records.thisQuantum.realTime=player.records.thisQuantum.realTime.add(s),player.records.thisQuantum.time=player.records.thisQuantum.time.add(i),player.records.trueTimePlayed+=a,player.records.thisInfinity.trueTime+=a,player.records.thisEternity.trueTime+=a,player.records.thisQuantum.trueTime+=a,player.records.thisReality.trueTime+=a,DeltaTimeState.update(a,s,i),updateNormalAndInfinityChallenges(i),preProductionGenerateIP(i),Pelle.isDoomed||eq(),iq(s),aq(s);let l=new Decimal(AlchemyResource.uncountability.effectValue).times(Time.realDeltaTime.totalSeconds);Currency.realities.add(l),Currency.perkPoints.add(l),Perk.autocompleteEC1.canBeApplied&&(player.reality.lastAutoEC=player.reality.lastAutoEC.add(s)),EternityChallenge(12).tryFail(),Achievements._power.invalidate(),MetaDimensions.tick(i),TimeDimensions.tick(i),InfinityDimensions.tick(i),AntimatterDimensions.tick(i);let u=Decimal.clampMin(FreeTickspeed.fromShards(Currency.timeShards.value).newAmount.sub(player.totalTickGained),0);player.totalTickGained=player.totalTickGained.add(u),$K(),tryCompleteInfinityChallenges(),EternityChallenges.autoComplete.tick(),replicantiLoop(i),PlayerProgress.dilationUnlocked()&&Currency.dilatedTime.add(getDilationGainPerSecond().times(i.div(1e3))),oq(),Currency.timeTheorems.add(sq().times(i.div(1e3))),InfinityDimensions.tryAutoUnlock(),PlayerProgress.quantumUnlocked()&&handleQuantumTick(i),Ra.unlocks.autoUnlockDilation.canBeApplied&&Currency.timeTheorems.max.gte(TimeStudy.dilation.totalTimeTheoremRequirement)&&!isInCelestialReality()&&!Pelle.isDoomed&&(Currency.timeTheorems.add(TimeStudy.dilation.cost),TimeStudy.dilation.purchase(!0)),tq(),GlyphSelection.active&&GlyphSelection.update(NK());let d=player.dilation.active&&(Ra.unlocks.autoTP.canBeApplied||MasteryStudy(62).isBought),f=!isInCelestialReality()&&Ra.unlocks.unlockDilationStartingTP.canBeApplied;if((d||f)&&!Pelle.isDoomed&&rewardTP(),Enslaved.canTickHintTimer&&(player.celestials.enslaved.hintUnlockProgress+=Enslaved.isRunning?s.clampMax(1e10).toNumber():s.mul(.4).clampMax(1e10).toNumber(),player.celestials.enslaved.hintUnlockProgress>TimeSpan.fromHours(5).totalMilliseconds.toNumber()&&(EnslavedProgress.hintsUnlocked.giveProgress(),Enslaved.quotes.hintUnlock.show())),nq(s),Achievements.autoAchieveUpdate(i),V.checkForUnlocks(),AutomatorBackend.update(a),Pelle.gameLoop(s),GalaxyGenerator.loop(s),GameEnd.gameLoop(a),Enslaved.canAmplify||(Enslaved.boostReality=!1),GameEnd.endState<END_STATE_MARKERS.CREDITS_START){if(Tabs.current.isPermanentlyHidden){let e=Tabs.all.toReversed().find(e=>!e.isPermanentlyHidden&&e.id!==10);e?e.show(!0):[...Tab.dimensions.subtabs].toReversed().find(e=>!e.isPermanentlyHidden).show(!0)}Tabs.current.subtabs.find(e=>e.isOpen).isPermanentlyHidden&&[...Tab.dimensions.subtabs].toReversed().find(e=>!e.isPermanentlyHidden).show(!0)}EventHub.dispatch(GAME_EVENT.GAME_TICK_AFTER),GameUI.update(),player.lastUpdate=n,PerformanceStats.end(`Game Update`)}function $K(){let e=kK().div(Decimal.max(5e-4,Time.thisInfinityRealTime.totalMinutes));e.gt(player.records.thisInfinity.bestIPmin)&&Player.canCrunch&&(player.records.thisInfinity.bestIPmin=e,player.records.thisInfinity.bestIPminVal=kK());let t=jK().dividedBy(Decimal.max(5e-4,Time.thisEternityRealTime.totalMinutes));t.gt(player.records.thisEternity.bestEPmin)&&Player.canEternity&&(player.records.thisEternity.bestEPmin=t,player.records.thisEternity.bestEPminVal=jK());let n=Quarks.gain.dividedBy(Decimal.max(5e-4,Time.thisEternityRealTime.totalMinutes));n.gt(player.records.thisQuantum.bestQKmin)&&Player.canStudyQuantum&&(player.records.thisQuantum.bestQKmin=n,player.records.thisQuantum.bestQKminVal=Quarks.gain);let r=Effarig.shardsGained.div(Decimal.max(5e-4,Time.thisRealityRealTime.totalMinutes));r.gt(player.records.thisReality.bestRSmin&&isRealityAvailable())&&(player.records.thisReality.bestRSmin=r,player.records.thisReality.bestRSminVal=Effarig.shardsGained)}function eq(){let e=0;if(RealityUpgrade(14).isBought&&(e=o.D1.timesEffectsOf(Achievement(113),RealityUpgrade(3),RealityUpgrade(14)),e=Decimal.times(e,getAdjustedGlyphEffect(`timeetermult`)),e=new Decimal(Time.deltaTime).times(Decimal.pow(e,AlchemyResource.eternity.effectValue)),player.reality.partEternitied=player.reality.partEternitied.plus(e),Currency.eternities.add(player.reality.partEternitied.floor()),player.reality.partEternitied=player.reality.partEternitied.sub(player.reality.partEternitied.floor())),!EternityChallenge(4).isRunning){let t=o.D0;BreakInfinityUpgrade.infinitiedGen.isBought&&(t=t.plus(Time.deltaTimeMs.div(2).div(Decimal.clampMin(50,player.records.bestInfinity.time))),t=t.timesEffectsOf(RealityUpgrade(5),RealityUpgrade(7),Ra.unlocks.continuousTTBoost.effects.infinity),t=t.times(getAdjustedGlyphEffect(`infinityinfmult`))),RealityUpgrade(11).isBought&&(t=t.plus(RealityUpgrade(11).effectValue.times(Time.deltaTime))),EffarigUnlock.eternity.isUnlocked&&(t=t.plus(GK().times(Currency.eternities.value.minus(e.div(2).floor())).times(Time.deltaTime))),t=t.plus(player.partInfinitied),Currency.infinities.add(t.floor()),player.partInfinitied=t.minus(t.floor()).toNumber()}}function tq(){if(!TimeDimension(8).isUnlocked&&Perk.autounlockTD.canBeApplied)for(let e=5;e<=8;++e)TimeStudy.timeDimension(e).purchase();Perk.autounlockDilation3.canBeApplied&&buyDilationUpgrade(DilationUpgrade.ttGenerator.id),Perk.autounlockReality.canBeApplied&&TimeStudy.reality.purchase(!0),applyEU2()}function nq(e){let t=player.celestials.laitela;if(Laitela.isRunning&&(t.entropy.gte(0)&&(t.entropy=t.entropy.add(e.div(1e3).mul(Laitela.entropyGainPerSecond))),t.entropy.gte(1))){let e=`Lai'tela's Reality has been destabilized after ${Time.thisRealityRealTime.toStringShort()}.`;t.entropy=o.DM1;let n={fastestCompletion:t.fastestCompletion,difficultyTier:t.difficultyTier,realityReward:Laitela.realityReward};t.thisCompletion=Time.thisRealityRealTime.totalSeconds,t.fastestCompletion=t.thisCompletion.clampMax(t.fastestCompletion),clearCelestialRuns();let r=Time.thisRealityRealTime.totalSeconds.lte(30);if(r){t.difficultyTier++,t.fastestCompletion=new Decimal(300),e+=rq(Laitela.maxAllowedDimension+1);for(let e of Laitela.quotes.all)e.requirement&&e.show()}if(Laitela.realityReward.gt(n.realityReward)){e+=`<br><br>Dark Matter Multiplier: ${formatX(n.realityReward,2,2)}
      ➜ ${formatX(Laitela.realityReward,2,2)}<br>Best Completion Time: `;let i=n.fastestCompletion.eq(3600)||n.fastestCompletion.eq(300)&&n.difficultyTier>0;e+=`${i?`None`:TimeSpan.fromSeconds(n.fastestCompletion).toStringShort()} ➜
        ${r?`Destabilized`:TimeSpan.fromSeconds(t.fastestCompletion).toStringShort()}
        <br>Highest Active Dimension: ${r?`${formatInt(8-n.difficultyTier)} ➜`:``}
        ${formatInt(8-t.difficultyTier)}`,player.records.bestReality.laitelaSet=Glyphs.copyForRecords(Glyphs.active.filter(e=>e!==null))}else e+=` You need to destabilize in faster than
        ${TimeSpan.fromSeconds(t.fastestCompletion).toStringShort()} to improve your multiplier.`;Laitela.isFullyDestabilized&&jS(24).tryComplete(),Modal.message.show(e,{},2)}}function rq(e){switch(e){case 1:return`<br><br>Lai'tela's Reality will now completely disable production from all Dimensions.
        The Reality can still be entered, but further destabilization is no longer possible.
        For completely destabilizing the Reality, you also get an additional ${formatX(8)} to Dark Energy gain.`;case 2:return`<br><br>Lai'tela's Reality will now disable production from all 2nd Dimensions during
      future runs, but the reward will be ${formatInt(100)} times stronger than before. Completely destabilizing
      the Reality for the final Dimension will give you an additional ${formatX(8)} to Dark Energy gain.`;case 3:return`<br><br>Lai'tela's Reality will now disable production from all 3rd Dimensions during
        future runs, but the reward will be ${formatInt(100)} times stronger than before.`;case 8:return`<br><br>Lai'tela's Reality will now disable production from all 8th Dimensions during
        future runs, but the reward will be ${formatInt(100)} times stronger than before. This boost can be
        repeated for each remaining Dimension by reaching destabilization within ${formatInt(30)} seconds again.`;default:return`<br><br>Lai'tela's Reality will now disable production from all
        ${e}th Dimensions during future runs, but the reward will be
        ${formatInt(100)} times stronger than before.`}}function iq(e){if(Currency.infinityPoints.add(TimeStudy(181).effectOrDefault(0)),Currency.eternityPoints.add(MasteryStudy(61).effectOrDefault(0)),TeresaUnlocks.epGen.canBeApplied&&Currency.eternityPoints.add(player.records.thisEternity.bestEPmin.times(o.D0_01).times(JK().times(e.div(1e3))).timesEffectOf(Ra.unlocks.continuousTTBoost.effects.autoPrestige)),InfinityUpgrade.ipGen.isCharged){let t=MachineHandler.gainedRealityMachines.timesEffectsOf(InfinityUpgrade.ipGen.chargedEffect).times(e.div(1e3));Currency.realityMachines.add(t)}PelleRifts.chaos.milestones[2].canBeApplied&&Currency.eternityPoints.add(jK().times(o.D0_1).times(e.div(1e3)))}function aq(e){MachineHandler.updateIMCap(),Currency.imaginaryMachines.add(MachineHandler.gainedImaginaryMachines(e))}function oq(){let e=Effects.product(DilationUpgrade.doubleGalaxies,QuantumChallenge(2).reward),t=getTachyonGalaxyMult();player.dilation.baseTachyonGalaxies=Decimal.max(player.dilation.baseTachyonGalaxies,o.D1.plus(Decimal.floor(Decimal.log(Currency.dilatedTime.value.dividedBy(1e3),t)))),player.dilation.nextThreshold=o.E3.times(t.pow(player.dilation.baseTachyonGalaxies)),player.dilation.totalTachyonGalaxies=player.dilation.baseTachyonGalaxies.times(e).add(Decimal.max(player.dilation.baseTachyonGalaxies.times(e),0).div(e)),player.dilation.totalTachyonGalaxies=player.dilation.totalTachyonGalaxies.times(DilationUpgrade.galaxyMultiplier.effectValue)}function sq(){let e=Effects.product(Ra.unlocks.continuousTTBoost.effects.ttGen,Ra.unlocks.achievementTTMult,Achievement(137),Achievement(156));GlyphAlteration.isAdded(`dilation`)&&(e=e.mul(getSecondaryGlyphEffect(`dilationTTgen`)));let t=Teresa.isRunning||Enslaved.isRunning||Pelle.isDoomed?0:new Decimal(getAdjustedGlyphEffect(`dilationTTgen`)).times(e),n=(DilationUpgrade.ttGenerator.isBought?DilationUpgrade.ttGenerator.effectValue.times(Pelle.isDoomed?1:e):o.D0).add(t);return n.gt(1)&&(n=n.pow(SingularityMilestone.theoremPowerFromSingularities.effectOrDefault(1))),n=n.powEffectOf(Achievement(158)),n}function cq(e,t){if(e>600){let n=Wt([{},player]);Modal.awayProgress.show({playerBefore:t,playerAfter:n,seconds:e})}GameUI.notify.showBlackHoles=!0}function lq(e,t,n){if(e<0)return;let r=Math.floor(e*20);GameUI.notify.showBlackHoles=!1;let i=GameStorage.maxOfflineTicks(1e3*e,GameStorage.offlineTicks??player.options.offlineTicks);r>i&&!n?r=i:r>50&&!t&&n&&(r=50);let a=Wt([{},player]),o=BlackHoles.areUnlocked&&!BlackHoles.arePaused?BlackHoles.calculateGameTimeFromRealTime(e,BlackHoles.calculateSpeedups()):JK().mul(e),s=RK(o.mul(1e3)),c=VK(o.mul(1e3));c.gt(0)?Currency.eternities.add(c):s.gt(0)?Currency.infinities.add(s):Currency.eternityPoints.add(UK(e*1e3)),InfinityUpgrade.ipOffline.isBought&&player.options.offlineProgress&&Currency.infinityPoints.add(player.records.thisEternity.bestIPMsWithoutMaxAll.times(e*1e3/2)),EventHub.dispatch(GAME_EVENT.OFFLINE_CURRENCY_GAINED);let l=e,u=e=>{let t=l/e;QK(1e3*t),l-=t};if(BlackHoles.areUnlocked&&!BlackHoles.arePaused&&(u=e=>{let[t,n]=BlackHoles.calculateOfflineTick(l,e,1e-4);l-=t,QK(1e3*t,{blackHoleSpeedup:n})}),n){GameIntervals.stop();for(let e=50;e>0;e--)u(e);GameStorage.postLoadStuff(),cq(e,a)}else{let t={};ui.view.modal.progressBar={},Async.run(u,r,{batchSize:1,maxTime:60,sleepTime:1,asyncEntry:e=>{GameIntervals.stop(),ui.$viewModel.modal.progressBar={label:`Offline Progress Simulation`,info:`The game is being run at a lower accuracy in order to quickly calculate the resources you
              gained while you were away. See the How To Play entry on "Offline Progress" for technical details. If
              you are impatient and want to get back to the game sooner, you can click the "Speed up" button to
              simulate the rest of the time with half as many ticks (down to a minimum of ${formatInt(500)} ticks
              remaining). The "SKIP" button will instead use all the remaining offline time in ${formatInt(10)}
              ticks.`,progressName:`Ticks`,current:e,max:r,startTime:Date.now(),buttons:[{text:`Speed up`,condition:(e,t)=>t-e>500,click:()=>{let e=Math.clampMin(Math.floor(t.remaining/2),500);t.maxIter-=t.remaining-e,t.remaining=e,ui.$viewModel.modal.progressBar.max=t.maxIter}},{text:`SKIP`,condition:(e,t)=>t-e>10,click:()=>{t.maxIter-=t.remaining-10,t.remaining=10}}]}},asyncProgress:e=>{ui.$viewModel.modal.progressBar.current=e},asyncExit:()=>{ui.$viewModel.modal.progressBar=void 0,GameStorage.postLoadStuff()},then:()=>{cq(e,a)},progress:t})}}window.addEventListener(`load`,function(){let e=fq();GameUI.initialized=e,ui.view.initialized=e,setTimeout(()=>{Tn.updateZoom(),document.querySelector(`#loading`).style.display=`none`},500),e||(GameIntervals.stop(),document.querySelector(`#loading`).style.display=`none`,document.querySelector(`#browser-warning`).style.display=`flex`)}),window.addEventListener(`focus`,function(){uq(!1)}),window.addEventListener(`blur`,function(){GameKeyboard.stopSpins()});function uq(e){ui.view.shiftDown=e}function dq(e){Replicanti.galaxies.isPlayerHoldingR=e}function fq(){return wK.test(navigator.userAgent)}function pq(){for(let e of[11,12,13,14,15,16,17,18,43,35,76])Achievement(e).unlock()}function mq(){console.log(`⚛️ Antimatter Dimensions: NG+3 Reality Port ⚛️`),Tn.initialize(),Xn.initialize(),Cloud.init(),GameStorage.load(),pq(),Tabs.all.find(e=>e.config.id===player.options.lastOpenTab).show(!0)}window.tweenTime=0;var hq;function gq(e){if(requestAnimationFrame(gq),e===void 0||hq===void 0){hq=e;return}let t=e-hq;hq=e,player.dilation.active&&(t/=10),tweenTime+=t,EK.default.update(tweenTime)}gq();function _q(e){for(let t in e){if(t===`default`)continue;let n=e[t];if(window[t]!==void 0)throw Error(`Property ${t} already exists in global context`);console.info(`Merged ${t} into global scope`),window[t]=n}}_q(ut),_q(await lV(()=>import(`./AutomatorBlockEditor-CXbq4W50.js`),__vite__mapDeps([29,1,30,31,32,33,2,34]))),_q(await lV(()=>import(`./AutomatorBlocks-DyAknDPW.js`),__vite__mapDeps([35,1,33,32,36,37]))),_q(await lV(()=>import(`./AutomatorTextEditor-DckWc4FP.js`),__vite__mapDeps([38,1,39]))),_q(await lV(()=>import(`./PerksTab-CccpyeJB.js`),__vite__mapDeps([40,1,31,32,41,5,2,16,17,10,42]))),_q(ne),_q(CK),_q(TK),fq()&&mq();