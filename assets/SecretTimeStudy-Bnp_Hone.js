import{n as e}from"./vue.runtime.esm-DWHiGzmS.js";import{n as t,t as n}from"./DescriptionDisplay-DpXGle8H.js";import{t as r}from"./_plugin-vue2_normalizer-Djvn235C.js";import{t as i}from"./CostDisplay-C4KvUMll.js";import{t as a}from"./HintText-iCrFHyiC.js";var o={name:`TimeStudyConnection`,props:{setup:{type:Object,required:!0}},data(){return{isOverridden:!1,isBought:!1}},computed:{classObject(){let e={"o-time-study-connection":!0,"o-time-study-connection--bought":this.isBought},t,n=this.setup.connection,r=n.from,i=n.to;function a(e){switch(e.path){case TIME_STUDY_PATH.ANTIMATTER_DIM:return`o-time-study-connection--antimatter-dim`;case TIME_STUDY_PATH.INFINITY_DIM:return`o-time-study-connection--infinity-dim`;case TIME_STUDY_PATH.TIME_DIM:return`o-time-study-connection--time-dim`;case TIME_STUDY_PATH.ACTIVE:return`o-time-study-connection--active`;case TIME_STUDY_PATH.PASSIVE:return`o-time-study-connection--passive`;case TIME_STUDY_PATH.IDLE:return`o-time-study-connection--idle`;default:return}}switch(i.type){case TIME_STUDY_TYPE.NORMAL:t=a(i)||a(r);break;case TIME_STUDY_TYPE.ETERNITY_CHALLENGE:t=`o-time-study-connection--eternity-challenge`;break;case TIME_STUDY_TYPE.DILATION:t=`o-time-study-connection--dilation`;break}return t!==void 0&&(e[t]=!0),e}},methods:{update(){this.isOverridden=this.setup.connection.isOverridden,this.isBought=this.setup.isBought},percents(e){return`${e*100}%`}}},s=class{constructor(e){this.connection=e}get from(){return this.connection.from}get to(){return this.connection.to}setPosition(e,t,n){let r=e.find(e=>e.study===this.from),i=e.find(e=>e.study===this.to);this.x1=(r.left+r.width/2)/t,this.y1=(r.top+r.height/2)/n,this.x2=(i.left+i.width/2)/t,this.y2=(i.top+i.height/2)/n}get isBought(){return this.from.isBought&&this.to.isBought}},c=r(o,function(){var e=this,t=e._self._c;return e.isOverridden?e._e():t(`line`,{class:e.classObject,attrs:{x1:e.percents(e.setup.x1),y1:e.percents(e.setup.y1),x2:e.percents(e.setup.x2),y2:e.percents(e.setup.y2)}})},[],!1,null,`2f032c8b`,null,null).exports,l=e({name:`TimeStudyButton`,components:{CostDisplay:i},props:{setup:{type:Object,required:!0},showCost:{type:Boolean,required:!1,default:!0},showStCost:{type:Boolean,required:!1,default:!1},specialClick:{type:Function,required:!1,default:null}},data(){return{isUseless:!1,isBought:!1,isAvailableForPurchase:!1,STCost:0,eternityChallengeRunning:!1,isCompleteEC:!1}},computed:{study(){return this.setup.study},styleObject(){return{top:`${this.setup.top}rem`,left:`${this.setup.left}rem`}},classObject(){return{"o-time-study":!this.isUseless,"l-time-study":!0,"c-pelle-useless":this.isUseless,"c-pelle-useless--bought":this.isUseless&&this.isBought,"c-pelle-useless--unavailable":this.isUseless&&!this.isAvailableForPurchase&&!this.isBought,"c-pelle-useless-available":this.isUseless&&!this.isAvailableForPurchase&&!this.isBought,"o-time-study--small":this.setup.isSmall,"o-time-study--unavailable":!this.isAvailableForPurchase&&!this.isBought&&!this.isUseless,"o-time-study--available":this.isAvailableForPurchase&&!this.isBought,"o-time-study--bought":this.isBought&&!this.isUseless}},pathClass(){switch(this.study.type){case TIME_STUDY_TYPE.NORMAL:switch(this.setup.path){case TIME_STUDY_PATH.ANTIMATTER_DIM:return`o-time-study-antimatter-dim`;case TIME_STUDY_PATH.INFINITY_DIM:return`o-time-study-infinity-dim`;case TIME_STUDY_PATH.TIME_DIM:return`o-time-study-time-dim`;case TIME_STUDY_PATH.ACTIVE:return`o-time-study-active`;case TIME_STUDY_PATH.PASSIVE:return`o-time-study-passive`;case TIME_STUDY_PATH.IDLE:return`o-time-study-idle`;case TIME_STUDY_PATH.LIGHT:return`o-time-study-light`;case TIME_STUDY_PATH.DARK:return`o-time-study-dark`;default:return`o-time-study-normal`}case TIME_STUDY_TYPE.ETERNITY_CHALLENGE:return`o-time-study-eternity-challenge`;case TIME_STUDY_TYPE.DILATION:return this.study.id===7?`o-time-study-reality`:`o-time-study-dilation`;case TIME_STUDY_TYPE.QUANTUM:return`o-time-study-quantum`;case TIME_STUDY_TYPE.TRIAD:return`o-time-study-triad`}return``},studyClass(){if(this.isUseless)return``;let e=``;return!this.isAvailableForPurchase&&!this.isBought&&(e+=`${this.pathClass}--unavailable`),this.isAvailableForPurchase&&!this.isBought&&(e+=`${this.pathClass}--available`),this.isBought&&(e+=`${this.pathClass}--bought`),this.isCompleteEC&&(e+=` ${this.pathClass}--complete`),e},eternityChallengeAnim(){return this.eternityChallengeRunning?`o-time-study-eternity-challenge--running`:``},config(){return{...this.study.config,formatCost:e=>e.gte(1e6)?format(e):formatInt(e)}},showDefaultCostDisplay(){let e=this.showCost&&!this.showStCost||this.STCost===0;return!this.setup.isSmall&&!this.doomedRealityStudy&&e},isDisabledByEnslaved(){return this.study.id===192&&Enslaved.isRunning},customCostStr(){let e=this.config.cost.lte(1e6)?this.setup.isSmall?`${formatInt(this.config.cost)} TT`:quantifyInt(`Time Theorem`,this.config.cost):this.setup.isSmall?`${format(this.config.cost)} TT`:quantify(`Time Theorem`,this.config.cost),t=this.setup.isSmall?`${formatInt(this.STCost)} ST`:quantifyInt(`Space Theorem`,this.STCost),n=[];return this.config.cost&&n.push(e),this.STCost&&this.showStCost&&n.push(t),n.join(` + `)},doomedRealityStudy(){return this.study.type===TIME_STUDY_TYPE.DILATION&&this.study.id===6&&Pelle.isDoomed}},methods:{update(){let e=this.study;this.isUseless=Pelle.uselessTimeStudies.includes(this.study.id)&&Pelle.isDoomed,this.isBought=e.isBought,this.eternityChallengeRunning=e.type===TIME_STUDY_TYPE.ETERNITY_CHALLENGE&&EternityChallenge.current?.id===e.id,this.isBought||(this.isAvailableForPurchase=e.canBeBought&&e.isAffordable),this.STCost=this.study.STCost,this.isCompleteEC=this.study.type===TIME_STUDY_TYPE.ETERNITY_CHALLENGE&&EternityChallenge(this.study.id).remainingCompletions===0},handleClick(){this.specialClick===null||!this.study.isBought?this.study.purchase():this.specialClick()},shiftClick(){this.study.purchaseUntil&&this.study.purchaseUntil()}}}),u=class{constructor(e){this.study=e.study,this.row=e.row,this.column=e.column}setPosition(e){this.top=e.itemPosition(this.row);let t=e.rows[this.row];this.left=t.itemPosition(this.column,e),this.width=t.layout.itemWidth,this.height=t.layout.itemHeight}get path(){return this.study.path}},d=r(l,function(){var e=this,t=e._self._c;return e._self._setupProxy,t(`button`,{class:[e.classObject,e.studyClass,e.eternityChallengeAnim],style:e.styleObject,on:{click:[function(t){return t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:e.handleClick.apply(null,arguments)},function(t){return!t.shiftKey||t.ctrlKey||t.altKey||t.metaKey?null:e.shiftClick.apply(null,arguments)}]}},[e._t(`default`),e.showDefaultCostDisplay?t(`CostDisplay`,{attrs:{br:``,config:e.config,name:`Time Theorem`}}):!e.doomedRealityStudy&&!e.isDisabledByEnslaved?t(`div`,[e._v(` Cost: `+e._s(e.customCostStr)+` `)]):e._e()],2)},[],!1,null,`a01d7c0c`,null,null).exports,f=class{constructor(e,t,n){this.layout=e,this.items=t,this.isWide=n}get width(){let e=this.items.length,t=this.layout;return e*t.itemWidth+(e-1)*t.spacing}itemPosition(e,t){let n=this.layout;return(t.width-this.width)/2+e*n.itemWidth+e*n.spacing}},p=class{constructor(e){this.itemWidth=e.itemWidth,this.itemHeight=e.itemHeight,this.spacing=e.spacing}},m=class e{constructor(e,t=1){this.spacing=4*t;let n=new p({itemWidth:18*t,itemHeight:10*t,spacing:3*t}),r=new p({itemWidth:12*t,itemHeight:10*t,spacing:.6*t}),i=(...e)=>new f(n,e),a=(...e)=>new f(r,e,!0),o=e=>TimeStudy(e).isUnlocked?TimeStudy(e):null,c=e=>TimeStudy.eternityChallenge(e);this.rows=[i(null,o(11),null),i(o(21),o(22)),i(null,o(31),o(32),o(33))],e===h.ALTERNATIVE_62||e===h.ALTERNATIVE_62_181||e===h.ALTERNATIVE_TRIAD_STUDIES?this.rows.push(i(null,o(41),o(42),c(5)),i(o(51))):this.rows.push(i(o(41),o(42)),i(null,o(51),c(5))),this.rows.push(i(null,o(61),o(62)),i(o(71),o(72),o(73)),i(o(81),o(82),o(83)),i(o(91),o(92),o(93)),i(o(101),o(102),o(103)),i(c(7),o(111),null),i(o(121),o(122),o(123)),i(c(6),o(131),o(132),o(133),c(8)),i(o(141),o(142),o(143)),i(null,c(9),o(151),null,c(4)),i(o(161),o(162))),e===h.ALTERNATIVE_181||e===h.ALTERNATIVE_62_181||e===h.ALTERNATIVE_TRIAD_STUDIES?this.rows.push(i(null,o(171),c(2)),i(c(1),o(181),c(3))):this.rows.push(i(o(171)),i(c(1),c(2),c(3)),i(o(181))),this.rows.push(i(c(10)),i(o(191),o(192),o(193)),i(o(201)),i(o(211),o(212),o(213),o(214)),a(o(221),o(222),o(223),o(224),o(225),o(226),o(227),o(228))),e===h.ALTERNATIVE_TRIAD_STUDIES&&!Pelle.isDoomed&&this.rows.push(i(o(301),o(302),o(303),o(304))),this.rows.push(i(o(231),o(232),o(233),o(234)),i(c(11),c(12)),i(TimeStudy.dilation),i(TimeStudy.timeDimension(5),TimeStudy.timeDimension(6)),i(TimeStudy.timeDimension(7),TimeStudy.timeDimension(8)),i(TimeStudy.metaDimensions),i(TimeStudy.masteryStudies)),this.studies=[];for(let e=0;e<this.rows.length;e++){let t=this.rows[e];for(let n=0;n<t.items.length;n++){let r=t.items[n];if(r===null)continue;let i=new u({study:r,row:e,column:n});t.isWide&&(i.isSmall=!0),this.studies.push(i)}}let l={};this.secretStudy=new u({study:l,row:0,column:0});let d={};this.enslavedStudy=new u({study:d,row:0,column:2}),this.connections=TimeStudy.allConnections.map(e=>new s(e)),this.secretStudyConnection=new s(new TimeStudyConnection(o(11),l)),this.enslavedStudyConnection=new s(new TimeStudyConnection(o(11),d)),this.width=this.rows.map(e=>e.width).nMax(),this.height=this.rows.map(e=>e.layout.itemHeight).nSum()+(this.rows.length-1)*this.spacing;for(let e of this.studies)e.setPosition(this);this.secretStudy.setPosition(this),this.enslavedStudy.setPosition(this);for(let e of this.connections)e.setPosition(this.studies,this.width,this.height);this.secretStudyConnection.setPosition(this.studies.concat(this.secretStudy),this.width,this.height),this.enslavedStudyConnection.setPosition(this.studies.concat(this.enslavedStudy),this.width,this.height)}itemPosition(e){let t=this.rows.slice(0,e);return t.map(e=>e.layout.itemHeight).nSum()+t.length*this.spacing}static create(t,n=1){this._instances===void 0&&(this._instances=[]);let r=new e(t,n);return this._instances[`${t}__${n}`]=r,r}};const h={NORMAL:0,ALTERNATIVE_62:1,ALTERNATIVE_181:2,ALTERNATIVE_62_181:3,ALTERNATIVE_TRIAD_STUDIES:4,get current(){let e=Perk.bypassEC5Lock.isBought,t=Perk.bypassEC1Lock.isBought&&Perk.bypassEC2Lock.isBought&&Perk.bypassEC3Lock.isBought;return Ra.canBuyTriad?this.ALTERNATIVE_TRIAD_STUDIES:e&&t?this.ALTERNATIVE_62_181:e?this.ALTERNATIVE_62:t?this.ALTERNATIVE_181:this.NORMAL}};var g={name:`DilationTimeStudy`,components:{DescriptionDisplay:n,TimeStudyButton:d},props:{setup:{type:Object,required:!0}},data(){return{showRequirement:!1,maxTT:new Decimal,currTT:new Decimal,ttGen:new Decimal}},computed:{study(){return this.setup.study},id(){return this.study.id},requirement(){return this.id===1?`Requirement: ${formatInt(5)} EC11 and EC12 completions
          and ${formatInt(this.maxTT)}/${formatInt(TimeStudy.dilation.totalTimeTheoremRequirement)}
          total Time Theorems`:this.id===6?`Requirement: ${format(`1e4000`)} Eternity Points`:this.id===7?`Requirement: ${format(1e100)} Time Dilation upgrade`:this.id===8?`Requirement: ${formatInt(5)} EC13 & EC14 completions, ${formatInt(50)} net quarks within your best Quantum`:this.id===9?`Requirement: ${formatInt(16750)} Positrons`:this.id===10?`Requirement: Beat Quantum Challenge 8`:this.id===11?`Requirement: Complete Paired Challenge 4`:``},theoremTimeEstimate(){if(this.study.isBought||!this.study.cost||this.ttGen.eq(0))return null;let e=Decimal.sub(this.study.cost,this.currTT).dividedBy(this.ttGen);return e.gt(0)?`Enough TT in ${TimeSpan.fromSeconds(e).toStringShort()}`:null}},methods:{update(){this.id===1&&(this.maxTT.copyFrom(Currency.timeTheorems.max),this.showRequirement=!this.study.isBought&&!Perk.bypassECDilation.canBeApplied),this.id===6&&(this.showRequirement=!Pelle.isDoomed),this.id>=7&&(this.showRequirement=!0),this.currTT.copyFrom(Currency.timeTheorems.value),this.ttGen.copyFrom(getTTPerSecond().times(getGameSpeedupFactor()))},clickHandler(){switch(this.id){case 1:return()=>Tab.eternity.dilation.show();case 2:case 3:case 4:case 5:return()=>Tab.dimensions.time.show();case 6:return()=>Tab.dimensions.meta.show();default:return()=>{}}}}},_=r(g,function(){var e=this,t=e._self._c;return t(`TimeStudyButton`,{attrs:{setup:e.setup,"ach-tooltip":e.theoremTimeEstimate,"special-click":e.clickHandler()}},[t(`DescriptionDisplay`,{attrs:{config:e.study.config}}),e.showRequirement?[t(`br`),t(`span`,[e._v(e._s(e.requirement))])]:e._e()],2)},[],!1,null,`e26c2e17`,null,null).exports,v={name:`ECTimeStudy`,components:{TimeStudyButton:d,HintText:a},props:{setup:{type:Object,required:!0}},data(){return{hasRequirement:!1,requirement:{current:new Decimal,total:new Decimal},completions:0,showTotalCompletions:!1,isRunning:!1,isUnlocked:!1}},computed:{study(){return this.setup.study},id(){return this.study.id},config(){return this.study.config},hasNumberRequirement(){return typeof this.study.requirementCurrent==`number`},formatValue(){return this.config.secondary.formatValue},needsFirstLinebreak(){return this.study.id===7},needsSecondLinebreak(){return[3,4,7].includes(this.study.id)}},methods:{update(){let e=this.id,t=this.study,n=EternityChallenge(e);if(this.hasRequirement=!Perk.studyECRequirement.isBought&&!t.wasRequirementPreviouslyMet,this.completions=n.completions,this.showTotalCompletions=!Enslaved.isRunning||e!==1,this.isRunning=EternityChallenge.current?.id===e,this.isUnlocked=n.isUnlocked,!this.hasRequirement||e===11||e===12)return;let r=this.requirement;this.hasNumberRequirement?(r.total=t.requirementTotal,r.current=Math.min(t.requirementCurrent,r.total)):(r.total.copyFrom(t.requirementTotal),r.current.copyFrom(t.requirementCurrent.min(r.total)))}}},y=r(v,function(){var e=this,t=e._self._c;return t(`TimeStudyButton`,{attrs:{setup:e.setup}},[t(`HintText`,{staticClass:`l-hint-text--time-study`,attrs:{type:`studies`}},[e._v(` EC`+e._s(e.id)+` `)]),e._v(` Eternity Challenge `+e._s(e.id)+` (`+e._s(e.formatInt(e.completions))),e.showTotalCompletions?t(`span`,[e._v(`/`+e._s(e.formatInt(5)))]):e._e(),e._v(`) `),e.hasRequirement?[t(`br`),e._v(` Requirement: `),e.needsFirstLinebreak?t(`br`):e._e(),e.config.secondary.path?t(`span`,[e._v(`Use only the `+e._s(e.config.secondary.path)+` path`)]):t(`span`,[e._v(` `+e._s(e.formatValue(e.requirement.current))+`/`+e._s(e.formatValue(e.requirement.total))+` `),e.needsSecondLinebreak?t(`br`):e._e(),e._v(` `+e._s(e.config.secondary.resource)+` `)])]:e._e(),e.isUnlocked&&!e.isRunning?t(`span`,[t(`br`),e._v(`Double click to start`)]):e.isRunning?t(`span`,[t(`br`),e._v(`Currently Running`)]):e._e()],2)},[],!1,null,`7a81a353`,null,null).exports,b=e({name:`NormalTimeStudy`,components:{DescriptionDisplay:n,EffectDisplay:t,HintText:a,TimeStudyButton:d},props:{setup:{type:Object,required:!0}},data:()=>({showCost:!0,showSTCost:!1}),computed:{study(){return this.setup.study},hintText(){let e=this.study.id;if(!this.setup.path)return e;let t=NormalTimeStudies.pathList.find(e=>e.path===this.setup.path);return`${e} ${t.name}`},isUseless(){return Pelle.uselessTimeStudies.includes(this.study.id)&&Pelle.isDoomed}},methods:{update(){this.showCost=this.study.id!==192||!Enslaved.isRunning,this.showSTCost=VUnlocks.vAchievementUnlock.isUnlocked&&!TimeStudy(this.study.id).isBought&&TimeStudy(this.study.id).costsST()&&!Pelle.isDoomed}}}),x=r(b,function(){var e=this,t=e._self._c;return e._self._setupProxy,t(`TimeStudyButton`,{attrs:{setup:e.setup,"show-cost":e.showCost,"show-st-cost":e.showSTCost}},[t(`HintText`,{staticClass:`l-hint-text--time-study`,attrs:{type:`studies`}},[e._v(` `+e._s(e.hintText)+` `)]),t(`span`,{class:{"o-pelle-disabled":e.isUseless}},[t(`DescriptionDisplay`,{attrs:{config:e.study.config}}),t(`EffectDisplay`,{attrs:{br:``,config:e.study.config}})],1)],1)},[],!1,null,`6f53d295`,null,null).exports,S={name:`SecretTimeStudy`,props:{setup:{type:Object,required:!0}},data(){return{isVisible:player.secretUnlocks.viewSecretTS}},computed:{styleObject(){return{top:`${this.setup.top}rem`,left:`${this.setup.left}rem`}},classObject(){return{"l-time-study":!0,"o-time-study":!0,"o-time-study--bought":!0,"o-time-study-normal":!0,"o-time-study-normal--bought":!0,"o-time-study--secret":!this.isVisible,"o-time-study--secret-unlocked":this.isVisible}}},methods:{update(){this.isVisible=player.secretUnlocks.viewSecretTS},handleClick(){if(this.isVisible){let e=Date.now();e-ui.lastClickTime<750?(ui.lastClickTime=0,player.secretUnlocks.viewSecretTS=!1):ui.lastClickTime=e}else ui.lastClickTime=0,player.secretUnlocks.viewSecretTS||(player.secretUnlocks.viewSecretTS=!0,this.$refs.study.addEventListener(`transitionend`,function e(t){SecretAchievement(21).unlock(),t.target.removeEventListener(t.type,e)}))}}},C=r(S,function(){var e=this,t=e._self._c;return t(`button`,{ref:`study`,class:e.classObject,style:e.styleObject,on:{click:e.handleClick}},[e._m(0)])},[function(){var e=this,t=e._self._c;return t(`span`,[e._v(` Unlock a Secret Achievement `),t(`br`),t(`br`),e._v(` (Double click to hide) `)])}],!1,null,`3075e082`,null,null).exports;export{h as a,u as c,_ as i,s as l,x as n,m as o,y as r,d as s,C as t,c as u};