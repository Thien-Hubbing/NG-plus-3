import{c as e}from"./vue.runtime.esm-BgJUlkrr.js";import{b as t,c as n}from"./DescriptionDisplay-BTqr37So.js";import{b as r}from"./_plugin-vue2_normalizer-1QcuHEq3.js";import"./word-shift-C7J-Q6Ef.js";import{b as i}from"./PrimaryButton-CrB6zgiD.js";import{b as a,c as o,d as s,e as c,f as l,h as u,i as d,j as f,k as p}from"./SecretTimeStudy-qFMr0rno.js";import"./CostDisplay-C-Odi2x3.js";import{b as m}from"./HintText-BDL6LnCX.js";const h=e({name:`QuantumTimeStudy`,components:{DescriptionDisplay:t,EffectDisplay:n,HintText:m,TimeStudyButton:u},props:{setup:{type:Object,required:!0}},data:()=>({showCost:!0}),computed:{study(){return this.setup.study},hintText(){let e=this.study.id;return e}},methods:{update(){this.showCost=!0}}});var g=function(){var e=this,t=e._self._c;return e._self._setupProxy,t(`TimeStudyButton`,{attrs:{setup:e.setup,"show-cost":e.showCost,"show-st-cost":e.showSTCost}},[t(`HintText`,{staticClass:`l-hint-text--time-study`,attrs:{type:`studies`}},[e._v(` `+e._s(e.hintText)+` `)]),t(`span`,{class:{"o-pelle-disabled":e.isUseless}},[t(`DescriptionDisplay`,{attrs:{config:e.study.config}}),t(`EffectDisplay`,{attrs:{br:``,config:e.study.config}})],1)],1)},_=[],v=r(h,g,_,!1,null,`640ce2d6`,null,null),y=v.exports,b=class{constructor(e,t,n){this.layout=e,this.items=t,this.isWide=n}get width(){let e=this.items.length,t=this.layout;return e*t.itemWidth+(e-1)*t.spacing}itemPosition(e,t){let n=this.layout,r=t.width,i=(r-this.width)/2;return i+e*n.itemWidth+e*n.spacing}},x=class{constructor(e){this.itemWidth=e.itemWidth,this.itemHeight=e.itemHeight,this.spacing=e.spacing}},S=class e{constructor(e,t=1){this.spacing=4*t,this.rows=[];let n=new x({itemWidth:18*t,itemHeight:10*t,spacing:3*t}),r=new x({itemWidth:12*t,itemHeight:10*t,spacing:.6*t}),i=(...e)=>new b(n,e),a=(...e)=>new b(r,e,!0),o=e=>MasteryStudy(e).isUnlocked?MasteryStudy(e):null,s=e=>TimeStudy.eternityChallenge(e);this.rows.push(i(o(11)),i(o(21),o(22),o(23)),a(o(31),o(32),o(33),o(34),o(35),o(36)),i(s(13),s(14)),i(TimeStudy.pairProduction),i(o(41),o(42),o(43)),i(o(51),TimeStudy.quantumChallenges,o(52)),i(TimeStudy.pairedChallenges),i(o(61),o(62)),i(o(71),o(72),o(73)),i(o(81),TimeStudy.duplicants,o(82)),i(o(91),null,null,o(92))),this.studies=[];for(let e=0;e<this.rows.length;e++){let t=this.rows[e];for(let n=0;n<t.items.length;n++){let r=t.items[n];if(r===null)continue;let i=new d({study:r,row:e,column:n});t.isWide&&(i.isSmall=!0),this.studies.push(i)}}this.connections=MasteryStudy.allConnections.map(e=>new f(e)),this.width=this.rows.map(e=>e.width).nMax();let c=this.rows.map(e=>e.layout.itemHeight).nSum();this.height=c+(this.rows.length-1)*this.spacing;for(let e of this.studies)e.setPosition(this);for(let e of this.connections)e.setPosition(this.studies,this.width,this.height)}itemPosition(e){let t=this.rows.slice(0,e),n=t.map(e=>e.layout.itemHeight).nSum();return n+t.length*this.spacing}static create(t,n=1){this._instances===void 0&&(this._instances=[]);let r=new e(t,n);return this._instances[`${t}__${n}`]=r,r}};const C=e({name:`MasteryStudiesTab`,components:{PrimaryButton:i,NormalTimeStudy:o,ECTimeStudy:s,DilationTimeStudy:c,SecretTimeStudy:a,TimeStudyConnection:p,QuantumTimeStudy:y},data(){return{respec:player.respec,layoutType:l.NORMAL,vLevel:0,renderedStudyCount:0,renderedConnectionCount:0,isEnslaved:!1,delayTimer:0}},computed:{layout(){return S.create(this.layoutType)},allStudies(){return this.layout.studies},studies(){return this.allStudies.slice(0,this.renderedStudyCount)},allConnections(){return this.layout.connections},connections(){return this.allConnections.slice(0,this.renderedConnectionCount)},treeStyleObject(){return{width:`${this.layout.width}rem`,height:`${this.layout.height}rem`}},respecClassObject(){return{"o-primary-btn--subtab-option":!0,"o-primary-btn--respec-active":this.respec}}},watch:{respec(e){player.respec=e},vLevel(){this.$recompute(`layout`)}},created(){let e=()=>{let t=!1;this.renderedStudyCount<this.allStudies.length&&(this.renderedStudyCount+=2,t=!0),this.renderedConnectionCount<this.allConnections.length&&(this.renderedConnectionCount+=2,t=!0),t&&(this.renderAnimationId=requestAnimationFrame(e))};e(),document.body.scrollTop=0},beforeDestroy(){cancelAnimationFrame(this.renderAnimationId)},methods:{update(){this.respec=player.respec,this.layoutType=l.current,this.vLevel=Ra.pets.v.level,this.isEnslaved=Enslaved.isRunning||Date.now()-this.delayTimer<1e3},studyComponent(e){switch(e.type){case TIME_STUDY_TYPE.NORMAL:return o;case TIME_STUDY_TYPE.ETERNITY_CHALLENGE:return s;case TIME_STUDY_TYPE.DILATION:return c;case TIME_STUDY_TYPE.QUANTUM:return y}throw TypeError(`Unknown Time Study type`)}}});var w=function(){var e=this,t=e._self._c;return e._self._setupProxy,t(`div`,{staticClass:`l-time-studies-tab`},[t(`div`,{staticClass:`l-time-study-tree l-time-studies-tab__tree`,style:e.treeStyleObject},[e._l(e.studies,function(n){return t(e.studyComponent(n.study),{key:n.study.type.toString()+n.study.id.toString(),tag:`component`,attrs:{setup:n}})}),t(`svg`,{staticClass:`l-time-study-connection`,style:e.treeStyleObject},e._l(e.connections,function(e,n){return t(`TimeStudyConnection`,{key:`connection`+n,attrs:{setup:e}})}),1)],2)])},T=[],E=r(C,w,T,!1,null,`f96bf139`,null,null),D=E.exports;export{D as default};